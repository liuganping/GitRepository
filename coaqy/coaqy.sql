-- MySQL dump 10.13  Distrib 5.6.15, for Linux (x86_64)
--
-- Host: localhost    Database: coaqy
-- ------------------------------------------------------
-- Server version	5.6.15

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `CgSq_A_Mx`
--

DROP TABLE IF EXISTS `CgSq_A_Mx`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `CgSq_A_Mx` (
  `RecDivTag` date NOT NULL COMMENT '分区日期戳',
  `ID` int(12) unsigned NOT NULL AUTO_INCREMENT COMMENT '明细流水',
  `ZtID` int(10) unsigned NOT NULL COMMENT '申请单ID',
  `Xc` tinyint(3) unsigned NOT NULL COMMENT '项次',
  `CgxMc` varchar(100) NOT NULL COMMENT '货物及服务名称',
  `QtyDw` varchar(5) NOT NULL COMMENT '数量单位',
  `CpXh` varchar(40) DEFAULT NULL COMMENT '产品型号',
  `UnitPrice` decimal(15,2) unsigned NOT NULL COMMENT '单价',
  `Qty` smallint(4) unsigned NOT NULL COMMENT '数量',
  `TotalAmt` decimal(15,2) unsigned NOT NULL,
  `SkfID` smallint(5) unsigned NOT NULL COMMENT '供货商ID',
  `SkrMc` varchar(100) NOT NULL COMMENT '供货商名称',
  `SyBmID` smallint(5) unsigned NOT NULL COMMENT '使用部门ID',
  `BgrID` smallint(5) unsigned NOT NULL COMMENT '保管人ID',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `CgSq_A_Mx_uk1` (`ZtID`,`Xc`),
  UNIQUE KEY `CgSq_A_Mx_uk2` (`ZtID`,`CgxMc`),
  KEY `ZtID` (`ZtID`),
  KEY `SkfID` (`SkfID`),
  KEY `SyBmID` (`SyBmID`),
  KEY `BgrID` (`BgrID`),
  CONSTRAINT `CgSq_A_Mx_fk1` FOREIGN KEY (`ZtID`) REFERENCES `CgSq_A_Zt` (`ID`) ON DELETE CASCADE,
  CONSTRAINT `CgSq_A_Mx_fk2` FOREIGN KEY (`SkfID`) REFERENCES `ZxBg_M_Skf` (`ID`),
  CONSTRAINT `CgSq_A_Mx_fk3` FOREIGN KEY (`SyBmID`) REFERENCES `Pf_M_Org` (`ID`),
  CONSTRAINT `CgSq_A_Mx_fk4` FOREIGN KEY (`BgrID`) REFERENCES `Pf_M_Usr` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `CgSq_A_Mx`
--

LOCK TABLES `CgSq_A_Mx` WRITE;
/*!40000 ALTER TABLE `CgSq_A_Mx` DISABLE KEYS */;
INSERT INTO `CgSq_A_Mx` VALUES ('2018-08-11',1,1,1,'笔记本电脑','台','华为1107',6000.00,10,60000.00,7,'深圳赛世特电子商贸公司',5,10),('2018-08-11',3,1,2,'激光打印机','台','惠普LaserJet 550',11000.00,1,11000.00,9,'北京长城电子有限公司',8,14),('2018-08-23',4,2,1,'货物/服务名1','台','xh-1',902926.48,1,902926.48,11,'北京雷特世纪',5,10),('2018-10-17',5,3,1,'工服','件',NULL,1000.00,10,10000.00,12,'呼和浩特可汗商贸',5,15),('2018-11-21',6,4,1,'台式机','台','Legend 59',4000.00,2,8000.00,13,'北京以太科技有限公司',6,12);
/*!40000 ALTER TABLE `CgSq_A_Mx` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `CgSq_A_Mx_11` BEFORE INSERT ON `CgSq_A_Mx`
  FOR EACH ROW
BEGIN
	declare vRecDivTag DATE;
	declare vCnt tinyint unsigned;
    declare vSkfID smallint unsigned;
    
    # 分区时间戳
    select RecDivTag into vRecDivTag from CgSq_A_Zt where ID=new.ZtID;
    set new.RecDivTag = vRecDivTag;
    
    # 小计
    set new.TotalAmt=new.UnitPrice*new.Qty;

    #维护<预付收款方>资料
    select count(*) into vCnt from ZxBg_M_Skf where SkrMc=new.SkrMc;
    if vCnt>0 then
    	select ID into vSkfID from ZxBg_M_Skf where SkrMc=new.SkrMc;
        set new.SkfID=vSkfID;
    else
    	insert into ZxBg_M_Skf values (null,new.SkrMc,null,null,0,now());
        set new.SkfID=@@identity;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `CgSq_A_Mx_21` AFTER INSERT ON `CgSq_A_Mx`
  FOR EACH ROW
BEGIN
	update CgSq_A_Zt set TotalAmt=TotalAmt+new.TotalAmt where ID=new.ZtID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `CgSq_A_Mx_13` BEFORE UPDATE ON `CgSq_A_Mx`
  FOR EACH ROW
BEGIN
	if new.UnitPrice!=old.UnitPrice or new.Qty!=old.Qty then
    	set new.TotalAmt=new.UnitPrice*new.Qty;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `CgSq_A_Mx_23` AFTER UPDATE ON `CgSq_A_Mx`
  FOR EACH ROW
BEGIN
	if new.TotalAmt!=old.TotalAmt then
    	update CgSq_A_Zt set TotalAmt=TotalAmt-old.TotalAmt+new.TotalAmt where ID=old.ZtID;
    end if;
    
    # 维护供应商主资料
    if new.SkrMc!=old.SkrMc then
    	update ZxBg_M_Skf set SkrMc=new.SkrMc where ID=new.SkfID;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `CgSq_A_Mx_22` AFTER DELETE ON `CgSq_A_Mx`
  FOR EACH ROW
BEGIN
	update CgSq_A_Zt set TotalAmt=TotalAmt-old.TotalAmt where ID=old.ZtID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `CgSq_A_Zt`
--

DROP TABLE IF EXISTS `CgSq_A_Zt`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `CgSq_A_Zt` (
  `RecDivTag` date NOT NULL COMMENT '分区日期戳',
  `ID` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '业务标识',
  `InitUsrID` smallint(5) unsigned NOT NULL COMMENT '申请人ID',
  `InitOrgName` varchar(100) NOT NULL COMMENT '申请人部门',
  `Bt` varchar(100) NOT NULL COMMENT '标题',
  `CgLx` char(1) NOT NULL COMMENT '采购类型',
  `TotalAmt` decimal(15,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '总金额',
  PRIMARY KEY (`ID`),
  KEY `InitUsrID` (`InitUsrID`),
  CONSTRAINT `CgSq_A_Zt_fk1` FOREIGN KEY (`InitUsrID`) REFERENCES `Pf_M_Usr` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `CgSq_A_Zt`
--

LOCK TABLES `CgSq_A_Zt` WRITE;
/*!40000 ALTER TABLE `CgSq_A_Zt` DISABLE KEYS */;
INSERT INTO `CgSq_A_Zt` VALUES ('2018-08-11',1,14,'数据信息部','采购申请20180813-01','b',71000.00),('2018-08-23',2,12,'业务部','采购申请-金额小写转大写','c',902926.48),('2018-10-17',3,13,'审计部','工服采购','a',10000.00),('2018-11-21',4,12,'业务部','采购申请20181121','a',8000.00);
/*!40000 ALTER TABLE `CgSq_A_Zt` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `CgSq_A_Zt_22` AFTER DELETE ON `CgSq_A_Zt`
  FOR EACH ROW
BEGIN
	update Pf_A_AttachInfo 
    set DelTag='Y' 
    where PrimaryName in ('CgSq_A_Zt','CgSq_A_Zt_Qz') and PrimaryID=old.ID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Da_A_Jj`
--

DROP TABLE IF EXISTS `Da_A_Jj`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Da_A_Jj` (
  `RecDivTag` date NOT NULL COMMENT '分区日期戳',
  `ID` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '业务标识',
  `InitUsrID` smallint(5) unsigned NOT NULL COMMENT '交档人ID',
  `InitOrgName` varchar(100) NOT NULL COMMENT '交档人部门',
  `Bt` varchar(100) NOT NULL COMMENT '交档标题',
  `Ms` varchar(400) DEFAULT NULL COMMENT '交档描述',
  `JdLy` char(1) NOT NULL DEFAULT 'A' COMMENT '交档来源',
  `LyYwOrXmID` int(10) unsigned DEFAULT NULL COMMENT '来源业务/项目ID',
  PRIMARY KEY (`ID`),
  KEY `InitUsrID` (`InitUsrID`),
  CONSTRAINT `Da_A_Jj_fk1` FOREIGN KEY (`InitUsrID`) REFERENCES `Pf_M_Usr` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=9 DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Da_A_Jj`
--

LOCK TABLES `Da_A_Jj` WRITE;
/*!40000 ALTER TABLE `Da_A_Jj` DISABLE KEYS */;
INSERT INTO `Da_A_Jj` VALUES ('2018-06-17',1,14,'数据信息部','交档标题20180617',NULL,'A',NULL),('2018-11-02',2,12,'业务部','交接内蒙饭店资料','交接内蒙饭店资料：\r\n1、\r\n2、','A',NULL),('2018-11-03',3,12,'业务部','交接蒙草资料','交接蒙草资料\r\n1\r\n2','A',NULL),('2018-11-03',4,12,'业务部','测试afterhandle','测试afterhandle\r\n1\r\n2','A',NULL),('2018-11-09',5,12,'业务部','测试全文索引20181110','测试全文索引20181110\r\na、\r\nb、','A',NULL),('2018-11-10',6,12,'业务部','测试常用语','测试常用语\r\n1\r\n2','A',NULL),('2018-11-20',7,12,'业务部','测试处理页转流程选人页、无需选人、可调时限','测试处理页转流程选人页、无需选人、可调时限\r\n1\r\n2','A',NULL),('2018-11-27',8,14,'数据信息部','测试意见附件','测试意见附件：\r\n1\r\n2','A',NULL);
/*!40000 ALTER TABLE `Da_A_Jj` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Da_A_Jj_21` AFTER INSERT ON `Da_A_Jj`
  FOR EACH ROW
BEGIN
	declare vZtID INTEGER(11) unsigned;
	declare vSfDfTgHt char;
    
    set vZtID=@@identity;
    
    if new.JdLy='B' then # 交档来源-非业务合同
    	select SfDfTgHt into vSfDfTgHt from WjHq_A_Zt where ID=new.LyYwOrXmID;
        
        if vSfDfTgHt='N' then #己方提供合同
        	insert into Da_A_JjMx
            select now(),null,vZtID,Seq,'N'
            from Pf_A_AttachInfo
            where PrimaryName='WjHq_A_Zt1_TdPdf' and PrimaryID in (select Seq from Pf_A_AttachInfo where PrimaryName='WjHq_A_Zt1' and PrimaryID=new.LyYwOrXmID and DelTag='N') and DelTag='N' #PDF合同
            union 
            select now(),null,vZtID,Seq,'N'
            from Pf_A_AttachInfo
			where PrimaryName='WjHq_A_Zt1' and PrimaryID=new.LyYwOrXmID and DelTag='N' and (FileExt like '.xls%' or FileExt like '.XLS%'); #excel合同附件
        else
        	insert into Da_A_JjMx
            select now(),null,vZtID,Seq,'N'
            from Pf_A_AttachInfo
            where PrimaryName='WjHq_A_Zt1' and PrimaryID=new.LyYwOrXmID and DelTag='N'; #对方提供的合同
        end if;	
        
       	insert into Da_A_JjMx
        select now(),null,vZtID,Seq,'N'
        from Pf_A_AttachInfo
        where PrimaryName='WjHq_A_Zt2' and PrimaryID=new.LyYwOrXmID and DelTag='N'; #法规意见
    end if;
    
    if new.JdLy='C' then # 交档来源-临时项目审查合同
    	select SfDfTgHt into vSfDfTgHt from ZxBg_A_HtSc where ID=new.LyYwOrXmID;
        
        if vSfDfTgHt='N' then #己方提供合同
        	insert into Da_A_JjMx
            select now(),null,vZtID,Seq,'N'
            from Pf_A_AttachInfo
            where PrimaryName='ZxBg_A_HtSc_TdPdf' and PrimaryID in (select Seq from Pf_A_AttachInfo where PrimaryName='ZxBg_A_HtSc' and PrimaryID=new.LyYwOrXmID and DelTag='N') and DelTag='N' #PDF合同
            union 
            select now(),null,vZtID,Seq,'N'
            from Pf_A_AttachInfo
			where PrimaryName='ZxBg_A_HtSc' and PrimaryID=new.LyYwOrXmID and DelTag='N' and (FileExt like '.xls%' or FileExt like '.XLS%'); #excel合同附件
        else
        	insert into Da_A_JjMx
            select now(),null,vZtID,Seq,'N'
            from Pf_A_AttachInfo
            where PrimaryName='ZxBg_A_HtSc' and PrimaryID=new.LyYwOrXmID and DelTag='N'; #对方提供的合同
        end if;	
    end if;
    
    if new.JdLy='D' then # 交档来源-正式立项项目
    	insert into Da_A_JjMx
        select now(),null,vZtID,ID,'N'
        from Pf_M_AttachInfo w
        where PrimaryName='ZxBg_M_XmDir' and DelTag='N' and exists(select 1 from ZxBg_M_XmDir where ID=w.PrimaryID and XmID=new.LyYwOrXmID) and #指定项目目录下
        	!exists(select 1 from Da_A_JjMx w2 where exists(select 1 from Da_A_Jj where ID=w2.ZtID and JdLy='D' and LyYwOrXmID=new.LyYwOrXmID) and w.ID=JjWjIDOrSeq); #未交接过
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Da_A_Jj_22` AFTER DELETE ON `Da_A_Jj`
  FOR EACH ROW
BEGIN
	if old.JdLy='A' then
		update Pf_A_AttachInfo set DelTag='Y' where PrimaryName = 'Da_A_Jj' and PrimaryID=old.ID;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Da_A_JjMx`
--

DROP TABLE IF EXISTS `Da_A_JjMx`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Da_A_JjMx` (
  `RecDivTag` date NOT NULL COMMENT '分区日期戳',
  `ID` int(12) unsigned NOT NULL AUTO_INCREMENT COMMENT '明细流水',
  `ZtID` int(10) unsigned NOT NULL COMMENT '档案交接单ID',
  `JjWjIDOrSeq` int(12) unsigned NOT NULL COMMENT '交接文件ID/Seq',
  `SfJlDyj` char(1) NOT NULL DEFAULT 'N' COMMENT '是否交来打印件',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `Da_A_JjMx_uk` (`ZtID`,`JjWjIDOrSeq`),
  KEY `ZtID` (`ZtID`),
  CONSTRAINT `Da_A_JjMx_fk1` FOREIGN KEY (`ZtID`) REFERENCES `Da_A_Jj` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=16 DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Da_A_JjMx`
--

LOCK TABLES `Da_A_JjMx` WRITE;
/*!40000 ALTER TABLE `Da_A_JjMx` DISABLE KEYS */;
INSERT INTO `Da_A_JjMx` VALUES ('2018-06-17',1,1,475,'Y'),('2018-11-02',2,2,620,'Y'),('2018-11-02',3,2,621,'Y'),('2018-11-03',4,3,628,'Y'),('2018-11-03',5,3,629,'Y'),('2018-11-03',6,3,630,'Y'),('2018-11-03',7,4,631,'Y'),('2018-11-09',8,5,635,'Y'),('2018-11-10',9,6,644,'Y'),('2018-11-20',10,7,649,'Y'),('2018-11-27',11,8,693,'Y'),('2018-11-27',12,8,694,'Y');
/*!40000 ALTER TABLE `Da_A_JjMx` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Da_A_JjMx_11` BEFORE INSERT ON `Da_A_JjMx`
  FOR EACH ROW
BEGIN
	DECLARE vRecDivTag DATE;#时间戳
    
    select RecDivTag into vRecDivTag from Da_A_Jj where ID=new.ZtID;
    set new.RecDivTag=vRecDivTag;	#copy主体时间戳
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Da_A_Jy`
--

DROP TABLE IF EXISTS `Da_A_Jy`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Da_A_Jy` (
  `RecDivTag` date NOT NULL COMMENT '分区日期戳',
  `ID` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '业务标识',
  `InitUsrID` smallint(5) unsigned NOT NULL COMMENT '借阅人ID',
  `InitOrgName` varchar(100) NOT NULL COMMENT '借阅人部门',
  `Bt` varchar(100) NOT NULL COMMENT '借阅标题',
  `Ms` varchar(200) DEFAULT NULL COMMENT '借阅档案内容说明',
  `SqJcSj` datetime NOT NULL COMMENT '申请借出时间',
  `SjJcSj` datetime DEFAULT NULL COMMENT '实际借出时间',
  `GhSj` datetime DEFAULT NULL COMMENT '档案归还时间',
  PRIMARY KEY (`ID`),
  KEY `InitUsrID` (`InitUsrID`),
  CONSTRAINT `Da_A_Jy_fk1` FOREIGN KEY (`InitUsrID`) REFERENCES `Pf_M_Usr` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Da_A_Jy`
--

LOCK TABLES `Da_A_Jy` WRITE;
/*!40000 ALTER TABLE `Da_A_Jy` DISABLE KEYS */;
INSERT INTO `Da_A_Jy` VALUES ('2018-06-18',1,14,'数据信息部','借阅标题20180618','借阅档案内容说明：\r\n1、\r\n2、','2018-06-19 13:30:00','2018-06-18 02:20:45','2018-06-18 02:21:49'),('2018-11-09',2,12,'业务部','档案借阅移动测试','档案借阅移动测试\r\n1\r\n2','2018-11-12 09:00:00','2018-11-09 01:42:18','2018-11-09 01:44:16'),('2018-11-11',3,14,'数据信息部','档案借阅测试处理常用语','档案借阅测试处理常用语\r\n1、\r\n2、','2018-11-15 09:04:00',NULL,NULL);
/*!40000 ALTER TABLE `Da_A_Jy` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Da_A_Jy_22` AFTER DELETE ON `Da_A_Jy`
  FOR EACH ROW
BEGIN
	update Pf_A_AttachInfo set DelTag='Y' where PrimaryName = 'Da_A_Jy' and PrimaryID=old.ID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `DcDb_A_Fk`
--

DROP TABLE IF EXISTS `DcDb_A_Fk`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `DcDb_A_Fk` (
  `RecDivTag` date NOT NULL COMMENT '分区日期戳',
  `ID` int(12) unsigned NOT NULL AUTO_INCREMENT COMMENT '反馈流水',
  `ZtID` int(10) unsigned NOT NULL COMMENT '督办单ID',
  `CjSj` datetime NOT NULL COMMENT '创建时间',
  `QrSj` datetime DEFAULT NULL COMMENT '确认时间',
  `FkNr` varchar(1000) NOT NULL COMMENT '反馈内容',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `DcDb_A_Fk_uk` (`ZtID`,`CjSj`),
  KEY `ZtID` (`ZtID`),
  CONSTRAINT `DcDb_A_Fk_fk1` FOREIGN KEY (`ZtID`) REFERENCES `DcDb_A_Zt` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `DcDb_A_Fk`
--

LOCK TABLES `DcDb_A_Fk` WRITE;
/*!40000 ALTER TABLE `DcDb_A_Fk` DISABLE KEYS */;
INSERT INTO `DcDb_A_Fk` VALUES ('2018-05-24',8,1,'2018-05-26 18:02:52','2018-05-26 18:17:12','1、北京智控美信信息技术有限公司（以下简称：智控国际）专业从事IT外包服务，长期致力于为用户提供包括IT建设投资、业务咨询、IT规划、应用系统实施、IT运营管理等在内的一整套全方位的外包服务；\r\n2、智控国际总部位于中国北京。运营并管理包括北京、长春、吉林、内蒙古、柳州5个拥有国家A级标准的数据中心，运营总面积超过20000平方米，并保持多年的安全运行记录。为了充分满足广大客户的需求，位于沈阳、南宁、上海、深圳和湖南的数据中心正在规划和筹建之中。此外，公司在北京设立了专业的研发中心和技术支持中心，以确保各数据中心的稳定运行，并提供持续的系统升级能力。。'),('2018-05-24',9,1,'2018-05-26 18:17:34','2018-05-26 18:35:05','第二次反馈：\r\n1、\r\n2、'),('2018-05-26',10,2,'2018-05-26 21:58:50','2018-05-27 01:29:14','第一次反馈'),('2018-05-27',11,3,'2018-05-27 01:26:18','2018-05-27 01:28:00','反馈1'),('2018-05-27',12,3,'2018-05-31 18:36:15','2018-05-31 18:36:36','反馈内容：\r\n1\r\n2'),('2018-05-31',13,4,'2018-05-31 19:31:48','2018-05-31 19:32:28','反馈内容：\r\n1\r\n2'),('2018-05-31',14,4,'2018-05-31 19:35:56','2018-05-31 19:36:58','反馈内容：\r\nA、\r\nB、'),('2018-05-31',15,5,'2018-05-31 21:55:52','2018-05-31 21:55:58','测试新增直接确认\r\n测试新增直接确认测试新增直接确认'),('2018-05-31',16,5,'2018-05-31 21:56:14','2018-06-03 20:26:36','好好好好好好\r\n好好好好好好好好好好好好好好\r\n啰嗦'),('2018-08-31',17,6,'2018-08-31 23:30:18','2018-08-31 23:32:02','第一步调研之前已完成'),('2018-08-31',18,6,'2018-08-31 23:32:25','2018-08-31 23:32:41','刚才失败\r\n1\r\n2'),('2018-11-10',19,7,'2018-11-10 15:56:30','2018-11-10 15:57:09','家宝仿得水平高\r\n1\r\n2'),('2018-11-20',20,8,'2018-11-20 13:37:06','2018-11-20 13:37:32','反馈内容20181120\r\n1、\r\n2、');
/*!40000 ALTER TABLE `DcDb_A_Fk` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `DcDb_A_Fk_11` BEFORE INSERT ON `DcDb_A_Fk`
  FOR EACH ROW
label1:
BEGIN
	declare vCnt tinyint unsigned;
	declare vRecDivTag date;#时间戳
    
    select count(*) into vCnt from DcDb_A_Fk where ZtID=new.ZtID and QrSj is null;
    if vCnt>0 then
    	call DcDb_A_Fk_11_err1(); # 前条不确认不能增加新的反馈!
        leave label1;
    end if;
    
    select RecDivTag into vRecDivTag from DcDb_A_Zt where ID=new.ZtID;
    set new.RecDivTag=vRecDivTag;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `DcDb_A_Fk_13` BEFORE UPDATE ON `DcDb_A_Fk`
  FOR EACH ROW
label1:
BEGIN
	declare vCnt tinyint unsigned;
    
	if old.QrSj is not null and new.QrSj is null then
    	select count(*) into vCnt from DcDb_A_Fk where ZtID=new.ZtID and ID>new.ID;
        if vCnt>0 then
        	call DcDb_A_Fk_13_err1(); # 已存在后续反馈，当前反馈不能取消确认！
            leave label1;
        end if;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `DcDb_A_Fk_23` AFTER UPDATE ON `DcDb_A_Fk`
  FOR EACH ROW
BEGIN
	declare vAppUrl,vSy varchar(100);
    declare vInitUsrID smallint unsigned;
    declare vPrompt varchar(1000);
    declare vCnt tinyint unsigned;
    
	if new.QrSj is not null and old.QrSj is null then # 确认
    	#更新催办始点
    	update DcDb_A_Zt set LastAlertTs=AlertTs,AlertTs=now() where ID=new.ZtID; 
        
        #给督办人发提醒邮件
        select AppUrl Into vAppUrl From Pf_M_Ent;
        select Sy,InitUsrID into vSy,vInitUsrID from DcDb_A_Zt where ID=new.ZtID;
        set vPrompt=concat(Pf_UsrcName(vInitUsrID),'，你好！',Char(13),Char(10),'    事由为：[',vSy,']的督办事项有了新的反馈，请及时关注！',
 			char(13),char(10),char(13),char(10),'办公系统访问地址是：',vAppUrl);
 		insert into Pf_D_PromptMail values (null, now(), '督办事项反馈关注提醒',vPrompt, now(), 'N');
 		insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(vInitUsrID),'Z');
    end if;
    
    if new.QrSj is null and old.QrSj is not null then # 取消确认
    	select count(*) into vCnt from DcDb_A_Zt where ID=new.ZtID and AlertTs=LastAlertTs;
        if vCnt=0 then
    		update DcDb_A_Zt set AlertTs=LastAlertTs where ID=new.ZtID; # 恢复AlertTs为LastAlertTs
        else
        	update DcDb_A_Zt set AlertTs=DbKsSj,LastAlertTs=DbKsSj where ID=new.ZtID; # 连续取消，两个催办始点均恢复到DbKsSj！
        end if;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `DcDb_A_Fk_22` AFTER DELETE ON `DcDb_A_Fk`
  FOR EACH ROW
BEGIN
    # 下挂附件标记删除
    update Pf_A_AttachInfo set DelTag='Y' where PrimaryName = 'DcDb_A_Fk' and PrimaryID=old.ID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `DcDb_A_Zt`
--

DROP TABLE IF EXISTS `DcDb_A_Zt`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `DcDb_A_Zt` (
  `RecDivTag` date NOT NULL COMMENT '分区日期戳',
  `ID` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '业务标识',
  `InitUsrID` smallint(5) unsigned NOT NULL COMMENT '督办人ID',
  `InitOrgName` varchar(100) NOT NULL COMMENT '发起部门',
  `Bh` varchar(20) DEFAULT NULL COMMENT '督办编号',
  `Sy` varchar(100) NOT NULL COMMENT '督办事由',
  `Nr` varchar(1000) NOT NULL COMMENT '督办内容',
  `DbKsSj` datetime NOT NULL COMMENT '开始时间',
  `DbWcSj` datetime NOT NULL COMMENT '要求完成时间',
  `CbrID` smallint(5) unsigned NOT NULL COMMENT '承办人ID',
  `DbFkZq` char(1) NOT NULL COMMENT '督办反馈周期',
  `SqYqYy` varchar(200) DEFAULT NULL COMMENT '申请延期的原因',
  `SqYqSj` datetime DEFAULT NULL COMMENT '申请延期时间',
  `YqWcSj` datetime DEFAULT NULL COMMENT '申请延期完成时间',
  `SfTyYq` char(1) DEFAULT NULL COMMENT '是否同意延期',
  `Bz` varchar(200) DEFAULT NULL COMMENT '备注',
  `LastAlertTs` datetime DEFAULT NULL COMMENT '上次催办始点',
  `AlertTs` datetime DEFAULT NULL COMMENT '催办始点',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `ID` (`ID`),
  UNIQUE KEY `Bh` (`Bh`),
  KEY `InitUsrID` (`InitUsrID`),
  KEY `CbrID` (`CbrID`),
  CONSTRAINT `DcDb_A_Zt_fk1` FOREIGN KEY (`InitUsrID`) REFERENCES `Pf_M_Usr` (`ID`),
  CONSTRAINT `DcDb_A_Zt_fk2` FOREIGN KEY (`CbrID`) REFERENCES `Pf_M_Usr` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=9 DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `DcDb_A_Zt`
--

LOCK TABLES `DcDb_A_Zt` WRITE;
/*!40000 ALTER TABLE `DcDb_A_Zt` DISABLE KEYS */;
INSERT INTO `DcDb_A_Zt` VALUES ('2018-05-24',1,14,'数据信息部','DB-201805-01','督办事由2018-05-25测试','督办内容：\r\n1、\r\n2、','2018-05-26 10:15:19','2018-05-28 11:30:00',13,'z',NULL,NULL,NULL,NULL,'-','2018-05-26 10:15:19','2018-05-26 10:15:19'),('2018-05-26',2,14,'数据信息部','DB-201805-02','带申请延期的督办2018-05-26','1、协调院落平整；\r\n2、烧烤平台搭建。','2018-05-26 21:53:00','2018-05-28 17:30:00',15,'r','推土机外协最快下周1','2018-05-26 21:55:33','2018-05-29 17:30:00','Y','-','2018-05-26 21:53:00','2018-05-27 01:29:14'),('2018-05-27',3,7,'运营管理部','DB-201805-03','测试督办催办2018-05-27','测试督办催办2018-05-27\r\n1、\r\n2、','2018-05-27 01:24:46','2018-05-29 17:30:00',14,'r',NULL,NULL,NULL,NULL,'-','2018-05-27 01:28:00','2018-05-31 18:36:36'),('2018-05-31',4,7,'运营管理部','DB-201805-04','督办事由20180602','督办内容：\r\n督办事由20180602\r\n督办事由20180602督办事由20180602','2018-05-31 19:30:02','2018-06-04 18:00:00',15,'r','不好干申请延期1天','2018-05-31 19:33:42','2018-06-05 18:00:00','N','灌灌灌灌灌','2018-05-31 19:32:28','2018-05-31 19:36:58'),('2018-05-31',5,14,'数据信息部','DB-201805-05','测试新增直接确认','测试新增直接确认\r\n测试新增直接确认测试新增直接确认','2018-05-31 21:55:18','2018-06-04 18:00:00',13,'r',NULL,NULL,NULL,NULL,NULL,'2018-05-31 21:55:18','2018-06-03 20:26:36'),('2018-08-31',6,2,'董事长','DB-201808-01','库左旗扶贫方案制定','库左旗扶贫方案制定\r\n1、\r\n2、','2018-08-31 23:29:38','2018-09-07 17:25:00',5,'r',NULL,NULL,NULL,NULL,NULL,'2018-08-31 23:32:02','2018-08-31 23:32:41'),('2018-11-10',7,7,'副总经理','DB-201811-01','督查督办移动测试20181113','督查督办移动测试20181113\r\n1、\r\n2、','2018-11-10 15:54:55','2018-11-15 10:10:00',10,'r',NULL,NULL,NULL,NULL,'-','2018-11-10 15:54:55','2018-11-10 15:57:09'),('2018-11-20',8,2,'董事长','DB-201811-02','督办事由20181120','督办事由20181120\r\n1、\r\n2、','2018-11-20 13:36:32','2018-11-23 17:30:00',5,'r','太复杂','2018-11-20 13:38:14','2018-11-30 17:30:00','N',NULL,'2019-04-01 17:25:06','2019-04-18 08:59:56');
/*!40000 ALTER TABLE `DcDb_A_Zt` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `DcDb_A_Zt_13` BEFORE UPDATE ON `DcDb_A_Zt`
  FOR EACH ROW
label1:
BEGIN
	if new.DbKsSj!=old.DbKsSj or new.DbWcSj!=old.DbWcSj then
    	if new.DbKsSj>=new.DbWcSj then
        	call DcDb_A_Zt_13_err1(); # 【开始时间】在【要求完成时间】之前！
            leave label1;
        end if;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `DcDb_A_Zt_12` BEFORE DELETE ON `DcDb_A_Zt`
  FOR EACH ROW
BEGIN
    # 明细下挂附件标记删除
    update Pf_A_AttachInfo set DelTag='Y' where PrimaryName = 'DcDb_A_Fk' and 
    	exists(select 1 from DcDb_A_Fk where Pf_A_AttachInfo.PrimaryID=ID and ZtID=old.ID);
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `DcDb_A_Zt_22` AFTER DELETE ON `DcDb_A_Zt`
  FOR EACH ROW
BEGIN
	update Pf_A_AttachInfo set DelTag='Y' where PrimaryName = 'DcDb_A_Zt' and PrimaryID=old.ID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Dsj_A_Xd`
--

DROP TABLE IF EXISTS `Dsj_A_Xd`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Dsj_A_Xd` (
  `RecDivTag` date NOT NULL COMMENT '分区日期戳',
  `ID` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '标识',
  `YdrID` smallint(5) unsigned NOT NULL COMMENT '阅读人ID',
  `YdrBm` varchar(100) NOT NULL COMMENT '阅读人部门',
  `BookID` smallint(5) unsigned NOT NULL COMMENT '阅读书目ID',
  `Xd` varchar(800) NOT NULL COMMENT '心得',
  `FbSj` datetime DEFAULT NULL COMMENT '发表时间',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `Dsj_A_Xd_uk` (`YdrID`,`BookID`),
  KEY `YdrID` (`YdrID`),
  KEY `BookID` (`BookID`),
  CONSTRAINT `Dsj_A_Xd_fk1` FOREIGN KEY (`YdrID`) REFERENCES `Pf_M_Usr` (`ID`),
  CONSTRAINT `Dsj_A_Xd_fk2` FOREIGN KEY (`BookID`) REFERENCES `Dsj_M_Book` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Dsj_A_Xd`
--

LOCK TABLES `Dsj_A_Xd` WRITE;
/*!40000 ALTER TABLE `Dsj_A_Xd` DISABLE KEYS */;
INSERT INTO `Dsj_A_Xd` VALUES ('2018-05-30',1,10,'运营管理部',3,'1、民四条约签定后日本开始殖民以防沙俄蚕食；\r\n2、张作霖阳奉阴违不租给日本人耕地；\r\n3、中东铁路运营问题；\r\n4、随后柳条湖事件加速。','2018-05-30 07:40:36'),('2018-05-30',2,14,'数据信息部',3,'军部裹挟天皇、煽动爱国民粹\r\n一发不可收拾\r\n全民参战','2018-05-30 07:44:49'),('2018-10-28',3,7,'副总经理',3,'柳条湖事件\r\n中村事件\r\n九一八事变','2018-10-28 03:06:27');
/*!40000 ALTER TABLE `Dsj_A_Xd` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Dsj_A_Xd_13` BEFORE UPDATE ON `Dsj_A_Xd`
  FOR EACH ROW
label1:
BEGIN
	declare vCnt tinyint unsigned;
    
    if new.FbSj is null and old.FbSj is not null then # 取消发表
    	select count(*) into vCnt
        from Dsj_A_XdYdRcd
        where XdID=new.ID;
        if vCnt>0 then
        	call Dsj_A_Xd_13_err1(); # 已有人看了你的心得，取消发表无效！
            leave label1;
        end if;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Dsj_A_Xd_22` AFTER DELETE ON `Dsj_A_Xd`
  FOR EACH ROW
BEGIN
	update Pf_A_AttachInfo set DelTag='Y' where PrimaryName = 'Dsj_A_Xd' and PrimaryID=old.ID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Dsj_A_XdYdRcd`
--

DROP TABLE IF EXISTS `Dsj_A_XdYdRcd`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Dsj_A_XdYdRcd` (
  `RecDivTag` date NOT NULL COMMENT '分区日期戳',
  `ID` int(12) unsigned NOT NULL AUTO_INCREMENT COMMENT '标识',
  `XdID` int(10) unsigned NOT NULL COMMENT '读书心得流水',
  `YyTsID` smallint(5) unsigned NOT NULL COMMENT '已阅同事ID',
  `YdSj` datetime NOT NULL COMMENT '阅读时间',
  `Pj` varchar(800) DEFAULT NULL COMMENT '评价',
  `PjSj` datetime DEFAULT NULL COMMENT '评价时间',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `Dsj_A_XdYdRcd_uk` (`XdID`,`YyTsID`),
  KEY `XdID` (`XdID`),
  KEY `YdTsID` (`YyTsID`),
  CONSTRAINT `Dsj_A_XdYdRcd_fk1` FOREIGN KEY (`XdID`) REFERENCES `Dsj_A_Xd` (`ID`) ON DELETE CASCADE,
  CONSTRAINT `Dsj_A_XdYdRcd_fk2` FOREIGN KEY (`YyTsID`) REFERENCES `Pf_M_Usr` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=13 DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Dsj_A_XdYdRcd`
--

LOCK TABLES `Dsj_A_XdYdRcd` WRITE;
/*!40000 ALTER TABLE `Dsj_A_XdYdRcd` DISABLE KEYS */;
INSERT INTO `Dsj_A_XdYdRcd` VALUES ('2018-05-30',1,1,13,'2018-05-30 07:41:45','深刻的付哥','2018-05-30 07:42:15'),('2018-05-30',2,2,2,'2018-05-30 07:45:12','你可以当历史老师','2018-05-30 08:13:08'),('2018-05-30',3,1,2,'2018-05-30 07:45:50','去兼职历史老师吧■','2018-05-30 07:49:01'),('2018-05-30',4,2,13,'2018-05-30 08:11:36',NULL,NULL),('2018-05-30',5,1,14,'2018-10-27 23:23:31','强强强强++--','2018-11-11 03:15:40'),('2018-05-30',6,1,12,'2018-10-27 23:24:46',NULL,NULL),('2018-05-30',7,1,7,'2018-10-27 23:31:02','点对点','2018-10-27 23:31:11'),('2018-10-28',8,3,14,'2018-11-03 07:40:45','中肯','2018-11-11 03:12:54'),('2018-10-28',9,3,10,'2018-11-14 19:06:54',NULL,NULL),('2018-05-30',10,2,10,'2018-11-14 19:11:47','牛','2018-11-16 22:44:23'),('2018-10-28',11,3,12,'2018-11-26 20:05:36',NULL,NULL),('2018-05-30',12,2,12,'2018-11-26 20:06:07',NULL,NULL);
/*!40000 ALTER TABLE `Dsj_A_XdYdRcd` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Dsj_A_XdYdRcd_11` BEFORE INSERT ON `Dsj_A_XdYdRcd`
  FOR EACH ROW
BEGIN
	declare vRecDivTag date;
    
    select RecDivTag into vRecDivTag
    from Dsj_A_Xd
    where ID=new.XdID;
    
    set new.RecDivTag=vRecDivTag;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Dsj_A_XdYdRcd_23` AFTER UPDATE ON `Dsj_A_XdYdRcd`
  FOR EACH ROW
BEGIN
	declare vAppUrl varchar(100);
    declare vYdrID smallint unsigned;
    declare vSm varchar(40);
    declare vPrompt varchar(1000);
    
    if new.PjSj is not null and old.PjSj is null then # 确认评价
        #给读书心得主人发提醒邮件
        select AppUrl Into vAppUrl From Pf_M_Ent;
        select a.YdrID,m.Sm into vYdrID,vSm from Dsj_A_Xd a,Dsj_M_Book m where a.ID=new.XdID and a.BookID=m.ID;
        set vPrompt=concat(Pf_UsrcName(vYdrID),'，你好！',Char(13),Char(10),'    ',Pf_UsrcName(new.YyTsID),
        	'对你阅读[',vSm,']的心得做了评价，有兴趣可以去OA读书角看一下！',char(13),char(10),char(13),char(10),'办公系统访问地址是：',vAppUrl);
 		insert into Pf_D_PromptMail values (null, now(), '读书心得评价提醒',vPrompt, now(), 'N');
 		insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(vYdrID),'Z');
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Dsj_M_Book`
--

DROP TABLE IF EXISTS `Dsj_M_Book`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Dsj_M_Book` (
  `ID` smallint(5) unsigned NOT NULL AUTO_INCREMENT COMMENT '标识',
  `Sm` varchar(40) NOT NULL COMMENT '书名',
  `Zz` varchar(40) NOT NULL COMMENT '作者',
  `Jj` varchar(400) NOT NULL COMMENT '简介',
  `XqYdSj` datetime NOT NULL COMMENT '限期阅读时间',
  `DjSj` datetime DEFAULT NULL COMMENT '登记时间',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `ID` (`ID`),
  UNIQUE KEY `Dsj_M_Book_uk` (`Sm`,`Zz`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Dsj_M_Book`
--

LOCK TABLES `Dsj_M_Book` WRITE;
/*!40000 ALTER TABLE `Dsj_M_Book` DISABLE KEYS */;
INSERT INTO `Dsj_M_Book` VALUES (1,'面相','岳不群','如何看相\r\n本书从统计学角度详细阐明看相的最佳实践','2018-06-01 17:30:00','2018-05-30 07:39:03'),(3,'日本为什么侵华','冯学荣','作者深入日本图书馆翻阅大量真实史料\r\n融入自己的客观分析成书。。。','2018-05-31 17:30:00','2018-05-30 07:37:57');
/*!40000 ALTER TABLE `Dsj_M_Book` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Dsj_M_Book_13` BEFORE UPDATE ON `Dsj_M_Book`
  FOR EACH ROW
label1:
BEGIN
	declare vCnt tinyint unsigned;
    
	if new.DjSj is null then
    	if new.XqYdSj<=now() then
        	call Dsj_M_Book_13_err1(); # <限期阅读时间>是将来的时间！
            leave label1;
        end if;
    else
    	if new.XqYdSj<=new.DjSj then
        	call Dsj_M_Book_13_err2(); # <限期阅读时间>是登记时间之后的时间！
            leave label1;
        end if;
    end if;
    
    if new.DjSj is null and old.DjSj is not null then #取消登记
    	select count(*) into vCnt
        from Dsj_A_Xd
        where BookID=new.ID;
        if vCnt>0 then
        	call Dsj_M_Book_13_err3(); # 有人阅读取消无效！
            leave label1;
        end if;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Dsj_M_Book_22` AFTER DELETE ON `Dsj_M_Book`
  FOR EACH ROW
BEGIN
	update Pf_M_AttachInfo set DelTag='Y' where PrimaryName = 'Dsj_M_Book' and PrimaryID=old.ID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `GsLt_A_Pl`
--

DROP TABLE IF EXISTS `GsLt_A_Pl`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `GsLt_A_Pl` (
  `RecDivTag` date NOT NULL,
  `ID` int(12) unsigned NOT NULL AUTO_INCREMENT,
  `BizID` int(11) unsigned NOT NULL,
  `PlID` int(12) unsigned DEFAULT NULL,
  `SmallOrd` smallint(5) unsigned NOT NULL,
  `TreeLevel` tinyint(3) unsigned NOT NULL,
  `BigOrdCode` varchar(30) NOT NULL,
  `PlRyUsrID` smallint(5) unsigned NOT NULL,
  `PlNr` mediumtext NOT NULL,
  `TjSj` datetime DEFAULT NULL,
  `SfBpb` char(1) NOT NULL DEFAULT 'N',
  PRIMARY KEY (`ID`) USING BTREE,
  UNIQUE KEY `ID` (`ID`) USING BTREE,
  KEY `BizID` (`BizID`) USING BTREE,
  KEY `PlID` (`PlID`) USING BTREE,
  KEY `PlRyUsrID` (`PlRyUsrID`) USING BTREE,
  CONSTRAINT `GsLt_A_Pl_fk1` FOREIGN KEY (`BizID`) REFERENCES `GsLt_A_Zt` (`ID`) ON DELETE CASCADE,
  CONSTRAINT `GsLt_A_Pl_fk2` FOREIGN KEY (`PlID`) REFERENCES `GsLt_A_Pl` (`ID`) ON DELETE CASCADE,
  CONSTRAINT `GsLt_A_Pl_fk3` FOREIGN KEY (`PlRyUsrID`) REFERENCES `Pf_M_Usr` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=45 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `GsLt_A_Pl`
--

LOCK TABLES `GsLt_A_Pl` WRITE;
/*!40000 ALTER TABLE `GsLt_A_Pl` DISABLE KEYS */;
INSERT INTO `GsLt_A_Pl` VALUES ('2018-07-12',37,1,NULL,1,1,'001',5,'<p>高屋建瓴<img alt=\"yes\" src=\"http://localhost:7001/coaqy/FileApp/GsLt/../../ckeditor/plugins/smiley/images/thumbs_up.png\" style=\"height:23px; width:23px\" title=\"yes\" /></p>\r\n','2018-07-16 00:42:42','N'),('2018-07-12',38,1,37,1,2,'001001',13,'<p>紧跟老大思路<img alt=\"laugh\" src=\"http://localhost:7001/coaqy/FileApp/GsLt/../../ckeditor/plugins/smiley/images/teeth_smile.png\" style=\"height:23px; width:23px\" title=\"laugh\" /></p>\r\n','2018-07-16 00:44:03','N'),('2018-07-16',39,2,NULL,1,1,'001',14,'<p>请诸位老总发表评论</p>\r\n','2018-07-16 00:55:19','N'),('2018-07-16',40,2,NULL,2,1,'002',4,'<p><span style=\"background-color:#ffffff; color:#333333\">三年了，有人大张旗鼓明目张胆的打着比亚迪的名义在做广告推广，比亚迪却说不知道此事，真的是见了鬼了，深挖此事，其中必有黑幕，这件事从头至尾谁是最大的获利方谁就是幕后黑手。<img alt=\"angry\" src=\"http://localhost:7001/coaqy/FileApp/GsLt/../../ckeditor/plugins/smiley/images/angry_smile.png\" style=\"height:23px; width:23px\" title=\"angry\" /></span></p>\r\n','2018-07-16 00:58:45','N'),('2018-07-16',41,2,39,1,2,'001001',4,'<p><span style=\"background-color:#ffffff; color:#333333\">能被骗三年。你BYD公司孤陋寡闻吗？三个月消息吹不到你BYD。三年你BYD还不知道？这做的是推广宣传耶！BYD你真不要脸到这个地步。傻子都不会相信你。</span></p>\r\n\r\n<p><span style=\"background-color:#ffffff; color:#333333\"><img alt=\"\" src=\"/coaqy/FramePub/FileOperate/ShowAppImage.jsp?AppImageFileSeq=532\" style=\"height:300px; width:400px\" /></span></p>\r\n','2018-07-16 00:59:48','N'),('2018-07-16',42,2,41,1,3,'001001001',8,'<p><span style=\"background-color:#ffffff; color:#333333\">这种做法不就是我们做工程的经常遇到的吗？挂靠某个公司，接下一个工程后，为了方便，私刻了挂靠的那个公司的公章！那个工程出了问题，被挂靠的那个公司自然推得干干净净！</span></p>\r\n\r\n<p><span style=\"background-color:#ffffff; color:#333333\"><img alt=\"\" src=\"/coaqy/FramePub/FileOperate/ShowAppImage.jsp?AppImageFileSeq=533\" style=\"height:216px; width:400px\" /></span></p>\r\n','2018-07-16 01:04:01','N'),('2018-07-16',43,2,NULL,3,1,'003',7,'<p><span style=\"background-color:#ffffff; color:#333333\">比亚迪？这是多么随意的一个公司，发生这么大的事情，竟然想撇清关系可能吗？有问题要第一时间解决自己内部管理的问题，而不是急着撇清关系<img alt=\"devil\" src=\"http://localhost:7001/coaqy/FileApp/GsLt/../../ckeditor/plugins/smiley/images/devil_smile.png\" style=\"height:23px; width:23px\" title=\"devil\" /></span></p>\r\n','2018-07-16 01:06:36','N'),('2018-07-16',44,2,43,1,2,'003001',3,'<p><span style=\"background-color:#ffffff; color:#333333\">据本道分析，这是比亚迪高层博弈，李娟和陈振宇是输的一方，也是输方暗地设下的棋子和兵马，博弈结果出来，胜的一方肯定是不会承认输方的棋子身份也不会为他们的劳动付账。输的一方又没能力和权利来为这个团队买单，所以就成了这个结局，按理说李娟的派系应该出来担责，不能成了就拿好处败了却不认账，唉，反正都不是好鸟</span></p>\r\n\r\n<p><img alt=\"laugh\" src=\"http://localhost:7001/coaqy/FileApp/GsLt/../../ckeditor/plugins/smiley/images/teeth_smile.png\" style=\"height:23px; width:23px\" title=\"laugh\" /></p>\r\n','2018-07-16 01:22:31','N');
/*!40000 ALTER TABLE `GsLt_A_Pl` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `GsLt_A_Pl_11` BEFORE INSERT ON `GsLt_A_Pl`
  FOR EACH ROW
BEGIN
 	declare vRecDivTag date;
 	
 	select RecDivTag into vRecDivTag from GsLt_A_Zt where ID=new.BizID;
 	set new.RecDivTag=vRecDivTag;
 	
 	if new.PlID is null then
 		set new.SmallOrd=(select COALESCE(max(SmallOrd),0)+1 from GsLt_A_Pl where BizID = new.BizID and PlID is null);
 		set new.TreeLevel=1;
 		set new.BigOrdCode=LPAD(CONCAT(new.SmallOrd,''),3,'0');
 	else
 		set new.SmallOrd=(select COALESCE(max(SmallOrd),0)+1 from GsLt_A_Pl where PlID = new.PlID);
 		select TreeLevel + 1, concat(BigOrdCode,LPAD(concat(new.SmallOrd,''),3,'0')) 
 		into @TreeLevel, @BigOrdCode 
 		from GsLt_A_Pl 
 		where ID = new.PlID;
 		
 		set new.TreeLevel=@TreeLevel;
 		set new.BigOrdCode=@BigOrdCode;
 	end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `GsLt_A_Pl_21` AFTER INSERT ON `GsLt_A_Pl`
  FOR EACH ROW
BEGIN
    update GsLt_A_Zt set PlRd=PlRd+1 where ID=new.BizID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `GsLt_A_Pl_23` AFTER UPDATE ON `GsLt_A_Pl`
  FOR EACH ROW
BEGIN
 	declare vAppUrl,vYt varchar(100);
 	declare vCySfNm char;
 	declare vPrompt varchar(1000);
 	declare vInitUsrID,vZdPlRyUsrID smallint unsigned;
	declare vPlr varchar(110);
	 	
 	if old.TjSj is null and new.TjSj is not null then
 		Select AppUrl Into vAppUrl From Pf_M_Ent;
 		select Yt,InitUsrID,CySfNm into vYt,vInitUsrID,vCySfNm from GsLt_A_Zt where ID=new.BizID;
		if vCySfNm='N' then
			set vPlr=concat(Pf_OrgFullName(Pf_UsrMainOrgID(new.PlRyUsrID)),'/',Pf_UsrcName(new.PlRyUsrID));
		else
			set vPlr='有人';
		end if;
 		
 		if new.PlID is null then 
 			# 针对议题本身提交评论
 			set vPrompt=concat(Pf_UsrcName(vInitUsrID),'，你好！',Char(13),Char(10),'    针对你发起的议题[',vYt,']，[',vPlr,']发表了评论，可以去公司OA看看。',
 				char(13),char(10),char(13),char(10),'公司OA访问地址是：',vAppUrl);

 			insert into Pf_D_PromptMail values (null, now(), '议题新评论提醒',vPrompt, now(), 'N');
 			insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(vInitUsrID),'Z');
 		else
 			# 针对评论提交的评论
 			select PlRyUsrID into vZdPlRyUsrID from GsLt_A_Pl where ID=new.PlID;
 			
 			set vPrompt=concat(Pf_UsrcName(vZdPlRyUsrID),'，你好！',Char(13),Char(10),'    针对议题[',vYt,']你发的评论，[',vPlr,']@你发表了评论，可以去公司OA看看。',
 				char(13),char(10),char(13),char(10),'公司OA访问地址是：',vAppUrl);
 			insert into Pf_D_PromptMail values (null, now(), '议题新评论提醒',vPrompt, now(), 'N');
 			insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(vZdPlRyUsrID),'Z');
 		end if;
 	end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `GsLt_A_Pl_22` AFTER DELETE ON `GsLt_A_Pl`
  FOR EACH ROW
BEGIN
	update GsLt_A_Zt set PlRd=PlRd-1 where ID=old.BizID;
	update Pf_A_AttachInfo set DelTag='Y' where PrimaryName in ('GsLt_A_Pl','GsLt_A_PlNq') and PrimaryID=old.ID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `GsLt_A_Tp`
--

DROP TABLE IF EXISTS `GsLt_A_Tp`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `GsLt_A_Tp` (
  `RecDivTag` date NOT NULL COMMENT '分区日期戳',
  `ID` int(12) unsigned NOT NULL AUTO_INCREMENT COMMENT '投票标识',
  `BizID` int(10) unsigned NOT NULL COMMENT '业务标识',
  `TpRyUsrID` smallint(5) unsigned NOT NULL COMMENT '投票人员ID',
  `TpXz` char(1) NOT NULL DEFAULT 'P' COMMENT '投票选择',
  `TjSj` datetime DEFAULT NULL COMMENT '提交时间',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `GsLt_A_Tp_uk` (`BizID`,`TpRyUsrID`),
  KEY `BizID` (`BizID`),
  KEY `TpRyUsrID` (`TpRyUsrID`),
  CONSTRAINT `GsLt_A_Tp_fk1` FOREIGN KEY (`BizID`) REFERENCES `GsLt_A_Zt` (`ID`) ON DELETE CASCADE,
  CONSTRAINT `GsLt_A_Tp_fk2` FOREIGN KEY (`TpRyUsrID`) REFERENCES `Pf_M_Usr` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=46 DEFAULT CHARSET=utf8 PACK_KEYS=0 COMMENT='公司论坛投票记录';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `GsLt_A_Tp`
--

LOCK TABLES `GsLt_A_Tp` WRITE;
/*!40000 ALTER TABLE `GsLt_A_Tp` DISABLE KEYS */;
INSERT INTO `GsLt_A_Tp` VALUES ('2018-07-12',31,1,1,'P',NULL),('2018-07-12',32,1,2,'P',NULL),('2018-07-12',33,1,3,'P',NULL),('2018-07-12',34,1,4,'P',NULL),('2018-07-12',35,1,5,'P','2018-07-16 00:42:54'),('2018-07-12',36,1,6,'P',NULL),('2018-07-12',37,1,7,'P',NULL),('2018-07-12',38,1,8,'P',NULL),('2018-07-12',39,1,9,'P',NULL),('2018-07-12',40,1,10,'P',NULL),('2018-07-12',41,1,11,'P',NULL),('2018-07-12',42,1,12,'P',NULL),('2018-07-12',43,1,13,'P','2018-07-16 00:44:16'),('2018-07-12',44,1,14,'R','2018-07-16 00:45:34'),('2018-07-12',45,1,15,'P',NULL);
/*!40000 ALTER TABLE `GsLt_A_Tp` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `GsLt_A_Tp_11` BEFORE INSERT ON `GsLt_A_Tp`
  FOR EACH ROW
BEGIN
 	declare vRecDivTag date;
 	
 	select RecDivTag into vRecDivTag from GsLt_A_Zt where ID=new.BizID;
 	set new.RecDivTag=vRecDivTag;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `GsLt_A_Tp_21` AFTER INSERT ON `GsLt_A_Tp`
  FOR EACH ROW
BEGIN
	update GsLt_A_Zt set ZlRs=ZlRs+1 where ID=new.BizID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `GsLt_A_Tp_23` AFTER UPDATE ON `GsLt_A_Tp`
  FOR EACH ROW
BEGIN
	if new.TjSj is not null and old.TjSj is null then
    	update GsLt_A_Zt set ZlRs=ZlRs-1 where ID=new.BizID;
        
        if new.TpXz='P' then
        	update GsLt_A_Zt set ZcRs=ZcRs+1 where ID=new.BizID;
        else
        	update GsLt_A_Zt set FdRs=FdRs+1 where ID=new.BizID;
        end if;
    end if;

	if new.TjSj is null and old.TjSj is not null then
    	update GsLt_A_Zt set ZlRs=ZlRs+1 where ID=new.BizID;
        
        if new.TpXz='P' then
        	update GsLt_A_Zt set ZcRs=ZcRs-1 where ID=new.BizID;
        else
        	update GsLt_A_Zt set FdRs=FdRs-1 where ID=new.BizID;
        end if;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `GsLt_A_Zt`
--

DROP TABLE IF EXISTS `GsLt_A_Zt`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `GsLt_A_Zt` (
  `RecDivTag` date NOT NULL COMMENT '分区日期戳',
  `ID` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '业务标识',
  `InitUsrID` smallint(5) unsigned NOT NULL COMMENT '楼主ID',
  `InitOrgName` varchar(100) NOT NULL COMMENT '楼主部门',
  `Yt` varchar(100) NOT NULL COMMENT '议题',
  `Nr` mediumtext COMMENT '内容',
  `CyFwLb` char(1) NOT NULL DEFAULT 'N' COMMENT '参与范围类别',
  `CySfNm` char(1) NOT NULL DEFAULT 'Y' COMMENT '参与是否匿名',
  `SfXyTp` char(1) NOT NULL DEFAULT 'N' COMMENT '是否需要投票',
  `CyRd` smallint(5) unsigned NOT NULL DEFAULT '0' COMMENT '参与热度',
  `PlRd` smallint(5) unsigned NOT NULL DEFAULT '0' COMMENT '评论热度',
  `ZcRs` smallint(5) unsigned NOT NULL DEFAULT '0' COMMENT '赞成人数',
  `FdRs` smallint(5) unsigned NOT NULL DEFAULT '0' COMMENT '反对人数',
  `ZlRs` smallint(5) unsigned NOT NULL DEFAULT '0' COMMENT '未表态人数',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `Yt` (`Yt`),
  KEY `InitUsrID` (`InitUsrID`),
  CONSTRAINT `GsLt_A_Zt_fk1` FOREIGN KEY (`InitUsrID`) REFERENCES `Pf_M_Usr` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8 PACK_KEYS=0 COMMENT='公司论坛';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `GsLt_A_Zt`
--

LOCK TABLES `GsLt_A_Zt` WRITE;
/*!40000 ALTER TABLE `GsLt_A_Zt` DISABLE KEYS */;
INSERT INTO `GsLt_A_Zt` VALUES ('2018-07-12',1,2,'董事长总经理','关于保理业务上支撑系统请大家畅所欲言','<p>&nbsp;<span style=\"background-color:#ffffff; color:#191919\">中新经纬客户端7月13日电 据外交部官网13日消息，在7月13日外交部例行记者会上，外交部发言人华春莹对中方是否会对美企进行攻击作出回应。</span></p>\r\n\r\n<p><span style=\"background-color:#ffffff; color:#191919\"><img alt=\"\" src=\"/coaqy/FramePub/FileOperate/ShowAppImage.jsp?AppImageFileSeq=524\" style=\"height:295px; width:500px\" /></span></p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px; text-align:left\">有记者提问，有美国媒体报道称，中方可能将使用其他方法反制美国，如延长美货物通关时间、放慢美企业并购审批过程等，你能否证实？中方是否会对美企进行攻击？</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px; text-align:left\">华春莹回应称，关于中方采取何种反制措施，中国商务部门会妥善处理。华春莹强调，作用力有多大，产生的反作用力就有多大。中国政府会维护好自身正当合法权益。(中新经纬APP)</p>\r\n\r\n<p>&nbsp;</p>\r\n','A','Y','Y',4,2,2,1,12),('2018-07-16',2,5,'审计部','长生生物狂犬病疫苗被停产','<p>&nbsp;<img alt=\"\" src=\"/coaqy/FramePub/FileOperate/ShowAppImage.jsp?AppImageFileSeq=531\" style=\"height:297px; width:400px\" /></p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px; text-align:left\">昨晚，国家药品监督管理局发布一则通告引发市场高度关注。其组织对长春长生开展飞行检查，检查组发现，长春长生在冻干人用狂犬病疫苗生产过程中存在记录造假等严重违反《药品生产质量管理规范》(药品GMP)行为。根据检查结果，国家药监局迅速责成吉林省食品药品监督管理局收回长春长生相关《药品GMP证书》，责令长春长生停止狂犬病疫苗生产。</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px; text-align:left\">昨晚，国家药品监督管理局发布通告表示，发现长春长生冻干人用狂犬病疫苗生产存在记录造假等严重行为，责令其停止生产狂犬病疫苗。市场注意到，长春长生为上市公司长生生物核心全资子公司，是长生生物重要营收来源。</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px; text-align:left\">最新</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px; text-align:left\">长春长生狂犬病疫苗遭停产</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px; text-align:left\">昨晚，国家药品监督管理局发布一则通告引发市场高度关注。其组织对长春长生开展飞行检查，检查组发现，长春长生在冻干人用狂犬病疫苗生产过程中存在记录造假等严重违反《药品生产质量管理规范》(药品GMP)行为。根据检查结果，国家药监局迅速责成吉林省食品药品监督管理局收回长春长生相关《药品GMP证书》，责令长春长生停止狂犬病疫苗生产。此次飞行检查所有涉事批次产品尚未出厂和上市销售，全部产品已得到有效控制。</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px; text-align:left\">针对此次飞行检查发现长春长生在生产质量管理中存在的违法违规行为，国家药监局专项督查组明确表示，&ldquo;绝不姑息，坚决依法依规严肃查处，涉嫌构成犯罪的，一律移送公安机关予以严惩。&rdquo;</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px; text-align:left\">有律师对外界表示，生产记录造假要具体情况具体分析，如果生产记录造假涉嫌犯罪可能会被追究刑事责任，还可能开展行业整顿，全面检查各疫苗生产厂家。</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px; text-align:left\">截至北京青年报记者发稿，该公司未有最新公告发布。</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px; text-align:left\">进展</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px; text-align:left\">要求就地封存狂犬病疫苗</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px; text-align:left\">市场注意到，在国家药监局披露上述通告之前，有媒体在昨天下午报道称，长生生物发布紧急通知，要求各省份推广团队立即通知辖区内的区县疾控机构及接种单位立即停止使用该公司的狂犬病疫苗，立即就地封存该公司狂犬病疫苗。</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px; text-align:left\">长生生物在通知中强调，公司立即启动召回程序，请各单位按召回规定给予配合。并要求各推广团队采用传真、电话、网络等形式，通知到辖区各区县及接种单位。</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px; text-align:left\">长生生物医学咨询部一位工作人员对外界表示，上述紧急通知情况属实。该工作人员强调说：&ldquo;不是药监部门查出有问题，是我们自己的行为，可能对于我们以往的质量指标怕存在一些问题，所以我们要召回，检测一下市场上现有指标的情况。我们不太清楚具体是什么样的原因，可能是出于对产品安全性方面的考虑，批量有多大目前也不太清楚。&rdquo;</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px; text-align:left\">追访</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px; text-align:left\">去年11月疫苗曾被点名</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px; text-align:left\">据了解，长春长生生物科技有限责任公司(前身为长春长生生物科技股份有限公司)创立于1992年8月18日，是一家从事人用疫苗研发、生产、销售的国家高新技术企业。公司已拥有冻干甲型肝炎减毒活疫苗、吸附无细胞百白破联合疫苗两个一类疫苗品种以及水痘减毒活疫苗、冻干人用狂犬病疫苗(Vero细胞)、流感病毒裂解疫苗、ACYW135群脑膜炎球菌多糖疫苗等四个二类疫苗品种，是国内疫苗企业产品品类最为丰富的民营企业之一。</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px; text-align:left\">截至2017年末，公司总资产45亿元，净资产39亿元，公司市值近200亿元，员工1000余人。长春长生通过资产重组于2015年12月在深圳证券交易所上市。</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px; text-align:left\">市场注意到，在2017年，长生生物的疫苗曾因出现问题被原国家食品药品监督管理总局点名。2017年11月，总局新闻发言人介绍，长春长生生物科技有限公司生产的某批次疫苗共计25.26万支，全部销往山东省疾病预防控制中心；武汉生物制品研究所有限责任公司生产该批次疫苗共计40.052万支，销往重庆市疾病预防控制中心19.052万支，销往河北省疾病预防控制中心21万支。</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px; text-align:left\">原国家食药监总局要求立即停止使用不合格产品，并责令疫苗生产企业报告两批次不合格疫苗出厂检验结果，对留样重新检验，认真查找不合格原因。</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px; text-align:left\">热点</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px; text-align:left\">涉事公司系上市公司子公司</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px; text-align:left\">资料显示，长春长生（原长春长生生物科技股份有限公司）为长生生物核心全资子公司，是长生生物重要营收来源。在业内人士看来，长春长生此次事件恐对长生生物经营产生重大影响。</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px; text-align:left\">根据通知公告，国家药品监督管理局已要求吉林省食品药品监督管理局收回长春长生《药品GMP证书》。一位医药行业人士分析指出，GMP证书被没收，意味着企业不能再进行证书上相关药品的生产。值得一提的是，冻干人用狂犬病疫苗是长春长生目前主要在售产品之一。</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px; text-align:left\">相关资料显示，长生生物狂犬病疫苗在批签发数量上在国内占据靠前位置。长生生物在2017年年报中介绍称，目前，长生生物在售产品包括一类疫苗和二类疫苗，共有6个品种。2017年中国狂犬病疫苗批签发数据显示，长生生物的狂犬病疫苗约占全国1/4的销量。</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px; text-align:left\">从财务数据来看，长春长生则是长生生物的主要营收来源。数据显示，2017年，长生生物实现的营收为15.53亿元，同期长春长生的营收约为15.39亿元，占上市公司总营收的比重达到99.1%。相对应的是，2017年长生生物实现的归属净利润约为5.66亿元，长春长生在同期实现的净利润则约为5.87亿元。另外，2016年，长生生物实现营收与归属净利润分别为10.18亿元以及4.25亿元，同期长春长生实现的营业收入以及净利润则分别为10.16亿元、4.32亿元。</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px; text-align:left\">关注</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px; text-align:left\">借壳上市刚刚逾两年</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px; text-align:left\">据了解，长生生物在2016年通过借壳黄海机械实现上市，不料，刚刚两年就遭遇了黑天鹅事件。</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px; text-align:left\">2015年7月份，当时的黄海机械披露了收购报告书，拟置入高俊芳家族控制的长春长生，实现公司由岩土钻孔装备的研发、制造和销售向前景广阔的生物医药产业的转型，转变成为一家国内领先的民营疫苗生产企业。之后，黄海机械披露的重组草案显示，此次交易包括重大资产置换、发行股份购买资产、股份转让及发行股份募集配套资金。</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px; text-align:left\">从双方最初接触到完成变更手续历时一年。2016年3月，黄海机械完成了工商变更登记手续，中文名称由&ldquo;连云港黄海机械股份有限公司&rdquo;变更为&ldquo;长生生物科技股份有限公司&rdquo;，公司证券简称自2016年3月17日起由&ldquo;黄海机械&rdquo;变更为&ldquo;长生生物&rdquo;。</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px; text-align:left\">另据该公司公告披露，其流通股大股东曲水卓瑞自今年4月份起先后减持了9次，减持股价从18.7元至22.2元不等，前后减持了1723.4392万股。曲水卓瑞此前持有长生生物已发行股份总计6591.1844万股，占公司总股本的6.77%。经权益变动后，曲水卓瑞目前持有4867.7452万股，占公司总股本的4.99927%。</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px; text-align:left\">北青报记者注意到，在这次黑天鹅事件中，长生生物的业绩将受到严峻考验，其股价也将承受市场压力。长生生物在一季报中预计今年上半年将盈利3.44亿元至4.23亿元左右，同比增长30%至60%，未来一段时期内公司业绩或将面临一定压力。公司最新股价报24.55元/股，今年以来累计涨幅近74%，总市值约239亿元。</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px; text-align:left\">文/本报记者 刘慎良 张小妹</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px; text-align:left\">作者：刘慎良 张小妹</p>\r\n','N','N','N',5,6,0,0,0);
/*!40000 ALTER TABLE `GsLt_A_Zt` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `GsLt_A_Zt_12` BEFORE DELETE ON `GsLt_A_Zt`
  FOR EACH ROW
BEGIN
    # 明细下挂附件标记删除
    update Pf_A_AttachInfo set DelTag='Y' where PrimaryName in ('GsLt_A_Pl','GsLt_A_PlNq') and 
    	exists(select 1 from GsLt_A_Pl where Pf_A_AttachInfo.PrimaryID=ID and BizID=old.ID);
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `GsLt_A_Zt_22` AFTER DELETE ON `GsLt_A_Zt`
  FOR EACH ROW
BEGIN
	update Pf_A_AttachInfo set DelTag='Y' where PrimaryName in ('GsLt_A_Zt','GsLt_A_ZtNq') and PrimaryID=old.ID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `GsSw_A_Zt`
--

DROP TABLE IF EXISTS `GsSw_A_Zt`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `GsSw_A_Zt` (
  `RecDivTag` date NOT NULL COMMENT '分区日期戳',
  `ID` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '业务标识',
  `InitUsrID` smallint(5) unsigned NOT NULL COMMENT '登记人ID',
  `InitOrgName` varchar(100) NOT NULL COMMENT '登记部门',
  `Bt` varchar(100) NOT NULL COMMENT '标题',
  `Ztc` varchar(40) NOT NULL COMMENT '主题词',
  `LwWh` varchar(40) NOT NULL COMMENT '来文文号',
  `LwDwID` smallint(5) unsigned NOT NULL COMMENT '来文单位ID',
  `WjMj` char(1) NOT NULL COMMENT '文件密级',
  `WjFs` tinyint(3) unsigned NOT NULL DEFAULT '1' COMMENT '份数',
  `SwSj` date NOT NULL COMMENT '收文时间',
  `BhYsID` tinyint(3) unsigned DEFAULT NULL COMMENT '编号样式ID',
  `Nd` char(4) DEFAULT NULL COMMENT '年度',
  `Bh` smallint(3) unsigned DEFAULT NULL COMMENT '编号',
  `SfGg` char(1) NOT NULL COMMENT '是否公告性质',
  `CkJs` smallint(5) unsigned NOT NULL DEFAULT '0' COMMENT '已查看计数',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `GsSw_A_Zt_UK` (`BhYsID`,`Nd`,`Bh`),
  KEY `InitUsrID` (`InitUsrID`),
  KEY `BhYsID` (`BhYsID`),
  CONSTRAINT `GsSw_A_Zt_fk1` FOREIGN KEY (`InitUsrID`) REFERENCES `Pf_M_Usr` (`ID`),
  CONSTRAINT `GsSw_A_Zt_fk2` FOREIGN KEY (`BhYsID`) REFERENCES `GsWj_M_BhYs` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `GsSw_A_Zt`
--

LOCK TABLES `GsSw_A_Zt` WRITE;
/*!40000 ALTER TABLE `GsSw_A_Zt` DISABLE KEYS */;
INSERT INTO `GsSw_A_Zt` VALUES ('2018-04-12',2,11,'运营管理部','关于规范保理业务的通知','保理','金融监蒙发〔2018〕001号',23,'a',2,'2018-04-12',3,'2018',1,'N',2),('2018-04-13',3,11,'运营管理部','测试附件上传删除多余选择','删除多余选择','金融监蒙发〔2018〕002号',23,'c',1,'2018-04-12',3,'2018',2,'Y',0),('2018-05-21',4,10,'运营管理部','收文测试','收文','1',26,'c',1,'2018-05-21',3,'2018',3,'Y',0),('2018-11-04',5,13,'审计部','为手机准备的用例','用例','金融监字【2018】-001',66,'b',1,'2018-11-01',3,'2018',4,'Y',0);
/*!40000 ALTER TABLE `GsSw_A_Zt` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `GsSw_A_Zt_23` AFTER UPDATE ON `GsSw_A_Zt`
  FOR EACH ROW
BEGIN
	declare vCnt tinyint unsigned;
    
	if (old.BhYsID is null and new.BhYsID is not null) or old.BhYsID!=new.BhYsID or old.Nd!=new.Nd or old.Bh!=new.Bh then
    	delete from GsWj_M_BhNdFp where Nd=DATE_FORMAT(date_add(now(), interval -2 year),'%Y');
        select count(*) into vCnt from GsWj_M_BhNdFp where BhYsID=new.BhYsID and Nd=new.Nd;
        if vCnt=0 then
        	insert GsWj_M_BhNdFp values (new.BhYsID, new.Nd, new.Bh+1);
        else
        	select count(*) into vCnt from GsWj_M_BhNdFp where BhYsID=new.BhYsID and Nd=new.Nd and DfpNnBh<=new.Bh;
            if vCnt>0 then
            	update GsWj_M_BhNdFp set DfpNnBh=new.Bh+1 where BhYsID=new.BhYsID and Nd=new.Nd;
            end if;
        end if;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `GsSw_A_Zt_22` AFTER DELETE ON `GsSw_A_Zt`
  FOR EACH ROW
BEGIN
	update Pf_A_AttachInfo set DelTag='Y' where PrimaryName in ('GsSwZw','GsSwFj') and PrimaryID=old.ID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `GsWj_A_Zt`
--

DROP TABLE IF EXISTS `GsWj_A_Zt`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `GsWj_A_Zt` (
  `RecDivTag` date NOT NULL,
  `ID` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `InitUsrID` smallint(5) unsigned NOT NULL,
  `InitOrgName` varchar(100) NOT NULL,
  `Bt` varchar(100) NOT NULL,
  `Ztc` varchar(40) DEFAULT NULL,
  `SfBfz` char(1) NOT NULL DEFAULT 'N',
  `FzSj` date DEFAULT NULL,
  `FzXx` varchar(200) DEFAULT NULL,
  `NewGsWjID` int(11) unsigned DEFAULT NULL,
  `BhYsID` tinyint(3) unsigned DEFAULT NULL,
  `Nd` char(4) DEFAULT NULL,
  `Bh` smallint(3) unsigned DEFAULT NULL,
  `CbID` smallint(5) unsigned DEFAULT NULL,
  `CsID` smallint(5) unsigned DEFAULT NULL,
  `SfGg` char(1) NOT NULL DEFAULT 'Y',
  `YwZt` char(1) NOT NULL DEFAULT 'R',
  `CkJs` smallint(5) unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `GsWj_A_Zt_UK` (`BhYsID`,`Nd`,`Bh`),
  KEY `InitUsrID` (`InitUsrID`),
  KEY `NewGsWjID` (`NewGsWjID`),
  KEY `BhYsID` (`BhYsID`),
  CONSTRAINT `GsWj_A_Zt_FK1` FOREIGN KEY (`InitUsrID`) REFERENCES `Pf_M_Usr` (`ID`),
  CONSTRAINT `GsWj_A_Zt_FK2` FOREIGN KEY (`NewGsWjID`) REFERENCES `GsWj_A_Zt` (`ID`),
  CONSTRAINT `GsWj_A_Zt_FK3` FOREIGN KEY (`BhYsID`) REFERENCES `GsWj_M_BhYs` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=12 DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `GsWj_A_Zt`
--

LOCK TABLES `GsWj_A_Zt` WRITE;
/*!40000 ALTER TABLE `GsWj_A_Zt` DISABLE KEYS */;
INSERT INTO `GsWj_A_Zt` VALUES ('2018-01-26',2,14,'数据信息部','关于绩效考核工作注意事项','KPI','N',NULL,NULL,NULL,1,'2018',1,14,NULL,'Y','P',2),('2018-01-31',3,14,'数据信息部','发文测试',NULL,'N',NULL,NULL,NULL,1,'2018',2,NULL,NULL,'Y','P',2),('2018-04-01',4,11,'运营管理部','测试自动保存',NULL,'N',NULL,NULL,NULL,1,'2018',3,NULL,NULL,'Y','P',0),('2018-04-02',5,11,'运营管理部','测试图片套模板',NULL,'N',NULL,NULL,NULL,1,'2019',1,NULL,NULL,'Y','W',0),('2018-05-20',6,13,'审计部','发文测试20180520',NULL,'N',NULL,NULL,NULL,1,'2018',5,NULL,NULL,'Y','P',2),('2018-05-21',7,14,'数据信息部','发文测试1',NULL,'N',NULL,NULL,NULL,1,'2018',6,NULL,NULL,'Y','P',2),('2018-05-21',8,14,'数据信息部','发文2018',NULL,'N',NULL,NULL,NULL,1,'2018',7,NULL,NULL,'Y','W',0),('2018-06-08',9,13,'审计部','新流程测试20180608',NULL,'N',NULL,NULL,NULL,1,'2018',8,14,NULL,'N','P',3),('2018-08-21',10,13,'审计部','公司任命20180821','任命','N',NULL,NULL,NULL,1,'2018',9,NULL,NULL,'Y','P',2),('2018-08-31',11,13,'审计部','测试4版本控件2018-08-31',NULL,'N',NULL,NULL,NULL,1,'2018',10,NULL,NULL,'Y','W',0);
/*!40000 ALTER TABLE `GsWj_A_Zt` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `GsWj_A_Zt_23` AFTER UPDATE ON `GsWj_A_Zt` FOR EACH ROW
BEGIN
	declare vCnt tinyint unsigned;
    
	if (old.BhYsID is null and new.BhYsID is not null) or old.BhYsID!=new.BhYsID or old.Nd!=new.Nd or old.Bh!=new.Bh then
    	delete from GsWj_M_BhNdFp where Nd=DATE_FORMAT(date_add(now(), interval -2 year),'%Y');
        select count(*) into vCnt from GsWj_M_BhNdFp where BhYsID=new.BhYsID and Nd=new.Nd;
        if vCnt=0 then
        	insert GsWj_M_BhNdFp values (new.BhYsID, new.Nd, new.Bh+1);
        else
        	select count(*) into vCnt from GsWj_M_BhNdFp where BhYsID=new.BhYsID and Nd=new.Nd and DfpNnBh<=new.Bh;
            if vCnt>0 then
            	update GsWj_M_BhNdFp set DfpNnBh=new.Bh+1 where BhYsID=new.BhYsID and Nd=new.Nd;
            end if;
        end if;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `GsWj_A_Zt_22` AFTER DELETE ON `GsWj_A_Zt` FOR EACH ROW
BEGIN
	update Pf_A_AttachInfo set DelTag='Y' where PrimaryName in ('GsWjZw','GsWjFj','GsWjZwCopy','GsWjZwZs','GsWjZwZsPdf') and PrimaryID=old.ID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `GsWj_M_BhNdFp`
--

DROP TABLE IF EXISTS `GsWj_M_BhNdFp`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `GsWj_M_BhNdFp` (
  `BhYsID` tinyint(3) unsigned NOT NULL,
  `Nd` char(4) NOT NULL,
  `DfpNnBh` smallint(3) unsigned NOT NULL,
  PRIMARY KEY (`BhYsID`,`Nd`),
  KEY `BhYsID` (`BhYsID`),
  CONSTRAINT `GsWj_M_BhNdFp_FK` FOREIGN KEY (`BhYsID`) REFERENCES `GsWj_M_BhYs` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `GsWj_M_BhNdFp`
--

LOCK TABLES `GsWj_M_BhNdFp` WRITE;
/*!40000 ALTER TABLE `GsWj_M_BhNdFp` DISABLE KEYS */;
INSERT INTO `GsWj_M_BhNdFp` VALUES (1,'2018',11),(1,'2019',2),(2,'2018',1),(3,'2018',5);
/*!40000 ALTER TABLE `GsWj_M_BhNdFp` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `GsWj_M_BhYs`
--

DROP TABLE IF EXISTS `GsWj_M_BhYs`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `GsWj_M_BhYs` (
  `ID` tinyint(3) unsigned NOT NULL AUTO_INCREMENT,
  `Ys` varchar(40) NOT NULL,
  `SfYx` char(1) NOT NULL DEFAULT 'Y',
  `YtQf` char(1) NOT NULL DEFAULT 'F' COMMENT '发文/收文区分',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `Ys` (`Ys`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `GsWj_M_BhYs`
--

LOCK TABLES `GsWj_M_BhYs` WRITE;
/*!40000 ALTER TABLE `GsWj_M_BhYs` DISABLE KEYS */;
INSERT INTO `GsWj_M_BhYs` VALUES (1,'庆源发〔xxxx〕yyy号','Y','F'),(2,'庆源管发〔xxxx〕yyy号','Y','F'),(3,'庆源收〔xxxx〕yyy号','Y','S');
/*!40000 ALTER TABLE `GsWj_M_BhYs` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `GsWj_M_Mb`
--

DROP TABLE IF EXISTS `GsWj_M_Mb`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `GsWj_M_Mb` (
  `ID` tinyint(3) unsigned NOT NULL AUTO_INCREMENT,
  `Mc` varchar(50) NOT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE KEY `Mc` (`Mc`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `GsWj_M_Mb`
--

LOCK TABLES `GsWj_M_Mb` WRITE;
/*!40000 ALTER TABLE `GsWj_M_Mb` DISABLE KEYS */;
INSERT INTO `GsWj_M_Mb` VALUES (1,'公司发文模板');
/*!40000 ALTER TABLE `GsWj_M_Mb` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `GsWj_M_Mb_22` AFTER DELETE ON `GsWj_M_Mb` FOR EACH ROW
BEGIN
	update Pf_M_AttachInfo set DelTag='Y' where PrimaryName='GsWj_M_Mb' and PrimaryID=old.ID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `GsWj_M_MbBhSyBm`
--

DROP TABLE IF EXISTS `GsWj_M_MbBhSyBm`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `GsWj_M_MbBhSyBm` (
  `MbBhQf` char(1) NOT NULL,
  `MbBhID` tinyint(3) unsigned NOT NULL,
  `SyBmID` smallint(5) unsigned NOT NULL,
  PRIMARY KEY (`MbBhQf`,`MbBhID`,`SyBmID`),
  KEY `SyBmID` (`SyBmID`),
  CONSTRAINT `GsWj_M_MbBhSyBm_fk1` FOREIGN KEY (`SyBmID`) REFERENCES `Pf_M_Org` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `GsWj_M_MbBhSyBm`
--

LOCK TABLES `GsWj_M_MbBhSyBm` WRITE;
/*!40000 ALTER TABLE `GsWj_M_MbBhSyBm` DISABLE KEYS */;
INSERT INTO `GsWj_M_MbBhSyBm` VALUES ('B',1,1),('B',2,1),('B',3,1),('M',1,1);
/*!40000 ALTER TABLE `GsWj_M_MbBhSyBm` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `GsWj_M_MbBq`
--

DROP TABLE IF EXISTS `GsWj_M_MbBq`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `GsWj_M_MbBq` (
  `BqYw` varchar(20) NOT NULL,
  `BqZw` varchar(20) NOT NULL,
  PRIMARY KEY (`BqYw`),
  UNIQUE KEY `GsWj_M_MbBq_UK` (`BqZw`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `GsWj_M_MbBq`
--

LOCK TABLES `GsWj_M_MbBq` WRITE;
/*!40000 ALTER TABLE `GsWj_M_MbBq` DISABLE KEYS */;
INSERT INTO `GsWj_M_MbBq` VALUES ('Ztc','主题词'),('Hq','会签'),('FwRq','发文日期'),('FwRqHz','发文日期全汉字'),('FwBh','发文编号'),('Cb','抄报'),('Cs','抄送'),('Bt','标题'),('STextS','正文'),('Qfr','签发');
/*!40000 ALTER TABLE `GsWj_M_MbBq` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `GzHb_A_HbLd`
--

DROP TABLE IF EXISTS `GzHb_A_HbLd`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `GzHb_A_HbLd` (
  `RecDivTag` date NOT NULL,
  `HbID` int(11) unsigned NOT NULL,
  `HbLdUsrID` smallint(5) unsigned NOT NULL,
  `ZsCsAs` char(1) NOT NULL,
  `LdYdSj` datetime DEFAULT NULL,
  `LdDp` varchar(1000) DEFAULT NULL,
  `LdDpSj` datetime DEFAULT NULL,
  PRIMARY KEY (`HbID`,`HbLdUsrID`),
  KEY `HbID` (`HbID`),
  KEY `HbLdUsrID` (`HbLdUsrID`),
  CONSTRAINT `GzHb_A_HbLd_fk1` FOREIGN KEY (`HbID`) REFERENCES `GzHb_A_Zt` (`ID`) ON DELETE CASCADE,
  CONSTRAINT `GzHb_A_HbLd_fk2` FOREIGN KEY (`HbLdUsrID`) REFERENCES `Pf_M_Usr` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `GzHb_A_HbLd`
--

LOCK TABLES `GzHb_A_HbLd` WRITE;
/*!40000 ALTER TABLE `GzHb_A_HbLd` DISABLE KEYS */;
INSERT INTO `GzHb_A_HbLd` VALUES ('2018-02-04',1,5,'C',NULL,NULL,NULL),('2018-02-04',1,14,'Z','2018-02-04 12:17:25','Good Work！','2018-02-04 12:17:58');
/*!40000 ALTER TABLE `GzHb_A_HbLd` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `GzHb_A_HbLd_11` BEFORE INSERT ON `GzHb_A_HbLd` FOR EACH ROW
BEGIN
 	declare vRecDivTag date;
 	declare vCnt tinyint unsigned;
 	
 	select RecDivTag into vRecDivTag from GzHb_A_Zt where ID=new.HbID;
 	set new.RecDivTag=vRecDivTag;
 	
 	select count(*) into vCnt from GzHb_A_Zt where ID=new.HbID and InitUsrID=new.HbLdUsrID;
 	if vCnt>0 then
 		call GzHb_A_HbLd_11_err1(); #汇报人不能汇报工作给自己！
 	end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `GzHb_A_HbLd_23` AFTER UPDATE ON `GzHb_A_HbLd` FOR EACH ROW
BEGIN
 	declare vAppUrl varchar(100);
 	declare vPrompt varchar(1000);
 	declare vReportBy smallint unsigned;
 	declare vDateSection varchar(30);
 	
 	if old.LdDpSj is null and new.LdDpSj is not null then
 		Select AppUrl Into vAppUrl From Pf_M_Ent;
 		
 		select InitUsrID,CONCAT(DATE_FORMAT(GzSdS,'%Y-%m-%d'),'至',DATE_FORMAT(GzSdM,'%Y-%m-%d'))
 		into vReportBy,vDateSection
 		from GzHb_A_Zt
 		where ID=new.HbID;
 		
 		set vPrompt=CONCAT(Pf_UsrcName(vReportBy),'您好！',Char(13),Char(10),'    就您提交的[',vDateSection,']时段的工作汇报，领导[',Pf_UsrcName(old.HbLdUsrID),
 		']于[',DATE_FORMAT(new.LdDpSj,'%Y-%m-%d %H:%i'),']做了点评。请尽快上办公系统关注一下。',Char(13),Char(10),Char(13),Char(10),'网址：',vAppUrl);
 		
 		INSERT INTO Pf_D_PromptMail VALUES (null,now(),'工作汇报领导点评关注提醒',vPrompt,now(),'N'); 
 		INSERT INTO Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(vReportBy),'Z'); 
 	end if; 
 	
 	if (old.LdDpSj is null and new.LdDpSj is not null) or (old.LdDpSj!=new.LdDpSj) then
 		# 重新索引
 		delete from Pf_D_FullIndexCmdList where BizAppName='工作汇报' and BizAppID=old.HbID;
 		delete from Pf_D_IndexContentOfMainText where BizAppName='工作汇报' and BizAppID=old.HbID;
 		delete from Pf_D_IndexContentOfAttach where BizAppName='工作汇报' and BizAppID=old.HbID;
 	end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `GzHb_A_Zt`
--

DROP TABLE IF EXISTS `GzHb_A_Zt`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `GzHb_A_Zt` (
  `RecDivTag` date NOT NULL,
  `ID` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `InitUsrID` smallint(5) unsigned NOT NULL,
  `InitOrgName` varchar(100) NOT NULL,
  `SubmitTs` datetime DEFAULT NULL,
  `GzSdS` date NOT NULL,
  `GzSdM` date NOT NULL,
  `ZyCg` varchar(2000) NOT NULL,
  `XyJdMb` varchar(2000) NOT NULL,
  `RdWt` varchar(1000) DEFAULT NULL,
  `GrJy` varchar(1000) DEFAULT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE KEY `GzHb_A_Zt_uk` (`InitUsrID`,`GzSdS`),
  KEY `InitUsrID` (`InitUsrID`),
  CONSTRAINT `GzHb_A_Zt_fk1` FOREIGN KEY (`InitUsrID`) REFERENCES `Pf_M_Usr` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `GzHb_A_Zt`
--

LOCK TABLES `GzHb_A_Zt` WRITE;
/*!40000 ALTER TABLE `GzHb_A_Zt` DISABLE KEYS */;
INSERT INTO `GzHb_A_Zt` VALUES ('2018-02-04',1,13,'审计部','2018-02-04 12:16:49','2018-01-29','2018-02-02','1、学习公司公众号信息维护工具使用；\r\n2、日常智能工作。\r\n','1、熟练掌握公司公众号信息维护工具使用；\r\n2、日常审计工作。','','');
/*!40000 ALTER TABLE `GzHb_A_Zt` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `GzHb_A_Zt_11` BEFORE INSERT ON `GzHb_A_Zt` FOR EACH ROW
label1:
BEGIN
 	declare vCnt tinyint unsigned;
 	
 	if new.GzSdS>new.GzSdM or new.GzSdM>now() then
 		call GzHb_A_Zt_11_err1(); # 工作汇报时段填报错：时段顺序填反 / 时段末是个将来的日期！
 		leave label1;
 	end if;
 	
 	select count(*) into vCnt 
 	from GzHb_A_Zt 
 	where InitUsrID=new.InitUsrID and (
 		GzSdS between new.GzSdS and new.GzSdM or GzSdM between new.GzSdS and new.GzSdM or
 		new.GzSdS between GzSdS and GzSdM or new.GzSdM between GzSdS and GzSdM
 		);
 	if vCnt>0 then
 		call GzHb_A_Zt_11_err2(); # 工作汇报时段填报错：与以往汇报时段重叠！
 		leave label1;
 	end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `GzHb_A_Zt_13` BEFORE UPDATE ON `GzHb_A_Zt` FOR EACH ROW
label1:
BEGIN
 	declare vCnt tinyint unsigned;
 	
 	if new.GzSdS>new.GzSdM or new.GzSdM>now() then
 		call GzHb_A_Zt_13_err1(); # 工作汇报时段填报错：时段顺序填反 / 时段末是个将来的日期！
 		leave label1;
 	end if;
 	
 	select count(*) into vCnt 
 	from GzHb_A_Zt 
 	where InitUsrID=new.InitUsrID and ID!=old.ID and (
 		GzSdS between new.GzSdS and new.GzSdM or GzSdM between new.GzSdS and new.GzSdM or
 		new.GzSdS between GzSdS and GzSdM or new.GzSdM between GzSdS and GzSdM
 		);
 	if vCnt>0 then
 		call GzHb_A_Zt_13_err2(); # 工作汇报时段填报错：与以往汇报时段重叠！
 		leave label1;
 	end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `GzHb_A_Zt_23` AFTER UPDATE ON `GzHb_A_Zt` FOR EACH ROW
BEGIN
    declare vAppUrl varchar(100);
    declare vPrompt varchar(1000);
    
	if old.SubmitTs is null and new.SubmitTs is not null then
    	Select AppUrl Into vAppUrl From Pf_M_Ent;
        
        set vPrompt=concat(Pf_UsrcName(old.InitUsrID),'提交了',DATE_FORMAT(new.GzSdS,'%Y-%m-%d'),'至',DATE_FORMAT(new.GzSdM,'%Y-%m-%d'),
        	'工作汇报请你上办公系统收阅。',Char(13),Char(10),Char(13),Char(10),'办公系统访问地址是：',vAppUrl);
		
        INSERT INTO Pf_D_PromptMail VALUES (null,now(),concat(Pf_UsrcName(old.InitUsrID),'工作汇报收阅提醒'),vPrompt,now(),'N');
		INSERT INTO Pf_D_PromptMailTo select @@identity,Pf_UsrEmail(HbLdUsrID),ZsCsAs from GzHb_A_HbLd where HbID=old.ID;
    end if;
    
    if old.SubmitTs is not null and new.SubmitTs is null then
		delete from Pf_D_FullIndexCmdList where BizAppName='工作汇报' and BizAppID=old.ID;
        delete from Pf_D_IndexContentOfMainText where BizAppName='工作汇报' and BizAppID=old.ID;
        delete from Pf_D_IndexContentOfAttach where BizAppName='工作汇报' and BizAppID=old.ID;
	end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `GzHb_A_Zt_22` AFTER DELETE ON `GzHb_A_Zt` FOR EACH ROW
BEGIN
	update Pf_A_AttachInfo set DelTag='Y' where PrimaryName = 'GzHb_A_Zt' and PrimaryID=old.ID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `GzHb_M_TcHbLd`
--

DROP TABLE IF EXISTS `GzHb_M_TcHbLd`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `GzHb_M_TcHbLd` (
  `HbrUsrID` smallint(5) unsigned NOT NULL,
  `HbLdUsrID` smallint(5) unsigned NOT NULL,
  PRIMARY KEY (`HbrUsrID`,`HbLdUsrID`),
  KEY `HbrUsrID` (`HbrUsrID`),
  KEY `HbLdUsrID` (`HbLdUsrID`),
  CONSTRAINT `GzHb_M_TcHbLd_fk1` FOREIGN KEY (`HbrUsrID`) REFERENCES `Pf_M_Usr` (`ID`) ON DELETE CASCADE,
  CONSTRAINT `GzHb_M_TcHbLd_fk2` FOREIGN KEY (`HbLdUsrID`) REFERENCES `Pf_M_Usr` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `GzHb_M_TcHbLd`
--

LOCK TABLES `GzHb_M_TcHbLd` WRITE;
/*!40000 ALTER TABLE `GzHb_M_TcHbLd` DISABLE KEYS */;
/*!40000 ALTER TABLE `GzHb_M_TcHbLd` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `GzHb_M_TcHbLd_11` BEFORE INSERT ON `GzHb_M_TcHbLd` FOR EACH ROW
BEGIN
	if NEW.HbrUsrID=new.HbLdUsrID THEN
 		call GzHb_M_TcHbLd_11_err1(); # 汇报领导不能是自己！
 	end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Gz_A_FfMx`
--

DROP TABLE IF EXISTS `Gz_A_FfMx`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Gz_A_FfMx` (
  `RecDivTag` date NOT NULL,
  `ID` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `ZtID` int(11) unsigned NOT NULL COMMENT '主体ID',
  `YgUsrID` smallint(6) unsigned NOT NULL COMMENT '员工ID',
  `JbGz` decimal(8,2) unsigned NOT NULL COMMENT '工资总额',
  `QtSr` decimal(8,2) unsigned NOT NULL COMMENT '其他收入',
  `YfGz` decimal(8,2) unsigned NOT NULL COMMENT '应发工资',
  `Pension1` decimal(8,2) unsigned NOT NULL COMMENT '养老保险（企业承担）',
  `UnEmployed1` decimal(8,2) unsigned NOT NULL COMMENT '失业保险（企业承担）',
  `Health1` decimal(8,2) unsigned NOT NULL COMMENT '医疗保险（企业承担）',
  `Industrial1` decimal(8,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '工伤保险（企业承担）',
  `Birth1` decimal(8,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '生育保险（企业承担）',
  `ZfGjj1` decimal(8,2) unsigned NOT NULL COMMENT '住房公积金（企业承担）',
  `WxYjQyJfXj` decimal(8,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '五险一金企业缴费小计',
  `Pension2` decimal(8,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '养老保险（个人承担）',
  `UnEmployed2` decimal(8,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '失业保险（个人承担）',
  `Health2` decimal(8,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '医疗保险（个人承担）',
  `ZfGjj2` decimal(8,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '住房公积金（个人承担）',
  `SxYjGrJfXj` decimal(8,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '三险一金个人缴费小计',
  `Kjx` decimal(8,2) unsigned NOT NULL COMMENT '扣减项',
  `YnsSde` decimal(8,2) unsigned NOT NULL COMMENT '应纳税所得额',
  `GrSds` decimal(8,2) unsigned NOT NULL COMMENT '个人所得税',
  `ShGz` decimal(8,2) unsigned NOT NULL COMMENT '税后工资',
  PRIMARY KEY (`ID`) USING BTREE,
  UNIQUE KEY `Gz_A_FfMx_idx1` (`ZtID`,`YgUsrID`) USING BTREE,
  KEY `ZtID` (`ZtID`) USING BTREE,
  KEY `YgUsrID` (`YgUsrID`) USING BTREE,
  CONSTRAINT `Gz_A_FfMx_fk1` FOREIGN KEY (`ZtID`) REFERENCES `Gz_A_Zt` (`ID`) ON DELETE CASCADE,
  CONSTRAINT `Gz_A_FfMx_fk2` FOREIGN KEY (`YgUsrID`) REFERENCES `Pf_M_Usr` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=422 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Gz_A_FfMx`
--

LOCK TABLES `Gz_A_FfMx` WRITE;
/*!40000 ALTER TABLE `Gz_A_FfMx` DISABLE KEYS */;
INSERT INTO `Gz_A_FfMx` VALUES ('2018-09-07',359,10,2,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),('2018-09-07',360,10,3,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),('2018-09-07',361,10,4,80000.00,20000.00,100000.00,20000.00,50.00,300.00,20.00,70.00,15000.00,35440.00,8000.00,50.00,100.00,15000.00,23150.00,2000.00,74850.00,8000.00,66850.00),('2018-09-07',362,10,5,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),('2018-09-07',363,10,6,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),('2018-09-07',364,10,7,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),('2018-09-07',365,10,8,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),('2018-09-07',366,10,9,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),('2018-09-07',367,10,10,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),('2018-09-07',368,10,11,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),('2018-09-07',369,10,12,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),('2018-09-07',370,10,13,8000.00,2000.00,10000.00,2000.00,50.00,300.00,20.00,70.00,1500.00,3940.00,800.00,50.00,100.00,1500.00,2450.00,200.00,7350.00,800.00,6550.00),('2018-09-07',371,10,14,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),('2018-09-07',372,10,15,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),('2018-09-07',373,10,16,8000.00,2000.00,10000.00,2000.00,50.00,300.00,20.00,70.00,1500.00,3940.00,800.00,50.00,100.00,1500.00,2450.00,200.00,7350.00,800.00,6550.00),('2018-09-07',374,10,17,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),('2018-09-07',390,11,2,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),('2018-09-07',391,11,3,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),('2018-09-07',392,11,4,80000.00,20000.00,100000.00,20000.00,50.00,300.00,20.00,70.00,15000.00,35440.00,8000.00,50.00,100.00,15000.00,23150.00,2000.00,74850.00,8000.00,66850.00),('2018-09-07',393,11,5,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),('2018-09-07',394,11,6,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),('2018-09-07',395,11,7,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),('2018-09-07',396,11,8,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),('2018-09-07',397,11,9,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),('2018-09-07',398,11,10,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),('2018-09-07',399,11,11,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),('2018-09-07',400,11,12,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),('2018-09-07',401,11,13,8000.00,2000.00,10000.00,2000.00,50.00,300.00,20.00,70.00,1500.00,3940.00,800.00,50.00,100.00,1500.00,2450.00,400.00,7150.00,800.00,6350.00),('2018-09-07',402,11,14,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),('2018-09-07',403,11,15,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),('2018-09-07',404,11,16,8000.00,2000.00,10000.00,2000.00,50.00,300.00,20.00,70.00,1500.00,3940.00,800.00,50.00,100.00,1500.00,2450.00,200.00,7350.00,800.00,6550.00),('2018-09-07',405,11,17,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),('2018-11-22',406,12,2,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),('2018-11-22',407,12,3,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),('2018-11-22',408,12,4,80000.00,20000.00,100000.00,20000.00,50.00,300.00,20.00,70.00,15000.00,35440.00,8000.00,50.00,100.00,15000.00,23150.00,2000.00,74850.00,8000.00,66850.00),('2018-11-22',409,12,5,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),('2018-11-22',410,12,6,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),('2018-11-22',411,12,7,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),('2018-11-22',412,12,8,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),('2018-11-22',413,12,9,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),('2018-11-22',414,12,10,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),('2018-11-22',415,12,11,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),('2018-11-22',416,12,12,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),('2018-11-22',417,12,13,8000.00,2000.00,10000.00,2000.00,50.00,300.00,20.00,70.00,1500.00,3940.00,800.00,50.00,100.00,1500.00,2450.00,400.00,7150.00,800.00,6350.00),('2018-11-22',418,12,14,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),('2018-11-22',419,12,15,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),('2018-11-22',420,12,16,8000.00,2000.00,10000.00,2000.00,50.00,300.00,20.00,70.00,1500.00,3940.00,800.00,50.00,100.00,1500.00,2450.00,200.00,7350.00,800.00,6550.00),('2018-11-22',421,12,17,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00);
/*!40000 ALTER TABLE `Gz_A_FfMx` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Gz_A_FfMx_11` BEFORE INSERT ON `Gz_A_FfMx`
  FOR EACH ROW
BEGIN
	declare vRecDivTag DATE;
    # 分区时间戳
    select RecDivTag into vRecDivTag from Gz_A_Zt where ID=new.ZtID;
    set new.RecDivTag = vRecDivTag;
    
    # 自动计算
    set new.YfGz = new.JbGz + new.QtSr;
    set new.WxYjQyJfXj = new.Pension1+new.UnEmployed1+new.Health1+new.Industrial1+new.Birth1+new.ZfGjj1;
    set new.SxYjGrJfXj = new.Pension2+new.UnEmployed2+new.Health2+new.ZfGjj2;
    set new.YnsSde = new.YfGz - new.SxYjGrJfXj - new.Kjx;
    set new.ShGz = new.YnsSde - new.GrSds;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Gz_A_FfMx_21` AFTER INSERT ON `Gz_A_FfMx`
  FOR EACH ROW
BEGIN
	update Gz_A_Zt set FfAmt=FfAmt+new.WxYjQyJfXj+new.YnsSde where ID=new.ZtID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Gz_A_FfMx_13` BEFORE UPDATE ON `Gz_A_FfMx`
  FOR EACH ROW
BEGIN
    # 自动计算
    set new.YfGz = new.JbGz + new.QtSr;
    set new.WxYjQyJfXj = new.Pension1+new.UnEmployed1+new.Health1+new.Industrial1+new.Birth1+new.ZfGjj1;
    set new.SxYjGrJfXj = new.Pension2+new.UnEmployed2+new.Health2+new.ZfGjj2;
    set new.YnsSde = new.YfGz - new.SxYjGrJfXj - new.Kjx;
    set new.ShGz = new.YnsSde - new.GrSds;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Gz_A_FfMx_23` AFTER UPDATE ON `Gz_A_FfMx`
  FOR EACH ROW
BEGIN
    update Gz_A_Zt set FfAmt=FfAmt-old.WxYjQyJfXj+new.WxYjQyJfXj-old.YnsSde+new.YnsSde where ID=old.ZtID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Gz_A_FfMx_22` AFTER DELETE ON `Gz_A_FfMx`
  FOR EACH ROW
BEGIN
	update Gz_A_Zt set FfAmt=FfAmt-old.WxYjQyJfXj-old.YnsSde where ID=old.ZtID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Gz_A_Zt`
--

DROP TABLE IF EXISTS `Gz_A_Zt`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Gz_A_Zt` (
  `RecDivTag` date NOT NULL,
  `ID` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `InitUsrID` smallint(6) unsigned NOT NULL,
  `InitOrgName` varchar(100) NOT NULL,
  `FfNf` smallint(6) unsigned NOT NULL,
  `FfYf` tinyint(4) unsigned NOT NULL,
  `FfAmt` decimal(15,2) unsigned NOT NULL,
  PRIMARY KEY (`ID`) USING BTREE,
  UNIQUE KEY `Gz_A_Zt_idx1` (`FfNf`,`FfYf`) USING BTREE,
  KEY `InitUsrID` (`InitUsrID`) USING BTREE,
  CONSTRAINT `Gz_A_Zt_fk1` FOREIGN KEY (`InitUsrID`) REFERENCES `Pf_M_Usr` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=13 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Gz_A_Zt`
--

LOCK TABLES `Gz_A_Zt` WRITE;
/*!40000 ALTER TABLE `Gz_A_Zt` DISABLE KEYS */;
INSERT INTO `Gz_A_Zt` VALUES ('2018-09-07',10,16,'运营管理部',2018,7,132870.00),('2018-09-07',11,16,'运营管理部',2018,8,132670.00),('2018-11-22',12,16,'运营管理部',2018,10,132670.00);
/*!40000 ALTER TABLE `Gz_A_Zt` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Gz_A_Zt_11` BEFORE INSERT ON `Gz_A_Zt`
  FOR EACH ROW
label1:
BEGIN
	declare vFfYf tinyint;
    declare vYear SMALLINT;
    
    select year(now()) into vYear from dual; 
    select month(now()) into vFfYf from dual;
    
    if new.FfNf>vYear then
    	call Gz_A_Zt_11_err1(); # 发放年份不能大于当前年！
    elseif new.FfNf=vYear then
    	if new.FfYf > vFfYf then 
    		call Gz_A_Zt_11_err2(); #发放月份不能在当前月之后！
    	end if;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Gz_A_Zt_22` AFTER DELETE ON `Gz_A_Zt`
  FOR EACH ROW
BEGIN
	update Pf_A_AttachInfo set DelTag='Y' where PrimaryName='Gz_A_Zt' and PrimaryID=old.ID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Gz_M_FfMx`
--

DROP TABLE IF EXISTS `Gz_M_FfMx`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Gz_M_FfMx` (
  `YgUsrID` smallint(5) unsigned NOT NULL COMMENT '员工ID',
  `JbGz` decimal(8,2) unsigned NOT NULL COMMENT '基本工资',
  `QtSr` decimal(8,2) unsigned NOT NULL COMMENT '其他收入',
  `YfGz` decimal(8,2) unsigned NOT NULL COMMENT '应发工资',
  `Pension1` decimal(8,2) unsigned NOT NULL COMMENT '养老保险（企业承担）',
  `UnEmployed1` decimal(8,2) unsigned NOT NULL COMMENT '失业保险（企业承担）',
  `Health1` decimal(8,2) unsigned NOT NULL COMMENT '医疗保险（企业承担）',
  `Industrial1` decimal(8,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '工伤保险（企业承担）',
  `Birth1` decimal(8,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '生育保险（企业承担）',
  `ZfGjj1` decimal(8,2) unsigned NOT NULL COMMENT '住房公积金（企业承担）',
  `WxYjQyJfXj` decimal(8,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '五险一金企业缴费小计',
  `Pension2` decimal(8,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '养老保险（个人承担）',
  `UnEmployed2` decimal(8,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '失业保险（个人承担）',
  `Health2` decimal(8,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '医疗保险（个人承担）',
  `ZfGjj2` decimal(8,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '住房公积金（个人承担）',
  `SxYjGrJfXj` decimal(8,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '三险一金个人缴费小计',
  `Kjx` decimal(8,2) unsigned NOT NULL COMMENT '扣减项',
  `YnsSde` decimal(8,2) unsigned NOT NULL COMMENT '应纳税所得额',
  `GrSds` decimal(8,2) unsigned NOT NULL COMMENT '个人所得税',
  `ShGz` decimal(8,2) unsigned NOT NULL COMMENT '税后工资',
  PRIMARY KEY (`YgUsrID`),
  CONSTRAINT `Gz_M_FfMx_fk1` FOREIGN KEY (`YgUsrID`) REFERENCES `Pf_M_Usr` (`ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Gz_M_FfMx`
--

LOCK TABLES `Gz_M_FfMx` WRITE;
/*!40000 ALTER TABLE `Gz_M_FfMx` DISABLE KEYS */;
INSERT INTO `Gz_M_FfMx` VALUES (2,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),(3,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),(4,80000.00,20000.00,100000.00,20000.00,50.00,300.00,20.00,70.00,15000.00,35440.00,8000.00,50.00,100.00,15000.00,23150.00,2000.00,74850.00,8000.00,66850.00),(5,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),(6,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),(7,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),(8,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),(9,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),(10,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),(11,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),(12,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),(13,8000.00,2000.00,10000.00,2000.00,50.00,300.00,20.00,70.00,1500.00,3940.00,800.00,50.00,100.00,1500.00,2450.00,400.00,7150.00,800.00,6350.00),(14,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),(15,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00),(16,8000.00,2000.00,10000.00,2000.00,50.00,300.00,20.00,70.00,1500.00,3940.00,800.00,50.00,100.00,1500.00,2450.00,200.00,7350.00,800.00,6550.00),(17,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00);
/*!40000 ALTER TABLE `Gz_M_FfMx` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `HyGl_A_Zt`
--

DROP TABLE IF EXISTS `HyGl_A_Zt`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `HyGl_A_Zt` (
  `RecDivTag` date NOT NULL COMMENT '分区日期戳',
  `ID` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '主键业务标识',
  `InitUsrID` smallint(5) unsigned NOT NULL COMMENT '申请人ID',
  `InitOrgName` varchar(100) NOT NULL COMMENT '申请部门',
  `Mc` varchar(100) NOT NULL COMMENT '会议名称',
  `Yt` varchar(400) NOT NULL COMMENT '会议内容',
  `DdID` smallint(5) unsigned NOT NULL COMMENT '会议地点ID',
  `ZkSj` datetime NOT NULL COMMENT '召开时间',
  `BmSj` datetime NOT NULL COMMENT '闭幕时间',
  `NbChRyUsrIDs` varchar(100) NOT NULL COMMENT '公司参会人员IDs',
  `RcdUsrID` smallint(5) unsigned NOT NULL COMMENT '记录人ID',
  `Jy` varchar(400) DEFAULT NULL COMMENT '会议决议',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `HyGl_A_Zt_uk` (`Mc`,`ZkSj`),
  KEY `InitUsrID` (`InitUsrID`),
  KEY `RcdUsrID` (`RcdUsrID`),
  CONSTRAINT `HyGl_A_Zt_fk2` FOREIGN KEY (`RcdUsrID`) REFERENCES `Pf_M_Usr` (`ID`),
  CONSTRAINT `Hy_A_Zt_fk1` FOREIGN KEY (`InitUsrID`) REFERENCES `Pf_M_Usr` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `HyGl_A_Zt`
--

LOCK TABLES `HyGl_A_Zt` WRITE;
/*!40000 ALTER TABLE `HyGl_A_Zt` DISABLE KEYS */;
INSERT INTO `HyGl_A_Zt` VALUES ('2018-06-12',3,14,'数据信息部','保理第一次业务研讨会20180612','保理业务穿透\r\n保理业务穿透保理业务穿透\r\n保理业务穿透保理业务穿透保理业务穿透',29,'2018-06-11 09:00:00','2018-06-11 12:00:00','8,12,3',14,'决定对科电先期培训业务\r\n1、穿透\r\n2、迭代'),('2018-06-12',4,14,'数据信息部','保理业务研讨二次会','保理业务研讨二次会\r\n保理业务研讨二次会保理业务研讨二次会',29,'2018-06-13 09:00:00','2018-06-13 15:00:00','8,3',12,NULL);
/*!40000 ALTER TABLE `HyGl_A_Zt` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `HyGl_A_Zt_11` BEFORE INSERT ON `HyGl_A_Zt`
  FOR EACH ROW
label1:
BEGIN
 	if new.ZkSj>=new.BmSj then
 		call HyGl_A_Zt_11_err1(); # 召开时间不能大于闭幕时间！
 		LEAVE label1;
 	end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `HyGl_A_Zt_13` BEFORE UPDATE ON `HyGl_A_Zt`
  FOR EACH ROW
label1:
BEGIN
 	if new.ZkSj>=new.BmSj then
 		call Hy_A_Zt_13_err1(); # 召开时间不能大于闭幕时间！
 		LEAVE label1;
 	end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `HyGl_A_Zt_22` AFTER DELETE ON `HyGl_A_Zt`
  FOR EACH ROW
BEGIN
	update Pf_A_AttachInfo set DelTag='Y' where PrimaryName IN ('HyGl_A_Zt1','HyGl_A_Zt2','HyGl_A_Zt2C') and PrimaryID=old.ID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Hy_M_Cd`
--

DROP TABLE IF EXISTS `Hy_M_Cd`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Hy_M_Cd` (
  `ID` tinyint(2) unsigned NOT NULL AUTO_INCREMENT COMMENT '主键标识',
  `Mc` varchar(40) NOT NULL COMMENT '名称',
  `Dd` varchar(100) NOT NULL COMMENT '地点',
  `Ss` varchar(200) NOT NULL COMMENT '设施描述',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `Hy_M_Cd_idx1` (`Mc`),
  UNIQUE KEY `Hy_M_Cd_idx2` (`Dd`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Hy_M_Cd`
--

LOCK TABLES `Hy_M_Cd` WRITE;
/*!40000 ALTER TABLE `Hy_M_Cd` DISABLE KEYS */;
INSERT INTO `Hy_M_Cd` VALUES (1,'公司大会议室','公司大会议室','投影茶水');
/*!40000 ALTER TABLE `Hy_M_Cd` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `JkBx_A_Bx`
--

DROP TABLE IF EXISTS `JkBx_A_Bx`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `JkBx_A_Bx` (
  `RecDivTag` date NOT NULL COMMENT '分区日期戳',
  `ID` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT 'ID',
  `InitUsrID` smallint(5) unsigned NOT NULL COMMENT '申请人ID',
  `InitOrgName` varchar(100) NOT NULL COMMENT '申请人部门',
  `FyCl` char(1) NOT NULL COMMENT '费用/差旅区分',
  `SfDwFk` char(1) NOT NULL DEFAULT 'N' COMMENT '是否对外付款',
  `SfCdJk` char(1) NOT NULL COMMENT '是否核销备用金',
  `TxRyIDs` varchar(30) DEFAULT NULL COMMENT '同行者',
  `CcSy` varchar(100) DEFAULT NULL COMMENT '出差事由',
  `SkZhMc` varchar(100) NOT NULL COMMENT '收款账户名',
  `SkZhKhh` varchar(100) NOT NULL COMMENT '收款账户开户行',
  `SkZhNo` varchar(50) NOT NULL COMMENT '收款账号',
  `DjCnt` tinyint(3) unsigned NOT NULL COMMENT '单据张数',
  `JtAmt` decimal(15,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '交通报销金额',
  `ZsAmt` decimal(15,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '住宿费报销金额',
  `ZdAmt` decimal(15,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '招待费报销金额',
  `BzAmt` decimal(15,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '出差补助金额',
  `TxAmt` decimal(15,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '通讯费报销金额',
  `QtAmt` decimal(15,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '其它费报销金额',
  `BxAmt` decimal(15,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '报销金额',
  `TaxAmt` decimal(15,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '进项税总额',
  `JkYe` decimal(15,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '个人借款余额',
  `BlAmt` decimal(15,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '补领金额',
  PRIMARY KEY (`ID`) USING BTREE,
  KEY `InitUsrID` (`InitUsrID`) USING BTREE,
  CONSTRAINT `JkBx_A_Bx_fk1` FOREIGN KEY (`InitUsrID`) REFERENCES `Pf_M_Usr` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=43 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `JkBx_A_Bx`
--

LOCK TABLES `JkBx_A_Bx` WRITE;
/*!40000 ALTER TABLE `JkBx_A_Bx` DISABLE KEYS */;
INSERT INTO `JkBx_A_Bx` VALUES ('2018-07-26',23,15,'运营管理部','C','N','N',NULL,'武汉出差','段海军','内蒙古银行赛罕区分行','3333 4444 2222 1111 345',8,2800.00,1696.00,424.00,870.00,0.00,0.00,5790.00,264.00,28746.00,5790.00),('2018-07-27',25,15,'运营管理部','F','N','Y',NULL,NULL,'段海军','内蒙古银行赛罕区分行','3333 4444 2222 1111 345',2,0.00,0.00,0.00,0.00,936.00,318.00,1254.00,54.00,30000.00,0.00),('2018-07-30',26,15,'运营管理部','F','N','Y',NULL,NULL,'段海军','内蒙古银行赛罕区分行','3333 4444 2222 1111 345',5,0.00,0.00,0.00,0.00,0.00,8000.00,8000.00,200.00,28746.00,0.00),('2018-07-31',27,15,'运营管理部','F','N','N',NULL,NULL,'段海军','内蒙古银行赛罕区分行','3333 4444 2222 1111 345',2,0.00,0.00,0.00,0.00,0.00,1095.00,1095.00,61.98,0.00,1095.00),('2018-08-02',28,10,'运营管理部','F','Y','N',NULL,NULL,'深圳雷特世纪有限公司','建设银行深圳宝安支行','3241 8576 1122 3344 788',2,0.00,0.00,0.00,0.00,0.00,30000.00,30000.00,2000.00,50000.00,0.00),('2018-08-02',29,10,'运营管理部','F','Y','N',NULL,NULL,'深圳雷特世纪有限公司','建设银行深圳宝安支行','3241 8576 1122 3344 788',1,0.00,0.00,0.00,0.00,0.00,40000.00,40000.00,3000.00,20000.00,20000.00),('2018-08-02',30,10,'运营管理部','F','N','Y',NULL,NULL,'付春奇','内蒙古银行赛罕区分行','3241 8576 1122 3344 985',2,0.00,0.00,0.00,0.00,0.00,20000.00,20000.00,0.00,50000.00,0.00),('2018-08-07',31,15,'运营管理部','F','N','N',NULL,NULL,'段海军','内蒙古银行赛罕区分行','3333 4444 2222 1111 345',1,0.00,0.00,0.00,0.00,0.00,123469134690.24,123469134690.24,12345678.12,0.00,123469134690.24),('2018-08-11',32,16,'运营管理部','C','N','N',NULL,'办事','朱佳佳','建设银行北京西单支行','1212 3434 7676 8989 887',1,3210.00,0.00,0.00,0.00,0.00,0.00,3210.00,0.00,0.00,3210.00),('2018-08-23',33,12,'业务部','F','Y','N',NULL,NULL,'北京雷特世纪','光大银行北京广安门支行','111132324554678',1,0.00,0.00,0.00,0.00,0.00,902926.48,902926.48,2926.48,0.00,902926.48),('2018-09-07',34,15,'运营管理部','F','N','N',NULL,NULL,'段海军','内蒙古银行赛罕区分行','3333 4444 2222 1111 345',1,0.00,0.00,0.00,0.00,0.00,500.00,500.00,0.00,0.00,500.00),('2018-09-07',35,15,'运营管理部','F','N','N',NULL,NULL,'段海军','内蒙古银行赛罕区分行','3333 4444 2222 1111 345',1,0.00,0.00,0.00,0.00,0.00,400.00,400.00,0.00,0.00,400.00),('2018-09-12',36,17,'运营管理部','F','N','N',NULL,NULL,'祁雅斌','建设银行呼和浩特赛罕区分行','7777 8888 1234 9876 333',1,0.00,0.00,0.00,0.00,0.00,600.00,600.00,0.00,0.00,600.00),('2018-09-28',37,13,'审计部','F','Y','N',NULL,NULL,'迅捷票务','建设银行呼和浩特赛罕支行','3232 1313 4545 8989 657',3,0.00,0.00,0.00,0.00,0.00,220212.00,220212.00,200.00,0.00,220212.00),('2018-10-03',38,14,'数据信息部','C','N','N','13','北京办事','杨震','建设银行内蒙古新城区分行','2121 3232 4343 5678 566',0,800.00,0.00,0.00,0.00,0.00,0.00,800.00,0.00,0.00,800.00),('2018-10-06',39,12,'业务部','F','Y','N',NULL,NULL,'北京雷特世纪','光大银行北京广安门支行','111132324554678',22,0.00,0.00,0.00,0.00,0.00,28960.00,28960.00,460.00,0.00,28960.00),('2018-10-31',40,14,'数据信息部','F','Y','N',NULL,NULL,'XXX票务公司','建设银行内蒙古新城区分行','2121 3232 4343 5678 567',1,0.00,0.00,0.00,0.00,0.00,20500.00,20500.00,500.00,0.00,20500.00),('2018-12-12',41,13,'审计部','F','Y','N',NULL,NULL,'迅捷票务','建设银行呼和浩特赛罕支行','3232 1313 4545 8989 657',3,0.00,0.00,0.00,0.00,0.00,125000.00,125000.00,2000.00,0.00,125000.00),('2018-12-12',42,13,'审计部','F','Y','N',NULL,NULL,'迅捷票务','建设银行呼和浩特赛罕支行','3232 1313 4545 8989 657',2,0.00,0.00,0.00,0.00,0.00,11111.00,11111.00,0.00,0.00,11111.00);
/*!40000 ALTER TABLE `JkBx_A_Bx` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_Bx_13` BEFORE UPDATE ON `JkBx_A_Bx`
  FOR EACH ROW
BEGIN
	declare vJkYe,vYfYe decimal(15,2) unsigned;
    
	if new.JtAmt!=old.JtAmt or new.ZsAmt!=old.ZsAmt or new.ZdAmt!=old.ZdAmt or new.BzAmt!=old.BzAmt or new.TxAmt!=old.TxAmt or new.QtAmt!=old.QtAmt then
		set new.BxAmt=new.JtAmt+new.ZsAmt+new.ZdAmt+new.BzAmt+new.TxAmt+new.QtAmt;
	end if;
	
    if new.SfCdJk='Y' then
        select ifnull(max(JkYe),0) into vJkYe from JkBx_M_JkYe where UsrID=new.InitUsrID;
        set new.JkYe=vJkYe;
        
        set new.BlAmt=0;
        
		if new.BxAmt>new.JkYe then
			set new.BlAmt=new.BxAmt-new.JkYe;
		end if;
    end if;

    if new.SfDwFk='Y' then
        select ifnull(max(YfYe),0) into vYfYe from ZxBg_M_Skf where SkrMc=new.SkZhMc;
        set new.JkYe=vYfYe;
        
        set new.BlAmt=0;
        
		if new.BxAmt>new.JkYe then
			set new.BlAmt=new.BxAmt-new.JkYe;
		end if;
    end if;

    if new.SfCdJk='N' and new.SfDwFk='N' then
		set new.JkYe=0;
		set new.BlAmt=new.BxAmt;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_Bx_12` BEFORE DELETE ON `JkBx_A_Bx`
  FOR EACH ROW
BEGIN
    # 明细下挂附件标记删除
    update Pf_A_AttachInfo set DelTag='Y' where PrimaryName = 'JkBx_A_BxQt71' and 
    	exists(select 1 from JkBx_A_BxQt where Pf_A_AttachInfo.PrimaryID=ID and BxID=old.ID);
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_Bx_22` AFTER DELETE ON `JkBx_A_Bx`
  FOR EACH ROW
BEGIN
	update Pf_A_AttachInfo set DelTag='Y' where PrimaryName = 'JkBx_A_Bx_Qz' and PrimaryID=old.ID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `JkBx_A_BxBzCl`
--

DROP TABLE IF EXISTS `JkBx_A_BxBzCl`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `JkBx_A_BxBzCl` (
  `RecDivTag` date NOT NULL COMMENT '分区日期戳',
  `ID` int(12) unsigned NOT NULL AUTO_INCREMENT COMMENT '明细流水',
  `BxID` int(11) unsigned NOT NULL COMMENT '报销单ID',
  `CcdID` tinyint(3) unsigned NOT NULL COMMENT '出差地',
  `ClBzAmt` decimal(7,2) unsigned NOT NULL COMMENT '每日补助标准',
  `SdKs` datetime NOT NULL COMMENT '出差时段始',
  `SdJs` datetime NOT NULL COMMENT '出差时段末',
  `CcTs` decimal(4,1) unsigned NOT NULL COMMENT '出差天数',
  `ZdCs1` tinyint(2) unsigned NOT NULL DEFAULT '0' COMMENT '招待早餐次数',
  `KcAmt1` decimal(7,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '招待早餐扣除金额',
  `ZdCs2` tinyint(2) unsigned NOT NULL DEFAULT '0' COMMENT '招待中餐次数',
  `KcAmt2` decimal(7,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '招待中餐扣除金额',
  `ZdCs3` tinyint(2) unsigned NOT NULL DEFAULT '0' COMMENT '招待晚餐次数',
  `KcAmt3` decimal(7,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '招待晚餐扣除金额',
  `HfAmt` decimal(7,2) unsigned NOT NULL COMMENT '实补金额',
  PRIMARY KEY (`ID`) USING BTREE,
  UNIQUE KEY `JkBx_A_BxBzCl_idx1` (`BxID`,`SdKs`) USING BTREE,
  KEY `CcdID` (`CcdID`) USING BTREE,
  KEY `BxID` (`BxID`) USING BTREE,
  CONSTRAINT `JkBx_A_BxBzCl_fk1` FOREIGN KEY (`CcdID`) REFERENCES `JkBx_M_CcdBzBz` (`ID`),
  CONSTRAINT `JkBx_A_BxBzCl_fk2` FOREIGN KEY (`BxID`) REFERENCES `JkBx_A_Bx` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `JkBx_A_BxBzCl`
--

LOCK TABLES `JkBx_A_BxBzCl` WRITE;
/*!40000 ALTER TABLE `JkBx_A_BxBzCl` DISABLE KEYS */;
INSERT INTO `JkBx_A_BxBzCl` VALUES ('2018-07-26',1,23,1,200.00,'2018-07-02 13:11:00','2018-07-06 12:11:00',4.5,0,0.00,1,30.00,0,0.00,870.00);
/*!40000 ALTER TABLE `JkBx_A_BxBzCl` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_BxBzCl_11` BEFORE INSERT ON `JkBx_A_BxBzCl`
  FOR EACH ROW
label1:
BEGIN
	DECLARE vInitUsrID SMALLINT;#报销人
    DECLARE vRecDivTag DATE;#时间戳
    DECLARE vClBzAmt DECIMAL(7,2);#补助标准
    DECLARE vCbAmt1 DECIMAL(7,2);
    DECLARE vCbAmt2 DECIMAL(7,2);
    DECLARE vCbAmt3 DECIMAL(7,2);
    DECLARE vCnt TINYINT;
        
	if new.SdJs<=new.SdKs then
		CALL JkBx_A_BxBzCl_11_err1(); # 出差时段填报错误！
		LEAVE label1;
	END IF;
    
    if new.SdJs>=now() then
		CALL JkBx_A_BxBzCl_11_err2(); # 出差时段不能大于当前时间！
		LEAVE label1;
	END IF;
    
    SELECT InitUsrID,RecDivTag
    into vInitUsrID,vRecDivTag
    from JkBx_A_Bx 
    where ID=new.BxID;
    
	select count(*) 
    into vCnt 
    FROM JkBx_A_BxBzCl m
    where EXISTS(select 1 from JkBx_A_Bx where ID=m.BxID and InitUsrID=vInitUsrID) and 
    	(new.SdKs BETWEEN m.SdKs and m.SdJs or new.SdJs BETWEEN m.SdKs and m.SdJs or m.SdKs BETWEEN new.SdKs and new.SdJs or m.SdJs BETWEEN new.SdKs and new.SdJs);
	IF vCnt>0 THEN
		CALL JkBx_A_BxBzCl_11_err3(); #同一申请人，出差时段与以往申请存在重叠！
		LEAVE label1;
	END IF;
    
	set new.RecDivTag=vRecDivTag;	#copy主体时间戳
    
    if new.ZdCs1>new.CcTs or new.ZdCs2>new.CcTs or new.ZdCs3>new.CcTs then
		CALL JkBx_A_BxBzCl_11_err4(); #招待次数不能大于出差天数！
		LEAVE label1;
    end if;
    
	SELECT ZbzAmt,CbAmt1,CbAmt2,CbAmt3 into vClBzAmt,vCbAmt1,vCbAmt2,vCbAmt3 from JkBx_M_CcdBzBz where ID=new.CcdID;
	if vClBzAmt is not null then 
    	set new.KcAmt1=new.ZdCs1*vCbAmt1;	#招待早餐扣除金额
        set new.KcAmt2=new.ZdCs2*vCbAmt2;	#招待中餐扣除金额
        set new.KcAmt3=new.ZdCs3*vCbAmt3;	#招待晚餐扣除金额
		set new.ClBzAmt=vClBzAmt;	#每日补助标准赋值
        set new.HfAmt=vClBzAmt*new.CcTs-(new.KcAmt1+new.KcAmt2+new.KcAmt3);	#实发金额
	end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_BxBzCl_21` AFTER INSERT ON `JkBx_A_BxBzCl`
  FOR EACH ROW
BEGIN
	update JkBx_A_Bx set BzAmt=BzAmt+new.HfAmt where ID=new.BxID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_BxBzCl_13` BEFORE UPDATE ON `JkBx_A_BxBzCl`
  FOR EACH ROW
label1:
BEGIN
	DECLARE vInitUsrID SMALLINT;#报销人
    DECLARE vRecDivTag DATE;#时间戳
    DECLARE vClBzAmt DECIMAL(7,2);#补助标准
    DECLARE vCbAmt1 DECIMAL(7,2);
    DECLARE vCbAmt2 DECIMAL(7,2);
    DECLARE vCbAmt3 DECIMAL(7,2);
    DECLARE vCnt TINYINT;
        
	if new.SdJs<=new.SdKs then
		CALL JkBx_A_BxBzCl_13_err1(); # 出差时段填报错误！
		LEAVE label1;
	END IF;
    
    if new.SdJs>=now() then
		CALL JkBx_A_BxBzCl_13_err2(); # 出差时段不能大于当前时间！
		LEAVE label1;
	END IF;
     
    SELECT InitUsrID,RecDivTag
    into vInitUsrID,vRecDivTag
    from JkBx_A_Bx 
    where ID=new.BxID;
    
	select count(*) 
    into vCnt 
    FROM JkBx_A_BxBzCl m
    where EXISTS(select 1 from JkBx_A_Bx where ID=m.BxID and InitUsrID=vInitUsrID) and 
    	(new.SdKs BETWEEN m.SdKs and m.SdJs or new.SdJs BETWEEN m.SdKs and m.SdJs or m.SdKs BETWEEN new.SdKs and new.SdJs or m.SdJs BETWEEN new.SdKs and new.SdJs) and new.ID!=ID;
	IF vCnt>0 THEN
		CALL JkBx_A_BxBzCl_13_err3(); #同一申请人，出差时段与以往申请存在重叠！
		LEAVE label1;
	END IF;
    
    if new.ZdCs1>new.CcTs or new.ZdCs2>new.CcTs or new.ZdCs3>new.CcTs then
		CALL JkBx_A_BxBzCl_13_err4(); #招待次数不能大于出差天数！
		LEAVE label1;
    end if;
    
	SELECT ZbzAmt,CbAmt1,CbAmt2,CbAmt3 into vClBzAmt,vCbAmt1,vCbAmt2,vCbAmt3 from JkBx_M_CcdBzBz where ID=new.CcdID;
	if vClBzAmt is not null then 
    	set new.KcAmt1=new.ZdCs1*vCbAmt1;	#招待早餐扣除金额
        set new.KcAmt2=new.ZdCs2*vCbAmt2;	#招待中餐扣除金额
        set new.KcAmt3=new.ZdCs3*vCbAmt3;	#招待晚餐扣除金额
		set new.ClBzAmt=vClBzAmt;	#每日补助标准赋值
        set new.HfAmt=vClBzAmt*new.CcTs-(new.KcAmt1+new.KcAmt2+new.KcAmt3);	#实发金额
	end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_BxBzCl_23` AFTER UPDATE ON `JkBx_A_BxBzCl`
  FOR EACH ROW
BEGIN
	if new.HfAmt!=old.HfAmt then
    	update JkBx_A_Bx set BzAmt=BzAmt+new.HfAmt-old.HfAmt where ID=new.BxID;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_BxBzCl_22` AFTER DELETE ON `JkBx_A_BxBzCl`
  FOR EACH ROW
BEGIN
	update JkBx_A_Bx set BzAmt=BzAmt-old.HfAmt where ID=old.BxID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `JkBx_A_BxCf`
--

DROP TABLE IF EXISTS `JkBx_A_BxCf`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `JkBx_A_BxCf` (
  `RecDivTag` date NOT NULL,
  `ID` int(12) unsigned NOT NULL AUTO_INCREMENT COMMENT '业务流水',
  `BxID` int(11) unsigned NOT NULL COMMENT '报销单ID',
  `FsSj` datetime NOT NULL COMMENT '发生时间',
  `DjCnt` tinyint(3) unsigned NOT NULL COMMENT '单据张数',
  `HfSm` varchar(100) NOT NULL COMMENT '花费说明',
  `InvType` char(1) NOT NULL COMMENT '发票种类',
  `InvNum` varchar(20) NOT NULL DEFAULT '0' COMMENT '发票号码',
  `HwYsLwID` smallint(5) unsigned NOT NULL COMMENT '货物或应税劳务',
  `FwMcID` smallint(5) unsigned NOT NULL COMMENT '服务名称',
  `HfAmt` decimal(15,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '花费金额',
  `TaxAmt` decimal(15,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '进项税',
  `PricePlusTax` decimal(15,2) unsigned NOT NULL COMMENT '价税合计',
  PRIMARY KEY (`ID`) USING BTREE,
  UNIQUE KEY `JkBx_A_BxCf_uk` (`BxID`,`FsSj`) USING BTREE,
  KEY `BxID` (`BxID`) USING BTREE,
  KEY `HwYsLwID` (`HwYsLwID`),
  KEY `FwMcID` (`FwMcID`),
  CONSTRAINT `JkBx_A_BxCf_fk1` FOREIGN KEY (`BxID`) REFERENCES `JkBx_A_Bx` (`ID`) ON DELETE CASCADE,
  CONSTRAINT `JkBx_A_BxCf_fk2` FOREIGN KEY (`HwYsLwID`) REFERENCES `Pf_M_EntAppCode` (`ID`),
  CONSTRAINT `JkBx_A_BxCf_fk3` FOREIGN KEY (`FwMcID`) REFERENCES `Pf_M_EntAppCode` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `JkBx_A_BxCf`
--

LOCK TABLES `JkBx_A_BxCf` WRITE;
/*!40000 ALTER TABLE `JkBx_A_BxCf` DISABLE KEYS */;
INSERT INTO `JkBx_A_BxCf` VALUES ('2018-07-26',2,23,'2018-07-03 12:10:00',1,'4人与会聚餐','2','2121 4343 5454 7878',36,37,400.00,24.00,424.00);
/*!40000 ALTER TABLE `JkBx_A_BxCf` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_BxCf_11` BEFORE INSERT ON `JkBx_A_BxCf`
  FOR EACH ROW
label1:
BEGIN
    DECLARE vRecDivTag DATE;	#时间戳
    
    if new.FsSj>=now() then
		CALL JkBx_A_BxCf_11_err1(); #发生时间不能大于当前时间！
		LEAVE label1;
    end if;
    
    if new.PricePlusTax<=0 then
		CALL JkBx_A_BxCf_11_err2(); #差旅餐费必须大于0！
		LEAVE label1;  
    end if;
    
    SELECT RecDivTag into vRecDivTag from JkBx_A_Bx where ID=new.BxID;

    set new.RecDivTag=vRecDivTag;	#copy主体时间戳
    
    if new.InvType!='2' then
    	set new.HfAmt=new.PricePlusTax;
        set new.TaxAmt=0;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_BxCf_21` AFTER INSERT ON `JkBx_A_BxCf`
  FOR EACH ROW
BEGIN
	update JkBx_A_Bx set DjCnt=DjCnt+new.DjCnt,ZdAmt=ZdAmt+new.PricePlusTax,TaxAmt=TaxAmt+new.TaxAmt where ID=new.BxID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_BxCf_13` BEFORE UPDATE ON `JkBx_A_BxCf`
  FOR EACH ROW
label1:
BEGIN
	if new.FsSj>=now() then
		CALL JkBx_A_BxCf_13_err1(); #发生时间不能大于当前时间！
		LEAVE label1;
    end if;

    if new.PricePlusTax<=0 then
		CALL JkBx_A_BxCf_13_err2(); #差旅餐费必须大于0！
		LEAVE label1;  
    end if;
    
    if new.InvType!='2' then
    	set new.HfAmt=new.PricePlusTax;
        set new.TaxAmt=0;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_BxCf_23` AFTER UPDATE ON `JkBx_A_BxCf`
  FOR EACH ROW
BEGIN
	if new.DjCnt!=old.DjCnt or new.PricePlusTax!=old.PricePlusTax or new.TaxAmt!=old.TaxAmt then
    	update JkBx_A_Bx 
        set ZdAmt=ZdAmt+new.PricePlusTax-old.PricePlusTax,TaxAmt=TaxAmt+new.TaxAmt-old.TaxAmt,DjCnt=DjCnt+new.DjCnt-old.DjCnt 
        where ID=new.BxID;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_BxCf_22` AFTER DELETE ON `JkBx_A_BxCf`
  FOR EACH ROW
BEGIN
	update JkBx_A_Bx set ZdAmt=ZdAmt-old.PricePlusTax,TaxAmt=TaxAmt-old.TaxAmt,DjCnt=DjCnt-old.DjCnt where ID=old.BxID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `JkBx_A_BxJt`
--

DROP TABLE IF EXISTS `JkBx_A_BxJt`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `JkBx_A_BxJt` (
  `RecDivTag` date NOT NULL COMMENT '分区日期戳',
  `ID` int(12) unsigned NOT NULL AUTO_INCREMENT COMMENT '明细流水',
  `BxID` int(11) unsigned NOT NULL COMMENT '报销单ID',
  `CfSj` datetime NOT NULL COMMENT '出发时间',
  `DdSj` datetime NOT NULL COMMENT '到达时间',
  `CfDd` varchar(20) NOT NULL COMMENT '出发地点',
  `DdDd` varchar(20) NOT NULL COMMENT '到达地点',
  `JtfLb` char(1) NOT NULL COMMENT '交通费类别',
  `JtFs` tinyint(3) unsigned NOT NULL COMMENT '交通方式',
  `DjCnt` tinyint(3) unsigned NOT NULL COMMENT '单据张数',
  `HfSm` varchar(100) NOT NULL COMMENT '花费说明',
  `InvType` char(1) NOT NULL COMMENT '发票种类',
  `InvNum` varchar(20) NOT NULL DEFAULT '0' COMMENT '发票号码',
  `HwYsLwID` smallint(5) unsigned NOT NULL COMMENT '货物或应税劳务',
  `FwMcID` smallint(5) unsigned NOT NULL COMMENT '服务名称',
  `HfAmt` decimal(15,2) unsigned NOT NULL COMMENT '花费金额',
  `TaxAmt` decimal(15,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '进项税',
  `PricePlusTax` decimal(15,2) unsigned NOT NULL COMMENT '价税合计',
  `ZgBz` tinyint(3) unsigned NOT NULL DEFAULT '0' COMMENT '最高标准',
  PRIMARY KEY (`ID`) USING BTREE,
  UNIQUE KEY `JkBx_A_BxJt_idx1` (`BxID`,`CfSj`) USING BTREE,
  KEY `BxID` (`BxID`) USING BTREE,
  KEY `HwYsLwID` (`HwYsLwID`),
  KEY `FwMcID` (`FwMcID`),
  CONSTRAINT `JkBx_A_BxJt_fk1` FOREIGN KEY (`BxID`) REFERENCES `JkBx_A_Bx` (`ID`) ON DELETE CASCADE,
  CONSTRAINT `JkBx_A_BxJt_fk2` FOREIGN KEY (`HwYsLwID`) REFERENCES `Pf_M_EntAppCode` (`ID`),
  CONSTRAINT `JkBx_A_BxJt_fk3` FOREIGN KEY (`FwMcID`) REFERENCES `Pf_M_EntAppCode` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=22 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `JkBx_A_BxJt`
--

LOCK TABLES `JkBx_A_BxJt` WRITE;
/*!40000 ALTER TABLE `JkBx_A_BxJt` DISABLE KEYS */;
INSERT INTO `JkBx_A_BxJt` VALUES ('2018-07-26',12,23,'2018-07-02 13:10:00','2018-07-02 13:45:00','巨华朗域','白塔机场','2',6,1,'打车去白塔机场','1','2222 1111 4444 3333',30,31,26.00,0.00,26.00,0),('2018-07-26',13,23,'2018-07-02 14:35:00','2018-07-02 16:35:00','白塔机场','双流机场','1',1,1,'乘CZ1234飞武汉','2','3214 2323 5454 5566',32,33,1200.00,72.00,1272.00,0),('2018-07-26',15,23,'2018-07-02 16:50:00','2018-07-02 17:45:00','武汉双流机场','假日酒店汉正街店','3',6,1,'打车去出差地下榻宾馆','1','7878 8787 2323 5465',30,31,100.00,0.00,100.00,0),('2018-07-26',16,23,'2018-07-06 09:05:00','2018-07-06 10:10:00','假日酒店汉正街店','武汉双流机场','3',6,1,'从出差地下榻宾馆打车去武汉双流机场','1','9878 8787 2323 5469',30,31,100.00,0.00,100.00,0),('2018-07-26',17,23,'2018-07-06 11:05:00','2018-07-06 13:40:00','双流机场','白塔机场','1',1,1,'乘机回呼','2','2222 3333 4444 6666',32,33,1200.00,72.00,1272.00,0),('2018-07-26',18,23,'2018-07-06 14:05:00','2018-07-06 14:30:00','白塔机场','巨华朗域','2',6,1,'打车回家','1','2222 3333 4444 6669',30,31,30.00,0.00,30.00,0),('2018-08-11',20,32,'2018-08-02 07:30:00','2018-08-02 08:50:00','呼和浩特','北京','3',1,1,'机票款','1','4958060879',32,54,3210.00,0.00,3210.00,0),('2018-10-03',21,38,'2018-01-30 11:10:00','2018-01-30 12:10:00','白塔机场','首都T3','1',1,0,'乘机费','3','8888 7777 8888 7777',32,53,800.00,0.00,800.00,2);
/*!40000 ALTER TABLE `JkBx_A_BxJt` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_BxJt_11` BEFORE INSERT ON `JkBx_A_BxJt`
  FOR EACH ROW
label1:
BEGIN
	DECLARE vInitUsrID SMALLINT;#报销人
    DECLARE vRecDivTag DATE;#时间戳
    DECLARE vSqrJb TINYINT;#报销人级别
    DECLARE vCnt TINYINT;
    DECLARE vZgBz TINYINT;#乘车标准
  	
    if new.CfSj>=new.DdSj then
		CALL JkBx_A_BxJt_11_err1(); #出发时间不能大于到达时间！
		LEAVE label1;
	end if;
    
    if new.DdSj>=NOW() then
		CALL JkBx_A_BxJt_11_err2(); #到达时间在当前时间之前！
		LEAVE label1;
	end if;
    
    if TIMESTAMPDIFF(HOUR,new.CfSj,new.DdSj)>24 then
		CALL JkBx_A_BxJt_11_err3(); #出发时间和到达时间差值不能超过24小时！
		LEAVE label1;
	end if;
    
  	SELECT InitUsrID,RecDivTag
    into vInitUsrID,vRecDivTag
    from JkBx_A_Bx 
    where ID=new.BxID;
    
	SELECT COUNT(*) 
    into vCnt 
    from JkBx_A_Bx a,JkBx_A_BxJt m 
    where a.ID=m.BxID and a.InitUsrID=vInitUsrID and 
    	(new.CfSj BETWEEN m.CfSj and m.DdSj or new.DdSj BETWEEN m.CfSj and m.DdSj or 
         m.CfSj BETWEEN new.CfSj and new.DdSj or m.DdSj BETWEEN new.CfSj and new.DdSj);
	if vCnt>0 then
		CALL JkBx_A_BxJt_11_err4();	#同一报销人交通票发生时段不能重叠！
    	LEAVE label1;
	end if;
    
	SELECT COUNT(*) 
    into vCnt 
    from JkBx_A_Bx a,JkBx_A_BxQtXcd m 
    where a.ID=new.BxID and FIND_IN_SET(a.InitUsrID,m.NbCyIDs)>0 and 
    	(new.CfSj BETWEEN m.CfSj and m.DdSj or new.DdSj BETWEEN m.CfSj and m.DdSj or 
         m.CfSj BETWEEN new.CfSj and new.DdSj or m.DdSj BETWEEN new.CfSj and new.DdSj);
	if vCnt>0 then
		CALL JkBx_A_BxJt_11_err6();	#报销人当前交通票发生时段与历史机/车票行程单（费用）行程时段重叠！
    	LEAVE label1;
	end if;
    
    if new.PricePlusTax<=0 then
    	CALL JkBx_A_BxJt_11_err5();	#交通报销费必须大于0！
    	LEAVE label1;
    end if;
    
	set new.RecDivTag=vRecDivTag;	#copy主体时间戳
    
	SELECT Pf_UsrJobLevelNum(vInitUsrID) into vSqrJb from dual;	#报销人级别
	if vSqrJb is not null and new.JtfLb='1' then 
		SELECT BxSq_JtFBz(vSqrJb) into vZgBz from dual;	#报销人级别范围内乘车标准
		set new.ZgBz=vZgBz;	#乘车标准赋值
	end if;
    
    if new.InvType!='2' then
    	set new.HfAmt=new.PricePlusTax;
        set new.TaxAmt=0;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_BxJt_21` AFTER INSERT ON `JkBx_A_BxJt`
  FOR EACH ROW
BEGIN
	update JkBx_A_Bx set DjCnt=DjCnt+new.DjCnt,JtAmt=JtAmt+new.PricePlusTax,TaxAmt=TaxAmt+new.TaxAmt where ID=new.BxID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_BxJt_13` BEFORE UPDATE ON `JkBx_A_BxJt`
  FOR EACH ROW
label1:
BEGIN
    DECLARE	vCnt TINYINT;
    DECLARE vInitUsrID SMALLINT;	#报销人	
    DECLARE vSqrJb TINYINT;			#报销人级别		
    DECLARE vZgBz TINYINT;			#乘车标准
     
    if new.CfSj>=new.DdSj then
		CALL JkBx_A_BxJt_13_err1(); #出发时间不能大于到达时间！
		LEAVE label1;
	end if;
    
    if new.DdSj>=NOW() then
		CALL JkBx_A_BxJt_13_err2(); #到达时间不能大于当前时间！
		LEAVE label1;
	end if;
    
    if TIMESTAMPDIFF(HOUR,new.CfSj,new.DdSj)>24 then
		CALL JkBx_A_BxJt_13_err3(); #出发时间和到达时间差值不能超过24小时！
		LEAVE label1;
	end if;
    
	SELECT InitUsrID into vInitUsrID from JkBx_A_Bx where ID=new.BxID;
	
    if new.PricePlusTax<=0 then
    	CALL JkBx_A_BxJt_13_err4();	#交通报销费必须大于0！
    	LEAVE label1;
    end if;
    
	SELECT COUNT(*) into vCnt 
    from JkBx_A_Bx a,JkBx_A_BxJt m 
    where a.ID=m.BxID and a.InitUsrID=vInitUsrID and m.ID!=new.ID and (
    	new.CfSj BETWEEN m.CfSj and m.DdSj or new.DdSj BETWEEN m.CfSj and m.DdSj or 
        m.CfSj BETWEEN new.CfSj and new.DdSj or m.DdSj BETWEEN new.CfSj and new.DdSj);
	if vCnt>0 then
		CALL JkBx_A_BxJt_13_err5(); #同一报销人交通票发生时段不能重叠！
		LEAVE label1;
	end if;
    
	SELECT COUNT(*) into vCnt 
    from JkBx_A_Bx a,JkBx_A_BxQtXcd m 
    where a.ID=old.BxID and FIND_IN_SET(a.InitUsrID,m.NbCyIDs)>0 and 
    	(new.CfSj BETWEEN m.CfSj and m.DdSj or new.DdSj BETWEEN m.CfSj and m.DdSj or 
         m.CfSj BETWEEN new.CfSj and new.DdSj or m.DdSj BETWEEN new.CfSj and new.DdSj);
	if vCnt>0 then
		CALL JkBx_A_BxJt_13_err6();	#报销人当前交通票发生时段改得与历史机/车票行程单（费用）行程时段重叠！
    	LEAVE label1;
	end if;
    
	SELECT Pf_UsrJobLevelNum(vInitUsrID) into vSqrJb from dual;	#报销人级别
	if vSqrJb is not null and new.JtfLb='1' then 
		SELECT BxSq_JtFBz(vSqrJb) into vZgBz from dual;	#报销人级别范围内乘车标准
		set new.ZgBz=vZgBz;	#乘车标准赋值
	end if;
    
    if new.InvType!='2' then
    	set new.HfAmt=new.PricePlusTax;
        set new.TaxAmt=0;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_BxJt_23` AFTER UPDATE ON `JkBx_A_BxJt`
  FOR EACH ROW
BEGIN
	if new.DjCnt!=old.DjCnt or new.PricePlusTax!=old.PricePlusTax or new.TaxAmt!=old.TaxAmt then
    	update JkBx_A_Bx 
        set JtAmt=JtAmt+new.PricePlusTax-old.PricePlusTax,TaxAmt=TaxAmt+new.TaxAmt-old.TaxAmt,DjCnt=DjCnt+new.DjCnt-old.DjCnt 
        where ID=new.BxID;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_BxJt_22` AFTER DELETE ON `JkBx_A_BxJt`
  FOR EACH ROW
BEGIN
	update JkBx_A_Bx set JtAmt=JtAmt-old.PricePlusTax,TaxAmt=TaxAmt-old.TaxAmt,DjCnt=DjCnt-old.DjCnt where ID=old.BxID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `JkBx_A_BxQt`
--

DROP TABLE IF EXISTS `JkBx_A_BxQt`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `JkBx_A_BxQt` (
  `RecDivTag` date NOT NULL,
  `ID` int(12) unsigned NOT NULL AUTO_INCREMENT COMMENT '业务流水',
  `BxID` int(11) unsigned NOT NULL COMMENT '报销单ID',
  `FsSj` datetime NOT NULL COMMENT '发生时间',
  `FyLb` tinyint(3) unsigned DEFAULT NULL COMMENT '费用类别',
  `DjCnt` tinyint(3) unsigned NOT NULL COMMENT '单据张数',
  `HfSm` varchar(100) NOT NULL COMMENT '花费说明',
  `InvType` char(1) NOT NULL COMMENT '发票种类',
  `InvNum` varchar(20) NOT NULL DEFAULT '0' COMMENT '发票号码',
  `HwYsLwID` smallint(5) unsigned NOT NULL COMMENT '货物或应税劳务',
  `FwMcID` smallint(5) unsigned NOT NULL COMMENT '服务名称',
  `HfAmt` decimal(15,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '花费金额',
  `TaxAmt` decimal(15,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '进项税',
  `PricePlusTax` decimal(15,2) unsigned NOT NULL COMMENT '价税合计',
  PRIMARY KEY (`ID`) USING BTREE,
  UNIQUE KEY `JkBx_A_BxBg_idx1` (`BxID`,`FsSj`,`FyLb`) USING BTREE,
  KEY `BxID` (`BxID`) USING BTREE,
  KEY `HwYsLwID` (`HwYsLwID`),
  KEY `FwMcID` (`FwMcID`),
  CONSTRAINT `JkBx_A_BxBg_fk1` FOREIGN KEY (`BxID`) REFERENCES `JkBx_A_Bx` (`ID`) ON DELETE CASCADE,
  CONSTRAINT `JkBx_A_BxQt_fk2` FOREIGN KEY (`HwYsLwID`) REFERENCES `Pf_M_EntAppCode` (`ID`),
  CONSTRAINT `JkBx_A_BxQt_fk3` FOREIGN KEY (`FwMcID`) REFERENCES `Pf_M_EntAppCode` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=47 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `JkBx_A_BxQt`
--

LOCK TABLES `JkBx_A_BxQt` WRITE;
/*!40000 ALTER TABLE `JkBx_A_BxQt` DISABLE KEYS */;
INSERT INTO `JkBx_A_BxQt` VALUES ('2018-07-27',5,25,'2018-07-09 21:07:00',46,1,'加油','2','1818 8181 8888 2222',40,41,300.00,18.00,318.00),('2018-07-30',6,26,'2018-07-10 13:14:00',13,2,'公司低值易耗品采买（电脑、耗材）','2','32145687',44,43,3800.00,200.00,4000.00),('2018-07-30',7,26,'2018-07-10 13:14:00',16,2,'礼品采购（红酒、茶叶）','1','32145689',45,46,4000.00,0.00,4000.00),('2018-07-31',9,27,'2018-06-25 14:17:00',16,1,'餐费','2','08210966',47,48,1033.02,61.98,1095.00),('2018-08-02',10,28,'2018-08-01 09:45:00',1,1,'购置档案柜','2','1111 3333 5555 7777',49,43,28000.00,2000.00,30000.00),('2018-08-02',11,29,'2018-08-01 15:55:00',1,1,'档案柜购置','2','3232 5454 7676 8787',49,43,37000.00,3000.00,40000.00),('2018-08-02',12,30,'2018-07-30 13:09:00',1,2,'办公室桌椅采购','3','2222 2222 2222 2222 ',42,43,20000.00,0.00,20000.00),('2018-08-07',13,31,'2018-08-06 11:00:00',NULL,1,'大数测试','2','21324354',50,51,123456789012.12,12345678.12,123469134690.24),('2018-08-23',14,33,'2018-08-14 14:58:00',70,1,'金额小写转大写','2','43213456',55,56,900000.00,2926.48,902926.48),('2018-09-07',15,34,'2018-09-03 10:34:00',1,1,'花费说明1','1','1111 1111 1111 1111',57,58,500.00,0.00,500.00),('2018-09-07',16,35,'2018-09-10 10:51:00',47,1,'花费说明2','1','2222 2222 2222 2222',57,58,400.00,0.00,400.00),('2018-09-12',17,36,'2018-09-03 10:55:00',31,1,'花费说明','1','3333 3333 3333 3333',59,46,600.00,0.00,600.00),('2018-09-28',18,37,'2018-09-17 12:32:00',71,1,'1季度机票','3','1111 1111 2222 3333',32,53,200012.00,0.00,200012.00),('2018-09-28',19,37,'2018-09-24 11:19:00',71,1,'2季度机票结算款','3','3333 0001 3232 1221',32,53,18000.00,0.00,18000.00),('2018-09-28',20,37,'2018-09-20 12:14:00',43,1,'办公室电风扇购置','2','2222 3333 2222 3333',60,61,2000.00,200.00,2200.00),('2018-10-06',21,39,'2018-09-01 15:35:00',22,1,'花费说明-1','1','1111 1111 1111 1111',62,63,100.00,0.00,100.00),('2018-10-06',22,39,'2018-09-02 15:35:00',22,1,'花费说明-2','1','1111 1111 1111 2222',62,63,200.00,0.00,200.00),('2018-10-06',23,39,'2018-09-03 15:35:00',22,1,'花费说明-3','1','1111 1111 1111 3333',62,63,300.00,0.00,300.00),('2018-10-06',24,39,'2018-09-04 15:35:00',22,1,'花费说明-4','1','1111 1111 1111 4444',62,63,400.00,0.00,400.00),('2018-10-06',25,39,'2018-09-05 15:35:00',22,1,'花费说明-5','1','1111 1111 1111 5555',62,63,500.00,0.00,500.00),('2018-10-06',26,39,'2018-09-06 15:35:00',22,1,'花费说明-6','1','1111 1111 1111 6666',62,63,600.00,0.00,600.00),('2018-10-06',27,39,'2018-09-07 15:35:00',22,1,'花费说明-7','1','1111 1111 1111 7777',62,63,700.00,0.00,700.00),('2018-10-06',28,39,'2018-09-08 15:35:00',22,1,'花费说明-8','1','1111 1111 1111 8888',62,63,800.00,0.00,800.00),('2018-10-06',29,39,'2018-09-09 15:35:00',22,1,'花费说明-9','1','1111 1111 1111 9999',62,63,900.00,0.00,900.00),('2018-10-06',30,39,'2018-09-10 15:35:00',22,1,'花费说明-10','1','1111 1111 1112 0000',62,63,1000.00,0.00,1000.00),('2018-10-06',31,39,'2018-09-11 15:35:00',24,1,'花费说明-11','2','1111 1111 1112 0001',47,37,1000.00,20.00,1020.00),('2018-10-06',32,39,'2018-09-12 16:24:00',16,1,'花费说明-12','2','1111 1111 1112 0002',38,65,2000.00,40.00,2040.00),('2018-10-06',33,39,'2018-09-13 16:24:00',16,1,'花费说明-13','2','1111 1111 1112 0003',38,65,2000.00,40.00,2040.00),('2018-10-06',34,39,'2018-09-14 16:24:00',16,1,'花费说明-14','2','1111 1111 1112 0004',38,65,2000.00,40.00,2040.00),('2018-10-06',35,39,'2018-09-15 16:24:00',16,1,'花费说明-15','2','1111 1111 1112 0005',38,65,2000.00,40.00,2040.00),('2018-10-06',36,39,'2018-09-16 16:24:00',16,1,'花费说明-16','2','1111 1111 1112 0006',38,65,2000.00,40.00,2040.00),('2018-10-06',37,39,'2018-09-17 16:24:00',16,1,'花费说明-17','2','1111 1111 1112 0007',38,65,2000.00,40.00,2040.00),('2018-10-06',38,39,'2018-09-18 16:24:00',16,1,'花费说明-18','2','1111 1111 1112 0008',38,65,2000.00,40.00,2040.00),('2018-10-06',39,39,'2018-09-19 16:24:00',16,1,'花费说明-19','2','1111 1111 1112 0009',38,65,2000.00,40.00,2040.00),('2018-10-06',40,39,'2018-09-20 16:24:00',16,1,'花费说明-20','2','1111 1111 1112 0010',38,65,2000.00,40.00,2040.00),('2018-10-06',41,39,'2018-09-21 16:24:00',16,1,'花费说明-21','2','1111 1111 1112 0011',38,65,2000.00,40.00,2040.00),('2018-10-06',42,39,'2018-09-22 16:24:00',16,1,'花费说明-22','2','1111 1111 1112 0012',38,65,2000.00,40.00,2040.00),('2018-10-31',43,40,'2018-10-31 14:30:00',71,1,'公司机票款月结','2','2222 3333 4444 5556',32,53,20000.00,500.00,20500.00),('2018-12-12',44,41,'2018-12-10 20:59:00',45,2,'一般花费','1','3333 3333 3333 3333',69,70,3000.00,0.00,3000.00),('2018-12-12',45,41,'2018-12-11 21:00:00',71,1,'3季度机票款','2','2222 2222 2222 2222',32,71,120000.00,2000.00,122000.00),('2018-12-12',46,42,'2018-12-07 13:34:00',71,2,'测试更新2222aaa不不不','3','1111 2222 1111 2222',32,71,11111.00,0.00,11111.00);
/*!40000 ALTER TABLE `JkBx_A_BxQt` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_BxQt_11` BEFORE INSERT ON `JkBx_A_BxQt`
  FOR EACH ROW
label1:
BEGIN
    DECLARE vRecDivTag DATE;	#时间戳
    
    if new.FsSj>=now() then
		CALL JkBx_A_BxBg_11_err1(); #发生时间不能大于当前时间！
		LEAVE label1;
    end if;
    
    if new.PricePlusTax<=0 then
		CALL JkBx_A_BxBg_11_err2(); #其他报销费必须大于0！
		LEAVE label1;  
    end if;
    
    SELECT RecDivTag into vRecDivTag from JkBx_A_Bx where ID=new.BxID;

    set new.RecDivTag=vRecDivTag;	#copy主体时间戳
    
    if new.InvType!='2' then
    	set new.HfAmt=new.PricePlusTax;
        set new.TaxAmt=0;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_BxQt_21` AFTER INSERT ON `JkBx_A_BxQt`
  FOR EACH ROW
BEGIN
	update JkBx_A_Bx set DjCnt=DjCnt+new.DjCnt,QtAmt=QtAmt+new.PricePlusTax,TaxAmt=TaxAmt+new.TaxAmt where ID=new.BxID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_BxQt_13` BEFORE UPDATE ON `JkBx_A_BxQt`
  FOR EACH ROW
label1:
BEGIN
	if new.FsSj>=now() then
		CALL JkBx_A_BxBg_13_err1(); #发生时间不能大于当前时间！
		LEAVE label1;
    end if;

    if new.PricePlusTax<=0 then
		CALL JkBx_A_BxBg_13_err2(); #其他报销费必须大于0！
		LEAVE label1;  
    end if;
    
    if new.InvType!='2' then
    	set new.HfAmt=new.PricePlusTax;
        set new.TaxAmt=0;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_BxQt_23` AFTER UPDATE ON `JkBx_A_BxQt`
  FOR EACH ROW
BEGIN
	if new.DjCnt!=old.DjCnt or new.PricePlusTax!=old.PricePlusTax or new.TaxAmt!=old.TaxAmt then
    	update JkBx_A_Bx 
        set QtAmt=QtAmt+new.PricePlusTax-old.PricePlusTax,TaxAmt=TaxAmt+new.TaxAmt-old.TaxAmt,DjCnt=DjCnt+new.DjCnt-old.DjCnt 
        where ID=new.BxID;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_BxQt_22` AFTER DELETE ON `JkBx_A_BxQt`
  FOR EACH ROW
BEGIN
	update JkBx_A_Bx 
    set QtAmt=QtAmt-old.PricePlusTax,TaxAmt=TaxAmt-old.TaxAmt,DjCnt=DjCnt-old.DjCnt 
    where ID=old.BxID;
    
    # 下挂附件标记删除
    update Pf_A_AttachInfo set DelTag='Y' where PrimaryName = 'JkBx_A_BxQt71' and PrimaryID=old.ID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `JkBx_A_BxQtXcd`
--

DROP TABLE IF EXISTS `JkBx_A_BxQtXcd`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `JkBx_A_BxQtXcd` (
  `RecDivTag` date NOT NULL COMMENT '分区日期戳',
  `ID` int(12) unsigned NOT NULL AUTO_INCREMENT COMMENT '行程单流水',
  `BxQtID` int(12) unsigned NOT NULL COMMENT '其它费明细ID',
  `NbCyIDs` varchar(100) DEFAULT NULL COMMENT '内部乘机/车人IDs',
  `WbCys` varchar(100) DEFAULT NULL COMMENT '外部乘机/车人s',
  `CfSj` datetime NOT NULL COMMENT '出发时间',
  `DdSj` datetime NOT NULL COMMENT '到达时间',
  `CfDd` varchar(20) NOT NULL COMMENT '出发地点',
  `DdDd` varchar(20) NOT NULL COMMENT '到达地点',
  `Bz` varchar(100) DEFAULT NULL COMMENT '其它行程信息',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `JkBx_A_BxQtXcd_uk` (`BxQtID`,`NbCyIDs`,`WbCys`,`CfSj`),
  KEY `BxQtID` (`BxQtID`),
  CONSTRAINT `JkBx_A_BxQtXcd_fk1` FOREIGN KEY (`BxQtID`) REFERENCES `JkBx_A_BxQt` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=11 DEFAULT CHARSET=utf8 PACK_KEYS=0 COMMENT='机/车票行程单（费用）';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `JkBx_A_BxQtXcd`
--

LOCK TABLES `JkBx_A_BxQtXcd` WRITE;
/*!40000 ALTER TABLE `JkBx_A_BxQtXcd` DISABLE KEYS */;
INSERT INTO `JkBx_A_BxQtXcd` VALUES ('2018-09-28',1,18,'2,4,8,3,5,7,10,16,14','梅超风、岳不群','2018-01-01 10:32:00','2018-01-01 11:32:00','呼和浩特白塔','首都T3',NULL),('2018-09-28',3,18,'2,4,8,3,5,7,10,16,14',NULL,'2018-01-03 15:32:00','2018-01-03 16:32:00','首都T3','呼和浩特白塔','航班cz1118'),('2018-09-28',4,18,'2,4,8,3,5,7,10,16,14','梅超风、岳不群','2018-01-15 10:32:00','2018-01-15 11:32:00','呼和浩特白塔','首都T3',NULL),('2018-09-28',5,18,'2,4,8,3,5,7,10,16,14',NULL,'2018-01-18 15:32:00','2018-01-18 16:32:00','首都T3','呼和浩特白塔','航班cz1118'),('2018-09-28',7,19,'2,4,8,3,5,7,10,14',NULL,'2018-01-15 13:22:00','2018-01-15 17:22:00','北京','上海','高铁'),('2018-09-28',8,19,'14',NULL,'2018-01-25 11:00:00','2018-01-25 12:00:00','白塔','北京',NULL),('2018-10-31',9,43,'2,4,8,3,5,7',NULL,'2018-10-01 14:37:00','2018-10-01 16:37:00','呼和浩特','天津',NULL),('2018-10-31',10,43,'2,4,8,3,5,7',NULL,'2018-10-08 14:37:00','2018-10-08 16:37:00','天津','呼和浩特',NULL);
/*!40000 ALTER TABLE `JkBx_A_BxQtXcd` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_BxQtXcd_11` BEFORE INSERT ON `JkBx_A_BxQtXcd`
  FOR EACH ROW
label1:
BEGIN
	declare vRecDivTag DATE;	#时间戳
    
    declare vCnt TINYINT unsigned;
 	declare vNbCyIDs VARCHAR(100);
 	declare vUsrID smallint unsigned;
    
 	declare done INT DEFAULT 0;
	declare cur1 cursor for select ID from Pf_M_Usr where FIND_IN_SET(ID,vNbCyIDs)>0;
    declare CONTINUE HANDLER FOR NOT FOUND SET done = 1;
  	
    if new.NbCyIDs is null and new.WbCys is null then
		CALL JkBx_A_BxQtXcd_11_err0(); #<内部乘机/车人>、<外部乘机/车人>不能都不填！
		LEAVE label1;
    end if;
    
    if new.CfSj>=new.DdSj then
		CALL JkBx_A_BxQtXcd_11_err1(); #出发时间不能大于到达时间！
		LEAVE label1;
	end if;
    
    if new.DdSj>=NOW() then
		CALL JkBx_A_BxQtXcd_11_err2(); #到达时间在当前时间之前！
		LEAVE label1;
	end if;
    
    if TIMESTAMPDIFF(HOUR,new.CfSj,new.DdSj)>24 then
		CALL JkBx_A_BxQtXcd_11_err3(); #出发时间和到达时间差值不能超过24小时！
		LEAVE label1;
	end if;
    
    if new.NbCyIDs is not null then
    	set vNbCyIDs=new.NbCyIDs;
        
        set done=0;
 		open cur1;
 		fetch cur1 into vUsrID;
 		while (done!=1) do
            select count(*) into vCnt
            from JkBx_A_Bx a,JkBx_A_BxJt m 
            where a.ID=m.BxID and a.InitUsrID=vUsrID and 
            	(new.CfSj BETWEEN m.CfSj and m.DdSj or new.DdSj BETWEEN m.CfSj and m.DdSj or 
                 m.CfSj BETWEEN new.CfSj and new.DdSj or m.DdSj BETWEEN new.CfSj and new.DdSj);
            if vCnt>0 then
            	CALL JkBx_A_BxQtXcd_11_err4(); # 有同一行程人，当前机/车票行程单（费用）行程时段与历史差旅报销单交通票的重叠！
                LEAVE label1;
            end if;
            
            select count(*) into vCnt
            from JkBx_A_BxQtXcd 
            where FIND_IN_SET(vUsrID,NbCyIDs)>0 and 
            	(new.CfSj BETWEEN CfSj and DdSj or new.DdSj BETWEEN CfSj and DdSj or 
                 CfSj BETWEEN new.CfSj and new.DdSj or DdSj BETWEEN new.CfSj and new.DdSj);
            if vCnt>0 then
            	CALL JkBx_A_BxQtXcd_11_err5(); # 有行程人，当前机/车票行程单（费用）行程时段与历史的重叠！
                LEAVE label1;
            end if;

 			fetch cur1 into vUsrID;
 		end while; 
 		close cur1;
    end if;
    
    select RecDivTag into vRecDivTag from JkBx_A_BxQt where ID=new.BxQtID;
    set new.RecDivTag=vRecDivTag;	#copy主体时间戳
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_BxQtXcd_13` BEFORE UPDATE ON `JkBx_A_BxQtXcd`
  FOR EACH ROW
label1:
BEGIN
    declare vCnt TINYINT unsigned;
 	declare vNbCyIDs VARCHAR(100);
 	declare vUsrID smallint unsigned;
    
 	declare done INT DEFAULT 0;
	declare cur1 cursor for select ID from Pf_M_Usr where FIND_IN_SET(ID,vNbCyIDs)>0;
    declare CONTINUE HANDLER FOR NOT FOUND SET done = 1;
  	
    if new.NbCyIDs is null and new.WbCys is null then
		CALL JkBx_A_BxQtXcd_13_err0(); #<内部乘机/车人>、<外部乘机/车人>不能都不填！
		LEAVE label1;
    end if;
  	
    if new.CfSj>=new.DdSj then
		CALL JkBx_A_BxQtXcd_13_err1(); #出发时间不能大于到达时间！
		LEAVE label1;
	end if;
    
    if new.DdSj>=NOW() then
		CALL JkBx_A_BxQtXcd_13_err2(); #到达时间在当前时间之前！
		LEAVE label1;
	end if;
    
    if TIMESTAMPDIFF(HOUR,new.CfSj,new.DdSj)>24 then
		CALL JkBx_A_BxQtXcd_13_err3(); #出发时间和到达时间差值不能超过24小时！
		LEAVE label1;
	end if;
    
    if new.NbCyIDs is not null then
    	set vNbCyIDs=new.NbCyIDs;
        
        set done=0;
 		open cur1;
 		fetch cur1 into vUsrID;
 		while (done!=1) do
            select count(*) into vCnt
            from JkBx_A_Bx a,JkBx_A_BxJt m 
            where a.ID=m.BxID and a.InitUsrID=vUsrID and 
            	(new.CfSj BETWEEN m.CfSj and m.DdSj or new.DdSj BETWEEN m.CfSj and m.DdSj or 
                 m.CfSj BETWEEN new.CfSj and new.DdSj or m.DdSj BETWEEN new.CfSj and new.DdSj);
            if vCnt>0 then
            	CALL JkBx_A_BxQtXcd_13_err4(); # 有同一行程人，当前机/车票行程单（费用）行程时段改得与历史差旅报销单交通票的重叠！
                LEAVE label1;
            end if;
            
            select count(*) into vCnt
            from JkBx_A_BxQtXcd 
            where FIND_IN_SET(vUsrID,NbCyIDs)>0 and ID!=new.ID and 
            	(new.CfSj BETWEEN CfSj and DdSj or new.DdSj BETWEEN CfSj and DdSj or 
                 CfSj BETWEEN new.CfSj and new.DdSj or DdSj BETWEEN new.CfSj and new.DdSj);
            if vCnt>0 then
            	CALL JkBx_A_BxQtXcd_13_err5(); # 有行程人，当前机/车票行程单（费用）行程时段改得与历史的重叠！
                LEAVE label1;
            end if;

 			fetch cur1 into vUsrID;
 		end while; 
 		close cur1;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `JkBx_A_BxTx`
--

DROP TABLE IF EXISTS `JkBx_A_BxTx`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `JkBx_A_BxTx` (
  `RecDivTag` date NOT NULL COMMENT '分区日期戳',
  `ID` int(12) unsigned NOT NULL AUTO_INCREMENT,
  `BxID` int(11) unsigned NOT NULL COMMENT '报销单ID',
  `FsSj` datetime NOT NULL COMMENT '发生时间',
  `BxNf1` smallint(4) unsigned NOT NULL COMMENT '报销年份1',
  `BxYf1` tinyint(2) unsigned NOT NULL COMMENT '报销月份1',
  `BxNf2` smallint(4) unsigned NOT NULL COMMENT '报销年份2',
  `BxYf2` tinyint(2) unsigned NOT NULL COMMENT '报销月份2',
  `DjCnt` tinyint(3) unsigned NOT NULL COMMENT '单据张数',
  `HfSm` varchar(100) NOT NULL COMMENT '花费说明',
  `InvType` char(1) NOT NULL COMMENT '发票种类',
  `InvNum` varchar(20) NOT NULL DEFAULT '0' COMMENT '发票号码',
  `HwYsLwID` smallint(5) unsigned NOT NULL COMMENT '货物或应税劳务',
  `FwMcID` smallint(5) unsigned NOT NULL COMMENT '服务名称',
  `HfAmt` decimal(15,2) unsigned NOT NULL COMMENT '花费金额',
  `TaxAmt` decimal(15,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '进项税',
  `PricePlusTax` decimal(15,2) unsigned NOT NULL COMMENT '价税合计',
  `BzAmt` decimal(7,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '费用标准',
  PRIMARY KEY (`ID`) USING BTREE,
  UNIQUE KEY `JkBx_A_BxTx_idx1` (`BxID`,`BxNf1`,`BxYf1`) USING BTREE,
  UNIQUE KEY `JkBx_A_BxTx_idx2` (`BxID`,`FsSj`),
  KEY `BxID` (`BxID`) USING BTREE,
  KEY `HwYsLwID` (`HwYsLwID`),
  KEY `FwMcID` (`FwMcID`),
  CONSTRAINT `JkBx_A_BxTx_fk1` FOREIGN KEY (`BxID`) REFERENCES `JkBx_A_Bx` (`ID`) ON DELETE CASCADE,
  CONSTRAINT `JkBx_A_BxTx_fk2` FOREIGN KEY (`HwYsLwID`) REFERENCES `Pf_M_EntAppCode` (`ID`),
  CONSTRAINT `JkBx_A_BxTx_fk3` FOREIGN KEY (`FwMcID`) REFERENCES `Pf_M_EntAppCode` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `JkBx_A_BxTx`
--

LOCK TABLES `JkBx_A_BxTx` WRITE;
/*!40000 ALTER TABLE `JkBx_A_BxTx` DISABLE KEYS */;
INSERT INTO `JkBx_A_BxTx` VALUES ('2018-07-27',4,25,'2018-07-05 14:06:00',2018,4,2018,6,1,'2018年度2季度手机通讯费','2','3333 3434 5555 5656',38,39,900.00,36.00,936.00,0.00);
/*!40000 ALTER TABLE `JkBx_A_BxTx` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_BxTx_11` BEFORE INSERT ON `JkBx_A_BxTx`
  FOR EACH ROW
label1:
BEGIN
	DECLARE vInitUsrID SMALLINT;#报销人
	DECLARE vRecDivTag DATE;#时间戳
	DECLARE vDjCnt TINYINT;#单据张数
	DECLARE vSqrJb TINYINT;#报销人级别
	DECLARE vZgBzAmt DECIMAL(7,2);#补助标准
	DECLARE vCnt TINYINT;
    
	SELECT InitUsrID,RecDivTag
	into vInitUsrID,vRecDivTag
	from JkBx_A_Bx 
	where ID=new.BxID;
    
    if new.FsSj>=now() then
		CALL JkBx_A_BxTx_11_err4(); #费用发生时间不能大于当前时间！
		LEAVE label1;
    end if;

	IF TIMESTAMPDIFF(month,concat(new.BxNf1,'-',LPAD(concat(new.BxYf1,''),2,'0'),'-01'),concat(new.BxNf2,'-',LPAD(concat(new.BxYf2,''),2,'0'),'-01'))<0 or 
    	concat(new.BxNf2,'-',LPAD(concat(new.BxYf2,''),2,'0'),'-01')>date_add(now(),interval -1 month) then
		CALL JkBx_A_BxTx_11_err1(); #费用月段无效（顺序无效或末月不是当前月份之前的月）！
		LEAVE label1;
	end if;
    
	SELECT COUNT(*) 
	into vCnt 
	from JkBx_A_Bx a,JkBx_A_BxTx m 
	where a.ID=m.BxID and a.InitUsrID=vInitUsrID and (
    	concat(new.BxNf1,'-',LPAD(concat(new.BxYf1,''),2,'0')) between 
        	concat(m.BxNf1,'-',LPAD(concat(m.BxYf1,''),2,'0')) and concat(m.BxNf2,'-',LPAD(concat(m.BxYf2,''),2,'0')) or 
    	concat(new.BxNf2,'-',LPAD(concat(new.BxYf2,''),2,'0')) between 
        	concat(m.BxNf1,'-',LPAD(concat(m.BxYf1,''),2,'0')) and concat(m.BxNf2,'-',LPAD(concat(m.BxYf2,''),2,'0')) or 
    	concat(m.BxNf1,'-',LPAD(concat(m.BxYf1,''),2,'0')) between 
        	concat(new.BxNf1,'-',LPAD(concat(new.BxYf1,''),2,'0')) and concat(new.BxNf2,'-',LPAD(concat(new.BxYf2,''),2,'0')) or 
    	concat(m.BxNf2,'-',LPAD(concat(m.BxYf2,''),2,'0')) between 
        	concat(new.BxNf1,'-',LPAD(concat(new.BxYf1,''),2,'0')) and concat(new.BxNf2,'-',LPAD(concat(new.BxYf2,''),2,'0'))  
    );
	if vCnt>0 then
		CALL JkBx_A_BxTx_11_err2(); #同一报销人报销话费年月不能重叠！
		LEAVE label1;
	end if;
    
	if new.PricePlusTax<=0 then 
		CALL JkBx_A_BxTx_11_err3(); #通讯报销费必须大于0！
		LEAVE label1;
	end if;
      
	set new.RecDivTag=vRecDivTag;	#copy主体时间戳
          
	SELECT Pf_UsrJobLevelNum(vInitUsrID) into vSqrJb from dual;	#报销人级别
	if vSqrJb is not null then 
		SELECT BxSq_TxFBz(vSqrJb) into vZgBzAmt from dual;	#报销人级别范围内补助标准
		if vZgBzAmt is not null then
			set new.BzAmt=vZgBzAmt; #补助标准赋值
		end if;
	end if;
    
    if new.InvType!='2' then
    	set new.HfAmt=new.PricePlusTax;
        set new.TaxAmt=0;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_BxTx_21` AFTER INSERT ON `JkBx_A_BxTx`
  FOR EACH ROW
BEGIN
	update JkBx_A_Bx set DjCnt=DjCnt+new.DjCnt,TxAmt=TxAmt+new.PricePlusTax,TaxAmt=TaxAmt+new.TaxAmt where ID=new.BxID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_BxTx_13` BEFORE UPDATE ON `JkBx_A_BxTx`
  FOR EACH ROW
label1:
BEGIN
	DECLARE	vCnt TINYINT;
	DECLARE vInitUsrID SMALLINT;	#报销人	
	DECLARE vSqrJb TINYINT;#报销人级别
	DECLARE vZgBzAmt DECIMAL(7,2);#补助标准
    		
    if new.FsSj>=now() then
		CALL JkBx_A_BxTx_13_err4(); #费用发生时间不能大于当前时间！
		LEAVE label1;
    end if;

	IF TIMESTAMPDIFF(month,concat(new.BxNf1,'-',LPAD(concat(new.BxYf1,''),2,'0'),'-01'),concat(new.BxNf2,'-',LPAD(concat(new.BxYf2,''),2,'0'),'-01'))<0 or 
    	concat(new.BxNf2,'-',LPAD(concat(new.BxYf2,''),2,'0'),'-01')>date_add(now(),interval -1 month) then
		CALL JkBx_A_BxTx_13_err1(); #费用月段无效（顺序无效或末月不是当前月份之前的月）！
		LEAVE label1;
	end if;
    
	SELECT InitUsrID into vInitUsrID from JkBx_A_Bx where ID=new.BxID;
    
	SELECT COUNT(*) into vCnt 
	from JkBx_A_Bx a,JkBx_A_BxTx m 
	where a.ID=m.BxID and a.InitUsrID=vInitUsrID and m.ID!=new.ID and (
    	concat(new.BxNf1,'-',LPAD(concat(new.BxYf1,''),2,'0')) between 
        	concat(m.BxNf1,'-',LPAD(concat(m.BxYf1,''),2,'0')) and concat(m.BxNf2,'-',LPAD(concat(m.BxYf2,''),2,'0')) or 
    	concat(new.BxNf2,'-',LPAD(concat(new.BxYf2,''),2,'0')) between 
        	concat(m.BxNf1,'-',LPAD(concat(m.BxYf1,''),2,'0')) and concat(m.BxNf2,'-',LPAD(concat(m.BxYf2,''),2,'0')) or 
    	concat(m.BxNf1,'-',LPAD(concat(m.BxYf1,''),2,'0')) between 
        	concat(new.BxNf1,'-',LPAD(concat(new.BxYf1,''),2,'0')) and concat(new.BxNf2,'-',LPAD(concat(new.BxYf2,''),2,'0')) or 
    	concat(m.BxNf2,'-',LPAD(concat(m.BxYf2,''),2,'0')) between 
        	concat(new.BxNf1,'-',LPAD(concat(new.BxYf1,''),2,'0')) and concat(new.BxNf2,'-',LPAD(concat(new.BxYf2,''),2,'0'))  
    );
	if vCnt>0 then
		CALL JkBx_A_BxTx_13_err2(); #同一报销人报销话费年月不能重叠！
		LEAVE label1;
	end if;
    
	if new.PricePlusTax<=0 then 
		CALL JkBx_A_BxTx_13_err3(); #通讯报销费必须大于0！
		LEAVE label1;
	end if;
    
	SELECT Pf_UsrJobLevelNum(vInitUsrID) into vSqrJb from dual;	#报销人级别
	if vSqrJb is not null then 
		SELECT BxSq_TxFBz(vSqrJb) into vZgBzAmt from dual;	#报销人级别范围内补助标准
		if vZgBzAmt is not null then
			set new.BzAmt=vZgBzAmt; #补助标准赋值
		end if;
	end if;
    
    if new.InvType!='2' then
    	set new.HfAmt=new.PricePlusTax;
        set new.TaxAmt=0;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_BxTx_23` AFTER UPDATE ON `JkBx_A_BxTx`
  FOR EACH ROW
BEGIN
	if new.DjCnt!=old.DjCnt or new.PricePlusTax!=old.PricePlusTax or new.TaxAmt!=old.TaxAmt then
		update JkBx_A_Bx 
        set TxAmt=TxAmt+new.PricePlusTax-old.PricePlusTax,TaxAmt=TaxAmt+new.TaxAmt-old.TaxAmt,DjCnt=DjCnt+new.DjCnt-old.DjCnt 
        where ID=new.BxID;
	end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_BxTx_22` AFTER DELETE ON `JkBx_A_BxTx`
  FOR EACH ROW
BEGIN
	update JkBx_A_Bx set TxAmt=TxAmt-old.PricePlusTax,TaxAmt=TaxAmt-old.TaxAmt,DjCnt=DjCnt-old.DjCnt where ID=old.BxID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `JkBx_A_BxZd`
--

DROP TABLE IF EXISTS `JkBx_A_BxZd`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `JkBx_A_BxZd` (
  `RecDivTag` date NOT NULL COMMENT '分区日期戳',
  `ID` int(12) unsigned NOT NULL AUTO_INCREMENT,
  `BxID` int(11) unsigned NOT NULL COMMENT '报销单ID',
  `FsSj` datetime NOT NULL COMMENT '发生时间',
  `Dd` varchar(40) NOT NULL COMMENT '地点',
  `DjCnt` tinyint(3) unsigned NOT NULL COMMENT '单据张数',
  `CyTs` varchar(100) DEFAULT NULL COMMENT '参与同事',
  `HfSm` varchar(100) NOT NULL COMMENT '花费说明',
  `HfAmt` decimal(7,2) unsigned NOT NULL COMMENT '花费金额',
  `TaxRate` tinyint(2) unsigned NOT NULL DEFAULT '0' COMMENT '税率',
  `TaxAmt` decimal(7,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '进项税',
  `CyRs` tinyint(3) unsigned NOT NULL DEFAULT '2' COMMENT '参与人数',
  `BzAmt` decimal(7,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '费用标准',
  PRIMARY KEY (`ID`) USING BTREE,
  UNIQUE KEY `JkBx_A_BxZd_idx1` (`BxID`,`FsSj`) USING BTREE,
  KEY `BxID` (`BxID`) USING BTREE,
  CONSTRAINT `JkBx_A_BxZd_fk1` FOREIGN KEY (`BxID`) REFERENCES `JkBx_A_Bx` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `JkBx_A_BxZd`
--

LOCK TABLES `JkBx_A_BxZd` WRITE;
/*!40000 ALTER TABLE `JkBx_A_BxZd` DISABLE KEYS */;
/*!40000 ALTER TABLE `JkBx_A_BxZd` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_BxZd_11` BEFORE INSERT ON `JkBx_A_BxZd`
  FOR EACH ROW
label1:
BEGIN
	DECLARE vInitUsrID SMALLINT;#报销人
    DECLARE vRecDivTag DATE;#时间戳
    DECLARE vSqrJb TINYINT;#报销人级别
    DECLARE vZgBzAmt DECIMAL(7,2);#补助标准
    DECLARE vCnt TINYINT;
    DECLARE vCyTs TINYINT;
    
    SELECT InitUsrID,RecDivTag
    into vInitUsrID,vRecDivTag
    from JkBx_A_Bx 
    where ID=new.BxID;
    
    IF new.FsSj>=NOW() then
		CALL JkBx_A_BxZd_11_err1(); #发生时间不能大于当前时间！
		LEAVE label1; 	
    end if;
    
	SELECT COUNT(*) into vCnt from dual where FIND_IN_SET(vInitUsrID,new.CyTs)>0;
	IF vCnt>0 THEN
		CALL JkBx_A_BxZd_11_err2(); #招待报销项，参与同事不包括自己！
		LEAVE label1;
	END IF;
    
    IF new.HfAmt<=0 THEN
		CALL JkBx_A_BxZd_11_err3(); #招待报销费必须大于0！
		LEAVE label1;
	END IF;
 
	set new.RecDivTag=vRecDivTag;	#copy主体时间戳
    
	SELECT Pf_UsrJobLevelNum(vInitUsrID) into vSqrJb from dual;	#报销人级别
	if vSqrJb is not null then 
		SELECT BxSq_ZdFBz(vSqrJb) into vZgBzAmt from dual;	#报销人级别范围内餐费标准
		if vZgBzAmt is not null then
			set new.BzAmt=vZgBzAmt; #餐费标准赋值
		end if;
	end if;
    
    set vCyTs = Pf_SplitStrCnt(new.CyTs,",")+1;
    IF new.CyRs<vCyTs then
		CALL JkBx_A_BxZd_11_err4(); #参与人数不能小于参与同事+1！
		LEAVE label1;
    end if;
    
    set new.TaxAmt=new.HfAmt*new.TaxRate/100;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_BxZd_21` AFTER INSERT ON `JkBx_A_BxZd`
  FOR EACH ROW
BEGIN
	update JkBx_A_Bx set DjCnt=DjCnt+new.DjCnt,ZdAmt=ZdAmt+new.HfAmt where ID=new.BxID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_BxZd_13` BEFORE UPDATE ON `JkBx_A_BxZd`
  FOR EACH ROW
label1:
BEGIN
    DECLARE	vCnt TINYINT;
    DECLARE vInitUsrID SMALLINT;	#报销人	
    DECLARE vCyTs TINYINT;
    DECLARE vSqrJb TINYINT;#报销人级别
    DECLARE vZgBzAmt DECIMAL(7,2);#补助标准
    	
    IF new.FsSj>=NOW() then
		CALL JkBx_A_BxZd_13_err1(); #发生时间不能大于当前时间！
		LEAVE label1; 	
    end if;
    
	SELECT InitUsrID into vInitUsrID from JkBx_A_Bx where ID=new.BxID;

	SELECT COUNT(*) into vCnt from dual where FIND_IN_SET(vInitUsrID,new.CyTs)>0;
    IF vCnt>0 THEN
    	CALL JkBx_A_BxZd_13_err2(); #招待报销项，参与同事不包括自己！
        LEAVE label1;
    END IF;
    
    IF new.HfAmt<=0 THEN
		CALL JkBx_A_BxZd_13_err3(); #招待报销费必须大于0！
		LEAVE label1;
	END IF;
    
    set vCyTs = Pf_SplitStrCnt(new.CyTs,",")+1;
    IF new.CyRs<vCyTs then
		CALL JkBx_A_BxZd_13_err4(); #参与人数不能小于参与同事+1！
		LEAVE label1;
    end if;
    
    SELECT Pf_UsrJobLevelNum(vInitUsrID) into vSqrJb from dual;	#报销人级别
	if vSqrJb is not null then 
		SELECT BxSq_ZdFBz(vSqrJb) into vZgBzAmt from dual;	#报销人级别范围内餐费标准
		if vZgBzAmt is not null then
			set new.BzAmt=vZgBzAmt; #餐费标准赋值
		end if;
	end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_BxZd_23` AFTER UPDATE ON `JkBx_A_BxZd`
  FOR EACH ROW
BEGIN
	if new.DjCnt!=old.DjCnt or new.HfAmt!=old.HfAmt then
    	update JkBx_A_Bx set ZdAmt=ZdAmt+new.HfAmt-old.HfAmt,DjCnt=DjCnt+new.DjCnt-old.DjCnt where ID=new.BxID;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_BxZd_22` AFTER DELETE ON `JkBx_A_BxZd`
  FOR EACH ROW
BEGIN
	update JkBx_A_Bx set ZdAmt=ZdAmt-old.HfAmt,DjCnt=DjCnt-old.DjCnt where ID=old.BxID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `JkBx_A_BxZs`
--

DROP TABLE IF EXISTS `JkBx_A_BxZs`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `JkBx_A_BxZs` (
  `RecDivTag` date NOT NULL COMMENT '分区日期戳',
  `ID` int(12) unsigned NOT NULL AUTO_INCREMENT,
  `BxID` int(11) unsigned NOT NULL COMMENT '报销单ID',
  `ZsSdS` datetime NOT NULL COMMENT '住宿时段始',
  `ZsSdM` datetime NOT NULL COMMENT '住宿时段末',
  `ZsTs` decimal(3,1) unsigned NOT NULL COMMENT '住宿天数',
  `Zsd` varchar(40) NOT NULL COMMENT '住宿地',
  `ZsdJb` tinyint(3) unsigned NOT NULL COMMENT '住宿地级别',
  `DjCnt` tinyint(3) unsigned NOT NULL COMMENT '单据张数',
  `HfSm` varchar(100) NOT NULL COMMENT '花费说明',
  `Fj` decimal(7,2) unsigned NOT NULL COMMENT '房价',
  `Rc` tinyint(2) unsigned NOT NULL DEFAULT '1' COMMENT '人次',
  `InvType` char(1) NOT NULL COMMENT '发票种类',
  `InvNum` varchar(20) NOT NULL DEFAULT '0' COMMENT '发票号码',
  `HwYsLwID` smallint(5) unsigned NOT NULL COMMENT '货物或应税劳务',
  `FwMcID` smallint(5) unsigned NOT NULL COMMENT '服务名称',
  `HfAmt` decimal(15,2) unsigned NOT NULL COMMENT '花费金额',
  `TaxAmt` decimal(15,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '进项税',
  `PricePlusTax` decimal(15,2) unsigned NOT NULL COMMENT '价税合计',
  `BzAmt` decimal(7,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '费用标准',
  PRIMARY KEY (`ID`) USING BTREE,
  UNIQUE KEY `JkBx_A_BxZs_idx2` (`BxID`,`ZsSdS`) USING BTREE,
  KEY `BxID` (`BxID`) USING BTREE,
  KEY `HwYsLwID` (`HwYsLwID`),
  KEY `FwMcID` (`FwMcID`),
  CONSTRAINT `JkBx_A_BxZs_fk1` FOREIGN KEY (`BxID`) REFERENCES `JkBx_A_Bx` (`ID`) ON DELETE CASCADE,
  CONSTRAINT `JkBx_A_BxZs_fk2` FOREIGN KEY (`HwYsLwID`) REFERENCES `Pf_M_EntAppCode` (`ID`),
  CONSTRAINT `JkBx_A_BxZs_fk3` FOREIGN KEY (`FwMcID`) REFERENCES `Pf_M_EntAppCode` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=10 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `JkBx_A_BxZs`
--

LOCK TABLES `JkBx_A_BxZs` WRITE;
/*!40000 ALTER TABLE `JkBx_A_BxZs` DISABLE KEYS */;
INSERT INTO `JkBx_A_BxZs` VALUES ('2018-07-26',9,23,'2018-07-02 18:00:00','2018-07-06 09:00:00',4.0,'假日酒店汉正街店',2,1,'出差住宿',420.00,1,'2','3232 2323 4343 5656',34,35,1600.00,96.00,1696.00,0.00);
/*!40000 ALTER TABLE `JkBx_A_BxZs` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_BxZs_11` BEFORE INSERT ON `JkBx_A_BxZs`
  FOR EACH ROW
label1:
BEGIN
	DECLARE vInitUsrID SMALLINT;#报销人
    DECLARE vRecDivTag DATE;#时间戳
    DECLARE vSqrJb TINYINT;#报销人级别
    DECLARE vZgBzAmt DECIMAL(7,2);#补助标准
    DECLARE vCnt TINYINT;
       
    if new.ZsSdS>=new.ZsSdM then
  		CALL JkBx_A_BxZs_11_err1(); # 住宿时段填写无效！
  		LEAVE label1;
    end if;
    
    IF new.ZsSdM>=now() then
  		CALL JkBx_A_BxZs_11_err2(); # 住宿时间不能大于当前时间！
  		LEAVE label1;
    end if;
    
    SELECT InitUsrID,RecDivTag
    into vInitUsrID,vRecDivTag
    from JkBx_A_Bx 
    where ID=new.BxID;
	
	SELECT COUNT(*) into vCnt from JkBx_A_Bx f,JkBx_A_BxZs c where f.ID=c.BxID and f.InitUsrID=vInitUsrID and 
    	(new.ZsSdS BETWEEN c.ZsSdS and c.ZsSdM or new.ZsSdM BETWEEN c.ZsSdS and c.ZsSdM or c.ZsSdS BETWEEN new.ZsSdS and new.ZsSdM or c.ZsSdM BETWEEN new.ZsSdS and new.ZsSdM);
	IF vCnt>0 THEN
    	CALL JkBx_A_BxZs_11_err3(); #同一申请人，住宿时段与以往申请存在重叠！
        LEAVE label1;
    END IF;
    
    SELECT COUNT(*) into vCnt from JkBx_A_BxZs 
    where EXISTS(select 1 from JkBx_A_BxZsCy where BxZsID=JkBx_A_BxZs.ID and CyUsrID=vInitUsrID) and (
    	new.ZsSdS between ZsSdS And ZsSdM or new.ZsSdM between ZsSdS And ZsSdM or 
        ZsSdS between new.ZsSdS And new.ZsSdM or ZsSdM between new.ZsSdS And new.ZsSdM);
	IF vCnt>0 THEN
    	CALL JkBx_A_BxZs_11_err4(); #当前申报住宿时段与他人把你申报为同住人申报的住宿时段存在重叠！
        LEAVE label1;
    END IF;
    
	set new.RecDivTag=vRecDivTag;	#copy主体时间戳
    
	SELECT Pf_UsrJobLevelNum(vInitUsrID) into vSqrJb from dual;#报销人级别
	if vSqrJb is not null then 
		SELECT BxSq_ZsFBz(vSqrJb,new.ZsdJb) into vZgBzAmt from dual;#报销人级别范围内住宿标准
		if vZgBzAmt is not null then
			set new.BzAmt=vZgBzAmt; #补助标准赋值
		end if;
	end if;
    
	IF new.PricePlusTax<=0 THEN
    	CALL JkBx_A_BxZs_11_err5(); #住宿报销费必须大于0！
        LEAVE label1;
    END IF;
    
    if new.InvType!='2' then
    	set new.HfAmt=new.PricePlusTax;
        set new.TaxAmt=0;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_BxZs_21` AFTER INSERT ON `JkBx_A_BxZs`
  FOR EACH ROW
BEGIN
	update JkBx_A_Bx set DjCnt=DjCnt+new.DjCnt,ZsAmt=ZsAmt+new.PricePlusTax,TaxAmt=TaxAmt+new.TaxAmt where ID=new.BxID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_BxZs_13` BEFORE UPDATE ON `JkBx_A_BxZs`
  FOR EACH ROW
label1:
BEGIN
    DECLARE	vCnt TINYINT unsigned;
    DECLARE vInitUsrID SMALLINT unsigned;	#报销人	
    
    if new.ZsSdS>=new.ZsSdM then
  		CALL JkBx_A_BxZs_13_err1(); # 住宿时段填写无效！
  		LEAVE label1;
    end if;

    IF new.ZsSdM>=now() then
  		CALL JkBx_A_BxZs_13_err2(); # 住宿时间不能大于当前时间！
  		LEAVE label1;
    end if;
    
	SELECT InitUsrID into vInitUsrID from JkBx_A_Bx where ID=new.BxID;

	SELECT COUNT(*) 
    into vCnt 
    from JkBx_A_Bx f,JkBx_A_BxZs c 
    where f.ID=c.BxID and f.InitUsrID=vInitUsrID and c.ID!= NEW.ID and (
    	new.ZsSdS BETWEEN c.ZsSdS and c.ZsSdM or new.ZsSdM BETWEEN c.ZsSdS and c.ZsSdM or c.ZsSdS BETWEEN new.ZsSdS and new.ZsSdM or c.ZsSdM BETWEEN new.ZsSdS and new.ZsSdM);
    IF vCnt>0 THEN
    	CALL JkBx_A_BxZs_13_err3(); #同一申请人，住宿时段与以往申请存在重叠！
        LEAVE label1;
    END IF;
    
    SELECT COUNT(*) into vCnt from JkBx_A_BxZs 
    where exists(select 1 from JkBx_A_BxZsCy where BxZsID=JkBx_A_BxZs.ID and CyUsrID=vInitUsrID) and (
    	new.ZsSdS between ZsSdS And ZsSdM or new.ZsSdM between ZsSdS And ZsSdM or 
        ZsSdS between new.ZsSdS And new.ZsSdM or ZsSdM between new.ZsSdS And new.ZsSdM); 
    IF vCnt>0 THEN
    	CALL JkBx_A_BxZs_13_err4(); #修改后申报住宿时段与他人把你作为同住人申报的住宿时段存在重叠！
        LEAVE label1;
    END IF;
    
    IF new.PricePlusTax<=0 THEN
    	CALL JkBx_A_BxZs_13_err5(); #住宿报销费必须大于0！
        LEAVE label1;
    END IF;
    
    if new.InvType!='2' then
    	set new.HfAmt=new.PricePlusTax;
        set new.TaxAmt=0;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_BxZs_23` AFTER UPDATE ON `JkBx_A_BxZs`
  FOR EACH ROW
BEGIN
	if new.DjCnt!=old.DjCnt or new.PricePlusTax!=old.PricePlusTax or new.TaxAmt!=old.TaxAmt then
    	update JkBx_A_Bx 
        set ZsAmt=ZsAmt+new.PricePlusTax-old.PricePlusTax,TaxAmt=TaxAmt+new.TaxAmt-old.TaxAmt,DjCnt=DjCnt+new.DjCnt-old.DjCnt 
        where ID=new.BxID;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_BxZs_22` AFTER DELETE ON `JkBx_A_BxZs`
  FOR EACH ROW
BEGIN
	update JkBx_A_Bx set ZsAmt=ZsAmt-old.PricePlusTax,TaxAmt=TaxAmt-old.TaxAmt,DjCnt=DjCnt-old.DjCnt where ID=old.BxID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `JkBx_A_BxZsCy`
--

DROP TABLE IF EXISTS `JkBx_A_BxZsCy`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `JkBx_A_BxZsCy` (
  `RecDivTag` date NOT NULL COMMENT '分区日期戳',
  `BxZsID` int(12) unsigned NOT NULL COMMENT '住宿费明细ID',
  `CyUsrID` smallint(5) unsigned NOT NULL COMMENT '成员UsrID',
  PRIMARY KEY (`BxZsID`,`CyUsrID`) USING BTREE,
  KEY `CyUsrID` (`CyUsrID`) USING BTREE,
  KEY `BxZsID` (`BxZsID`) USING BTREE,
  CONSTRAINT `JkBx_A_BxZsCy_fk1` FOREIGN KEY (`BxZsID`) REFERENCES `JkBx_A_BxZs` (`ID`) ON DELETE CASCADE,
  CONSTRAINT `JkBx_A_BxZsCy_fk2` FOREIGN KEY (`CyUsrID`) REFERENCES `Pf_M_Usr` (`ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `JkBx_A_BxZsCy`
--

LOCK TABLES `JkBx_A_BxZsCy` WRITE;
/*!40000 ALTER TABLE `JkBx_A_BxZsCy` DISABLE KEYS */;
/*!40000 ALTER TABLE `JkBx_A_BxZsCy` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_BxZsCy_11` BEFORE INSERT ON `JkBx_A_BxZsCy`
  FOR EACH ROW
label1:
BEGIN
	declare vCnt tinyint unsigned;
    declare vZsSdS datetime;
    declare vZsSdM datetime;
    DECLARE vRecDivTag DATE;
    DECLARE vBxID INTEGER unsigned;
    DECLARE vInitUsrID SMALLINT unsigned;

    select ZsSdS,ZsSdM,RecDivTag,BxID 
    into vZsSdS,vZsSdM,vRecDivTag,vBxID 
    from JkBx_A_BxZs where ID=new.BxZsID;
    
    SELECT InitUsrID into vInitUsrID from JkBx_A_Bx where ID=vBxID;
    IF vInitUsrID=new.CyUsrID then 
		call JkBx_A_BxZsCy_11_err1(); # 同住其他成员不能是报销人本人！
		LEAVE label1;
	end if;

	select count(*) into vCnt from JkBx_A_BxZs 
    where exists(select 1 from JkBx_A_Bx where ID=JkBx_A_BxZs.BxID and InitUsrID=new.CyUsrID) and (
    	vZsSdS between ZsSdS And ZsSdM or vZsSdM between ZsSdS And ZsSdM or 
        ZsSdS between vZsSdS And vZsSdM or ZsSdM between vZsSdS And vZsSdM);
    if vCnt>0 then
  		call JkBx_A_BxZsCy_11_err2(); # 同住其他成员自己申报的住宿时段与当前你把他/她作为同住人申报的住宿时段有重叠！
  		LEAVE label1;
  	end if;
    
    select count(*) into vCnt from JkBx_A_BxZs f,JkBx_A_BxZsCy c 
    where c.BxZsID=f.ID and c.CyUsrID=new.CyUsrID and c.BxZsID!=new.BxZsID and (
    	vZsSdS between f.ZsSdS And f.ZsSdM or vZsSdM between f.ZsSdS And f.ZsSdM or 
        f.ZsSdS between vZsSdS And vZsSdM or f.ZsSdM between vZsSdS And vZsSdM);
  	if vCnt>0 then
  		call JkBx_A_BxZsCy_11_err3(); # 同一同住人，他人与你申报的住宿时段有重叠！
  		LEAVE label1;
  	end if;
    
   	SET NEW.RecDivTag=vRecDivTag;	#COPY父表时间戳
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_BxZsCy_21` AFTER INSERT ON `JkBx_A_BxZsCy`
  FOR EACH ROW
BEGIN
	update JkBx_A_BxZs set Rc=Rc+1 where ID=new.BxZsID;	#修改住宿表Rc
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_BxZsCy_22` AFTER DELETE ON `JkBx_A_BxZsCy`
  FOR EACH ROW
BEGIN
	update JkBx_A_BxZs set Rc=Rc-1 where ID=old.BxZsID;	#修改住宿表Rc
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `JkBx_A_Hk`
--

DROP TABLE IF EXISTS `JkBx_A_Hk`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `JkBx_A_Hk` (
  `RecDivTag` date NOT NULL COMMENT '分区日期戳',
  `ID` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '业务标识',
  `InitUsrID` smallint(5) unsigned NOT NULL COMMENT '还款人ID',
  `InitOrgName` varchar(100) NOT NULL COMMENT '还款人部门',
  `QkSm` varchar(100) NOT NULL COMMENT '情况说明',
  `HkAmt` decimal(15,2) unsigned NOT NULL COMMENT '还款额',
  PRIMARY KEY (`ID`),
  KEY `InitUsrID` (`InitUsrID`),
  CONSTRAINT `JkBx_A_Hk_fk1` FOREIGN KEY (`InitUsrID`) REFERENCES `Pf_M_Usr` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8 PACK_KEYS=0 COMMENT='还款记录';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `JkBx_A_Hk`
--

LOCK TABLES `JkBx_A_Hk` WRITE;
/*!40000 ALTER TABLE `JkBx_A_Hk` DISABLE KEYS */;
INSERT INTO `JkBx_A_Hk` VALUES ('2018-03-29',1,12,'业务部','所借备用金到期20180330',5588.00),('2018-04-20',2,14,'数据信息部','5000',8000.00),('2018-04-20',3,14,'数据信息部','先还1000',1000.00),('2018-04-21',4,14,'数据信息部','测试Pf_ToRMB小写转大写',1000.00),('2018-05-22',5,14,'数据信息部','还款',10000.00),('2018-08-23',6,12,'业务部','金额小写转大写',602926.48);
/*!40000 ALTER TABLE `JkBx_A_Hk` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_Hk_11` BEFORE INSERT ON `JkBx_A_Hk`
  FOR EACH ROW
label1:
BEGIN
	declare vJkYe decimal(15,2) unsigned;
    
    #取还款人借款余额
    select coalesce(max(JkYe),0) into vJkYe from JkBx_M_JkYe where UsrID=new.InitUsrID;
    if vJkYe<new.HkAmt then
    	call JkBx_A_Hk_11_err1(); # 还款额超过借款余额！
    	LEAVE label1;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_Hk_13` BEFORE UPDATE ON `JkBx_A_Hk`
  FOR EACH ROW
label1:
BEGIN
	declare vJkYe decimal(15,2) unsigned;
    
    #取还款人借款余额
    select coalesce(max(JkYe),0) into vJkYe from JkBx_M_JkYe where UsrID=new.InitUsrID;
    if vJkYe<new.HkAmt then
    	call JkBx_A_Hk_13_err1(); # 还款额超过借款余额！
    	LEAVE label1;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_Hk_22` AFTER DELETE ON `JkBx_A_Hk`
  FOR EACH ROW
BEGIN
	update Pf_A_AttachInfo set DelTag='Y' where PrimaryName = 'JkBx_A_Hk_Qz' and PrimaryID=old.ID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `JkBx_A_Jk`
--

DROP TABLE IF EXISTS `JkBx_A_Jk`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `JkBx_A_Jk` (
  `RecDivTag` date NOT NULL COMMENT '分区日期戳',
  `ID` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '业务标识',
  `InitUsrID` smallint(5) unsigned NOT NULL COMMENT '申请人ID',
  `InitOrgName` varchar(100) NOT NULL COMMENT '申请人部门',
  `Sy` varchar(100) NOT NULL COMMENT '事由',
  `JkZq` smallint(4) unsigned NOT NULL DEFAULT '30' COMMENT '借款周期(天)',
  `JkAmt` decimal(15,2) unsigned NOT NULL COMMENT '借款金额',
  `JkBh` char(8) DEFAULT NULL COMMENT '借款编号',
  `DqSj` datetime DEFAULT NULL COMMENT '到期时间',
  `CdAmt` decimal(15,2) unsigned NOT NULL DEFAULT '0.00',
  `SkZhMc` varchar(100) NOT NULL DEFAULT '-' COMMENT '收款账户名',
  `SkZhKhh` varchar(100) NOT NULL DEFAULT '-' COMMENT '收款账户开户行',
  `SkZhNo` varchar(50) NOT NULL DEFAULT '-' COMMENT '收款账号',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `JkBh` (`JkBh`),
  KEY `InitUsrID` (`InitUsrID`),
  CONSTRAINT `JkBx_A_Jk_fk1` FOREIGN KEY (`InitUsrID`) REFERENCES `Pf_M_Usr` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=14 DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `JkBx_A_Jk`
--

LOCK TABLES `JkBx_A_Jk` WRITE;
/*!40000 ALTER TABLE `JkBx_A_Jk` DISABLE KEYS */;
INSERT INTO `JkBx_A_Jk` VALUES ('2018-03-22',1,12,'业务部','借款测试2018-03-22-1',2,3000.00,'2018-001','2018-03-24 15:20:05',3000.00,'-','-','-'),('2018-03-22',2,12,'业务部','准备干一大票',3,6000.00,'2018-002','2018-03-25 15:47:13',6000.00,'-','-','-'),('2018-04-01',3,14,'数据信息部','测试图片套红',10,2000.00,'2018-003','2018-04-17 11:37:12',2000.00,'-','-','-'),('2018-04-07',4,14,'数据信息部','图片套模板测试2',2,8000.00,'2018-004','2018-04-09 11:42:10',8000.00,'-','-','-'),('2018-04-07',5,12,'业务部','测试隐藏office工具栏',2,902926.48,'2018-005','2018-08-25 10:53:49',0.00,'-','-','-'),('2018-04-21',6,9,'会计核算部','测试新Pf_ToRMB函数',5,10000.00,'2018-006','2018-04-26 08:17:51',0.00,'-','-','-'),('2018-05-22',7,14,'数据信息部','到北京出差',5,10000.00,'2018-007','2018-05-27 10:30:32',10000.00,'-','-','-'),('2018-07-27',8,15,'运营管理部','备用金借款',30,30000.00,'2018-008','2018-08-26 14:37:32',1254.00,'-','-','-'),('2018-08-02',9,10,'运营管理部','借款测试20180802',30,50000.00,'2018-009','2018-09-01 00:54:51',20000.00,'-','-','-'),('2018-11-21',10,12,'业务部','借款移动测试20181123',30,20000.00,'2018-010','2018-12-21 20:02:56',0.00,'-','-','-'),('2018-11-21',11,15,'运营管理部','借款流程分支条件测试',60,4000.00,NULL,NULL,0.00,'-','-','-'),('2019-04-14',12,16,'运营管理部','测试20190415',30,10000.00,'2019-001','2019-05-14 08:03:00',0.00,'朱佳佳','北京银行知春路支行','3333 2222 1111 9999 777'),('2019-04-14',13,16,'运营管理部','测试20190415-2',30,20000.00,NULL,NULL,0.00,'朱佳佳','北京银行知春路支行','3333 2222 1111 9999 777');
/*!40000 ALTER TABLE `JkBx_A_Jk` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_Jk_11` BEFORE INSERT ON `JkBx_A_Jk`
  FOR EACH ROW
label1:
BEGIN
	if new.JkZq<=0 then
		CALL JkBx_A_Jk_11_err1(); #借款周期必须大于0！
		LEAVE label1;
	end if;

	if new.JkAmt<=0 then
		CALL JkBx_A_Jk_11_err2(); #借款金额必须大于0！
		LEAVE label1;
	end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_Jk_13` BEFORE UPDATE ON `JkBx_A_Jk`
  FOR EACH ROW
label1:
BEGIN
	if new.JkZq<=0 then
		CALL JkBx_A_Jk_13_err1(); #借款周期必须大于0！
		LEAVE label1;
	end if;

	if new.JkAmt<=0 then
		CALL JkBx_A_Jk_13_err2(); #借款金额必须大于0！
		LEAVE label1;
	end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_A_Jk_22` AFTER DELETE ON `JkBx_A_Jk`
  FOR EACH ROW
BEGIN
	update Pf_A_AttachInfo set DelTag='Y' where PrimaryName = 'JkBx_A_Jk_Qz' and PrimaryID=old.ID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `JkBx_M_BxBzJt`
--

DROP TABLE IF EXISTS `JkBx_M_BxBzJt`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `JkBx_M_BxBzJt` (
  `JbFrom` tinyint(3) unsigned NOT NULL COMMENT '级别从',
  `JbTo` tinyint(3) unsigned NOT NULL COMMENT '级别到',
  `ZgBz` tinyint(3) unsigned NOT NULL COMMENT '允许乘坐最高标准',
  PRIMARY KEY (`JbFrom`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `JkBx_M_BxBzJt`
--

LOCK TABLES `JkBx_M_BxBzJt` WRITE;
/*!40000 ALTER TABLE `JkBx_M_BxBzJt` DISABLE KEYS */;
INSERT INTO `JkBx_M_BxBzJt` VALUES (1,3,1),(5,5,2),(6,6,3);
/*!40000 ALTER TABLE `JkBx_M_BxBzJt` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_M_BxBzJt_11` BEFORE INSERT ON `JkBx_M_BxBzJt` FOR EACH ROW
label1:
BEGIN
 	DECLARE vCnt TINYINT;
 	
 	SELECT COUNT(*) into vCnt 
 	from JkBx_M_BxBzJt 
 	where new.JbFrom BETWEEN JbFrom and JbTo or new.JbTo BETWEEN JbFrom and JbTo or 
 		JbFrom BETWEEN new.JbFrom and new.JbTo or JbTo BETWEEN new.JbFrom and new.JbTo;
 	if vCnt>0 then
 		CALL JkBx_M_BxBzJt_11_err1(); #交通补助标准不能重叠！
 		LEAVE label1;
 	end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `JkBx_M_BxBzTx`
--

DROP TABLE IF EXISTS `JkBx_M_BxBzTx`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `JkBx_M_BxBzTx` (
  `JbFrom` tinyint(3) unsigned NOT NULL COMMENT '级别从',
  `JbTo` tinyint(3) unsigned NOT NULL COMMENT '级别到',
  `ZgBzAmt` decimal(7,2) unsigned NOT NULL COMMENT '允许花费最高标准/月',
  PRIMARY KEY (`JbFrom`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `JkBx_M_BxBzTx`
--

LOCK TABLES `JkBx_M_BxBzTx` WRITE;
/*!40000 ALTER TABLE `JkBx_M_BxBzTx` DISABLE KEYS */;
INSERT INTO `JkBx_M_BxBzTx` VALUES (3,3,1000.00),(5,5,400.00),(6,6,300.00);
/*!40000 ALTER TABLE `JkBx_M_BxBzTx` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_M_BxBzTx_11` BEFORE INSERT ON `JkBx_M_BxBzTx` FOR EACH ROW
label1:
BEGIN
 	DECLARE vCnt TINYINT;
 	
 	SELECT COUNT(*) into vCnt from JkBx_M_BxBzTx where new.JbFrom BETWEEN JbFrom and JbTo or new.JbTo BETWEEN JbFrom and JbTo or JbFrom BETWEEN new.JbFrom and new.JbTo or JbTo BETWEEN new.JbFrom and new.JbTo;
 	if vCnt>0 then
 		CALL JkBx_M_BxBzTx_11_err1(); #通讯费报销标准不能重叠！
 		LEAVE label1;
 	end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `JkBx_M_BxBzZs`
--

DROP TABLE IF EXISTS `JkBx_M_BxBzZs`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `JkBx_M_BxBzZs` (
  `ZsdJb` tinyint(3) unsigned NOT NULL COMMENT '住宿地级别',
  `JbFrom` tinyint(3) unsigned NOT NULL COMMENT '级别从',
  `JbTo` tinyint(3) unsigned NOT NULL COMMENT '级别到',
  `ZgBzAmt` decimal(7,2) unsigned NOT NULL COMMENT '允许消费最高标准/日',
  PRIMARY KEY (`ZsdJb`,`JbFrom`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `JkBx_M_BxBzZs`
--

LOCK TABLES `JkBx_M_BxBzZs` WRITE;
/*!40000 ALTER TABLE `JkBx_M_BxBzZs` DISABLE KEYS */;
INSERT INTO `JkBx_M_BxBzZs` VALUES (1,3,3,500.00),(1,5,5,400.00),(1,6,6,300.00),(2,3,3,400.00),(2,5,5,300.00),(2,6,6,200.00);
/*!40000 ALTER TABLE `JkBx_M_BxBzZs` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_M_BxBzZs_11` BEFORE INSERT ON `JkBx_M_BxBzZs` FOR EACH ROW
label1:
BEGIN
 	DECLARE vCnt TINYINT;
 	
 	SELECT COUNT(*) into vCnt 
 	from JkBx_M_BxBzZs 
 	where (
 		new.JbFrom BETWEEN JbFrom and JbTo or new.JbTo BETWEEN JbFrom and JbTo or 
 		JbFrom BETWEEN new.JbFrom and new.JbTo or JbTo BETWEEN new.JbFrom and new.JbTo) and new.ZsdJb=ZsdJb;
 	
 	if vCnt>0 then
 		CALL JkBx_M_BxBzZs_11_err1(); #住宿费报销标准不能重叠！
 		LEAVE label1;
 	end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `JkBx_M_BzBzZd`
--

DROP TABLE IF EXISTS `JkBx_M_BzBzZd`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `JkBx_M_BzBzZd` (
  `JbFrom` tinyint(3) unsigned NOT NULL COMMENT '级别从',
  `JbTo` tinyint(3) unsigned NOT NULL COMMENT '级别到',
  `ZgBzAmt` decimal(7,2) unsigned NOT NULL COMMENT '允许花费最高标准/人次',
  PRIMARY KEY (`JbFrom`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `JkBx_M_BzBzZd`
--

LOCK TABLES `JkBx_M_BzBzZd` WRITE;
/*!40000 ALTER TABLE `JkBx_M_BzBzZd` DISABLE KEYS */;
INSERT INTO `JkBx_M_BzBzZd` VALUES (3,3,200.00),(5,5,100.00),(6,6,50.00);
/*!40000 ALTER TABLE `JkBx_M_BzBzZd` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `JkBx_M_BzBzZd_11` BEFORE INSERT ON `JkBx_M_BzBzZd` FOR EACH ROW
label1:
BEGIN
	DECLARE vCnt TINYINT;
 
 	SELECT COUNT(*) into vCnt 
    from JkBx_M_BzBzZd 
    where new.JbFrom BETWEEN JbFrom and JbTo or new.JbTo BETWEEN JbFrom and JbTo or 
    	JbFrom BETWEEN new.JbFrom and new.JbTo or JbTo BETWEEN new.JbFrom and new.JbTo;
 	if vCnt>0 then
 		CALL JkBx_M_BzBzZd_11_err1(); #招待费报销标准不能重叠！
 		LEAVE label1;
 	end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `JkBx_M_CcdBzBz`
--

DROP TABLE IF EXISTS `JkBx_M_CcdBzBz`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `JkBx_M_CcdBzBz` (
  `ID` tinyint(3) unsigned NOT NULL AUTO_INCREMENT COMMENT '主键',
  `CcD` varchar(40) NOT NULL COMMENT '出差地',
  `ZbzAmt` decimal(7,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '差旅补助标准/日',
  `CbAmt1` decimal(7,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '早餐补助标准',
  `CbAmt2` decimal(7,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '中餐补助标准',
  `CbAmt3` decimal(7,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '晚餐补助标准',
  `JtBzAmt` decimal(7,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '交通补助标准',
  `PxM` tinyint(3) unsigned NOT NULL DEFAULT '0' COMMENT '排序码',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `JkBx_M_CcdBzBz_idx1` (`CcD`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `JkBx_M_CcdBzBz`
--

LOCK TABLES `JkBx_M_CcdBzBz` WRITE;
/*!40000 ALTER TABLE `JkBx_M_CcdBzBz` DISABLE KEYS */;
INSERT INTO `JkBx_M_CcdBzBz` VALUES (1,'北京',200.00,20.00,30.00,30.00,120.00,1),(2,'深圳',210.00,30.00,40.00,40.00,100.00,2),(3,'东盛',130.00,20.00,30.00,30.00,50.00,3);
/*!40000 ALTER TABLE `JkBx_M_CcdBzBz` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `JkBx_M_JkYe`
--

DROP TABLE IF EXISTS `JkBx_M_JkYe`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `JkBx_M_JkYe` (
  `UsrID` smallint(5) unsigned NOT NULL COMMENT '员工ID',
  `JkYe` decimal(15,2) unsigned NOT NULL COMMENT '借款余额',
  `UpdTs` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '最后更新时间',
  PRIMARY KEY (`UsrID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 PACK_KEYS=0 COMMENT='员工个人借款余额';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `JkBx_M_JkYe`
--

LOCK TABLES `JkBx_M_JkYe` WRITE;
/*!40000 ALTER TABLE `JkBx_M_JkYe` DISABLE KEYS */;
INSERT INTO `JkBx_M_JkYe` VALUES (9,10000.00,'2018-04-21 08:17:51'),(10,30000.00,'2018-08-02 01:11:19'),(12,922926.48,'2018-08-23 10:53:49'),(15,28746.00,'2018-07-27 22:24:48'),(16,10000.00,'2019-04-14 08:03:00');
/*!40000 ALTER TABLE `JkBx_M_JkYe` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `KqPd_A_Lj`
--

DROP TABLE IF EXISTS `KqPd_A_Lj`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `KqPd_A_Lj` (
  `RecDivTag` date NOT NULL COMMENT '分区日期戳',
  `ID` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '流水',
  `KqNy` char(6) NOT NULL COMMENT '考勤年月',
  `UsrID` smallint(5) unsigned NOT NULL COMMENT '人员ID',
  `CqTs` decimal(4,1) unsigned NOT NULL COMMENT '出勤天数',
  `QqTs` decimal(4,1) unsigned NOT NULL COMMENT '缺勤天数',
  `CqTsBnLj` decimal(4,1) unsigned NOT NULL COMMENT '出勤天数年累',
  `QqTsBnLj` decimal(4,1) unsigned NOT NULL COMMENT '缺勤天数年累',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `KqPd_A_Lj_idx1` (`KqNy`,`UsrID`),
  KEY `UsrID` (`UsrID`),
  CONSTRAINT `KqPd_A_Lj_fk1` FOREIGN KEY (`UsrID`) REFERENCES `Pf_M_Usr` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=135 DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `KqPd_A_Lj`
--

LOCK TABLES `KqPd_A_Lj` WRITE;
/*!40000 ALTER TABLE `KqPd_A_Lj` DISABLE KEYS */;
INSERT INTO `KqPd_A_Lj` VALUES ('2018-07-31',16,'201807',1,22.0,0.0,22.0,0.0),('2018-07-31',17,'201807',2,22.0,0.0,22.0,0.0),('2018-07-31',18,'201807',3,22.0,0.0,22.0,0.0),('2018-07-31',19,'201807',4,22.0,0.0,22.0,0.0),('2018-07-31',20,'201807',5,22.0,0.0,22.0,0.0),('2018-07-31',21,'201807',6,22.0,0.0,22.0,0.0),('2018-07-31',22,'201807',7,22.0,0.0,22.0,0.0),('2018-07-31',23,'201807',8,22.0,0.0,22.0,0.0),('2018-07-31',24,'201807',9,22.0,0.0,22.0,0.0),('2018-07-31',25,'201807',10,20.5,1.5,20.5,1.5),('2018-07-31',26,'201807',11,22.0,0.0,22.0,0.0),('2018-07-31',27,'201807',12,22.0,0.0,22.0,0.0),('2018-07-31',28,'201807',13,22.0,0.0,22.0,0.0),('2018-07-31',29,'201807',14,22.0,0.0,22.0,0.0),('2018-07-31',30,'201807',15,22.0,0.0,22.0,0.0),('2018-08-01',31,'201808',1,23.0,0.0,45.0,0.0),('2018-08-01',32,'201808',2,23.0,0.0,45.0,0.0),('2018-08-01',33,'201808',3,23.0,0.0,45.0,0.0),('2018-08-01',34,'201808',4,23.0,0.0,45.0,0.0),('2018-08-01',35,'201808',5,23.0,0.0,45.0,0.0),('2018-08-01',36,'201808',6,23.0,0.0,45.0,0.0),('2018-08-01',37,'201808',7,23.0,0.0,45.0,0.0),('2018-08-01',38,'201808',8,23.0,0.0,45.0,0.0),('2018-08-01',39,'201808',9,23.0,0.0,45.0,0.0),('2018-08-01',40,'201808',10,23.0,0.0,43.5,1.5),('2018-08-01',41,'201808',11,23.0,0.0,45.0,0.0),('2018-08-01',42,'201808',12,23.0,0.0,45.0,0.0),('2018-08-01',43,'201808',13,23.0,0.0,45.0,0.0),('2018-08-01',44,'201808',14,23.0,0.0,45.0,0.0),('2018-08-01',45,'201808',15,23.0,0.0,45.0,0.0),('2018-08-03',46,'201808',16,23.0,0.0,23.0,0.0),('2018-08-11',47,'201808',17,23.0,0.0,23.0,0.0),('2018-09-15',48,'201809',1,20.0,0.0,65.0,0.0),('2018-09-15',49,'201809',2,20.0,0.0,65.0,0.0),('2018-09-15',50,'201809',3,20.0,0.0,65.0,0.0),('2018-09-15',51,'201809',4,20.0,0.0,65.0,0.0),('2018-09-15',52,'201809',5,20.0,0.0,65.0,0.0),('2018-09-15',53,'201809',6,20.0,0.0,65.0,0.0),('2018-09-15',54,'201809',7,20.0,0.0,65.0,0.0),('2018-09-15',55,'201809',8,20.0,0.0,65.0,0.0),('2018-09-15',56,'201809',9,20.0,0.0,65.0,0.0),('2018-09-15',57,'201809',10,20.0,0.0,63.5,1.5),('2018-09-15',58,'201809',11,20.0,0.0,65.0,0.0),('2018-09-15',59,'201809',12,20.0,0.0,65.0,0.0),('2018-09-15',60,'201809',13,20.0,0.0,65.0,0.0),('2018-09-15',61,'201809',14,20.0,0.0,65.0,0.0),('2018-09-15',62,'201809',15,20.0,0.0,65.0,0.0),('2018-09-15',63,'201809',16,20.0,0.0,43.0,0.0),('2018-09-15',64,'201809',17,20.0,0.0,43.0,0.0),('2018-10-15',65,'201810',1,15.0,0.0,80.0,0.0),('2018-10-15',66,'201810',2,15.0,0.0,80.0,0.0),('2018-10-15',67,'201810',3,15.0,0.0,80.0,0.0),('2018-10-15',68,'201810',4,15.0,0.0,80.0,0.0),('2018-10-15',69,'201810',5,15.0,0.0,80.0,0.0),('2018-10-15',70,'201810',6,15.0,0.0,80.0,0.0),('2018-10-15',71,'201810',7,15.0,0.0,80.0,0.0),('2018-10-15',72,'201810',8,15.0,0.0,80.0,0.0),('2018-10-15',73,'201810',9,15.0,0.0,80.0,0.0),('2018-10-15',74,'201810',10,15.0,0.0,78.5,1.5),('2018-10-15',75,'201810',11,15.0,0.0,80.0,0.0),('2018-10-15',76,'201810',12,15.0,0.0,80.0,0.0),('2018-10-15',77,'201810',13,15.0,0.0,80.0,0.0),('2018-10-15',78,'201810',14,15.0,0.0,80.0,0.0),('2018-10-15',79,'201810',15,15.0,0.0,80.0,0.0),('2018-10-15',80,'201810',16,15.0,0.0,58.0,0.0),('2018-10-15',81,'201810',17,15.0,0.0,58.0,0.0),('2018-11-02',82,'201811',1,2.0,0.0,82.0,0.0),('2018-11-02',83,'201811',2,2.0,0.0,82.0,0.0),('2018-11-02',84,'201811',3,2.0,0.0,82.0,0.0),('2018-11-02',85,'201811',4,2.0,0.0,82.0,0.0),('2018-11-02',86,'201811',5,2.0,0.0,82.0,0.0),('2018-11-02',87,'201811',6,2.0,0.0,82.0,0.0),('2018-11-02',88,'201811',7,2.0,0.0,82.0,0.0),('2018-11-02',89,'201811',8,2.0,0.0,82.0,0.0),('2018-11-02',90,'201811',9,2.0,0.0,82.0,0.0),('2018-11-02',91,'201811',10,2.0,0.0,80.5,1.5),('2018-11-02',92,'201811',11,2.0,0.0,82.0,0.0),('2018-11-02',93,'201811',12,2.0,0.0,82.0,0.0),('2018-11-02',94,'201811',13,2.0,0.0,82.0,0.0),('2018-11-02',95,'201811',14,2.0,0.0,82.0,0.0),('2018-11-02',96,'201811',15,2.0,0.0,82.0,0.0),('2018-11-02',97,'201811',16,2.0,0.0,60.0,0.0),('2018-11-02',98,'201811',17,2.0,0.0,60.0,0.0),('2018-12-07',99,'201812',1,6.0,0.0,88.0,0.0),('2018-12-07',100,'201812',2,6.0,0.0,88.0,0.0),('2018-12-07',101,'201812',3,6.0,0.0,88.0,0.0),('2018-12-07',102,'201812',4,6.0,0.0,88.0,0.0),('2018-12-07',103,'201812',5,6.0,0.0,88.0,0.0),('2018-12-07',104,'201812',6,6.0,0.0,88.0,0.0),('2018-12-07',105,'201812',7,6.0,0.0,88.0,0.0),('2018-12-07',106,'201812',8,6.0,0.0,88.0,0.0),('2018-12-07',107,'201812',9,6.0,0.0,88.0,0.0),('2018-12-07',108,'201812',10,6.0,0.0,86.5,1.5),('2018-12-07',109,'201812',11,6.0,0.0,88.0,0.0),('2018-12-07',110,'201812',12,6.0,0.0,88.0,0.0),('2018-12-07',111,'201812',13,6.0,0.0,88.0,0.0),('2018-12-07',112,'201812',14,6.0,0.0,88.0,0.0),('2018-12-07',113,'201812',15,6.0,0.0,88.0,0.0),('2018-12-07',114,'201812',16,6.0,0.0,66.0,0.0),('2018-12-07',115,'201812',17,6.0,0.0,66.0,0.0),('2019-04-01',116,'201904',1,12.0,0.0,100.0,0.0),('2019-04-01',117,'201904',2,12.0,0.0,100.0,0.0),('2019-04-01',118,'201904',3,12.0,0.0,100.0,0.0),('2019-04-01',119,'201904',4,12.0,0.0,100.0,0.0),('2019-04-01',120,'201904',5,12.0,0.0,100.0,0.0),('2019-04-01',121,'201904',6,12.0,0.0,100.0,0.0),('2019-04-01',122,'201904',7,12.0,0.0,100.0,0.0),('2019-04-01',123,'201904',8,12.0,0.0,100.0,0.0),('2019-04-01',124,'201904',9,12.0,0.0,100.0,0.0),('2019-04-01',125,'201904',10,12.0,0.0,98.5,1.5),('2019-04-01',126,'201904',11,12.0,0.0,100.0,0.0),('2019-04-01',127,'201904',12,12.0,0.0,100.0,0.0),('2019-04-01',128,'201904',13,12.0,0.0,100.0,0.0),('2019-04-01',129,'201904',14,12.0,0.0,100.0,0.0),('2019-04-01',130,'201904',15,12.0,0.0,100.0,0.0),('2019-04-01',131,'201904',16,12.0,0.0,78.0,0.0),('2019-04-01',132,'201904',17,12.0,0.0,78.0,0.0),('2019-04-01',133,'201904',18,12.0,0.0,12.0,0.0),('2019-04-01',134,'201904',19,12.0,0.0,12.0,0.0);
/*!40000 ALTER TABLE `KqPd_A_Lj` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `KqPd_A_Lj_11` BEFORE INSERT ON `KqPd_A_Lj`
  FOR EACH ROW
BEGIN
	declare vCnt tinyint unsigned;
    declare vCqTsBnLj,vQqTsBnLj decimal(4,1) unsigned;
    
   	set new.CqTs=0;
   	set new.QqTs=0;
    
	if DATE_FORMAT(now(),'%m')='01' then
    	set new.CqTsBnLj=0;
    	set new.QqTsBnLj=0;
    else
    	select CqTsBnLj,QqTsBnLj into vCqTsBnLj,vQqTsBnLj
        from KqPd_A_Lj
        where UsrID=new.UsrID
        order by KqNy desc limit 1;
        
        if vCqTsBnLj is null then
        	set vCqTsBnLj=0;
            set vQqTsBnLj=0;
        end if;
        
    	set new.CqTsBnLj=vCqTsBnLj;
    	set new.QqTsBnLj=vQqTsBnLj;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `KqPd_A_Mx`
--

DROP TABLE IF EXISTS `KqPd_A_Mx`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `KqPd_A_Mx` (
  `RecDivTag` date NOT NULL COMMENT '分区日期戳',
  `ID` int(12) unsigned NOT NULL AUTO_INCREMENT COMMENT '明细标识',
  `LjID` int(10) unsigned NOT NULL COMMENT '累计ID',
  `KqRq` date NOT NULL COMMENT '考勤日期',
  `SxW` char(1) NOT NULL COMMENT '上/下午',
  `SfCq` char(1) NOT NULL COMMENT '是否出勤',
  `Bz` varchar(100) DEFAULT NULL COMMENT '备注',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `KqPd_A_Mx_idx1` (`LjID`,`KqRq`,`SxW`),
  KEY `LjID` (`LjID`),
  CONSTRAINT `KqPd_A_Mx_fk1` FOREIGN KEY (`LjID`) REFERENCES `KqPd_A_Lj` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=4021 DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `KqPd_A_Mx`
--

LOCK TABLES `KqPd_A_Mx` WRITE;
/*!40000 ALTER TABLE `KqPd_A_Mx` DISABLE KEYS */;
INSERT INTO `KqPd_A_Mx` VALUES ('2018-07-31',661,16,'2018-07-02','S','Y',NULL),('2018-07-31',662,16,'2018-07-02','X','Y',NULL),('2018-07-31',663,16,'2018-07-03','S','Y',NULL),('2018-07-31',664,16,'2018-07-03','X','Y',NULL),('2018-07-31',665,16,'2018-07-04','S','Y',NULL),('2018-07-31',666,16,'2018-07-04','X','Y',NULL),('2018-07-31',667,16,'2018-07-05','S','Y',NULL),('2018-07-31',668,16,'2018-07-05','X','Y',NULL),('2018-07-31',669,16,'2018-07-06','S','Y',NULL),('2018-07-31',670,16,'2018-07-06','X','Y',NULL),('2018-07-31',671,16,'2018-07-09','S','Y',NULL),('2018-07-31',672,16,'2018-07-09','X','Y',NULL),('2018-07-31',673,16,'2018-07-10','S','Y',NULL),('2018-07-31',674,16,'2018-07-10','X','Y',NULL),('2018-07-31',675,16,'2018-07-11','S','Y',NULL),('2018-07-31',676,16,'2018-07-11','X','Y',NULL),('2018-07-31',677,16,'2018-07-12','S','Y',NULL),('2018-07-31',678,16,'2018-07-12','X','Y',NULL),('2018-07-31',679,16,'2018-07-13','S','Y',NULL),('2018-07-31',680,16,'2018-07-13','X','Y',NULL),('2018-07-31',681,16,'2018-07-16','S','Y',NULL),('2018-07-31',682,16,'2018-07-16','X','Y',NULL),('2018-07-31',683,16,'2018-07-17','S','Y',NULL),('2018-07-31',684,16,'2018-07-17','X','Y',NULL),('2018-07-31',685,16,'2018-07-18','S','Y',NULL),('2018-07-31',686,16,'2018-07-18','X','Y',NULL),('2018-07-31',687,16,'2018-07-19','S','Y',NULL),('2018-07-31',688,16,'2018-07-19','X','Y',NULL),('2018-07-31',689,16,'2018-07-20','S','Y',NULL),('2018-07-31',690,16,'2018-07-20','X','Y',NULL),('2018-07-31',691,16,'2018-07-23','S','Y',NULL),('2018-07-31',692,16,'2018-07-23','X','Y',NULL),('2018-07-31',693,16,'2018-07-24','S','Y',NULL),('2018-07-31',694,16,'2018-07-24','X','Y',NULL),('2018-07-31',695,16,'2018-07-25','S','Y',NULL),('2018-07-31',696,16,'2018-07-25','X','Y',NULL),('2018-07-31',697,16,'2018-07-26','S','Y',NULL),('2018-07-31',698,16,'2018-07-26','X','Y',NULL),('2018-07-31',699,16,'2018-07-27','S','Y',NULL),('2018-07-31',700,16,'2018-07-27','X','Y',NULL),('2018-07-31',701,16,'2018-07-30','S','Y',NULL),('2018-07-31',702,16,'2018-07-30','X','Y',NULL),('2018-07-31',703,16,'2018-07-31','S','Y',NULL),('2018-07-31',704,16,'2018-07-31','X','Y',NULL),('2018-07-31',705,17,'2018-07-02','S','Y',NULL),('2018-07-31',706,17,'2018-07-02','X','Y',NULL),('2018-07-31',707,17,'2018-07-03','S','Y',NULL),('2018-07-31',708,17,'2018-07-03','X','Y',NULL),('2018-07-31',709,17,'2018-07-04','S','Y',NULL),('2018-07-31',710,17,'2018-07-04','X','Y',NULL),('2018-07-31',711,17,'2018-07-05','S','Y',NULL),('2018-07-31',712,17,'2018-07-05','X','Y',NULL),('2018-07-31',713,17,'2018-07-06','S','Y',NULL),('2018-07-31',714,17,'2018-07-06','X','Y',NULL),('2018-07-31',715,17,'2018-07-09','S','Y',NULL),('2018-07-31',716,17,'2018-07-09','X','Y',NULL),('2018-07-31',717,17,'2018-07-10','S','Y',NULL),('2018-07-31',718,17,'2018-07-10','X','Y',NULL),('2018-07-31',719,17,'2018-07-11','S','Y',NULL),('2018-07-31',720,17,'2018-07-11','X','Y',NULL),('2018-07-31',721,17,'2018-07-12','S','Y',NULL),('2018-07-31',722,17,'2018-07-12','X','Y',NULL),('2018-07-31',723,17,'2018-07-13','S','Y',NULL),('2018-07-31',724,17,'2018-07-13','X','Y',NULL),('2018-07-31',725,17,'2018-07-16','S','Y',NULL),('2018-07-31',726,17,'2018-07-16','X','Y',NULL),('2018-07-31',727,17,'2018-07-17','S','Y',NULL),('2018-07-31',728,17,'2018-07-17','X','Y',NULL),('2018-07-31',729,17,'2018-07-18','S','Y',NULL),('2018-07-31',730,17,'2018-07-18','X','Y',NULL),('2018-07-31',731,17,'2018-07-19','S','Y',NULL),('2018-07-31',732,17,'2018-07-19','X','Y',NULL),('2018-07-31',733,17,'2018-07-20','S','Y',NULL),('2018-07-31',734,17,'2018-07-20','X','Y',NULL),('2018-07-31',735,17,'2018-07-23','S','Y',NULL),('2018-07-31',736,17,'2018-07-23','X','Y',NULL),('2018-07-31',737,17,'2018-07-24','S','Y',NULL),('2018-07-31',738,17,'2018-07-24','X','Y',NULL),('2018-07-31',739,17,'2018-07-25','S','Y',NULL),('2018-07-31',740,17,'2018-07-25','X','Y',NULL),('2018-07-31',741,17,'2018-07-26','S','Y',NULL),('2018-07-31',742,17,'2018-07-26','X','Y',NULL),('2018-07-31',743,17,'2018-07-27','S','Y',NULL),('2018-07-31',744,17,'2018-07-27','X','Y',NULL),('2018-07-31',745,17,'2018-07-30','S','Y',NULL),('2018-07-31',746,17,'2018-07-30','X','Y',NULL),('2018-07-31',747,17,'2018-07-31','S','Y',NULL),('2018-07-31',748,17,'2018-07-31','X','Y',NULL),('2018-07-31',749,18,'2018-07-02','S','Y',NULL),('2018-07-31',750,18,'2018-07-02','X','Y',NULL),('2018-07-31',751,18,'2018-07-03','S','Y',NULL),('2018-07-31',752,18,'2018-07-03','X','Y',NULL),('2018-07-31',753,18,'2018-07-04','S','Y',NULL),('2018-07-31',754,18,'2018-07-04','X','Y',NULL),('2018-07-31',755,18,'2018-07-05','S','Y',NULL),('2018-07-31',756,18,'2018-07-05','X','Y',NULL),('2018-07-31',757,18,'2018-07-06','S','Y',NULL),('2018-07-31',758,18,'2018-07-06','X','Y',NULL),('2018-07-31',759,18,'2018-07-09','S','Y',NULL),('2018-07-31',760,18,'2018-07-09','X','Y',NULL),('2018-07-31',761,18,'2018-07-10','S','Y',NULL),('2018-07-31',762,18,'2018-07-10','X','Y',NULL),('2018-07-31',763,18,'2018-07-11','S','Y',NULL),('2018-07-31',764,18,'2018-07-11','X','Y',NULL),('2018-07-31',765,18,'2018-07-12','S','Y',NULL),('2018-07-31',766,18,'2018-07-12','X','Y',NULL),('2018-07-31',767,18,'2018-07-13','S','Y',NULL),('2018-07-31',768,18,'2018-07-13','X','Y',NULL),('2018-07-31',769,18,'2018-07-16','S','Y',NULL),('2018-07-31',770,18,'2018-07-16','X','Y',NULL),('2018-07-31',771,18,'2018-07-17','S','Y',NULL),('2018-07-31',772,18,'2018-07-17','X','Y',NULL),('2018-07-31',773,18,'2018-07-18','S','Y',NULL),('2018-07-31',774,18,'2018-07-18','X','Y',NULL),('2018-07-31',775,18,'2018-07-19','S','Y',NULL),('2018-07-31',776,18,'2018-07-19','X','Y',NULL),('2018-07-31',777,18,'2018-07-20','S','Y',NULL),('2018-07-31',778,18,'2018-07-20','X','Y',NULL),('2018-07-31',779,18,'2018-07-23','S','Y',NULL),('2018-07-31',780,18,'2018-07-23','X','Y',NULL),('2018-07-31',781,18,'2018-07-24','S','Y',NULL),('2018-07-31',782,18,'2018-07-24','X','Y',NULL),('2018-07-31',783,18,'2018-07-25','S','Y',NULL),('2018-07-31',784,18,'2018-07-25','X','Y',NULL),('2018-07-31',785,18,'2018-07-26','S','Y',NULL),('2018-07-31',786,18,'2018-07-26','X','Y',NULL),('2018-07-31',787,18,'2018-07-27','S','Y',NULL),('2018-07-31',788,18,'2018-07-27','X','Y',NULL),('2018-07-31',789,18,'2018-07-30','S','Y',NULL),('2018-07-31',790,18,'2018-07-30','X','Y',NULL),('2018-07-31',791,18,'2018-07-31','S','Y',NULL),('2018-07-31',792,18,'2018-07-31','X','Y',NULL),('2018-07-31',793,19,'2018-07-02','S','Y',NULL),('2018-07-31',794,19,'2018-07-02','X','Y',NULL),('2018-07-31',795,19,'2018-07-03','S','Y',NULL),('2018-07-31',796,19,'2018-07-03','X','Y',NULL),('2018-07-31',797,19,'2018-07-04','S','Y',NULL),('2018-07-31',798,19,'2018-07-04','X','Y',NULL),('2018-07-31',799,19,'2018-07-05','S','Y',NULL),('2018-07-31',800,19,'2018-07-05','X','Y',NULL),('2018-07-31',801,19,'2018-07-06','S','Y',NULL),('2018-07-31',802,19,'2018-07-06','X','Y',NULL),('2018-07-31',803,19,'2018-07-09','S','Y',NULL),('2018-07-31',804,19,'2018-07-09','X','Y',NULL),('2018-07-31',805,19,'2018-07-10','S','Y',NULL),('2018-07-31',806,19,'2018-07-10','X','Y',NULL),('2018-07-31',807,19,'2018-07-11','S','Y',NULL),('2018-07-31',808,19,'2018-07-11','X','Y',NULL),('2018-07-31',809,19,'2018-07-12','S','Y',NULL),('2018-07-31',810,19,'2018-07-12','X','Y',NULL),('2018-07-31',811,19,'2018-07-13','S','Y',NULL),('2018-07-31',812,19,'2018-07-13','X','Y',NULL),('2018-07-31',813,19,'2018-07-16','S','Y',NULL),('2018-07-31',814,19,'2018-07-16','X','Y',NULL),('2018-07-31',815,19,'2018-07-17','S','Y',NULL),('2018-07-31',816,19,'2018-07-17','X','Y',NULL),('2018-07-31',817,19,'2018-07-18','S','Y',NULL),('2018-07-31',818,19,'2018-07-18','X','Y',NULL),('2018-07-31',819,19,'2018-07-19','S','Y',NULL),('2018-07-31',820,19,'2018-07-19','X','Y',NULL),('2018-07-31',821,19,'2018-07-20','S','Y',NULL),('2018-07-31',822,19,'2018-07-20','X','Y',NULL),('2018-07-31',823,19,'2018-07-23','S','Y',NULL),('2018-07-31',824,19,'2018-07-23','X','Y',NULL),('2018-07-31',825,19,'2018-07-24','S','Y',NULL),('2018-07-31',826,19,'2018-07-24','X','Y',NULL),('2018-07-31',827,19,'2018-07-25','S','Y',NULL),('2018-07-31',828,19,'2018-07-25','X','Y',NULL),('2018-07-31',829,19,'2018-07-26','S','Y',NULL),('2018-07-31',830,19,'2018-07-26','X','Y',NULL),('2018-07-31',831,19,'2018-07-27','S','Y',NULL),('2018-07-31',832,19,'2018-07-27','X','Y',NULL),('2018-07-31',833,19,'2018-07-30','S','Y',NULL),('2018-07-31',834,19,'2018-07-30','X','Y',NULL),('2018-07-31',835,19,'2018-07-31','S','Y',NULL),('2018-07-31',836,19,'2018-07-31','X','Y',NULL),('2018-07-31',837,20,'2018-07-02','S','Y',NULL),('2018-07-31',838,20,'2018-07-02','X','Y',NULL),('2018-07-31',839,20,'2018-07-03','S','Y',NULL),('2018-07-31',840,20,'2018-07-03','X','Y',NULL),('2018-07-31',841,20,'2018-07-04','S','Y',NULL),('2018-07-31',842,20,'2018-07-04','X','Y',NULL),('2018-07-31',843,20,'2018-07-05','S','Y',NULL),('2018-07-31',844,20,'2018-07-05','X','Y',NULL),('2018-07-31',845,20,'2018-07-06','S','Y',NULL),('2018-07-31',846,20,'2018-07-06','X','Y',NULL),('2018-07-31',847,20,'2018-07-09','S','Y',NULL),('2018-07-31',848,20,'2018-07-09','X','Y',NULL),('2018-07-31',849,20,'2018-07-10','S','Y',NULL),('2018-07-31',850,20,'2018-07-10','X','Y',NULL),('2018-07-31',851,20,'2018-07-11','S','Y',NULL),('2018-07-31',852,20,'2018-07-11','X','Y',NULL),('2018-07-31',853,20,'2018-07-12','S','Y',NULL),('2018-07-31',854,20,'2018-07-12','X','Y',NULL),('2018-07-31',855,20,'2018-07-13','S','Y',NULL),('2018-07-31',856,20,'2018-07-13','X','Y',NULL),('2018-07-31',857,20,'2018-07-16','S','Y',NULL),('2018-07-31',858,20,'2018-07-16','X','Y',NULL),('2018-07-31',859,20,'2018-07-17','S','Y',NULL),('2018-07-31',860,20,'2018-07-17','X','Y',NULL),('2018-07-31',861,20,'2018-07-18','S','Y',NULL),('2018-07-31',862,20,'2018-07-18','X','Y',NULL),('2018-07-31',863,20,'2018-07-19','S','Y',NULL),('2018-07-31',864,20,'2018-07-19','X','Y',NULL),('2018-07-31',865,20,'2018-07-20','S','Y',NULL),('2018-07-31',866,20,'2018-07-20','X','Y',NULL),('2018-07-31',867,20,'2018-07-23','S','Y',NULL),('2018-07-31',868,20,'2018-07-23','X','Y',NULL),('2018-07-31',869,20,'2018-07-24','S','Y',NULL),('2018-07-31',870,20,'2018-07-24','X','Y',NULL),('2018-07-31',871,20,'2018-07-25','S','Y',NULL),('2018-07-31',872,20,'2018-07-25','X','Y',NULL),('2018-07-31',873,20,'2018-07-26','S','Y',NULL),('2018-07-31',874,20,'2018-07-26','X','Y',NULL),('2018-07-31',875,20,'2018-07-27','S','Y',NULL),('2018-07-31',876,20,'2018-07-27','X','Y',NULL),('2018-07-31',877,20,'2018-07-30','S','Y',NULL),('2018-07-31',878,20,'2018-07-30','X','Y',NULL),('2018-07-31',879,20,'2018-07-31','S','Y',NULL),('2018-07-31',880,20,'2018-07-31','X','Y',NULL),('2018-07-31',881,21,'2018-07-02','S','Y',NULL),('2018-07-31',882,21,'2018-07-02','X','Y',NULL),('2018-07-31',883,21,'2018-07-03','S','Y',NULL),('2018-07-31',884,21,'2018-07-03','X','Y',NULL),('2018-07-31',885,21,'2018-07-04','S','Y',NULL),('2018-07-31',886,21,'2018-07-04','X','Y',NULL),('2018-07-31',887,21,'2018-07-05','S','Y',NULL),('2018-07-31',888,21,'2018-07-05','X','Y',NULL),('2018-07-31',889,21,'2018-07-06','S','Y',NULL),('2018-07-31',890,21,'2018-07-06','X','Y',NULL),('2018-07-31',891,21,'2018-07-09','S','Y',NULL),('2018-07-31',892,21,'2018-07-09','X','Y',NULL),('2018-07-31',893,21,'2018-07-10','S','Y',NULL),('2018-07-31',894,21,'2018-07-10','X','Y',NULL),('2018-07-31',895,21,'2018-07-11','S','Y',NULL),('2018-07-31',896,21,'2018-07-11','X','Y',NULL),('2018-07-31',897,21,'2018-07-12','S','Y',NULL),('2018-07-31',898,21,'2018-07-12','X','Y',NULL),('2018-07-31',899,21,'2018-07-13','S','Y',NULL),('2018-07-31',900,21,'2018-07-13','X','Y',NULL),('2018-07-31',901,21,'2018-07-16','S','Y',NULL),('2018-07-31',902,21,'2018-07-16','X','Y',NULL),('2018-07-31',903,21,'2018-07-17','S','Y',NULL),('2018-07-31',904,21,'2018-07-17','X','Y',NULL),('2018-07-31',905,21,'2018-07-18','S','Y',NULL),('2018-07-31',906,21,'2018-07-18','X','Y',NULL),('2018-07-31',907,21,'2018-07-19','S','Y',NULL),('2018-07-31',908,21,'2018-07-19','X','Y',NULL),('2018-07-31',909,21,'2018-07-20','S','Y',NULL),('2018-07-31',910,21,'2018-07-20','X','Y',NULL),('2018-07-31',911,21,'2018-07-23','S','Y',NULL),('2018-07-31',912,21,'2018-07-23','X','Y',NULL),('2018-07-31',913,21,'2018-07-24','S','Y',NULL),('2018-07-31',914,21,'2018-07-24','X','Y',NULL),('2018-07-31',915,21,'2018-07-25','S','Y',NULL),('2018-07-31',916,21,'2018-07-25','X','Y',NULL),('2018-07-31',917,21,'2018-07-26','S','Y',NULL),('2018-07-31',918,21,'2018-07-26','X','Y',NULL),('2018-07-31',919,21,'2018-07-27','S','Y',NULL),('2018-07-31',920,21,'2018-07-27','X','Y',NULL),('2018-07-31',921,21,'2018-07-30','S','Y',NULL),('2018-07-31',922,21,'2018-07-30','X','Y',NULL),('2018-07-31',923,21,'2018-07-31','S','Y',NULL),('2018-07-31',924,21,'2018-07-31','X','Y',NULL),('2018-07-31',925,22,'2018-07-02','S','Y',NULL),('2018-07-31',926,22,'2018-07-02','X','Y',NULL),('2018-07-31',927,22,'2018-07-03','S','Y',NULL),('2018-07-31',928,22,'2018-07-03','X','Y',NULL),('2018-07-31',929,22,'2018-07-04','S','Y',NULL),('2018-07-31',930,22,'2018-07-04','X','Y',NULL),('2018-07-31',931,22,'2018-07-05','S','Y',NULL),('2018-07-31',932,22,'2018-07-05','X','Y',NULL),('2018-07-31',933,22,'2018-07-06','S','Y',NULL),('2018-07-31',934,22,'2018-07-06','X','Y',NULL),('2018-07-31',935,22,'2018-07-09','S','Y',NULL),('2018-07-31',936,22,'2018-07-09','X','Y',NULL),('2018-07-31',937,22,'2018-07-10','S','Y',NULL),('2018-07-31',938,22,'2018-07-10','X','Y',NULL),('2018-07-31',939,22,'2018-07-11','S','Y',NULL),('2018-07-31',940,22,'2018-07-11','X','Y',NULL),('2018-07-31',941,22,'2018-07-12','S','Y',NULL),('2018-07-31',942,22,'2018-07-12','X','Y',NULL),('2018-07-31',943,22,'2018-07-13','S','Y',NULL),('2018-07-31',944,22,'2018-07-13','X','Y',NULL),('2018-07-31',945,22,'2018-07-16','S','Y',NULL),('2018-07-31',946,22,'2018-07-16','X','Y',NULL),('2018-07-31',947,22,'2018-07-17','S','Y',NULL),('2018-07-31',948,22,'2018-07-17','X','Y',NULL),('2018-07-31',949,22,'2018-07-18','S','Y',NULL),('2018-07-31',950,22,'2018-07-18','X','Y',NULL),('2018-07-31',951,22,'2018-07-19','S','Y',NULL),('2018-07-31',952,22,'2018-07-19','X','Y',NULL),('2018-07-31',953,22,'2018-07-20','S','Y',NULL),('2018-07-31',954,22,'2018-07-20','X','Y',NULL),('2018-07-31',955,22,'2018-07-23','S','Y',NULL),('2018-07-31',956,22,'2018-07-23','X','Y',NULL),('2018-07-31',957,22,'2018-07-24','S','Y',NULL),('2018-07-31',958,22,'2018-07-24','X','Y',NULL),('2018-07-31',959,22,'2018-07-25','S','Y',NULL),('2018-07-31',960,22,'2018-07-25','X','Y',NULL),('2018-07-31',961,22,'2018-07-26','S','Y',NULL),('2018-07-31',962,22,'2018-07-26','X','Y',NULL),('2018-07-31',963,22,'2018-07-27','S','Y',NULL),('2018-07-31',964,22,'2018-07-27','X','Y',NULL),('2018-07-31',965,22,'2018-07-30','S','Y',NULL),('2018-07-31',966,22,'2018-07-30','X','Y',NULL),('2018-07-31',967,22,'2018-07-31','S','Y',NULL),('2018-07-31',968,22,'2018-07-31','X','Y',NULL),('2018-07-31',969,23,'2018-07-02','S','Y',NULL),('2018-07-31',970,23,'2018-07-02','X','Y',NULL),('2018-07-31',971,23,'2018-07-03','S','Y',NULL),('2018-07-31',972,23,'2018-07-03','X','Y',NULL),('2018-07-31',973,23,'2018-07-04','S','Y',NULL),('2018-07-31',974,23,'2018-07-04','X','Y',NULL),('2018-07-31',975,23,'2018-07-05','S','Y',NULL),('2018-07-31',976,23,'2018-07-05','X','Y',NULL),('2018-07-31',977,23,'2018-07-06','S','Y',NULL),('2018-07-31',978,23,'2018-07-06','X','Y',NULL),('2018-07-31',979,23,'2018-07-09','S','Y',NULL),('2018-07-31',980,23,'2018-07-09','X','Y',NULL),('2018-07-31',981,23,'2018-07-10','S','Y',NULL),('2018-07-31',982,23,'2018-07-10','X','Y',NULL),('2018-07-31',983,23,'2018-07-11','S','Y',NULL),('2018-07-31',984,23,'2018-07-11','X','Y',NULL),('2018-07-31',985,23,'2018-07-12','S','Y',NULL),('2018-07-31',986,23,'2018-07-12','X','Y',NULL),('2018-07-31',987,23,'2018-07-13','S','Y',NULL),('2018-07-31',988,23,'2018-07-13','X','Y',NULL),('2018-07-31',989,23,'2018-07-16','S','Y',NULL),('2018-07-31',990,23,'2018-07-16','X','Y',NULL),('2018-07-31',991,23,'2018-07-17','S','Y',NULL),('2018-07-31',992,23,'2018-07-17','X','Y',NULL),('2018-07-31',993,23,'2018-07-18','S','Y',NULL),('2018-07-31',994,23,'2018-07-18','X','Y',NULL),('2018-07-31',995,23,'2018-07-19','S','Y',NULL),('2018-07-31',996,23,'2018-07-19','X','Y',NULL),('2018-07-31',997,23,'2018-07-20','S','Y',NULL),('2018-07-31',998,23,'2018-07-20','X','Y',NULL),('2018-07-31',999,23,'2018-07-23','S','Y',NULL),('2018-07-31',1000,23,'2018-07-23','X','Y',NULL),('2018-07-31',1001,23,'2018-07-24','S','Y',NULL),('2018-07-31',1002,23,'2018-07-24','X','Y',NULL),('2018-07-31',1003,23,'2018-07-25','S','Y',NULL),('2018-07-31',1004,23,'2018-07-25','X','Y',NULL),('2018-07-31',1005,23,'2018-07-26','S','Y',NULL),('2018-07-31',1006,23,'2018-07-26','X','Y',NULL),('2018-07-31',1007,23,'2018-07-27','S','Y',NULL),('2018-07-31',1008,23,'2018-07-27','X','Y',NULL),('2018-07-31',1009,23,'2018-07-30','S','Y',NULL),('2018-07-31',1010,23,'2018-07-30','X','Y',NULL),('2018-07-31',1011,23,'2018-07-31','S','Y',NULL),('2018-07-31',1012,23,'2018-07-31','X','Y',NULL),('2018-07-31',1013,24,'2018-07-02','S','Y',NULL),('2018-07-31',1014,24,'2018-07-02','X','Y',NULL),('2018-07-31',1015,24,'2018-07-03','S','Y',NULL),('2018-07-31',1016,24,'2018-07-03','X','Y',NULL),('2018-07-31',1017,24,'2018-07-04','S','Y',NULL),('2018-07-31',1018,24,'2018-07-04','X','Y',NULL),('2018-07-31',1019,24,'2018-07-05','S','Y',NULL),('2018-07-31',1020,24,'2018-07-05','X','Y',NULL),('2018-07-31',1021,24,'2018-07-06','S','Y',NULL),('2018-07-31',1022,24,'2018-07-06','X','Y',NULL),('2018-07-31',1023,24,'2018-07-09','S','Y',NULL),('2018-07-31',1024,24,'2018-07-09','X','Y',NULL),('2018-07-31',1025,24,'2018-07-10','S','Y',NULL),('2018-07-31',1026,24,'2018-07-10','X','Y',NULL),('2018-07-31',1027,24,'2018-07-11','S','Y',NULL),('2018-07-31',1028,24,'2018-07-11','X','Y',NULL),('2018-07-31',1029,24,'2018-07-12','S','Y',NULL),('2018-07-31',1030,24,'2018-07-12','X','Y',NULL),('2018-07-31',1031,24,'2018-07-13','S','Y',NULL),('2018-07-31',1032,24,'2018-07-13','X','Y',NULL),('2018-07-31',1033,24,'2018-07-16','S','Y',NULL),('2018-07-31',1034,24,'2018-07-16','X','Y',NULL),('2018-07-31',1035,24,'2018-07-17','S','Y',NULL),('2018-07-31',1036,24,'2018-07-17','X','Y',NULL),('2018-07-31',1037,24,'2018-07-18','S','Y',NULL),('2018-07-31',1038,24,'2018-07-18','X','Y',NULL),('2018-07-31',1039,24,'2018-07-19','S','Y',NULL),('2018-07-31',1040,24,'2018-07-19','X','Y',NULL),('2018-07-31',1041,24,'2018-07-20','S','Y',NULL),('2018-07-31',1042,24,'2018-07-20','X','Y',NULL),('2018-07-31',1043,24,'2018-07-23','S','Y',NULL),('2018-07-31',1044,24,'2018-07-23','X','Y',NULL),('2018-07-31',1045,24,'2018-07-24','S','Y',NULL),('2018-07-31',1046,24,'2018-07-24','X','Y',NULL),('2018-07-31',1047,24,'2018-07-25','S','Y',NULL),('2018-07-31',1048,24,'2018-07-25','X','Y',NULL),('2018-07-31',1049,24,'2018-07-26','S','Y',NULL),('2018-07-31',1050,24,'2018-07-26','X','Y',NULL),('2018-07-31',1051,24,'2018-07-27','S','Y',NULL),('2018-07-31',1052,24,'2018-07-27','X','Y',NULL),('2018-07-31',1053,24,'2018-07-30','S','Y',NULL),('2018-07-31',1054,24,'2018-07-30','X','Y',NULL),('2018-07-31',1055,24,'2018-07-31','S','Y',NULL),('2018-07-31',1056,24,'2018-07-31','X','Y',NULL),('2018-07-31',1057,25,'2018-07-02','S','Y',NULL),('2018-07-31',1058,25,'2018-07-02','X','Y',NULL),('2018-07-31',1059,25,'2018-07-03','S','N','家中有事临时请假'),('2018-07-31',1060,25,'2018-07-03','X','N',NULL),('2018-07-31',1061,25,'2018-07-04','S','N',NULL),('2018-07-31',1062,25,'2018-07-04','X','Y',NULL),('2018-07-31',1063,25,'2018-07-05','S','Y',NULL),('2018-07-31',1064,25,'2018-07-05','X','Y',NULL),('2018-07-31',1065,25,'2018-07-06','S','Y',NULL),('2018-07-31',1066,25,'2018-07-06','X','Y',NULL),('2018-07-31',1067,25,'2018-07-09','S','Y',NULL),('2018-07-31',1068,25,'2018-07-09','X','Y',NULL),('2018-07-31',1069,25,'2018-07-10','S','Y',NULL),('2018-07-31',1070,25,'2018-07-10','X','Y',NULL),('2018-07-31',1071,25,'2018-07-11','S','Y',NULL),('2018-07-31',1072,25,'2018-07-11','X','Y',NULL),('2018-07-31',1073,25,'2018-07-12','S','Y',NULL),('2018-07-31',1074,25,'2018-07-12','X','Y',NULL),('2018-07-31',1075,25,'2018-07-13','S','Y',NULL),('2018-07-31',1076,25,'2018-07-13','X','Y',NULL),('2018-07-31',1077,25,'2018-07-16','S','Y',NULL),('2018-07-31',1078,25,'2018-07-16','X','Y',NULL),('2018-07-31',1079,25,'2018-07-17','S','Y',NULL),('2018-07-31',1080,25,'2018-07-17','X','Y',NULL),('2018-07-31',1081,25,'2018-07-18','S','Y',NULL),('2018-07-31',1082,25,'2018-07-18','X','Y',NULL),('2018-07-31',1083,25,'2018-07-19','S','Y',NULL),('2018-07-31',1084,25,'2018-07-19','X','Y',NULL),('2018-07-31',1085,25,'2018-07-20','S','Y',NULL),('2018-07-31',1086,25,'2018-07-20','X','Y',NULL),('2018-07-31',1087,25,'2018-07-23','S','Y',NULL),('2018-07-31',1088,25,'2018-07-23','X','Y',NULL),('2018-07-31',1089,25,'2018-07-24','S','Y',NULL),('2018-07-31',1090,25,'2018-07-24','X','Y',NULL),('2018-07-31',1091,25,'2018-07-25','S','Y',NULL),('2018-07-31',1092,25,'2018-07-25','X','Y',NULL),('2018-07-31',1093,25,'2018-07-26','S','Y',NULL),('2018-07-31',1094,25,'2018-07-26','X','Y',NULL),('2018-07-31',1095,25,'2018-07-27','S','Y',NULL),('2018-07-31',1096,25,'2018-07-27','X','Y',NULL),('2018-07-31',1097,25,'2018-07-30','S','Y',NULL),('2018-07-31',1098,25,'2018-07-30','X','Y',NULL),('2018-07-31',1099,25,'2018-07-31','S','Y',NULL),('2018-07-31',1100,25,'2018-07-31','X','Y',NULL),('2018-07-31',1101,26,'2018-07-02','S','Y',NULL),('2018-07-31',1102,26,'2018-07-02','X','Y',NULL),('2018-07-31',1103,26,'2018-07-03','S','Y',NULL),('2018-07-31',1104,26,'2018-07-03','X','Y',NULL),('2018-07-31',1105,26,'2018-07-04','S','Y',NULL),('2018-07-31',1106,26,'2018-07-04','X','Y',NULL),('2018-07-31',1107,26,'2018-07-05','S','Y',NULL),('2018-07-31',1108,26,'2018-07-05','X','Y',NULL),('2018-07-31',1109,26,'2018-07-06','S','Y',NULL),('2018-07-31',1110,26,'2018-07-06','X','Y',NULL),('2018-07-31',1111,26,'2018-07-09','S','Y',NULL),('2018-07-31',1112,26,'2018-07-09','X','Y',NULL),('2018-07-31',1113,26,'2018-07-10','S','Y',NULL),('2018-07-31',1114,26,'2018-07-10','X','Y',NULL),('2018-07-31',1115,26,'2018-07-11','S','Y',NULL),('2018-07-31',1116,26,'2018-07-11','X','Y',NULL),('2018-07-31',1117,26,'2018-07-12','S','Y',NULL),('2018-07-31',1118,26,'2018-07-12','X','Y',NULL),('2018-07-31',1119,26,'2018-07-13','S','Y',NULL),('2018-07-31',1120,26,'2018-07-13','X','Y',NULL),('2018-07-31',1121,26,'2018-07-16','S','Y',NULL),('2018-07-31',1122,26,'2018-07-16','X','Y',NULL),('2018-07-31',1123,26,'2018-07-17','S','Y',NULL),('2018-07-31',1124,26,'2018-07-17','X','Y',NULL),('2018-07-31',1125,26,'2018-07-18','S','Y',NULL),('2018-07-31',1126,26,'2018-07-18','X','Y',NULL),('2018-07-31',1127,26,'2018-07-19','S','Y',NULL),('2018-07-31',1128,26,'2018-07-19','X','Y',NULL),('2018-07-31',1129,26,'2018-07-20','S','Y',NULL),('2018-07-31',1130,26,'2018-07-20','X','Y',NULL),('2018-07-31',1131,26,'2018-07-23','S','Y',NULL),('2018-07-31',1132,26,'2018-07-23','X','Y',NULL),('2018-07-31',1133,26,'2018-07-24','S','Y',NULL),('2018-07-31',1134,26,'2018-07-24','X','Y',NULL),('2018-07-31',1135,26,'2018-07-25','S','Y',NULL),('2018-07-31',1136,26,'2018-07-25','X','Y',NULL),('2018-07-31',1137,26,'2018-07-26','S','Y',NULL),('2018-07-31',1138,26,'2018-07-26','X','Y',NULL),('2018-07-31',1139,26,'2018-07-27','S','Y',NULL),('2018-07-31',1140,26,'2018-07-27','X','Y',NULL),('2018-07-31',1141,26,'2018-07-30','S','Y',NULL),('2018-07-31',1142,26,'2018-07-30','X','Y',NULL),('2018-07-31',1143,26,'2018-07-31','S','Y',NULL),('2018-07-31',1144,26,'2018-07-31','X','Y',NULL),('2018-07-31',1145,27,'2018-07-02','S','Y',NULL),('2018-07-31',1146,27,'2018-07-02','X','Y',NULL),('2018-07-31',1147,27,'2018-07-03','S','Y',NULL),('2018-07-31',1148,27,'2018-07-03','X','Y',NULL),('2018-07-31',1149,27,'2018-07-04','S','Y',NULL),('2018-07-31',1150,27,'2018-07-04','X','Y',NULL),('2018-07-31',1151,27,'2018-07-05','S','Y',NULL),('2018-07-31',1152,27,'2018-07-05','X','Y',NULL),('2018-07-31',1153,27,'2018-07-06','S','Y',NULL),('2018-07-31',1154,27,'2018-07-06','X','Y',NULL),('2018-07-31',1155,27,'2018-07-09','S','Y',NULL),('2018-07-31',1156,27,'2018-07-09','X','Y',NULL),('2018-07-31',1157,27,'2018-07-10','S','Y',NULL),('2018-07-31',1158,27,'2018-07-10','X','Y',NULL),('2018-07-31',1159,27,'2018-07-11','S','Y',NULL),('2018-07-31',1160,27,'2018-07-11','X','Y',NULL),('2018-07-31',1161,27,'2018-07-12','S','Y',NULL),('2018-07-31',1162,27,'2018-07-12','X','Y',NULL),('2018-07-31',1163,27,'2018-07-13','S','Y',NULL),('2018-07-31',1164,27,'2018-07-13','X','Y',NULL),('2018-07-31',1165,27,'2018-07-16','S','Y',NULL),('2018-07-31',1166,27,'2018-07-16','X','Y',NULL),('2018-07-31',1167,27,'2018-07-17','S','Y',NULL),('2018-07-31',1168,27,'2018-07-17','X','Y',NULL),('2018-07-31',1169,27,'2018-07-18','S','Y',NULL),('2018-07-31',1170,27,'2018-07-18','X','Y',NULL),('2018-07-31',1171,27,'2018-07-19','S','Y',NULL),('2018-07-31',1172,27,'2018-07-19','X','Y',NULL),('2018-07-31',1173,27,'2018-07-20','S','Y',NULL),('2018-07-31',1174,27,'2018-07-20','X','Y',NULL),('2018-07-31',1175,27,'2018-07-23','S','Y',NULL),('2018-07-31',1176,27,'2018-07-23','X','Y',NULL),('2018-07-31',1177,27,'2018-07-24','S','Y',NULL),('2018-07-31',1178,27,'2018-07-24','X','Y',NULL),('2018-07-31',1179,27,'2018-07-25','S','Y',NULL),('2018-07-31',1180,27,'2018-07-25','X','Y',NULL),('2018-07-31',1181,27,'2018-07-26','S','Y',NULL),('2018-07-31',1182,27,'2018-07-26','X','Y',NULL),('2018-07-31',1183,27,'2018-07-27','S','Y',NULL),('2018-07-31',1184,27,'2018-07-27','X','Y',NULL),('2018-07-31',1185,27,'2018-07-30','S','Y',NULL),('2018-07-31',1186,27,'2018-07-30','X','Y',NULL),('2018-07-31',1187,27,'2018-07-31','S','Y',NULL),('2018-07-31',1188,27,'2018-07-31','X','Y',NULL),('2018-07-31',1189,28,'2018-07-02','S','Y',NULL),('2018-07-31',1190,28,'2018-07-02','X','Y',NULL),('2018-07-31',1191,28,'2018-07-03','S','Y',NULL),('2018-07-31',1192,28,'2018-07-03','X','Y',NULL),('2018-07-31',1193,28,'2018-07-04','S','Y',NULL),('2018-07-31',1194,28,'2018-07-04','X','Y',NULL),('2018-07-31',1195,28,'2018-07-05','S','Y',NULL),('2018-07-31',1196,28,'2018-07-05','X','Y',NULL),('2018-07-31',1197,28,'2018-07-06','S','Y',NULL),('2018-07-31',1198,28,'2018-07-06','X','Y',NULL),('2018-07-31',1199,28,'2018-07-09','S','Y',NULL),('2018-07-31',1200,28,'2018-07-09','X','Y',NULL),('2018-07-31',1201,28,'2018-07-10','S','Y',NULL),('2018-07-31',1202,28,'2018-07-10','X','Y',NULL),('2018-07-31',1203,28,'2018-07-11','S','Y',NULL),('2018-07-31',1204,28,'2018-07-11','X','Y',NULL),('2018-07-31',1205,28,'2018-07-12','S','Y',NULL),('2018-07-31',1206,28,'2018-07-12','X','Y',NULL),('2018-07-31',1207,28,'2018-07-13','S','Y',NULL),('2018-07-31',1208,28,'2018-07-13','X','Y',NULL),('2018-07-31',1209,28,'2018-07-16','S','Y',NULL),('2018-07-31',1210,28,'2018-07-16','X','Y',NULL),('2018-07-31',1211,28,'2018-07-17','S','Y',NULL),('2018-07-31',1212,28,'2018-07-17','X','Y',NULL),('2018-07-31',1213,28,'2018-07-18','S','Y',NULL),('2018-07-31',1214,28,'2018-07-18','X','Y',NULL),('2018-07-31',1215,28,'2018-07-19','S','Y',NULL),('2018-07-31',1216,28,'2018-07-19','X','Y',NULL),('2018-07-31',1217,28,'2018-07-20','S','Y',NULL),('2018-07-31',1218,28,'2018-07-20','X','Y',NULL),('2018-07-31',1219,28,'2018-07-23','S','Y',NULL),('2018-07-31',1220,28,'2018-07-23','X','Y',NULL),('2018-07-31',1221,28,'2018-07-24','S','Y',NULL),('2018-07-31',1222,28,'2018-07-24','X','Y',NULL),('2018-07-31',1223,28,'2018-07-25','S','Y',NULL),('2018-07-31',1224,28,'2018-07-25','X','Y',NULL),('2018-07-31',1225,28,'2018-07-26','S','Y',NULL),('2018-07-31',1226,28,'2018-07-26','X','Y',NULL),('2018-07-31',1227,28,'2018-07-27','S','Y',NULL),('2018-07-31',1228,28,'2018-07-27','X','Y',NULL),('2018-07-31',1229,28,'2018-07-30','S','Y',NULL),('2018-07-31',1230,28,'2018-07-30','X','Y',NULL),('2018-07-31',1231,28,'2018-07-31','S','Y',NULL),('2018-07-31',1232,28,'2018-07-31','X','Y',NULL),('2018-07-31',1233,29,'2018-07-02','S','Y',NULL),('2018-07-31',1234,29,'2018-07-02','X','Y',NULL),('2018-07-31',1235,29,'2018-07-03','S','Y',NULL),('2018-07-31',1236,29,'2018-07-03','X','Y',NULL),('2018-07-31',1237,29,'2018-07-04','S','Y',NULL),('2018-07-31',1238,29,'2018-07-04','X','Y',NULL),('2018-07-31',1239,29,'2018-07-05','S','Y',NULL),('2018-07-31',1240,29,'2018-07-05','X','Y',NULL),('2018-07-31',1241,29,'2018-07-06','S','Y',NULL),('2018-07-31',1242,29,'2018-07-06','X','Y',NULL),('2018-07-31',1243,29,'2018-07-09','S','Y',NULL),('2018-07-31',1244,29,'2018-07-09','X','Y',NULL),('2018-07-31',1245,29,'2018-07-10','S','Y',NULL),('2018-07-31',1246,29,'2018-07-10','X','Y',NULL),('2018-07-31',1247,29,'2018-07-11','S','Y',NULL),('2018-07-31',1248,29,'2018-07-11','X','Y',NULL),('2018-07-31',1249,29,'2018-07-12','S','Y',NULL),('2018-07-31',1250,29,'2018-07-12','X','Y',NULL),('2018-07-31',1251,29,'2018-07-13','S','Y',NULL),('2018-07-31',1252,29,'2018-07-13','X','Y',NULL),('2018-07-31',1253,29,'2018-07-16','S','Y',NULL),('2018-07-31',1254,29,'2018-07-16','X','Y',NULL),('2018-07-31',1255,29,'2018-07-17','S','Y',NULL),('2018-07-31',1256,29,'2018-07-17','X','Y',NULL),('2018-07-31',1257,29,'2018-07-18','S','Y',NULL),('2018-07-31',1258,29,'2018-07-18','X','Y',NULL),('2018-07-31',1259,29,'2018-07-19','S','Y',NULL),('2018-07-31',1260,29,'2018-07-19','X','Y',NULL),('2018-07-31',1261,29,'2018-07-20','S','Y',NULL),('2018-07-31',1262,29,'2018-07-20','X','Y',NULL),('2018-07-31',1263,29,'2018-07-23','S','Y',NULL),('2018-07-31',1264,29,'2018-07-23','X','Y',NULL),('2018-07-31',1265,29,'2018-07-24','S','Y',NULL),('2018-07-31',1266,29,'2018-07-24','X','Y',NULL),('2018-07-31',1267,29,'2018-07-25','S','Y',NULL),('2018-07-31',1268,29,'2018-07-25','X','Y',NULL),('2018-07-31',1269,29,'2018-07-26','S','Y',NULL),('2018-07-31',1270,29,'2018-07-26','X','Y',NULL),('2018-07-31',1271,29,'2018-07-27','S','Y',NULL),('2018-07-31',1272,29,'2018-07-27','X','Y',NULL),('2018-07-31',1273,29,'2018-07-30','S','Y',NULL),('2018-07-31',1274,29,'2018-07-30','X','Y',NULL),('2018-07-31',1275,29,'2018-07-31','S','Y',NULL),('2018-07-31',1276,29,'2018-07-31','X','Y',NULL),('2018-07-31',1277,30,'2018-07-02','S','Y',NULL),('2018-07-31',1278,30,'2018-07-02','X','Y',NULL),('2018-07-31',1279,30,'2018-07-03','S','Y',NULL),('2018-07-31',1280,30,'2018-07-03','X','Y',NULL),('2018-07-31',1281,30,'2018-07-04','S','Y',NULL),('2018-07-31',1282,30,'2018-07-04','X','Y',NULL),('2018-07-31',1283,30,'2018-07-05','S','Y',NULL),('2018-07-31',1284,30,'2018-07-05','X','Y',NULL),('2018-07-31',1285,30,'2018-07-06','S','Y',NULL),('2018-07-31',1286,30,'2018-07-06','X','Y',NULL),('2018-07-31',1287,30,'2018-07-09','S','Y',NULL),('2018-07-31',1288,30,'2018-07-09','X','Y',NULL),('2018-07-31',1289,30,'2018-07-10','S','Y',NULL),('2018-07-31',1290,30,'2018-07-10','X','Y',NULL),('2018-07-31',1291,30,'2018-07-11','S','Y',NULL),('2018-07-31',1292,30,'2018-07-11','X','Y',NULL),('2018-07-31',1293,30,'2018-07-12','S','Y',NULL),('2018-07-31',1294,30,'2018-07-12','X','Y',NULL),('2018-07-31',1295,30,'2018-07-13','S','Y',NULL),('2018-07-31',1296,30,'2018-07-13','X','Y',NULL),('2018-07-31',1297,30,'2018-07-16','S','Y',NULL),('2018-07-31',1298,30,'2018-07-16','X','Y',NULL),('2018-07-31',1299,30,'2018-07-17','S','Y',NULL),('2018-07-31',1300,30,'2018-07-17','X','Y',NULL),('2018-07-31',1301,30,'2018-07-18','S','Y',NULL),('2018-07-31',1302,30,'2018-07-18','X','Y',NULL),('2018-07-31',1303,30,'2018-07-19','S','Y',NULL),('2018-07-31',1304,30,'2018-07-19','X','Y',NULL),('2018-07-31',1305,30,'2018-07-20','S','Y',NULL),('2018-07-31',1306,30,'2018-07-20','X','Y',NULL),('2018-07-31',1307,30,'2018-07-23','S','Y',NULL),('2018-07-31',1308,30,'2018-07-23','X','Y',NULL),('2018-07-31',1309,30,'2018-07-24','S','Y',NULL),('2018-07-31',1310,30,'2018-07-24','X','Y',NULL),('2018-07-31',1311,30,'2018-07-25','S','Y',NULL),('2018-07-31',1312,30,'2018-07-25','X','Y',NULL),('2018-07-31',1313,30,'2018-07-26','S','Y',NULL),('2018-07-31',1314,30,'2018-07-26','X','Y',NULL),('2018-07-31',1315,30,'2018-07-27','S','Y',NULL),('2018-07-31',1316,30,'2018-07-27','X','Y',NULL),('2018-07-31',1317,30,'2018-07-30','S','Y',NULL),('2018-07-31',1318,30,'2018-07-30','X','Y',NULL),('2018-07-31',1319,30,'2018-07-31','S','Y',NULL),('2018-07-31',1320,30,'2018-07-31','X','Y',NULL),('2018-08-01',1321,31,'2018-08-01','S','Y',NULL),('2018-08-01',1322,31,'2018-08-01','X','Y',NULL),('2018-08-01',1323,32,'2018-08-01','S','Y',NULL),('2018-08-01',1324,32,'2018-08-01','X','Y',NULL),('2018-08-01',1325,33,'2018-08-01','S','Y',NULL),('2018-08-01',1326,33,'2018-08-01','X','Y',NULL),('2018-08-01',1327,34,'2018-08-01','S','Y',NULL),('2018-08-01',1328,34,'2018-08-01','X','Y',NULL),('2018-08-01',1329,35,'2018-08-01','S','Y',NULL),('2018-08-01',1330,35,'2018-08-01','X','Y',NULL),('2018-08-01',1331,36,'2018-08-01','S','Y',NULL),('2018-08-01',1332,36,'2018-08-01','X','Y',NULL),('2018-08-01',1333,37,'2018-08-01','S','Y',NULL),('2018-08-01',1334,37,'2018-08-01','X','Y',NULL),('2018-08-01',1335,38,'2018-08-01','S','Y',NULL),('2018-08-01',1336,38,'2018-08-01','X','Y',NULL),('2018-08-01',1337,39,'2018-08-01','S','Y',NULL),('2018-08-01',1338,39,'2018-08-01','X','Y',NULL),('2018-08-01',1339,40,'2018-08-01','S','Y',NULL),('2018-08-01',1340,40,'2018-08-01','X','Y',NULL),('2018-08-01',1341,41,'2018-08-01','S','Y',NULL),('2018-08-01',1342,41,'2018-08-01','X','Y',NULL),('2018-08-01',1343,42,'2018-08-01','S','Y',NULL),('2018-08-01',1344,42,'2018-08-01','X','Y',NULL),('2018-08-01',1345,43,'2018-08-01','S','Y',NULL),('2018-08-01',1346,43,'2018-08-01','X','Y',NULL),('2018-08-01',1347,44,'2018-08-01','S','Y',NULL),('2018-08-01',1348,44,'2018-08-01','X','Y',NULL),('2018-08-01',1349,45,'2018-08-01','S','Y',NULL),('2018-08-01',1350,45,'2018-08-01','X','Y',NULL),('2018-08-01',1351,31,'2018-08-02','S','Y',NULL),('2018-08-01',1352,31,'2018-08-02','X','Y',NULL),('2018-08-01',1353,31,'2018-08-03','S','Y',NULL),('2018-08-01',1354,31,'2018-08-03','X','Y',NULL),('2018-08-01',1355,32,'2018-08-02','S','Y',NULL),('2018-08-01',1356,32,'2018-08-02','X','Y',NULL),('2018-08-01',1357,32,'2018-08-03','S','Y',NULL),('2018-08-01',1358,32,'2018-08-03','X','Y',NULL),('2018-08-01',1359,33,'2018-08-02','S','Y',NULL),('2018-08-01',1360,33,'2018-08-02','X','Y',NULL),('2018-08-01',1361,33,'2018-08-03','S','Y',NULL),('2018-08-01',1362,33,'2018-08-03','X','Y',NULL),('2018-08-01',1363,34,'2018-08-02','S','Y',NULL),('2018-08-01',1364,34,'2018-08-02','X','Y',NULL),('2018-08-01',1365,34,'2018-08-03','S','Y',NULL),('2018-08-01',1366,34,'2018-08-03','X','Y',NULL),('2018-08-01',1367,35,'2018-08-02','S','Y',NULL),('2018-08-01',1368,35,'2018-08-02','X','Y',NULL),('2018-08-01',1369,35,'2018-08-03','S','Y',NULL),('2018-08-01',1370,35,'2018-08-03','X','Y',NULL),('2018-08-01',1371,36,'2018-08-02','S','Y',NULL),('2018-08-01',1372,36,'2018-08-02','X','Y',NULL),('2018-08-01',1373,36,'2018-08-03','S','Y',NULL),('2018-08-01',1374,36,'2018-08-03','X','Y',NULL),('2018-08-01',1375,37,'2018-08-02','S','Y',NULL),('2018-08-01',1376,37,'2018-08-02','X','Y',NULL),('2018-08-01',1377,37,'2018-08-03','S','Y',NULL),('2018-08-01',1378,37,'2018-08-03','X','Y',NULL),('2018-08-01',1379,38,'2018-08-02','S','Y',NULL),('2018-08-01',1380,38,'2018-08-02','X','Y',NULL),('2018-08-01',1381,38,'2018-08-03','S','Y',NULL),('2018-08-01',1382,38,'2018-08-03','X','Y',NULL),('2018-08-01',1383,39,'2018-08-02','S','Y',NULL),('2018-08-01',1384,39,'2018-08-02','X','Y',NULL),('2018-08-01',1385,39,'2018-08-03','S','Y',NULL),('2018-08-01',1386,39,'2018-08-03','X','Y',NULL),('2018-08-01',1387,40,'2018-08-02','S','Y',NULL),('2018-08-01',1388,40,'2018-08-02','X','Y',NULL),('2018-08-01',1389,40,'2018-08-03','S','Y',NULL),('2018-08-01',1390,40,'2018-08-03','X','Y',NULL),('2018-08-01',1391,41,'2018-08-02','S','Y',NULL),('2018-08-01',1392,41,'2018-08-02','X','Y',NULL),('2018-08-01',1393,41,'2018-08-03','S','Y',NULL),('2018-08-01',1394,41,'2018-08-03','X','Y',NULL),('2018-08-01',1395,42,'2018-08-02','S','Y',NULL),('2018-08-01',1396,42,'2018-08-02','X','Y',NULL),('2018-08-01',1397,42,'2018-08-03','S','Y',NULL),('2018-08-01',1398,42,'2018-08-03','X','Y',NULL),('2018-08-01',1399,43,'2018-08-02','S','Y',NULL),('2018-08-01',1400,43,'2018-08-02','X','Y',NULL),('2018-08-01',1401,43,'2018-08-03','S','Y',NULL),('2018-08-01',1402,43,'2018-08-03','X','Y',NULL),('2018-08-01',1403,44,'2018-08-02','S','Y',NULL),('2018-08-01',1404,44,'2018-08-02','X','Y',NULL),('2018-08-01',1405,44,'2018-08-03','S','Y',NULL),('2018-08-01',1406,44,'2018-08-03','X','Y',NULL),('2018-08-01',1407,45,'2018-08-02','S','Y',NULL),('2018-08-01',1408,45,'2018-08-02','X','Y',NULL),('2018-08-01',1409,45,'2018-08-03','S','Y',NULL),('2018-08-01',1410,45,'2018-08-03','X','Y',NULL),('2018-08-03',1411,46,'2018-08-01','S','Y',NULL),('2018-08-03',1412,46,'2018-08-01','X','Y',NULL),('2018-08-03',1413,46,'2018-08-02','S','Y',NULL),('2018-08-03',1414,46,'2018-08-02','X','Y',NULL),('2018-08-03',1415,46,'2018-08-03','S','Y',NULL),('2018-08-03',1416,46,'2018-08-03','X','Y',NULL),('2018-08-01',1417,31,'2018-08-06','S','Y',NULL),('2018-08-01',1418,31,'2018-08-06','X','Y',NULL),('2018-08-01',1419,31,'2018-08-07','S','Y',NULL),('2018-08-01',1420,31,'2018-08-07','X','Y',NULL),('2018-08-01',1421,31,'2018-08-08','S','Y',NULL),('2018-08-01',1422,31,'2018-08-08','X','Y',NULL),('2018-08-01',1423,31,'2018-08-09','S','Y',NULL),('2018-08-01',1424,31,'2018-08-09','X','Y',NULL),('2018-08-01',1425,31,'2018-08-10','S','Y',NULL),('2018-08-01',1426,31,'2018-08-10','X','Y',NULL),('2018-08-01',1427,32,'2018-08-06','S','Y',NULL),('2018-08-01',1428,32,'2018-08-06','X','Y',NULL),('2018-08-01',1429,32,'2018-08-07','S','Y',NULL),('2018-08-01',1430,32,'2018-08-07','X','Y',NULL),('2018-08-01',1431,32,'2018-08-08','S','Y',NULL),('2018-08-01',1432,32,'2018-08-08','X','Y',NULL),('2018-08-01',1433,32,'2018-08-09','S','Y',NULL),('2018-08-01',1434,32,'2018-08-09','X','Y',NULL),('2018-08-01',1435,32,'2018-08-10','S','Y',NULL),('2018-08-01',1436,32,'2018-08-10','X','Y',NULL),('2018-08-01',1437,33,'2018-08-06','S','Y',NULL),('2018-08-01',1438,33,'2018-08-06','X','Y',NULL),('2018-08-01',1439,33,'2018-08-07','S','Y',NULL),('2018-08-01',1440,33,'2018-08-07','X','Y',NULL),('2018-08-01',1441,33,'2018-08-08','S','Y',NULL),('2018-08-01',1442,33,'2018-08-08','X','Y',NULL),('2018-08-01',1443,33,'2018-08-09','S','Y',NULL),('2018-08-01',1444,33,'2018-08-09','X','Y',NULL),('2018-08-01',1445,33,'2018-08-10','S','Y',NULL),('2018-08-01',1446,33,'2018-08-10','X','Y',NULL),('2018-08-01',1447,34,'2018-08-06','S','Y',NULL),('2018-08-01',1448,34,'2018-08-06','X','Y',NULL),('2018-08-01',1449,34,'2018-08-07','S','Y',NULL),('2018-08-01',1450,34,'2018-08-07','X','Y',NULL),('2018-08-01',1451,34,'2018-08-08','S','Y',NULL),('2018-08-01',1452,34,'2018-08-08','X','Y',NULL),('2018-08-01',1453,34,'2018-08-09','S','Y',NULL),('2018-08-01',1454,34,'2018-08-09','X','Y',NULL),('2018-08-01',1455,34,'2018-08-10','S','Y',NULL),('2018-08-01',1456,34,'2018-08-10','X','Y',NULL),('2018-08-01',1457,35,'2018-08-06','S','Y',NULL),('2018-08-01',1458,35,'2018-08-06','X','Y',NULL),('2018-08-01',1459,35,'2018-08-07','S','Y',NULL),('2018-08-01',1460,35,'2018-08-07','X','Y',NULL),('2018-08-01',1461,35,'2018-08-08','S','Y',NULL),('2018-08-01',1462,35,'2018-08-08','X','Y',NULL),('2018-08-01',1463,35,'2018-08-09','S','Y',NULL),('2018-08-01',1464,35,'2018-08-09','X','Y',NULL),('2018-08-01',1465,35,'2018-08-10','S','Y',NULL),('2018-08-01',1466,35,'2018-08-10','X','Y',NULL),('2018-08-01',1467,36,'2018-08-06','S','Y',NULL),('2018-08-01',1468,36,'2018-08-06','X','Y',NULL),('2018-08-01',1469,36,'2018-08-07','S','Y',NULL),('2018-08-01',1470,36,'2018-08-07','X','Y',NULL),('2018-08-01',1471,36,'2018-08-08','S','Y',NULL),('2018-08-01',1472,36,'2018-08-08','X','Y',NULL),('2018-08-01',1473,36,'2018-08-09','S','Y',NULL),('2018-08-01',1474,36,'2018-08-09','X','Y',NULL),('2018-08-01',1475,36,'2018-08-10','S','Y',NULL),('2018-08-01',1476,36,'2018-08-10','X','Y',NULL),('2018-08-01',1477,37,'2018-08-06','S','Y',NULL),('2018-08-01',1478,37,'2018-08-06','X','Y',NULL),('2018-08-01',1479,37,'2018-08-07','S','Y',NULL),('2018-08-01',1480,37,'2018-08-07','X','Y',NULL),('2018-08-01',1481,37,'2018-08-08','S','Y',NULL),('2018-08-01',1482,37,'2018-08-08','X','Y',NULL),('2018-08-01',1483,37,'2018-08-09','S','Y',NULL),('2018-08-01',1484,37,'2018-08-09','X','Y',NULL),('2018-08-01',1485,37,'2018-08-10','S','Y',NULL),('2018-08-01',1486,37,'2018-08-10','X','Y',NULL),('2018-08-01',1487,38,'2018-08-06','S','Y',NULL),('2018-08-01',1488,38,'2018-08-06','X','Y',NULL),('2018-08-01',1489,38,'2018-08-07','S','Y',NULL),('2018-08-01',1490,38,'2018-08-07','X','Y',NULL),('2018-08-01',1491,38,'2018-08-08','S','Y',NULL),('2018-08-01',1492,38,'2018-08-08','X','Y',NULL),('2018-08-01',1493,38,'2018-08-09','S','Y',NULL),('2018-08-01',1494,38,'2018-08-09','X','Y',NULL),('2018-08-01',1495,38,'2018-08-10','S','Y',NULL),('2018-08-01',1496,38,'2018-08-10','X','Y',NULL),('2018-08-01',1497,39,'2018-08-06','S','Y',NULL),('2018-08-01',1498,39,'2018-08-06','X','Y',NULL),('2018-08-01',1499,39,'2018-08-07','S','Y',NULL),('2018-08-01',1500,39,'2018-08-07','X','Y',NULL),('2018-08-01',1501,39,'2018-08-08','S','Y',NULL),('2018-08-01',1502,39,'2018-08-08','X','Y',NULL),('2018-08-01',1503,39,'2018-08-09','S','Y',NULL),('2018-08-01',1504,39,'2018-08-09','X','Y',NULL),('2018-08-01',1505,39,'2018-08-10','S','Y',NULL),('2018-08-01',1506,39,'2018-08-10','X','Y',NULL),('2018-08-01',1507,40,'2018-08-06','S','Y',NULL),('2018-08-01',1508,40,'2018-08-06','X','Y',NULL),('2018-08-01',1509,40,'2018-08-07','S','Y',NULL),('2018-08-01',1510,40,'2018-08-07','X','Y',NULL),('2018-08-01',1511,40,'2018-08-08','S','Y',NULL),('2018-08-01',1512,40,'2018-08-08','X','Y',NULL),('2018-08-01',1513,40,'2018-08-09','S','Y',NULL),('2018-08-01',1514,40,'2018-08-09','X','Y',NULL),('2018-08-01',1515,40,'2018-08-10','S','Y',NULL),('2018-08-01',1516,40,'2018-08-10','X','Y',NULL),('2018-08-01',1517,41,'2018-08-06','S','Y',NULL),('2018-08-01',1518,41,'2018-08-06','X','Y',NULL),('2018-08-01',1519,41,'2018-08-07','S','Y',NULL),('2018-08-01',1520,41,'2018-08-07','X','Y',NULL),('2018-08-01',1521,41,'2018-08-08','S','Y',NULL),('2018-08-01',1522,41,'2018-08-08','X','Y',NULL),('2018-08-01',1523,41,'2018-08-09','S','Y',NULL),('2018-08-01',1524,41,'2018-08-09','X','Y',NULL),('2018-08-01',1525,41,'2018-08-10','S','Y',NULL),('2018-08-01',1526,41,'2018-08-10','X','Y',NULL),('2018-08-01',1527,42,'2018-08-06','S','Y',NULL),('2018-08-01',1528,42,'2018-08-06','X','Y',NULL),('2018-08-01',1529,42,'2018-08-07','S','Y',NULL),('2018-08-01',1530,42,'2018-08-07','X','Y',NULL),('2018-08-01',1531,42,'2018-08-08','S','Y',NULL),('2018-08-01',1532,42,'2018-08-08','X','Y',NULL),('2018-08-01',1533,42,'2018-08-09','S','Y',NULL),('2018-08-01',1534,42,'2018-08-09','X','Y',NULL),('2018-08-01',1535,42,'2018-08-10','S','Y',NULL),('2018-08-01',1536,42,'2018-08-10','X','Y',NULL),('2018-08-01',1537,43,'2018-08-06','S','Y',NULL),('2018-08-01',1538,43,'2018-08-06','X','Y',NULL),('2018-08-01',1539,43,'2018-08-07','S','Y',NULL),('2018-08-01',1540,43,'2018-08-07','X','Y',NULL),('2018-08-01',1541,43,'2018-08-08','S','Y',NULL),('2018-08-01',1542,43,'2018-08-08','X','Y',NULL),('2018-08-01',1543,43,'2018-08-09','S','Y',NULL),('2018-08-01',1544,43,'2018-08-09','X','Y',NULL),('2018-08-01',1545,43,'2018-08-10','S','Y',NULL),('2018-08-01',1546,43,'2018-08-10','X','Y',NULL),('2018-08-01',1547,44,'2018-08-06','S','Y',NULL),('2018-08-01',1548,44,'2018-08-06','X','Y',NULL),('2018-08-01',1549,44,'2018-08-07','S','Y',NULL),('2018-08-01',1550,44,'2018-08-07','X','Y',NULL),('2018-08-01',1551,44,'2018-08-08','S','Y',NULL),('2018-08-01',1552,44,'2018-08-08','X','Y',NULL),('2018-08-01',1553,44,'2018-08-09','S','Y',NULL),('2018-08-01',1554,44,'2018-08-09','X','Y',NULL),('2018-08-01',1555,44,'2018-08-10','S','Y',NULL),('2018-08-01',1556,44,'2018-08-10','X','Y',NULL),('2018-08-01',1557,45,'2018-08-06','S','Y',NULL),('2018-08-01',1558,45,'2018-08-06','X','Y',NULL),('2018-08-01',1559,45,'2018-08-07','S','Y',NULL),('2018-08-01',1560,45,'2018-08-07','X','Y',NULL),('2018-08-01',1561,45,'2018-08-08','S','Y',NULL),('2018-08-01',1562,45,'2018-08-08','X','Y',NULL),('2018-08-01',1563,45,'2018-08-09','S','Y',NULL),('2018-08-01',1564,45,'2018-08-09','X','Y',NULL),('2018-08-01',1565,45,'2018-08-10','S','Y',NULL),('2018-08-01',1566,45,'2018-08-10','X','Y',NULL),('2018-08-03',1567,46,'2018-08-06','S','Y',NULL),('2018-08-03',1568,46,'2018-08-06','X','Y',NULL),('2018-08-03',1569,46,'2018-08-07','S','Y',NULL),('2018-08-03',1570,46,'2018-08-07','X','Y',NULL),('2018-08-03',1571,46,'2018-08-08','S','Y',NULL),('2018-08-03',1572,46,'2018-08-08','X','Y',NULL),('2018-08-03',1573,46,'2018-08-09','S','Y',NULL),('2018-08-03',1574,46,'2018-08-09','X','Y',NULL),('2018-08-03',1575,46,'2018-08-10','S','Y',NULL),('2018-08-03',1576,46,'2018-08-10','X','Y',NULL),('2018-08-11',1577,47,'2018-08-01','S','Y',NULL),('2018-08-11',1578,47,'2018-08-01','X','Y',NULL),('2018-08-11',1579,47,'2018-08-02','S','Y',NULL),('2018-08-11',1580,47,'2018-08-02','X','Y',NULL),('2018-08-11',1581,47,'2018-08-03','S','Y',NULL),('2018-08-11',1582,47,'2018-08-03','X','Y',NULL),('2018-08-11',1583,47,'2018-08-06','S','Y',NULL),('2018-08-11',1584,47,'2018-08-06','X','Y',NULL),('2018-08-11',1585,47,'2018-08-07','S','Y',NULL),('2018-08-11',1586,47,'2018-08-07','X','Y',NULL),('2018-08-11',1587,47,'2018-08-08','S','Y',NULL),('2018-08-11',1588,47,'2018-08-08','X','Y',NULL),('2018-08-11',1589,47,'2018-08-09','S','Y',NULL),('2018-08-11',1590,47,'2018-08-09','X','Y',NULL),('2018-08-11',1591,47,'2018-08-10','S','Y',NULL),('2018-08-11',1592,47,'2018-08-10','X','Y',NULL),('2018-08-01',1593,31,'2018-08-13','S','Y',NULL),('2018-08-01',1594,31,'2018-08-13','X','Y',NULL),('2018-08-01',1595,31,'2018-08-14','S','Y',NULL),('2018-08-01',1596,31,'2018-08-14','X','Y',NULL),('2018-08-01',1597,31,'2018-08-15','S','Y',NULL),('2018-08-01',1598,31,'2018-08-15','X','Y',NULL),('2018-08-01',1599,31,'2018-08-16','S','Y',NULL),('2018-08-01',1600,31,'2018-08-16','X','Y',NULL),('2018-08-01',1601,31,'2018-08-17','S','Y',NULL),('2018-08-01',1602,31,'2018-08-17','X','Y',NULL),('2018-08-01',1603,32,'2018-08-13','S','Y',NULL),('2018-08-01',1604,32,'2018-08-13','X','Y',NULL),('2018-08-01',1605,32,'2018-08-14','S','Y',NULL),('2018-08-01',1606,32,'2018-08-14','X','Y',NULL),('2018-08-01',1607,32,'2018-08-15','S','Y',NULL),('2018-08-01',1608,32,'2018-08-15','X','Y',NULL),('2018-08-01',1609,32,'2018-08-16','S','Y',NULL),('2018-08-01',1610,32,'2018-08-16','X','Y',NULL),('2018-08-01',1611,32,'2018-08-17','S','Y',NULL),('2018-08-01',1612,32,'2018-08-17','X','Y',NULL),('2018-08-01',1613,33,'2018-08-13','S','Y',NULL),('2018-08-01',1614,33,'2018-08-13','X','Y',NULL),('2018-08-01',1615,33,'2018-08-14','S','Y',NULL),('2018-08-01',1616,33,'2018-08-14','X','Y',NULL),('2018-08-01',1617,33,'2018-08-15','S','Y',NULL),('2018-08-01',1618,33,'2018-08-15','X','Y',NULL),('2018-08-01',1619,33,'2018-08-16','S','Y',NULL),('2018-08-01',1620,33,'2018-08-16','X','Y',NULL),('2018-08-01',1621,33,'2018-08-17','S','Y',NULL),('2018-08-01',1622,33,'2018-08-17','X','Y',NULL),('2018-08-01',1623,34,'2018-08-13','S','Y',NULL),('2018-08-01',1624,34,'2018-08-13','X','Y',NULL),('2018-08-01',1625,34,'2018-08-14','S','Y',NULL),('2018-08-01',1626,34,'2018-08-14','X','Y',NULL),('2018-08-01',1627,34,'2018-08-15','S','Y',NULL),('2018-08-01',1628,34,'2018-08-15','X','Y',NULL),('2018-08-01',1629,34,'2018-08-16','S','Y',NULL),('2018-08-01',1630,34,'2018-08-16','X','Y',NULL),('2018-08-01',1631,34,'2018-08-17','S','Y',NULL),('2018-08-01',1632,34,'2018-08-17','X','Y',NULL),('2018-08-01',1633,35,'2018-08-13','S','Y',NULL),('2018-08-01',1634,35,'2018-08-13','X','Y',NULL),('2018-08-01',1635,35,'2018-08-14','S','Y',NULL),('2018-08-01',1636,35,'2018-08-14','X','Y',NULL),('2018-08-01',1637,35,'2018-08-15','S','Y',NULL),('2018-08-01',1638,35,'2018-08-15','X','Y',NULL),('2018-08-01',1639,35,'2018-08-16','S','Y',NULL),('2018-08-01',1640,35,'2018-08-16','X','Y',NULL),('2018-08-01',1641,35,'2018-08-17','S','Y',NULL),('2018-08-01',1642,35,'2018-08-17','X','Y',NULL),('2018-08-01',1643,36,'2018-08-13','S','Y',NULL),('2018-08-01',1644,36,'2018-08-13','X','Y',NULL),('2018-08-01',1645,36,'2018-08-14','S','Y',NULL),('2018-08-01',1646,36,'2018-08-14','X','Y',NULL),('2018-08-01',1647,36,'2018-08-15','S','Y',NULL),('2018-08-01',1648,36,'2018-08-15','X','Y',NULL),('2018-08-01',1649,36,'2018-08-16','S','Y',NULL),('2018-08-01',1650,36,'2018-08-16','X','Y',NULL),('2018-08-01',1651,36,'2018-08-17','S','Y',NULL),('2018-08-01',1652,36,'2018-08-17','X','Y',NULL),('2018-08-01',1653,37,'2018-08-13','S','Y',NULL),('2018-08-01',1654,37,'2018-08-13','X','Y',NULL),('2018-08-01',1655,37,'2018-08-14','S','Y',NULL),('2018-08-01',1656,37,'2018-08-14','X','Y',NULL),('2018-08-01',1657,37,'2018-08-15','S','Y',NULL),('2018-08-01',1658,37,'2018-08-15','X','Y',NULL),('2018-08-01',1659,37,'2018-08-16','S','Y',NULL),('2018-08-01',1660,37,'2018-08-16','X','Y',NULL),('2018-08-01',1661,37,'2018-08-17','S','Y',NULL),('2018-08-01',1662,37,'2018-08-17','X','Y',NULL),('2018-08-01',1663,38,'2018-08-13','S','Y',NULL),('2018-08-01',1664,38,'2018-08-13','X','Y',NULL),('2018-08-01',1665,38,'2018-08-14','S','Y',NULL),('2018-08-01',1666,38,'2018-08-14','X','Y',NULL),('2018-08-01',1667,38,'2018-08-15','S','Y',NULL),('2018-08-01',1668,38,'2018-08-15','X','Y',NULL),('2018-08-01',1669,38,'2018-08-16','S','Y',NULL),('2018-08-01',1670,38,'2018-08-16','X','Y',NULL),('2018-08-01',1671,38,'2018-08-17','S','Y',NULL),('2018-08-01',1672,38,'2018-08-17','X','Y',NULL),('2018-08-01',1673,39,'2018-08-13','S','Y',NULL),('2018-08-01',1674,39,'2018-08-13','X','Y',NULL),('2018-08-01',1675,39,'2018-08-14','S','Y',NULL),('2018-08-01',1676,39,'2018-08-14','X','Y',NULL),('2018-08-01',1677,39,'2018-08-15','S','Y',NULL),('2018-08-01',1678,39,'2018-08-15','X','Y',NULL),('2018-08-01',1679,39,'2018-08-16','S','Y',NULL),('2018-08-01',1680,39,'2018-08-16','X','Y',NULL),('2018-08-01',1681,39,'2018-08-17','S','Y',NULL),('2018-08-01',1682,39,'2018-08-17','X','Y',NULL),('2018-08-01',1683,40,'2018-08-13','S','Y',NULL),('2018-08-01',1684,40,'2018-08-13','X','Y',NULL),('2018-08-01',1685,40,'2018-08-14','S','Y',NULL),('2018-08-01',1686,40,'2018-08-14','X','Y',NULL),('2018-08-01',1687,40,'2018-08-15','S','Y',NULL),('2018-08-01',1688,40,'2018-08-15','X','Y',NULL),('2018-08-01',1689,40,'2018-08-16','S','Y',NULL),('2018-08-01',1690,40,'2018-08-16','X','Y',NULL),('2018-08-01',1691,40,'2018-08-17','S','Y',NULL),('2018-08-01',1692,40,'2018-08-17','X','Y',NULL),('2018-08-01',1693,41,'2018-08-13','S','Y',NULL),('2018-08-01',1694,41,'2018-08-13','X','Y',NULL),('2018-08-01',1695,41,'2018-08-14','S','Y',NULL),('2018-08-01',1696,41,'2018-08-14','X','Y',NULL),('2018-08-01',1697,41,'2018-08-15','S','Y',NULL),('2018-08-01',1698,41,'2018-08-15','X','Y',NULL),('2018-08-01',1699,41,'2018-08-16','S','Y',NULL),('2018-08-01',1700,41,'2018-08-16','X','Y',NULL),('2018-08-01',1701,41,'2018-08-17','S','Y',NULL),('2018-08-01',1702,41,'2018-08-17','X','Y',NULL),('2018-08-01',1703,42,'2018-08-13','S','Y',NULL),('2018-08-01',1704,42,'2018-08-13','X','Y',NULL),('2018-08-01',1705,42,'2018-08-14','S','Y',NULL),('2018-08-01',1706,42,'2018-08-14','X','Y',NULL),('2018-08-01',1707,42,'2018-08-15','S','Y',NULL),('2018-08-01',1708,42,'2018-08-15','X','Y',NULL),('2018-08-01',1709,42,'2018-08-16','S','Y',NULL),('2018-08-01',1710,42,'2018-08-16','X','Y',NULL),('2018-08-01',1711,42,'2018-08-17','S','Y',NULL),('2018-08-01',1712,42,'2018-08-17','X','Y',NULL),('2018-08-01',1713,43,'2018-08-13','S','Y',NULL),('2018-08-01',1714,43,'2018-08-13','X','Y',NULL),('2018-08-01',1715,43,'2018-08-14','S','Y',NULL),('2018-08-01',1716,43,'2018-08-14','X','Y',NULL),('2018-08-01',1717,43,'2018-08-15','S','Y',NULL),('2018-08-01',1718,43,'2018-08-15','X','Y',NULL),('2018-08-01',1719,43,'2018-08-16','S','Y',NULL),('2018-08-01',1720,43,'2018-08-16','X','Y',NULL),('2018-08-01',1721,43,'2018-08-17','S','Y',NULL),('2018-08-01',1722,43,'2018-08-17','X','Y',NULL),('2018-08-01',1723,44,'2018-08-13','S','Y',NULL),('2018-08-01',1724,44,'2018-08-13','X','Y',NULL),('2018-08-01',1725,44,'2018-08-14','S','Y',NULL),('2018-08-01',1726,44,'2018-08-14','X','Y',NULL),('2018-08-01',1727,44,'2018-08-15','S','Y',NULL),('2018-08-01',1728,44,'2018-08-15','X','Y',NULL),('2018-08-01',1729,44,'2018-08-16','S','Y',NULL),('2018-08-01',1730,44,'2018-08-16','X','Y',NULL),('2018-08-01',1731,44,'2018-08-17','S','Y',NULL),('2018-08-01',1732,44,'2018-08-17','X','Y',NULL),('2018-08-01',1733,45,'2018-08-13','S','Y',NULL),('2018-08-01',1734,45,'2018-08-13','X','Y',NULL),('2018-08-01',1735,45,'2018-08-14','S','Y',NULL),('2018-08-01',1736,45,'2018-08-14','X','Y',NULL),('2018-08-01',1737,45,'2018-08-15','S','Y',NULL),('2018-08-01',1738,45,'2018-08-15','X','Y',NULL),('2018-08-01',1739,45,'2018-08-16','S','Y',NULL),('2018-08-01',1740,45,'2018-08-16','X','Y',NULL),('2018-08-01',1741,45,'2018-08-17','S','Y',NULL),('2018-08-01',1742,45,'2018-08-17','X','Y',NULL),('2018-08-03',1743,46,'2018-08-13','S','Y',NULL),('2018-08-03',1744,46,'2018-08-13','X','Y',NULL),('2018-08-03',1745,46,'2018-08-14','S','Y',NULL),('2018-08-03',1746,46,'2018-08-14','X','Y',NULL),('2018-08-03',1747,46,'2018-08-15','S','Y',NULL),('2018-08-03',1748,46,'2018-08-15','X','Y',NULL),('2018-08-03',1749,46,'2018-08-16','S','Y',NULL),('2018-08-03',1750,46,'2018-08-16','X','Y',NULL),('2018-08-03',1751,46,'2018-08-17','S','Y',NULL),('2018-08-03',1752,46,'2018-08-17','X','Y',NULL),('2018-08-11',1753,47,'2018-08-13','S','Y',NULL),('2018-08-11',1754,47,'2018-08-13','X','Y',NULL),('2018-08-11',1755,47,'2018-08-14','S','Y',NULL),('2018-08-11',1756,47,'2018-08-14','X','Y',NULL),('2018-08-11',1757,47,'2018-08-15','S','Y',NULL),('2018-08-11',1758,47,'2018-08-15','X','Y',NULL),('2018-08-11',1759,47,'2018-08-16','S','Y',NULL),('2018-08-11',1760,47,'2018-08-16','X','Y',NULL),('2018-08-11',1761,47,'2018-08-17','S','Y',NULL),('2018-08-11',1762,47,'2018-08-17','X','Y',NULL),('2018-08-01',1763,31,'2018-08-20','S','Y',NULL),('2018-08-01',1764,31,'2018-08-20','X','Y',NULL),('2018-08-01',1765,31,'2018-08-21','S','Y',NULL),('2018-08-01',1766,31,'2018-08-21','X','Y',NULL),('2018-08-01',1767,32,'2018-08-20','S','Y',NULL),('2018-08-01',1768,32,'2018-08-20','X','Y',NULL),('2018-08-01',1769,32,'2018-08-21','S','Y',NULL),('2018-08-01',1770,32,'2018-08-21','X','Y',NULL),('2018-08-01',1771,33,'2018-08-20','S','Y',NULL),('2018-08-01',1772,33,'2018-08-20','X','Y',NULL),('2018-08-01',1773,33,'2018-08-21','S','Y',NULL),('2018-08-01',1774,33,'2018-08-21','X','Y',NULL),('2018-08-01',1775,34,'2018-08-20','S','Y',NULL),('2018-08-01',1776,34,'2018-08-20','X','Y',NULL),('2018-08-01',1777,34,'2018-08-21','S','Y',NULL),('2018-08-01',1778,34,'2018-08-21','X','Y',NULL),('2018-08-01',1779,35,'2018-08-20','S','Y',NULL),('2018-08-01',1780,35,'2018-08-20','X','Y',NULL),('2018-08-01',1781,35,'2018-08-21','S','Y',NULL),('2018-08-01',1782,35,'2018-08-21','X','Y',NULL),('2018-08-01',1783,36,'2018-08-20','S','Y',NULL),('2018-08-01',1784,36,'2018-08-20','X','Y',NULL),('2018-08-01',1785,36,'2018-08-21','S','Y',NULL),('2018-08-01',1786,36,'2018-08-21','X','Y',NULL),('2018-08-01',1787,37,'2018-08-20','S','Y',NULL),('2018-08-01',1788,37,'2018-08-20','X','Y',NULL),('2018-08-01',1789,37,'2018-08-21','S','Y',NULL),('2018-08-01',1790,37,'2018-08-21','X','Y',NULL),('2018-08-01',1791,38,'2018-08-20','S','Y',NULL),('2018-08-01',1792,38,'2018-08-20','X','Y',NULL),('2018-08-01',1793,38,'2018-08-21','S','Y',NULL),('2018-08-01',1794,38,'2018-08-21','X','Y',NULL),('2018-08-01',1795,39,'2018-08-20','S','Y',NULL),('2018-08-01',1796,39,'2018-08-20','X','Y',NULL),('2018-08-01',1797,39,'2018-08-21','S','Y',NULL),('2018-08-01',1798,39,'2018-08-21','X','Y',NULL),('2018-08-01',1799,40,'2018-08-20','S','Y',NULL),('2018-08-01',1800,40,'2018-08-20','X','Y',NULL),('2018-08-01',1801,40,'2018-08-21','S','Y',NULL),('2018-08-01',1802,40,'2018-08-21','X','Y',NULL),('2018-08-01',1803,41,'2018-08-20','S','Y',NULL),('2018-08-01',1804,41,'2018-08-20','X','Y',NULL),('2018-08-01',1805,41,'2018-08-21','S','Y',NULL),('2018-08-01',1806,41,'2018-08-21','X','Y',NULL),('2018-08-01',1807,42,'2018-08-20','S','Y',NULL),('2018-08-01',1808,42,'2018-08-20','X','Y',NULL),('2018-08-01',1809,42,'2018-08-21','S','Y',NULL),('2018-08-01',1810,42,'2018-08-21','X','Y',NULL),('2018-08-01',1811,43,'2018-08-20','S','Y',NULL),('2018-08-01',1812,43,'2018-08-20','X','Y',NULL),('2018-08-01',1813,43,'2018-08-21','S','Y',NULL),('2018-08-01',1814,43,'2018-08-21','X','Y',NULL),('2018-08-01',1815,44,'2018-08-20','S','Y',NULL),('2018-08-01',1816,44,'2018-08-20','X','Y',NULL),('2018-08-01',1817,44,'2018-08-21','S','Y',NULL),('2018-08-01',1818,44,'2018-08-21','X','Y',NULL),('2018-08-01',1819,45,'2018-08-20','S','Y',NULL),('2018-08-01',1820,45,'2018-08-20','X','Y',NULL),('2018-08-01',1821,45,'2018-08-21','S','Y',NULL),('2018-08-01',1822,45,'2018-08-21','X','Y',NULL),('2018-08-03',1823,46,'2018-08-20','S','Y',NULL),('2018-08-03',1824,46,'2018-08-20','X','Y',NULL),('2018-08-03',1825,46,'2018-08-21','S','Y',NULL),('2018-08-03',1826,46,'2018-08-21','X','Y',NULL),('2018-08-11',1827,47,'2018-08-20','S','Y',NULL),('2018-08-11',1828,47,'2018-08-20','X','Y',NULL),('2018-08-11',1829,47,'2018-08-21','S','Y',NULL),('2018-08-11',1830,47,'2018-08-21','X','Y',NULL),('2018-08-01',1831,31,'2018-08-22','S','Y',NULL),('2018-08-01',1832,31,'2018-08-22','X','Y',NULL),('2018-08-01',1833,32,'2018-08-22','S','Y',NULL),('2018-08-01',1834,32,'2018-08-22','X','Y',NULL),('2018-08-01',1835,33,'2018-08-22','S','Y',NULL),('2018-08-01',1836,33,'2018-08-22','X','Y',NULL),('2018-08-01',1837,34,'2018-08-22','S','Y',NULL),('2018-08-01',1838,34,'2018-08-22','X','Y',NULL),('2018-08-01',1839,35,'2018-08-22','S','Y',NULL),('2018-08-01',1840,35,'2018-08-22','X','Y',NULL),('2018-08-01',1841,36,'2018-08-22','S','Y',NULL),('2018-08-01',1842,36,'2018-08-22','X','Y',NULL),('2018-08-01',1843,37,'2018-08-22','S','Y',NULL),('2018-08-01',1844,37,'2018-08-22','X','Y',NULL),('2018-08-01',1845,38,'2018-08-22','S','Y',NULL),('2018-08-01',1846,38,'2018-08-22','X','Y',NULL),('2018-08-01',1847,39,'2018-08-22','S','Y',NULL),('2018-08-01',1848,39,'2018-08-22','X','Y',NULL),('2018-08-01',1849,40,'2018-08-22','S','Y',NULL),('2018-08-01',1850,40,'2018-08-22','X','Y',NULL),('2018-08-01',1851,41,'2018-08-22','S','Y',NULL),('2018-08-01',1852,41,'2018-08-22','X','Y',NULL),('2018-08-01',1853,42,'2018-08-22','S','Y',NULL),('2018-08-01',1854,42,'2018-08-22','X','Y',NULL),('2018-08-01',1855,43,'2018-08-22','S','Y',NULL),('2018-08-01',1856,43,'2018-08-22','X','Y',NULL),('2018-08-01',1857,44,'2018-08-22','S','Y',NULL),('2018-08-01',1858,44,'2018-08-22','X','Y',NULL),('2018-08-01',1859,45,'2018-08-22','S','Y',NULL),('2018-08-01',1860,45,'2018-08-22','X','Y',NULL),('2018-08-03',1861,46,'2018-08-22','S','Y',NULL),('2018-08-03',1862,46,'2018-08-22','X','Y',NULL),('2018-08-11',1863,47,'2018-08-22','S','Y',NULL),('2018-08-11',1864,47,'2018-08-22','X','Y',NULL),('2018-08-01',1865,31,'2018-08-23','S','Y',NULL),('2018-08-01',1866,31,'2018-08-23','X','Y',NULL),('2018-08-01',1867,31,'2018-08-24','S','Y',NULL),('2018-08-01',1868,31,'2018-08-24','X','Y',NULL),('2018-08-01',1869,31,'2018-08-27','S','Y',NULL),('2018-08-01',1870,31,'2018-08-27','X','Y',NULL),('2018-08-01',1871,31,'2018-08-28','S','Y',NULL),('2018-08-01',1872,31,'2018-08-28','X','Y',NULL),('2018-08-01',1873,31,'2018-08-29','S','Y',NULL),('2018-08-01',1874,31,'2018-08-29','X','Y',NULL),('2018-08-01',1875,31,'2018-08-30','S','Y',NULL),('2018-08-01',1876,31,'2018-08-30','X','Y',NULL),('2018-08-01',1877,31,'2018-08-31','S','Y',NULL),('2018-08-01',1878,31,'2018-08-31','X','Y',NULL),('2018-08-01',1879,32,'2018-08-23','S','Y',NULL),('2018-08-01',1880,32,'2018-08-23','X','Y',NULL),('2018-08-01',1881,32,'2018-08-24','S','Y',NULL),('2018-08-01',1882,32,'2018-08-24','X','Y',NULL),('2018-08-01',1883,32,'2018-08-27','S','Y',NULL),('2018-08-01',1884,32,'2018-08-27','X','Y',NULL),('2018-08-01',1885,32,'2018-08-28','S','Y',NULL),('2018-08-01',1886,32,'2018-08-28','X','Y',NULL),('2018-08-01',1887,32,'2018-08-29','S','Y',NULL),('2018-08-01',1888,32,'2018-08-29','X','Y',NULL),('2018-08-01',1889,32,'2018-08-30','S','Y',NULL),('2018-08-01',1890,32,'2018-08-30','X','Y',NULL),('2018-08-01',1891,32,'2018-08-31','S','Y',NULL),('2018-08-01',1892,32,'2018-08-31','X','Y',NULL),('2018-08-01',1893,33,'2018-08-23','S','Y',NULL),('2018-08-01',1894,33,'2018-08-23','X','Y',NULL),('2018-08-01',1895,33,'2018-08-24','S','Y',NULL),('2018-08-01',1896,33,'2018-08-24','X','Y',NULL),('2018-08-01',1897,33,'2018-08-27','S','Y',NULL),('2018-08-01',1898,33,'2018-08-27','X','Y',NULL),('2018-08-01',1899,33,'2018-08-28','S','Y',NULL),('2018-08-01',1900,33,'2018-08-28','X','Y',NULL),('2018-08-01',1901,33,'2018-08-29','S','Y',NULL),('2018-08-01',1902,33,'2018-08-29','X','Y',NULL),('2018-08-01',1903,33,'2018-08-30','S','Y',NULL),('2018-08-01',1904,33,'2018-08-30','X','Y',NULL),('2018-08-01',1905,33,'2018-08-31','S','Y',NULL),('2018-08-01',1906,33,'2018-08-31','X','Y',NULL),('2018-08-01',1907,34,'2018-08-23','S','Y',NULL),('2018-08-01',1908,34,'2018-08-23','X','Y',NULL),('2018-08-01',1909,34,'2018-08-24','S','Y',NULL),('2018-08-01',1910,34,'2018-08-24','X','Y',NULL),('2018-08-01',1911,34,'2018-08-27','S','Y',NULL),('2018-08-01',1912,34,'2018-08-27','X','Y',NULL),('2018-08-01',1913,34,'2018-08-28','S','Y',NULL),('2018-08-01',1914,34,'2018-08-28','X','Y',NULL),('2018-08-01',1915,34,'2018-08-29','S','Y',NULL),('2018-08-01',1916,34,'2018-08-29','X','Y',NULL),('2018-08-01',1917,34,'2018-08-30','S','Y',NULL),('2018-08-01',1918,34,'2018-08-30','X','Y',NULL),('2018-08-01',1919,34,'2018-08-31','S','Y',NULL),('2018-08-01',1920,34,'2018-08-31','X','Y',NULL),('2018-08-01',1921,35,'2018-08-23','S','Y',NULL),('2018-08-01',1922,35,'2018-08-23','X','Y',NULL),('2018-08-01',1923,35,'2018-08-24','S','Y',NULL),('2018-08-01',1924,35,'2018-08-24','X','Y',NULL),('2018-08-01',1925,35,'2018-08-27','S','Y',NULL),('2018-08-01',1926,35,'2018-08-27','X','Y',NULL),('2018-08-01',1927,35,'2018-08-28','S','Y',NULL),('2018-08-01',1928,35,'2018-08-28','X','Y',NULL),('2018-08-01',1929,35,'2018-08-29','S','Y',NULL),('2018-08-01',1930,35,'2018-08-29','X','Y',NULL),('2018-08-01',1931,35,'2018-08-30','S','Y',NULL),('2018-08-01',1932,35,'2018-08-30','X','Y',NULL),('2018-08-01',1933,35,'2018-08-31','S','Y',NULL),('2018-08-01',1934,35,'2018-08-31','X','Y',NULL),('2018-08-01',1935,36,'2018-08-23','S','Y',NULL),('2018-08-01',1936,36,'2018-08-23','X','Y',NULL),('2018-08-01',1937,36,'2018-08-24','S','Y',NULL),('2018-08-01',1938,36,'2018-08-24','X','Y',NULL),('2018-08-01',1939,36,'2018-08-27','S','Y',NULL),('2018-08-01',1940,36,'2018-08-27','X','Y',NULL),('2018-08-01',1941,36,'2018-08-28','S','Y',NULL),('2018-08-01',1942,36,'2018-08-28','X','Y',NULL),('2018-08-01',1943,36,'2018-08-29','S','Y',NULL),('2018-08-01',1944,36,'2018-08-29','X','Y',NULL),('2018-08-01',1945,36,'2018-08-30','S','Y',NULL),('2018-08-01',1946,36,'2018-08-30','X','Y',NULL),('2018-08-01',1947,36,'2018-08-31','S','Y',NULL),('2018-08-01',1948,36,'2018-08-31','X','Y',NULL),('2018-08-01',1949,37,'2018-08-23','S','Y',NULL),('2018-08-01',1950,37,'2018-08-23','X','Y',NULL),('2018-08-01',1951,37,'2018-08-24','S','Y',NULL),('2018-08-01',1952,37,'2018-08-24','X','Y',NULL),('2018-08-01',1953,37,'2018-08-27','S','Y',NULL),('2018-08-01',1954,37,'2018-08-27','X','Y',NULL),('2018-08-01',1955,37,'2018-08-28','S','Y',NULL),('2018-08-01',1956,37,'2018-08-28','X','Y',NULL),('2018-08-01',1957,37,'2018-08-29','S','Y',NULL),('2018-08-01',1958,37,'2018-08-29','X','Y',NULL),('2018-08-01',1959,37,'2018-08-30','S','Y',NULL),('2018-08-01',1960,37,'2018-08-30','X','Y',NULL),('2018-08-01',1961,37,'2018-08-31','S','Y',NULL),('2018-08-01',1962,37,'2018-08-31','X','Y',NULL),('2018-08-01',1963,38,'2018-08-23','S','Y',NULL),('2018-08-01',1964,38,'2018-08-23','X','Y',NULL),('2018-08-01',1965,38,'2018-08-24','S','Y',NULL),('2018-08-01',1966,38,'2018-08-24','X','Y',NULL),('2018-08-01',1967,38,'2018-08-27','S','Y',NULL),('2018-08-01',1968,38,'2018-08-27','X','Y',NULL),('2018-08-01',1969,38,'2018-08-28','S','Y',NULL),('2018-08-01',1970,38,'2018-08-28','X','Y',NULL),('2018-08-01',1971,38,'2018-08-29','S','Y',NULL),('2018-08-01',1972,38,'2018-08-29','X','Y',NULL),('2018-08-01',1973,38,'2018-08-30','S','Y',NULL),('2018-08-01',1974,38,'2018-08-30','X','Y',NULL),('2018-08-01',1975,38,'2018-08-31','S','Y',NULL),('2018-08-01',1976,38,'2018-08-31','X','Y',NULL),('2018-08-01',1977,39,'2018-08-23','S','Y',NULL),('2018-08-01',1978,39,'2018-08-23','X','Y',NULL),('2018-08-01',1979,39,'2018-08-24','S','Y',NULL),('2018-08-01',1980,39,'2018-08-24','X','Y',NULL),('2018-08-01',1981,39,'2018-08-27','S','Y',NULL),('2018-08-01',1982,39,'2018-08-27','X','Y',NULL),('2018-08-01',1983,39,'2018-08-28','S','Y',NULL),('2018-08-01',1984,39,'2018-08-28','X','Y',NULL),('2018-08-01',1985,39,'2018-08-29','S','Y',NULL),('2018-08-01',1986,39,'2018-08-29','X','Y',NULL),('2018-08-01',1987,39,'2018-08-30','S','Y',NULL),('2018-08-01',1988,39,'2018-08-30','X','Y',NULL),('2018-08-01',1989,39,'2018-08-31','S','Y',NULL),('2018-08-01',1990,39,'2018-08-31','X','Y',NULL),('2018-08-01',1991,40,'2018-08-23','S','Y',NULL),('2018-08-01',1992,40,'2018-08-23','X','Y',NULL),('2018-08-01',1993,40,'2018-08-24','S','Y',NULL),('2018-08-01',1994,40,'2018-08-24','X','Y',NULL),('2018-08-01',1995,40,'2018-08-27','S','Y',NULL),('2018-08-01',1996,40,'2018-08-27','X','Y',NULL),('2018-08-01',1997,40,'2018-08-28','S','Y',NULL),('2018-08-01',1998,40,'2018-08-28','X','Y',NULL),('2018-08-01',1999,40,'2018-08-29','S','Y',NULL),('2018-08-01',2000,40,'2018-08-29','X','Y',NULL),('2018-08-01',2001,40,'2018-08-30','S','Y',NULL),('2018-08-01',2002,40,'2018-08-30','X','Y',NULL),('2018-08-01',2003,40,'2018-08-31','S','Y',NULL),('2018-08-01',2004,40,'2018-08-31','X','Y',NULL),('2018-08-01',2005,41,'2018-08-23','S','Y',NULL),('2018-08-01',2006,41,'2018-08-23','X','Y',NULL),('2018-08-01',2007,41,'2018-08-24','S','Y',NULL),('2018-08-01',2008,41,'2018-08-24','X','Y',NULL),('2018-08-01',2009,41,'2018-08-27','S','Y',NULL),('2018-08-01',2010,41,'2018-08-27','X','Y',NULL),('2018-08-01',2011,41,'2018-08-28','S','Y',NULL),('2018-08-01',2012,41,'2018-08-28','X','Y',NULL),('2018-08-01',2013,41,'2018-08-29','S','Y',NULL),('2018-08-01',2014,41,'2018-08-29','X','Y',NULL),('2018-08-01',2015,41,'2018-08-30','S','Y',NULL),('2018-08-01',2016,41,'2018-08-30','X','Y',NULL),('2018-08-01',2017,41,'2018-08-31','S','Y',NULL),('2018-08-01',2018,41,'2018-08-31','X','Y',NULL),('2018-08-01',2019,42,'2018-08-23','S','Y',NULL),('2018-08-01',2020,42,'2018-08-23','X','Y',NULL),('2018-08-01',2021,42,'2018-08-24','S','Y',NULL),('2018-08-01',2022,42,'2018-08-24','X','Y',NULL),('2018-08-01',2023,42,'2018-08-27','S','Y',NULL),('2018-08-01',2024,42,'2018-08-27','X','Y',NULL),('2018-08-01',2025,42,'2018-08-28','S','Y',NULL),('2018-08-01',2026,42,'2018-08-28','X','Y',NULL),('2018-08-01',2027,42,'2018-08-29','S','Y',NULL),('2018-08-01',2028,42,'2018-08-29','X','Y',NULL),('2018-08-01',2029,42,'2018-08-30','S','Y',NULL),('2018-08-01',2030,42,'2018-08-30','X','Y',NULL),('2018-08-01',2031,42,'2018-08-31','S','Y',NULL),('2018-08-01',2032,42,'2018-08-31','X','Y',NULL),('2018-08-01',2033,43,'2018-08-23','S','Y',NULL),('2018-08-01',2034,43,'2018-08-23','X','Y',NULL),('2018-08-01',2035,43,'2018-08-24','S','Y',NULL),('2018-08-01',2036,43,'2018-08-24','X','Y',NULL),('2018-08-01',2037,43,'2018-08-27','S','Y',NULL),('2018-08-01',2038,43,'2018-08-27','X','Y',NULL),('2018-08-01',2039,43,'2018-08-28','S','Y',NULL),('2018-08-01',2040,43,'2018-08-28','X','Y',NULL),('2018-08-01',2041,43,'2018-08-29','S','Y',NULL),('2018-08-01',2042,43,'2018-08-29','X','Y',NULL),('2018-08-01',2043,43,'2018-08-30','S','Y',NULL),('2018-08-01',2044,43,'2018-08-30','X','Y',NULL),('2018-08-01',2045,43,'2018-08-31','S','Y',NULL),('2018-08-01',2046,43,'2018-08-31','X','Y',NULL),('2018-08-01',2047,44,'2018-08-23','S','Y',NULL),('2018-08-01',2048,44,'2018-08-23','X','Y',NULL),('2018-08-01',2049,44,'2018-08-24','S','Y',NULL),('2018-08-01',2050,44,'2018-08-24','X','Y',NULL),('2018-08-01',2051,44,'2018-08-27','S','Y',NULL),('2018-08-01',2052,44,'2018-08-27','X','Y',NULL),('2018-08-01',2053,44,'2018-08-28','S','Y',NULL),('2018-08-01',2054,44,'2018-08-28','X','Y',NULL),('2018-08-01',2055,44,'2018-08-29','S','Y',NULL),('2018-08-01',2056,44,'2018-08-29','X','Y',NULL),('2018-08-01',2057,44,'2018-08-30','S','Y',NULL),('2018-08-01',2058,44,'2018-08-30','X','Y',NULL),('2018-08-01',2059,44,'2018-08-31','S','Y',NULL),('2018-08-01',2060,44,'2018-08-31','X','Y',NULL),('2018-08-01',2061,45,'2018-08-23','S','Y',NULL),('2018-08-01',2062,45,'2018-08-23','X','Y',NULL),('2018-08-01',2063,45,'2018-08-24','S','Y',NULL),('2018-08-01',2064,45,'2018-08-24','X','Y',NULL),('2018-08-01',2065,45,'2018-08-27','S','Y',NULL),('2018-08-01',2066,45,'2018-08-27','X','Y',NULL),('2018-08-01',2067,45,'2018-08-28','S','Y',NULL),('2018-08-01',2068,45,'2018-08-28','X','Y',NULL),('2018-08-01',2069,45,'2018-08-29','S','Y',NULL),('2018-08-01',2070,45,'2018-08-29','X','Y',NULL),('2018-08-01',2071,45,'2018-08-30','S','Y',NULL),('2018-08-01',2072,45,'2018-08-30','X','Y',NULL),('2018-08-01',2073,45,'2018-08-31','S','Y',NULL),('2018-08-01',2074,45,'2018-08-31','X','Y',NULL),('2018-08-03',2075,46,'2018-08-23','S','Y',NULL),('2018-08-03',2076,46,'2018-08-23','X','Y',NULL),('2018-08-03',2077,46,'2018-08-24','S','Y',NULL),('2018-08-03',2078,46,'2018-08-24','X','Y',NULL),('2018-08-03',2079,46,'2018-08-27','S','Y',NULL),('2018-08-03',2080,46,'2018-08-27','X','Y',NULL),('2018-08-03',2081,46,'2018-08-28','S','Y',NULL),('2018-08-03',2082,46,'2018-08-28','X','Y',NULL),('2018-08-03',2083,46,'2018-08-29','S','Y',NULL),('2018-08-03',2084,46,'2018-08-29','X','Y',NULL),('2018-08-03',2085,46,'2018-08-30','S','Y',NULL),('2018-08-03',2086,46,'2018-08-30','X','Y',NULL),('2018-08-03',2087,46,'2018-08-31','S','Y',NULL),('2018-08-03',2088,46,'2018-08-31','X','Y',NULL),('2018-08-11',2089,47,'2018-08-23','S','Y',NULL),('2018-08-11',2090,47,'2018-08-23','X','Y',NULL),('2018-08-11',2091,47,'2018-08-24','S','Y',NULL),('2018-08-11',2092,47,'2018-08-24','X','Y',NULL),('2018-08-11',2093,47,'2018-08-27','S','Y',NULL),('2018-08-11',2094,47,'2018-08-27','X','Y',NULL),('2018-08-11',2095,47,'2018-08-28','S','Y',NULL),('2018-08-11',2096,47,'2018-08-28','X','Y',NULL),('2018-08-11',2097,47,'2018-08-29','S','Y',NULL),('2018-08-11',2098,47,'2018-08-29','X','Y',NULL),('2018-08-11',2099,47,'2018-08-30','S','Y',NULL),('2018-08-11',2100,47,'2018-08-30','X','Y',NULL),('2018-08-11',2101,47,'2018-08-31','S','Y',NULL),('2018-08-11',2102,47,'2018-08-31','X','Y',NULL),('2018-09-15',2103,48,'2018-09-03','S','Y',NULL),('2018-09-15',2104,48,'2018-09-03','X','Y',NULL),('2018-09-15',2105,48,'2018-09-04','S','Y',NULL),('2018-09-15',2106,48,'2018-09-04','X','Y',NULL),('2018-09-15',2107,48,'2018-09-05','S','Y',NULL),('2018-09-15',2108,48,'2018-09-05','X','Y',NULL),('2018-09-15',2109,48,'2018-09-06','S','Y',NULL),('2018-09-15',2110,48,'2018-09-06','X','Y',NULL),('2018-09-15',2111,48,'2018-09-07','S','Y',NULL),('2018-09-15',2112,48,'2018-09-07','X','Y',NULL),('2018-09-15',2113,48,'2018-09-10','S','Y',NULL),('2018-09-15',2114,48,'2018-09-10','X','Y',NULL),('2018-09-15',2115,48,'2018-09-11','S','Y',NULL),('2018-09-15',2116,48,'2018-09-11','X','Y',NULL),('2018-09-15',2117,48,'2018-09-12','S','Y',NULL),('2018-09-15',2118,48,'2018-09-12','X','Y',NULL),('2018-09-15',2119,48,'2018-09-13','S','Y',NULL),('2018-09-15',2120,48,'2018-09-13','X','Y',NULL),('2018-09-15',2121,48,'2018-09-14','S','Y',NULL),('2018-09-15',2122,48,'2018-09-14','X','Y',NULL),('2018-09-15',2123,49,'2018-09-03','S','Y',NULL),('2018-09-15',2124,49,'2018-09-03','X','Y',NULL),('2018-09-15',2125,49,'2018-09-04','S','Y',NULL),('2018-09-15',2126,49,'2018-09-04','X','Y',NULL),('2018-09-15',2127,49,'2018-09-05','S','Y',NULL),('2018-09-15',2128,49,'2018-09-05','X','Y',NULL),('2018-09-15',2129,49,'2018-09-06','S','Y',NULL),('2018-09-15',2130,49,'2018-09-06','X','Y',NULL),('2018-09-15',2131,49,'2018-09-07','S','Y',NULL),('2018-09-15',2132,49,'2018-09-07','X','Y',NULL),('2018-09-15',2133,49,'2018-09-10','S','Y',NULL),('2018-09-15',2134,49,'2018-09-10','X','Y',NULL),('2018-09-15',2135,49,'2018-09-11','S','Y',NULL),('2018-09-15',2136,49,'2018-09-11','X','Y',NULL),('2018-09-15',2137,49,'2018-09-12','S','Y',NULL),('2018-09-15',2138,49,'2018-09-12','X','Y',NULL),('2018-09-15',2139,49,'2018-09-13','S','Y',NULL),('2018-09-15',2140,49,'2018-09-13','X','Y',NULL),('2018-09-15',2141,49,'2018-09-14','S','Y',NULL),('2018-09-15',2142,49,'2018-09-14','X','Y',NULL),('2018-09-15',2143,50,'2018-09-03','S','Y',NULL),('2018-09-15',2144,50,'2018-09-03','X','Y',NULL),('2018-09-15',2145,50,'2018-09-04','S','Y',NULL),('2018-09-15',2146,50,'2018-09-04','X','Y',NULL),('2018-09-15',2147,50,'2018-09-05','S','Y',NULL),('2018-09-15',2148,50,'2018-09-05','X','Y',NULL),('2018-09-15',2149,50,'2018-09-06','S','Y',NULL),('2018-09-15',2150,50,'2018-09-06','X','Y',NULL),('2018-09-15',2151,50,'2018-09-07','S','Y',NULL),('2018-09-15',2152,50,'2018-09-07','X','Y',NULL),('2018-09-15',2153,50,'2018-09-10','S','Y',NULL),('2018-09-15',2154,50,'2018-09-10','X','Y',NULL),('2018-09-15',2155,50,'2018-09-11','S','Y',NULL),('2018-09-15',2156,50,'2018-09-11','X','Y',NULL),('2018-09-15',2157,50,'2018-09-12','S','Y',NULL),('2018-09-15',2158,50,'2018-09-12','X','Y',NULL),('2018-09-15',2159,50,'2018-09-13','S','Y',NULL),('2018-09-15',2160,50,'2018-09-13','X','Y',NULL),('2018-09-15',2161,50,'2018-09-14','S','Y',NULL),('2018-09-15',2162,50,'2018-09-14','X','Y',NULL),('2018-09-15',2163,51,'2018-09-03','S','Y',NULL),('2018-09-15',2164,51,'2018-09-03','X','Y',NULL),('2018-09-15',2165,51,'2018-09-04','S','Y',NULL),('2018-09-15',2166,51,'2018-09-04','X','Y',NULL),('2018-09-15',2167,51,'2018-09-05','S','Y',NULL),('2018-09-15',2168,51,'2018-09-05','X','Y',NULL),('2018-09-15',2169,51,'2018-09-06','S','Y',NULL),('2018-09-15',2170,51,'2018-09-06','X','Y',NULL),('2018-09-15',2171,51,'2018-09-07','S','Y',NULL),('2018-09-15',2172,51,'2018-09-07','X','Y',NULL),('2018-09-15',2173,51,'2018-09-10','S','Y',NULL),('2018-09-15',2174,51,'2018-09-10','X','Y',NULL),('2018-09-15',2175,51,'2018-09-11','S','Y',NULL),('2018-09-15',2176,51,'2018-09-11','X','Y',NULL),('2018-09-15',2177,51,'2018-09-12','S','Y',NULL),('2018-09-15',2178,51,'2018-09-12','X','Y',NULL),('2018-09-15',2179,51,'2018-09-13','S','Y',NULL),('2018-09-15',2180,51,'2018-09-13','X','Y',NULL),('2018-09-15',2181,51,'2018-09-14','S','Y',NULL),('2018-09-15',2182,51,'2018-09-14','X','Y',NULL),('2018-09-15',2183,52,'2018-09-03','S','Y',NULL),('2018-09-15',2184,52,'2018-09-03','X','Y',NULL),('2018-09-15',2185,52,'2018-09-04','S','Y',NULL),('2018-09-15',2186,52,'2018-09-04','X','Y',NULL),('2018-09-15',2187,52,'2018-09-05','S','Y',NULL),('2018-09-15',2188,52,'2018-09-05','X','Y',NULL),('2018-09-15',2189,52,'2018-09-06','S','Y',NULL),('2018-09-15',2190,52,'2018-09-06','X','Y',NULL),('2018-09-15',2191,52,'2018-09-07','S','Y',NULL),('2018-09-15',2192,52,'2018-09-07','X','Y',NULL),('2018-09-15',2193,52,'2018-09-10','S','Y',NULL),('2018-09-15',2194,52,'2018-09-10','X','Y',NULL),('2018-09-15',2195,52,'2018-09-11','S','Y',NULL),('2018-09-15',2196,52,'2018-09-11','X','Y',NULL),('2018-09-15',2197,52,'2018-09-12','S','Y',NULL),('2018-09-15',2198,52,'2018-09-12','X','Y',NULL),('2018-09-15',2199,52,'2018-09-13','S','Y',NULL),('2018-09-15',2200,52,'2018-09-13','X','Y',NULL),('2018-09-15',2201,52,'2018-09-14','S','Y',NULL),('2018-09-15',2202,52,'2018-09-14','X','Y',NULL),('2018-09-15',2203,53,'2018-09-03','S','Y',NULL),('2018-09-15',2204,53,'2018-09-03','X','Y',NULL),('2018-09-15',2205,53,'2018-09-04','S','Y',NULL),('2018-09-15',2206,53,'2018-09-04','X','Y',NULL),('2018-09-15',2207,53,'2018-09-05','S','Y',NULL),('2018-09-15',2208,53,'2018-09-05','X','Y',NULL),('2018-09-15',2209,53,'2018-09-06','S','Y',NULL),('2018-09-15',2210,53,'2018-09-06','X','Y',NULL),('2018-09-15',2211,53,'2018-09-07','S','Y',NULL),('2018-09-15',2212,53,'2018-09-07','X','Y',NULL),('2018-09-15',2213,53,'2018-09-10','S','Y',NULL),('2018-09-15',2214,53,'2018-09-10','X','Y',NULL),('2018-09-15',2215,53,'2018-09-11','S','Y',NULL),('2018-09-15',2216,53,'2018-09-11','X','Y',NULL),('2018-09-15',2217,53,'2018-09-12','S','Y',NULL),('2018-09-15',2218,53,'2018-09-12','X','Y',NULL),('2018-09-15',2219,53,'2018-09-13','S','Y',NULL),('2018-09-15',2220,53,'2018-09-13','X','Y',NULL),('2018-09-15',2221,53,'2018-09-14','S','Y',NULL),('2018-09-15',2222,53,'2018-09-14','X','Y',NULL),('2018-09-15',2223,54,'2018-09-03','S','Y',NULL),('2018-09-15',2224,54,'2018-09-03','X','Y',NULL),('2018-09-15',2225,54,'2018-09-04','S','Y',NULL),('2018-09-15',2226,54,'2018-09-04','X','Y',NULL),('2018-09-15',2227,54,'2018-09-05','S','Y',NULL),('2018-09-15',2228,54,'2018-09-05','X','Y',NULL),('2018-09-15',2229,54,'2018-09-06','S','Y',NULL),('2018-09-15',2230,54,'2018-09-06','X','Y',NULL),('2018-09-15',2231,54,'2018-09-07','S','Y',NULL),('2018-09-15',2232,54,'2018-09-07','X','Y',NULL),('2018-09-15',2233,54,'2018-09-10','S','Y',NULL),('2018-09-15',2234,54,'2018-09-10','X','Y',NULL),('2018-09-15',2235,54,'2018-09-11','S','Y',NULL),('2018-09-15',2236,54,'2018-09-11','X','Y',NULL),('2018-09-15',2237,54,'2018-09-12','S','Y',NULL),('2018-09-15',2238,54,'2018-09-12','X','Y',NULL),('2018-09-15',2239,54,'2018-09-13','S','Y',NULL),('2018-09-15',2240,54,'2018-09-13','X','Y',NULL),('2018-09-15',2241,54,'2018-09-14','S','Y',NULL),('2018-09-15',2242,54,'2018-09-14','X','Y',NULL),('2018-09-15',2243,55,'2018-09-03','S','Y',NULL),('2018-09-15',2244,55,'2018-09-03','X','Y',NULL),('2018-09-15',2245,55,'2018-09-04','S','Y',NULL),('2018-09-15',2246,55,'2018-09-04','X','Y',NULL),('2018-09-15',2247,55,'2018-09-05','S','Y',NULL),('2018-09-15',2248,55,'2018-09-05','X','Y',NULL),('2018-09-15',2249,55,'2018-09-06','S','Y',NULL),('2018-09-15',2250,55,'2018-09-06','X','Y',NULL),('2018-09-15',2251,55,'2018-09-07','S','Y',NULL),('2018-09-15',2252,55,'2018-09-07','X','Y',NULL),('2018-09-15',2253,55,'2018-09-10','S','Y',NULL),('2018-09-15',2254,55,'2018-09-10','X','Y',NULL),('2018-09-15',2255,55,'2018-09-11','S','Y',NULL),('2018-09-15',2256,55,'2018-09-11','X','Y',NULL),('2018-09-15',2257,55,'2018-09-12','S','Y',NULL),('2018-09-15',2258,55,'2018-09-12','X','Y',NULL),('2018-09-15',2259,55,'2018-09-13','S','Y',NULL),('2018-09-15',2260,55,'2018-09-13','X','Y',NULL),('2018-09-15',2261,55,'2018-09-14','S','Y',NULL),('2018-09-15',2262,55,'2018-09-14','X','Y',NULL),('2018-09-15',2263,56,'2018-09-03','S','Y',NULL),('2018-09-15',2264,56,'2018-09-03','X','Y',NULL),('2018-09-15',2265,56,'2018-09-04','S','Y',NULL),('2018-09-15',2266,56,'2018-09-04','X','Y',NULL),('2018-09-15',2267,56,'2018-09-05','S','Y',NULL),('2018-09-15',2268,56,'2018-09-05','X','Y',NULL),('2018-09-15',2269,56,'2018-09-06','S','Y',NULL),('2018-09-15',2270,56,'2018-09-06','X','Y',NULL),('2018-09-15',2271,56,'2018-09-07','S','Y',NULL),('2018-09-15',2272,56,'2018-09-07','X','Y',NULL),('2018-09-15',2273,56,'2018-09-10','S','Y',NULL),('2018-09-15',2274,56,'2018-09-10','X','Y',NULL),('2018-09-15',2275,56,'2018-09-11','S','Y',NULL),('2018-09-15',2276,56,'2018-09-11','X','Y',NULL),('2018-09-15',2277,56,'2018-09-12','S','Y',NULL),('2018-09-15',2278,56,'2018-09-12','X','Y',NULL),('2018-09-15',2279,56,'2018-09-13','S','Y',NULL),('2018-09-15',2280,56,'2018-09-13','X','Y',NULL),('2018-09-15',2281,56,'2018-09-14','S','Y',NULL),('2018-09-15',2282,56,'2018-09-14','X','Y',NULL),('2018-09-15',2283,57,'2018-09-03','S','Y',NULL),('2018-09-15',2284,57,'2018-09-03','X','Y',NULL),('2018-09-15',2285,57,'2018-09-04','S','Y',NULL),('2018-09-15',2286,57,'2018-09-04','X','Y',NULL),('2018-09-15',2287,57,'2018-09-05','S','Y',NULL),('2018-09-15',2288,57,'2018-09-05','X','Y',NULL),('2018-09-15',2289,57,'2018-09-06','S','Y',NULL),('2018-09-15',2290,57,'2018-09-06','X','Y',NULL),('2018-09-15',2291,57,'2018-09-07','S','Y',NULL),('2018-09-15',2292,57,'2018-09-07','X','Y',NULL),('2018-09-15',2293,57,'2018-09-10','S','Y',NULL),('2018-09-15',2294,57,'2018-09-10','X','Y',NULL),('2018-09-15',2295,57,'2018-09-11','S','Y',NULL),('2018-09-15',2296,57,'2018-09-11','X','Y',NULL),('2018-09-15',2297,57,'2018-09-12','S','Y',NULL),('2018-09-15',2298,57,'2018-09-12','X','Y',NULL),('2018-09-15',2299,57,'2018-09-13','S','Y',NULL),('2018-09-15',2300,57,'2018-09-13','X','Y',NULL),('2018-09-15',2301,57,'2018-09-14','S','Y',NULL),('2018-09-15',2302,57,'2018-09-14','X','Y',NULL),('2018-09-15',2303,58,'2018-09-03','S','Y',NULL),('2018-09-15',2304,58,'2018-09-03','X','Y',NULL),('2018-09-15',2305,58,'2018-09-04','S','Y',NULL),('2018-09-15',2306,58,'2018-09-04','X','Y',NULL),('2018-09-15',2307,58,'2018-09-05','S','Y',NULL),('2018-09-15',2308,58,'2018-09-05','X','Y',NULL),('2018-09-15',2309,58,'2018-09-06','S','Y',NULL),('2018-09-15',2310,58,'2018-09-06','X','Y',NULL),('2018-09-15',2311,58,'2018-09-07','S','Y',NULL),('2018-09-15',2312,58,'2018-09-07','X','Y',NULL),('2018-09-15',2313,58,'2018-09-10','S','Y',NULL),('2018-09-15',2314,58,'2018-09-10','X','Y',NULL),('2018-09-15',2315,58,'2018-09-11','S','Y',NULL),('2018-09-15',2316,58,'2018-09-11','X','Y',NULL),('2018-09-15',2317,58,'2018-09-12','S','Y',NULL),('2018-09-15',2318,58,'2018-09-12','X','Y',NULL),('2018-09-15',2319,58,'2018-09-13','S','Y',NULL),('2018-09-15',2320,58,'2018-09-13','X','Y',NULL),('2018-09-15',2321,58,'2018-09-14','S','Y',NULL),('2018-09-15',2322,58,'2018-09-14','X','Y',NULL),('2018-09-15',2323,59,'2018-09-03','S','Y',NULL),('2018-09-15',2324,59,'2018-09-03','X','Y',NULL),('2018-09-15',2325,59,'2018-09-04','S','Y',NULL),('2018-09-15',2326,59,'2018-09-04','X','Y',NULL),('2018-09-15',2327,59,'2018-09-05','S','Y',NULL),('2018-09-15',2328,59,'2018-09-05','X','Y',NULL),('2018-09-15',2329,59,'2018-09-06','S','Y',NULL),('2018-09-15',2330,59,'2018-09-06','X','Y',NULL),('2018-09-15',2331,59,'2018-09-07','S','Y',NULL),('2018-09-15',2332,59,'2018-09-07','X','Y',NULL),('2018-09-15',2333,59,'2018-09-10','S','Y',NULL),('2018-09-15',2334,59,'2018-09-10','X','Y',NULL),('2018-09-15',2335,59,'2018-09-11','S','Y',NULL),('2018-09-15',2336,59,'2018-09-11','X','Y',NULL),('2018-09-15',2337,59,'2018-09-12','S','Y',NULL),('2018-09-15',2338,59,'2018-09-12','X','Y',NULL),('2018-09-15',2339,59,'2018-09-13','S','Y',NULL),('2018-09-15',2340,59,'2018-09-13','X','Y',NULL),('2018-09-15',2341,59,'2018-09-14','S','Y',NULL),('2018-09-15',2342,59,'2018-09-14','X','Y',NULL),('2018-09-15',2343,60,'2018-09-03','S','Y',NULL),('2018-09-15',2344,60,'2018-09-03','X','Y',NULL),('2018-09-15',2345,60,'2018-09-04','S','Y',NULL),('2018-09-15',2346,60,'2018-09-04','X','Y',NULL),('2018-09-15',2347,60,'2018-09-05','S','Y',NULL),('2018-09-15',2348,60,'2018-09-05','X','Y',NULL),('2018-09-15',2349,60,'2018-09-06','S','Y',NULL),('2018-09-15',2350,60,'2018-09-06','X','Y',NULL),('2018-09-15',2351,60,'2018-09-07','S','Y',NULL),('2018-09-15',2352,60,'2018-09-07','X','Y',NULL),('2018-09-15',2353,60,'2018-09-10','S','Y',NULL),('2018-09-15',2354,60,'2018-09-10','X','Y',NULL),('2018-09-15',2355,60,'2018-09-11','S','Y',NULL),('2018-09-15',2356,60,'2018-09-11','X','Y',NULL),('2018-09-15',2357,60,'2018-09-12','S','Y',NULL),('2018-09-15',2358,60,'2018-09-12','X','Y',NULL),('2018-09-15',2359,60,'2018-09-13','S','Y',NULL),('2018-09-15',2360,60,'2018-09-13','X','Y',NULL),('2018-09-15',2361,60,'2018-09-14','S','Y',NULL),('2018-09-15',2362,60,'2018-09-14','X','Y',NULL),('2018-09-15',2363,61,'2018-09-03','S','Y',NULL),('2018-09-15',2364,61,'2018-09-03','X','Y',NULL),('2018-09-15',2365,61,'2018-09-04','S','Y',NULL),('2018-09-15',2366,61,'2018-09-04','X','Y',NULL),('2018-09-15',2367,61,'2018-09-05','S','Y',NULL),('2018-09-15',2368,61,'2018-09-05','X','Y',NULL),('2018-09-15',2369,61,'2018-09-06','S','Y',NULL),('2018-09-15',2370,61,'2018-09-06','X','Y',NULL),('2018-09-15',2371,61,'2018-09-07','S','Y',NULL),('2018-09-15',2372,61,'2018-09-07','X','Y',NULL),('2018-09-15',2373,61,'2018-09-10','S','Y',NULL),('2018-09-15',2374,61,'2018-09-10','X','Y',NULL),('2018-09-15',2375,61,'2018-09-11','S','Y',NULL),('2018-09-15',2376,61,'2018-09-11','X','Y',NULL),('2018-09-15',2377,61,'2018-09-12','S','Y',NULL),('2018-09-15',2378,61,'2018-09-12','X','Y',NULL),('2018-09-15',2379,61,'2018-09-13','S','Y',NULL),('2018-09-15',2380,61,'2018-09-13','X','Y',NULL),('2018-09-15',2381,61,'2018-09-14','S','Y',NULL),('2018-09-15',2382,61,'2018-09-14','X','Y',NULL),('2018-09-15',2383,62,'2018-09-03','S','Y',NULL),('2018-09-15',2384,62,'2018-09-03','X','Y',NULL),('2018-09-15',2385,62,'2018-09-04','S','Y',NULL),('2018-09-15',2386,62,'2018-09-04','X','Y',NULL),('2018-09-15',2387,62,'2018-09-05','S','Y',NULL),('2018-09-15',2388,62,'2018-09-05','X','Y',NULL),('2018-09-15',2389,62,'2018-09-06','S','Y',NULL),('2018-09-15',2390,62,'2018-09-06','X','Y',NULL),('2018-09-15',2391,62,'2018-09-07','S','Y',NULL),('2018-09-15',2392,62,'2018-09-07','X','Y',NULL),('2018-09-15',2393,62,'2018-09-10','S','Y',NULL),('2018-09-15',2394,62,'2018-09-10','X','Y',NULL),('2018-09-15',2395,62,'2018-09-11','S','Y',NULL),('2018-09-15',2396,62,'2018-09-11','X','Y',NULL),('2018-09-15',2397,62,'2018-09-12','S','Y',NULL),('2018-09-15',2398,62,'2018-09-12','X','Y',NULL),('2018-09-15',2399,62,'2018-09-13','S','Y',NULL),('2018-09-15',2400,62,'2018-09-13','X','Y',NULL),('2018-09-15',2401,62,'2018-09-14','S','Y',NULL),('2018-09-15',2402,62,'2018-09-14','X','Y',NULL),('2018-09-15',2403,63,'2018-09-03','S','Y',NULL),('2018-09-15',2404,63,'2018-09-03','X','Y',NULL),('2018-09-15',2405,63,'2018-09-04','S','Y',NULL),('2018-09-15',2406,63,'2018-09-04','X','Y',NULL),('2018-09-15',2407,63,'2018-09-05','S','Y',NULL),('2018-09-15',2408,63,'2018-09-05','X','Y',NULL),('2018-09-15',2409,63,'2018-09-06','S','Y',NULL),('2018-09-15',2410,63,'2018-09-06','X','Y',NULL),('2018-09-15',2411,63,'2018-09-07','S','Y',NULL),('2018-09-15',2412,63,'2018-09-07','X','Y',NULL),('2018-09-15',2413,63,'2018-09-10','S','Y',NULL),('2018-09-15',2414,63,'2018-09-10','X','Y',NULL),('2018-09-15',2415,63,'2018-09-11','S','Y',NULL),('2018-09-15',2416,63,'2018-09-11','X','Y',NULL),('2018-09-15',2417,63,'2018-09-12','S','Y',NULL),('2018-09-15',2418,63,'2018-09-12','X','Y',NULL),('2018-09-15',2419,63,'2018-09-13','S','Y',NULL),('2018-09-15',2420,63,'2018-09-13','X','Y',NULL),('2018-09-15',2421,63,'2018-09-14','S','Y',NULL),('2018-09-15',2422,63,'2018-09-14','X','Y',NULL),('2018-09-15',2423,64,'2018-09-03','S','Y',NULL),('2018-09-15',2424,64,'2018-09-03','X','Y',NULL),('2018-09-15',2425,64,'2018-09-04','S','Y',NULL),('2018-09-15',2426,64,'2018-09-04','X','Y',NULL),('2018-09-15',2427,64,'2018-09-05','S','Y',NULL),('2018-09-15',2428,64,'2018-09-05','X','Y',NULL),('2018-09-15',2429,64,'2018-09-06','S','Y',NULL),('2018-09-15',2430,64,'2018-09-06','X','Y',NULL),('2018-09-15',2431,64,'2018-09-07','S','Y',NULL),('2018-09-15',2432,64,'2018-09-07','X','Y',NULL),('2018-09-15',2433,64,'2018-09-10','S','Y',NULL),('2018-09-15',2434,64,'2018-09-10','X','Y',NULL),('2018-09-15',2435,64,'2018-09-11','S','Y',NULL),('2018-09-15',2436,64,'2018-09-11','X','Y',NULL),('2018-09-15',2437,64,'2018-09-12','S','Y',NULL),('2018-09-15',2438,64,'2018-09-12','X','Y',NULL),('2018-09-15',2439,64,'2018-09-13','S','Y',NULL),('2018-09-15',2440,64,'2018-09-13','X','Y',NULL),('2018-09-15',2441,64,'2018-09-14','S','Y',NULL),('2018-09-15',2442,64,'2018-09-14','X','Y',NULL),('2018-09-15',2443,48,'2018-09-17','S','Y',NULL),('2018-09-15',2444,48,'2018-09-17','X','Y',NULL),('2018-09-15',2445,48,'2018-09-18','S','Y',NULL),('2018-09-15',2446,48,'2018-09-18','X','Y',NULL),('2018-09-15',2447,48,'2018-09-19','S','Y',NULL),('2018-09-15',2448,48,'2018-09-19','X','Y',NULL),('2018-09-15',2449,48,'2018-09-20','S','Y',NULL),('2018-09-15',2450,48,'2018-09-20','X','Y',NULL),('2018-09-15',2451,48,'2018-09-21','S','Y',NULL),('2018-09-15',2452,48,'2018-09-21','X','Y',NULL),('2018-09-15',2453,48,'2018-09-25','S','Y',NULL),('2018-09-15',2454,48,'2018-09-25','X','Y',NULL),('2018-09-15',2455,48,'2018-09-26','S','Y',NULL),('2018-09-15',2456,48,'2018-09-26','X','Y',NULL),('2018-09-15',2457,48,'2018-09-27','S','Y',NULL),('2018-09-15',2458,48,'2018-09-27','X','Y',NULL),('2018-09-15',2459,48,'2018-09-28','S','Y',NULL),('2018-09-15',2460,48,'2018-09-28','X','Y',NULL),('2018-09-15',2461,48,'2018-09-29','S','Y',NULL),('2018-09-15',2462,48,'2018-09-29','X','Y',NULL),('2018-09-15',2463,49,'2018-09-17','S','Y',NULL),('2018-09-15',2464,49,'2018-09-17','X','Y',NULL),('2018-09-15',2465,49,'2018-09-18','S','Y',NULL),('2018-09-15',2466,49,'2018-09-18','X','Y',NULL),('2018-09-15',2467,49,'2018-09-19','S','Y',NULL),('2018-09-15',2468,49,'2018-09-19','X','Y',NULL),('2018-09-15',2469,49,'2018-09-20','S','Y',NULL),('2018-09-15',2470,49,'2018-09-20','X','Y',NULL),('2018-09-15',2471,49,'2018-09-21','S','Y',NULL),('2018-09-15',2472,49,'2018-09-21','X','Y',NULL),('2018-09-15',2473,49,'2018-09-25','S','Y',NULL),('2018-09-15',2474,49,'2018-09-25','X','Y',NULL),('2018-09-15',2475,49,'2018-09-26','S','Y',NULL),('2018-09-15',2476,49,'2018-09-26','X','Y',NULL),('2018-09-15',2477,49,'2018-09-27','S','Y',NULL),('2018-09-15',2478,49,'2018-09-27','X','Y',NULL),('2018-09-15',2479,49,'2018-09-28','S','Y',NULL),('2018-09-15',2480,49,'2018-09-28','X','Y',NULL),('2018-09-15',2481,49,'2018-09-29','S','Y',NULL),('2018-09-15',2482,49,'2018-09-29','X','Y',NULL),('2018-09-15',2483,50,'2018-09-17','S','Y',NULL),('2018-09-15',2484,50,'2018-09-17','X','Y',NULL),('2018-09-15',2485,50,'2018-09-18','S','Y',NULL),('2018-09-15',2486,50,'2018-09-18','X','Y',NULL),('2018-09-15',2487,50,'2018-09-19','S','Y',NULL),('2018-09-15',2488,50,'2018-09-19','X','Y',NULL),('2018-09-15',2489,50,'2018-09-20','S','Y',NULL),('2018-09-15',2490,50,'2018-09-20','X','Y',NULL),('2018-09-15',2491,50,'2018-09-21','S','Y',NULL),('2018-09-15',2492,50,'2018-09-21','X','Y',NULL),('2018-09-15',2493,50,'2018-09-25','S','Y',NULL),('2018-09-15',2494,50,'2018-09-25','X','Y',NULL),('2018-09-15',2495,50,'2018-09-26','S','Y',NULL),('2018-09-15',2496,50,'2018-09-26','X','Y',NULL),('2018-09-15',2497,50,'2018-09-27','S','Y',NULL),('2018-09-15',2498,50,'2018-09-27','X','Y',NULL),('2018-09-15',2499,50,'2018-09-28','S','Y',NULL),('2018-09-15',2500,50,'2018-09-28','X','Y',NULL),('2018-09-15',2501,50,'2018-09-29','S','Y',NULL),('2018-09-15',2502,50,'2018-09-29','X','Y',NULL),('2018-09-15',2503,51,'2018-09-17','S','Y',NULL),('2018-09-15',2504,51,'2018-09-17','X','Y',NULL),('2018-09-15',2505,51,'2018-09-18','S','Y',NULL),('2018-09-15',2506,51,'2018-09-18','X','Y',NULL),('2018-09-15',2507,51,'2018-09-19','S','Y',NULL),('2018-09-15',2508,51,'2018-09-19','X','Y',NULL),('2018-09-15',2509,51,'2018-09-20','S','Y',NULL),('2018-09-15',2510,51,'2018-09-20','X','Y',NULL),('2018-09-15',2511,51,'2018-09-21','S','Y',NULL),('2018-09-15',2512,51,'2018-09-21','X','Y',NULL),('2018-09-15',2513,51,'2018-09-25','S','Y',NULL),('2018-09-15',2514,51,'2018-09-25','X','Y',NULL),('2018-09-15',2515,51,'2018-09-26','S','Y',NULL),('2018-09-15',2516,51,'2018-09-26','X','Y',NULL),('2018-09-15',2517,51,'2018-09-27','S','Y',NULL),('2018-09-15',2518,51,'2018-09-27','X','Y',NULL),('2018-09-15',2519,51,'2018-09-28','S','Y',NULL),('2018-09-15',2520,51,'2018-09-28','X','Y',NULL),('2018-09-15',2521,51,'2018-09-29','S','Y',NULL),('2018-09-15',2522,51,'2018-09-29','X','Y',NULL),('2018-09-15',2523,52,'2018-09-17','S','Y',NULL),('2018-09-15',2524,52,'2018-09-17','X','Y',NULL),('2018-09-15',2525,52,'2018-09-18','S','Y',NULL),('2018-09-15',2526,52,'2018-09-18','X','Y',NULL),('2018-09-15',2527,52,'2018-09-19','S','Y',NULL),('2018-09-15',2528,52,'2018-09-19','X','Y',NULL),('2018-09-15',2529,52,'2018-09-20','S','Y',NULL),('2018-09-15',2530,52,'2018-09-20','X','Y',NULL),('2018-09-15',2531,52,'2018-09-21','S','Y',NULL),('2018-09-15',2532,52,'2018-09-21','X','Y',NULL),('2018-09-15',2533,52,'2018-09-25','S','Y',NULL),('2018-09-15',2534,52,'2018-09-25','X','Y',NULL),('2018-09-15',2535,52,'2018-09-26','S','Y',NULL),('2018-09-15',2536,52,'2018-09-26','X','Y',NULL),('2018-09-15',2537,52,'2018-09-27','S','Y',NULL),('2018-09-15',2538,52,'2018-09-27','X','Y',NULL),('2018-09-15',2539,52,'2018-09-28','S','Y',NULL),('2018-09-15',2540,52,'2018-09-28','X','Y',NULL),('2018-09-15',2541,52,'2018-09-29','S','Y',NULL),('2018-09-15',2542,52,'2018-09-29','X','Y',NULL),('2018-09-15',2543,53,'2018-09-17','S','Y',NULL),('2018-09-15',2544,53,'2018-09-17','X','Y',NULL),('2018-09-15',2545,53,'2018-09-18','S','Y',NULL),('2018-09-15',2546,53,'2018-09-18','X','Y',NULL),('2018-09-15',2547,53,'2018-09-19','S','Y',NULL),('2018-09-15',2548,53,'2018-09-19','X','Y',NULL),('2018-09-15',2549,53,'2018-09-20','S','Y',NULL),('2018-09-15',2550,53,'2018-09-20','X','Y',NULL),('2018-09-15',2551,53,'2018-09-21','S','Y',NULL),('2018-09-15',2552,53,'2018-09-21','X','Y',NULL),('2018-09-15',2553,53,'2018-09-25','S','Y',NULL),('2018-09-15',2554,53,'2018-09-25','X','Y',NULL),('2018-09-15',2555,53,'2018-09-26','S','Y',NULL),('2018-09-15',2556,53,'2018-09-26','X','Y',NULL),('2018-09-15',2557,53,'2018-09-27','S','Y',NULL),('2018-09-15',2558,53,'2018-09-27','X','Y',NULL),('2018-09-15',2559,53,'2018-09-28','S','Y',NULL),('2018-09-15',2560,53,'2018-09-28','X','Y',NULL),('2018-09-15',2561,53,'2018-09-29','S','Y',NULL),('2018-09-15',2562,53,'2018-09-29','X','Y',NULL),('2018-09-15',2563,54,'2018-09-17','S','Y',NULL),('2018-09-15',2564,54,'2018-09-17','X','Y',NULL),('2018-09-15',2565,54,'2018-09-18','S','Y',NULL),('2018-09-15',2566,54,'2018-09-18','X','Y',NULL),('2018-09-15',2567,54,'2018-09-19','S','Y',NULL),('2018-09-15',2568,54,'2018-09-19','X','Y',NULL),('2018-09-15',2569,54,'2018-09-20','S','Y',NULL),('2018-09-15',2570,54,'2018-09-20','X','Y',NULL),('2018-09-15',2571,54,'2018-09-21','S','Y',NULL),('2018-09-15',2572,54,'2018-09-21','X','Y',NULL),('2018-09-15',2573,54,'2018-09-25','S','Y',NULL),('2018-09-15',2574,54,'2018-09-25','X','Y',NULL),('2018-09-15',2575,54,'2018-09-26','S','Y',NULL),('2018-09-15',2576,54,'2018-09-26','X','Y',NULL),('2018-09-15',2577,54,'2018-09-27','S','Y',NULL),('2018-09-15',2578,54,'2018-09-27','X','Y',NULL),('2018-09-15',2579,54,'2018-09-28','S','Y',NULL),('2018-09-15',2580,54,'2018-09-28','X','Y',NULL),('2018-09-15',2581,54,'2018-09-29','S','Y',NULL),('2018-09-15',2582,54,'2018-09-29','X','Y',NULL),('2018-09-15',2583,55,'2018-09-17','S','Y',NULL),('2018-09-15',2584,55,'2018-09-17','X','Y',NULL),('2018-09-15',2585,55,'2018-09-18','S','Y',NULL),('2018-09-15',2586,55,'2018-09-18','X','Y',NULL),('2018-09-15',2587,55,'2018-09-19','S','Y',NULL),('2018-09-15',2588,55,'2018-09-19','X','Y',NULL),('2018-09-15',2589,55,'2018-09-20','S','Y',NULL),('2018-09-15',2590,55,'2018-09-20','X','Y',NULL),('2018-09-15',2591,55,'2018-09-21','S','Y',NULL),('2018-09-15',2592,55,'2018-09-21','X','Y',NULL),('2018-09-15',2593,55,'2018-09-25','S','Y',NULL),('2018-09-15',2594,55,'2018-09-25','X','Y',NULL),('2018-09-15',2595,55,'2018-09-26','S','Y',NULL),('2018-09-15',2596,55,'2018-09-26','X','Y',NULL),('2018-09-15',2597,55,'2018-09-27','S','Y',NULL),('2018-09-15',2598,55,'2018-09-27','X','Y',NULL),('2018-09-15',2599,55,'2018-09-28','S','Y',NULL),('2018-09-15',2600,55,'2018-09-28','X','Y',NULL),('2018-09-15',2601,55,'2018-09-29','S','Y',NULL),('2018-09-15',2602,55,'2018-09-29','X','Y',NULL),('2018-09-15',2603,56,'2018-09-17','S','Y',NULL),('2018-09-15',2604,56,'2018-09-17','X','Y',NULL),('2018-09-15',2605,56,'2018-09-18','S','Y',NULL),('2018-09-15',2606,56,'2018-09-18','X','Y',NULL),('2018-09-15',2607,56,'2018-09-19','S','Y',NULL),('2018-09-15',2608,56,'2018-09-19','X','Y',NULL),('2018-09-15',2609,56,'2018-09-20','S','Y',NULL),('2018-09-15',2610,56,'2018-09-20','X','Y',NULL),('2018-09-15',2611,56,'2018-09-21','S','Y',NULL),('2018-09-15',2612,56,'2018-09-21','X','Y',NULL),('2018-09-15',2613,56,'2018-09-25','S','Y',NULL),('2018-09-15',2614,56,'2018-09-25','X','Y',NULL),('2018-09-15',2615,56,'2018-09-26','S','Y',NULL),('2018-09-15',2616,56,'2018-09-26','X','Y',NULL),('2018-09-15',2617,56,'2018-09-27','S','Y',NULL),('2018-09-15',2618,56,'2018-09-27','X','Y',NULL),('2018-09-15',2619,56,'2018-09-28','S','Y',NULL),('2018-09-15',2620,56,'2018-09-28','X','Y',NULL),('2018-09-15',2621,56,'2018-09-29','S','Y',NULL),('2018-09-15',2622,56,'2018-09-29','X','Y',NULL),('2018-09-15',2623,57,'2018-09-17','S','Y',NULL),('2018-09-15',2624,57,'2018-09-17','X','Y',NULL),('2018-09-15',2625,57,'2018-09-18','S','Y',NULL),('2018-09-15',2626,57,'2018-09-18','X','Y',NULL),('2018-09-15',2627,57,'2018-09-19','S','Y',NULL),('2018-09-15',2628,57,'2018-09-19','X','Y',NULL),('2018-09-15',2629,57,'2018-09-20','S','Y',NULL),('2018-09-15',2630,57,'2018-09-20','X','Y',NULL),('2018-09-15',2631,57,'2018-09-21','S','Y',NULL),('2018-09-15',2632,57,'2018-09-21','X','Y',NULL),('2018-09-15',2633,57,'2018-09-25','S','Y',NULL),('2018-09-15',2634,57,'2018-09-25','X','Y',NULL),('2018-09-15',2635,57,'2018-09-26','S','Y',NULL),('2018-09-15',2636,57,'2018-09-26','X','Y',NULL),('2018-09-15',2637,57,'2018-09-27','S','Y',NULL),('2018-09-15',2638,57,'2018-09-27','X','Y',NULL),('2018-09-15',2639,57,'2018-09-28','S','Y',NULL),('2018-09-15',2640,57,'2018-09-28','X','Y',NULL),('2018-09-15',2641,57,'2018-09-29','S','Y',NULL),('2018-09-15',2642,57,'2018-09-29','X','Y',NULL),('2018-09-15',2643,58,'2018-09-17','S','Y',NULL),('2018-09-15',2644,58,'2018-09-17','X','Y',NULL),('2018-09-15',2645,58,'2018-09-18','S','Y',NULL),('2018-09-15',2646,58,'2018-09-18','X','Y',NULL),('2018-09-15',2647,58,'2018-09-19','S','Y',NULL),('2018-09-15',2648,58,'2018-09-19','X','Y',NULL),('2018-09-15',2649,58,'2018-09-20','S','Y',NULL),('2018-09-15',2650,58,'2018-09-20','X','Y',NULL),('2018-09-15',2651,58,'2018-09-21','S','Y',NULL),('2018-09-15',2652,58,'2018-09-21','X','Y',NULL),('2018-09-15',2653,58,'2018-09-25','S','Y',NULL),('2018-09-15',2654,58,'2018-09-25','X','Y',NULL),('2018-09-15',2655,58,'2018-09-26','S','Y',NULL),('2018-09-15',2656,58,'2018-09-26','X','Y',NULL),('2018-09-15',2657,58,'2018-09-27','S','Y',NULL),('2018-09-15',2658,58,'2018-09-27','X','Y',NULL),('2018-09-15',2659,58,'2018-09-28','S','Y',NULL),('2018-09-15',2660,58,'2018-09-28','X','Y',NULL),('2018-09-15',2661,58,'2018-09-29','S','Y',NULL),('2018-09-15',2662,58,'2018-09-29','X','Y',NULL),('2018-09-15',2663,59,'2018-09-17','S','Y',NULL),('2018-09-15',2664,59,'2018-09-17','X','Y',NULL),('2018-09-15',2665,59,'2018-09-18','S','Y',NULL),('2018-09-15',2666,59,'2018-09-18','X','Y',NULL),('2018-09-15',2667,59,'2018-09-19','S','Y',NULL),('2018-09-15',2668,59,'2018-09-19','X','Y',NULL),('2018-09-15',2669,59,'2018-09-20','S','Y',NULL),('2018-09-15',2670,59,'2018-09-20','X','Y',NULL),('2018-09-15',2671,59,'2018-09-21','S','Y',NULL),('2018-09-15',2672,59,'2018-09-21','X','Y',NULL),('2018-09-15',2673,59,'2018-09-25','S','Y',NULL),('2018-09-15',2674,59,'2018-09-25','X','Y',NULL),('2018-09-15',2675,59,'2018-09-26','S','Y',NULL),('2018-09-15',2676,59,'2018-09-26','X','Y',NULL),('2018-09-15',2677,59,'2018-09-27','S','Y',NULL),('2018-09-15',2678,59,'2018-09-27','X','Y',NULL),('2018-09-15',2679,59,'2018-09-28','S','Y',NULL),('2018-09-15',2680,59,'2018-09-28','X','Y',NULL),('2018-09-15',2681,59,'2018-09-29','S','Y',NULL),('2018-09-15',2682,59,'2018-09-29','X','Y',NULL),('2018-09-15',2683,60,'2018-09-17','S','Y',NULL),('2018-09-15',2684,60,'2018-09-17','X','Y',NULL),('2018-09-15',2685,60,'2018-09-18','S','Y',NULL),('2018-09-15',2686,60,'2018-09-18','X','Y',NULL),('2018-09-15',2687,60,'2018-09-19','S','Y',NULL),('2018-09-15',2688,60,'2018-09-19','X','Y',NULL),('2018-09-15',2689,60,'2018-09-20','S','Y',NULL),('2018-09-15',2690,60,'2018-09-20','X','Y',NULL),('2018-09-15',2691,60,'2018-09-21','S','Y',NULL),('2018-09-15',2692,60,'2018-09-21','X','Y',NULL),('2018-09-15',2693,60,'2018-09-25','S','Y',NULL),('2018-09-15',2694,60,'2018-09-25','X','Y',NULL),('2018-09-15',2695,60,'2018-09-26','S','Y',NULL),('2018-09-15',2696,60,'2018-09-26','X','Y',NULL),('2018-09-15',2697,60,'2018-09-27','S','Y',NULL),('2018-09-15',2698,60,'2018-09-27','X','Y',NULL),('2018-09-15',2699,60,'2018-09-28','S','Y',NULL),('2018-09-15',2700,60,'2018-09-28','X','Y',NULL),('2018-09-15',2701,60,'2018-09-29','S','Y',NULL),('2018-09-15',2702,60,'2018-09-29','X','Y',NULL),('2018-09-15',2703,61,'2018-09-17','S','Y',NULL),('2018-09-15',2704,61,'2018-09-17','X','Y',NULL),('2018-09-15',2705,61,'2018-09-18','S','Y',NULL),('2018-09-15',2706,61,'2018-09-18','X','Y',NULL),('2018-09-15',2707,61,'2018-09-19','S','Y',NULL),('2018-09-15',2708,61,'2018-09-19','X','Y',NULL),('2018-09-15',2709,61,'2018-09-20','S','Y',NULL),('2018-09-15',2710,61,'2018-09-20','X','Y',NULL),('2018-09-15',2711,61,'2018-09-21','S','Y',NULL),('2018-09-15',2712,61,'2018-09-21','X','Y',NULL),('2018-09-15',2713,61,'2018-09-25','S','Y',NULL),('2018-09-15',2714,61,'2018-09-25','X','Y',NULL),('2018-09-15',2715,61,'2018-09-26','S','Y',NULL),('2018-09-15',2716,61,'2018-09-26','X','Y',NULL),('2018-09-15',2717,61,'2018-09-27','S','Y',NULL),('2018-09-15',2718,61,'2018-09-27','X','Y',NULL),('2018-09-15',2719,61,'2018-09-28','S','Y',NULL),('2018-09-15',2720,61,'2018-09-28','X','Y',NULL),('2018-09-15',2721,61,'2018-09-29','S','Y',NULL),('2018-09-15',2722,61,'2018-09-29','X','Y',NULL),('2018-09-15',2723,62,'2018-09-17','S','Y',NULL),('2018-09-15',2724,62,'2018-09-17','X','Y',NULL),('2018-09-15',2725,62,'2018-09-18','S','Y',NULL),('2018-09-15',2726,62,'2018-09-18','X','Y',NULL),('2018-09-15',2727,62,'2018-09-19','S','Y',NULL),('2018-09-15',2728,62,'2018-09-19','X','Y',NULL),('2018-09-15',2729,62,'2018-09-20','S','Y',NULL),('2018-09-15',2730,62,'2018-09-20','X','Y',NULL),('2018-09-15',2731,62,'2018-09-21','S','Y',NULL),('2018-09-15',2732,62,'2018-09-21','X','Y',NULL),('2018-09-15',2733,62,'2018-09-25','S','Y',NULL),('2018-09-15',2734,62,'2018-09-25','X','Y',NULL),('2018-09-15',2735,62,'2018-09-26','S','Y',NULL),('2018-09-15',2736,62,'2018-09-26','X','Y',NULL),('2018-09-15',2737,62,'2018-09-27','S','Y',NULL),('2018-09-15',2738,62,'2018-09-27','X','Y',NULL),('2018-09-15',2739,62,'2018-09-28','S','Y',NULL),('2018-09-15',2740,62,'2018-09-28','X','Y',NULL),('2018-09-15',2741,62,'2018-09-29','S','Y',NULL),('2018-09-15',2742,62,'2018-09-29','X','Y',NULL),('2018-09-15',2743,63,'2018-09-17','S','Y',NULL),('2018-09-15',2744,63,'2018-09-17','X','Y',NULL),('2018-09-15',2745,63,'2018-09-18','S','Y',NULL),('2018-09-15',2746,63,'2018-09-18','X','Y',NULL),('2018-09-15',2747,63,'2018-09-19','S','Y',NULL),('2018-09-15',2748,63,'2018-09-19','X','Y',NULL),('2018-09-15',2749,63,'2018-09-20','S','Y',NULL),('2018-09-15',2750,63,'2018-09-20','X','Y',NULL),('2018-09-15',2751,63,'2018-09-21','S','Y',NULL),('2018-09-15',2752,63,'2018-09-21','X','Y',NULL),('2018-09-15',2753,63,'2018-09-25','S','Y',NULL),('2018-09-15',2754,63,'2018-09-25','X','Y',NULL),('2018-09-15',2755,63,'2018-09-26','S','Y',NULL),('2018-09-15',2756,63,'2018-09-26','X','Y',NULL),('2018-09-15',2757,63,'2018-09-27','S','Y',NULL),('2018-09-15',2758,63,'2018-09-27','X','Y',NULL),('2018-09-15',2759,63,'2018-09-28','S','Y',NULL),('2018-09-15',2760,63,'2018-09-28','X','Y',NULL),('2018-09-15',2761,63,'2018-09-29','S','Y',NULL),('2018-09-15',2762,63,'2018-09-29','X','Y',NULL),('2018-09-15',2763,64,'2018-09-17','S','Y',NULL),('2018-09-15',2764,64,'2018-09-17','X','Y',NULL),('2018-09-15',2765,64,'2018-09-18','S','Y',NULL),('2018-09-15',2766,64,'2018-09-18','X','Y',NULL),('2018-09-15',2767,64,'2018-09-19','S','Y',NULL),('2018-09-15',2768,64,'2018-09-19','X','Y',NULL),('2018-09-15',2769,64,'2018-09-20','S','Y',NULL),('2018-09-15',2770,64,'2018-09-20','X','Y',NULL),('2018-09-15',2771,64,'2018-09-21','S','Y',NULL),('2018-09-15',2772,64,'2018-09-21','X','Y',NULL),('2018-09-15',2773,64,'2018-09-25','S','Y',NULL),('2018-09-15',2774,64,'2018-09-25','X','Y',NULL),('2018-09-15',2775,64,'2018-09-26','S','Y',NULL),('2018-09-15',2776,64,'2018-09-26','X','Y',NULL),('2018-09-15',2777,64,'2018-09-27','S','Y',NULL),('2018-09-15',2778,64,'2018-09-27','X','Y',NULL),('2018-09-15',2779,64,'2018-09-28','S','Y',NULL),('2018-09-15',2780,64,'2018-09-28','X','Y',NULL),('2018-09-15',2781,64,'2018-09-29','S','Y',NULL),('2018-09-15',2782,64,'2018-09-29','X','Y',NULL),('2018-10-15',2783,65,'2018-10-08','S','Y',NULL),('2018-10-15',2784,65,'2018-10-08','X','Y',NULL),('2018-10-15',2785,65,'2018-10-09','S','Y',NULL),('2018-10-15',2786,65,'2018-10-09','X','Y',NULL),('2018-10-15',2787,65,'2018-10-10','S','Y',NULL),('2018-10-15',2788,65,'2018-10-10','X','Y',NULL),('2018-10-15',2789,65,'2018-10-11','S','Y',NULL),('2018-10-15',2790,65,'2018-10-11','X','Y',NULL),('2018-10-15',2791,65,'2018-10-12','S','Y',NULL),('2018-10-15',2792,65,'2018-10-12','X','Y',NULL),('2018-10-15',2793,65,'2018-10-15','S','Y',NULL),('2018-10-15',2794,65,'2018-10-15','X','Y',NULL),('2018-10-15',2795,66,'2018-10-08','S','Y',NULL),('2018-10-15',2796,66,'2018-10-08','X','Y',NULL),('2018-10-15',2797,66,'2018-10-09','S','Y',NULL),('2018-10-15',2798,66,'2018-10-09','X','Y',NULL),('2018-10-15',2799,66,'2018-10-10','S','Y',NULL),('2018-10-15',2800,66,'2018-10-10','X','Y',NULL),('2018-10-15',2801,66,'2018-10-11','S','Y',NULL),('2018-10-15',2802,66,'2018-10-11','X','Y',NULL),('2018-10-15',2803,66,'2018-10-12','S','Y',NULL),('2018-10-15',2804,66,'2018-10-12','X','Y',NULL),('2018-10-15',2805,66,'2018-10-15','S','Y',NULL),('2018-10-15',2806,66,'2018-10-15','X','Y',NULL),('2018-10-15',2807,67,'2018-10-08','S','Y',NULL),('2018-10-15',2808,67,'2018-10-08','X','Y',NULL),('2018-10-15',2809,67,'2018-10-09','S','Y',NULL),('2018-10-15',2810,67,'2018-10-09','X','Y',NULL),('2018-10-15',2811,67,'2018-10-10','S','Y',NULL),('2018-10-15',2812,67,'2018-10-10','X','Y',NULL),('2018-10-15',2813,67,'2018-10-11','S','Y',NULL),('2018-10-15',2814,67,'2018-10-11','X','Y',NULL),('2018-10-15',2815,67,'2018-10-12','S','Y',NULL),('2018-10-15',2816,67,'2018-10-12','X','Y',NULL),('2018-10-15',2817,67,'2018-10-15','S','Y',NULL),('2018-10-15',2818,67,'2018-10-15','X','Y',NULL),('2018-10-15',2819,68,'2018-10-08','S','Y',NULL),('2018-10-15',2820,68,'2018-10-08','X','Y',NULL),('2018-10-15',2821,68,'2018-10-09','S','Y',NULL),('2018-10-15',2822,68,'2018-10-09','X','Y',NULL),('2018-10-15',2823,68,'2018-10-10','S','Y',NULL),('2018-10-15',2824,68,'2018-10-10','X','Y',NULL),('2018-10-15',2825,68,'2018-10-11','S','Y',NULL),('2018-10-15',2826,68,'2018-10-11','X','Y',NULL),('2018-10-15',2827,68,'2018-10-12','S','Y',NULL),('2018-10-15',2828,68,'2018-10-12','X','Y',NULL),('2018-10-15',2829,68,'2018-10-15','S','Y',NULL),('2018-10-15',2830,68,'2018-10-15','X','Y',NULL),('2018-10-15',2831,69,'2018-10-08','S','Y',NULL),('2018-10-15',2832,69,'2018-10-08','X','Y',NULL),('2018-10-15',2833,69,'2018-10-09','S','Y',NULL),('2018-10-15',2834,69,'2018-10-09','X','Y',NULL),('2018-10-15',2835,69,'2018-10-10','S','Y',NULL),('2018-10-15',2836,69,'2018-10-10','X','Y',NULL),('2018-10-15',2837,69,'2018-10-11','S','Y',NULL),('2018-10-15',2838,69,'2018-10-11','X','Y',NULL),('2018-10-15',2839,69,'2018-10-12','S','Y',NULL),('2018-10-15',2840,69,'2018-10-12','X','Y',NULL),('2018-10-15',2841,69,'2018-10-15','S','Y',NULL),('2018-10-15',2842,69,'2018-10-15','X','Y',NULL),('2018-10-15',2843,70,'2018-10-08','S','Y',NULL),('2018-10-15',2844,70,'2018-10-08','X','Y',NULL),('2018-10-15',2845,70,'2018-10-09','S','Y',NULL),('2018-10-15',2846,70,'2018-10-09','X','Y',NULL),('2018-10-15',2847,70,'2018-10-10','S','Y',NULL),('2018-10-15',2848,70,'2018-10-10','X','Y',NULL),('2018-10-15',2849,70,'2018-10-11','S','Y',NULL),('2018-10-15',2850,70,'2018-10-11','X','Y',NULL),('2018-10-15',2851,70,'2018-10-12','S','Y',NULL),('2018-10-15',2852,70,'2018-10-12','X','Y',NULL),('2018-10-15',2853,70,'2018-10-15','S','Y',NULL),('2018-10-15',2854,70,'2018-10-15','X','Y',NULL),('2018-10-15',2855,71,'2018-10-08','S','Y',NULL),('2018-10-15',2856,71,'2018-10-08','X','Y',NULL),('2018-10-15',2857,71,'2018-10-09','S','Y',NULL),('2018-10-15',2858,71,'2018-10-09','X','Y',NULL),('2018-10-15',2859,71,'2018-10-10','S','Y',NULL),('2018-10-15',2860,71,'2018-10-10','X','Y',NULL),('2018-10-15',2861,71,'2018-10-11','S','Y',NULL),('2018-10-15',2862,71,'2018-10-11','X','Y',NULL),('2018-10-15',2863,71,'2018-10-12','S','Y',NULL),('2018-10-15',2864,71,'2018-10-12','X','Y',NULL),('2018-10-15',2865,71,'2018-10-15','S','Y',NULL),('2018-10-15',2866,71,'2018-10-15','X','Y',NULL),('2018-10-15',2867,72,'2018-10-08','S','Y',NULL),('2018-10-15',2868,72,'2018-10-08','X','Y',NULL),('2018-10-15',2869,72,'2018-10-09','S','Y',NULL),('2018-10-15',2870,72,'2018-10-09','X','Y',NULL),('2018-10-15',2871,72,'2018-10-10','S','Y',NULL),('2018-10-15',2872,72,'2018-10-10','X','Y',NULL),('2018-10-15',2873,72,'2018-10-11','S','Y',NULL),('2018-10-15',2874,72,'2018-10-11','X','Y',NULL),('2018-10-15',2875,72,'2018-10-12','S','Y',NULL),('2018-10-15',2876,72,'2018-10-12','X','Y',NULL),('2018-10-15',2877,72,'2018-10-15','S','Y',NULL),('2018-10-15',2878,72,'2018-10-15','X','Y',NULL),('2018-10-15',2879,73,'2018-10-08','S','Y',NULL),('2018-10-15',2880,73,'2018-10-08','X','Y',NULL),('2018-10-15',2881,73,'2018-10-09','S','Y',NULL),('2018-10-15',2882,73,'2018-10-09','X','Y',NULL),('2018-10-15',2883,73,'2018-10-10','S','Y',NULL),('2018-10-15',2884,73,'2018-10-10','X','Y',NULL),('2018-10-15',2885,73,'2018-10-11','S','Y',NULL),('2018-10-15',2886,73,'2018-10-11','X','Y',NULL),('2018-10-15',2887,73,'2018-10-12','S','Y',NULL),('2018-10-15',2888,73,'2018-10-12','X','Y',NULL),('2018-10-15',2889,73,'2018-10-15','S','Y',NULL),('2018-10-15',2890,73,'2018-10-15','X','Y',NULL),('2018-10-15',2891,74,'2018-10-08','S','Y',NULL),('2018-10-15',2892,74,'2018-10-08','X','Y',NULL),('2018-10-15',2893,74,'2018-10-09','S','Y',NULL),('2018-10-15',2894,74,'2018-10-09','X','Y',NULL),('2018-10-15',2895,74,'2018-10-10','S','Y',NULL),('2018-10-15',2896,74,'2018-10-10','X','Y',NULL),('2018-10-15',2897,74,'2018-10-11','S','Y',NULL),('2018-10-15',2898,74,'2018-10-11','X','Y',NULL),('2018-10-15',2899,74,'2018-10-12','S','Y',NULL),('2018-10-15',2900,74,'2018-10-12','X','Y',NULL),('2018-10-15',2901,74,'2018-10-15','S','Y',NULL),('2018-10-15',2902,74,'2018-10-15','X','Y',NULL),('2018-10-15',2903,75,'2018-10-08','S','Y',NULL),('2018-10-15',2904,75,'2018-10-08','X','Y',NULL),('2018-10-15',2905,75,'2018-10-09','S','Y',NULL),('2018-10-15',2906,75,'2018-10-09','X','Y',NULL),('2018-10-15',2907,75,'2018-10-10','S','Y',NULL),('2018-10-15',2908,75,'2018-10-10','X','Y',NULL),('2018-10-15',2909,75,'2018-10-11','S','Y',NULL),('2018-10-15',2910,75,'2018-10-11','X','Y',NULL),('2018-10-15',2911,75,'2018-10-12','S','Y',NULL),('2018-10-15',2912,75,'2018-10-12','X','Y',NULL),('2018-10-15',2913,75,'2018-10-15','S','Y',NULL),('2018-10-15',2914,75,'2018-10-15','X','Y',NULL),('2018-10-15',2915,76,'2018-10-08','S','Y',NULL),('2018-10-15',2916,76,'2018-10-08','X','Y',NULL),('2018-10-15',2917,76,'2018-10-09','S','Y',NULL),('2018-10-15',2918,76,'2018-10-09','X','Y',NULL),('2018-10-15',2919,76,'2018-10-10','S','Y',NULL),('2018-10-15',2920,76,'2018-10-10','X','Y',NULL),('2018-10-15',2921,76,'2018-10-11','S','Y',NULL),('2018-10-15',2922,76,'2018-10-11','X','Y',NULL),('2018-10-15',2923,76,'2018-10-12','S','Y',NULL),('2018-10-15',2924,76,'2018-10-12','X','Y',NULL),('2018-10-15',2925,76,'2018-10-15','S','Y',NULL),('2018-10-15',2926,76,'2018-10-15','X','Y',NULL),('2018-10-15',2927,77,'2018-10-08','S','Y',NULL),('2018-10-15',2928,77,'2018-10-08','X','Y',NULL),('2018-10-15',2929,77,'2018-10-09','S','Y',NULL),('2018-10-15',2930,77,'2018-10-09','X','Y',NULL),('2018-10-15',2931,77,'2018-10-10','S','Y',NULL),('2018-10-15',2932,77,'2018-10-10','X','Y',NULL),('2018-10-15',2933,77,'2018-10-11','S','Y',NULL),('2018-10-15',2934,77,'2018-10-11','X','Y',NULL),('2018-10-15',2935,77,'2018-10-12','S','Y',NULL),('2018-10-15',2936,77,'2018-10-12','X','Y',NULL),('2018-10-15',2937,77,'2018-10-15','S','Y',NULL),('2018-10-15',2938,77,'2018-10-15','X','Y',NULL),('2018-10-15',2939,78,'2018-10-08','S','Y',NULL),('2018-10-15',2940,78,'2018-10-08','X','Y',NULL),('2018-10-15',2941,78,'2018-10-09','S','Y',NULL),('2018-10-15',2942,78,'2018-10-09','X','Y',NULL),('2018-10-15',2943,78,'2018-10-10','S','Y',NULL),('2018-10-15',2944,78,'2018-10-10','X','Y',NULL),('2018-10-15',2945,78,'2018-10-11','S','Y',NULL),('2018-10-15',2946,78,'2018-10-11','X','Y',NULL),('2018-10-15',2947,78,'2018-10-12','S','Y',NULL),('2018-10-15',2948,78,'2018-10-12','X','Y',NULL),('2018-10-15',2949,78,'2018-10-15','S','Y',NULL),('2018-10-15',2950,78,'2018-10-15','X','Y',NULL),('2018-10-15',2951,79,'2018-10-08','S','Y',NULL),('2018-10-15',2952,79,'2018-10-08','X','Y',NULL),('2018-10-15',2953,79,'2018-10-09','S','Y',NULL),('2018-10-15',2954,79,'2018-10-09','X','Y',NULL),('2018-10-15',2955,79,'2018-10-10','S','Y',NULL),('2018-10-15',2956,79,'2018-10-10','X','Y',NULL),('2018-10-15',2957,79,'2018-10-11','S','Y',NULL),('2018-10-15',2958,79,'2018-10-11','X','Y',NULL),('2018-10-15',2959,79,'2018-10-12','S','Y',NULL),('2018-10-15',2960,79,'2018-10-12','X','Y',NULL),('2018-10-15',2961,79,'2018-10-15','S','Y',NULL),('2018-10-15',2962,79,'2018-10-15','X','Y',NULL),('2018-10-15',2963,80,'2018-10-08','S','Y',NULL),('2018-10-15',2964,80,'2018-10-08','X','Y',NULL),('2018-10-15',2965,80,'2018-10-09','S','Y',NULL),('2018-10-15',2966,80,'2018-10-09','X','Y',NULL),('2018-10-15',2967,80,'2018-10-10','S','Y',NULL),('2018-10-15',2968,80,'2018-10-10','X','Y',NULL),('2018-10-15',2969,80,'2018-10-11','S','Y',NULL),('2018-10-15',2970,80,'2018-10-11','X','Y',NULL),('2018-10-15',2971,80,'2018-10-12','S','Y',NULL),('2018-10-15',2972,80,'2018-10-12','X','Y',NULL),('2018-10-15',2973,80,'2018-10-15','S','Y',NULL),('2018-10-15',2974,80,'2018-10-15','X','Y',NULL),('2018-10-15',2975,81,'2018-10-08','S','Y',NULL),('2018-10-15',2976,81,'2018-10-08','X','Y',NULL),('2018-10-15',2977,81,'2018-10-09','S','Y',NULL),('2018-10-15',2978,81,'2018-10-09','X','Y',NULL),('2018-10-15',2979,81,'2018-10-10','S','Y',NULL),('2018-10-15',2980,81,'2018-10-10','X','Y',NULL),('2018-10-15',2981,81,'2018-10-11','S','Y',NULL),('2018-10-15',2982,81,'2018-10-11','X','Y',NULL),('2018-10-15',2983,81,'2018-10-12','S','Y',NULL),('2018-10-15',2984,81,'2018-10-12','X','Y',NULL),('2018-10-15',2985,81,'2018-10-15','S','Y',NULL),('2018-10-15',2986,81,'2018-10-15','X','Y',NULL),('2018-10-15',2987,65,'2018-10-16','S','Y',NULL),('2018-10-15',2988,65,'2018-10-16','X','Y',NULL),('2018-10-15',2989,66,'2018-10-16','S','Y',NULL),('2018-10-15',2990,66,'2018-10-16','X','Y',NULL),('2018-10-15',2991,67,'2018-10-16','S','Y',NULL),('2018-10-15',2992,67,'2018-10-16','X','Y',NULL),('2018-10-15',2993,68,'2018-10-16','S','Y',NULL),('2018-10-15',2994,68,'2018-10-16','X','Y',NULL),('2018-10-15',2995,69,'2018-10-16','S','Y',NULL),('2018-10-15',2996,69,'2018-10-16','X','Y',NULL),('2018-10-15',2997,70,'2018-10-16','S','Y',NULL),('2018-10-15',2998,70,'2018-10-16','X','Y',NULL),('2018-10-15',2999,71,'2018-10-16','S','Y',NULL),('2018-10-15',3000,71,'2018-10-16','X','Y',NULL),('2018-10-15',3001,72,'2018-10-16','S','Y',NULL),('2018-10-15',3002,72,'2018-10-16','X','Y',NULL),('2018-10-15',3003,73,'2018-10-16','S','Y',NULL),('2018-10-15',3004,73,'2018-10-16','X','Y',NULL),('2018-10-15',3005,74,'2018-10-16','S','Y',NULL),('2018-10-15',3006,74,'2018-10-16','X','Y',NULL),('2018-10-15',3007,75,'2018-10-16','S','Y',NULL),('2018-10-15',3008,75,'2018-10-16','X','Y',NULL),('2018-10-15',3009,76,'2018-10-16','S','Y',NULL),('2018-10-15',3010,76,'2018-10-16','X','Y',NULL),('2018-10-15',3011,77,'2018-10-16','S','Y',NULL),('2018-10-15',3012,77,'2018-10-16','X','Y',NULL),('2018-10-15',3013,78,'2018-10-16','S','Y',NULL),('2018-10-15',3014,78,'2018-10-16','X','Y',NULL),('2018-10-15',3015,79,'2018-10-16','S','Y',NULL),('2018-10-15',3016,79,'2018-10-16','X','Y',NULL),('2018-10-15',3017,80,'2018-10-16','S','Y',NULL),('2018-10-15',3018,80,'2018-10-16','X','Y',NULL),('2018-10-15',3019,81,'2018-10-16','S','Y',NULL),('2018-10-15',3020,81,'2018-10-16','X','Y',NULL),('2018-10-15',3021,65,'2018-10-17','S','Y',NULL),('2018-10-15',3022,65,'2018-10-17','X','Y',NULL),('2018-10-15',3023,66,'2018-10-17','S','Y',NULL),('2018-10-15',3024,66,'2018-10-17','X','Y',NULL),('2018-10-15',3025,67,'2018-10-17','S','Y',NULL),('2018-10-15',3026,67,'2018-10-17','X','Y',NULL),('2018-10-15',3027,68,'2018-10-17','S','Y',NULL),('2018-10-15',3028,68,'2018-10-17','X','Y',NULL),('2018-10-15',3029,69,'2018-10-17','S','Y',NULL),('2018-10-15',3030,69,'2018-10-17','X','Y',NULL),('2018-10-15',3031,70,'2018-10-17','S','Y',NULL),('2018-10-15',3032,70,'2018-10-17','X','Y',NULL),('2018-10-15',3033,71,'2018-10-17','S','Y',NULL),('2018-10-15',3034,71,'2018-10-17','X','Y',NULL),('2018-10-15',3035,72,'2018-10-17','S','Y',NULL),('2018-10-15',3036,72,'2018-10-17','X','Y',NULL),('2018-10-15',3037,73,'2018-10-17','S','Y',NULL),('2018-10-15',3038,73,'2018-10-17','X','Y',NULL),('2018-10-15',3039,74,'2018-10-17','S','Y',NULL),('2018-10-15',3040,74,'2018-10-17','X','Y',NULL),('2018-10-15',3041,75,'2018-10-17','S','Y',NULL),('2018-10-15',3042,75,'2018-10-17','X','Y',NULL),('2018-10-15',3043,76,'2018-10-17','S','Y',NULL),('2018-10-15',3044,76,'2018-10-17','X','Y',NULL),('2018-10-15',3045,77,'2018-10-17','S','Y',NULL),('2018-10-15',3046,77,'2018-10-17','X','Y',NULL),('2018-10-15',3047,78,'2018-10-17','S','Y',NULL),('2018-10-15',3048,78,'2018-10-17','X','Y',NULL),('2018-10-15',3049,79,'2018-10-17','S','Y',NULL),('2018-10-15',3050,79,'2018-10-17','X','Y',NULL),('2018-10-15',3051,80,'2018-10-17','S','Y',NULL),('2018-10-15',3052,80,'2018-10-17','X','Y',NULL),('2018-10-15',3053,81,'2018-10-17','S','Y',NULL),('2018-10-15',3054,81,'2018-10-17','X','Y',NULL),('2018-10-15',3055,65,'2018-10-18','S','Y',NULL),('2018-10-15',3056,65,'2018-10-18','X','Y',NULL),('2018-10-15',3057,65,'2018-10-19','S','Y',NULL),('2018-10-15',3058,65,'2018-10-19','X','Y',NULL),('2018-10-15',3059,65,'2018-10-22','S','Y',NULL),('2018-10-15',3060,65,'2018-10-22','X','Y',NULL),('2018-10-15',3061,65,'2018-10-23','S','Y',NULL),('2018-10-15',3062,65,'2018-10-23','X','Y',NULL),('2018-10-15',3063,65,'2018-10-24','S','Y',NULL),('2018-10-15',3064,65,'2018-10-24','X','Y',NULL),('2018-10-15',3065,65,'2018-10-25','S','Y',NULL),('2018-10-15',3066,65,'2018-10-25','X','Y',NULL),('2018-10-15',3067,65,'2018-10-26','S','Y',NULL),('2018-10-15',3068,65,'2018-10-26','X','Y',NULL),('2018-10-15',3069,66,'2018-10-18','S','Y',NULL),('2018-10-15',3070,66,'2018-10-18','X','Y',NULL),('2018-10-15',3071,66,'2018-10-19','S','Y',NULL),('2018-10-15',3072,66,'2018-10-19','X','Y',NULL),('2018-10-15',3073,66,'2018-10-22','S','Y',NULL),('2018-10-15',3074,66,'2018-10-22','X','Y',NULL),('2018-10-15',3075,66,'2018-10-23','S','Y',NULL),('2018-10-15',3076,66,'2018-10-23','X','Y',NULL),('2018-10-15',3077,66,'2018-10-24','S','Y',NULL),('2018-10-15',3078,66,'2018-10-24','X','Y',NULL),('2018-10-15',3079,66,'2018-10-25','S','Y',NULL),('2018-10-15',3080,66,'2018-10-25','X','Y',NULL),('2018-10-15',3081,66,'2018-10-26','S','Y',NULL),('2018-10-15',3082,66,'2018-10-26','X','Y',NULL),('2018-10-15',3083,67,'2018-10-18','S','Y',NULL),('2018-10-15',3084,67,'2018-10-18','X','Y',NULL),('2018-10-15',3085,67,'2018-10-19','S','Y',NULL),('2018-10-15',3086,67,'2018-10-19','X','Y',NULL),('2018-10-15',3087,67,'2018-10-22','S','Y',NULL),('2018-10-15',3088,67,'2018-10-22','X','Y',NULL),('2018-10-15',3089,67,'2018-10-23','S','Y',NULL),('2018-10-15',3090,67,'2018-10-23','X','Y',NULL),('2018-10-15',3091,67,'2018-10-24','S','Y',NULL),('2018-10-15',3092,67,'2018-10-24','X','Y',NULL),('2018-10-15',3093,67,'2018-10-25','S','Y',NULL),('2018-10-15',3094,67,'2018-10-25','X','Y',NULL),('2018-10-15',3095,67,'2018-10-26','S','Y',NULL),('2018-10-15',3096,67,'2018-10-26','X','Y',NULL),('2018-10-15',3097,68,'2018-10-18','S','Y',NULL),('2018-10-15',3098,68,'2018-10-18','X','Y',NULL),('2018-10-15',3099,68,'2018-10-19','S','Y',NULL),('2018-10-15',3100,68,'2018-10-19','X','Y',NULL),('2018-10-15',3101,68,'2018-10-22','S','Y',NULL),('2018-10-15',3102,68,'2018-10-22','X','Y',NULL),('2018-10-15',3103,68,'2018-10-23','S','Y',NULL),('2018-10-15',3104,68,'2018-10-23','X','Y',NULL),('2018-10-15',3105,68,'2018-10-24','S','Y',NULL),('2018-10-15',3106,68,'2018-10-24','X','Y',NULL),('2018-10-15',3107,68,'2018-10-25','S','Y',NULL),('2018-10-15',3108,68,'2018-10-25','X','Y',NULL),('2018-10-15',3109,68,'2018-10-26','S','Y',NULL),('2018-10-15',3110,68,'2018-10-26','X','Y',NULL),('2018-10-15',3111,69,'2018-10-18','S','Y',NULL),('2018-10-15',3112,69,'2018-10-18','X','Y',NULL),('2018-10-15',3113,69,'2018-10-19','S','Y',NULL),('2018-10-15',3114,69,'2018-10-19','X','Y',NULL),('2018-10-15',3115,69,'2018-10-22','S','Y',NULL),('2018-10-15',3116,69,'2018-10-22','X','Y',NULL),('2018-10-15',3117,69,'2018-10-23','S','Y',NULL),('2018-10-15',3118,69,'2018-10-23','X','Y',NULL),('2018-10-15',3119,69,'2018-10-24','S','Y',NULL),('2018-10-15',3120,69,'2018-10-24','X','Y',NULL),('2018-10-15',3121,69,'2018-10-25','S','Y',NULL),('2018-10-15',3122,69,'2018-10-25','X','Y',NULL),('2018-10-15',3123,69,'2018-10-26','S','Y',NULL),('2018-10-15',3124,69,'2018-10-26','X','Y',NULL),('2018-10-15',3125,70,'2018-10-18','S','Y',NULL),('2018-10-15',3126,70,'2018-10-18','X','Y',NULL),('2018-10-15',3127,70,'2018-10-19','S','Y',NULL),('2018-10-15',3128,70,'2018-10-19','X','Y',NULL),('2018-10-15',3129,70,'2018-10-22','S','Y',NULL),('2018-10-15',3130,70,'2018-10-22','X','Y',NULL),('2018-10-15',3131,70,'2018-10-23','S','Y',NULL),('2018-10-15',3132,70,'2018-10-23','X','Y',NULL),('2018-10-15',3133,70,'2018-10-24','S','Y',NULL),('2018-10-15',3134,70,'2018-10-24','X','Y',NULL),('2018-10-15',3135,70,'2018-10-25','S','Y',NULL),('2018-10-15',3136,70,'2018-10-25','X','Y',NULL),('2018-10-15',3137,70,'2018-10-26','S','Y',NULL),('2018-10-15',3138,70,'2018-10-26','X','Y',NULL),('2018-10-15',3139,71,'2018-10-18','S','Y',NULL),('2018-10-15',3140,71,'2018-10-18','X','Y',NULL),('2018-10-15',3141,71,'2018-10-19','S','Y',NULL),('2018-10-15',3142,71,'2018-10-19','X','Y',NULL),('2018-10-15',3143,71,'2018-10-22','S','Y',NULL),('2018-10-15',3144,71,'2018-10-22','X','Y',NULL),('2018-10-15',3145,71,'2018-10-23','S','Y',NULL),('2018-10-15',3146,71,'2018-10-23','X','Y',NULL),('2018-10-15',3147,71,'2018-10-24','S','Y',NULL),('2018-10-15',3148,71,'2018-10-24','X','Y',NULL),('2018-10-15',3149,71,'2018-10-25','S','Y',NULL),('2018-10-15',3150,71,'2018-10-25','X','Y',NULL),('2018-10-15',3151,71,'2018-10-26','S','Y',NULL),('2018-10-15',3152,71,'2018-10-26','X','Y',NULL),('2018-10-15',3153,72,'2018-10-18','S','Y',NULL),('2018-10-15',3154,72,'2018-10-18','X','Y',NULL),('2018-10-15',3155,72,'2018-10-19','S','Y',NULL),('2018-10-15',3156,72,'2018-10-19','X','Y',NULL),('2018-10-15',3157,72,'2018-10-22','S','Y',NULL),('2018-10-15',3158,72,'2018-10-22','X','Y',NULL),('2018-10-15',3159,72,'2018-10-23','S','Y',NULL),('2018-10-15',3160,72,'2018-10-23','X','Y',NULL),('2018-10-15',3161,72,'2018-10-24','S','Y',NULL),('2018-10-15',3162,72,'2018-10-24','X','Y',NULL),('2018-10-15',3163,72,'2018-10-25','S','Y',NULL),('2018-10-15',3164,72,'2018-10-25','X','Y',NULL),('2018-10-15',3165,72,'2018-10-26','S','Y',NULL),('2018-10-15',3166,72,'2018-10-26','X','Y',NULL),('2018-10-15',3167,73,'2018-10-18','S','Y',NULL),('2018-10-15',3168,73,'2018-10-18','X','Y',NULL),('2018-10-15',3169,73,'2018-10-19','S','Y',NULL),('2018-10-15',3170,73,'2018-10-19','X','Y',NULL),('2018-10-15',3171,73,'2018-10-22','S','Y',NULL),('2018-10-15',3172,73,'2018-10-22','X','Y',NULL),('2018-10-15',3173,73,'2018-10-23','S','Y',NULL),('2018-10-15',3174,73,'2018-10-23','X','Y',NULL),('2018-10-15',3175,73,'2018-10-24','S','Y',NULL),('2018-10-15',3176,73,'2018-10-24','X','Y',NULL),('2018-10-15',3177,73,'2018-10-25','S','Y',NULL),('2018-10-15',3178,73,'2018-10-25','X','Y',NULL),('2018-10-15',3179,73,'2018-10-26','S','Y',NULL),('2018-10-15',3180,73,'2018-10-26','X','Y',NULL),('2018-10-15',3181,74,'2018-10-18','S','Y',NULL),('2018-10-15',3182,74,'2018-10-18','X','Y',NULL),('2018-10-15',3183,74,'2018-10-19','S','Y',NULL),('2018-10-15',3184,74,'2018-10-19','X','Y',NULL),('2018-10-15',3185,74,'2018-10-22','S','Y',NULL),('2018-10-15',3186,74,'2018-10-22','X','Y',NULL),('2018-10-15',3187,74,'2018-10-23','S','Y',NULL),('2018-10-15',3188,74,'2018-10-23','X','Y',NULL),('2018-10-15',3189,74,'2018-10-24','S','Y',NULL),('2018-10-15',3190,74,'2018-10-24','X','Y',NULL),('2018-10-15',3191,74,'2018-10-25','S','Y',NULL),('2018-10-15',3192,74,'2018-10-25','X','Y',NULL),('2018-10-15',3193,74,'2018-10-26','S','Y',NULL),('2018-10-15',3194,74,'2018-10-26','X','Y',NULL),('2018-10-15',3195,75,'2018-10-18','S','Y',NULL),('2018-10-15',3196,75,'2018-10-18','X','Y',NULL),('2018-10-15',3197,75,'2018-10-19','S','Y',NULL),('2018-10-15',3198,75,'2018-10-19','X','Y',NULL),('2018-10-15',3199,75,'2018-10-22','S','Y',NULL),('2018-10-15',3200,75,'2018-10-22','X','Y',NULL),('2018-10-15',3201,75,'2018-10-23','S','Y',NULL),('2018-10-15',3202,75,'2018-10-23','X','Y',NULL),('2018-10-15',3203,75,'2018-10-24','S','Y',NULL),('2018-10-15',3204,75,'2018-10-24','X','Y',NULL),('2018-10-15',3205,75,'2018-10-25','S','Y',NULL),('2018-10-15',3206,75,'2018-10-25','X','Y',NULL),('2018-10-15',3207,75,'2018-10-26','S','Y',NULL),('2018-10-15',3208,75,'2018-10-26','X','Y',NULL),('2018-10-15',3209,76,'2018-10-18','S','Y',NULL),('2018-10-15',3210,76,'2018-10-18','X','Y',NULL),('2018-10-15',3211,76,'2018-10-19','S','Y',NULL),('2018-10-15',3212,76,'2018-10-19','X','Y',NULL),('2018-10-15',3213,76,'2018-10-22','S','Y',NULL),('2018-10-15',3214,76,'2018-10-22','X','Y',NULL),('2018-10-15',3215,76,'2018-10-23','S','Y',NULL),('2018-10-15',3216,76,'2018-10-23','X','Y',NULL),('2018-10-15',3217,76,'2018-10-24','S','Y',NULL),('2018-10-15',3218,76,'2018-10-24','X','Y',NULL),('2018-10-15',3219,76,'2018-10-25','S','Y',NULL),('2018-10-15',3220,76,'2018-10-25','X','Y',NULL),('2018-10-15',3221,76,'2018-10-26','S','Y',NULL),('2018-10-15',3222,76,'2018-10-26','X','Y',NULL),('2018-10-15',3223,77,'2018-10-18','S','Y',NULL),('2018-10-15',3224,77,'2018-10-18','X','Y',NULL),('2018-10-15',3225,77,'2018-10-19','S','Y',NULL),('2018-10-15',3226,77,'2018-10-19','X','Y',NULL),('2018-10-15',3227,77,'2018-10-22','S','Y',NULL),('2018-10-15',3228,77,'2018-10-22','X','Y',NULL),('2018-10-15',3229,77,'2018-10-23','S','Y',NULL),('2018-10-15',3230,77,'2018-10-23','X','Y',NULL),('2018-10-15',3231,77,'2018-10-24','S','Y',NULL),('2018-10-15',3232,77,'2018-10-24','X','Y',NULL),('2018-10-15',3233,77,'2018-10-25','S','Y',NULL),('2018-10-15',3234,77,'2018-10-25','X','Y',NULL),('2018-10-15',3235,77,'2018-10-26','S','Y',NULL),('2018-10-15',3236,77,'2018-10-26','X','Y',NULL),('2018-10-15',3237,78,'2018-10-18','S','Y',NULL),('2018-10-15',3238,78,'2018-10-18','X','Y',NULL),('2018-10-15',3239,78,'2018-10-19','S','Y',NULL),('2018-10-15',3240,78,'2018-10-19','X','Y',NULL),('2018-10-15',3241,78,'2018-10-22','S','Y',NULL),('2018-10-15',3242,78,'2018-10-22','X','Y',NULL),('2018-10-15',3243,78,'2018-10-23','S','Y',NULL),('2018-10-15',3244,78,'2018-10-23','X','Y',NULL),('2018-10-15',3245,78,'2018-10-24','S','Y',NULL),('2018-10-15',3246,78,'2018-10-24','X','Y',NULL),('2018-10-15',3247,78,'2018-10-25','S','Y',NULL),('2018-10-15',3248,78,'2018-10-25','X','Y',NULL),('2018-10-15',3249,78,'2018-10-26','S','Y',NULL),('2018-10-15',3250,78,'2018-10-26','X','Y',NULL),('2018-10-15',3251,79,'2018-10-18','S','Y',NULL),('2018-10-15',3252,79,'2018-10-18','X','Y',NULL),('2018-10-15',3253,79,'2018-10-19','S','Y',NULL),('2018-10-15',3254,79,'2018-10-19','X','Y',NULL),('2018-10-15',3255,79,'2018-10-22','S','Y',NULL),('2018-10-15',3256,79,'2018-10-22','X','Y',NULL),('2018-10-15',3257,79,'2018-10-23','S','Y',NULL),('2018-10-15',3258,79,'2018-10-23','X','Y',NULL),('2018-10-15',3259,79,'2018-10-24','S','Y',NULL),('2018-10-15',3260,79,'2018-10-24','X','Y',NULL),('2018-10-15',3261,79,'2018-10-25','S','Y',NULL),('2018-10-15',3262,79,'2018-10-25','X','Y',NULL),('2018-10-15',3263,79,'2018-10-26','S','Y',NULL),('2018-10-15',3264,79,'2018-10-26','X','Y',NULL),('2018-10-15',3265,80,'2018-10-18','S','Y',NULL),('2018-10-15',3266,80,'2018-10-18','X','Y',NULL),('2018-10-15',3267,80,'2018-10-19','S','Y',NULL),('2018-10-15',3268,80,'2018-10-19','X','Y',NULL),('2018-10-15',3269,80,'2018-10-22','S','Y',NULL),('2018-10-15',3270,80,'2018-10-22','X','Y',NULL),('2018-10-15',3271,80,'2018-10-23','S','Y',NULL),('2018-10-15',3272,80,'2018-10-23','X','Y',NULL),('2018-10-15',3273,80,'2018-10-24','S','Y',NULL),('2018-10-15',3274,80,'2018-10-24','X','Y',NULL),('2018-10-15',3275,80,'2018-10-25','S','Y',NULL),('2018-10-15',3276,80,'2018-10-25','X','Y',NULL),('2018-10-15',3277,80,'2018-10-26','S','Y',NULL),('2018-10-15',3278,80,'2018-10-26','X','Y',NULL),('2018-10-15',3279,81,'2018-10-18','S','Y',NULL),('2018-10-15',3280,81,'2018-10-18','X','Y',NULL),('2018-10-15',3281,81,'2018-10-19','S','Y',NULL),('2018-10-15',3282,81,'2018-10-19','X','Y',NULL),('2018-10-15',3283,81,'2018-10-22','S','Y',NULL),('2018-10-15',3284,81,'2018-10-22','X','Y',NULL),('2018-10-15',3285,81,'2018-10-23','S','Y',NULL),('2018-10-15',3286,81,'2018-10-23','X','Y',NULL),('2018-10-15',3287,81,'2018-10-24','S','Y',NULL),('2018-10-15',3288,81,'2018-10-24','X','Y',NULL),('2018-10-15',3289,81,'2018-10-25','S','Y',NULL),('2018-10-15',3290,81,'2018-10-25','X','Y',NULL),('2018-10-15',3291,81,'2018-10-26','S','Y',NULL),('2018-10-15',3292,81,'2018-10-26','X','Y',NULL),('2018-11-02',3293,82,'2018-11-01','S','Y',NULL),('2018-11-02',3294,82,'2018-11-01','X','Y',NULL),('2018-11-02',3295,82,'2018-11-02','S','Y',NULL),('2018-11-02',3296,82,'2018-11-02','X','Y',NULL),('2018-11-02',3297,83,'2018-11-01','S','Y',NULL),('2018-11-02',3298,83,'2018-11-01','X','Y',NULL),('2018-11-02',3299,83,'2018-11-02','S','Y',NULL),('2018-11-02',3300,83,'2018-11-02','X','Y',NULL),('2018-11-02',3301,84,'2018-11-01','S','Y',NULL),('2018-11-02',3302,84,'2018-11-01','X','Y',NULL),('2018-11-02',3303,84,'2018-11-02','S','Y',NULL),('2018-11-02',3304,84,'2018-11-02','X','Y',NULL),('2018-11-02',3305,85,'2018-11-01','S','Y',NULL),('2018-11-02',3306,85,'2018-11-01','X','Y',NULL),('2018-11-02',3307,85,'2018-11-02','S','Y',NULL),('2018-11-02',3308,85,'2018-11-02','X','Y',NULL),('2018-11-02',3309,86,'2018-11-01','S','Y',NULL),('2018-11-02',3310,86,'2018-11-01','X','Y',NULL),('2018-11-02',3311,86,'2018-11-02','S','Y',NULL),('2018-11-02',3312,86,'2018-11-02','X','Y',NULL),('2018-11-02',3313,87,'2018-11-01','S','Y',NULL),('2018-11-02',3314,87,'2018-11-01','X','Y',NULL),('2018-11-02',3315,87,'2018-11-02','S','Y',NULL),('2018-11-02',3316,87,'2018-11-02','X','Y',NULL),('2018-11-02',3317,88,'2018-11-01','S','Y',NULL),('2018-11-02',3318,88,'2018-11-01','X','Y',NULL),('2018-11-02',3319,88,'2018-11-02','S','Y',NULL),('2018-11-02',3320,88,'2018-11-02','X','Y',NULL),('2018-11-02',3321,89,'2018-11-01','S','Y',NULL),('2018-11-02',3322,89,'2018-11-01','X','Y',NULL),('2018-11-02',3323,89,'2018-11-02','S','Y',NULL),('2018-11-02',3324,89,'2018-11-02','X','Y',NULL),('2018-11-02',3325,90,'2018-11-01','S','Y',NULL),('2018-11-02',3326,90,'2018-11-01','X','Y',NULL),('2018-11-02',3327,90,'2018-11-02','S','Y',NULL),('2018-11-02',3328,90,'2018-11-02','X','Y',NULL),('2018-11-02',3329,91,'2018-11-01','S','Y',NULL),('2018-11-02',3330,91,'2018-11-01','X','Y',NULL),('2018-11-02',3331,91,'2018-11-02','S','Y',NULL),('2018-11-02',3332,91,'2018-11-02','X','Y',NULL),('2018-11-02',3333,92,'2018-11-01','S','Y',NULL),('2018-11-02',3334,92,'2018-11-01','X','Y',NULL),('2018-11-02',3335,92,'2018-11-02','S','Y',NULL),('2018-11-02',3336,92,'2018-11-02','X','Y',NULL),('2018-11-02',3337,93,'2018-11-01','S','Y',NULL),('2018-11-02',3338,93,'2018-11-01','X','Y',NULL),('2018-11-02',3339,93,'2018-11-02','S','Y',NULL),('2018-11-02',3340,93,'2018-11-02','X','Y',NULL),('2018-11-02',3341,94,'2018-11-01','S','Y',NULL),('2018-11-02',3342,94,'2018-11-01','X','Y',NULL),('2018-11-02',3343,94,'2018-11-02','S','Y',NULL),('2018-11-02',3344,94,'2018-11-02','X','Y',NULL),('2018-11-02',3345,95,'2018-11-01','S','Y',NULL),('2018-11-02',3346,95,'2018-11-01','X','Y',NULL),('2018-11-02',3347,95,'2018-11-02','S','Y',NULL),('2018-11-02',3348,95,'2018-11-02','X','Y',NULL),('2018-11-02',3349,96,'2018-11-01','S','Y',NULL),('2018-11-02',3350,96,'2018-11-01','X','Y',NULL),('2018-11-02',3351,96,'2018-11-02','S','Y',NULL),('2018-11-02',3352,96,'2018-11-02','X','Y',NULL),('2018-11-02',3353,97,'2018-11-01','S','Y',NULL),('2018-11-02',3354,97,'2018-11-01','X','Y',NULL),('2018-11-02',3355,97,'2018-11-02','S','Y',NULL),('2018-11-02',3356,97,'2018-11-02','X','Y',NULL),('2018-11-02',3357,98,'2018-11-01','S','Y',NULL),('2018-11-02',3358,98,'2018-11-01','X','Y',NULL),('2018-11-02',3359,98,'2018-11-02','S','Y',NULL),('2018-11-02',3360,98,'2018-11-02','X','Y',NULL),('2018-12-07',3361,99,'2018-12-03','S','Y',NULL),('2018-12-07',3362,99,'2018-12-03','X','Y',NULL),('2018-12-07',3363,99,'2018-12-04','S','Y',NULL),('2018-12-07',3364,99,'2018-12-04','X','Y',NULL),('2018-12-07',3365,99,'2018-12-05','S','Y',NULL),('2018-12-07',3366,99,'2018-12-05','X','Y',NULL),('2018-12-07',3367,99,'2018-12-06','S','Y',NULL),('2018-12-07',3368,99,'2018-12-06','X','Y',NULL),('2018-12-07',3369,99,'2018-12-07','S','Y',NULL),('2018-12-07',3370,99,'2018-12-07','X','Y',NULL),('2018-12-07',3371,100,'2018-12-03','S','Y',NULL),('2018-12-07',3372,100,'2018-12-03','X','Y',NULL),('2018-12-07',3373,100,'2018-12-04','S','Y',NULL),('2018-12-07',3374,100,'2018-12-04','X','Y',NULL),('2018-12-07',3375,100,'2018-12-05','S','Y',NULL),('2018-12-07',3376,100,'2018-12-05','X','Y',NULL),('2018-12-07',3377,100,'2018-12-06','S','Y',NULL),('2018-12-07',3378,100,'2018-12-06','X','Y',NULL),('2018-12-07',3379,100,'2018-12-07','S','Y',NULL),('2018-12-07',3380,100,'2018-12-07','X','Y',NULL),('2018-12-07',3381,101,'2018-12-03','S','Y',NULL),('2018-12-07',3382,101,'2018-12-03','X','Y',NULL),('2018-12-07',3383,101,'2018-12-04','S','Y',NULL),('2018-12-07',3384,101,'2018-12-04','X','Y',NULL),('2018-12-07',3385,101,'2018-12-05','S','Y',NULL),('2018-12-07',3386,101,'2018-12-05','X','Y',NULL),('2018-12-07',3387,101,'2018-12-06','S','Y',NULL),('2018-12-07',3388,101,'2018-12-06','X','Y',NULL),('2018-12-07',3389,101,'2018-12-07','S','Y',NULL),('2018-12-07',3390,101,'2018-12-07','X','Y',NULL),('2018-12-07',3391,102,'2018-12-03','S','Y',NULL),('2018-12-07',3392,102,'2018-12-03','X','Y',NULL),('2018-12-07',3393,102,'2018-12-04','S','Y',NULL),('2018-12-07',3394,102,'2018-12-04','X','Y',NULL),('2018-12-07',3395,102,'2018-12-05','S','Y',NULL),('2018-12-07',3396,102,'2018-12-05','X','Y',NULL),('2018-12-07',3397,102,'2018-12-06','S','Y',NULL),('2018-12-07',3398,102,'2018-12-06','X','Y',NULL),('2018-12-07',3399,102,'2018-12-07','S','Y',NULL),('2018-12-07',3400,102,'2018-12-07','X','Y',NULL),('2018-12-07',3401,103,'2018-12-03','S','Y',NULL),('2018-12-07',3402,103,'2018-12-03','X','Y',NULL),('2018-12-07',3403,103,'2018-12-04','S','Y',NULL),('2018-12-07',3404,103,'2018-12-04','X','Y',NULL),('2018-12-07',3405,103,'2018-12-05','S','Y',NULL),('2018-12-07',3406,103,'2018-12-05','X','Y',NULL),('2018-12-07',3407,103,'2018-12-06','S','Y',NULL),('2018-12-07',3408,103,'2018-12-06','X','Y',NULL),('2018-12-07',3409,103,'2018-12-07','S','Y',NULL),('2018-12-07',3410,103,'2018-12-07','X','Y',NULL),('2018-12-07',3411,104,'2018-12-03','S','Y',NULL),('2018-12-07',3412,104,'2018-12-03','X','Y',NULL),('2018-12-07',3413,104,'2018-12-04','S','Y',NULL),('2018-12-07',3414,104,'2018-12-04','X','Y',NULL),('2018-12-07',3415,104,'2018-12-05','S','Y',NULL),('2018-12-07',3416,104,'2018-12-05','X','Y',NULL),('2018-12-07',3417,104,'2018-12-06','S','Y',NULL),('2018-12-07',3418,104,'2018-12-06','X','Y',NULL),('2018-12-07',3419,104,'2018-12-07','S','Y',NULL),('2018-12-07',3420,104,'2018-12-07','X','Y',NULL),('2018-12-07',3421,105,'2018-12-03','S','Y',NULL),('2018-12-07',3422,105,'2018-12-03','X','Y',NULL),('2018-12-07',3423,105,'2018-12-04','S','Y',NULL),('2018-12-07',3424,105,'2018-12-04','X','Y',NULL),('2018-12-07',3425,105,'2018-12-05','S','Y',NULL),('2018-12-07',3426,105,'2018-12-05','X','Y',NULL),('2018-12-07',3427,105,'2018-12-06','S','Y',NULL),('2018-12-07',3428,105,'2018-12-06','X','Y',NULL),('2018-12-07',3429,105,'2018-12-07','S','Y',NULL),('2018-12-07',3430,105,'2018-12-07','X','Y',NULL),('2018-12-07',3431,106,'2018-12-03','S','Y',NULL),('2018-12-07',3432,106,'2018-12-03','X','Y',NULL),('2018-12-07',3433,106,'2018-12-04','S','Y',NULL),('2018-12-07',3434,106,'2018-12-04','X','Y',NULL),('2018-12-07',3435,106,'2018-12-05','S','Y',NULL),('2018-12-07',3436,106,'2018-12-05','X','Y',NULL),('2018-12-07',3437,106,'2018-12-06','S','Y',NULL),('2018-12-07',3438,106,'2018-12-06','X','Y',NULL),('2018-12-07',3439,106,'2018-12-07','S','Y',NULL),('2018-12-07',3440,106,'2018-12-07','X','Y',NULL),('2018-12-07',3441,107,'2018-12-03','S','Y',NULL),('2018-12-07',3442,107,'2018-12-03','X','Y',NULL),('2018-12-07',3443,107,'2018-12-04','S','Y',NULL),('2018-12-07',3444,107,'2018-12-04','X','Y',NULL),('2018-12-07',3445,107,'2018-12-05','S','Y',NULL),('2018-12-07',3446,107,'2018-12-05','X','Y',NULL),('2018-12-07',3447,107,'2018-12-06','S','Y',NULL),('2018-12-07',3448,107,'2018-12-06','X','Y',NULL),('2018-12-07',3449,107,'2018-12-07','S','Y',NULL),('2018-12-07',3450,107,'2018-12-07','X','Y',NULL),('2018-12-07',3451,108,'2018-12-03','S','Y',NULL),('2018-12-07',3452,108,'2018-12-03','X','Y',NULL),('2018-12-07',3453,108,'2018-12-04','S','Y',NULL),('2018-12-07',3454,108,'2018-12-04','X','Y',NULL),('2018-12-07',3455,108,'2018-12-05','S','Y',NULL),('2018-12-07',3456,108,'2018-12-05','X','Y',NULL),('2018-12-07',3457,108,'2018-12-06','S','Y',NULL),('2018-12-07',3458,108,'2018-12-06','X','Y',NULL),('2018-12-07',3459,108,'2018-12-07','S','Y',NULL),('2018-12-07',3460,108,'2018-12-07','X','Y',NULL),('2018-12-07',3461,109,'2018-12-03','S','Y',NULL),('2018-12-07',3462,109,'2018-12-03','X','Y',NULL),('2018-12-07',3463,109,'2018-12-04','S','Y',NULL),('2018-12-07',3464,109,'2018-12-04','X','Y',NULL),('2018-12-07',3465,109,'2018-12-05','S','Y',NULL),('2018-12-07',3466,109,'2018-12-05','X','Y',NULL),('2018-12-07',3467,109,'2018-12-06','S','Y',NULL),('2018-12-07',3468,109,'2018-12-06','X','Y',NULL),('2018-12-07',3469,109,'2018-12-07','S','Y',NULL),('2018-12-07',3470,109,'2018-12-07','X','Y',NULL),('2018-12-07',3471,110,'2018-12-03','S','Y',NULL),('2018-12-07',3472,110,'2018-12-03','X','Y',NULL),('2018-12-07',3473,110,'2018-12-04','S','Y',NULL),('2018-12-07',3474,110,'2018-12-04','X','Y',NULL),('2018-12-07',3475,110,'2018-12-05','S','Y',NULL),('2018-12-07',3476,110,'2018-12-05','X','Y',NULL),('2018-12-07',3477,110,'2018-12-06','S','Y',NULL),('2018-12-07',3478,110,'2018-12-06','X','Y',NULL),('2018-12-07',3479,110,'2018-12-07','S','Y',NULL),('2018-12-07',3480,110,'2018-12-07','X','Y',NULL),('2018-12-07',3481,111,'2018-12-03','S','Y',NULL),('2018-12-07',3482,111,'2018-12-03','X','Y',NULL),('2018-12-07',3483,111,'2018-12-04','S','Y',NULL),('2018-12-07',3484,111,'2018-12-04','X','Y',NULL),('2018-12-07',3485,111,'2018-12-05','S','Y',NULL),('2018-12-07',3486,111,'2018-12-05','X','Y',NULL),('2018-12-07',3487,111,'2018-12-06','S','Y',NULL),('2018-12-07',3488,111,'2018-12-06','X','Y',NULL),('2018-12-07',3489,111,'2018-12-07','S','Y',NULL),('2018-12-07',3490,111,'2018-12-07','X','Y',NULL),('2018-12-07',3491,112,'2018-12-03','S','Y',NULL),('2018-12-07',3492,112,'2018-12-03','X','Y',NULL),('2018-12-07',3493,112,'2018-12-04','S','Y',NULL),('2018-12-07',3494,112,'2018-12-04','X','Y',NULL),('2018-12-07',3495,112,'2018-12-05','S','Y',NULL),('2018-12-07',3496,112,'2018-12-05','X','Y',NULL),('2018-12-07',3497,112,'2018-12-06','S','Y',NULL),('2018-12-07',3498,112,'2018-12-06','X','Y',NULL),('2018-12-07',3499,112,'2018-12-07','S','Y',NULL),('2018-12-07',3500,112,'2018-12-07','X','Y',NULL),('2018-12-07',3501,113,'2018-12-03','S','Y',NULL),('2018-12-07',3502,113,'2018-12-03','X','Y',NULL),('2018-12-07',3503,113,'2018-12-04','S','Y',NULL),('2018-12-07',3504,113,'2018-12-04','X','Y',NULL),('2018-12-07',3505,113,'2018-12-05','S','Y',NULL),('2018-12-07',3506,113,'2018-12-05','X','Y',NULL),('2018-12-07',3507,113,'2018-12-06','S','Y',NULL),('2018-12-07',3508,113,'2018-12-06','X','Y',NULL),('2018-12-07',3509,113,'2018-12-07','S','Y',NULL),('2018-12-07',3510,113,'2018-12-07','X','Y',NULL),('2018-12-07',3511,114,'2018-12-03','S','Y',NULL),('2018-12-07',3512,114,'2018-12-03','X','Y',NULL),('2018-12-07',3513,114,'2018-12-04','S','Y',NULL),('2018-12-07',3514,114,'2018-12-04','X','Y',NULL),('2018-12-07',3515,114,'2018-12-05','S','Y',NULL),('2018-12-07',3516,114,'2018-12-05','X','Y',NULL),('2018-12-07',3517,114,'2018-12-06','S','Y',NULL),('2018-12-07',3518,114,'2018-12-06','X','Y',NULL),('2018-12-07',3519,114,'2018-12-07','S','Y',NULL),('2018-12-07',3520,114,'2018-12-07','X','Y',NULL),('2018-12-07',3521,115,'2018-12-03','S','Y',NULL),('2018-12-07',3522,115,'2018-12-03','X','Y',NULL),('2018-12-07',3523,115,'2018-12-04','S','Y',NULL),('2018-12-07',3524,115,'2018-12-04','X','Y',NULL),('2018-12-07',3525,115,'2018-12-05','S','Y',NULL),('2018-12-07',3526,115,'2018-12-05','X','Y',NULL),('2018-12-07',3527,115,'2018-12-06','S','Y',NULL),('2018-12-07',3528,115,'2018-12-06','X','Y',NULL),('2018-12-07',3529,115,'2018-12-07','S','Y',NULL),('2018-12-07',3530,115,'2018-12-07','X','Y',NULL),('2018-12-07',3531,99,'2018-12-10','S','Y',NULL),('2018-12-07',3532,99,'2018-12-10','X','Y',NULL),('2018-12-07',3533,100,'2018-12-10','S','Y',NULL),('2018-12-07',3534,100,'2018-12-10','X','Y',NULL),('2018-12-07',3535,101,'2018-12-10','S','Y',NULL),('2018-12-07',3536,101,'2018-12-10','X','Y',NULL),('2018-12-07',3537,102,'2018-12-10','S','Y',NULL),('2018-12-07',3538,102,'2018-12-10','X','Y',NULL),('2018-12-07',3539,103,'2018-12-10','S','Y',NULL),('2018-12-07',3540,103,'2018-12-10','X','Y',NULL),('2018-12-07',3541,104,'2018-12-10','S','Y',NULL),('2018-12-07',3542,104,'2018-12-10','X','Y',NULL),('2018-12-07',3543,105,'2018-12-10','S','Y',NULL),('2018-12-07',3544,105,'2018-12-10','X','Y',NULL),('2018-12-07',3545,106,'2018-12-10','S','Y',NULL),('2018-12-07',3546,106,'2018-12-10','X','Y',NULL),('2018-12-07',3547,107,'2018-12-10','S','Y',NULL),('2018-12-07',3548,107,'2018-12-10','X','Y',NULL),('2018-12-07',3549,108,'2018-12-10','S','Y',NULL),('2018-12-07',3550,108,'2018-12-10','X','Y',NULL),('2018-12-07',3551,109,'2018-12-10','S','Y',NULL),('2018-12-07',3552,109,'2018-12-10','X','Y',NULL),('2018-12-07',3553,110,'2018-12-10','S','Y',NULL),('2018-12-07',3554,110,'2018-12-10','X','Y',NULL),('2018-12-07',3555,111,'2018-12-10','S','Y',NULL),('2018-12-07',3556,111,'2018-12-10','X','Y',NULL),('2018-12-07',3557,112,'2018-12-10','S','Y',NULL),('2018-12-07',3558,112,'2018-12-10','X','Y',NULL),('2018-12-07',3559,113,'2018-12-10','S','Y',NULL),('2018-12-07',3560,113,'2018-12-10','X','Y',NULL),('2018-12-07',3561,114,'2018-12-10','S','Y',NULL),('2018-12-07',3562,114,'2018-12-10','X','Y',NULL),('2018-12-07',3563,115,'2018-12-10','S','Y',NULL),('2018-12-07',3564,115,'2018-12-10','X','Y',NULL),('2019-04-01',3565,116,'2019-04-01','S','Y',NULL),('2019-04-01',3566,116,'2019-04-01','X','Y',NULL),('2019-04-01',3567,117,'2019-04-01','S','Y',NULL),('2019-04-01',3568,117,'2019-04-01','X','Y',NULL),('2019-04-01',3569,118,'2019-04-01','S','Y',NULL),('2019-04-01',3570,118,'2019-04-01','X','Y',NULL),('2019-04-01',3571,119,'2019-04-01','S','Y',NULL),('2019-04-01',3572,119,'2019-04-01','X','Y',NULL),('2019-04-01',3573,120,'2019-04-01','S','Y',NULL),('2019-04-01',3574,120,'2019-04-01','X','Y',NULL),('2019-04-01',3575,121,'2019-04-01','S','Y',NULL),('2019-04-01',3576,121,'2019-04-01','X','Y',NULL),('2019-04-01',3577,122,'2019-04-01','S','Y',NULL),('2019-04-01',3578,122,'2019-04-01','X','Y',NULL),('2019-04-01',3579,123,'2019-04-01','S','Y',NULL),('2019-04-01',3580,123,'2019-04-01','X','Y',NULL),('2019-04-01',3581,124,'2019-04-01','S','Y',NULL),('2019-04-01',3582,124,'2019-04-01','X','Y',NULL),('2019-04-01',3583,125,'2019-04-01','S','Y',NULL),('2019-04-01',3584,125,'2019-04-01','X','Y',NULL),('2019-04-01',3585,126,'2019-04-01','S','Y',NULL),('2019-04-01',3586,126,'2019-04-01','X','Y',NULL),('2019-04-01',3587,127,'2019-04-01','S','Y',NULL),('2019-04-01',3588,127,'2019-04-01','X','Y',NULL),('2019-04-01',3589,128,'2019-04-01','S','Y',NULL),('2019-04-01',3590,128,'2019-04-01','X','Y',NULL),('2019-04-01',3591,129,'2019-04-01','S','Y',NULL),('2019-04-01',3592,129,'2019-04-01','X','Y',NULL),('2019-04-01',3593,130,'2019-04-01','S','Y',NULL),('2019-04-01',3594,130,'2019-04-01','X','Y',NULL),('2019-04-01',3595,131,'2019-04-01','S','Y',NULL),('2019-04-01',3596,131,'2019-04-01','X','Y',NULL),('2019-04-01',3597,132,'2019-04-01','S','Y',NULL),('2019-04-01',3598,132,'2019-04-01','X','Y',NULL),('2019-04-01',3599,133,'2019-04-01','S','Y',NULL),('2019-04-01',3600,133,'2019-04-01','X','Y',NULL),('2019-04-01',3601,134,'2019-04-01','S','Y',NULL),('2019-04-01',3602,134,'2019-04-01','X','Y',NULL),('2019-04-01',3603,116,'2019-04-02','S','Y',NULL),('2019-04-01',3604,116,'2019-04-02','X','Y',NULL),('2019-04-01',3605,116,'2019-04-03','S','Y',NULL),('2019-04-01',3606,116,'2019-04-03','X','Y',NULL),('2019-04-01',3607,116,'2019-04-04','S','Y',NULL),('2019-04-01',3608,116,'2019-04-04','X','Y',NULL),('2019-04-01',3609,116,'2019-04-05','S','Y',NULL),('2019-04-01',3610,116,'2019-04-05','X','Y',NULL),('2019-04-01',3611,116,'2019-04-06','S','Y',NULL),('2019-04-01',3612,116,'2019-04-06','X','Y',NULL),('2019-04-01',3613,116,'2019-04-07','S','Y',NULL),('2019-04-01',3614,116,'2019-04-07','X','Y',NULL),('2019-04-01',3615,116,'2019-04-08','S','Y',NULL),('2019-04-01',3616,116,'2019-04-08','X','Y',NULL),('2019-04-01',3617,116,'2019-04-09','S','Y',NULL),('2019-04-01',3618,116,'2019-04-09','X','Y',NULL),('2019-04-01',3619,116,'2019-04-10','S','Y',NULL),('2019-04-01',3620,116,'2019-04-10','X','Y',NULL),('2019-04-01',3621,116,'2019-04-11','S','Y',NULL),('2019-04-01',3622,116,'2019-04-11','X','Y',NULL),('2019-04-01',3623,116,'2019-04-12','S','Y',NULL),('2019-04-01',3624,116,'2019-04-12','X','Y',NULL),('2019-04-01',3625,117,'2019-04-02','S','Y',NULL),('2019-04-01',3626,117,'2019-04-02','X','Y',NULL),('2019-04-01',3627,117,'2019-04-03','S','Y',NULL),('2019-04-01',3628,117,'2019-04-03','X','Y',NULL),('2019-04-01',3629,117,'2019-04-04','S','Y',NULL),('2019-04-01',3630,117,'2019-04-04','X','Y',NULL),('2019-04-01',3631,117,'2019-04-05','S','Y',NULL),('2019-04-01',3632,117,'2019-04-05','X','Y',NULL),('2019-04-01',3633,117,'2019-04-06','S','Y',NULL),('2019-04-01',3634,117,'2019-04-06','X','Y',NULL),('2019-04-01',3635,117,'2019-04-07','S','Y',NULL),('2019-04-01',3636,117,'2019-04-07','X','Y',NULL),('2019-04-01',3637,117,'2019-04-08','S','Y',NULL),('2019-04-01',3638,117,'2019-04-08','X','Y',NULL),('2019-04-01',3639,117,'2019-04-09','S','Y',NULL),('2019-04-01',3640,117,'2019-04-09','X','Y',NULL),('2019-04-01',3641,117,'2019-04-10','S','Y',NULL),('2019-04-01',3642,117,'2019-04-10','X','Y',NULL),('2019-04-01',3643,117,'2019-04-11','S','Y',NULL),('2019-04-01',3644,117,'2019-04-11','X','Y',NULL),('2019-04-01',3645,117,'2019-04-12','S','Y',NULL),('2019-04-01',3646,117,'2019-04-12','X','Y',NULL),('2019-04-01',3647,118,'2019-04-02','S','Y',NULL),('2019-04-01',3648,118,'2019-04-02','X','Y',NULL),('2019-04-01',3649,118,'2019-04-03','S','Y',NULL),('2019-04-01',3650,118,'2019-04-03','X','Y',NULL),('2019-04-01',3651,118,'2019-04-04','S','Y',NULL),('2019-04-01',3652,118,'2019-04-04','X','Y',NULL),('2019-04-01',3653,118,'2019-04-05','S','Y',NULL),('2019-04-01',3654,118,'2019-04-05','X','Y',NULL),('2019-04-01',3655,118,'2019-04-06','S','Y',NULL),('2019-04-01',3656,118,'2019-04-06','X','Y',NULL),('2019-04-01',3657,118,'2019-04-07','S','Y',NULL),('2019-04-01',3658,118,'2019-04-07','X','Y',NULL),('2019-04-01',3659,118,'2019-04-08','S','Y',NULL),('2019-04-01',3660,118,'2019-04-08','X','Y',NULL),('2019-04-01',3661,118,'2019-04-09','S','Y',NULL),('2019-04-01',3662,118,'2019-04-09','X','Y',NULL),('2019-04-01',3663,118,'2019-04-10','S','Y',NULL),('2019-04-01',3664,118,'2019-04-10','X','Y',NULL),('2019-04-01',3665,118,'2019-04-11','S','Y',NULL),('2019-04-01',3666,118,'2019-04-11','X','Y',NULL),('2019-04-01',3667,118,'2019-04-12','S','Y',NULL),('2019-04-01',3668,118,'2019-04-12','X','Y',NULL),('2019-04-01',3669,119,'2019-04-02','S','Y',NULL),('2019-04-01',3670,119,'2019-04-02','X','Y',NULL),('2019-04-01',3671,119,'2019-04-03','S','Y',NULL),('2019-04-01',3672,119,'2019-04-03','X','Y',NULL),('2019-04-01',3673,119,'2019-04-04','S','Y',NULL),('2019-04-01',3674,119,'2019-04-04','X','Y',NULL),('2019-04-01',3675,119,'2019-04-05','S','Y',NULL),('2019-04-01',3676,119,'2019-04-05','X','Y',NULL),('2019-04-01',3677,119,'2019-04-06','S','Y',NULL),('2019-04-01',3678,119,'2019-04-06','X','Y',NULL),('2019-04-01',3679,119,'2019-04-07','S','Y',NULL),('2019-04-01',3680,119,'2019-04-07','X','Y',NULL),('2019-04-01',3681,119,'2019-04-08','S','Y',NULL),('2019-04-01',3682,119,'2019-04-08','X','Y',NULL),('2019-04-01',3683,119,'2019-04-09','S','Y',NULL),('2019-04-01',3684,119,'2019-04-09','X','Y',NULL),('2019-04-01',3685,119,'2019-04-10','S','Y',NULL),('2019-04-01',3686,119,'2019-04-10','X','Y',NULL),('2019-04-01',3687,119,'2019-04-11','S','Y',NULL),('2019-04-01',3688,119,'2019-04-11','X','Y',NULL),('2019-04-01',3689,119,'2019-04-12','S','Y',NULL),('2019-04-01',3690,119,'2019-04-12','X','Y',NULL),('2019-04-01',3691,120,'2019-04-02','S','Y',NULL),('2019-04-01',3692,120,'2019-04-02','X','Y',NULL),('2019-04-01',3693,120,'2019-04-03','S','Y',NULL),('2019-04-01',3694,120,'2019-04-03','X','Y',NULL),('2019-04-01',3695,120,'2019-04-04','S','Y',NULL),('2019-04-01',3696,120,'2019-04-04','X','Y',NULL),('2019-04-01',3697,120,'2019-04-05','S','Y',NULL),('2019-04-01',3698,120,'2019-04-05','X','Y',NULL),('2019-04-01',3699,120,'2019-04-06','S','Y',NULL),('2019-04-01',3700,120,'2019-04-06','X','Y',NULL),('2019-04-01',3701,120,'2019-04-07','S','Y',NULL),('2019-04-01',3702,120,'2019-04-07','X','Y',NULL),('2019-04-01',3703,120,'2019-04-08','S','Y',NULL),('2019-04-01',3704,120,'2019-04-08','X','Y',NULL),('2019-04-01',3705,120,'2019-04-09','S','Y',NULL),('2019-04-01',3706,120,'2019-04-09','X','Y',NULL),('2019-04-01',3707,120,'2019-04-10','S','Y',NULL),('2019-04-01',3708,120,'2019-04-10','X','Y',NULL),('2019-04-01',3709,120,'2019-04-11','S','Y',NULL),('2019-04-01',3710,120,'2019-04-11','X','Y',NULL),('2019-04-01',3711,120,'2019-04-12','S','Y',NULL),('2019-04-01',3712,120,'2019-04-12','X','Y',NULL),('2019-04-01',3713,121,'2019-04-02','S','Y',NULL),('2019-04-01',3714,121,'2019-04-02','X','Y',NULL),('2019-04-01',3715,121,'2019-04-03','S','Y',NULL),('2019-04-01',3716,121,'2019-04-03','X','Y',NULL),('2019-04-01',3717,121,'2019-04-04','S','Y',NULL),('2019-04-01',3718,121,'2019-04-04','X','Y',NULL),('2019-04-01',3719,121,'2019-04-05','S','Y',NULL),('2019-04-01',3720,121,'2019-04-05','X','Y',NULL),('2019-04-01',3721,121,'2019-04-06','S','Y',NULL),('2019-04-01',3722,121,'2019-04-06','X','Y',NULL),('2019-04-01',3723,121,'2019-04-07','S','Y',NULL),('2019-04-01',3724,121,'2019-04-07','X','Y',NULL),('2019-04-01',3725,121,'2019-04-08','S','Y',NULL),('2019-04-01',3726,121,'2019-04-08','X','Y',NULL),('2019-04-01',3727,121,'2019-04-09','S','Y',NULL),('2019-04-01',3728,121,'2019-04-09','X','Y',NULL),('2019-04-01',3729,121,'2019-04-10','S','Y',NULL),('2019-04-01',3730,121,'2019-04-10','X','Y',NULL),('2019-04-01',3731,121,'2019-04-11','S','Y',NULL),('2019-04-01',3732,121,'2019-04-11','X','Y',NULL),('2019-04-01',3733,121,'2019-04-12','S','Y',NULL),('2019-04-01',3734,121,'2019-04-12','X','Y',NULL),('2019-04-01',3735,122,'2019-04-02','S','Y',NULL),('2019-04-01',3736,122,'2019-04-02','X','Y',NULL),('2019-04-01',3737,122,'2019-04-03','S','Y',NULL),('2019-04-01',3738,122,'2019-04-03','X','Y',NULL),('2019-04-01',3739,122,'2019-04-04','S','Y',NULL),('2019-04-01',3740,122,'2019-04-04','X','Y',NULL),('2019-04-01',3741,122,'2019-04-05','S','Y',NULL),('2019-04-01',3742,122,'2019-04-05','X','Y',NULL),('2019-04-01',3743,122,'2019-04-06','S','Y',NULL),('2019-04-01',3744,122,'2019-04-06','X','Y',NULL),('2019-04-01',3745,122,'2019-04-07','S','Y',NULL),('2019-04-01',3746,122,'2019-04-07','X','Y',NULL),('2019-04-01',3747,122,'2019-04-08','S','Y',NULL),('2019-04-01',3748,122,'2019-04-08','X','Y',NULL),('2019-04-01',3749,122,'2019-04-09','S','Y',NULL),('2019-04-01',3750,122,'2019-04-09','X','Y',NULL),('2019-04-01',3751,122,'2019-04-10','S','Y',NULL),('2019-04-01',3752,122,'2019-04-10','X','Y',NULL),('2019-04-01',3753,122,'2019-04-11','S','Y',NULL),('2019-04-01',3754,122,'2019-04-11','X','Y',NULL),('2019-04-01',3755,122,'2019-04-12','S','Y',NULL),('2019-04-01',3756,122,'2019-04-12','X','Y',NULL),('2019-04-01',3757,123,'2019-04-02','S','Y',NULL),('2019-04-01',3758,123,'2019-04-02','X','Y',NULL),('2019-04-01',3759,123,'2019-04-03','S','Y',NULL),('2019-04-01',3760,123,'2019-04-03','X','Y',NULL),('2019-04-01',3761,123,'2019-04-04','S','Y',NULL),('2019-04-01',3762,123,'2019-04-04','X','Y',NULL),('2019-04-01',3763,123,'2019-04-05','S','Y',NULL),('2019-04-01',3764,123,'2019-04-05','X','Y',NULL),('2019-04-01',3765,123,'2019-04-06','S','Y',NULL),('2019-04-01',3766,123,'2019-04-06','X','Y',NULL),('2019-04-01',3767,123,'2019-04-07','S','Y',NULL),('2019-04-01',3768,123,'2019-04-07','X','Y',NULL),('2019-04-01',3769,123,'2019-04-08','S','Y',NULL),('2019-04-01',3770,123,'2019-04-08','X','Y',NULL),('2019-04-01',3771,123,'2019-04-09','S','Y',NULL),('2019-04-01',3772,123,'2019-04-09','X','Y',NULL),('2019-04-01',3773,123,'2019-04-10','S','Y',NULL),('2019-04-01',3774,123,'2019-04-10','X','Y',NULL),('2019-04-01',3775,123,'2019-04-11','S','Y',NULL),('2019-04-01',3776,123,'2019-04-11','X','Y',NULL),('2019-04-01',3777,123,'2019-04-12','S','Y',NULL),('2019-04-01',3778,123,'2019-04-12','X','Y',NULL),('2019-04-01',3779,124,'2019-04-02','S','Y',NULL),('2019-04-01',3780,124,'2019-04-02','X','Y',NULL),('2019-04-01',3781,124,'2019-04-03','S','Y',NULL),('2019-04-01',3782,124,'2019-04-03','X','Y',NULL),('2019-04-01',3783,124,'2019-04-04','S','Y',NULL),('2019-04-01',3784,124,'2019-04-04','X','Y',NULL),('2019-04-01',3785,124,'2019-04-05','S','Y',NULL),('2019-04-01',3786,124,'2019-04-05','X','Y',NULL),('2019-04-01',3787,124,'2019-04-06','S','Y',NULL),('2019-04-01',3788,124,'2019-04-06','X','Y',NULL),('2019-04-01',3789,124,'2019-04-07','S','Y',NULL),('2019-04-01',3790,124,'2019-04-07','X','Y',NULL),('2019-04-01',3791,124,'2019-04-08','S','Y',NULL),('2019-04-01',3792,124,'2019-04-08','X','Y',NULL),('2019-04-01',3793,124,'2019-04-09','S','Y',NULL),('2019-04-01',3794,124,'2019-04-09','X','Y',NULL),('2019-04-01',3795,124,'2019-04-10','S','Y',NULL),('2019-04-01',3796,124,'2019-04-10','X','Y',NULL),('2019-04-01',3797,124,'2019-04-11','S','Y',NULL),('2019-04-01',3798,124,'2019-04-11','X','Y',NULL),('2019-04-01',3799,124,'2019-04-12','S','Y',NULL),('2019-04-01',3800,124,'2019-04-12','X','Y',NULL),('2019-04-01',3801,125,'2019-04-02','S','Y',NULL),('2019-04-01',3802,125,'2019-04-02','X','Y',NULL),('2019-04-01',3803,125,'2019-04-03','S','Y',NULL),('2019-04-01',3804,125,'2019-04-03','X','Y',NULL),('2019-04-01',3805,125,'2019-04-04','S','Y',NULL),('2019-04-01',3806,125,'2019-04-04','X','Y',NULL),('2019-04-01',3807,125,'2019-04-05','S','Y',NULL),('2019-04-01',3808,125,'2019-04-05','X','Y',NULL),('2019-04-01',3809,125,'2019-04-06','S','Y',NULL),('2019-04-01',3810,125,'2019-04-06','X','Y',NULL),('2019-04-01',3811,125,'2019-04-07','S','Y',NULL),('2019-04-01',3812,125,'2019-04-07','X','Y',NULL),('2019-04-01',3813,125,'2019-04-08','S','Y',NULL),('2019-04-01',3814,125,'2019-04-08','X','Y',NULL),('2019-04-01',3815,125,'2019-04-09','S','Y',NULL),('2019-04-01',3816,125,'2019-04-09','X','Y',NULL),('2019-04-01',3817,125,'2019-04-10','S','Y',NULL),('2019-04-01',3818,125,'2019-04-10','X','Y',NULL),('2019-04-01',3819,125,'2019-04-11','S','Y',NULL),('2019-04-01',3820,125,'2019-04-11','X','Y',NULL),('2019-04-01',3821,125,'2019-04-12','S','Y',NULL),('2019-04-01',3822,125,'2019-04-12','X','Y',NULL),('2019-04-01',3823,126,'2019-04-02','S','Y',NULL),('2019-04-01',3824,126,'2019-04-02','X','Y',NULL),('2019-04-01',3825,126,'2019-04-03','S','Y',NULL),('2019-04-01',3826,126,'2019-04-03','X','Y',NULL),('2019-04-01',3827,126,'2019-04-04','S','Y',NULL),('2019-04-01',3828,126,'2019-04-04','X','Y',NULL),('2019-04-01',3829,126,'2019-04-05','S','Y',NULL),('2019-04-01',3830,126,'2019-04-05','X','Y',NULL),('2019-04-01',3831,126,'2019-04-06','S','Y',NULL),('2019-04-01',3832,126,'2019-04-06','X','Y',NULL),('2019-04-01',3833,126,'2019-04-07','S','Y',NULL),('2019-04-01',3834,126,'2019-04-07','X','Y',NULL),('2019-04-01',3835,126,'2019-04-08','S','Y',NULL),('2019-04-01',3836,126,'2019-04-08','X','Y',NULL),('2019-04-01',3837,126,'2019-04-09','S','Y',NULL),('2019-04-01',3838,126,'2019-04-09','X','Y',NULL),('2019-04-01',3839,126,'2019-04-10','S','Y',NULL),('2019-04-01',3840,126,'2019-04-10','X','Y',NULL),('2019-04-01',3841,126,'2019-04-11','S','Y',NULL),('2019-04-01',3842,126,'2019-04-11','X','Y',NULL),('2019-04-01',3843,126,'2019-04-12','S','Y',NULL),('2019-04-01',3844,126,'2019-04-12','X','Y',NULL),('2019-04-01',3845,127,'2019-04-02','S','Y',NULL),('2019-04-01',3846,127,'2019-04-02','X','Y',NULL),('2019-04-01',3847,127,'2019-04-03','S','Y',NULL),('2019-04-01',3848,127,'2019-04-03','X','Y',NULL),('2019-04-01',3849,127,'2019-04-04','S','Y',NULL),('2019-04-01',3850,127,'2019-04-04','X','Y',NULL),('2019-04-01',3851,127,'2019-04-05','S','Y',NULL),('2019-04-01',3852,127,'2019-04-05','X','Y',NULL),('2019-04-01',3853,127,'2019-04-06','S','Y',NULL),('2019-04-01',3854,127,'2019-04-06','X','Y',NULL),('2019-04-01',3855,127,'2019-04-07','S','Y',NULL),('2019-04-01',3856,127,'2019-04-07','X','Y',NULL),('2019-04-01',3857,127,'2019-04-08','S','Y',NULL),('2019-04-01',3858,127,'2019-04-08','X','Y',NULL),('2019-04-01',3859,127,'2019-04-09','S','Y',NULL),('2019-04-01',3860,127,'2019-04-09','X','Y',NULL),('2019-04-01',3861,127,'2019-04-10','S','Y',NULL),('2019-04-01',3862,127,'2019-04-10','X','Y',NULL),('2019-04-01',3863,127,'2019-04-11','S','Y',NULL),('2019-04-01',3864,127,'2019-04-11','X','Y',NULL),('2019-04-01',3865,127,'2019-04-12','S','Y',NULL),('2019-04-01',3866,127,'2019-04-12','X','Y',NULL),('2019-04-01',3867,128,'2019-04-02','S','Y',NULL),('2019-04-01',3868,128,'2019-04-02','X','Y',NULL),('2019-04-01',3869,128,'2019-04-03','S','Y',NULL),('2019-04-01',3870,128,'2019-04-03','X','Y',NULL),('2019-04-01',3871,128,'2019-04-04','S','Y',NULL),('2019-04-01',3872,128,'2019-04-04','X','Y',NULL),('2019-04-01',3873,128,'2019-04-05','S','Y',NULL),('2019-04-01',3874,128,'2019-04-05','X','Y',NULL),('2019-04-01',3875,128,'2019-04-06','S','Y',NULL),('2019-04-01',3876,128,'2019-04-06','X','Y',NULL),('2019-04-01',3877,128,'2019-04-07','S','Y',NULL),('2019-04-01',3878,128,'2019-04-07','X','Y',NULL),('2019-04-01',3879,128,'2019-04-08','S','Y',NULL),('2019-04-01',3880,128,'2019-04-08','X','Y',NULL),('2019-04-01',3881,128,'2019-04-09','S','Y',NULL),('2019-04-01',3882,128,'2019-04-09','X','Y',NULL),('2019-04-01',3883,128,'2019-04-10','S','Y',NULL),('2019-04-01',3884,128,'2019-04-10','X','Y',NULL),('2019-04-01',3885,128,'2019-04-11','S','Y',NULL),('2019-04-01',3886,128,'2019-04-11','X','Y',NULL),('2019-04-01',3887,128,'2019-04-12','S','Y',NULL),('2019-04-01',3888,128,'2019-04-12','X','Y',NULL),('2019-04-01',3889,129,'2019-04-02','S','Y',NULL),('2019-04-01',3890,129,'2019-04-02','X','Y',NULL),('2019-04-01',3891,129,'2019-04-03','S','Y',NULL),('2019-04-01',3892,129,'2019-04-03','X','Y',NULL),('2019-04-01',3893,129,'2019-04-04','S','Y',NULL),('2019-04-01',3894,129,'2019-04-04','X','Y',NULL),('2019-04-01',3895,129,'2019-04-05','S','Y',NULL),('2019-04-01',3896,129,'2019-04-05','X','Y',NULL),('2019-04-01',3897,129,'2019-04-06','S','Y',NULL),('2019-04-01',3898,129,'2019-04-06','X','Y',NULL),('2019-04-01',3899,129,'2019-04-07','S','Y',NULL),('2019-04-01',3900,129,'2019-04-07','X','Y',NULL),('2019-04-01',3901,129,'2019-04-08','S','Y',NULL),('2019-04-01',3902,129,'2019-04-08','X','Y',NULL),('2019-04-01',3903,129,'2019-04-09','S','Y',NULL),('2019-04-01',3904,129,'2019-04-09','X','Y',NULL),('2019-04-01',3905,129,'2019-04-10','S','Y',NULL),('2019-04-01',3906,129,'2019-04-10','X','Y',NULL),('2019-04-01',3907,129,'2019-04-11','S','Y',NULL),('2019-04-01',3908,129,'2019-04-11','X','Y',NULL),('2019-04-01',3909,129,'2019-04-12','S','Y',NULL),('2019-04-01',3910,129,'2019-04-12','X','Y',NULL),('2019-04-01',3911,130,'2019-04-02','S','Y',NULL),('2019-04-01',3912,130,'2019-04-02','X','Y',NULL),('2019-04-01',3913,130,'2019-04-03','S','Y',NULL),('2019-04-01',3914,130,'2019-04-03','X','Y',NULL),('2019-04-01',3915,130,'2019-04-04','S','Y',NULL),('2019-04-01',3916,130,'2019-04-04','X','Y',NULL),('2019-04-01',3917,130,'2019-04-05','S','Y',NULL),('2019-04-01',3918,130,'2019-04-05','X','Y',NULL),('2019-04-01',3919,130,'2019-04-06','S','Y',NULL),('2019-04-01',3920,130,'2019-04-06','X','Y',NULL),('2019-04-01',3921,130,'2019-04-07','S','Y',NULL),('2019-04-01',3922,130,'2019-04-07','X','Y',NULL),('2019-04-01',3923,130,'2019-04-08','S','Y',NULL),('2019-04-01',3924,130,'2019-04-08','X','Y',NULL),('2019-04-01',3925,130,'2019-04-09','S','Y',NULL),('2019-04-01',3926,130,'2019-04-09','X','Y',NULL),('2019-04-01',3927,130,'2019-04-10','S','Y',NULL),('2019-04-01',3928,130,'2019-04-10','X','Y',NULL),('2019-04-01',3929,130,'2019-04-11','S','Y',NULL),('2019-04-01',3930,130,'2019-04-11','X','Y',NULL),('2019-04-01',3931,130,'2019-04-12','S','Y',NULL),('2019-04-01',3932,130,'2019-04-12','X','Y',NULL),('2019-04-01',3933,131,'2019-04-02','S','Y',NULL),('2019-04-01',3934,131,'2019-04-02','X','Y',NULL),('2019-04-01',3935,131,'2019-04-03','S','Y',NULL),('2019-04-01',3936,131,'2019-04-03','X','Y',NULL),('2019-04-01',3937,131,'2019-04-04','S','Y',NULL),('2019-04-01',3938,131,'2019-04-04','X','Y',NULL),('2019-04-01',3939,131,'2019-04-05','S','Y',NULL),('2019-04-01',3940,131,'2019-04-05','X','Y',NULL),('2019-04-01',3941,131,'2019-04-06','S','Y',NULL),('2019-04-01',3942,131,'2019-04-06','X','Y',NULL),('2019-04-01',3943,131,'2019-04-07','S','Y',NULL),('2019-04-01',3944,131,'2019-04-07','X','Y',NULL),('2019-04-01',3945,131,'2019-04-08','S','Y',NULL),('2019-04-01',3946,131,'2019-04-08','X','Y',NULL),('2019-04-01',3947,131,'2019-04-09','S','Y',NULL),('2019-04-01',3948,131,'2019-04-09','X','Y',NULL),('2019-04-01',3949,131,'2019-04-10','S','Y',NULL),('2019-04-01',3950,131,'2019-04-10','X','Y',NULL),('2019-04-01',3951,131,'2019-04-11','S','Y',NULL),('2019-04-01',3952,131,'2019-04-11','X','Y',NULL),('2019-04-01',3953,131,'2019-04-12','S','Y',NULL),('2019-04-01',3954,131,'2019-04-12','X','Y',NULL),('2019-04-01',3955,132,'2019-04-02','S','Y',NULL),('2019-04-01',3956,132,'2019-04-02','X','Y',NULL),('2019-04-01',3957,132,'2019-04-03','S','Y',NULL),('2019-04-01',3958,132,'2019-04-03','X','Y',NULL),('2019-04-01',3959,132,'2019-04-04','S','Y',NULL),('2019-04-01',3960,132,'2019-04-04','X','Y',NULL),('2019-04-01',3961,132,'2019-04-05','S','Y',NULL),('2019-04-01',3962,132,'2019-04-05','X','Y',NULL),('2019-04-01',3963,132,'2019-04-06','S','Y',NULL),('2019-04-01',3964,132,'2019-04-06','X','Y',NULL),('2019-04-01',3965,132,'2019-04-07','S','Y',NULL),('2019-04-01',3966,132,'2019-04-07','X','Y',NULL),('2019-04-01',3967,132,'2019-04-08','S','Y',NULL),('2019-04-01',3968,132,'2019-04-08','X','Y',NULL),('2019-04-01',3969,132,'2019-04-09','S','Y',NULL),('2019-04-01',3970,132,'2019-04-09','X','Y',NULL),('2019-04-01',3971,132,'2019-04-10','S','Y',NULL),('2019-04-01',3972,132,'2019-04-10','X','Y',NULL),('2019-04-01',3973,132,'2019-04-11','S','Y',NULL),('2019-04-01',3974,132,'2019-04-11','X','Y',NULL),('2019-04-01',3975,132,'2019-04-12','S','Y',NULL),('2019-04-01',3976,132,'2019-04-12','X','Y',NULL),('2019-04-01',3977,133,'2019-04-02','S','Y',NULL),('2019-04-01',3978,133,'2019-04-02','X','Y',NULL),('2019-04-01',3979,133,'2019-04-03','S','Y',NULL),('2019-04-01',3980,133,'2019-04-03','X','Y',NULL),('2019-04-01',3981,133,'2019-04-04','S','Y',NULL),('2019-04-01',3982,133,'2019-04-04','X','Y',NULL),('2019-04-01',3983,133,'2019-04-05','S','Y',NULL),('2019-04-01',3984,133,'2019-04-05','X','Y',NULL),('2019-04-01',3985,133,'2019-04-06','S','Y',NULL),('2019-04-01',3986,133,'2019-04-06','X','Y',NULL),('2019-04-01',3987,133,'2019-04-07','S','Y',NULL),('2019-04-01',3988,133,'2019-04-07','X','Y',NULL),('2019-04-01',3989,133,'2019-04-08','S','Y',NULL),('2019-04-01',3990,133,'2019-04-08','X','Y',NULL),('2019-04-01',3991,133,'2019-04-09','S','Y',NULL),('2019-04-01',3992,133,'2019-04-09','X','Y',NULL),('2019-04-01',3993,133,'2019-04-10','S','Y',NULL),('2019-04-01',3994,133,'2019-04-10','X','Y',NULL),('2019-04-01',3995,133,'2019-04-11','S','Y',NULL),('2019-04-01',3996,133,'2019-04-11','X','Y',NULL),('2019-04-01',3997,133,'2019-04-12','S','Y',NULL),('2019-04-01',3998,133,'2019-04-12','X','Y',NULL),('2019-04-01',3999,134,'2019-04-02','S','Y',NULL),('2019-04-01',4000,134,'2019-04-02','X','Y',NULL),('2019-04-01',4001,134,'2019-04-03','S','Y',NULL),('2019-04-01',4002,134,'2019-04-03','X','Y',NULL),('2019-04-01',4003,134,'2019-04-04','S','Y',NULL),('2019-04-01',4004,134,'2019-04-04','X','Y',NULL),('2019-04-01',4005,134,'2019-04-05','S','Y',NULL),('2019-04-01',4006,134,'2019-04-05','X','Y',NULL),('2019-04-01',4007,134,'2019-04-06','S','Y',NULL),('2019-04-01',4008,134,'2019-04-06','X','Y',NULL),('2019-04-01',4009,134,'2019-04-07','S','Y',NULL),('2019-04-01',4010,134,'2019-04-07','X','Y',NULL),('2019-04-01',4011,134,'2019-04-08','S','Y',NULL),('2019-04-01',4012,134,'2019-04-08','X','Y',NULL),('2019-04-01',4013,134,'2019-04-09','S','Y',NULL),('2019-04-01',4014,134,'2019-04-09','X','Y',NULL),('2019-04-01',4015,134,'2019-04-10','S','Y',NULL),('2019-04-01',4016,134,'2019-04-10','X','Y',NULL),('2019-04-01',4017,134,'2019-04-11','S','Y',NULL),('2019-04-01',4018,134,'2019-04-11','X','Y',NULL),('2019-04-01',4019,134,'2019-04-12','S','Y',NULL),('2019-04-01',4020,134,'2019-04-12','X','Y',NULL);
/*!40000 ALTER TABLE `KqPd_A_Mx` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `KqPd_A_Mx_11` BEFORE INSERT ON `KqPd_A_Mx`
  FOR EACH ROW
BEGIN
	DECLARE vRecDivTag DATE;#时间戳
    
    select RecDivTag into vRecDivTag
    from KqPd_A_Lj
    where ID=new.LjID;
    
    set new.RecDivTag=vRecDivTag;	#copy主体时间戳
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `KqPd_A_Mx_21` AFTER INSERT ON `KqPd_A_Mx`
  FOR EACH ROW
BEGIN
	update KqPd_A_Lj
    set CqTs=CqTs+0.5,CqTsBnLj=CqTsBnLj+0.5
    where ID=new.LjID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `KqPd_A_Mx_23` AFTER UPDATE ON `KqPd_A_Mx`
  FOR EACH ROW
BEGIN
	declare vMaxLjID integer unsigned;
    declare vUsrID smallint unsigned;
    
    select UsrID into vUsrID from KqPd_A_Lj where ID=old.LjID;
    select MAX(ID) into vMaxLjID from KqPd_A_Lj where UsrID=vUsrID;
    
	if old.SfCq='Y' and new.SfCq='N' then
		update KqPd_A_Lj
    	set CqTs=CqTs-0.5,CqTsBnLj=CqTsBnLj-0.5,QqTs=QqTs+0.5,QqTsBnLj=QqTsBnLj+0.5
    	where ID=old.LjID;
        
        if vMaxLjID!=old.LjID then
        	update KqPd_A_Lj
            set CqTsBnLj=CqTsBnLj-0.5,QqTsBnLj=QqTsBnLj+0.5
            where ID=vMaxLjID;
        end if;
    end if;
    
	if old.SfCq='N' and new.SfCq='Y' then
		update KqPd_A_Lj
    	set CqTs=CqTs+0.5,CqTsBnLj=CqTsBnLj+0.5,QqTs=QqTs-0.5,QqTsBnLj=QqTsBnLj-0.5
    	where ID=old.LjID;
        
        if vMaxLjID!=old.LjID then
        	update KqPd_A_Lj
            set CqTsBnLj=CqTsBnLj+0.5,QqTsBnLj=QqTsBnLj-0.5
            where ID=vMaxLjID;
        end if;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Pf_A_AttachInfo`
--

DROP TABLE IF EXISTS `Pf_A_AttachInfo`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_A_AttachInfo` (
  `RecDivTag` date NOT NULL,
  `Seq` int(12) unsigned NOT NULL AUTO_INCREMENT,
  `PrimaryID` int(11) unsigned NOT NULL,
  `PrimaryName` varchar(30) NOT NULL DEFAULT '',
  `FileName` varchar(100) NOT NULL DEFAULT '',
  `FileExt` varchar(5) NOT NULL DEFAULT '',
  `FileSize` int(10) unsigned NOT NULL,
  `CreatedBy` smallint(5) unsigned NOT NULL,
  `CreatedTs` datetime NOT NULL,
  `UpdatedBy` smallint(5) unsigned DEFAULT NULL,
  `UpdateTs` datetime DEFAULT NULL,
  `PathCode` tinyint(3) unsigned NOT NULL,
  `LocationTag` char(1) NOT NULL DEFAULT 'N',
  `DelTag` char(1) NOT NULL DEFAULT 'N',
  PRIMARY KEY (`Seq`),
  KEY `CreatedBy` (`CreatedBy`),
  KEY `UpdatedBy` (`UpdatedBy`),
  KEY `Pf_A_AttachInfo_FK3` (`PathCode`),
  CONSTRAINT `Pf_A_AttachInfo_FK1` FOREIGN KEY (`CreatedBy`) REFERENCES `Pf_M_Usr` (`ID`),
  CONSTRAINT `Pf_A_AttachInfo_FK2` FOREIGN KEY (`UpdatedBy`) REFERENCES `Pf_M_Usr` (`ID`),
  CONSTRAINT `Pf_A_AttachInfo_FK3` FOREIGN KEY (`PathCode`) REFERENCES `Pf_M_AppAttachPath` (`Code`)
) ENGINE=InnoDB AUTO_INCREMENT=905 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_A_AttachInfo`
--

LOCK TABLES `Pf_A_AttachInfo` WRITE;
/*!40000 ALTER TABLE `Pf_A_AttachInfo` DISABLE KEYS */;
INSERT INTO `Pf_A_AttachInfo` VALUES ('2018-01-26',4,1,'Pf_A_BizDelMemo','财务章.gif','.gif',7514,14,'2018-01-26 18:37:12',NULL,NULL,1,'Y','N'),('2018-01-26',5,2,'GsWjZw','第五部分  北京智控美信公司介绍.docx','.docx',22779,14,'2018-01-26 18:38:31',14,'2018-01-26 18:44:43',2,'Y','N'),('2018-01-26',6,2,'GsWjZwCopy','第五部分  北京智控美信公司介绍.docx','.docx',22863,2,'2018-01-26 18:43:34',NULL,NULL,1,'Y','N'),('2018-01-26',7,2,'GsWjZwZs','第五部分  北京智控美信公司介绍.docx','.docx',369599,14,'2018-01-26 18:44:45',10,'2018-01-26 18:57:38',2,'Y','N'),('2018-01-26',8,2,'GsWjZwZsPdf','第五部分  北京智控美信公司介绍.pdf','.pdf',636162,10,'2018-01-26 18:58:39',10,'2018-01-26 18:58:57',1,'Y','N'),('2018-01-30',12,2,'JkBx_A_RcJk','日常借款凭证_2.docx','.docx',120890,9,'2018-01-30 10:13:01',2,'2018-01-30 15:22:06',3,'Y','N'),('2018-01-31',14,3,'GsWjZw','刘兆赫-2017年工作总结.docx','.docx',69942,14,'2018-01-31 14:08:15',14,'2018-01-31 14:12:44',2,'Y','N'),('2018-01-31',15,3,'GsWjFj','2017年度工作总结及2018年工作计划-刘俊.docx','.docx',22554,14,'2018-01-31 14:08:30',NULL,NULL,3,'Y','N'),('2018-01-31',16,52,'Pf_A_BizProcRcd','IOS接入vpn设置.docx','.docx',1862170,14,'2018-01-31 14:09:10',14,'2018-01-31 14:09:21',3,'Y','N'),('2018-01-31',17,3,'GsWjZwCopy','刘兆赫-2017年工作总结.docx','.docx',70197,2,'2018-01-31 14:11:38',NULL,NULL,2,'Y','N'),('2018-01-31',18,3,'GsWjZwZs','刘兆赫-2017年工作总结.docx','.docx',372729,14,'2018-01-31 14:12:49',10,'2018-01-31 14:17:03',2,'Y','N'),('2018-01-31',19,3,'GsWjZwZsPdf','刘兆赫-2017年工作总结.pdf','.pdf',947825,10,'2018-01-31 14:17:38',10,'2018-01-31 14:17:52',1,'Y','N'),('2018-02-04',30,1,'GzHb_A_Zt','HR112录用条件确认书.docx','.docx',69085,13,'2018-02-04 12:16:00',13,'2018-02-04 12:16:36',1,'Y','N'),('2018-02-04',36,1,'QsQb_A_Zt','02、内蒙古庆源绿色金融资产管理公司业务操作流程.docx','.docx',56542,14,'2018-02-04 12:48:45',NULL,NULL,1,'Y','N'),('2018-02-04',37,1,'QsQb_A_Zt','01、业务操作流程类表格.docx','.docx',56440,14,'2018-02-04 12:48:45',NULL,NULL,1,'Y','N'),('2018-02-11',41,3,'JkBx_A_RcJk','日常借款凭证_3.docx','.docx',25208,9,'2018-02-11 16:35:03',9,'2018-02-11 18:03:11',2,'Y','N'),('2018-02-21',43,1,'ZxBg_A_LxSq','HR112录用条件确认书.docx','.docx',68907,12,'2018-02-21 15:46:29',12,'2018-02-21 15:47:10',2,'Y','N'),('2018-02-21',44,1,'ZxBg_A_LxSq','HR602职位说明书模板.docx','.docx',26655,12,'2018-02-21 15:47:54',NULL,NULL,1,'Y','N'),('2018-02-21',45,1,'ZxBg_A_LxSq_Qz','立项申请表-1.docx','.docx',17472,12,'2018-02-22 16:05:00',12,'2018-02-22 16:34:43',1,'Y','N'),('2018-03-02',46,2,'ZxBg_A_LxSq_Qz','立项申请表-2.docx','.docx',17371,14,'2018-03-02 11:41:50',14,'2018-03-02 11:42:55',1,'Y','N'),('2018-03-05',47,1,'ZxBg_A_YzZzSq_Qz','印章、证照使用审批单-1.docx','.docx',22832,10,'2018-03-06 14:27:53',10,'2018-03-06 17:29:30',1,'Y','N'),('2018-03-07',48,2,'ZxBg_A_YzZzSq_Qz','印章、证照使用审批单-2.docx','.docx',22881,10,'2018-03-07 13:15:46',10,'2018-03-07 13:16:35',2,'Y','N'),('2018-03-05',49,142,'Pf_A_BizProcRcd','文档1.docx','.docx',15793,10,'2018-03-07 15:10:21',NULL,NULL,1,'Y','N'),('2018-02-21',50,1,'ZxBg_A_LxSq','银行凭证296.txt','.txt',371,14,'2018-03-09 14:21:10',NULL,NULL,2,'Y','N'),('2018-02-21',51,1,'ZxBg_A_LxSq','银行凭证296.txt','.txt',371,14,'2018-03-09 14:22:44',NULL,NULL,2,'Y','N'),('2018-03-08',52,1,'ZxBg_A_JzDc','缺少.txt','.txt',1324,14,'2018-03-09 14:31:32',NULL,NULL,2,'Y','N'),('2018-03-12',53,1,'ZxBg_A_XmSc_Qz1','项目审查-经营决策委员会成本效益审查表-1.docx','.docx',17345,10,'2018-03-13 10:48:50',10,'2018-03-13 13:04:47',2,'Y','N'),('2018-03-12',54,1,'ZxBg_A_XmSc_Qz2','项目审查-经营决策委员会决策项目方案审核表-1.docx','.docx',16082,10,'2018-03-13 10:48:50',10,'2018-03-13 13:05:08',1,'Y','N'),('2018-03-14',55,3,'ZxBg_A_LxSq','01、云OA正式环境备忘.txt','.txt',6651,12,'2018-03-14 09:52:19',NULL,NULL,2,'Y','N'),('2018-03-14',56,3,'ZxBg_A_LxSq_Qz','立项申请表-3.docx','.docx',71381,12,'2018-03-14 09:55:25',4,'2018-03-14 10:00:34',1,'Y','N'),('2018-03-14',57,1,'ZxBg_A_FaSp_Qz','实施方案审批-1.docx','.docx',38251,11,'2018-03-14 14:59:44',2,'2018-03-14 15:09:08',2,'Y','N'),('2018-03-11',58,4,'ZxBg_A_LxSq','科翰在不同系统的可用性.doc','.doc',79872,12,'2018-03-11 14:22:30',NULL,NULL,2,'Y','N'),('2018-03-11',59,4,'ZxBg_A_LxSq_Qz','立项申请表-4.docx','.docx',83493,12,'2018-03-11 14:27:57',2,'2018-03-11 14:41:17',1,'Y','N'),('2018-03-22',62,5,'ZxBg_A_LxSq','codetemplates.xml','.xml',393,12,'2018-03-22 11:55:12',NULL,NULL,2,'Y','N'),('2018-03-22',63,5,'ZxBg_A_LxSq','测试lx.docx','.docx',15566,12,'2018-03-22 13:20:17',NULL,NULL,2,'Y','N'),('2018-03-22',64,5,'ZxBg_A_LxSq_Qz','立项申请表-5.docx','.docx',17407,12,'2018-03-22 13:24:28',12,'2018-03-22 13:24:36',3,'Y','N'),('2018-03-22',66,2,'ZxBg_A_JzDc','测试jzdc.docx','.docx',15566,12,'2018-03-22 13:32:59',NULL,NULL,3,'Y','N'),('2018-03-22',67,2,'ZxBg_A_XmSc_Qz1','项目审查-经营决策委员会成本效益审查表-2.docx','.docx',39312,10,'2018-03-22 13:46:06',10,'2018-03-22 13:59:29',1,'Y','N'),('2018-03-22',68,2,'ZxBg_A_XmSc_Qz2','项目审查-经营决策委员会决策项目方案审核表-2.docx','.docx',64827,10,'2018-03-22 13:46:14',10,'2018-03-22 13:59:35',2,'Y','N'),('2018-03-22',69,2,'ZxBg_A_FaSp_Qz','实施方案审批-2.docx','.docx',33337,11,'2018-03-22 14:17:10',11,'2018-03-22 14:17:12',3,'Y','N'),('2018-03-22',71,1,'JkBx_A_Jk_Qz','借款凭证-1.docx','.docx',110269,9,'2018-03-22 14:28:20',9,'2018-03-22 15:04:59',3,'Y','N'),('2018-03-22',73,4,'ZxBg_A_YzZzSq_Qz','印章、证照使用审批单-4.docx','.docx',50624,10,'2018-03-22 14:57:48',10,'2018-03-22 14:57:50',2,'Y','N'),('2018-03-22',74,320,'Pf_A_BizProcRcd','附件1-业务办理记录单.docx','.docx',19307,12,'2018-03-22 15:34:18',NULL,NULL,2,'Y','N'),('2018-03-22',75,2,'JkBx_A_Jk_Qz','借款凭证-2.docx','.docx',108717,9,'2018-03-22 15:37:35',2,'2018-03-22 15:46:00',1,'Y','N'),('2018-03-27',79,5,'ZxBg_A_YzZzSq_Qz','印章、证照使用审批单-5.docx','.docx',33501,10,'2018-03-27 14:44:31',2,'2018-03-27 14:49:00',2,'Y','N'),('2018-03-29',80,1,'JkBx_A_Hk_Qz','还款凭证-1.docx','.docx',56602,9,'2018-03-29 08:33:36',12,'2018-03-29 09:03:02',2,'Y','N'),('2018-03-31',86,3,'ZxBg_A_JzDc','北京市异地安置审批表.xlsx','.xlsx',11742,12,'2018-03-31 00:41:37',NULL,NULL,2,'Y','N'),('2018-03-31',87,3,'ZxBg_A_JzDc','出差员工住房补助申请表-刘赣平.doc','.doc',46592,12,'2018-03-31 00:41:37',NULL,NULL,2,'Y','N'),('2018-03-31',88,3,'ZxBg_A_XmSc_Qz1','项目审查-经营决策委员会成本效益审查表-3.docx','.docx',69534,10,'2018-03-31 04:09:33',3,'2018-03-31 06:22:22',1,'Y','N'),('2018-03-31',89,3,'ZxBg_A_XmSc_Qz2','项目审查-经营决策委员会决策项目方案审核表-3.docx','.docx',119188,10,'2018-03-31 04:12:35',4,'2018-03-31 05:23:29',1,'Y','N'),('2018-03-31',90,3,'ZxBg_A_FaSp_Qz','实施方案审批-3.docx','.docx',37544,11,'2018-03-31 06:44:13',2,'2018-03-31 06:49:15',2,'Y','N'),('2018-04-01',94,3,'JkBx_A_Jk_Qz','借款凭证-3.docx','.docx',30100,9,'2018-04-01 10:33:04',9,'2018-04-07 11:36:37',2,'Y','N'),('2018-04-01',95,4,'GsWjZw','立项申请表COAQY.docx','.docx',36669,11,'2018-04-01 12:08:39',11,'2018-05-21 15:57:18',2,'Y','N'),('2018-04-01',96,4,'GsWjZwCopy','立项申请表COAQY.docx','.docx',36548,2,'2018-04-01 12:11:33',NULL,NULL,2,'Y','N'),('2018-04-01',97,4,'GsWjZwZs','立项申请表COAQY.docx','.docx',223685,11,'2018-04-01 12:12:26',11,'2018-05-21 15:57:35',2,'Y','N'),('2018-04-02',98,5,'GsWjZw','第五部分  北京智控美信公司介绍.docx','.docx',22937,11,'2018-04-02 02:14:46',11,'2019-03-06 08:04:28',3,'Y','N'),('2018-04-02',99,5,'GsWjZwCopy','第五部分  北京智控美信公司介绍.docx','.docx',22907,2,'2018-04-02 02:17:40',2,'2019-03-06 08:03:50',3,'Y','N'),('2018-04-02',100,5,'GsWjZwZs','第五部分  北京智控美信公司介绍.docx','.docx',224649,11,'2018-04-02 02:18:55',11,'2019-03-06 08:06:54',2,'Y','N'),('2018-04-07',101,4,'JkBx_A_Jk_Qz','借款凭证-4.docx','.docx',31351,9,'2018-04-07 11:40:40',9,'2018-04-07 11:40:55',3,'Y','N'),('2018-04-07',102,5,'JkBx_A_Jk_Qz','借款凭证-5.docx','.docx',34899,9,'2018-04-07 12:10:31',9,'2018-08-23 10:53:24',3,'Y','N'),('2018-04-11',104,2,'Pf_A_BizDelMemo','53.jpg','.jpg',2131,14,'2018-04-12 16:53:32',NULL,NULL,1,'Y','N'),('2018-04-12',105,2,'GsSwZw','异地安置审批表（丰台）.pdf','.pdf',24342,11,'2018-04-12 23:06:30',NULL,NULL,1,'Y','N'),('2018-04-12',106,2,'GsSwFj','HR602职位说明书模板.docx','.docx',26655,11,'2018-04-12 23:06:51',NULL,NULL,1,'Y','N'),('2018-04-12',107,2,'GsSwFj','HR112录用条件确认书.docx','.docx',68928,11,'2018-04-12 23:06:51',NULL,NULL,1,'Y','N'),('2018-04-13',108,3,'GsSwZw','沙漠1.gif','.gif',377091,11,'2018-04-13 00:34:13',NULL,NULL,2,'Y','N'),('2018-04-13',109,3,'GsSwFj','IOS接入vpn设置.docx','.docx',1860501,11,'2018-04-13 00:34:31',NULL,NULL,1,'Y','N'),('2018-04-20',112,2,'JkBx_A_Hk_Qz','还款凭证-2.docx','.docx',32048,9,'2018-04-20 13:24:06',9,'2018-04-20 13:24:16',2,'Y','N'),('2018-04-20',113,3,'JkBx_A_Hk_Qz','还款凭证-3.docx','.docx',32065,9,'2018-04-20 13:36:20',9,'2018-04-20 13:36:27',2,'Y','N'),('2018-04-21',115,6,'JkBx_A_Jk_Qz','借款凭证-6.docx','.docx',30127,9,'2018-04-21 08:16:39',9,'2018-04-21 08:16:56',2,'Y','N'),('2018-04-21',116,4,'JkBx_A_Hk_Qz','还款凭证-4.docx','.docx',32098,9,'2018-04-21 08:27:44',9,'2018-04-21 08:27:52',2,'Y','N'),('2018-04-24',120,6,'ZxBg_A_YzZzSq_Qz','印章、证照使用审批单-6.docx','.docx',23464,10,'2018-04-24 20:00:34',10,'2018-04-24 20:00:45',2,'Y','N'),('2018-04-25',121,8,'ZxBg_A_YzZzSq_1','PageOffice三个版本区别及报价.pdf','.pdf',454101,14,'2018-04-25 02:34:00',NULL,NULL,2,'Y','N'),('2018-04-25',122,8,'ZxBg_A_YzZzSq_Qz','印章、证照使用审批单-8.docx','.docx',30420,10,'2018-04-25 02:37:51',10,'2018-04-25 02:55:36',2,'Y','N'),('2018-04-29',123,1,'ZxBg_A_HtSp','红头.jpg','.jpg',336988,12,'2018-04-29 23:54:04',NULL,NULL,2,'Y','N'),('2018-04-29',124,1,'ZxBg_A_HtSp_Qz','合同审批单-1.docx','.docx',29305,12,'2018-04-30 04:07:13',12,'2018-04-30 04:07:58',2,'Y','N'),('2018-04-01',125,3,'Pf_A_BizDelMemo','沙漠1.gif','.gif',377091,14,'2018-04-30 05:28:52',NULL,NULL,2,'Y','N'),('2018-04-30',126,7,'ZxBg_A_LxSq','异地安置申请表（丰台）.xls','.xls',32768,12,'2018-04-30 05:32:16',NULL,NULL,3,'Y','N'),('2018-04-30',127,7,'ZxBg_A_LxSq','异地安置审批表（丰台）.pdf','.pdf',24342,12,'2018-04-30 05:32:16',NULL,NULL,3,'Y','N'),('2018-04-30',128,7,'ZxBg_A_LxSq_Qz','立项申请表-7.docx','.docx',33818,12,'2018-04-30 06:35:48',12,'2018-04-30 06:36:02',3,'Y','N'),('2018-04-30',129,4,'ZxBg_A_JzDc','HR602职位说明书模板.docx','.docx',26655,12,'2018-04-30 07:13:39',NULL,NULL,3,'Y','N'),('2018-04-30',130,4,'ZxBg_A_JzDc','HR112录用条件确认书.docx','.docx',68928,12,'2018-04-30 07:13:39',NULL,NULL,3,'Y','N'),('2018-04-30',131,5,'ZxBg_A_XmSc_Qz1','项目审查-经营决策委员会成本效益审查表.docx','.docx',28064,11,'2018-04-30 08:18:51',11,'2018-04-30 08:47:42',1,'Y','N'),('2018-04-30',132,5,'ZxBg_A_XmSc_Qz2','项目审查-经营决策委员会决策项目方案审核表.docx','.docx',39273,11,'2018-04-30 08:19:13',11,'2018-04-30 08:57:17',3,'Y','N'),('2018-04-30',133,4,'ZxBg_A_FaSp_Qz','实施方案审批表.docx','.docx',20282,11,'2018-04-30 13:06:13',11,'2018-04-30 13:08:03',1,'Y','N'),('2018-04-30',135,2,'ZxBg_A_HtSp','PageOffice4.0开发平台三个版本功能区别及零售、批发和无限分发报价表.pdf','.pdf',753513,12,'2018-04-30 13:19:28',NULL,NULL,2,'Y','N'),('2018-04-30',136,2,'ZxBg_A_HtSp','卓正软件产品总览.pdf','.pdf',1902184,12,'2018-04-30 13:20:08',NULL,NULL,1,'Y','N'),('2018-04-30',137,2,'ZxBg_A_HtSp_Qz','合同审批单.docx','.docx',29632,12,'2018-04-30 13:26:55',12,'2018-04-30 13:27:06',3,'Y','N'),('2018-04-30',138,3,'ZxBg_A_HtSp','pageoffice产品授权详细解释.docx','.docx',40299,12,'2018-04-30 13:30:36',NULL,NULL,3,'Y','N'),('2018-04-30',139,3,'ZxBg_A_HtSp_Qz','合同审批单.docx','.docx',29523,12,'2018-04-30 13:32:43',12,'2018-04-30 13:32:54',3,'Y','N'),('2018-05-02',140,11,'ZxBg_A_YzZzSq_1','异地安置审批表（丰台）.pdf','.pdf',24342,13,'2018-05-02 16:37:32',NULL,NULL,3,'Y','N'),('2018-05-02',141,10,'ZxBg_A_YzZzSq_Qz','印章、证照使用审批单.docx','.docx',32236,10,'2018-05-02 16:41:44',10,'2018-05-02 17:35:42',3,'Y','N'),('2018-05-02',142,11,'ZxBg_A_YzZzSq_Qz','印章、证照使用审批单-11.docx','.docx',25339,10,'2018-05-02 16:42:33',10,'2018-05-02 16:42:40',3,'Y','N'),('2018-05-04',147,12,'ZxBg_A_YzZzSq_1','COAQY流程.docx','.docx',895229,12,'2018-05-04 22:09:29',NULL,NULL,3,'Y','N'),('2018-05-04',148,12,'ZxBg_A_YzZzSq_Qz','印章、证照使用审批单.docx','.docx',27126,10,'2018-05-04 22:28:35',10,'2018-05-04 22:28:45',3,'Y','N'),('2018-05-04',149,13,'ZxBg_A_YzZzSq_1','8、字符编码表_COAQY.docx','.docx',23721,12,'2018-05-04 22:30:36',NULL,NULL,3,'Y','N'),('2018-05-04',150,13,'ZxBg_A_YzZzSq_Qz','印章、证照使用审批单.docx','.docx',32277,10,'2018-05-04 22:32:45',10,'2018-05-04 22:32:52',3,'Y','N'),('2018-05-10',151,8,'XxFb_A_ZtNq','C:\\O_Swap\\沙漠2.gif','.gif',339613,14,'2018-05-10 17:16:41',NULL,NULL,3,'Y','N'),('2018-05-10',152,9,'XxFb_A_ZtNq','C:\\O_Swap\\沙漠3.gif','.gif',339483,14,'2018-05-10 17:26:58',NULL,NULL,3,'Y','N'),('2018-05-16',156,15,'ZxBg_A_YzZzSq_1','内蒙古庆源绿色金融资产管理有限公司_邮箱用户列表.xlsx','.xlsx',12353,13,'2018-05-16 10:21:56',NULL,NULL,3,'Y','N'),('2018-05-16',157,15,'ZxBg_A_YzZzSq_1','立项申请表COAQY.docx','.docx',36548,13,'2018-05-16 10:21:56',NULL,NULL,3,'Y','N'),('2018-05-16',158,15,'ZxBg_A_YzZzSq_Qz','印章、证照使用审批单.docx','.docx',33698,10,'2018-05-16 10:24:15',10,'2018-05-16 10:24:26',1,'Y','N'),('2018-05-16',159,4,'ZxBg_A_HtSp','异地安置申请表（丰台）.xls','.xls',32768,12,'2018-05-16 10:27:41',NULL,NULL,1,'Y','N'),('2018-05-16',160,4,'ZxBg_A_HtSp','第五部分  北京智控美信公司介绍.docx','.docx',22770,12,'2018-05-16 10:27:41',NULL,NULL,1,'Y','N'),('2018-05-16',161,4,'ZxBg_A_HtSp_Qz','合同审批单.docx','.docx',22620,12,'2018-05-16 10:29:50',12,'2018-05-16 10:30:01',3,'Y','N'),('2018-05-16',162,16,'ZxBg_A_YzZzSq_Qz','印章、证照使用审批单.docx','.docx',39818,10,'2018-05-16 10:43:55',10,'2018-05-16 10:44:09',3,'Y','N'),('2018-05-16',163,10,'XxFb_A_ZtNq','C:\\Users\\lgp\\Desktop\\1.jpeg','.jpeg',65231,13,'2018-05-16 12:09:22',NULL,NULL,1,'Y','N'),('2018-05-16',164,10,'XxFb_A_ZtNq','C:\\Users\\lgp\\Desktop\\2.jpeg','.jpeg',61687,13,'2018-05-16 12:10:09',NULL,NULL,3,'Y','N'),('2018-05-16',165,4,'Pf_A_BizDelMemo','假大学.txt','.txt',3392,14,'2018-05-16 20:57:10',NULL,NULL,1,'Y','N'),('2018-05-17',166,17,'ZxBg_A_YzZzSq_1','公章、法人章.pdf','.pdf',176290,12,'2018-05-17 09:09:42',NULL,NULL,1,'Y','N'),('2018-05-20',369,6,'GsWjZw','02、内蒙古庆源绿色金融资产管理公司业务操作流程.docx','.docx',56629,13,'2018-05-20 11:38:01',13,'2018-05-20 11:41:48',2,'Y','N'),('2018-05-20',370,6,'GsWjZwCopy','02、内蒙古庆源绿色金融资产管理公司业务操作流程.docx','.docx',56777,4,'2018-05-20 11:40:57',NULL,NULL,2,'Y','N'),('2018-05-20',371,6,'GsWjZwZs','02、内蒙古庆源绿色金融资产管理公司业务操作流程.docx','.docx',370194,13,'2018-05-20 11:41:50',10,'2018-05-20 11:50:02',2,'Y','N'),('2018-05-20',372,6,'GsWjZwZsPdf','02、内蒙古庆源绿色金融资产管理公司业务操作流程.pdf','.pdf',1095398,10,'2018-05-20 11:50:09',10,'2018-05-20 11:50:39',3,'Y','N'),('2018-05-21',374,7,'GsWjZw','正文.docx','.docx',12860,14,'2018-05-21 13:33:10',14,'2018-05-21 13:42:39',2,'Y','N'),('2018-05-21',375,7,'GsWjZwCopy','正文.docx','.docx',12857,2,'2018-05-21 13:40:58',NULL,NULL,2,'Y','N'),('2018-05-21',376,7,'GsWjZwZs','正文.docx','.docx',217426,14,'2018-05-21 13:42:45',14,'2018-05-21 15:09:02',2,'Y','N'),('2018-05-21',377,7,'GsWjZwZsPdf','正文.pdf','.pdf',297049,10,'2018-05-21 15:13:26',10,'2018-05-21 15:13:41',2,'Y','N'),('2018-05-21',378,4,'GsSwZw','正文.docx','.docx',12857,10,'2018-05-21 15:18:31',NULL,NULL,2,'Y','N'),('2018-05-21',380,8,'GsWjZw','正文.docx','.docx',12889,14,'2018-05-21 15:37:50',14,'2018-05-21 16:41:42',2,'Y','N'),('2018-05-21',381,8,'GsWjZwCopy','正文.docx','.docx',12857,2,'2018-05-21 15:40:21',NULL,NULL,2,'Y','N'),('2018-04-01',382,4,'GsWjZwZsPdf','立项申请表COAQY.pdf','.pdf',648456,10,'2018-05-21 16:05:54',10,'2018-05-21 16:06:23',2,'Y','N'),('2018-05-21',383,8,'GsWjZwZs','正文.docx','.docx',217370,14,'2018-05-21 16:38:26',14,'2018-05-21 16:42:10',3,'Y','N'),('2018-05-21',384,8,'GsWjZwZsPdf','正文.pdf','.pdf',296801,10,'2018-05-21 16:43:56',10,'2018-05-21 16:44:18',3,'Y','N'),('2018-05-22',392,173,'XxFb_A_ZtNq','22094943gnt5.jpg','.jpg',307200,14,'2018-05-22 10:08:05',NULL,NULL,2,'Y','N'),('2018-05-22',393,173,'XxFb_A_ZtNq','22094944se5j.jpg','.jpg',307200,14,'2018-05-22 10:08:05',NULL,NULL,3,'Y','N'),('2018-05-22',394,174,'XxFb_A_ZtNq','22094945tt1i.jpg','.jpg',307200,14,'2018-05-22 10:08:06',NULL,NULL,1,'Y','N'),('2018-05-22',395,174,'XxFb_A_ZtNq','22094945r2vc.jpg','.jpg',307200,14,'2018-05-22 10:08:06',NULL,NULL,2,'Y','N'),('2018-05-22',396,175,'XxFb_A_ZtNq','22094947z5el.jpg','.jpg',307200,14,'2018-05-22 10:08:06',NULL,NULL,3,'Y','N'),('2018-05-22',397,178,'XxFb_A_ZtNq','2209494972pw.jpg','.jpg',307200,14,'2018-05-22 10:10:05',NULL,NULL,1,'Y','N'),('2018-05-22',398,178,'XxFb_A_ZtNq','22094950b6qi.jpg','.jpg',307200,14,'2018-05-22 10:10:05',NULL,NULL,2,'Y','N'),('2018-05-22',399,178,'XxFb_A_ZtNq','22094950kbh4.jpg','.jpg',307200,14,'2018-05-22 10:10:05',NULL,NULL,3,'Y','N'),('2018-05-22',400,178,'XxFb_A_ZtNq','22094951llx3.png','.png',307200,14,'2018-05-22 10:10:05',NULL,NULL,1,'Y','N'),('2018-05-22',401,178,'XxFb_A_ZtNq','220949515s39.png','.png',307200,14,'2018-05-22 10:10:05',NULL,NULL,2,'Y','N'),('2018-05-22',402,178,'XxFb_A_ZtNq','22094952evzw.png','.png',307200,14,'2018-05-22 10:10:05',NULL,NULL,3,'Y','N'),('2018-05-22',403,178,'XxFb_A_ZtNq','22094953zw1k.png','.png',307200,14,'2018-05-22 10:10:05',NULL,NULL,1,'Y','N'),('2018-05-22',404,179,'XxFb_A_ZtNq','2209495442p0.jpg','.jpg',307200,14,'2018-05-22 10:10:06',NULL,NULL,2,'Y','N'),('2018-05-22',405,180,'XxFb_A_ZtNq','22094956zw2p.jpg','.jpg',307200,14,'2018-05-22 10:10:06',NULL,NULL,3,'Y','N'),('2018-05-22',406,181,'XxFb_A_ZtNq','22094957igox.jpg','.jpg',307200,14,'2018-05-22 10:10:06',NULL,NULL,1,'Y','N'),('2018-05-22',407,181,'XxFb_A_ZtNq','22094957egcz.jpg','.jpg',307200,14,'2018-05-22 10:10:06',NULL,NULL,2,'Y','N'),('2018-05-22',408,181,'XxFb_A_ZtNq','22094958vizc.jpg','.jpg',307200,14,'2018-05-22 10:10:06',NULL,NULL,3,'Y','N'),('2018-05-22',409,182,'XxFb_A_ZtNq','22094959mn86.jpg','.jpg',307200,14,'2018-05-22 10:10:06',NULL,NULL,1,'Y','N'),('2018-05-22',410,7,'JkBx_A_Jk_Qz','借款凭证-7.docx','.docx',31367,9,'2018-05-22 10:29:26',9,'2018-05-22 10:29:43',2,'Y','N'),('2018-05-22',411,5,'JkBx_A_Hk_Qz','还款凭证-5.docx','.docx',32149,9,'2018-05-22 10:38:58',9,'2018-05-22 10:39:06',2,'Y','N'),('2018-05-22',412,8,'ZxBg_A_LxSq_Qz','立项申请表.docx','.docx',31808,14,'2018-05-22 10:52:04',14,'2018-05-22 10:52:11',2,'Y','N'),('2018-05-22',413,7,'ZxBg_A_XmSc_Qz1','项目审查-经营决策委员会成本效益审查表.docx','.docx',28067,11,'2018-05-22 11:37:24',11,'2018-05-22 11:37:35',2,'Y','N'),('2018-05-22',414,7,'ZxBg_A_XmSc_Qz2','项目审查-经营决策委员会决策项目方案审核表.docx','.docx',29156,11,'2018-05-22 11:37:49',11,'2018-05-22 11:37:55',2,'Y','N'),('2018-05-22',415,18,'ZxBg_A_YzZzSq_1','公章.bmp','.bmp',60126,12,'2018-05-22 13:17:47',NULL,NULL,2,'Y','N'),('2018-05-22',416,18,'ZxBg_A_YzZzSq_1','公章、法人章.pdf','.pdf',176290,12,'2018-05-22 13:17:47',NULL,NULL,2,'Y','N'),('2018-05-22',417,5,'Pf_A_BizDelMemo','正文.docx','.docx',12857,14,'2018-05-22 14:40:30',NULL,NULL,3,'Y','N'),('2018-05-22',418,5,'ZxBg_A_HtSp','正文.docx','.docx',12857,14,'2018-05-22 14:48:51',NULL,NULL,3,'Y','N'),('2018-05-22',419,5,'ZxBg_A_HtSp_Qz','合同审批单.docx','.docx',27699,14,'2018-05-22 14:52:07',14,'2018-05-22 14:52:18',1,'Y','N'),('2018-05-22',420,20,'ZxBg_A_YzZzSq_1','正文.docx','.docx',12857,14,'2018-05-22 14:54:53',NULL,NULL,3,'Y','N'),('2018-05-22',421,20,'ZxBg_A_YzZzSq_Qz','印章、证照使用审批单.docx','.docx',34894,10,'2018-05-22 15:00:11',10,'2018-05-22 15:00:18',3,'Y','N'),('2018-05-22',422,21,'ZxBg_A_YzZzSq_2','正文.docx','.docx',12857,10,'2018-05-22 15:03:21',NULL,NULL,1,'Y','N'),('2018-05-22',423,21,'ZxBg_A_YzZzSq_Qz','印章、证照使用审批单.docx','.docx',32672,10,'2018-05-22 15:06:32',10,'2018-05-22 15:06:39',1,'Y','N'),('2018-05-22',426,3,'QsQb_A_Zt','公章、法人章.pdf','.pdf',176290,14,'2018-05-22 19:48:28',NULL,NULL,3,'Y','N'),('2018-05-22',427,1019,'Pf_A_BizProcRcd','5.bmp','.bmp',60126,14,'2018-05-22 21:04:19',NULL,NULL,1,'Y','N'),('2018-05-24',428,1,'DcDb_A_Zt','体检人员信息汇总表-基础部.xlsx','.xlsx',10864,14,'2018-05-24 07:13:58',NULL,NULL,2,'Y','N'),('2018-05-24',434,8,'DcDb_A_Fk','异地安置申请表（丰台）.xls','.xls',32768,13,'2018-05-26 18:16:32',NULL,NULL,2,'Y','N'),('2018-05-24',435,1,'DcDb_A_Zt_Gd','督办单-1.docx','.docx',16188,14,'2018-05-26 21:18:41',14,'2018-05-26 21:48:08',1,'Y','N'),('2018-05-27',436,3,'DcDb_A_Zt','HR112录用条件确认书.docx','.docx',68928,7,'2018-05-27 01:24:15',NULL,NULL,1,'Y','N'),('2018-05-27',437,11,'DcDb_A_Fk','HR602职位说明书模板.docx','.docx',26655,14,'2018-05-27 01:26:39',NULL,NULL,2,'Y','N'),('2018-05-26',438,2,'DcDb_A_Zt_Gd','督办单-2.docx','.docx',15565,14,'2018-05-27 01:30:02',14,'2018-05-27 01:30:10',2,'Y','N'),('2018-05-30',441,1,'Dsj_A_Xd','签报反馈.docx','.docx',103272,10,'2018-05-30 07:40:14',NULL,NULL,3,'Y','N'),('2018-05-27',442,3,'DcDb_A_Zt_Gd','督办单-3.docx','.docx',15650,7,'2018-05-31 18:37:25',7,'2018-05-31 18:58:17',2,'Y','N'),('2018-05-31',443,4,'DcDb_A_Zt','沙漠4.gif','.gif',340536,7,'2018-05-31 19:19:38',NULL,NULL,2,'Y','N'),('2018-05-31',444,13,'DcDb_A_Fk','签报反馈.docx','.docx',103272,15,'2018-05-31 19:32:12',NULL,NULL,3,'Y','N'),('2018-05-31',445,4,'DcDb_A_Zt_Gd','督办单-4.docx','.docx',15637,7,'2018-05-31 19:37:36',7,'2018-05-31 19:38:13',1,'Y','N'),('2018-05-31',446,5,'DcDb_A_Zt','内蒙科电[报销申请单]审批流程.xml','.xml',5677,14,'2018-05-31 21:55:12',NULL,NULL,1,'Y','N'),('2018-05-31',447,16,'DcDb_A_Fk','体检人员信息汇总表-基础部.xlsx','.xlsx',10864,13,'2018-05-31 21:56:50',NULL,NULL,1,'Y','N'),('2018-05-22',448,6,'Pf_A_BizDelMemo','部门两级报销审批流程.xml','.xml',4655,14,'2018-06-02 23:11:23',NULL,NULL,1,'Y','N'),('2018-05-22',449,7,'Pf_A_BizDelMemo','部门两级报销审批流程.xml','.xml',4655,14,'2018-06-02 23:13:38',NULL,NULL,1,'Y','N'),('2018-05-31',450,8,'Pf_A_BizDelMemo','部门两级报销审批流程.xml','.xml',4655,14,'2018-06-02 23:21:29',NULL,NULL,1,'Y','N'),('2018-06-04',453,1,'WjHq_A_Zt1','北京市异地安置审批表.xlsx','.xlsx',12115,13,'2018-06-04 10:05:29',13,'2018-06-04 10:11:01',3,'Y','N'),('2018-06-04',454,1,'WjHq_A_Zt1','功能定义书.docx','.docx',284215,13,'2018-06-04 10:05:29',5,'2018-06-04 10:25:07',3,'Y','N'),('2018-06-04',455,1,'WjHq_A_Zt1C','北京市异地安置审批表.xlsx','.xlsx',12115,5,'2018-06-04 10:21:50',NULL,NULL,1,'Y','N'),('2018-06-04',456,1,'WjHq_A_Zt1C','功能定义书.docx','.docx',284599,5,'2018-06-04 10:21:50',NULL,NULL,1,'Y','N'),('2018-06-04',457,1,'WjHq_A_Zt2','异地安置审批表（丰台）.pdf','.pdf',24342,5,'2018-06-04 10:23:33',NULL,NULL,2,'Y','N'),('2018-06-04',458,2,'WjHq_A_Zt1','HR112录用条件确认书.docx','.docx',68998,13,'2018-06-04 10:57:18',5,'2018-06-04 11:04:13',2,'Y','N'),('2018-06-04',459,2,'WjHq_A_Zt1','第五部分  北京智控美信公司介绍.docx','.docx',22770,13,'2018-06-04 10:57:18',NULL,NULL,2,'Y','N'),('2018-06-04',460,2,'WjHq_A_Zt1C','HR112录用条件确认书.docx','.docx',69108,5,'2018-06-04 11:00:49',5,'2018-06-04 11:03:06',3,'Y','N'),('2018-06-04',461,2,'WjHq_A_Zt1C','第五部分  北京智控美信公司介绍.docx','.docx',22770,5,'2018-06-04 11:00:49',5,'2018-06-04 11:03:06',2,'Y','N'),('2018-06-04',462,2,'WjHq_A_Zt2','签报反馈.docx','.docx',103272,5,'2018-06-04 11:01:33',NULL,NULL,1,'Y','N'),('2018-06-08',465,9,'GsWjZw','第五部分  北京智控美信公司介绍.docx','.docx',22831,13,'2018-06-08 16:29:21',13,'2018-06-08 17:12:35',3,'Y','N'),('2018-06-08',466,9,'GsWjZwCopy','第五部分  北京智控美信公司介绍.docx','.docx',22937,2,'2018-06-08 17:03:38',NULL,NULL,1,'Y','N'),('2018-06-08',467,9,'GsWjZwZs','第五部分  北京智控美信公司介绍.docx','.docx',224540,13,'2018-06-08 17:07:11',13,'2018-06-08 17:13:26',3,'Y','N'),('2018-06-08',468,9,'GsWjZwZsPdf','第五部分  北京智控美信公司介绍.pdf','.pdf',598918,10,'2018-06-08 17:16:56',10,'2018-06-08 17:17:23',1,'Y','N'),('2018-06-12',469,3,'HyGl_A_Zt1','2、公用设施_COAQY.docx','.docx',47884,14,'2018-06-12 17:07:02',NULL,NULL,3,'Y','N'),('2018-06-12',470,3,'HyGl_A_Zt1','1、框架字典_COAQY.docx','.docx',146075,14,'2018-06-12 17:07:02',NULL,NULL,3,'Y','N'),('2018-06-12',471,3,'HyGl_A_Zt2','01、业务操作流程类表格.docx','.docx',45391,14,'2018-06-12 17:08:45',14,'2018-06-12 17:09:40',2,'Y','N'),('2018-06-12',472,3,'HyGl_A_Zt2','功能定义书.docx','.docx',284138,14,'2018-06-12 17:08:45',14,'2018-06-12 20:43:21',2,'Y','N'),('2018-06-12',473,3,'HyGl_A_Zt2C','01、业务操作流程类表格.docx','.docx',45391,12,'2018-06-12 17:40:46',NULL,NULL,3,'Y','N'),('2018-06-12',474,3,'HyGl_A_Zt2C','功能定义书.docx','.docx',284674,12,'2018-06-12 17:40:46',NULL,NULL,3,'Y','N'),('2018-06-17',475,1,'Da_A_Jj','体检人员信息汇总表-基础部.xlsx','.xlsx',10864,14,'2018-06-17 19:29:23',NULL,NULL,1,'Y','N'),('2018-06-18',476,1,'Da_A_Jy','出差员工住房补助申请表-刘赣平.doc','.doc',46592,14,'2018-06-18 02:09:52',NULL,NULL,1,'Y','N'),('2018-06-25',482,6,'ZxBg_A_HtSc','司库管理画册1207定稿2.pdf','.pdf',18718321,12,'2018-06-25 16:22:30',NULL,NULL,2,'Y','N'),('2018-06-25',483,3,'WjHq_A_Zt1','需求获取交流文档要素.docx','.docx',76145,13,'2018-06-25 22:03:29',5,'2018-06-25 22:05:02',3,'Y','N'),('2018-06-25',484,3,'WjHq_A_Zt1C','需求获取交流文档要素.docx','.docx',76145,5,'2018-06-25 22:05:14',NULL,NULL,3,'Y','N'),('2018-06-25',485,3,'WjHq_A_Zt2','财务报销科目.xlsx','.xlsx',16827,5,'2018-06-25 22:05:53',NULL,NULL,3,'Y','N'),('2018-06-25',486,23,'ZxBg_A_YzZzSq_Qz','印章、证照使用审批单.docx','.docx',33714,10,'2018-06-25 23:46:14',10,'2018-06-26 00:12:52',3,'Y','N'),('2018-06-26',487,6,'ZxBg_A_HtSp','内蒙古庆源绿色金融资产管理有限公司督查督办工作管理办法-20180523-001.docx','.docx',78882,12,'2018-06-26 01:13:56',NULL,NULL,3,'Y','N'),('2018-06-26',488,6,'ZxBg_A_HtSp_Qz','合同审批单.docx','.docx',29526,12,'2018-06-26 01:37:03',12,'2018-06-26 01:37:18',3,'Y','N'),('2018-06-26',489,25,'ZxBg_A_YzZzSq_Qz','印章、证照使用审批单.docx','.docx',39838,10,'2018-06-26 01:51:21',10,'2018-06-26 01:51:32',3,'Y','N'),('2018-06-25',490,6,'ZxBg_A_HtSc_Qz','合同审查单.docx','.docx',30121,12,'2018-06-26 02:01:52',12,'2018-06-26 02:02:01',3,'Y','N'),('2018-06-25',491,1194,'Pf_A_BizProcRcd','异地安置审批表（丰台）.pdf','.pdf',24342,12,'2018-06-26 02:06:23',NULL,NULL,3,'Y','N'),('2018-06-26',492,28,'ZxBg_A_YzZzSq_1','沙漠2.gif','.gif',339613,13,'2018-06-26 02:10:04',NULL,NULL,3,'Y','N'),('2018-06-26',493,28,'ZxBg_A_YzZzSq_1','沙漠1.gif','.gif',377091,13,'2018-06-26 02:10:04',NULL,NULL,3,'Y','N'),('2018-06-26',494,28,'ZxBg_A_YzZzSq_2','沙漠4.gif','.gif',340536,13,'2018-06-26 02:10:25',NULL,NULL,3,'Y','N'),('2018-06-26',495,28,'ZxBg_A_YzZzSq_2','沙漠3.gif','.gif',339483,13,'2018-06-26 02:10:25',NULL,NULL,3,'Y','N'),('2018-06-26',496,28,'ZxBg_A_YzZzSq_Qz','印章、证照使用审批单.docx','.docx',32386,10,'2018-06-26 02:13:50',10,'2018-06-26 02:14:00',3,'Y','N'),('2018-06-26',497,4,'WjHq_A_Zt1','00、督办单.docx','.docx',16909,13,'2018-06-26 09:58:41',NULL,NULL,3,'Y','N'),('2018-05-22',502,6,'XxFb_A_PlNq','C:\\O_Swap\\1.jpeg','.jpeg',59756,5,'2018-07-10 15:05:27',NULL,NULL,1,'Y','N'),('2018-05-22',503,6,'XxFb_A_PlNq','C:\\O_Swap\\沙漠4.gif','.gif',340536,5,'2018-07-10 15:23:35',NULL,NULL,1,'Y','N'),('2018-05-22',504,6,'XxFb_A_PlNq','C:\\O_Swap\\1.jpeg','.jpeg',59756,5,'2018-07-10 15:27:11',NULL,NULL,1,'Y','N'),('2018-05-22',505,6,'XxFb_A_PlNq','C:\\O_Swap\\1.jpeg','.jpeg',59756,5,'2018-07-10 15:28:14',NULL,NULL,1,'Y','N'),('2018-05-22',506,6,'XxFb_A_PlNq','C:\\O_Swap\\1.jpeg','.jpeg',59756,5,'2018-07-10 15:39:56',NULL,NULL,1,'Y','N'),('2018-05-22',507,6,'XxFb_A_PlNq','C:\\O_Swap\\2.jpeg','.jpeg',29417,5,'2018-07-10 16:06:02',NULL,NULL,1,'Y','N'),('2018-05-22',508,6,'XxFb_A_PlNq','C:\\O_Swap\\2.jpeg','.jpeg',29417,5,'2018-07-10 16:10:20',NULL,NULL,1,'Y','N'),('2018-05-22',509,7,'XxFb_A_PlNq','C:\\O_Swap\\2.jpeg','.jpeg',29417,5,'2018-07-10 17:20:14',NULL,NULL,1,'Y','N'),('2018-07-09',515,24,'XxFb_A_Pl','01、云OA正式环境备忘.txt','.txt',6675,5,'2018-07-11 02:25:22',NULL,NULL,1,'Y','N'),('2018-07-12',524,1,'GsLt_A_ZtNq','C:\\O_Swap\\华春莹.jpeg','.jpeg',134938,2,'2018-07-12 17:15:28',NULL,NULL,1,'Y','N'),('2018-07-12',526,1,'GsLt_A_Zt','北京市异地安置审批表.xlsx','.xlsx',11742,2,'2018-07-12 17:23:33',NULL,NULL,3,'Y','N'),('2018-07-12',527,1,'GsLt_A_Zt','HR112录用条件确认书.docx','.docx',68928,2,'2018-07-12 17:23:33',NULL,NULL,3,'Y','N'),('2018-07-12',530,33,'GsLt_A_PlNq','C:\\O_Swap\\2.jpeg','.jpeg',29417,5,'2018-07-13 13:57:59',NULL,NULL,3,'Y','N'),('2018-07-16',531,2,'GsLt_A_ZtNq','C:\\O_Swap\\11.jpeg','.jpeg',98439,5,'2018-07-16 00:52:56',NULL,NULL,1,'Y','N'),('2018-07-16',532,41,'GsLt_A_PlNq','C:\\O_Swap\\1.jpeg','.jpeg',59756,4,'2018-07-16 00:59:39',NULL,NULL,3,'Y','N'),('2018-07-16',533,42,'GsLt_A_PlNq','C:\\O_Swap\\2.jpeg','.jpeg',29417,8,'2018-07-16 01:03:53',NULL,NULL,3,'Y','N'),('2018-07-16',534,44,'GsLt_A_Pl','沙漠1.gif','.gif',377091,3,'2018-07-16 01:22:27',NULL,NULL,3,'Y','N'),('2018-07-27',535,8,'JkBx_A_Jk_Qz','借款凭证-8.docx','.docx',34651,9,'2018-07-27 14:36:10',9,'2018-07-27 14:37:03',1,'Y','N'),('2018-07-27',536,25,'JkBx_A_Bx_Qz','报销凭证_25.docx','.docx',40251,15,'2018-07-27 21:49:44',15,'2018-08-15 00:36:09',1,'Y','N'),('2018-07-26',537,23,'JkBx_A_Bx_Qz','报销凭证_23.docx','.docx',39389,15,'2018-07-27 21:52:12',15,'2018-08-15 00:31:40',1,'Y','N'),('2018-07-30',538,26,'JkBx_A_Bx_Qz','报销凭证_26.docx','.docx',45439,15,'2018-07-30 14:51:24',15,'2018-07-30 14:51:53',1,'Y','N'),('2018-07-31',539,27,'JkBx_A_Bx_Qz','报销凭证_27.docx','.docx',47566,15,'2018-07-31 05:24:08',15,'2018-07-31 07:06:10',1,'Y','N'),('2018-08-01',540,6,'ZxBg_A_YfkSp','1.jpeg','.jpeg',59756,10,'2018-08-01 23:53:50',NULL,NULL,1,'Y','N'),('2018-08-01',541,6,'ZxBg_A_YfkSp_Qz','预付款审批单-6.docx','.docx',42916,11,'2018-08-01 23:55:57',11,'2018-08-01 23:56:09',1,'Y','N'),('2018-08-02',542,28,'JkBx_A_Bx_Qz','报销凭证_28.docx','.docx',51453,10,'2018-08-02 00:38:49',10,'2018-08-02 00:39:16',1,'Y','N'),('2018-08-02',543,29,'JkBx_A_Bx_Qz','报销凭证_29.docx','.docx',51459,10,'2018-08-02 00:47:59',10,'2018-08-02 00:48:26',1,'Y','N'),('2018-08-02',544,9,'JkBx_A_Jk_Qz','借款凭证-9.docx','.docx',44991,11,'2018-08-02 00:54:20',11,'2018-08-02 00:54:33',1,'Y','N'),('2018-08-02',545,30,'JkBx_A_Bx_Qz','报销凭证_30.docx','.docx',51426,10,'2018-08-02 01:10:39',10,'2018-08-02 01:11:05',1,'Y','N'),('2018-08-06',551,1316,'Pf_A_BizProcRcd','00、督办单.docx','.docx',16909,11,'2018-08-06 14:41:47',NULL,NULL,1,'Y','N'),('2018-08-11',554,7,'ZxBg_A_YfkSp','沙漠3.gif','.gif',339483,14,'2018-08-11 04:46:33',NULL,NULL,1,'Y','N'),('2018-08-11',555,7,'ZxBg_A_YfkSp_Qz','预付款审批单-7.docx','.docx',41784,14,'2018-08-11 04:48:08',14,'2018-08-11 05:02:36',1,'Y','N'),('2018-08-11',556,1,'CgSq_A_Zt','报销项.gif','.gif',670939,14,'2018-08-11 11:06:17',NULL,NULL,1,'Y','N'),('2018-08-11',557,1,'CgSq_A_Zt','异地安置申请表（丰台）.xls','.xls',32768,14,'2018-08-11 11:06:36',NULL,NULL,1,'Y','N'),('2018-08-11',558,32,'JkBx_A_Bx_Qz','报销凭证_32.docx','.docx',47529,16,'2018-08-11 13:20:06',16,'2018-08-15 00:21:26',1,'Y','N'),('2018-08-11',561,1,'CgSq_A_Zt_Qz','采购申请审批单-1.docx','.docx',54397,14,'2018-08-15 12:40:42',14,'2018-08-15 13:20:33',1,'Y','N'),('2018-08-18',562,29,'ZxBg_A_YzZzSq_Qz','印章、证照使用审批单.docx','.docx',38419,10,'2018-08-19 02:59:15',10,'2018-08-19 03:09:18',3,'Y','N'),('2018-08-21',563,10,'GsWjZw','第五部分  北京智控美信公司介绍.docx','.docx',22780,13,'2018-08-21 01:59:58',13,'2018-08-21 02:14:31',3,'Y','N'),('2018-08-21',564,10,'GsWjFj','北京市异地安置审批表.xlsx','.xlsx',11742,13,'2018-08-21 02:00:35',NULL,NULL,3,'Y','N'),('2018-08-21',565,10,'GsWjZwCopy','第五部分  北京智控美信公司介绍.docx','.docx',22953,2,'2018-08-21 02:04:36',NULL,NULL,3,'Y','N'),('2018-08-21',566,10,'GsWjZwZs','第五部分  北京智控美信公司介绍.docx','.docx',224517,13,'2018-08-21 02:05:40',13,'2018-08-21 02:15:24',3,'Y','N'),('2018-08-21',567,10,'GsWjZwZsPdf','第五部分  北京智控美信公司介绍.pdf','.pdf',597962,10,'2018-08-21 02:18:15',10,'2018-08-21 02:18:37',3,'Y','N'),('2018-08-21',568,16,'ZxBg_A_FkSp','2.jpeg','.jpeg',29417,12,'2018-08-21 17:15:49',NULL,NULL,1,'Y','N'),('2018-08-21',569,16,'ZxBg_A_FkSp','HR112录用条件确认书.docx','.docx',68928,12,'2018-08-21 17:15:49',NULL,NULL,1,'Y','N'),('2018-08-21',570,16,'ZxBg_A_FkSp_Qz','项目付款审批单.docx','.docx',47695,11,'2018-08-21 17:45:54',11,'2018-08-21 18:13:21',1,'Y','N'),('2018-08-21',571,17,'ZxBg_A_FkSp_Qz','项目付款审批单.docx','.docx',47722,11,'2018-08-21 18:22:38',11,'2018-08-21 18:22:48',1,'Y','N'),('2018-08-21',572,18,'ZxBg_A_FkSp','立项申请表COAQY.docx','.docx',36548,14,'2018-08-21 18:32:29',NULL,NULL,1,'Y','N'),('2018-08-21',573,18,'ZxBg_A_FkSp_Qz','项目付款审批单.docx','.docx',47762,11,'2018-08-21 18:35:24',11,'2018-08-21 18:35:34',1,'Y','N'),('2018-08-21',574,19,'ZxBg_A_FkSp','异地安置审批表（丰台）.pdf','.pdf',24342,12,'2018-08-21 19:06:09',NULL,NULL,3,'Y','N'),('2018-08-21',575,19,'ZxBg_A_FkSp_Qz','项目付款审批单.docx','.docx',47759,11,'2018-08-21 19:21:49',11,'2018-08-21 19:22:03',1,'Y','N'),('2018-08-21',576,20,'ZxBg_A_FkSp_Qz','项目付款审批单.docx','.docx',47728,11,'2018-08-21 19:33:39',11,'2018-08-21 19:33:52',3,'Y','N'),('2018-08-21',577,21,'ZxBg_A_FkSp','财务报销科目.xlsx','.xlsx',16827,12,'2018-08-21 19:38:13',NULL,NULL,1,'Y','N'),('2018-08-21',578,21,'ZxBg_A_FkSp_Qz','项目付款审批单.docx','.docx',47700,11,'2018-08-21 19:43:04',11,'2018-08-21 19:43:12',3,'Y','N'),('2018-08-23',579,8,'ZxBg_A_YfkSp','IMG_1084.JPG','.JPG',1583955,12,'2018-08-23 08:25:20',NULL,NULL,1,'Y','N'),('2018-08-23',580,8,'ZxBg_A_YfkSp_Qz','预付款审批单-8.docx','.docx',42130,12,'2018-08-23 08:27:54',12,'2018-08-23 10:37:53',3,'Y','N'),('2018-08-23',581,2,'CgSq_A_Zt_Qz','采购申请审批单-2.docx','.docx',51326,12,'2018-08-23 10:29:14',12,'2018-09-01 00:38:56',3,'Y','N'),('2018-08-23',582,22,'ZxBg_A_FkSp_Qz','项目付款审批单.docx','.docx',47693,11,'2018-08-23 10:36:25',11,'2018-08-23 10:36:40',3,'Y','N'),('2018-08-23',583,33,'JkBx_A_Bx_Qz','报销凭证_33.docx','.docx',52412,12,'2018-08-23 10:45:22',12,'2018-08-23 10:45:53',3,'Y','N'),('2018-08-23',584,6,'JkBx_A_Hk_Qz','还款凭证-6.docx','.docx',34877,11,'2018-08-23 10:55:41',11,'2018-08-23 11:29:35',3,'Y','N'),('2018-08-23',585,7,'ZxBg_A_HtSc','1.jpeg','.jpeg',59756,12,'2018-08-23 14:52:45',NULL,NULL,3,'Y','N'),('2018-08-23',586,7,'ZxBg_A_HtSc','第五部分  北京智控美信公司介绍.docx','.docx',456224,12,'2018-08-23 14:52:45',12,'2018-09-03 15:24:59',3,'Y','N'),('2018-08-23',587,7,'ZxBg_A_HtSc_Qz','合同审查单.docx','.docx',30120,12,'2018-08-23 14:59:45',12,'2018-08-23 14:59:57',3,'Y','N'),('2018-08-31',588,11,'GsWjZw','第五部分  北京智控美信公司介绍.docx','.docx',22852,13,'2018-08-31 22:33:27',13,'2018-08-31 22:51:43',3,'Y','N'),('2018-08-31',589,11,'GsWjFj','北京市异地安置审批表.xlsx','.xlsx',12126,13,'2018-08-31 22:43:17',13,'2018-08-31 22:44:00',3,'Y','N'),('2018-08-31',590,11,'GsWjFj','签报反馈.docx','.docx',103321,13,'2018-08-31 22:43:17',13,'2018-08-31 22:45:41',3,'Y','N'),('2018-08-31',591,11,'GsWjZwCopy','第五部分  北京智控美信公司介绍.docx','.docx',23031,4,'2018-08-31 22:50:52',NULL,NULL,3,'Y','N'),('2018-08-31',592,11,'GsWjZwZs','第五部分  北京智控美信公司介绍.docx','.docx',358709,13,'2018-08-31 22:51:46',10,'2018-08-31 22:57:09',3,'Y','N'),('2018-08-31',593,6,'DcDb_A_Zt','第五部分  北京智控美信公司介绍.docx','.docx',22770,2,'2018-08-31 23:29:18',NULL,NULL,3,'Y','N'),('2018-08-31',594,17,'DcDb_A_Fk','出差员工住房补助申请表-刘赣平.doc','.doc',46592,5,'2018-08-31 23:30:42',NULL,NULL,3,'Y','N'),('2018-08-31',595,18,'DcDb_A_Fk','2.jpeg','.jpeg',29417,5,'2018-08-31 23:32:39',NULL,NULL,3,'Y','N'),('2018-08-31',596,6,'DcDb_A_Zt_Gd','督办单-6.docx','.docx',15676,2,'2018-08-31 23:33:25',2,'2018-08-31 23:33:32',3,'Y','N'),('2018-09-03',597,7,'ZxBg_A_HtSp','第五部分  北京智控美信公司介绍.docx','.docx',541716,12,'2018-09-03 16:20:37',12,'2018-09-07 05:41:53',3,'Y','N'),('2018-09-07',599,31,'ZxBg_A_YzZzSq_1','apache-tomcat-7.0.85.zip','.zip',10064579,13,'2018-09-07 12:25:09',NULL,NULL,1,'Y','N'),('2018-09-07',600,31,'ZxBg_A_YzZzSq_1','录屏专家破解版.rar','.rar',18428302,13,'2018-09-07 12:25:29',NULL,NULL,3,'Y','N'),('2018-09-28',601,37,'JkBx_A_Bx_Qz','报销凭证_37.docx','.docx',50894,13,'2018-10-03 13:37:00',13,'2018-10-03 13:37:24',1,'Y','N'),('2018-10-06',602,9,'ZxBg_A_LxSq','仿照鲁迅文笔《纪念昆山龙哥》.docx','.docx',18025,12,'2018-10-06 16:50:34',NULL,NULL,1,'Y','N'),('2018-10-06',603,39,'JkBx_A_Bx_Qz','报销凭证_39.docx','.docx',56594,12,'2018-10-06 17:31:16',12,'2018-10-06 17:31:40',1,'Y','N'),('2018-10-06',604,9,'ZxBg_A_LxSq_Qz','立项申请表.docx','.docx',35427,12,'2018-10-07 01:30:27',12,'2018-10-07 01:30:37',1,'Y','N'),('2018-10-07',605,6,'ZxBg_A_JzDc','HR112录用条件确认书.docx','.docx',68928,12,'2018-10-07 01:39:09',NULL,NULL,1,'Y','N'),('2018-10-07',606,8,'ZxBg_A_XmSc_Qz1','项目审查-经营决策委员会成本效益审查表.docx','.docx',33557,14,'2018-10-07 02:47:15',14,'2018-10-07 02:47:25',1,'Y','N'),('2018-10-07',607,8,'ZxBg_A_XmSc_Qz2','项目审查-经营决策委员会决策项目方案审核表.docx','.docx',39617,14,'2018-10-07 02:47:41',14,'2018-10-07 02:49:38',1,'Y','N'),('2018-10-07',608,5,'ZxBg_A_FaSp_Qz','实施方案审批表.docx','.docx',18089,14,'2018-10-07 03:03:00',14,'2018-10-07 18:41:18',1,'Y','N'),('2018-10-07',609,8,'ZxBg_A_HtSp','徐家宝仿鲁迅.docx','.docx',19419,12,'2018-10-07 03:16:23',NULL,NULL,1,'Y','N'),('2018-10-07',610,8,'ZxBg_A_HtSp_Qz','合同审批单.docx','.docx',29508,12,'2018-10-07 03:18:50',12,'2018-10-07 03:19:02',1,'Y','N'),('2018-10-07',612,23,'ZxBg_A_FkSp','华春莹.jpeg','.jpeg',134938,12,'2018-10-07 03:48:43',NULL,NULL,1,'Y','N'),('2018-10-07',613,23,'ZxBg_A_FkSp','597.docx','.docx',1010797,12,'2018-10-07 03:48:43',NULL,NULL,1,'Y','N'),('2018-10-07',614,23,'ZxBg_A_FkSp_Qz','项目付款审批单.docx','.docx',47651,11,'2018-10-07 03:57:35',11,'2018-10-07 03:57:50',1,'Y','N'),('2018-10-07',615,34,'ZxBg_A_YzZzSq_Qz','印章、证照使用审批单.docx','.docx',38446,10,'2018-10-07 20:51:03',10,'2018-10-07 20:51:27',1,'Y','N'),('2018-10-17',618,3,'CgSq_A_Zt_Qz','采购申请审批单-3.docx','.docx',48290,13,'2018-10-17 01:25:57',13,'2018-10-17 01:29:50',1,'Y','N'),('2018-10-28',619,3,'Dsj_A_Xd','庆源OA项目微信小程序20181029.doc','.doc',61952,7,'2018-10-28 02:46:20',NULL,NULL,1,'Y','N'),('2018-11-02',620,2,'Da_A_Jj','2018聚会通知0913_201809291001081.pdf','.pdf',405371,12,'2018-11-02 16:37:15',NULL,NULL,1,'Y','N'),('2018-11-02',621,2,'Da_A_Jj','仿照鲁迅文笔《纪念昆山龙哥》.docx','.docx',18025,12,'2018-11-02 16:37:15',NULL,NULL,1,'Y','N'),('2018-11-03',622,3,'Xj_A_Zt','20180719_1jpeg.jpeg','.jpeg',22405,13,'2018-11-03 01:38:16',NULL,NULL,1,'Y','N'),('2018-11-03',623,3,'Xj_A_Zt','华春莹.jpeg','.jpeg',134938,13,'2018-11-03 01:38:16',NULL,NULL,1,'Y','N'),('2018-11-02',626,1593,'Pf_A_BizProcRcd','IEDS-里程碑计划-COAQY-180227-01.xlsx','.xlsx',66722,10,'2018-11-03 09:49:56',NULL,NULL,1,'Y','N'),('2018-11-02',627,1593,'Pf_A_BizProcRcd','庆源项目补文档计划-20180925.xlsx','.xlsx',13082,10,'2018-11-03 09:49:56',NULL,NULL,1,'Y','N'),('2018-11-03',628,3,'Da_A_Jj','庆源OA运行月报-201810.docx','.docx',23812,12,'2018-11-03 09:55:44',NULL,NULL,1,'Y','N'),('2018-11-03',629,3,'Da_A_Jj','庆源项目补文档计划-20180925.xlsx','.xlsx',13082,12,'2018-11-03 09:55:44',NULL,NULL,1,'Y','N'),('2018-11-03',630,3,'Da_A_Jj','庆源OA项目微信小程序工程进展20181102.doc','.doc',63488,12,'2018-11-03 09:55:44',NULL,NULL,1,'Y','N'),('2018-11-03',631,4,'Da_A_Jj','庆源OA开发计划.docx','.docx',25601,12,'2018-11-03 23:45:54',NULL,NULL,1,'Y','N'),('2018-11-04',632,5,'GsSwZw','异地安置审批表（丰台）.pdf','.pdf',24342,13,'2018-11-04 00:29:34',NULL,NULL,1,'Y','N'),('2018-11-09',633,2,'Da_A_Jy','2.jpeg','.jpeg',29417,12,'2018-11-09 00:24:14',NULL,NULL,1,'Y','N'),('2018-11-09',634,2,'Da_A_Jy','HR602职位说明书模板.docx','.docx',26655,12,'2018-11-09 00:24:14',NULL,NULL,1,'Y','N'),('2018-11-09',635,5,'Da_A_Jj','01、通用办公-工作周报 用户手册.docx','.docx',368580,12,'2018-11-09 12:35:08',NULL,NULL,1,'Y','N'),('2018-11-10',636,7,'DcDb_A_Zt','徐家宝仿鲁迅.docx','.docx',19419,7,'2018-11-10 15:54:40',NULL,NULL,1,'Y','N'),('2018-11-10',637,19,'DcDb_A_Fk','仿照鲁迅文笔《纪念昆山龙哥》.docx','.docx',18025,10,'2018-11-10 15:57:03',NULL,NULL,1,'Y','N'),('2018-11-10',638,7,'DcDb_A_Zt_Gd','督办单-7.docx','.docx',15612,7,'2018-11-10 20:16:48',7,'2018-11-10 20:34:06',1,'Y','N'),('2018-11-10',639,1629,'Pf_A_BizProcRcd','2.jpeg','.jpeg',29417,7,'2018-11-10 20:35:33',NULL,NULL,1,'Y','N'),('2018-11-10',640,1629,'Pf_A_BizProcRcd','HR112录用条件确认书.docx','.docx',68928,7,'2018-11-10 20:46:02',NULL,NULL,1,'Y','N'),('2018-11-04',641,5,'GsSwFj','简述数控设备在家具制造中的应用_1000001503553911.pdf','.pdf',859054,13,'2018-11-10 22:12:24',NULL,NULL,2,'Y','N'),('2018-11-04',642,1626,'Pf_A_BizProcRcd','苏州天弘激光设备有限公司_1000006404392711.pdf','.pdf',72543,13,'2018-11-10 22:12:52',NULL,NULL,1,'Y','N'),('2018-11-04',643,1626,'Pf_A_BizProcRcd','1.jpeg','.jpeg',59756,13,'2018-11-10 22:13:14',NULL,NULL,1,'Y','N'),('2018-11-10',644,6,'Da_A_Jj','HR602职位说明书模板.docx','.docx',26655,12,'2018-11-10 22:48:54',NULL,NULL,1,'Y','N'),('2018-11-11',645,3,'Da_A_Jy','20180719_1jpeg.jpeg','.jpeg',22405,14,'2018-11-11 01:05:59',NULL,NULL,1,'Y','N'),('2018-11-20',646,8,'DcDb_A_Zt','庆源OA需求梳理-20181119-001.docx','.docx',40234,2,'2018-11-20 13:36:24',NULL,NULL,1,'Y','N'),('2018-11-20',647,20,'DcDb_A_Fk','工资条模板N3.xlsx','.xlsx',12062,5,'2018-11-20 13:37:29',NULL,NULL,1,'Y','N'),('2018-11-20',648,20,'DcDb_A_Fk','工资条模板N4.xlsx','.xlsx',12326,5,'2018-11-20 13:37:29',NULL,NULL,1,'Y','N'),('2018-11-20',649,7,'Da_A_Jj','简述数控设备在家具制造中的应用_1000001503553911.pdf','.pdf',859054,12,'2018-11-20 22:54:55',NULL,NULL,1,'Y','N'),('2018-11-03',650,1591,'Pf_A_BizProcRcd','20180720-1.jpeg','.jpeg',134479,5,'2018-11-21 00:10:44',NULL,NULL,2,'Y','N'),('2018-11-03',651,1591,'Pf_A_BizProcRcd','2.jpeg','.jpeg',29417,5,'2018-11-21 00:10:44',NULL,NULL,2,'Y','N'),('2018-11-21',652,4,'CgSq_A_Zt','北京市异地安置审批表.xlsx','.xlsx',11742,12,'2018-11-21 03:47:20',NULL,NULL,2,'Y','N'),('2018-11-21',653,1662,'Pf_A_BizProcRcd','HR112录用条件确认书.docx','.docx',68928,12,'2018-11-21 03:50:26',NULL,NULL,2,'Y','N'),('2018-11-21',654,1662,'Pf_A_BizProcRcd','报销项.gif','.gif',670939,12,'2018-11-21 03:50:26',NULL,NULL,2,'Y','N'),('2018-11-21',655,9,'ZxBg_A_YfkSp','桥-猫头鹰.jpg','.jpg',172048,12,'2018-11-21 05:22:36',NULL,NULL,1,'Y','N'),('2018-11-21',656,1666,'Pf_A_BizProcRcd','20181012-3.jpg','.jpg',32506,12,'2018-11-21 05:23:28',NULL,NULL,1,'Y','N'),('2018-11-21',657,1666,'Pf_A_BizProcRcd','20180720-3.jpeg','.jpeg',113567,12,'2018-11-21 05:23:28',NULL,NULL,1,'Y','N'),('2018-11-21',658,1678,'Pf_A_BizProcRcd','文化墙.docx','.docx',559382,12,'2018-11-21 19:50:38',NULL,NULL,1,'Y','N'),('2018-11-21',659,10,'JkBx_A_Jk_Qz','借款凭证-10.docx','.docx',44554,11,'2018-11-21 20:02:30',11,'2018-11-21 20:02:39',2,'Y','N'),('2018-10-03',660,1685,'Pf_A_BizProcRcd','北京市异地安置审批表.xlsx','.xlsx',11742,9,'2018-11-21 22:08:03',NULL,NULL,2,'Y','N'),('2018-10-03',661,1685,'Pf_A_BizProcRcd','2.jpeg','.jpeg',29417,9,'2018-11-21 22:08:03',NULL,NULL,2,'Y','N'),('2018-11-21',662,5,'WjHq_A_Zt1','HR602职位说明书模板.docx','.docx',26493,14,'2018-11-21 22:38:57',14,'2018-11-22 03:22:38',2,'Y','N'),('2018-11-21',663,1692,'Pf_A_BizProcRcd','20181012-2.jpg','.jpg',17079,14,'2018-11-21 22:39:41',NULL,NULL,2,'Y','N'),('2018-11-21',664,1692,'Pf_A_BizProcRcd','1.jpeg','.jpeg',59756,14,'2018-11-21 22:39:41',NULL,NULL,2,'Y','N'),('2018-11-21',665,5,'WjHq_A_Zt1C','HR602职位说明书模板.docx','.docx',26493,14,'2018-11-22 03:21:27',14,'2018-11-22 08:00:00',2,'Y','N'),('2018-11-21',666,5,'WjHq_A_Zt2','HR112录用条件确认书.docx','.docx',68928,5,'2018-11-22 11:23:33',NULL,NULL,2,'Y','N'),('2018-11-22',667,12,'Gz_A_Zt','工资条模板N4.xlsx','.xlsx',12326,16,'2018-11-22 12:15:02',NULL,NULL,1,'Y','N'),('2018-11-22',668,1701,'Pf_A_BizProcRcd','工资条模板N2.xlsx','.xlsx',11389,16,'2018-11-22 12:15:41',NULL,NULL,1,'Y','N'),('2018-11-22',669,1701,'Pf_A_BizProcRcd','工资条模板N3.xlsx','.xlsx',12062,16,'2018-11-22 12:15:41',NULL,NULL,1,'Y','N'),('2018-11-25',670,10,'ZxBg_A_LxSq','庆源OA需求梳理-20181119-001.docx','.docx',40234,12,'2018-11-25 15:41:09',NULL,NULL,1,'Y','N'),('2018-11-25',671,1703,'Pf_A_BizProcRcd','庆源OA需求梳理-20180814-001.docx','.docx',197080,12,'2018-11-25 15:41:52',NULL,NULL,2,'Y','N'),('2018-11-25',672,1703,'Pf_A_BizProcRcd','庆源OA需求梳理-20180723-Pending.docx','.docx',60014,12,'2018-11-25 15:41:52',NULL,NULL,2,'Y','N'),('2018-11-25',673,10,'ZxBg_A_LxSq_Qz','立项申请表.docx','.docx',35406,12,'2018-11-25 16:03:27',12,'2018-11-25 16:03:38',1,'Y','N'),('2018-11-25',674,7,'ZxBg_A_JzDc','组织机构.jpg','.jpg',115176,12,'2018-11-25 16:23:13',NULL,NULL,1,'Y','N'),('2018-11-25',675,7,'ZxBg_A_JzDc','庆源OA需求[读书角]整理-20180525-001.docx','.docx',16711,12,'2018-11-25 16:23:13',NULL,NULL,1,'Y','N'),('2018-11-25',676,1711,'Pf_A_BizProcRcd','附件2-经营决策委员会合规及风险审查表.docx','.docx',14816,12,'2018-11-25 16:23:54',NULL,NULL,1,'Y','N'),('2018-11-25',677,1711,'Pf_A_BizProcRcd','附件1-业务办理记录单.docx','.docx',19307,12,'2018-11-25 16:23:54',NULL,NULL,1,'Y','N'),('2018-11-25',678,1714,'Pf_A_BizProcRcd','科电新建虚拟机信息.xlsx','.xlsx',11083,12,'2018-11-25 19:28:03',NULL,NULL,1,'Y','N'),('2018-11-25',679,1714,'Pf_A_BizProcRcd','memo.docx','.docx',17704,12,'2018-11-25 19:28:03',NULL,NULL,1,'Y','N'),('2018-11-25',680,9,'ZxBg_A_XmSc_Qz1','项目审查-经营决策委员会成本效益审查表.docx','.docx',33567,14,'2018-11-26 11:08:44',14,'2018-11-26 11:08:53',2,'Y','N'),('2018-11-25',681,9,'ZxBg_A_XmSc_Qz2','项目审查-经营决策委员会决策项目方案审核表.docx','.docx',32801,14,'2018-11-26 11:09:01',14,'2018-11-26 11:09:08',1,'Y','N'),('2018-11-26',682,1722,'Pf_A_BizProcRcd','2.jpeg','.jpeg',29417,14,'2018-11-26 11:15:00',NULL,NULL,2,'Y','N'),('2018-11-26',683,1722,'Pf_A_BizProcRcd','1.jpeg','.jpeg',59756,14,'2018-11-26 11:15:00',NULL,NULL,2,'Y','N'),('2018-11-26',684,6,'ZxBg_A_FaSp_Qz','实施方案审批表.docx','.docx',22822,14,'2018-11-26 11:56:06',14,'2018-11-26 11:56:13',1,'Y','N'),('2018-11-26',685,9,'ZxBg_A_HtSp','招聘.docx','.docx',19881,12,'2018-11-26 14:40:51',NULL,NULL,1,'Y','N'),('2018-11-26',686,1725,'Pf_A_BizProcRcd','HR602职位说明书模板.docx','.docx',26655,12,'2018-11-26 14:41:32',NULL,NULL,1,'Y','N'),('2018-11-26',687,1725,'Pf_A_BizProcRcd','HR112录用条件确认书.docx','.docx',68928,12,'2018-11-26 14:41:32',NULL,NULL,1,'Y','N'),('2018-11-26',688,9,'ZxBg_A_HtSp_Qz','合同审批单.docx','.docx',29542,12,'2018-11-26 14:48:01',12,'2018-11-26 14:48:11',2,'Y','N'),('2018-11-26',689,8,'ZxBg_A_HtSc','徐家宝仿鲁迅.docx','.docx',19419,12,'2018-11-26 16:14:51',NULL,NULL,2,'Y','N'),('2018-11-26',690,1731,'Pf_A_BizProcRcd','20181012-3.jpg','.jpg',32506,12,'2018-11-26 16:15:37',NULL,NULL,2,'Y','N'),('2018-11-26',691,1731,'Pf_A_BizProcRcd','第五部分  北京智控美信公司介绍.docx','.docx',22770,12,'2018-11-26 16:15:37',NULL,NULL,2,'Y','N'),('2018-11-26',692,8,'ZxBg_A_HtSc_Qz','合同审查单.docx','.docx',30117,12,'2018-11-26 16:24:13',12,'2018-11-26 16:24:25',1,'Y','N'),('2018-11-27',693,8,'Da_A_Jj','HR602职位说明书模板.docx','.docx',26655,14,'2018-11-27 10:17:58',NULL,NULL,1,'Y','N'),('2018-11-27',694,8,'Da_A_Jj','HR112录用条件确认书.docx','.docx',68928,14,'2018-11-27 10:17:58',NULL,NULL,1,'Y','N'),('2018-11-27',695,1737,'Pf_A_BizProcRcd','第五部分  北京智控美信公司介绍.docx','.docx',22770,14,'2018-11-27 10:18:41',NULL,NULL,2,'Y','N'),('2018-11-27',696,1737,'Pf_A_BizProcRcd','出差员工住房补助申请表-刘赣平.doc','.doc',46592,14,'2018-11-27 10:18:41',NULL,NULL,2,'Y','N'),('2018-11-26',697,1730,'Pf_A_BizProcRcd','HR602职位说明书模板.docx','.docx',26655,12,'2018-11-27 15:31:37',NULL,NULL,2,'Y','N'),('2018-11-26',698,1730,'Pf_A_BizProcRcd','HR112录用条件确认书.docx','.docx',68928,12,'2018-11-27 15:31:37',NULL,NULL,2,'Y','N'),('2018-11-26',699,36,'ZxBg_A_YzZzSq_Qz','印章、证照使用审批单.docx','.docx',38456,10,'2018-11-27 16:19:45',10,'2018-11-27 16:20:39',1,'Y','N'),('2018-11-27',700,24,'ZxBg_A_FkSp','2.jpeg','.jpeg',29417,12,'2018-11-27 16:54:39',NULL,NULL,1,'Y','N'),('2018-11-27',701,24,'ZxBg_A_FkSp','HR112录用条件确认书.docx','.docx',68928,12,'2018-11-27 16:54:39',NULL,NULL,1,'Y','N'),('2018-11-27',702,1745,'Pf_A_BizProcRcd','出差员工住房补助申请表-刘赣平.doc','.doc',46592,12,'2018-11-27 16:55:23',NULL,NULL,2,'Y','N'),('2018-11-27',703,1745,'Pf_A_BizProcRcd','20181012-3.jpg','.jpg',32506,12,'2018-11-27 16:55:23',NULL,NULL,2,'Y','N'),('2018-11-27',704,24,'ZxBg_A_FkSp_Qz','项目付款审批单.docx','.docx',50774,11,'2018-11-27 17:02:48',11,'2018-11-27 17:03:01',1,'Y','N'),('2018-12-12',718,45,'JkBx_A_BxQt71','20180719_1jpeg.jpeg','.jpeg',22405,13,'2018-12-12 22:00:29',NULL,NULL,2,'Y','N'),('2018-12-12',720,45,'JkBx_A_BxQt71','机关财务记账系统需求.doc','.doc',31744,13,'2018-12-12 22:01:43',NULL,NULL,2,'Y','N'),('2018-12-12',721,41,'JkBx_A_Bx_Qz','报销凭证_41.docx','.docx',50517,13,'2018-12-12 22:06:44',13,'2018-12-12 22:07:15',2,'Y','N'),('2018-12-12',732,46,'JkBx_A_BxQt71','11.jpeg','.jpeg',98439,13,'2018-12-13 00:02:18',NULL,NULL,2,'Y','N'),('2018-12-12',735,46,'JkBx_A_BxQt71','2.jpeg','.jpeg',29417,13,'2018-12-13 00:13:29',NULL,NULL,2,'Y','N'),('2018-10-08',736,9,'Pf_A_BizDelMemo','2.jpeg','.jpeg',29417,14,'2019-01-11 04:01:24',NULL,NULL,2,'Y','N'),('2018-07-10',737,10,'Pf_A_BizDelMemo','2.jpeg','.jpeg',29417,14,'2019-01-11 04:01:41',NULL,NULL,2,'Y','N'),('2018-07-09',738,11,'Pf_A_BizDelMemo','2.jpeg','.jpeg',29417,14,'2019-01-11 04:03:33',NULL,NULL,2,'Y','N'),('2018-07-09',739,12,'Pf_A_BizDelMemo','2.jpeg','.jpeg',29417,14,'2019-01-11 04:04:08',NULL,NULL,2,'Y','N'),('2018-06-04',740,13,'Pf_A_BizDelMemo','2.jpeg','.jpeg',29417,14,'2019-01-11 04:06:03',NULL,NULL,2,'Y','N'),('2019-01-11',741,189,'XxFb_A_ZtNq','C:\\F_Swap\\2.jpeg','.jpeg',29417,14,'2019-01-11 04:55:23',NULL,NULL,2,'Y','N'),('2018-08-23',742,7,'ZxBg_A_HtSc_2DC','合同审查7二维码图片.png','.png',102400,12,'2019-02-25 10:05:11',NULL,NULL,1,'Y','N'),('2019-03-04',751,9,'ZxBg_A_HtSc','借款合同.doc','.doc',37376,12,'2019-03-04 07:44:35',12,'2019-03-13 00:16:28',1,'N','N'),('2019-03-04',752,9,'ZxBg_A_HtSc_2DC','合同审查9二维码图片.png','.png',102400,12,'2019-03-04 07:47:13',12,'2019-03-12 23:29:21',1,'Y','N'),('2019-03-04',753,751,'ZxBg_A_HtSc_Td','借款合同.docx','.docx',493146,12,'2019-03-04 07:48:32',10,'2019-03-13 00:18:36',1,'Y','N'),('2019-03-04',754,751,'ZxBg_A_HtSc_TdPdf','借款合同.pdf','.pdf',534498,12,'2019-03-04 08:03:29',10,'2019-03-13 00:18:58',2,'Y','N'),('2019-03-04',755,9,'ZxBg_A_HtSc_Qz','合同审查单.docx','.docx',30196,12,'2019-03-06 03:23:05',12,'2019-03-06 03:23:07',2,'Y','N'),('2018-04-02',756,5,'GsWjZwZsPdf','第五部分  北京智控美信公司介绍.pdf','.pdf',598368,10,'2019-03-06 08:05:16',10,'2019-03-06 08:10:12',2,'Y','N'),('2019-03-06',757,6,'WjHq_A_Zt1','北京市异地安置审批表.xlsx','.xlsx',244887,16,'2019-03-06 18:45:48',10,'2019-03-06 19:50:00',1,'N','N'),('2019-03-06',758,6,'WjHq_A_Zt1','徐家宝仿鲁迅.docx','.docx',19484,16,'2019-03-06 18:45:48',16,'2019-03-06 19:02:27',1,'N','N'),('2019-03-06',759,6,'WjHq_A_Zt1','仿照鲁迅文笔《纪念昆山龙哥》.docx','.docx',18091,16,'2019-03-06 18:45:48',16,'2019-03-06 19:17:38',1,'N','N'),('2019-03-06',760,6,'WjHq_A_Zt1C','北京市异地安置审批表.xlsx','.xlsx',11742,7,'2019-03-06 18:48:41',NULL,NULL,1,'Y','N'),('2019-03-06',761,6,'WjHq_A_Zt1C','徐家宝仿鲁迅.docx','.docx',19419,7,'2019-03-06 18:48:41',NULL,NULL,1,'Y','N'),('2019-03-06',762,6,'WjHq_A_Zt1C','仿照鲁迅文笔《纪念昆山龙哥》.docx','.docx',18077,7,'2019-03-06 18:48:41',NULL,NULL,1,'Y','N'),('2019-03-06',763,6,'WjHq_A_Zt2','memo.docx','.docx',17710,5,'2019-03-06 18:50:57',NULL,NULL,1,'N','N'),('2019-03-06',764,6,'WjHq_A_Zt_2DC','非业务合同审批6二维码图片.png','.png',102400,16,'2019-03-06 18:51:42',NULL,NULL,1,'Y','N'),('2019-03-06',765,758,'WjHq_A_Zt1_Td','徐家宝仿鲁迅.docx','.docx',1718053,16,'2019-03-06 18:52:11',10,'2019-03-06 19:28:55',1,'Y','N'),('2019-03-06',766,759,'WjHq_A_Zt1_Td','仿照鲁迅文笔《纪念昆山龙哥》.docx','.docx',1720852,16,'2019-03-06 18:54:01',10,'2019-03-06 19:34:12',1,'Y','N'),('2019-03-06',767,759,'WjHq_A_Zt1_TdPdf','仿照鲁迅文笔《纪念昆山龙哥》.pdf','.pdf',443308,10,'2019-03-06 19:36:38',10,'2019-03-06 19:36:47',2,'Y','N'),('2019-03-06',768,758,'WjHq_A_Zt1_TdPdf','徐家宝仿鲁迅.pdf','.pdf',579786,10,'2019-03-06 19:36:56',10,'2019-03-06 19:37:02',2,'Y','N'),('2019-03-21',769,11,'ZxBg_A_LxSq','北京市异地安置审批表.xlsx','.xlsx',11742,12,'2019-03-21 17:23:27',NULL,NULL,3,'N','N'),('2019-03-21',770,11,'ZxBg_A_LxSq','第五部分  北京智控美信公司介绍.docx','.docx',22770,12,'2019-03-21 17:23:27',NULL,NULL,3,'N','N'),('2019-03-21',771,11,'ZxBg_A_LxSq_Qz','立项申请表.docx','.docx',28624,12,'2019-03-21 19:00:15',12,'2019-03-22 10:27:39',3,'Y','N'),('2019-03-22',772,8,'ZxBg_A_JzDc','IEDS-2-78软件配置管理控制程序.doc','.doc',254976,12,'2019-03-22 10:57:42',NULL,NULL,3,'N','N'),('2019-03-22',773,8,'ZxBg_A_JzDc','IEDS-2-73软件产品设计和开发控制程序.docx','.docx',1075129,12,'2019-03-22 10:57:42',NULL,NULL,3,'N','N'),('2019-03-22',774,9,'ZxBg_A_JzDc','IEDS-2-85需求管理程序.docx','.docx',115504,12,'2019-03-22 14:31:02',NULL,NULL,2,'N','N'),('2019-03-22',775,9,'ZxBg_A_JzDc','IEDS-2-84项目监督与控制程序.docx','.docx',228748,12,'2019-03-22 14:31:02',NULL,NULL,2,'N','N'),('2019-03-22',776,10,'ZxBg_A_XmSc_Qz1','项目审查-项目法律合规审查意见表.docx','.docx',22076,14,'2019-03-23 20:54:28',14,'2019-03-23 21:04:07',2,'Y','N'),('2019-03-22',777,10,'ZxBg_A_XmSc_Qz2','项目审查-项目风险审查意见表.docx','.docx',22286,14,'2019-03-23 20:55:47',14,'2019-03-23 21:03:11',2,'Y','N'),('2019-03-22',778,10,'ZxBg_A_XmSc_Qz3','项目审查-项目财务审查意见表.docx','.docx',29656,14,'2019-03-23 20:56:03',14,'2019-03-23 21:04:22',2,'Y','N'),('2019-03-25',779,8,'ZxBg_A_FaSp_Tz','决策会会议通知.docx','.docx',16053,14,'2019-03-25 13:41:24',14,'2019-03-25 14:05:12',2,'Y','N'),('2019-03-25',780,8,'ZxBg_A_FaSp_Qz','项目表决结果表.docx','.docx',42348,14,'2019-03-25 16:01:44',14,'2019-03-25 16:05:58',2,'Y','N'),('2019-03-25',781,8,'ZxBg_A_FaSp_Jy','决策会会议纪要.docx','.docx',22592,14,'2019-03-25 16:38:26',14,'2019-03-25 16:40:55',2,'Y','N'),('2019-03-26',782,10,'ZxBg_A_HtSp','北京市异地安置审批表.xlsx','.xlsx',244941,12,'2019-03-26 11:51:34',10,'2019-03-26 12:09:59',2,'N','N'),('2019-03-26',783,10,'ZxBg_A_HtSp','借款合同.doc','.doc',36864,12,'2019-03-26 11:51:34',12,'2019-03-26 11:58:58',2,'N','N'),('2019-03-26',784,10,'ZxBg_A_HtSp','第五部分  北京智控美信公司介绍.docx','.docx',22828,12,'2019-03-26 11:51:34',12,'2019-03-26 11:58:21',2,'N','N'),('2019-03-26',785,10,'ZxBg_A_HtSp_2DC','合同审批10二维码图片.png','.png',102400,12,'2019-03-26 11:57:27',NULL,NULL,2,'Y','N'),('2019-03-26',786,784,'ZxBg_A_HtSp_Td','第五部分  北京智控美信公司介绍.docx','.docx',495168,12,'2019-03-26 11:58:28',10,'2019-03-26 12:06:33',2,'Y','N'),('2019-03-26',787,783,'ZxBg_A_HtSp_Td','借款合同.docx','.docx',492256,12,'2019-03-26 11:59:02',10,'2019-03-26 12:09:13',2,'Y','N'),('2019-03-26',788,784,'ZxBg_A_HtSp_TdPdf','第五部分  北京智控美信公司介绍.pdf','.pdf',483023,10,'2019-03-26 12:08:16',10,'2019-03-26 12:08:24',2,'Y','N'),('2019-03-26',789,783,'ZxBg_A_HtSp_TdPdf','借款合同.pdf','.pdf',525943,10,'2019-03-26 12:09:20',10,'2019-03-26 12:09:26',3,'Y','N'),('2019-03-26',790,10,'ZxBg_A_HtSp_Qz','合同审批单.docx','.docx',29639,12,'2019-03-26 12:11:07',12,'2019-03-26 12:54:24',1,'Y','N'),('2019-03-26',791,25,'ZxBg_A_FkSp','IEDS-2-85需求管理程序.docx','.docx',115504,12,'2019-03-26 14:53:51',NULL,NULL,1,'N','N'),('2019-03-26',792,25,'ZxBg_A_FkSp','IEDS-2-84项目监督与控制程序.docx','.docx',228748,12,'2019-03-26 14:53:51',NULL,NULL,1,'N','N'),('2019-03-26',793,25,'ZxBg_A_FkSp_Qz','项目付款审批单.docx','.docx',51070,11,'2019-03-26 14:59:27',11,'2019-03-27 11:54:31',3,'Y','N'),('2019-03-27',794,14,'ZxBg_A_LxSq','徐家宝仿鲁迅.docx','.docx',19419,12,'2019-03-27 10:21:32',NULL,NULL,1,'N','N'),('2019-03-27',795,14,'ZxBg_A_LxSq','第五部分  北京智控美信公司介绍.docx','.docx',22770,12,'2019-03-27 10:21:32',NULL,NULL,1,'N','N'),('2019-03-27',796,14,'ZxBg_A_LxSq_Qz','立项申请表.docx','.docx',29161,12,'2019-03-27 10:32:00',12,'2019-03-27 10:32:02',1,'Y','N'),('2019-03-27',797,10,'ZxBg_A_JzDc','IEDS-系统部署方案-项目代码-YYMMDD-01.doc','.doc',105984,12,'2019-03-27 10:36:54',NULL,NULL,3,'N','N'),('2019-03-27',798,10,'ZxBg_A_JzDc','IEDS-测试计划-项目代码-YYMMDD-01.doc','.doc',168448,12,'2019-03-27 10:36:54',NULL,NULL,3,'N','N'),('2019-03-27',799,11,'ZxBg_A_XmSc_Qz1','项目审查-项目法律合规审查意见表.docx','.docx',22100,14,'2019-03-27 12:31:42',14,'2019-03-27 12:31:45',1,'Y','N'),('2019-03-27',800,11,'ZxBg_A_XmSc_Qz2','项目审查-项目风险审查意见表.docx','.docx',22264,14,'2019-03-27 12:31:57',14,'2019-03-27 12:31:59',1,'Y','N'),('2019-03-27',801,11,'ZxBg_A_XmSc_Qz3','项目审查-项目财务审查意见表.docx','.docx',29681,14,'2019-03-27 12:32:17',14,'2019-03-27 12:32:19',1,'Y','N'),('2019-03-27',802,9,'ZxBg_A_FaSp_Tz','决策会会议通知.docx','.docx',16018,14,'2019-03-27 12:35:17',14,'2019-03-27 12:35:19',1,'Y','N'),('2019-03-27',803,9,'ZxBg_A_FaSp_Qz','项目表决结果表.docx','.docx',42394,14,'2019-03-27 12:46:47',14,'2019-03-27 12:50:52',1,'Y','N'),('2019-03-27',804,9,'ZxBg_A_FaSp_Jy','决策会会议纪要.docx','.docx',22689,14,'2019-03-27 12:47:49',14,'2019-03-27 12:48:29',1,'Y','N'),('2019-03-27',805,11,'ZxBg_A_HtSp','ExchangeAddressList.xls','.xls',560640,12,'2019-03-27 12:56:57',16,'2019-03-27 13:33:28',1,'N','N'),('2019-03-27',806,11,'ZxBg_A_HtSp','IEDS-系统测试报告-项目代码-YYMMDD-01.doc','.doc',148992,12,'2019-03-27 12:56:57',12,'2019-03-27 13:28:23',1,'N','N'),('2019-03-27',807,11,'ZxBg_A_HtSp','IEDS-系统操作手册-项目代码-YYMMDD-01.doc','.doc',83968,12,'2019-03-27 12:56:57',12,'2019-03-27 13:26:03',1,'N','N'),('2019-03-27',808,11,'ZxBg_A_HtSp_2DC','合同审批11二维码图片.png','.png',102400,12,'2019-03-27 13:25:56',NULL,NULL,3,'Y','N'),('2019-03-27',809,807,'ZxBg_A_HtSp_Td','IEDS-系统操作手册-项目代码-YYMMDD-01.docx','.docx',510992,12,'2019-03-27 13:26:14',16,'2019-03-27 13:31:39',3,'Y','N'),('2019-03-27',810,806,'ZxBg_A_HtSp_Td','IEDS-系统测试报告-项目代码-YYMMDD-01.docx','.docx',852182,12,'2019-03-27 13:28:26',16,'2019-03-27 13:32:47',3,'Y','N'),('2019-03-27',811,807,'ZxBg_A_HtSp_TdPdf','IEDS-系统操作手册-项目代码-YYMMDD-01.pdf','.pdf',695773,16,'2019-03-27 13:31:46',16,'2019-03-27 13:32:03',1,'Y','N'),('2019-03-27',812,806,'ZxBg_A_HtSp_TdPdf','IEDS-系统测试报告-项目代码-YYMMDD-01.pdf','.pdf',951724,16,'2019-03-27 13:32:53',16,'2019-03-27 13:33:00',2,'Y','N'),('2019-03-27',813,11,'ZxBg_A_HtSp_Qz','合同审批单.docx','.docx',30333,12,'2019-03-27 13:33:54',12,'2019-03-27 13:33:56',2,'Y','N'),('2019-03-27',814,44,'ZxBg_A_YzZzSq_Qz','印章、证照使用审批单.docx','.docx',35011,16,'2019-03-27 14:00:08',16,'2019-03-27 14:54:52',2,'Y','N'),('2019-03-06',815,41,'ZxBg_A_YzZzSq_Qz','印章、证照使用审批单.docx','.docx',31672,16,'2019-03-27 15:05:34',16,'2019-03-27 15:05:35',2,'Y','N'),('2019-03-27',816,45,'ZxBg_A_YzZzSq_Qz','印章、证照使用审批单.docx','.docx',34824,16,'2019-03-27 15:11:34',16,'2019-03-27 15:11:36',2,'Y','N'),('2019-03-27',817,7,'WjHq_A_Zt1','借款合同.doc','.doc',36864,16,'2019-03-27 15:29:09',16,'2019-03-27 15:30:22',2,'N','N'),('2019-03-27',818,7,'WjHq_A_Zt1C','借款合同.doc','.doc',37888,7,'2019-03-27 15:29:51',NULL,NULL,2,'Y','N'),('2019-03-27',819,7,'WjHq_A_Zt_2DC','非业务合同审批7二维码图片.png','.png',102400,16,'2019-03-27 15:30:17',NULL,NULL,2,'Y','N'),('2019-03-27',820,817,'WjHq_A_Zt1_Td','借款合同.docx','.docx',791369,16,'2019-03-27 15:30:24',16,'2019-03-27 15:32:52',1,'Y','N'),('2019-03-27',821,817,'WjHq_A_Zt1_TdPdf','借款合同.pdf','.pdf',542905,16,'2019-03-27 15:32:59',16,'2019-03-27 15:33:07',3,'Y','N'),('2019-04-02',822,8,'WjHq_A_Zt1','北京市异地安置审批表.xlsx','.xlsx',12117,13,'2019-04-02 02:32:18',13,'2019-04-02 05:15:50',2,'N','N'),('2019-04-02',823,8,'WjHq_A_Zt1','仿照鲁迅文笔《纪念昆山龙哥》.docx','.docx',18017,13,'2019-04-02 02:32:18',13,'2019-04-02 07:15:35',2,'N','N'),('2019-04-02',824,1940,'Pf_A_BizProcRcd','1、汇报提纲.docx','.docx',1040445,13,'2019-04-02 05:43:11',NULL,NULL,2,'N','N'),('2019-04-02',825,8,'WjHq_A_Zt1C','北京市异地安置审批表.xlsx','.xlsx',12117,14,'2019-04-02 06:35:15',NULL,NULL,3,'Y','N'),('2019-04-02',826,8,'WjHq_A_Zt1C','仿照鲁迅文笔《纪念昆山龙哥》.docx','.docx',18025,14,'2019-04-02 06:35:15',NULL,NULL,3,'Y','N'),('2019-04-02',827,8,'WjHq_A_Zt2','M1、科电云OA样机主要业务模型图.docx','.docx',46308,5,'2019-04-02 06:51:25',NULL,NULL,3,'N','N'),('2019-04-02',828,8,'WjHq_A_Zt_2DC','非业务合同审批8二维码图片.png','.png',102400,13,'2019-04-02 07:10:20',NULL,NULL,3,'Y','N'),('2019-04-02',829,823,'WjHq_A_Zt1_Td','仿照鲁迅文笔《纪念昆山龙哥》.docx','.docx',742121,13,'2019-04-02 07:20:44',16,'2019-04-02 08:09:08',1,'Y','N'),('2019-04-02',830,823,'WjHq_A_Zt1_TdPdf','仿照鲁迅文笔《纪念昆山龙哥》.pdf','.pdf',461633,16,'2019-04-02 08:11:29',16,'2019-04-02 08:16:26',3,'Y','N'),('2019-04-09',831,9,'WjHq_A_Zt1','北京市异地安置审批表.xlsx','.xlsx',244937,13,'2019-04-09 09:59:49',16,'2019-04-09 10:18:34',2,'N','N'),('2019-04-09',832,9,'WjHq_A_Zt1','借款合同.doc','.doc',37376,13,'2019-04-09 09:59:49',13,'2019-04-09 10:08:54',2,'N','N'),('2019-04-09',833,9,'WjHq_A_Zt1C','北京市异地安置审批表.xlsx','.xlsx',12110,14,'2019-04-09 10:04:25',NULL,NULL,2,'Y','N'),('2019-04-09',834,9,'WjHq_A_Zt1C','借款合同.doc','.doc',37888,14,'2019-04-09 10:04:25',NULL,NULL,2,'Y','N'),('2019-04-09',835,9,'WjHq_A_Zt2','IEDS-2-73软件产品设计和开发控制程序.docx','.docx',1075129,5,'2019-04-09 10:05:39',NULL,NULL,3,'N','N'),('2019-04-09',836,1950,'Pf_A_BizProcRcd','IEDS-需求分析说明书-项目代码-YYMMDD-01.docx','.docx',46530,5,'2019-04-09 10:06:20',NULL,NULL,2,'N','N'),('2019-04-09',837,9,'WjHq_A_Zt_2DC','非业务合同审批9二维码图片.png','.png',102400,13,'2019-04-09 10:07:55',NULL,NULL,2,'Y','N'),('2019-04-09',838,832,'WjHq_A_Zt1_Td','借款合同.docx','.docx',744984,13,'2019-04-09 10:08:57',16,'2019-04-09 10:15:01',2,'Y','N'),('2019-04-09',839,832,'WjHq_A_Zt1_TdPdf','借款合同.pdf','.pdf',695462,16,'2019-04-09 10:15:31',16,'2019-04-09 10:15:38',1,'Y','N'),('2019-04-09',840,15,'ZxBg_A_LxSq','IEDS-技术选型方案-项目代码-YYMMDD-01.doc','.doc',82432,12,'2019-04-09 10:36:51',NULL,NULL,1,'N','N'),('2019-04-09',841,15,'ZxBg_A_LxSq','IEDS-需求调研表-项目代码-YYMMDD-01.xlsx','.xlsx',10998,12,'2019-04-09 10:36:51',NULL,NULL,1,'N','N'),('2019-04-09',842,15,'ZxBg_A_LxSq_Qz','立项申请表.docx','.docx',28550,12,'2019-04-09 10:41:59',12,'2019-04-09 10:42:01',1,'Y','N'),('2019-04-09',843,11,'ZxBg_A_JzDc','IEDS-产品集成检查单-项目代码-YYMMDD-01.xls','.xls',37376,12,'2019-04-09 10:46:17',NULL,NULL,3,'N','N'),('2019-04-09',844,11,'ZxBg_A_JzDc','IEDS-产品集成计划-项目代码-YYMMDD-01.docx','.docx',38936,12,'2019-04-09 10:46:17',NULL,NULL,3,'N','N'),('2019-04-09',845,12,'ZxBg_A_XmSc_Qz1','项目审查-项目法律合规审查意见表.docx','.docx',22065,14,'2019-04-09 10:58:24',14,'2019-04-09 10:58:27',1,'Y','N'),('2019-04-09',846,12,'ZxBg_A_XmSc_Qz2','项目审查-项目风险审查意见表.docx','.docx',22276,14,'2019-04-09 10:58:32',14,'2019-04-09 10:58:34',1,'Y','N'),('2019-04-09',847,12,'ZxBg_A_XmSc_Qz3','项目审查-项目财务审查意见表.docx','.docx',29677,14,'2019-04-09 10:59:02',14,'2019-04-09 10:59:03',2,'Y','N'),('2019-04-09',848,10,'ZxBg_A_FaSp_Tz','决策会会议通知.docx','.docx',16029,14,'2019-04-09 11:02:49',14,'2019-04-09 11:03:08',1,'Y','N'),('2019-04-09',849,10,'ZxBg_A_FaSp_Qz','项目表决结果表.docx','.docx',34144,14,'2019-04-09 11:05:57',14,'2019-04-09 11:06:01',3,'Y','N'),('2019-04-09',850,10,'ZxBg_A_FaSp_Jy','决策会会议纪要.docx','.docx',22680,14,'2019-04-09 11:06:16',14,'2019-04-09 11:06:47',1,'Y','N'),('2019-04-09',851,12,'ZxBg_A_HtSp','北京市异地安置审批表.xlsx','.xlsx',244943,12,'2019-04-09 11:10:30',16,'2019-04-09 11:28:10',2,'N','N'),('2019-04-09',852,12,'ZxBg_A_HtSp','仿照鲁迅文笔《纪念昆山龙哥》.docx','.docx',18014,12,'2019-04-09 11:10:30',12,'2019-04-09 11:23:21',2,'N','N'),('2019-04-09',853,12,'ZxBg_A_HtSp_2DC','合同审批12二维码图片.png','.png',102400,12,'2019-04-09 11:23:16',NULL,NULL,1,'Y','N'),('2019-04-09',854,852,'ZxBg_A_HtSp_Td','仿照鲁迅文笔《纪念昆山龙哥》.docx','.docx',493567,12,'2019-04-09 11:23:25',16,'2019-04-09 11:24:28',3,'Y','N'),('2019-04-09',855,12,'ZxBg_A_HtSp_Qz','合同审批单.docx','.docx',29621,12,'2019-04-09 11:28:47',12,'2019-04-09 11:28:50',1,'Y','N'),('2019-04-09',856,852,'ZxBg_A_HtSp_TdPdf','仿照鲁迅文笔《纪念昆山龙哥》.pdf','.pdf',444536,16,'2019-04-09 11:31:23',16,'2019-04-09 11:31:29',1,'Y','N'),('2019-04-09',857,50,'ZxBg_A_YzZzSq_Qz','印章、证照使用审批单.docx','.docx',34977,16,'2019-04-09 11:35:07',16,'2019-04-09 11:35:10',2,'Y','N'),('2019-04-09',858,26,'ZxBg_A_FkSp','1.jpeg','.jpeg',59756,12,'2019-04-09 11:40:08',NULL,NULL,2,'N','N'),('2019-04-09',859,26,'ZxBg_A_FkSp_Qz','项目付款审批单.docx','.docx',50944,11,'2019-04-09 11:41:58',11,'2019-04-09 11:42:01',2,'Y','N'),('2019-04-14',860,12,'JkBx_A_Jk_Qz','借款凭证-12.docx','.docx',43370,11,'2019-04-14 08:00:03',11,'2019-04-14 08:02:32',2,'Y','N'),('2019-04-17',861,6,'QsQb_A_Zt','庆源OA开发计划.docx','.docx',25601,12,'2019-04-17 16:13:02',NULL,NULL,2,'N','N'),('2019-04-17',862,7,'QsQb_A_Zt','20180709中小企业服务平台方案.pdf','.pdf',212999,12,'2019-04-17 16:25:28',NULL,NULL,2,'N','N'),('2019-04-18',863,10,'WjHq_A_Zt1','北京市异地安置审批表.xlsx','.xlsx',244924,12,'2019-04-18 13:47:47',16,'2019-04-18 14:21:56',3,'N','Y'),('2019-04-18',864,10,'WjHq_A_Zt1','仿照鲁迅文笔《纪念昆山龙哥》.docx','.docx',18079,12,'2019-04-18 13:47:47',12,'2019-04-18 14:16:17',3,'N','Y'),('2019-04-18',865,10,'WjHq_A_Zt2','HR112录用条件确认书.docx','.docx',69029,18,'2019-04-18 14:07:51',18,'2019-04-18 14:08:17',3,'N','Y'),('2019-04-18',866,10,'WjHq_A_Zt_2DC','非业务合同审批10二维码图片.png','.png',102400,12,'2019-04-18 14:15:34',NULL,NULL,1,'Y','Y'),('2019-04-18',867,864,'WjHq_A_Zt1_Td','仿照鲁迅文笔《纪念昆山龙哥》.docx','.docx',494379,12,'2019-04-18 14:16:39',16,'2019-04-18 14:21:30',3,'Y','Y'),('2019-04-18',868,864,'WjHq_A_Zt1_TdPdf','仿照鲁迅文笔《纪念昆山龙哥》.pdf','.pdf',444134,16,'2019-04-18 14:21:59',12,'2019-04-18 14:31:08',1,'Y','Y'),('2019-04-18',869,11,'WjHq_A_Zt1','体检人员信息汇总表-基础部.xlsx','.xlsx',10909,12,'2019-04-18 14:34:25',8,'2019-04-18 14:35:59',2,'N','Y'),('2019-04-18',870,11,'WjHq_A_Zt1','第五部分  北京智控美信公司介绍.docx','.docx',22769,12,'2019-04-18 14:34:25',12,'2019-04-18 15:06:33',2,'N','Y'),('2019-04-18',871,11,'WjHq_A_Zt2','机关财务记账系统需求.doc','.doc',31744,18,'2019-04-18 14:38:27',NULL,NULL,2,'N','Y'),('2019-04-18',872,11,'WjHq_A_Zt1C','体检人员信息汇总表-基础部.xlsx','.xlsx',10909,8,'2019-04-18 14:46:01',NULL,NULL,2,'Y','Y'),('2019-04-18',873,11,'WjHq_A_Zt1C','第五部分  北京智控美信公司介绍.docx','.docx',22967,8,'2019-04-18 14:46:01',NULL,NULL,2,'Y','Y'),('2019-04-18',874,14,'Pf_A_BizDelMemo','1.jpeg','.jpeg',59756,14,'2019-04-18 15:39:19',NULL,NULL,2,'N','N'),('2019-04-18',875,15,'Pf_A_BizDelMemo','2.jpeg','.jpeg',29417,14,'2019-04-18 15:39:31',NULL,NULL,2,'N','N'),('2019-04-18',876,12,'WjHq_A_Zt1','仿照鲁迅文笔《纪念昆山龙哥》.docx','.docx',18104,12,'2019-04-18 15:41:45',12,'2019-04-18 16:05:04',2,'N','N'),('2019-04-18',877,12,'WjHq_A_Zt1','北京市异地安置审批表.xlsx','.xlsx',244926,12,'2019-04-18 15:41:45',16,'2019-04-18 16:08:04',2,'N','N'),('2019-04-18',878,13,'WjHq_A_Zt1','科电人员2019年剩余年假统计表.xls','.xls',188416,12,'2019-04-18 15:45:48',NULL,NULL,2,'N','N'),('2019-04-18',879,13,'WjHq_A_Zt1','HR602职位说明书模板.docx','.docx',26655,12,'2019-04-18 15:45:48',NULL,NULL,2,'N','N'),('2019-04-18',880,12,'WjHq_A_Zt1C','仿照鲁迅文笔《纪念昆山龙哥》.docx','.docx',18229,8,'2019-04-18 15:48:42',NULL,NULL,2,'Y','N'),('2019-04-18',881,12,'WjHq_A_Zt1C','北京市异地安置审批表.xlsx','.xlsx',12121,8,'2019-04-18 15:48:42',NULL,NULL,1,'Y','N'),('2019-04-18',882,12,'WjHq_A_Zt2','出差员工住房补助申请表-刘赣平.doc','.doc',46592,18,'2019-04-18 15:56:10',18,'2019-04-18 15:56:27',2,'N','N'),('2019-04-18',883,13,'WjHq_A_Zt2','借款合同.doc','.doc',37376,18,'2019-04-18 15:57:18',18,'2019-04-18 15:58:06',1,'N','N'),('2019-04-18',884,12,'WjHq_A_Zt_2DC','非业务合同审批12二维码图片.png','.png',102400,12,'2019-04-18 16:03:34',NULL,NULL,1,'Y','N'),('2019-04-18',885,876,'WjHq_A_Zt1_Td','仿照鲁迅文笔《纪念昆山龙哥》.docx','.docx',494470,12,'2019-04-18 16:04:15',16,'2019-04-18 16:07:42',2,'Y','N'),('2019-04-18',886,876,'WjHq_A_Zt1_TdPdf','仿照鲁迅文笔《纪念昆山龙哥》.pdf','.pdf',443694,12,'2019-04-18 16:11:34',12,'2019-04-18 16:11:40',1,'Y','N'),('2019-04-19',887,10,'ZxBg_A_HtSc','北京市异地安置审批表.xlsx','.xlsx',244910,12,'2019-04-19 11:40:29',16,'2019-04-19 11:55:58',3,'N','N'),('2019-04-19',888,10,'ZxBg_A_HtSc','第五部分  北京智控美信公司介绍.docx','.docx',22840,12,'2019-04-19 11:40:29',12,'2019-04-19 11:48:08',3,'N','N'),('2019-04-19',889,10,'ZxBg_A_HtSc_2DC','合同审查10二维码图片.png','.png',102400,12,'2019-04-19 11:47:30',NULL,NULL,3,'Y','N'),('2019-04-19',890,888,'ZxBg_A_HtSc_Td','第五部分  北京智控美信公司介绍.docx','.docx',495271,12,'2019-04-19 11:48:10',16,'2019-04-19 11:55:38',3,'Y','N'),('2019-04-19',891,888,'ZxBg_A_HtSc_TdPdf','第五部分  北京智控美信公司介绍.pdf','.pdf',483537,12,'2019-04-19 11:56:55',12,'2019-04-19 11:57:00',1,'Y','N'),('2019-04-19',892,10,'ZxBg_A_HtSc_Qz','合同审查单.docx','.docx',30343,12,'2019-04-19 11:57:27',12,'2019-04-19 11:57:29',2,'Y','N'),('2019-04-19',893,11,'ZxBg_A_HtSc','科电人员2019年剩余年假统计表.xls','.xls',188416,12,'2019-04-19 13:48:16',NULL,NULL,2,'N','N'),('2019-04-19',894,11,'ZxBg_A_HtSc','HR602职位说明书模板.docx','.docx',26655,12,'2019-04-19 13:48:16',NULL,NULL,2,'N','N'),('2019-04-19',895,11,'ZxBg_A_HtSc_Qz','合同审查单.docx','.docx',30216,12,'2019-04-19 13:52:57',12,'2019-04-19 13:52:58',2,'Y','N'),('2019-04-19',896,13,'ZxBg_A_HtSp','科电人员2019年剩余年假统计表.xls','.xls',188416,12,'2019-04-19 16:04:28',12,'2019-04-19 16:06:21',2,'N','N'),('2019-04-19',897,13,'ZxBg_A_HtSp','仿照鲁迅文笔《纪念昆山龙哥》.docx','.docx',18088,12,'2019-04-19 16:04:28',12,'2019-04-19 16:15:10',2,'N','N'),('2019-04-19',898,13,'ZxBg_A_HtSp_2DC','合同审批13二维码图片.png','.png',102400,12,'2019-04-19 16:14:26',NULL,NULL,3,'Y','N'),('2019-04-19',899,897,'ZxBg_A_HtSp_Td','仿照鲁迅文笔《纪念昆山龙哥》.docx','.docx',493623,12,'2019-04-19 16:15:12',16,'2019-04-19 16:16:46',1,'Y','N'),('2019-04-19',900,13,'ZxBg_A_HtSp_Qz','合同审批单.docx','.docx',29638,12,'2019-04-19 16:17:13',12,'2019-04-19 16:17:14',3,'Y','N'),('2019-04-19',901,897,'ZxBg_A_HtSp_TdPdf','仿照鲁迅文笔《纪念昆山龙哥》.pdf','.pdf',444849,12,'2019-04-19 16:17:22',12,'2019-04-19 16:17:27',3,'Y','N'),('2019-04-19',902,14,'ZxBg_A_HtSp','IEDS-重大事件评议表-项目代码-YYMMDD-01.xls','.xls',100864,12,'2019-04-19 16:26:56',NULL,NULL,2,'N','N'),('2019-04-19',903,14,'ZxBg_A_HtSp','IEDS-2-91重大事件处理程序.doc','.doc',209408,12,'2019-04-19 16:26:56',NULL,NULL,2,'N','N'),('2019-04-19',904,14,'ZxBg_A_HtSp_Qz','合同审批单.docx','.docx',30354,12,'2019-04-19 16:36:07',12,'2019-04-19 16:36:09',1,'Y','N');
/*!40000 ALTER TABLE `Pf_A_AttachInfo` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_A_AttachInfo_11` BEFORE INSERT ON `Pf_A_AttachInfo`
  FOR EACH ROW
label1:
BEGIN
 	declare vRecDivTag DATE;
    declare vCnt tinyint unsigned;
    declare vCommStyle varchar(50); #项目评审活动附件序号编号前缀
 	
 	set vRecDivTag=null;
 	
 	if new.FileSize=0 then
 		call Pf_A_AttachInfo_11_err1(); # 请不要同时上传相同的文件！
 		leave label1;
 	end if;
 	
 	IF instr(new.FileName,'.')!=0 THEN 
 		set new.FileExt = reverse(substr(reverse(new.FileName),1,instr(reverse(new.FileName),'.')));
 	ELSE
 		set new.FileExt = '.txt';
 	END IF;
 	
 	if new.PrimaryName='Pf_A_BizProcRcd' then
 		select RecDivTag into vRecDivTag from Pf_A_BizProcRcd where WorkItem=new.PrimaryID;
 	end if;
 	
 	if new.PrimaryName='Pf_A_BizDelMemo' then
 		select RecDivTag into vRecDivTag from Pf_A_BizDelMemo where Seq=new.PrimaryID;
 	end if;
 	
 	if new.PrimaryName in ('XxFb_A_Zt','XxFb_A_ZtNq') then
 		select RecDivTag into vRecDivTag from XxFb_A_Zt where ID=new.PrimaryID;
 	end if;
 	
 	if new.PrimaryName in ('XxFb_A_Pl','XxFb_A_PlNq') then
 		select RecDivTag into vRecDivTag from XxFb_A_Zt 
        where exists(select 1 from XxFb_A_Pl where ID=new.PrimaryID and BizID=XxFb_A_Zt.ID);
 	end if;
 	
 	if new.PrimaryName in ('GsLt_A_Zt','GsLt_A_ZtNq') then
 		select RecDivTag into vRecDivTag from GsLt_A_Zt where ID=new.PrimaryID;
 	end if;
 	
 	if new.PrimaryName in ('GsLt_A_Pl','GsLt_A_PlNq') then
 		select RecDivTag into vRecDivTag from GsLt_A_Zt 
        where exists(select 1 from GsLt_A_Pl where ID=new.PrimaryID and BizID=GsLt_A_Zt.ID);
 	end if;
 	
 	if new.PrimaryName = 'GsWjZw' and new.FileExt not in ('.doc','.docx','.DOC','.DOCX') then
 		call Pf_A_AttachInfo_11_err3(); # 公司文件的正文必须是微软Office Word格式文件！
 		leave label1;
 	end if;
 	
 	if new.PrimaryName in ('GsWjZw','GsWjFj','GsWjZwCopy','GsWjZwZs','GsWjZwZsPdf') then
 		select RecDivTag into vRecDivTag from GsWj_A_Zt where ID=new.PrimaryID;
 	end if;
 	
 	if new.PrimaryName in ('GsSwZw','GsSwFj') then
 		select RecDivTag into vRecDivTag from GsSw_A_Zt where ID=new.PrimaryID;
 	end if;

 	if new.PrimaryName='GzHb_A_Zt' then
 		select RecDivTag into vRecDivTag from GzHb_A_Zt where ID=new.PrimaryID;
 	end if;

 	if new.PrimaryName='QsQb_A_Zt' then
 		select RecDivTag into vRecDivTag from QsQb_A_Zt where ID=new.PrimaryID;
 	end if;
 	
 	if new.PrimaryName in ('HyGl_A_Zt1','HyGl_A_Zt2','HyGl_A_Zt2C') then
 		select RecDivTag into vRecDivTag from HyGl_A_Zt where ID=new.PrimaryID;
 	end if;
 	
 	if new.PrimaryName='Xj_A_Zt' then
 		select RecDivTag into vRecDivTag from Xj_A_Zt where ID=new.PrimaryID;
 	end if;
 	
 	if new.PrimaryName in ('CgSq_A_Zt','CgSq_A_Zt_Qz') then
 		select RecDivTag into vRecDivTag from CgSq_A_Zt where ID=new.PrimaryID;
 	end if;
 	
 	if new.PrimaryName='JkBx_A_Jk_Qz' then
 		select RecDivTag into vRecDivTag from JkBx_A_Jk where ID=new.PrimaryID;
 	end if;
 	
 	if new.PrimaryName='JkBx_A_BxQt71' then
 		select RecDivTag into vRecDivTag from JkBx_A_BxQt where ID=new.PrimaryID;
 	end if;
 	
 	if new.PrimaryName='JkBx_A_Bx_Qz' then
 		select RecDivTag into vRecDivTag from JkBx_A_Bx where ID=new.PrimaryID;
 	end if;
 	
 	if new.PrimaryName='JkBx_A_Hk_Qz' then
 		select RecDivTag into vRecDivTag from JkBx_A_Hk where ID=new.PrimaryID;
 	end if;
 	
 	if new.PrimaryName='Gz_A_Zt' then
 		select RecDivTag into vRecDivTag from Gz_A_Zt where ID=new.PrimaryID;
 	end if;
 	
 	if new.PrimaryName in ('ZxBg_A_LxSq','ZxBg_A_LxSq_Qz') then
 		select RecDivTag into vRecDivTag from ZxBg_A_LxSq where ID=new.PrimaryID;
 	end if;
 	
 	if new.PrimaryName='ZxBg_A_JzDc' then
 		select RecDivTag into vRecDivTag from ZxBg_A_JzDc where ID=new.PrimaryID;
 	end if;
 	
 	if new.PrimaryName in ('ZxBg_A_XmSc_Qz1','ZxBg_A_XmSc_Qz2','ZxBg_A_XmSc_Qz3') then
 		select RecDivTag into vRecDivTag from ZxBg_A_XmSc where ID=new.PrimaryID;
 	end if;
 	
 	if new.PrimaryName in ('ZxBg_A_FaSp_Tz','ZxBg_A_FaSp_Qz','ZxBg_A_FaSp_Jy') then
 		select RecDivTag into vRecDivTag from ZxBg_A_FaSp where ID=new.PrimaryID;
 	end if;
 	
 	if new.PrimaryName in ('ZxBg_A_HtSp','ZxBg_A_HtSp_Qz','ZxBg_A_HtSp_2DC') then
 		select RecDivTag into vRecDivTag from ZxBg_A_HtSp where ID=new.PrimaryID;
 	end if;

 	if new.PrimaryName in ('ZxBg_A_HtSp_Td','ZxBg_A_HtSp_TdPdf') then
 		select RecDivTag into vRecDivTag from Pf_A_AttachInfo where Seq=new.PrimaryID;
 	end if;

 	if new.PrimaryName in ('ZxBg_A_HtSc','ZxBg_A_HtSc_Qz','ZxBg_A_HtSc_2DC') then
 		select RecDivTag into vRecDivTag from ZxBg_A_HtSc where ID=new.PrimaryID;
 	end if;

 	if new.PrimaryName in ('ZxBg_A_HtSc_Td','ZxBg_A_HtSc_TdPdf') then
 		select RecDivTag into vRecDivTag from Pf_A_AttachInfo where Seq=new.PrimaryID;
 	end if;

 	if new.PrimaryName in ('ZxBg_A_YzZzSq_1','ZxBg_A_YzZzSq_2','ZxBg_A_YzZzSq_Qz') then
 		select RecDivTag into vRecDivTag from ZxBg_A_YzZzSq where ID=new.PrimaryID;
 	end if;
 	
 	if new.PrimaryName in ('ZxBg_A_YfkSp','ZxBg_A_YfkSp_Qz') then
 		select RecDivTag into vRecDivTag from ZxBg_A_YfkSp where ID=new.PrimaryID;
 	end if;
 	
 	if new.PrimaryName in ('ZxBg_A_FkSp','ZxBg_A_FkSp_Qz') then
 		select RecDivTag into vRecDivTag from ZxBg_A_FkSp where ID=new.PrimaryID;
 	end if;
 	
 	if new.PrimaryName in ('DcDb_A_Zt','DcDb_A_Zt_Gd') then
 		select RecDivTag into vRecDivTag from DcDb_A_Zt where ID=new.PrimaryID;
 	end if;
 	
 	if new.PrimaryName='DcDb_A_Fk' then
 		select RecDivTag into vRecDivTag from DcDb_A_Fk where ID=new.PrimaryID;
 	end if;
 	
 	if new.PrimaryName='Dsj_A_Xd' then
 		select RecDivTag into vRecDivTag from Dsj_A_Xd where ID=new.PrimaryID;
 	end if;
 	
 	if new.PrimaryName in ('WjHq_A_Zt1','WjHq_A_Zt1C','WjHq_A_Zt2','WjHq_A_Zt_2DC') then
 		select RecDivTag into vRecDivTag from WjHq_A_Zt where ID=new.PrimaryID;
 	end if;
 	
 	if new.PrimaryName in ('WjHq_A_Zt1_Td','WjHq_A_Zt1_TdPdf') then
 		select RecDivTag into vRecDivTag from Pf_A_AttachInfo where Seq=new.PrimaryID;
 	end if;

 	if new.PrimaryName='Da_A_Jj' then
 		select RecDivTag into vRecDivTag from Da_A_Jj where ID=new.PrimaryID;
 	end if;
 	
 	if new.PrimaryName='Da_A_Jy' then
 		select RecDivTag into vRecDivTag from Da_A_Jy where ID=new.PrimaryID;
 	end if;
 	
 	IF vRecDivTag IS NOT NULL THEN
 		set new.RecDivTag = vRecDivTag;
 	else
 		call Pf_A_AttachInfo_11_err2(); # 上传附件类别没有对应的应用主体！
 	END IF;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_A_AttachInfo_21` AFTER INSERT ON `Pf_A_AttachInfo`
  FOR EACH ROW
BEGIN
	UPDATE Pf_M_AppAttachPath SET OccupySize = OccupySize + new.FileSize WHERE Code = new.PathCode;
    
    # 档案交接的<交档来源>为“无系统来源”的情况，自动插入交档明细
    if new.PrimaryName='Da_A_Jj' then
    	insert into Da_A_JjMx values (now(),null,new.PrimaryID,new.Seq,'N');
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_A_AttachInfo_13` BEFORE UPDATE ON `Pf_A_AttachInfo`
  FOR EACH ROW
BEGIN
	if new.FileName!=old.FileName then
    	IF instr(new.FileName,'.')!=0 THEN 
        	set new.FileExt = reverse(substr(reverse(new.FileName),1,instr(reverse(new.FileName),'.')));
      	ELSE
        	set new.FileExt = '.txt';
      	END IF;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_A_AttachInfo_23` AFTER UPDATE ON `Pf_A_AttachInfo`
  FOR EACH ROW
BEGIN
	if new.FileSize!=old.FileSize then
		UPDATE Pf_M_AppAttachPath SET OccupySize = OccupySize - old.FileSize + new.FileSize WHERE Code = old.PathCode;
    end if;
    
    if new.UpdateTs!=old.UpdateTs THEN
    	DELETE from Pf_A_AttachReadHis WHERE AttachSeq=old.Seq;
    end if;
    
    if old.DelTag='N' and new.DelTag='Y' and old.PrimaryName='Da_A_Jj' then
    	# 档案交接文件删除级联删除档案交接明细
        delete from Da_A_JjMx where ZtID=old.PrimaryID and JjWjSeq=old.Seq;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_A_AttachInfo_22` AFTER DELETE ON `Pf_A_AttachInfo` FOR EACH ROW
BEGIN
	UPDATE Pf_M_AppAttachPath SET OccupySize = OccupySize - old.FileSize WHERE Code = old.PathCode;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Pf_A_AttachReadHis`
--

DROP TABLE IF EXISTS `Pf_A_AttachReadHis`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_A_AttachReadHis` (
  `RecDivTag` date NOT NULL,
  `AttachSeq` int(12) unsigned NOT NULL,
  `UsrID` smallint(5) unsigned NOT NULL,
  `ReadTs` datetime NOT NULL,
  PRIMARY KEY (`AttachSeq`,`UsrID`),
  KEY `AttachSeq` (`AttachSeq`),
  KEY `UsrID` (`UsrID`),
  CONSTRAINT `Pf_A_AttachReadHis_FK1` FOREIGN KEY (`AttachSeq`) REFERENCES `Pf_A_AttachInfo` (`Seq`) ON DELETE CASCADE,
  CONSTRAINT `Pf_A_AttachReadHis_FK2` FOREIGN KEY (`UsrID`) REFERENCES `Pf_M_Usr` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_A_AttachReadHis`
--

LOCK TABLES `Pf_A_AttachReadHis` WRITE;
/*!40000 ALTER TABLE `Pf_A_AttachReadHis` DISABLE KEYS */;
INSERT INTO `Pf_A_AttachReadHis` VALUES ('2018-01-26',5,10,'2018-01-26 19:02:14'),('2018-01-26',5,14,'2018-01-26 18:44:49'),('2018-01-26',7,10,'2018-01-26 18:57:46'),('2018-01-26',8,10,'2018-01-26 18:59:03'),('2018-01-26',8,14,'2018-02-04 12:37:56'),('2018-01-30',12,2,'2018-01-30 15:22:15'),('2018-01-30',12,9,'2018-01-30 15:24:49'),('2018-01-30',12,11,'2018-02-24 23:30:38'),('2018-01-30',12,14,'2018-01-31 09:33:57'),('2018-01-31',14,10,'2018-01-31 14:18:31'),('2018-01-31',14,11,'2018-02-24 23:30:17'),('2018-01-31',14,14,'2018-01-31 14:12:52'),('2018-01-31',15,2,'2018-01-31 14:10:55'),('2018-01-31',15,10,'2018-01-31 14:14:36'),('2018-01-31',15,14,'2018-01-31 14:08:32'),('2018-01-31',16,2,'2018-01-31 14:11:21'),('2018-01-31',16,10,'2018-01-31 14:14:44'),('2018-01-31',16,14,'2018-01-31 14:09:13'),('2018-01-31',18,10,'2018-01-31 14:17:10'),('2018-01-31',19,10,'2018-01-31 14:17:58'),('2018-01-31',19,14,'2018-02-04 12:39:05'),('2018-02-04',30,13,'2018-02-04 12:16:04'),('2018-02-04',30,14,'2018-02-04 12:17:29'),('2018-02-04',36,3,'2018-02-04 12:52:40'),('2018-02-04',36,10,'2018-02-04 12:53:25'),('2018-02-04',36,11,'2018-02-04 13:10:54'),('2018-02-04',36,12,'2018-02-04 13:11:34'),('2018-02-04',36,14,'2018-02-04 12:48:55'),('2018-02-04',37,3,'2018-02-04 12:52:36'),('2018-02-04',37,10,'2018-02-04 12:53:29'),('2018-02-04',37,11,'2018-02-04 13:10:50'),('2018-02-04',37,12,'2018-02-04 13:11:30'),('2018-02-04',37,14,'2018-02-04 12:49:08'),('2018-02-11',41,9,'2018-02-11 18:03:53'),('2018-02-21',43,2,'2018-02-22 15:43:48'),('2018-02-21',43,4,'2018-02-21 15:59:23'),('2018-02-21',43,5,'2018-02-22 15:41:12'),('2018-02-21',43,6,'2018-02-22 15:42:28'),('2018-02-21',43,9,'2018-02-22 15:43:08'),('2018-02-21',43,12,'2018-02-21 15:46:39'),('2018-02-21',44,2,'2018-02-22 15:43:52'),('2018-02-21',44,4,'2018-02-21 15:59:30'),('2018-02-21',44,5,'2018-02-22 15:41:16'),('2018-02-21',44,6,'2018-02-22 15:42:32'),('2018-02-21',44,9,'2018-02-22 15:43:13'),('2018-02-21',44,12,'2018-02-21 15:47:57'),('2018-02-21',45,2,'2018-02-22 16:40:01'),('2018-02-21',45,4,'2018-02-22 16:39:41'),('2018-02-21',45,5,'2018-02-22 16:39:11'),('2018-02-21',45,12,'2018-02-22 16:34:52'),('2018-03-02',46,14,'2018-03-02 11:43:01'),('2018-03-05',47,10,'2018-03-06 17:29:35'),('2018-03-05',47,14,'2018-03-07 11:24:45'),('2018-03-07',48,10,'2018-03-07 13:15:49'),('2018-03-07',48,14,'2018-03-07 13:25:09'),('2018-03-05',49,10,'2018-03-07 15:29:34'),('2018-03-08',52,4,'2018-03-09 14:33:41'),('2018-03-08',52,14,'2018-03-09 14:32:58'),('2018-03-12',53,10,'2018-03-13 13:04:51'),('2018-03-12',54,10,'2018-03-13 13:05:15'),('2018-03-14',55,2,'2018-03-14 09:54:54'),('2018-03-14',55,4,'2018-03-14 09:53:08'),('2018-03-14',55,5,'2018-03-14 09:53:32'),('2018-03-14',55,6,'2018-03-14 09:53:54'),('2018-03-14',55,9,'2018-03-14 09:54:13'),('2018-03-14',55,12,'2018-03-14 09:52:25'),('2018-03-14',56,5,'2018-03-14 10:05:17'),('2018-03-14',57,11,'2018-03-14 15:09:51'),('2018-03-11',58,2,'2018-03-11 14:26:58'),('2018-03-11',58,4,'2018-03-11 14:24:47'),('2018-03-11',58,5,'2018-03-11 14:25:27'),('2018-03-11',58,6,'2018-03-11 14:26:09'),('2018-03-11',58,9,'2018-03-11 14:26:35'),('2018-03-11',58,12,'2018-03-11 14:22:37'),('2018-03-11',59,9,'2018-03-11 14:42:02'),('2018-03-11',59,12,'2018-03-11 14:43:06'),('2018-03-22',62,2,'2018-03-22 13:23:51'),('2018-03-22',62,4,'2018-03-22 13:21:34'),('2018-03-22',62,5,'2018-03-22 13:22:22'),('2018-03-22',62,6,'2018-03-22 13:22:51'),('2018-03-22',62,9,'2018-03-22 13:23:13'),('2018-03-22',62,12,'2018-03-22 13:19:10'),('2018-03-22',63,2,'2018-03-22 13:23:48'),('2018-03-22',63,4,'2018-03-22 13:21:38'),('2018-03-22',63,5,'2018-03-22 13:22:18'),('2018-03-22',63,6,'2018-03-22 13:22:54'),('2018-03-22',63,9,'2018-03-22 13:23:16'),('2018-03-22',63,12,'2018-03-22 13:20:20'),('2018-03-22',64,2,'2018-03-22 13:28:43'),('2018-03-22',64,4,'2018-03-22 13:30:03'),('2018-03-22',64,5,'2018-03-22 13:29:08'),('2018-03-22',64,9,'2018-03-22 13:29:39'),('2018-03-22',64,12,'2018-03-22 13:24:41'),('2018-03-22',66,4,'2018-03-22 13:33:39'),('2018-03-22',66,12,'2018-03-22 13:33:04'),('2018-03-22',67,10,'2018-03-22 13:59:37'),('2018-03-22',68,10,'2018-03-22 13:59:51'),('2018-03-22',69,11,'2018-03-22 14:17:11'),('2018-03-22',71,9,'2018-03-22 15:19:21'),('2018-03-22',73,10,'2018-03-22 14:57:48'),('2018-03-22',74,4,'2018-03-22 15:36:32'),('2018-03-22',74,9,'2018-03-22 15:49:56'),('2018-03-22',75,9,'2018-03-22 15:46:26'),('2018-03-27',79,10,'2018-03-27 14:49:37'),('2018-03-29',80,9,'2018-03-29 09:03:23'),('2018-03-31',86,4,'2018-03-31 00:45:30'),('2018-03-31',86,12,'2018-03-31 00:42:01'),('2018-03-31',87,4,'2018-03-31 00:45:25'),('2018-03-31',87,12,'2018-03-31 00:41:46'),('2018-03-31',88,2,'2018-03-31 06:28:39'),('2018-03-31',88,3,'2018-03-31 06:23:10'),('2018-03-31',88,4,'2018-03-31 06:27:11'),('2018-03-31',88,5,'2018-03-31 06:26:17'),('2018-03-31',88,7,'2018-03-31 06:24:45'),('2018-03-31',88,10,'2018-03-31 06:29:15'),('2018-03-31',88,12,'2018-03-31 06:23:49'),('2018-03-31',89,2,'2018-03-31 06:08:07'),('2018-03-31',89,3,'2018-03-31 05:59:22'),('2018-03-31',89,4,'2018-03-31 06:28:00'),('2018-03-31',89,5,'2018-03-31 06:26:37'),('2018-03-31',89,7,'2018-03-31 06:25:30'),('2018-03-31',89,9,'2018-03-31 06:19:58'),('2018-03-31',89,10,'2018-03-31 06:15:57'),('2018-03-31',89,12,'2018-03-31 06:24:05'),('2018-03-31',90,11,'2018-03-31 06:50:16'),('2018-04-01',94,9,'2018-04-07 11:36:44'),('2018-04-01',95,11,'2018-05-21 15:57:24'),('2018-04-01',97,10,'2018-05-21 16:05:54'),('2018-04-01',97,11,'2018-05-21 15:57:41'),('2018-04-02',98,11,'2019-03-06 08:04:33'),('2018-04-02',100,10,'2019-03-06 08:10:02'),('2018-04-07',101,9,'2018-04-07 11:40:40'),('2018-04-07',101,14,'2018-11-21 19:42:08'),('2018-04-07',102,9,'2018-08-23 10:53:40'),('2018-04-12',105,2,'2018-04-12 23:13:08'),('2018-04-12',105,3,'2018-04-12 23:14:14'),('2018-04-12',105,4,'2018-04-12 23:14:55'),('2018-04-12',105,5,'2018-04-12 23:17:21'),('2018-04-12',105,6,'2018-04-12 23:18:04'),('2018-04-12',105,11,'2018-04-12 23:07:05'),('2018-04-12',105,14,'2018-04-12 23:20:56'),('2018-04-12',106,2,'2018-04-12 23:13:16'),('2018-04-12',106,3,'2018-04-12 23:14:19'),('2018-04-12',106,4,'2018-04-12 23:15:10'),('2018-04-12',106,5,'2018-04-12 23:17:25'),('2018-04-12',106,6,'2018-04-12 23:18:12'),('2018-04-12',106,11,'2018-04-12 23:07:17'),('2018-04-12',106,14,'2018-04-12 23:21:01'),('2018-04-12',107,2,'2018-04-12 23:13:13'),('2018-04-12',107,3,'2018-04-12 23:14:22'),('2018-04-12',107,4,'2018-04-12 23:15:00'),('2018-04-12',107,5,'2018-04-12 23:17:29'),('2018-04-12',107,6,'2018-04-12 23:18:08'),('2018-04-12',107,11,'2018-04-12 23:07:09'),('2018-04-12',107,14,'2018-04-12 23:21:05'),('2018-04-13',109,14,'2018-11-27 11:42:09'),('2018-04-20',112,9,'2018-04-20 13:24:08'),('2018-04-20',113,9,'2018-04-20 13:36:21'),('2018-04-21',115,9,'2018-04-21 08:16:40'),('2018-04-21',116,9,'2018-04-21 08:27:44'),('2018-04-24',120,10,'2018-04-24 20:00:35'),('2018-04-25',121,2,'2018-04-25 02:37:05'),('2018-04-25',121,4,'2018-04-25 02:35:49'),('2018-04-25',121,5,'2018-04-25 02:36:29'),('2018-04-25',121,10,'2018-04-25 02:37:42'),('2018-04-25',121,14,'2018-04-25 02:34:11'),('2018-04-25',122,10,'2018-04-25 02:55:52'),('2018-04-29',123,4,'2018-04-30 04:04:15'),('2018-04-29',123,5,'2018-04-30 04:05:41'),('2018-04-29',123,12,'2018-04-29 23:54:13'),('2018-04-29',124,12,'2018-04-30 04:07:44'),('2018-04-30',126,2,'2018-04-30 05:37:40'),('2018-04-30',126,4,'2018-04-30 05:34:13'),('2018-04-30',126,5,'2018-04-30 05:35:43'),('2018-04-30',126,6,'2018-04-30 05:36:16'),('2018-04-30',126,8,'2018-04-30 05:33:33'),('2018-04-30',126,9,'2018-04-30 05:37:03'),('2018-04-30',126,12,'2018-04-30 05:32:43'),('2018-04-30',127,2,'2018-04-30 05:37:35'),('2018-04-30',127,4,'2018-04-30 05:34:08'),('2018-04-30',127,5,'2018-04-30 05:35:37'),('2018-04-30',127,6,'2018-04-30 05:36:11'),('2018-04-30',127,8,'2018-04-30 05:33:39'),('2018-04-30',127,9,'2018-04-30 05:36:57'),('2018-04-30',127,12,'2018-04-30 05:32:22'),('2018-04-30',128,12,'2018-04-30 06:35:50'),('2018-04-30',129,4,'2018-04-30 07:15:59'),('2018-04-30',129,8,'2018-04-30 07:15:13'),('2018-04-30',129,12,'2018-04-30 07:14:37'),('2018-04-30',130,4,'2018-04-30 07:16:03'),('2018-04-30',130,8,'2018-04-30 07:15:18'),('2018-04-30',130,12,'2018-04-30 07:13:47'),('2018-04-30',131,11,'2018-04-30 08:57:04'),('2018-04-30',132,11,'2018-04-30 08:57:25'),('2018-04-30',133,11,'2018-04-30 13:08:09'),('2018-04-30',133,14,'2018-11-26 11:52:34'),('2018-04-30',135,4,'2018-04-30 13:24:59'),('2018-04-30',135,5,'2018-04-30 13:26:05'),('2018-04-30',135,8,'2018-04-30 13:24:30'),('2018-04-30',135,12,'2018-04-30 13:19:44'),('2018-04-30',136,4,'2018-04-30 13:25:03'),('2018-04-30',136,5,'2018-04-30 13:26:00'),('2018-04-30',136,8,'2018-04-30 13:24:34'),('2018-04-30',136,12,'2018-04-30 13:20:11'),('2018-04-30',137,12,'2018-04-30 13:26:56'),('2018-04-30',138,4,'2018-04-30 13:31:26'),('2018-04-30',138,5,'2018-04-30 13:32:05'),('2018-04-30',138,8,'2018-04-30 13:31:01'),('2018-04-30',138,12,'2018-04-30 13:30:41'),('2018-04-30',139,12,'2018-04-30 13:32:44'),('2018-05-02',140,2,'2018-05-02 16:38:38'),('2018-05-02',140,5,'2018-05-02 16:38:02'),('2018-05-02',140,10,'2018-05-02 16:42:29'),('2018-05-02',140,13,'2018-05-02 16:37:39'),('2018-05-02',141,10,'2018-05-02 17:35:48'),('2018-05-02',142,10,'2018-05-02 16:42:34'),('2018-05-04',147,3,'2018-05-04 22:28:03'),('2018-05-04',147,4,'2018-05-04 22:10:29'),('2018-05-04',147,8,'2018-05-04 22:09:59'),('2018-05-04',147,10,'2018-05-04 22:28:24'),('2018-05-04',147,12,'2018-05-04 22:09:33'),('2018-05-04',148,10,'2018-05-04 22:28:36'),('2018-05-04',149,2,'2018-05-04 22:32:14'),('2018-05-04',149,4,'2018-05-04 22:31:12'),('2018-05-04',149,5,'2018-05-04 22:31:54'),('2018-05-04',149,8,'2018-05-04 22:30:55'),('2018-05-04',149,10,'2018-05-04 22:32:41'),('2018-05-04',149,12,'2018-05-04 22:30:39'),('2018-05-04',150,10,'2018-05-04 22:32:46'),('2018-05-16',156,2,'2018-05-16 10:23:37'),('2018-05-16',156,5,'2018-05-16 10:22:57'),('2018-05-16',156,10,'2018-05-16 10:25:07'),('2018-05-16',156,13,'2018-05-16 10:22:08'),('2018-05-16',157,2,'2018-05-16 10:23:31'),('2018-05-16',157,5,'2018-05-16 10:22:52'),('2018-05-16',157,10,'2018-05-16 10:25:13'),('2018-05-16',157,13,'2018-05-16 10:22:00'),('2018-05-16',158,10,'2018-05-16 10:24:17'),('2018-05-16',159,5,'2018-05-16 10:28:47'),('2018-05-16',159,10,'2018-11-09 04:55:48'),('2018-05-16',159,12,'2018-05-16 10:27:52'),('2018-05-16',160,5,'2018-05-16 10:28:53'),('2018-05-16',160,12,'2018-05-16 10:27:46'),('2018-05-16',161,12,'2018-05-16 10:29:52'),('2018-05-16',162,10,'2018-05-16 10:43:56'),('2018-05-17',166,12,'2018-05-17 09:09:49'),('2018-05-20',369,10,'2018-05-20 11:51:39'),('2018-05-20',369,13,'2018-05-20 11:41:57'),('2018-05-20',371,10,'2018-05-20 11:50:10'),('2018-05-20',372,10,'2018-05-20 11:50:46'),('2018-05-20',372,14,'2018-05-21 16:37:21'),('2018-05-21',374,2,'2018-05-21 13:40:46'),('2018-05-21',374,3,'2018-05-21 13:37:21'),('2018-05-21',374,10,'2018-05-21 13:38:13'),('2018-05-21',374,14,'2018-05-21 13:33:31'),('2018-05-21',376,10,'2018-05-21 15:13:26'),('2018-05-21',376,14,'2018-05-21 15:12:05'),('2018-05-21',377,10,'2018-05-21 15:13:49'),('2018-05-21',377,14,'2018-05-21 15:36:17'),('2018-05-21',378,10,'2018-05-21 15:18:48'),('2018-05-21',378,14,'2018-11-27 11:41:43'),('2018-05-21',380,10,'2018-05-21 16:52:31'),('2018-05-21',380,14,'2018-05-21 16:41:51'),('2018-04-01',382,10,'2018-05-21 16:06:24'),('2018-05-21',383,10,'2018-05-21 16:43:56'),('2018-05-21',383,14,'2018-05-21 16:42:14'),('2018-05-21',384,10,'2018-05-21 16:44:19'),('2018-05-21',384,14,'2018-10-27 21:51:37'),('2018-05-22',410,9,'2018-05-22 10:29:27'),('2018-05-22',410,14,'2018-05-22 10:33:26'),('2018-05-22',411,9,'2018-05-22 10:38:58'),('2018-05-22',412,14,'2018-05-22 10:52:04'),('2018-05-22',413,11,'2018-05-22 11:37:25'),('2018-05-22',414,11,'2018-05-22 11:37:49'),('2018-05-22',415,8,'2018-05-22 13:18:52'),('2018-05-22',416,8,'2018-05-22 13:18:47'),('2018-05-22',418,4,'2018-05-22 14:49:25'),('2018-05-22',418,5,'2018-05-22 14:51:06'),('2018-05-22',419,14,'2018-05-22 14:52:08'),('2018-05-22',420,2,'2018-05-22 14:57:18'),('2018-05-22',420,4,'2018-05-22 14:55:42'),('2018-05-22',420,5,'2018-05-22 14:56:17'),('2018-05-22',420,10,'2018-05-22 14:58:41'),('2018-05-22',421,10,'2018-05-22 15:00:12'),('2018-05-22',422,2,'2018-05-22 15:05:42'),('2018-05-22',422,5,'2018-05-22 15:04:46'),('2018-05-22',422,7,'2018-05-22 15:03:48'),('2018-05-22',422,10,'2018-05-22 15:06:22'),('2018-05-22',423,10,'2018-05-22 15:06:32'),('2018-05-22',426,14,'2018-11-20 14:13:44'),('2018-05-22',427,14,'2018-11-20 14:14:58'),('2018-05-24',428,4,'2018-05-24 09:48:26'),('2018-05-24',428,7,'2018-05-24 09:50:45'),('2018-05-24',428,13,'2018-05-26 18:29:07'),('2018-05-24',428,14,'2018-05-24 07:14:06'),('2018-05-24',434,13,'2018-05-26 20:23:48'),('2018-05-24',434,14,'2018-05-26 20:30:13'),('2018-05-24',435,14,'2018-05-26 21:48:30'),('2018-05-27',436,14,'2018-05-27 01:26:01'),('2018-05-26',438,14,'2018-05-27 01:30:03'),('2018-05-30',441,10,'2018-05-30 07:40:18'),('2018-05-30',441,13,'2018-05-30 07:41:50'),('2018-05-27',442,7,'2018-05-31 18:58:44'),('2018-05-31',443,14,'2018-11-27 12:08:49'),('2018-05-31',443,15,'2018-05-31 19:32:36'),('2018-05-31',444,14,'2018-11-27 12:09:01'),('2018-05-31',445,7,'2018-05-31 20:28:40'),('2018-05-31',445,14,'2018-11-27 12:08:52'),('2018-05-31',446,13,'2018-05-31 21:57:02'),('2018-06-04',453,13,'2018-06-04 10:06:24'),('2018-06-04',454,5,'2018-06-04 10:26:21'),('2018-06-04',455,5,'2018-06-04 10:22:42'),('2018-06-04',456,5,'2018-06-04 10:22:07'),('2018-06-04',457,5,'2018-06-04 10:23:38'),('2018-06-04',458,5,'2018-06-04 11:04:52'),('2018-06-04',460,5,'2018-06-04 11:03:10'),('2018-06-08',465,13,'2018-06-08 17:12:47'),('2018-06-08',467,10,'2018-06-08 17:15:29'),('2018-06-08',467,13,'2018-06-08 17:13:36'),('2018-06-08',467,14,'2018-07-23 16:34:07'),('2018-06-08',468,10,'2018-06-08 17:17:30'),('2018-06-12',469,14,'2018-06-12 17:17:31'),('2018-06-12',471,14,'2018-06-12 17:08:49'),('2018-06-12',472,14,'2018-06-12 20:46:34'),('2018-06-12',474,2,'2018-06-12 17:43:03'),('2018-06-17',475,10,'2018-06-17 19:34:17'),('2018-06-17',475,12,'2018-06-17 19:35:44'),('2018-06-17',475,14,'2018-06-17 19:29:32'),('2018-06-18',476,7,'2018-06-18 02:19:27'),('2018-06-18',476,10,'2018-06-18 02:22:33'),('2018-06-18',476,14,'2018-06-18 02:09:55'),('2018-06-25',482,4,'2018-06-26 02:00:01'),('2018-06-25',482,8,'2018-06-26 01:56:53'),('2018-06-25',482,12,'2018-06-26 02:03:11'),('2018-06-25',483,5,'2018-06-25 22:04:40'),('2018-06-25',483,13,'2018-06-25 22:03:39'),('2018-06-25',483,14,'2018-11-21 22:56:40'),('2018-06-25',485,5,'2018-06-25 22:05:57'),('2018-06-25',485,13,'2018-06-25 23:20:59'),('2018-06-25',485,14,'2018-11-21 22:56:29'),('2018-06-25',486,10,'2018-06-26 00:14:50'),('2018-06-26',487,4,'2018-06-26 01:35:16'),('2018-06-26',487,5,'2018-06-26 01:36:02'),('2018-06-26',487,8,'2018-06-26 01:24:18'),('2018-06-26',487,12,'2018-06-26 01:14:03'),('2018-06-26',488,12,'2018-06-26 01:37:04'),('2018-06-26',489,10,'2018-06-26 01:51:22'),('2018-06-26',489,14,'2018-11-27 15:21:23'),('2018-06-25',490,12,'2018-06-26 02:01:53'),('2018-06-25',491,12,'2018-06-26 02:06:29'),('2018-06-26',492,5,'2018-06-26 02:12:11'),('2018-06-26',493,14,'2018-11-27 15:19:48'),('2018-06-26',494,5,'2018-06-26 02:12:29'),('2018-06-26',496,10,'2018-06-26 02:13:51'),('2018-06-26',496,14,'2018-11-27 15:19:51'),('2018-07-12',526,5,'2018-07-13 13:23:10'),('2018-07-27',535,9,'2018-07-27 14:36:47'),('2018-07-27',536,15,'2018-08-15 00:36:34'),('2018-07-26',537,15,'2018-08-15 00:32:13'),('2018-07-30',538,15,'2018-07-30 14:51:26'),('2018-07-31',539,15,'2018-07-31 07:06:24'),('2018-08-01',540,10,'2018-08-01 23:53:54'),('2018-08-01',541,11,'2018-08-01 23:55:58'),('2018-08-02',542,10,'2018-08-02 00:38:51'),('2018-08-02',543,10,'2018-08-02 00:48:01'),('2018-08-02',544,11,'2018-08-02 00:54:22'),('2018-08-02',545,10,'2018-08-02 01:10:40'),('2018-08-02',545,14,'2018-11-21 21:50:10'),('2018-08-11',554,4,'2018-08-11 04:47:53'),('2018-08-11',554,9,'2018-08-11 04:47:25'),('2018-08-11',554,14,'2018-11-21 14:15:54'),('2018-08-11',555,14,'2018-08-11 05:03:30'),('2018-08-11',556,14,'2018-11-27 14:26:17'),('2018-08-11',557,14,'2018-08-11 11:06:41'),('2018-08-11',558,16,'2018-08-15 00:21:53'),('2018-08-11',561,14,'2018-08-15 13:21:19'),('2018-08-18',562,10,'2018-08-19 03:09:27'),('2018-08-21',563,13,'2018-08-21 02:14:47'),('2018-08-21',565,4,'2018-08-21 02:20:26'),('2018-08-21',566,4,'2018-08-21 02:20:49'),('2018-08-21',566,10,'2018-08-21 02:17:17'),('2018-08-21',566,13,'2018-08-21 02:15:34'),('2018-08-21',567,4,'2018-08-21 02:21:04'),('2018-08-21',567,10,'2018-08-21 02:18:45'),('2018-08-21',568,9,'2018-08-21 17:43:58'),('2018-08-21',569,9,'2018-08-21 17:43:43'),('2018-08-21',570,11,'2018-08-21 18:14:00'),('2018-08-21',571,11,'2018-08-21 18:22:39'),('2018-08-21',572,5,'2018-08-21 18:33:34'),('2018-08-21',572,11,'2018-08-21 18:46:51'),('2018-08-21',573,11,'2018-08-21 18:35:25'),('2018-08-21',574,11,'2018-08-21 19:23:52'),('2018-08-21',575,11,'2018-08-21 19:21:50'),('2018-08-21',576,11,'2018-08-21 19:33:40'),('2018-08-21',577,12,'2018-08-21 19:38:18'),('2018-08-21',578,11,'2018-08-21 19:43:05'),('2018-08-23',579,14,'2018-11-21 05:11:50'),('2018-08-23',580,12,'2018-08-23 10:38:17'),('2018-08-23',580,14,'2018-11-21 05:12:11'),('2018-08-23',581,12,'2018-09-01 00:39:45'),('2018-08-23',582,11,'2018-08-23 10:36:27'),('2018-08-23',583,12,'2018-08-23 10:45:24'),('2018-08-23',584,11,'2018-08-23 11:29:50'),('2018-08-23',585,8,'2018-08-23 14:55:03'),('2018-08-23',585,12,'2018-08-23 14:52:51'),('2018-08-23',586,12,'2018-09-03 15:25:34'),('2018-08-23',587,12,'2018-08-23 14:59:46'),('2018-08-31',588,13,'2018-08-31 22:51:53'),('2018-08-31',589,13,'2018-08-31 22:43:39'),('2018-08-31',590,13,'2018-08-31 22:45:48'),('2018-08-31',592,10,'2018-08-31 22:57:18'),('2018-08-31',593,2,'2018-08-31 23:29:22'),('2018-08-31',594,5,'2018-08-31 23:30:44'),('2018-08-31',596,2,'2018-08-31 23:33:26'),('2018-09-03',597,12,'2018-09-07 05:42:00'),('2018-09-28',601,13,'2018-10-03 13:37:01'),('2018-10-06',602,14,'2018-11-22 13:04:21'),('2018-10-06',603,12,'2018-10-06 17:31:18'),('2018-10-06',603,14,'2018-11-27 14:31:30'),('2018-10-06',604,12,'2018-10-07 01:30:28'),('2018-10-06',604,14,'2018-11-22 13:04:26'),('2018-10-07',605,14,'2018-11-25 17:18:08'),('2018-10-07',606,14,'2018-10-07 02:47:17'),('2018-10-07',607,14,'2018-10-07 02:49:54'),('2018-10-07',608,14,'2018-11-26 11:52:16'),('2018-10-07',609,14,'2018-11-26 14:38:09'),('2018-10-07',610,12,'2018-10-07 03:18:51'),('2018-10-07',610,14,'2018-11-26 14:38:18'),('2018-10-07',612,12,'2018-10-07 03:48:46'),('2018-10-07',612,14,'2018-11-27 14:19:34'),('2018-10-07',613,12,'2018-10-07 03:48:54'),('2018-10-07',613,14,'2018-11-27 14:19:26'),('2018-10-07',614,11,'2018-10-07 03:57:36'),('2018-10-07',614,14,'2018-11-27 14:20:12'),('2018-10-07',615,10,'2018-10-07 20:51:05'),('2018-10-07',615,14,'2018-11-27 15:19:21'),('2018-10-17',618,13,'2018-10-17 01:30:27'),('2018-10-28',619,10,'2018-11-14 19:06:58'),('2018-11-02',620,14,'2018-11-03 00:07:35'),('2018-11-02',621,10,'2018-11-03 02:29:52'),('2018-11-02',621,14,'2018-11-03 00:07:10'),('2018-11-03',622,14,'2018-11-21 00:07:14'),('2018-11-03',623,14,'2018-11-21 00:07:16'),('2018-11-02',626,10,'2018-11-03 09:50:23'),('2018-11-02',627,10,'2018-11-03 09:50:51'),('2018-11-03',628,10,'2018-11-03 09:56:19'),('2018-11-03',629,10,'2018-11-03 09:56:12'),('2018-11-03',630,10,'2018-11-03 09:56:42'),('2018-11-03',631,10,'2018-11-09 06:10:50'),('2018-11-03',631,16,'2018-11-07 23:36:41'),('2018-11-04',632,14,'2018-11-16 23:05:42'),('2018-11-09',633,14,'2018-11-09 00:42:29'),('2018-11-09',634,10,'2018-11-09 03:21:45'),('2018-11-09',634,14,'2018-11-09 00:42:17'),('2018-11-10',636,7,'2018-11-10 16:18:48'),('2018-11-10',636,14,'2018-11-10 20:54:48'),('2018-11-10',637,14,'2018-11-20 12:07:52'),('2018-11-10',638,7,'2018-11-10 20:34:32'),('2018-11-10',638,14,'2018-11-20 12:01:15'),('2018-11-10',639,7,'2018-11-10 20:56:08'),('2018-11-10',639,14,'2018-11-10 22:01:13'),('2018-11-10',640,7,'2018-11-10 20:56:16'),('2018-11-10',640,14,'2018-11-10 22:01:06'),('2018-11-04',641,14,'2018-11-16 23:05:52'),('2018-11-04',642,2,'2018-11-10 22:32:15'),('2018-11-04',643,2,'2018-11-10 22:32:12'),('2018-11-10',644,10,'2018-11-14 19:09:33'),('2018-11-10',644,14,'2018-11-27 09:29:44'),('2018-11-11',645,7,'2018-11-11 01:08:01'),('2018-11-11',645,10,'2018-11-14 17:14:49'),('2018-11-20',649,10,'2018-11-20 22:56:40'),('2018-11-20',649,14,'2018-11-27 11:30:48'),('2018-11-03',650,5,'2018-11-21 00:11:07'),('2018-11-03',651,5,'2018-11-21 00:11:04'),('2018-11-21',652,8,'2018-11-21 13:29:22'),('2018-11-21',652,14,'2018-11-21 12:40:23'),('2018-11-21',653,14,'2018-11-21 11:43:44'),('2018-11-21',654,14,'2018-11-21 11:43:41'),('2018-11-21',655,8,'2018-11-21 05:24:38'),('2018-11-21',656,8,'2018-11-21 05:25:00'),('2018-11-21',657,8,'2018-11-21 05:25:03'),('2018-11-21',658,8,'2018-11-21 19:56:38'),('2018-11-21',659,11,'2018-11-21 20:02:31'),('2018-11-21',659,14,'2018-11-27 11:33:02'),('2018-10-03',660,9,'2018-11-21 22:08:22'),('2018-10-03',661,9,'2018-11-21 22:08:20'),('2018-11-21',662,14,'2018-11-22 00:38:05'),('2018-11-21',663,14,'2018-11-22 03:18:01'),('2018-11-21',664,14,'2018-11-22 03:17:58'),('2018-11-21',665,14,'2018-11-22 03:25:21'),('2018-11-21',666,5,'2018-11-22 11:23:57'),('2018-11-21',666,14,'2018-11-27 11:55:17'),('2018-11-22',667,7,'2018-11-22 12:19:53'),('2018-11-22',667,16,'2018-11-22 12:16:01'),('2018-11-22',668,7,'2018-11-22 12:20:02'),('2018-11-22',668,16,'2018-11-22 12:16:17'),('2018-11-22',669,7,'2018-11-22 12:20:10'),('2018-11-22',669,16,'2018-11-22 12:16:26'),('2018-11-25',670,8,'2018-11-25 15:42:56'),('2018-11-25',670,14,'2018-11-27 13:59:10'),('2018-11-25',671,8,'2018-11-25 15:43:17'),('2018-11-25',672,8,'2018-11-25 15:43:07'),('2018-11-25',673,12,'2018-11-25 16:03:29'),('2018-11-25',673,14,'2018-11-27 13:59:18'),('2018-11-25',674,8,'2018-11-25 17:29:36'),('2018-11-25',674,14,'2018-11-27 11:35:47'),('2018-11-25',675,4,'2018-11-25 19:23:26'),('2018-11-25',675,8,'2018-11-25 17:29:30'),('2018-11-25',675,14,'2018-11-27 11:35:41'),('2018-11-25',676,8,'2018-11-25 17:32:24'),('2018-11-25',676,14,'2018-11-25 17:18:39'),('2018-11-25',677,8,'2018-11-25 17:32:19'),('2018-11-25',677,14,'2018-11-25 17:18:34'),('2018-11-25',678,8,'2018-11-26 11:00:04'),('2018-11-25',679,8,'2018-11-26 10:59:59'),('2018-11-25',680,14,'2018-11-26 11:08:45'),('2018-11-25',681,14,'2018-11-26 11:09:02'),('2018-11-26',683,4,'2018-11-26 11:53:56'),('2018-11-26',684,14,'2018-11-26 11:56:08'),('2018-11-26',685,5,'2018-11-26 14:52:50'),('2018-11-26',685,8,'2018-11-26 14:45:09'),('2018-11-26',685,14,'2018-11-27 11:33:45'),('2018-11-26',686,8,'2018-11-26 14:44:41'),('2018-11-26',687,8,'2018-11-26 14:44:33'),('2018-11-26',688,5,'2018-11-26 14:52:55'),('2018-11-26',688,12,'2018-11-26 14:48:03'),('2018-11-26',688,14,'2018-11-27 11:33:52'),('2018-11-26',689,4,'2018-11-26 16:22:35'),('2018-11-26',689,8,'2018-11-26 16:20:26'),('2018-11-26',689,14,'2018-11-27 11:34:24'),('2018-11-26',690,8,'2018-11-26 16:20:48'),('2018-11-26',690,14,'2018-11-27 11:34:40'),('2018-11-26',691,8,'2018-11-26 16:21:15'),('2018-11-26',691,14,'2018-11-27 11:34:43'),('2018-11-26',692,5,'2018-11-26 16:27:17'),('2018-11-26',692,12,'2018-11-26 16:24:15'),('2018-11-26',692,14,'2018-11-27 11:34:31'),('2018-11-27',693,10,'2018-11-27 10:19:19'),('2018-11-27',694,10,'2018-11-27 10:19:12'),('2018-11-27',694,14,'2018-11-27 17:43:45'),('2018-11-27',695,10,'2018-11-27 10:22:17'),('2018-11-27',695,14,'2018-11-27 11:31:28'),('2018-11-27',696,10,'2018-11-27 10:22:24'),('2018-11-27',696,14,'2018-11-27 11:31:21'),('2018-11-26',697,8,'2018-11-27 16:14:10'),('2018-11-26',698,8,'2018-11-27 16:14:05'),('2018-11-26',699,10,'2018-11-27 16:20:24'),('2018-11-27',700,8,'2018-11-27 16:57:51'),('2018-11-27',701,8,'2018-11-27 16:57:54'),('2018-11-27',702,8,'2018-11-27 16:58:14'),('2018-11-27',703,8,'2018-11-27 16:58:11'),('2018-11-27',704,11,'2018-11-27 17:02:50'),('2018-12-12',718,9,'2018-12-12 22:02:33'),('2018-12-12',720,9,'2018-12-12 22:02:21'),('2018-12-12',720,13,'2018-12-12 22:09:10'),('2018-12-12',721,13,'2018-12-12 22:06:45'),('2018-12-12',732,13,'2018-12-13 00:02:38'),('2018-12-12',735,13,'2018-12-13 00:13:43'),('2019-03-04',751,12,'2019-03-13 00:16:33'),('2019-03-04',752,12,'2019-03-12 23:29:34'),('2019-03-04',753,10,'2019-03-13 00:18:44'),('2019-03-04',754,8,'2019-03-27 15:10:19'),('2019-03-04',754,10,'2019-03-13 00:18:59'),('2019-03-04',754,12,'2019-03-27 15:08:07'),('2019-03-04',755,12,'2019-03-06 03:23:06'),('2018-04-02',756,10,'2019-03-06 08:10:12'),('2019-03-06',757,7,'2019-03-06 18:48:01'),('2019-03-06',757,10,'2019-03-06 19:23:31'),('2019-03-06',757,16,'2019-03-06 18:46:06'),('2019-03-06',758,10,'2019-03-06 19:23:37'),('2019-03-06',758,16,'2019-03-06 19:09:17'),('2019-03-06',759,16,'2019-03-06 19:17:40'),('2019-03-06',760,16,'2019-03-06 18:53:33'),('2019-03-06',761,16,'2019-03-06 18:53:36'),('2019-03-06',762,16,'2019-03-06 18:53:39'),('2019-03-06',763,5,'2019-03-06 18:51:00'),('2019-03-06',763,16,'2019-03-06 20:22:00'),('2019-03-06',764,16,'2019-03-06 18:52:12'),('2019-03-06',765,10,'2019-03-06 19:29:06'),('2019-03-06',765,16,'2019-03-06 19:52:56'),('2019-03-06',766,10,'2019-03-06 19:36:23'),('2019-03-06',766,16,'2019-03-06 19:53:03'),('2019-03-06',767,10,'2019-03-06 19:36:48'),('2019-03-06',767,16,'2019-03-06 19:53:28'),('2019-03-06',768,10,'2019-03-06 19:37:03'),('2019-03-06',768,16,'2019-03-06 19:37:48'),('2019-03-21',769,12,'2019-03-21 17:23:30'),('2019-03-21',770,12,'2019-03-21 17:23:38'),('2019-03-21',771,12,'2019-03-22 10:27:51'),('2019-03-22',773,4,'2019-03-22 11:23:19'),('2019-03-22',773,12,'2019-03-22 10:57:49'),('2019-03-22',774,4,'2019-03-22 14:32:20'),('2019-03-22',774,8,'2019-03-22 14:31:51'),('2019-03-22',774,12,'2019-03-22 14:31:14'),('2019-03-22',775,8,'2019-03-22 14:31:54'),('2019-03-22',775,12,'2019-03-22 14:31:05'),('2019-03-22',776,14,'2019-03-23 21:04:11'),('2019-03-22',777,14,'2019-03-23 21:03:15'),('2019-03-22',778,14,'2019-03-23 21:04:42'),('2019-03-25',779,4,'2019-03-25 14:40:50'),('2019-03-25',779,14,'2019-03-25 14:05:14'),('2019-03-25',780,14,'2019-03-25 16:06:32'),('2019-03-25',781,14,'2019-03-25 16:38:26'),('2019-03-26',782,10,'2019-03-26 12:09:34'),('2019-03-26',782,12,'2019-03-26 11:51:45'),('2019-03-26',783,12,'2019-03-26 11:58:57'),('2019-03-26',784,12,'2019-03-26 11:58:29'),('2019-03-26',785,12,'2019-03-26 11:58:29'),('2019-03-26',786,10,'2019-03-26 12:06:41'),('2019-03-26',787,10,'2019-03-26 12:09:20'),('2019-03-26',788,10,'2019-03-26 12:08:25'),('2019-03-26',789,10,'2019-03-26 12:09:27'),('2019-03-26',789,12,'2019-03-26 13:19:55'),('2019-03-26',790,12,'2019-03-26 12:54:40'),('2019-03-26',791,12,'2019-03-26 14:54:08'),('2019-03-26',792,4,'2019-03-26 14:55:28'),('2019-03-26',792,12,'2019-03-26 14:53:53'),('2019-03-26',793,11,'2019-03-27 11:55:38'),('2019-03-27',794,4,'2019-03-27 10:29:42'),('2019-03-27',794,8,'2019-03-27 10:23:35'),('2019-03-27',794,12,'2019-03-27 10:21:47'),('2019-03-27',795,4,'2019-03-27 10:29:45'),('2019-03-27',795,8,'2019-03-27 10:23:39'),('2019-03-27',795,12,'2019-03-27 10:21:40'),('2019-03-27',796,12,'2019-03-27 10:32:00'),('2019-03-27',797,4,'2019-03-27 10:39:16'),('2019-03-27',797,8,'2019-03-27 10:37:36'),('2019-03-27',797,12,'2019-03-27 10:37:03'),('2019-03-27',798,4,'2019-03-27 10:39:18'),('2019-03-27',798,8,'2019-03-27 10:37:39'),('2019-03-27',798,12,'2019-03-27 10:36:57'),('2019-03-27',799,14,'2019-03-27 12:31:43'),('2019-03-27',800,14,'2019-03-27 12:31:57'),('2019-03-27',801,14,'2019-03-27 12:32:17'),('2019-03-27',802,14,'2019-03-27 12:35:18'),('2019-03-27',803,14,'2019-03-27 12:52:05'),('2019-03-27',804,14,'2019-03-27 12:48:32'),('2019-03-27',805,8,'2019-03-27 13:23:25'),('2019-03-27',805,12,'2019-03-27 12:57:12'),('2019-03-27',805,16,'2019-03-27 13:33:11'),('2019-03-27',806,8,'2019-03-27 13:23:33'),('2019-03-27',806,12,'2019-03-27 13:28:21'),('2019-03-27',807,8,'2019-03-27 13:23:30'),('2019-03-27',807,12,'2019-03-27 12:57:17'),('2019-03-27',808,12,'2019-03-27 13:26:15'),('2019-03-27',809,16,'2019-03-27 13:31:46'),('2019-03-27',810,16,'2019-03-27 13:32:53'),('2019-03-27',811,16,'2019-03-27 13:32:04'),('2019-03-27',812,16,'2019-03-27 13:33:01'),('2019-03-27',813,12,'2019-03-27 13:33:54'),('2019-03-27',814,16,'2019-03-27 14:55:51'),('2019-03-06',815,16,'2019-03-27 15:05:34'),('2019-03-27',816,16,'2019-03-27 15:11:35'),('2019-03-27',817,16,'2019-03-27 15:29:12'),('2019-03-27',818,16,'2019-03-27 15:51:40'),('2019-03-27',819,16,'2019-03-27 15:30:26'),('2019-03-27',820,16,'2019-03-27 15:33:00'),('2019-03-27',821,16,'2019-03-27 15:33:07'),('2019-04-02',822,5,'2019-04-02 06:45:59'),('2019-04-02',822,13,'2019-04-02 02:32:39'),('2019-04-02',822,14,'2019-04-02 06:18:54'),('2019-04-02',822,16,'2019-04-02 07:42:26'),('2019-04-02',823,13,'2019-04-02 07:13:31'),('2019-04-02',823,14,'2019-04-02 06:19:07'),('2019-04-02',823,16,'2019-04-02 07:42:40'),('2019-04-02',825,5,'2019-04-02 06:46:58'),('2019-04-02',825,13,'2019-04-02 07:10:36'),('2019-04-02',826,5,'2019-04-02 06:48:35'),('2019-04-02',826,13,'2019-04-02 07:22:59'),('2019-04-02',826,16,'2019-04-02 07:45:09'),('2019-04-02',827,5,'2019-04-02 06:51:30'),('2019-04-02',827,13,'2019-04-02 07:23:04'),('2019-04-02',827,16,'2019-04-02 07:45:25'),('2019-04-02',828,13,'2019-04-02 07:20:46'),('2019-04-02',829,16,'2019-04-02 08:11:29'),('2019-04-02',830,16,'2019-04-02 08:16:27'),('2019-04-09',831,13,'2019-04-09 10:19:28'),('2019-04-09',831,16,'2019-04-09 10:18:44'),('2019-04-09',832,13,'2019-04-09 10:08:59'),('2019-04-09',837,13,'2019-04-09 10:08:59'),('2019-04-09',838,16,'2019-04-09 10:15:31'),('2019-04-09',839,13,'2019-04-09 10:16:41'),('2019-04-09',839,16,'2019-04-09 10:15:40'),('2019-04-09',840,4,'2019-04-09 10:40:37'),('2019-04-09',840,8,'2019-04-09 10:37:09'),('2019-04-09',841,4,'2019-04-09 10:40:39'),('2019-04-09',841,8,'2019-04-09 10:37:27'),('2019-04-09',842,12,'2019-04-09 10:41:59'),('2019-04-09',843,4,'2019-04-09 10:47:24'),('2019-04-09',843,8,'2019-04-09 10:47:09'),('2019-04-09',844,4,'2019-04-09 10:47:27'),('2019-04-09',844,8,'2019-04-09 10:46:54'),('2019-04-09',844,12,'2019-04-09 10:46:20'),('2019-04-09',845,14,'2019-04-09 10:58:25'),('2019-04-09',846,14,'2019-04-09 10:58:32'),('2019-04-09',847,14,'2019-04-09 10:59:02'),('2019-04-09',848,14,'2019-04-09 11:03:10'),('2019-04-09',849,14,'2019-04-09 11:05:57'),('2019-04-09',850,14,'2019-04-09 11:06:51'),('2019-04-09',851,8,'2019-04-09 11:11:07'),('2019-04-09',851,12,'2019-04-09 11:10:32'),('2019-04-09',851,16,'2019-04-09 11:27:57'),('2019-04-09',852,8,'2019-04-09 11:11:16'),('2019-04-09',852,12,'2019-04-09 11:23:19'),('2019-04-09',853,12,'2019-04-09 11:23:27'),('2019-04-09',854,16,'2019-04-09 11:27:50'),('2019-04-09',855,12,'2019-04-09 11:28:47'),('2019-04-09',856,16,'2019-04-09 11:31:30'),('2019-04-09',857,16,'2019-04-09 11:35:08'),('2019-04-09',859,11,'2019-04-09 11:41:58'),('2019-04-14',860,11,'2019-04-14 08:02:30'),('2019-04-17',861,12,'2019-04-17 16:13:04'),('2019-04-18',863,12,'2019-04-18 14:31:26'),('2019-04-18',864,12,'2019-04-18 14:16:40'),('2019-04-18',865,5,'2019-04-18 14:09:16'),('2019-04-18',865,12,'2019-04-18 14:32:56'),('2019-04-18',865,18,'2019-04-18 14:07:53'),('2019-04-18',866,12,'2019-04-18 14:16:40'),('2019-04-18',867,12,'2019-04-18 14:31:02'),('2019-04-18',867,16,'2019-04-18 14:22:00'),('2019-04-18',868,12,'2019-04-18 14:31:09'),('2019-04-18',869,5,'2019-04-18 15:03:26'),('2019-04-18',869,8,'2019-04-18 14:36:41'),('2019-04-18',869,18,'2019-04-18 15:01:19'),('2019-04-18',871,5,'2019-04-18 15:03:55'),('2019-04-18',871,18,'2019-04-18 14:38:30'),('2019-04-18',872,5,'2019-04-18 15:03:49'),('2019-04-18',872,18,'2019-04-18 15:02:43'),('2019-04-18',873,5,'2019-04-18 15:03:52'),('2019-04-18',873,18,'2019-04-18 15:02:47'),('2019-04-18',876,12,'2019-04-18 16:05:12'),('2019-04-18',876,16,'2019-04-18 16:06:56'),('2019-04-18',877,12,'2019-04-18 16:10:54'),('2019-04-18',878,5,'2019-04-18 16:01:42'),('2019-04-18',878,8,'2019-04-18 15:49:27'),('2019-04-18',878,12,'2019-04-18 16:02:11'),('2019-04-18',878,16,'2019-04-18 16:06:12'),('2019-04-18',878,18,'2019-04-18 15:56:49'),('2019-04-18',879,5,'2019-04-18 16:01:45'),('2019-04-18',879,8,'2019-04-18 15:49:35'),('2019-04-18',879,12,'2019-04-18 16:02:14'),('2019-04-18',879,16,'2019-04-18 16:06:15'),('2019-04-18',879,18,'2019-04-18 15:56:52'),('2019-04-18',880,5,'2019-04-18 16:00:54'),('2019-04-18',880,8,'2019-04-18 15:48:56'),('2019-04-18',880,12,'2019-04-18 16:05:36'),('2019-04-18',880,16,'2019-04-18 16:07:03'),('2019-04-18',880,18,'2019-04-18 15:54:56'),('2019-04-18',881,5,'2019-04-18 16:00:57'),('2019-04-18',881,8,'2019-04-18 15:49:01'),('2019-04-18',881,12,'2019-04-18 16:05:33'),('2019-04-18',881,16,'2019-04-18 16:07:06'),('2019-04-18',882,5,'2019-04-18 16:01:13'),('2019-04-18',882,12,'2019-04-18 16:05:40'),('2019-04-18',882,16,'2019-04-18 16:07:10'),('2019-04-18',882,18,'2019-04-18 15:56:15'),('2019-04-18',883,5,'2019-04-18 16:01:50'),('2019-04-18',883,12,'2019-04-18 16:02:17'),('2019-04-18',883,16,'2019-04-18 16:06:23'),('2019-04-18',883,18,'2019-04-18 15:57:20'),('2019-04-18',884,12,'2019-04-18 16:04:16'),('2019-04-18',885,12,'2019-04-18 16:10:00'),('2019-04-18',885,16,'2019-04-18 16:08:12'),('2019-04-18',886,12,'2019-04-18 16:11:40'),('2019-04-19',888,12,'2019-04-19 11:48:11'),('2019-04-19',888,16,'2019-04-19 11:54:37'),('2019-04-19',889,12,'2019-04-19 11:48:11'),('2019-04-19',890,12,'2019-04-19 11:56:55'),('2019-04-19',890,16,'2019-04-19 11:56:03'),('2019-04-19',891,12,'2019-04-19 11:57:01'),('2019-04-19',892,12,'2019-04-19 11:57:27'),('2019-04-19',893,4,'2019-04-19 13:51:25'),('2019-04-19',893,8,'2019-04-19 13:49:49'),('2019-04-19',893,12,'2019-04-19 13:48:20'),('2019-04-19',894,5,'2019-04-19 13:52:27'),('2019-04-19',894,8,'2019-04-19 13:49:52'),('2019-04-19',894,12,'2019-04-19 13:48:28'),('2019-04-19',894,16,'2019-04-19 13:53:33'),('2019-04-19',895,12,'2019-04-19 13:52:57'),('2019-04-19',896,8,'2019-04-19 16:10:54'),('2019-04-19',896,12,'2019-04-19 16:05:17'),('2019-04-19',896,16,'2019-04-19 16:15:49'),('2019-04-19',897,12,'2019-04-19 16:15:13'),('2019-04-19',897,16,'2019-04-19 16:15:45'),('2019-04-19',898,12,'2019-04-19 16:15:13'),('2019-04-19',899,12,'2019-04-19 16:17:22'),('2019-04-19',900,12,'2019-04-19 16:17:13'),('2019-04-19',901,12,'2019-04-19 16:17:28'),('2019-04-19',902,8,'2019-04-19 16:28:02'),('2019-04-19',902,12,'2019-04-19 16:27:10'),('2019-04-19',902,16,'2019-04-19 16:35:48'),('2019-04-19',903,4,'2019-04-19 16:31:55'),('2019-04-19',903,5,'2019-04-19 16:33:56'),('2019-04-19',903,8,'2019-04-19 16:27:59'),('2019-04-19',903,12,'2019-04-19 16:27:03'),('2019-04-19',903,16,'2019-04-19 16:35:51'),('2019-04-19',903,18,'2019-04-19 16:32:30'),('2019-04-19',904,12,'2019-04-19 16:36:08');
/*!40000 ALTER TABLE `Pf_A_AttachReadHis` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_A_AttachReadHis_11` BEFORE INSERT ON `Pf_A_AttachReadHis` FOR EACH ROW
BEGIN
	declare vRecDivTag DATE;
    
	SELECT RecDivTag INTO vRecDivTag FROM Pf_A_AttachInfo WHERE Seq=new.AttachSeq;
    set new.RecDivTag=vRecDivTag;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Pf_A_Biz`
--

DROP TABLE IF EXISTS `Pf_A_Biz`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_A_Biz` (
  `RecDivTag` date NOT NULL,
  `Seq` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `BizCode` tinyint(3) unsigned NOT NULL,
  `BizID` int(11) unsigned NOT NULL,
  `BizTitle` varchar(100) NOT NULL,
  `InitUsrID` smallint(5) unsigned NOT NULL,
  `SubmitTs` datetime DEFAULT NULL,
  `FlowOverTs` datetime DEFAULT NULL,
  `FlowDefID` smallint(4) unsigned NOT NULL,
  `FlowStatus` smallint(4) NOT NULL,
  `WaitPersons` varchar(100) NOT NULL DEFAULT '-',
  `IfToBeArchived` char(1) NOT NULL DEFAULT 'N',
  PRIMARY KEY (`Seq`),
  UNIQUE KEY `Seq` (`Seq`),
  UNIQUE KEY `Pf_A_Biz_idx1` (`BizCode`,`BizID`),
  KEY `BizCode` (`BizCode`),
  KEY `InitUsrID` (`InitUsrID`),
  KEY `FlowDefID` (`FlowDefID`),
  KEY `FlowStatus` (`FlowStatus`),
  CONSTRAINT `Pf_A_Biz_fk1` FOREIGN KEY (`BizCode`) REFERENCES `Pf_M_Biz` (`Code`),
  CONSTRAINT `Pf_A_Biz_fk2` FOREIGN KEY (`InitUsrID`) REFERENCES `Pf_M_Usr` (`ID`),
  CONSTRAINT `Pf_A_Biz_fk3` FOREIGN KEY (`FlowDefID`) REFERENCES `Pf_M_BizFlow` (`ID`),
  CONSTRAINT `Pf_A_Biz_fk4` FOREIGN KEY (`FlowStatus`) REFERENCES `Pf_M_BizNode` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=474 DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_A_Biz`
--

LOCK TABLES `Pf_A_Biz` WRITE;
/*!40000 ALTER TABLE `Pf_A_Biz` DISABLE KEYS */;
INSERT INTO `Pf_A_Biz` VALUES ('2018-01-26',2,12,2,'关于绩效考核工作注意事项',14,'2018-01-26 18:38:51','2018-01-26 19:03:02',8,44,'-','Y'),('2018-01-31',10,12,3,'发文测试',14,'2018-01-31 14:09:59','2018-01-31 14:18:54',8,44,'-','Y'),('2018-02-04',17,13,1,'总部新办公地址选址',14,'2018-02-04 12:50:27','2018-02-04 13:13:27',9,51,'-','Y'),('2018-02-04',19,17,1,'[杨震]申请休假，事由：[年假测试]',14,'2018-02-04 16:06:26','2018-05-22 10:00:57',12,69,'-','Y'),('2018-02-21',21,21,1,'杜斌【北京立思震科技有限公司收购】立项申请',12,'2018-02-21 15:51:50','2018-02-22 16:52:22',16,246,'-','Y'),('2018-03-02',22,21,2,'杨震【测试项目】立项申请',14,'2018-03-02 11:36:18','2018-03-02 11:44:42',16,246,'-','Y'),('2018-03-05',23,25,1,'[杨震]申请使用印章、证照，申请事由[1212]',14,'2018-03-06 14:25:00','2018-03-07 16:07:16',20,274,'-','Y'),('2018-03-07',24,25,2,'[杨震]申请使用印章、证照，申请事由[汉字]',14,'2018-03-07 11:50:48','2018-03-07 14:52:50',20,274,'-','Y'),('2018-03-07',25,25,3,'[付春奇]申请使用印章、证照，申请事由[商用]',10,NULL,NULL,20,268,'付春奇','N'),('2018-03-08',26,22,1,'杨震【测试项目】尽职调查材料审批',14,'2018-03-08 17:01:21','2018-03-09 15:58:17',17,250,'-','Y'),('2018-03-12',27,23,1,'杨震【测试项目】项目审查审批',14,'2018-03-13 10:42:57','2018-03-13 14:31:43',18,261,'-','Y'),('2018-03-14',28,21,3,'杜斌【长生收购】立项申请',12,'2018-03-14 09:52:44',NULL,16,245,'哈斯、孙瑞峰、项鑫','N'),('2018-03-14',29,24,1,'祝慧静【测试项目】实施方案审批',11,'2018-03-14 14:55:55','2018-03-14 15:26:27',19,267,'-','Y'),('2018-03-11',30,21,4,'杜斌【雷特世纪收购】立项申请',12,'2018-03-11 14:23:17','2018-03-11 14:45:07',16,246,'-','Y'),('2018-03-22',35,21,5,'杜斌【入股汇丰银行】立项申请',12,'2018-03-22 13:20:36','2018-03-22 13:30:45',16,246,'-','Y'),('2018-03-22',36,22,2,'杜斌【入股汇丰银行】尽职调查材料审批',12,'2018-03-22 13:33:12','2018-03-22 13:33:54',17,250,'-','Y'),('2018-03-22',37,23,2,'杜斌【入股汇丰银行】项目审查审批',12,'2018-03-22 13:41:41','2018-03-22 14:00:24',18,261,'-','Y'),('2018-03-22',38,24,2,'祝慧静【入股汇丰银行】实施方案审批',11,'2018-03-22 14:15:44','2018-03-22 14:17:55',19,267,'-','Y'),('2018-03-22',39,14,1,'[杜斌]申请借款，事由：借款测试2018-03-22-1',12,'2018-03-22 14:25:44','2018-03-22 15:20:05',13,191,'-','Y'),('2018-03-22',41,25,4,'[项鑫]申请使用印章、证照，申请事由[申请使用公司章用于入股汇丰银行项目合同盖章]',9,'2018-03-22 14:47:24','2018-03-22 14:59:04',20,274,'-','Y'),('2018-03-22',42,14,2,'[杜斌]申请借款，事由：准备干一大票',12,'2018-03-22 15:34:40','2018-03-22 15:47:13',13,191,'-','Y'),('2018-03-27',46,25,5,'[杜斌]申请使用印章、证照，申请事由[申请事由：\r\n1、测试\r\n2、]',12,'2018-03-27 14:26:36','2018-03-27 14:50:07',20,274,'-','Y'),('2018-03-29',47,15,1,'[杜斌]提出还款，情况说明：所借备用金到期20180330',12,'2018-03-29 08:32:30','2018-03-29 09:03:32',23,300,'-','Y'),('2018-03-31',50,22,3,'杜斌【北京立思震科技有限公司收购】尽职调查材料审批',12,'2018-03-31 00:42:23','2018-03-31 00:45:52',17,250,'-','Y'),('2018-03-31',51,23,3,'杜斌【北京立思震科技有限公司收购】项目审查审批',12,'2018-03-31 03:38:14','2018-03-31 06:29:41',18,261,'-','Y'),('2018-03-31',52,24,3,'祝慧静【北京立思震科技有限公司收购】实施方案审批',11,'2018-03-31 06:42:52','2018-03-31 06:50:27',19,267,'-','Y'),('2018-04-01',55,23,4,'杜斌【北京立思震科技有限公司收购】项目审查审批',12,'2018-04-30 06:20:05',NULL,18,252,'蔡路','N'),('2018-04-01',56,14,3,'[杨震]申请借款，事由：测试图片套红',14,'2018-04-01 10:32:27','2018-04-07 11:37:12',13,191,'-','Y'),('2018-04-01',57,12,4,'测试自动保存',11,'2018-04-01 12:09:57',NULL,8,43,'付春奇','N'),('2018-04-02',58,12,5,'测试图片套模板',11,'2018-04-02 02:16:19',NULL,8,43,'付春奇','N'),('2018-04-07',59,14,4,'[杨震]申请借款，事由：图片套模板测试2',14,'2018-04-07 11:39:49','2018-04-07 11:42:10',13,191,'-','Y'),('2018-04-07',60,14,5,'[杜斌]申请借款，事由：测试隐藏office工具栏',12,'2018-04-07 12:09:37','2018-08-23 10:53:49',13,191,'-','N'),('2018-04-12',62,20,2,'关于规范保理业务的通知',11,'2018-04-12 23:08:37','2018-04-12 23:19:46',24,304,'-','Y'),('2018-04-13',63,20,3,'测试附件上传删除多余选择',11,NULL,NULL,24,301,'祝慧静','N'),('2018-04-20',66,15,2,'[杨震]提出还款，情况说明：5000',14,'2018-04-20 13:23:34','2018-04-20 13:24:41',23,300,'-','Y'),('2018-04-20',67,15,3,'[杨震]提出还款，情况说明：先还1000',14,'2018-04-20 13:36:06','2018-04-20 13:36:37',23,300,'-','Y'),('2018-04-21',69,14,6,'[项鑫]申请借款，事由：测试新Pf_ToRMB函数',9,'2018-04-21 08:14:21','2018-04-21 08:17:51',13,191,'-','N'),('2018-04-21',70,15,4,'[杨震]提出还款，情况说明：测试Pf_ToRMB小写转大写',14,'2018-04-21 08:20:18','2018-04-21 08:28:22',23,300,'-','Y'),('2018-04-24',74,25,6,'[杜斌]申请使用印章、证照，申请事由[测试de]',12,'2018-04-24 20:00:09',NULL,20,275,'付春奇','N'),('2018-04-25',75,25,7,'[杜斌]申请使用印章、证照，申请事由[测试增加用印份数]',12,'2018-04-25 01:20:43',NULL,20,268,'杜斌','N'),('2018-04-25',76,25,8,'[杨震]申请使用印章、证照，申请事由[申请事由：\r\n测试附件]',14,'2018-04-25 02:35:24','2018-04-25 02:56:00',20,274,'-','Y'),('2018-04-29',77,27,1,'入股汇丰银行合同1',12,'2018-04-29 23:54:19','2018-04-30 04:18:29',27,309,'-','Y'),('2018-04-30',78,21,7,'杜斌【贵州习酒收购】立项申请',12,'2018-04-30 05:33:16','2018-04-30 07:12:10',16,246,'-','Y'),('2018-04-30',79,22,4,'杜斌【贵州习酒收购】尽职调查材料审批',12,'2018-04-30 07:14:57','2018-04-30 07:16:12',17,250,'-','Y'),('2018-04-30',80,23,5,'杜斌【贵州习酒收购】项目审查审批',12,'2018-04-30 08:11:52','2018-04-30 08:59:16',28,261,'-','Y'),('2018-04-30',81,24,4,'祝慧静【贵州习酒收购】实施方案审批',11,'2018-04-30 12:54:23','2018-04-30 13:16:18',19,267,'-','Y'),('2018-04-30',82,27,2,'贵州习酒收购1期合同',12,'2018-04-30 13:20:28','2018-04-30 13:28:05',27,309,'-','Y'),('2018-04-30',83,27,3,'贵州习酒收购2期',12,'2018-04-30 13:30:48','2018-05-02 15:57:05',27,309,'-','Y'),('2018-05-02',85,25,10,'[杜斌]申请使用印章、证照，申请事由[《贵州习酒收购2期》合同用印]',12,'2018-05-02 15:59:27','2018-05-02 17:35:57',25,274,'-','Y'),('2018-05-02',86,25,11,'[刘佳妮]申请使用印章、证照，申请事由[办公司社保]',13,'2018-05-02 16:37:46','2018-05-02 17:27:59',25,274,'-','Y'),('2018-05-04',90,25,12,'[杜斌]申请使用印章、证照，申请事由[测试光申请财务章\r\n1、\r\n2、]',12,'2018-05-04 22:09:45','2018-05-04 22:28:55',25,274,'-','Y'),('2018-05-04',91,25,13,'[杜斌]申请使用印章、证照，申请事由[测试多章申请\r\na、\r\nb、]',12,'2018-05-04 22:30:45','2018-05-04 22:33:05',25,274,'-','Y'),('2018-05-10',92,11,8,'火车头俱乐部开张了',14,'2018-05-10 17:18:09','2018-05-10 17:19:04',7,38,'-','Y'),('2018-05-10',93,11,9,'公司夏游纪实',14,'2018-05-10 17:32:47','2018-05-10 17:33:54',7,38,'-','Y'),('2018-05-16',96,25,15,'[刘佳妮]申请使用印章、证照，申请事由[测试2018-517]',13,'2018-05-16 10:22:29','2018-05-16 10:25:17',25,274,'-','Y'),('2018-05-16',97,27,4,'与贵州习酒往来合同1',12,'2018-05-16 10:28:31','2018-05-16 10:41:10',27,309,'-','Y'),('2018-05-16',98,25,16,'[杜斌]申请使用印章、证照，申请事由[合同用印]',12,'2018-05-16 10:41:43','2018-05-16 10:45:17',25,274,'-','Y'),('2018-05-16',99,11,10,'深圳1.61亿巨奖得主现身领奖 去年曾中二等奖',13,'2018-05-16 12:10:50','2018-05-16 12:12:12',7,38,'-','Y'),('2018-05-17',186,25,17,'[杜斌]申请使用印章、证照，申请事由[1、	业务表；模块_M/A/D/C_表名；\r\n[模块]：含义的汉语拼音首字母拼接，每词首字母大写\r\n[M/A/D/C]：M-主文件、A...]',12,'2018-05-17 09:12:16',NULL,25,269,'蔡路','N'),('2018-05-20',237,12,6,'发文测试20180520',13,'2018-05-20 11:39:05','2018-05-20 11:51:57',8,44,'-','Y'),('2018-05-21',239,12,7,'发文测试1',14,'2018-05-21 13:34:30','2018-05-21 15:14:45',8,44,'-','Y'),('2018-05-21',240,20,4,'收文测试',10,'2018-05-21 15:19:20','2018-05-21 15:19:20',24,304,'-','Y'),('2018-05-21',242,12,8,'发文2018',14,'2018-05-21 15:38:58',NULL,8,42,'杨震','N'),('2018-05-21',244,13,2,'1',14,'2018-05-21 16:13:39','2018-05-21 18:44:46',9,51,'-','Y'),('2018-05-22',252,17,2,'[杨震]申请休假，事由：[请年假]',14,'2018-05-22 10:02:59','2018-05-22 10:03:04',12,69,'-','Y'),('2018-05-22',254,11,173,'中国信达召开2018年度工作会议暨表彰大会',14,'2018-05-22 10:08:05','2018-05-22 10:08:05',29,38,'-','Y'),('2018-05-22',255,11,174,'中国信达总裁陈孝周出席“国家所需 香港所长——共拓‘一带一路’策略机遇”论坛并作专题论坛演讲',14,'2018-05-22 10:08:06','2018-05-22 10:08:06',29,38,'-','Y'),('2018-05-22',256,11,175,'中国信达举行2018年在京退休老干部迎新春团拜会',14,'2018-05-22 10:08:06','2018-05-22 10:08:06',29,38,'-','Y'),('2018-05-22',257,11,176,'时不我待 只争朝夕 不断开创公司改革发展新局面',14,'2018-05-22 10:08:06','2018-05-22 10:08:06',29,38,'-','Y'),('2018-05-22',258,11,177,'中国信达总部机关举办“快乐工作，健康生活”元宵节活动',14,'2018-05-22 10:08:06','2018-05-22 10:08:06',29,38,'-','Y'),('2018-05-22',259,11,178,'光影记录大国实力   奋斗奏响时代乐章',14,'2018-05-22 10:10:06','2018-05-22 10:10:06',29,38,'-','Y'),('2018-05-22',260,11,179,'中国信达发布2017年度经营业绩',14,'2018-05-22 10:10:06','2018-05-22 10:10:06',29,38,'-','Y'),('2018-05-22',261,11,180,'十九载初心不渝，新征程锐意前行',14,'2018-05-22 10:10:06','2018-05-22 10:10:06',29,38,'-','Y'),('2018-05-22',262,11,181,'信达青年在“五四”前夕开展扶贫志愿活动',14,'2018-05-22 10:10:06','2018-05-22 10:10:06',29,38,'-','Y'),('2018-05-22',263,11,182,'中国信达开展2018年入党积极分子培训',14,'2018-05-22 10:10:06','2018-05-22 10:10:06',29,38,'-','Y'),('2018-05-22',264,14,7,'[杨震]申请借款，事由：到北京出差',14,'2018-05-22 10:28:00','2018-05-22 10:30:32',13,191,'-','Y'),('2018-05-22',265,15,5,'[杨震]提出还款，情况说明：还款',14,'2018-05-22 10:37:58','2018-05-22 10:39:36',23,300,'-','Y'),('2018-05-22',266,21,8,'杨震【OA系统】立项申请',14,'2018-05-22 10:45:35','2018-05-22 10:52:30',16,246,'-','Y'),('2018-05-22',267,22,5,'杨震【OA系统】尽职调查材料审批',14,'2018-05-22 10:54:34','2018-05-22 10:55:12',17,250,'-','Y'),('2018-05-22',268,23,6,'杨震【OA系统】项目审查审批',14,NULL,NULL,28,251,'杨震','N'),('2018-05-22',269,23,7,'杨震【OA系统】项目审查审批',14,'2018-05-22 11:33:06','2018-05-22 11:38:10',28,261,'-','Y'),('2018-05-22',270,25,18,'[杜斌]申请使用印章、证照，申请事由[测试附件属主可不强制看]',12,'2018-05-22 13:18:00',NULL,25,270,'鞠文利','N'),('2018-05-22',271,27,5,'OA系统建设项目',14,'2018-05-22 14:48:59','2018-05-22 14:52:40',27,309,'-','Y'),('2018-05-22',272,25,19,'[杨震]申请使用印章、证照，申请事由[合同用印]',14,NULL,NULL,25,268,'杨震','N'),('2018-05-22',273,25,20,'[杨震]申请使用印章、证照，申请事由[审核]',14,'2018-05-22 14:55:12','2018-05-22 15:01:04',25,274,'-','Y'),('2018-05-22',274,25,21,'[付春奇]申请使用印章、证照，申请事由[需要复印件]',10,'2018-05-22 15:03:28','2018-05-22 15:07:22',25,274,'-','Y'),('2018-05-22',279,13,3,'督办XXX事项',14,'2018-05-22 19:49:03',NULL,9,50,'杨震','N'),('2018-05-24',280,10,1,'督办事由2018-05-25测试',14,'2018-05-24 09:42:19','2018-05-26 21:49:51',30,322,'-','Y'),('2018-05-26',281,10,2,'带申请延期的督办2018-05-26',14,'2018-05-26 21:53:00','2018-05-27 01:30:40',30,322,'-','Y'),('2018-05-27',282,10,3,'测试督办催办2018-05-27',7,'2018-05-27 01:24:46','2018-05-31 18:59:14',30,322,'-','Y'),('2018-05-31',284,10,4,'督办事由20180602',7,'2018-05-31 19:30:02','2018-05-31 20:32:21',30,322,'-','Y'),('2018-05-31',285,10,5,'测试新增直接确认',14,'2018-05-31 21:55:18',NULL,30,321,'杨震','N'),('2018-06-04',289,9,1,'第一个非业务类合同20180606',13,'2018-06-04 10:15:15','2018-06-04 10:31:41',33,328,'-','Y'),('2018-06-04',290,9,2,'第二个非业务类合同20180606',13,'2018-06-04 10:57:27','2018-06-04 11:05:49',33,328,'-','Y'),('2018-06-08',292,12,9,'新流程测试20180608',13,'2018-06-08 17:00:37','2018-06-08 17:19:27',35,44,'-','Y'),('2018-06-12',293,16,3,'保理第一次业务研讨会20180612',14,'2018-06-12 17:07:15','2018-06-12 20:46:11',11,62,'-','Y'),('2018-06-12',294,16,4,'保理业务研讨二次会',14,'2018-06-12 21:55:39',NULL,11,61,'杜斌','N'),('2018-06-17',295,7,1,'交档标题20180617',14,'2018-06-17 19:31:24','2018-06-17 19:37:59',36,338,'-','Y'),('2018-06-18',296,8,1,'借阅标题20180618',14,'2018-06-18 02:10:10','2018-06-18 02:22:55',37,345,'-','Y'),('2018-06-25',301,28,6,'立思震科技参股项目合同之一',12,'2018-06-25 16:22:39','2018-06-26 02:06:52',38,352,'-','Y'),('2018-06-25',302,9,3,'非业务类合同20180627',13,'2018-06-25 22:04:18','2018-06-25 22:14:14',33,328,'-','Y'),('2018-06-25',304,25,23,'[刘佳妮]申请使用印章、证照，申请事由[非业务合同20180627用印\r\n1、\r\n2、]',13,'2018-06-25 23:34:19','2018-06-26 00:15:43',25,274,'-','Y'),('2018-06-26',305,27,6,'汇丰入股合同20180627',12,'2018-06-26 01:15:12','2018-06-26 01:40:58',27,309,'-','Y'),('2018-06-26',307,25,25,'[杜斌]申请使用印章、证照，申请事由[汇丰入股合同20180627\r\n合同用印]',12,'2018-06-26 01:45:33','2018-06-26 01:54:23',25,274,'-','Y'),('2018-06-26',309,25,27,'[杜斌]申请使用印章、证照，申请事由[业务合同审查通过后用印]',12,'2018-08-19 02:53:23',NULL,25,275,'付春奇','N'),('2018-06-26',310,25,28,'[刘佳妮]申请使用印章、证照，申请事由[测试手动用印申请：\r\n1、\r\n2、]',13,'2018-06-26 02:10:39','2018-06-26 02:14:52',25,274,'-','Y'),('2018-06-26',311,9,4,'待办短信接口测试20180628-1',13,'2018-06-26 09:58:44',NULL,33,325,'孙瑞峰','N'),('2018-07-12',316,6,1,'关于保理业务上支撑系统请大家畅所欲言',2,'2018-07-13 09:38:46','2018-07-16 00:46:30',39,355,'-','Y'),('2018-07-16',317,6,2,'长生生物狂犬病疫苗被停产',5,'2018-07-16 00:53:49',NULL,39,354,'杨震','N'),('2018-07-26',318,18,23,'[段海军]报销差旅费用-[23]',15,'2018-07-27 21:10:45',NULL,32,227,'段海军','N'),('2018-07-27',319,14,8,'[段海军]申请借款，事由：备用金借款',15,'2018-07-27 14:35:02','2018-07-27 14:37:32',13,191,'-','N'),('2018-07-27',321,18,25,'[段海军]报销日常费用-[25]',15,'2018-07-27 21:08:07',NULL,32,227,'段海军','N'),('2018-07-30',322,18,26,'[段海军]报销日常费用-[26]',15,'2018-07-30 13:20:00',NULL,32,227,'段海军','N'),('2018-07-31',323,18,27,'[段海军]报销日常费用-[27]',15,'2018-07-31 05:19:14',NULL,32,227,'段海军','N'),('2018-08-01',324,19,6,'付春奇申请预付款，事由：预付深圳雷特世纪档案柜50%合同款',10,'2018-08-01 23:54:08','2018-08-01 23:56:37',22,296,'-','Y'),('2018-08-02',325,18,28,'[付春奇]报销日常费用-[28]',10,'2018-08-02 00:37:09','2018-08-02 00:39:58',32,228,'-','Y'),('2018-08-02',326,18,29,'[付春奇]报销日常费用-[29]',10,'2018-08-02 00:46:14','2018-08-02 00:49:25',32,228,'-','Y'),('2018-08-02',327,14,9,'[付春奇]申请借款，事由：借款测试20180802',10,'2018-08-02 00:52:49','2018-08-02 00:54:50',13,191,'-','N'),('2018-08-02',328,18,30,'[付春奇]报销日常费用-[30]',10,'2018-08-02 00:58:50','2018-08-02 01:11:19',32,228,'-','Y'),('2018-08-06',331,13,4,'保理签报事项20180806',14,'2018-08-06 14:37:36','2018-08-06 14:43:31',41,51,'-','Y'),('2018-08-07',332,18,31,'[段海军]报销日常费用-[31]',15,NULL,NULL,32,224,'段海军','N'),('2018-08-11',335,19,7,'杨震申请预付款，事由：预付款修改2018-08-13',14,'2018-08-11 04:46:40','2018-08-11 05:03:42',22,296,'-','Y'),('2018-08-11',336,4,1,'采购申请20180813-01',14,'2018-08-15 07:23:27','2018-08-15 13:24:38',42,369,'-','Y'),('2018-08-11',337,18,32,'[朱佳佳]报销差旅费用-[32]',16,'2018-08-11 13:18:28',NULL,32,227,'朱佳佳','N'),('2018-08-18',339,25,29,'[杜斌]申请使用印章、证照，申请事由[增加具体印章证照选择20180818]',12,'2018-08-19 02:49:48','2018-10-07 03:41:24',43,274,'-','Y'),('2018-08-19',340,25,30,'[杨震]申请使用印章、证照，申请事由[测试他人占用发放无效]',14,'2018-08-19 03:15:16',NULL,43,370,'付春奇','N'),('2018-08-21',341,12,10,'公司任命20180821',13,'2018-08-21 02:00:38','2018-08-21 02:19:27',44,44,'-','Y'),('2018-08-21',344,26,16,'杜斌申请【贵州习酒收购】立项项目付款',12,'2018-08-21 17:16:04','2018-08-21 18:14:39',21,286,'-','Y'),('2018-08-21',345,26,17,'杜斌申请【汇丰入股合同20180627】立项项目合同付款',12,'2018-08-21 18:19:15','2018-08-21 18:23:30',21,286,'-','Y'),('2018-08-21',346,26,18,'杨震申请【OA系统建设项目】立项项目合同付款',14,'2018-08-21 18:32:35','2018-08-21 18:45:08',21,286,'-','Y'),('2018-08-21',347,26,19,'杜斌申请【立思震科技参股项目】临时项目付款',12,'2018-08-21 19:18:05','2018-08-21 19:22:43',21,286,'-','Y'),('2018-08-21',348,26,20,'杜斌申请【立思震科技参股项目合同之一】临时项目合同付款',12,'2018-08-21 19:30:30','2018-08-21 19:34:32',21,286,'-','Y'),('2018-08-21',349,26,21,'杜斌申请付款，事由：e-无项目依据付款测试1、2、',12,'2018-08-21 19:39:16','2018-08-21 19:43:50',21,286,'-','Y'),('2018-08-23',350,19,8,'杜斌申请预付款，事由：测试金额转大写',12,'2018-08-23 08:25:30',NULL,22,294,'杜斌','N'),('2018-08-23',351,4,2,'采购申请-金额小写转大写',12,'2018-08-23 10:27:40',NULL,42,368,'杜斌','N'),('2018-08-23',352,26,22,'杜斌申请【立思震科技参股项目】临时项目付款',12,'2018-08-23 10:34:37',NULL,21,284,'祝慧静','N'),('2018-08-23',353,18,33,'[杜斌]报销日常费用-[33]',12,'2018-08-23 10:43:50',NULL,31,227,'杜斌','N'),('2018-08-23',354,15,6,'[杜斌]提出还款，情况说明：金额小写转大写',12,'2018-08-23 10:55:24',NULL,23,298,'祝慧静','N'),('2018-08-23',355,28,7,'测试合同加水印',12,'2018-08-23 14:54:49',NULL,38,351,'杜斌','N'),('2018-08-31',356,12,11,'测试4版本控件2018-08-31',13,'2018-08-31 22:46:10',NULL,35,43,'付春奇','N'),('2018-08-31',357,10,6,'库左旗扶贫方案制定',2,'2018-08-31 23:29:38',NULL,30,321,'哈斯','N'),('2018-09-03',358,27,7,'贵州习酒股份有限公司合同水印盖章测试20180903',12,'2018-09-03 16:20:48',NULL,27,313,'杜斌','N'),('2018-09-07',360,25,31,'[刘佳妮]申请使用印章、证照，申请事由[测试附件容量]',13,NULL,NULL,43,268,'刘佳妮','N'),('2018-09-07',363,5,10,'公司[2018年7月]工资发放审核',16,'2018-09-07 18:08:34','2018-09-07 18:09:04',40,359,'-','Y'),('2018-09-07',364,5,11,'公司[2018年8月]工资发放审核',16,'2018-09-07 18:08:49','2018-09-07 18:09:11',40,359,'-','Y'),('2018-09-07',365,18,34,'[段海军]报销日常费用-[34]',15,'2018-09-07 20:14:47',NULL,32,227,'段海军','N'),('2018-09-07',366,18,35,'[段海军]报销日常费用-[35]',15,'2018-09-12 10:54:18',NULL,32,227,'段海军','N'),('2018-09-12',367,18,36,'[祁雅斌]报销日常费用-[36]',17,'2018-09-12 10:57:21',NULL,32,231,'鞠文利','N'),('2018-09-28',368,18,37,'[刘佳妮]报销日常费用-[37]',13,'2018-10-03 11:38:21',NULL,31,227,'刘佳妮','N'),('2018-10-03',369,18,38,'[杨震]报销差旅费用-[38]',14,'2018-11-21 21:19:42',NULL,31,227,'杨震','N'),('2018-10-06',370,18,39,'[杜斌]报销日常费用-[39]',12,'2018-10-06 17:29:21',NULL,31,227,'杜斌','N'),('2018-10-06',371,21,9,'杜斌【科电入股】立项申请',12,'2018-10-06 16:50:51','2018-10-07 01:31:10',16,246,'-','Y'),('2018-10-07',372,22,6,'杜斌【科电入股】尽职调查材料审批',12,'2018-10-07 01:39:24','2018-10-07 01:39:54',17,250,'-','Y'),('2018-10-07',373,23,8,'杜斌【科电入股】项目审查审批',12,'2018-10-07 02:41:18','2018-10-07 02:50:01',28,261,'-','Y'),('2018-10-07',374,24,5,'杨震【科电入股】实施方案审批',14,'2018-10-07 03:01:34','2018-10-07 03:03:25',19,267,'-','Y'),('2018-10-07',375,27,8,'科电入股1期',12,'2018-10-07 03:16:37','2018-10-07 20:14:14',27,309,'-','Y'),('2018-10-07',377,26,23,'杜斌申请【科电入股】立项项目付款',12,'2018-10-07 03:49:35','2018-10-07 03:58:58',21,286,'-','Y'),('2018-10-07',379,25,34,'[杜斌]申请使用印章、证照，申请事由[合同用印2次]',12,'2018-10-07 20:46:42','2018-10-07 20:51:51',43,274,'-','Y'),('2018-10-17',381,4,3,'工服采购',13,'2018-10-17 01:16:40',NULL,42,368,'刘佳妮','N'),('2018-10-31',382,18,40,'[杨震]报销日常费用-[40]',14,'2018-10-31 14:39:34',NULL,31,229,'项鑫','N'),('2018-11-02',383,7,2,'交接内蒙饭店资料',12,'2018-11-02 16:37:25',NULL,36,337,'付春奇','N'),('2018-11-03',384,17,3,'[刘佳妮]申请休假，事由：[结婚补婚假]',13,'2018-11-03 01:39:04','2018-11-21 00:13:14',12,69,'-','Y'),('2018-11-03',385,7,3,'交接蒙草资料',12,'2018-11-03 09:55:51',NULL,36,337,'付春奇','N'),('2018-11-03',386,7,4,'测试afterhandle',12,'2018-11-03 23:45:59',NULL,36,337,'付春奇','N'),('2018-11-04',387,20,5,'为手机准备的用例',13,'2018-11-04 00:30:07',NULL,24,303,'哈斯、鞠文利','N'),('2018-11-09',388,8,2,'档案借阅移动测试',12,'2018-11-09 00:24:23','2018-11-09 01:51:47',37,345,'-','Y'),('2018-11-09',389,7,5,'测试全文索引20181110',12,'2018-11-09 12:35:13','2018-11-10 10:24:54',36,338,'-','Y'),('2018-11-10',390,10,7,'督查督办移动测试20181113',7,'2018-11-10 15:54:55',NULL,30,321,'张宇','N'),('2018-11-10',391,7,6,'测试常用语',12,'2018-11-10 22:49:02',NULL,36,337,'付春奇','N'),('2018-11-11',392,8,3,'档案借阅测试处理常用语',14,'2018-11-11 01:06:03',NULL,37,342,'付春奇','N'),('2018-11-20',393,10,8,'督办事由20181120',2,'2018-11-20 13:36:32',NULL,30,318,'孙瑞峰','N'),('2018-11-20',394,7,7,'测试处理页转流程选人页、无需选人、可调时限',12,'2018-11-20 22:55:01','2018-11-20 23:40:12',36,338,'-','Y'),('2018-11-21',395,4,4,'采购申请20181121',12,'2018-11-21 03:50:40',NULL,42,363,'蔡路','N'),('2018-11-21',396,19,9,'杜斌申请预付款，事由：预付款审批20181121',12,'2018-11-21 05:23:46',NULL,22,294,'杜斌','N'),('2018-11-21',397,17,4,'[杜斌]申请休假，事由：[私事]',12,'2018-11-21 07:56:45',NULL,12,66,'祝慧静','N'),('2018-11-21',398,14,10,'[杜斌]申请借款，事由：借款移动测试20181123',12,'2018-11-21 19:50:42','2018-11-21 20:02:56',13,191,'-','N'),('2018-11-21',399,14,11,'[段海军]申请借款，事由：借款流程分支条件测试',15,'2018-11-21 22:16:06',NULL,13,194,'张宇','N'),('2018-11-21',400,9,5,'非业务类合同移动测试20181123',14,'2018-11-21 22:39:45','2018-11-22 11:23:39',33,328,'-','Y'),('2018-11-22',401,25,35,'[杨震]申请使用印章、证照，申请事由[非业务合同用印]',14,NULL,NULL,43,268,'杨震','N'),('2018-11-22',402,5,12,'公司[2018年10月]工资发放审核',16,'2018-11-22 12:15:45','2018-11-22 12:20:45',40,359,'-','Y'),('2018-11-25',403,21,10,'杜斌【立项移动测试20181125】立项申请',12,'2018-11-25 15:41:57','2018-11-25 16:03:59',16,246,'-','Y'),('2018-11-25',404,22,7,'杜斌【立项移动测试20181125】尽职调查材料审批',12,'2018-11-25 16:23:57','2018-11-25 19:21:55',17,250,'-','Y'),('2018-11-25',405,23,9,'杜斌【立项移动测试20181125】项目审查审批',12,'2018-11-25 19:28:07','2018-11-26 11:11:34',28,261,'-','Y'),('2018-11-26',406,24,6,'杨震【立项移动测试20181125】实施方案审批',14,'2018-11-26 11:15:10','2018-11-26 13:20:04',19,267,'-','Y'),('2018-11-26',407,27,9,'呼和浩特大会宾餐饮有限公司收购1期款',12,'2018-11-26 14:41:39','2018-11-26 14:48:28',27,309,'-','Y'),('2018-11-26',408,25,36,'[杜斌]申请使用印章、证照，申请事由[合同用印]',12,'2018-11-27 15:31:41','2018-11-27 16:21:07',43,274,'-','Y'),('2018-11-26',409,28,8,'庆源办公室装饰瓷器采购合同',12,'2018-11-26 16:15:52','2018-11-26 16:25:14',38,352,'-','Y'),('2018-11-27',411,7,8,'测试意见附件',14,'2018-11-27 10:18:54',NULL,36,335,'付春奇','N'),('2018-11-27',412,26,24,'杜斌申请【立项移动测试20181125】立项项目付款',12,'2018-11-27 16:55:44','2018-11-27 17:03:22',21,286,'-','Y'),('2018-12-12',413,18,41,'[刘佳妮]报销日常费用-[41]',13,'2018-12-12 22:01:55','2018-12-12 22:08:44',31,228,'-','Y'),('2018-12-12',414,18,42,'[刘佳妮]报销日常费用-[42]',13,NULL,NULL,31,224,'刘佳妮','N'),('2019-01-11',415,11,189,'测试图片展示jsp替换为servlet',14,'2019-01-11 04:58:09',NULL,34,35,'杨震','N'),('2019-03-04',416,28,9,'北京雷特世纪网络科技有限公司收购合同',12,'2019-03-04 07:45:40','2019-03-27 15:09:05',38,352,'-','Y'),('2019-03-06',418,9,6,'非业务类合同测试20190308',16,'2019-03-06 18:47:46','2019-03-06 19:53:36',45,328,'-','Y'),('2019-03-06',421,25,41,'[朱佳佳]申请使用印章、证照，申请事由[非业务合同用印]',16,'2019-03-27 15:03:50','2019-03-27 15:05:54',43,274,'-','Y'),('2019-03-21',422,21,11,'杜斌【内蒙古饭店收购】立项申请',12,'2019-03-21 17:24:45','2019-03-22 10:27:54',46,246,'-','Y'),('2019-03-22',423,22,8,'杜斌【内蒙古饭店收购】尽职调查材料审批',12,'2019-03-22 10:58:07','2019-03-22 11:23:00',17,250,'-','Y'),('2019-03-22',424,23,10,'杜斌【内蒙古饭店收购】项目审查审批',12,'2019-03-22 14:36:28','2019-03-23 21:23:03',47,261,'-','Y'),('2019-03-22',425,22,9,'杜斌【雷特世纪收购】尽职调查材料审批',12,'2019-03-22 14:31:23','2019-03-22 14:32:25',17,250,'-','Y'),('2019-03-25',426,24,8,'【内蒙古饭店收购】项目审批',14,'2019-03-25 14:05:52','2019-03-25 17:08:28',48,267,'-','Y'),('2019-03-26',427,27,10,'内蒙饭店收购合同-1',12,'2019-03-26 11:52:24','2019-03-26 13:19:32',49,309,'-','Y'),('2019-03-26',430,26,25,'杜斌申请【内蒙饭店收购合同-1】立项项目合同付款',12,'2019-03-26 14:54:23','2019-03-27 11:55:55',50,286,'-','Y'),('2019-03-27',433,21,14,'杜斌【北京同天科技有限公司收购】立项申请',12,'2019-03-27 10:21:54','2019-03-27 10:32:42',46,246,'-','Y'),('2019-03-27',434,22,10,'杜斌【北京同天科技有限公司收购】尽职调查材料审批',12,'2019-03-27 10:37:11','2019-03-27 10:39:23',17,250,'-','Y'),('2019-03-27',435,23,11,'杜斌【北京同天科技有限公司收购】项目审查审批',12,'2019-03-27 10:44:55','2019-03-27 12:32:42',47,261,'-','Y'),('2019-03-27',436,24,9,'【北京同天科技有限公司收购】项目审批',14,'2019-03-27 12:36:15','2019-03-27 12:52:11',48,267,'-','Y'),('2019-03-27',437,27,11,'北京同天科技收购合同-1',12,'2019-03-27 12:57:37','2019-03-27 13:34:43',49,309,'-','Y'),('2019-03-27',438,25,44,'[杜斌]申请使用印章、证照，申请事由[北京同天科技收购合同-1合同用印]',12,'2019-03-27 13:38:54','2019-03-27 14:59:35',43,274,'-','Y'),('2019-03-27',439,25,45,'[杜斌]申请使用印章、证照，申请事由[业务合同审查通过后用印]',12,'2019-03-27 15:10:05','2019-03-27 15:24:43',43,274,'-','Y'),('2019-03-27',440,9,7,'打印机设置无边距测试',16,'2019-03-27 15:29:30','2019-03-27 15:33:29',45,328,'-','Y'),('2019-03-27',441,25,46,'[朱佳佳]申请使用印章、证照，申请事由[非业务合同用印]',16,NULL,NULL,43,268,'朱佳佳','N'),('2019-04-02',442,9,8,'非业务类合同20190404',13,'2019-04-02 06:08:58','2019-04-02 08:28:45',45,328,'-','Y'),('2019-04-09',443,9,9,'xxx非业务合同审批20190409',13,'2019-04-09 10:00:54','2019-04-09 10:19:19',45,328,'-','Y'),('2019-04-09',446,21,15,'杜斌【踏歌行公司收购】立项申请',12,'2019-04-09 10:36:59','2019-04-09 10:43:01',46,246,'-','Y'),('2019-04-09',447,22,11,'杜斌【踏歌行公司收购】尽职调查材料审批',12,'2019-04-09 10:46:36','2019-04-09 10:47:36',17,250,'-','Y'),('2019-04-09',448,23,12,'杜斌【踏歌行公司收购】项目审查审批',12,'2019-04-09 10:49:21','2019-04-09 10:59:35',47,261,'-','Y'),('2019-04-09',449,24,10,'【踏歌行公司收购】项目审批',14,'2019-04-09 11:03:20','2019-04-09 11:06:55',48,267,'-','Y'),('2019-04-09',450,27,12,'踏歌行业务合同20190409',12,'2019-04-09 11:10:43','2019-04-09 11:32:00',49,309,'-','Y'),('2019-04-09',452,25,50,'[杜斌]申请使用印章、证照，申请事由[合同用印：踏歌行]',12,'2019-04-09 11:33:48','2019-04-09 11:35:24',43,274,'-','Y'),('2019-04-09',453,26,26,'杜斌申请【踏歌行业务合同20190409】立项项目合同付款',12,'2019-04-09 11:40:12','2019-04-09 11:42:22',50,286,'-','Y'),('2019-04-14',454,14,12,'[朱佳佳]申请借款，事由：测试20190415',16,'2019-04-14 07:36:06','2019-04-14 08:03:00',13,191,'-','N'),('2019-04-14',455,14,13,'[朱佳佳]申请借款，事由：测试20190415-2',16,NULL,NULL,13,187,'朱佳佳','N'),('2019-04-17',456,13,6,'签报事项20190417-1',12,'2019-04-17 16:13:38','2019-04-17 16:19:16',52,51,'-','Y'),('2019-04-17',457,13,7,'签报事项20190417-2',12,'2019-04-17 16:25:33','2019-04-18 13:08:55',52,51,'-','Y'),('2019-04-18',458,13,8,'签报事项20190418Debug-1',12,'2019-04-18 10:51:07','2019-04-18 13:09:16',41,51,'-','Y'),('2019-04-18',462,9,12,'我方自拟非业务类合同20190418-1',12,'2019-04-18 15:43:00','2019-04-18 16:12:00',51,328,'-','Y'),('2019-04-18',463,9,13,'对方提供非业务合同20190418-2',12,'2019-04-18 15:46:49','2019-04-18 16:12:18',51,328,'-','Y'),('2019-04-18',464,25,52,'[杜斌]申请使用印章、证照，申请事由[非业务合同用印（我方自拟）]',12,NULL,NULL,43,268,'杜斌','N'),('2019-04-18',465,25,53,'[杜斌]申请使用印章、证照，申请事由[非业务合同用印（对方提供合同）]',12,NULL,NULL,43,268,'杜斌','N'),('2019-04-19',466,28,10,'北京雷特世纪网络科技有限公司收购20190419（我方提供合同）',12,'2019-04-19 11:42:21','2019-04-19 11:57:46',53,352,'-','Y'),('2019-04-19',467,25,54,'[杜斌]申请使用印章、证照，申请事由[业务合同审查后用印]',12,NULL,NULL,43,268,'杜斌','N'),('2019-04-19',468,28,11,'办公室装饰瓷器采购20190419（对方提供合同）',12,'2019-04-19 13:48:39','2019-04-19 13:53:51',53,352,'-','Y'),('2019-04-19',469,25,55,'[杜斌]申请使用印章、证照，申请事由[业务合同审查后用印]',12,NULL,NULL,43,268,'杜斌','N'),('2019-04-19',470,27,13,'审批合同20190419（我方出合同）',12,'2019-04-19 16:06:59','2019-04-19 16:18:03',54,309,'-','Y'),('2019-04-19',471,25,56,'[杜斌]申请使用印章、证照，申请事由[合同用印]',12,NULL,NULL,43,268,'杜斌','N'),('2019-04-19',472,27,14,'审批合同20190419（对方出合同）',12,'2019-04-19 16:27:23','2019-04-19 16:36:35',54,309,'-','Y'),('2019-04-19',473,25,57,'[杜斌]申请使用印章、证照，申请事由[合同用印]',12,NULL,NULL,43,268,'杜斌','N');
/*!40000 ALTER TABLE `Pf_A_Biz` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_A_Biz_13` BEFORE UPDATE ON `Pf_A_Biz` FOR EACH ROW
label1:
BEGIN
    declare vOldTzSys1,vNewTzSys1 char(1);
    
	if old.FlowStatus=new.FlowStatus then
    	leave label1;
    end if;
    
    set vOldTzSys1=Pf_BizNodeSysBitByPt(old.FlowStatus,1);
    set vNewTzSys1=Pf_BizNodeSysBitByPt(new.FlowStatus,1);
    
    
	if vOldTzSys1='S' and old.SubmitTs is null then
		set new.SubmitTs=now();
    end if;
    
	if vNewTzSys1='E' then
    	set new.FlowOverTs=now();
    end if;

	if vOldTzSys1='E' then
    	set new.FlowOverTs=null;
        set new.IfToBeArchived='N';
	end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_A_Biz_23` AFTER UPDATE ON `Pf_A_Biz` FOR EACH ROW
label1:
BEGIN
 	declare vOldTzSys1 char(1);
 	
 	if old.FlowStatus=new.FlowStatus then
 		leave label1;
 	end if;
 	
 	set vOldTzSys1=Pf_BizNodeSysBitByPt(old.FlowStatus,1);
 	
 	if vOldTzSys1='E' then
 		#从流程结束撤回
 		delete from Pf_D_FullIndexCmdList where BizAppName=Pf_BizName(old.BizCode) and BizAppID=old.BizID;
 		delete from Pf_D_IndexContentOfMainText where BizAppName=Pf_BizName(old.BizCode) and BizAppID=old.BizID;
 		delete from Pf_D_IndexContentOfAttach where BizAppName=Pf_BizName(old.BizCode) and BizAppID=old.BizID;
 	end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_A_Biz_12` BEFORE DELETE ON `Pf_A_Biz`
  FOR EACH ROW
BEGIN
    Update Pf_A_AttachInfo Set Deltag='Y' 
    Where PrimaryName = 'Pf_A_BizProcRcd' and 
    	exists(select 1 from Pf_A_BizProcRcd where WorkItem=Pf_A_AttachInfo.PrimaryID and BizSeq=old.Seq);
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_A_Biz_22` AFTER DELETE ON `Pf_A_Biz` FOR EACH ROW
BEGIN
	delete from Pf_D_FullIndexCmdList where BizAppName=Pf_BizName(old.BizCode) and BizAppID=old.BizID;
	delete from Pf_D_IndexContentOfMainText where BizAppName=Pf_BizName(old.BizCode) and BizAppID=old.BizID;
	delete from Pf_D_IndexContentOfAttach where BizAppName=Pf_BizName(old.BizCode) and BizAppID=old.BizID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Pf_A_BizDelMemo`
--

DROP TABLE IF EXISTS `Pf_A_BizDelMemo`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_A_BizDelMemo` (
  `RecDivTag` date NOT NULL,
  `Seq` int(6) unsigned NOT NULL AUTO_INCREMENT,
  `DelBizFuncID` smallint(4) unsigned NOT NULL,
  `DelBizID` int(11) unsigned NOT NULL,
  `BizTitle` varchar(100) NOT NULL,
  `DelReason` varchar(100) NOT NULL,
  `ByAdminUsrID` smallint(5) unsigned NOT NULL,
  `DelDate` date NOT NULL,
  PRIMARY KEY (`Seq`),
  KEY `DelBizFuncID` (`DelBizFuncID`),
  KEY `ByAdminUsrID` (`ByAdminUsrID`),
  CONSTRAINT `pf_a_bizdelmemo_fk1` FOREIGN KEY (`DelBizFuncID`) REFERENCES `Pf_M_Func` (`ID`),
  CONSTRAINT `pf_a_bizdelmemo_fk2` FOREIGN KEY (`ByAdminUsrID`) REFERENCES `Pf_M_Usr` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=16 DEFAULT CHARSET=utf8 PACK_KEYS=0 ROW_FORMAT=COMPACT;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_A_BizDelMemo`
--

LOCK TABLES `Pf_A_BizDelMemo` WRITE;
/*!40000 ALTER TABLE `Pf_A_BizDelMemo` DISABLE KEYS */;
INSERT INTO `Pf_A_BizDelMemo` VALUES ('2018-01-26',1,23,1,'关于绩效考核工作注意事项','管理',14,'2018-01-26'),('2018-04-11',2,59,1,'2018金融税制改革监管单位下文','更新',14,'2018-04-12'),('2018-04-01',3,50,6,'杜斌【贵州习酒收购】立项申请','管理',14,'2018-04-30'),('2018-05-16',4,22,86,'爬虫爬出信息标题20180516_180537','啊',14,'2018-05-16'),('2018-05-22',5,29,3,'[杨震]申请休假，事由：[请病假]','取消休假',14,'2018-05-22'),('2018-05-22',6,49,13,'[杨震]报销日常费用-[13]','啊啊啊',14,'2018-06-02'),('2018-05-22',7,49,14,'[杨震]报销差旅费用-[14]','啊啊',14,'2018-06-02'),('2018-05-31',8,49,15,'[杨震]报销差旅费用-[15]','啊啊',14,'2018-06-02'),('2018-10-08',9,22,188,'传杜兆才将成足协主席 主席如何产生尚未有官方说法','啊啊',14,'2019-01-11'),('2018-07-10',10,22,187,'测试屏蔽flashs按钮','啊啊',14,'2019-01-11'),('2018-07-09',11,22,186,'测试信息体内嵌图片、动画','啊啊',14,'2019-01-11'),('2018-07-09',12,22,184,'ckeditor表情','啊啊啊',14,'2019-01-11'),('2018-06-04',13,22,183,'测试新流程20180607','啊啊啊',14,'2019-01-11'),('2019-04-18',14,64,11,'非业务类合同20190418-2','废弃测试',14,'2019-04-18'),('2019-04-18',15,64,10,'非业务合同测试20190418-1','废弃测试',14,'2019-04-18');
/*!40000 ALTER TABLE `Pf_A_BizDelMemo` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_A_BizDelMemo_22` AFTER DELETE ON `Pf_A_BizDelMemo` FOR EACH ROW
BEGIN
	Update Pf_A_AttachInfo Set DelTag='Y' Where PrimaryName = 'Pf_A_BizDelMemo' and PrimaryID=old.Seq;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Pf_A_BizProcRcd`
--

DROP TABLE IF EXISTS `Pf_A_BizProcRcd`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_A_BizProcRcd` (
  `RecDivTag` date NOT NULL,
  `WorkItem` int(12) unsigned NOT NULL AUTO_INCREMENT,
  `BizSeq` int(11) unsigned NOT NULL,
  `ProcessedBy` smallint(5) unsigned NOT NULL,
  `ProcessorDeptName` varchar(100) NOT NULL DEFAULT '-',
  `pGrantedBy` smallint(5) unsigned NOT NULL DEFAULT '0',
  `ArrivedTs` datetime NOT NULL,
  `CurrNode` smallint(4) NOT NULL,
  `ProcNote` varchar(1000) DEFAULT NULL,
  `ActionID` smallint(5) unsigned DEFAULT NULL,
  `SubmitTs` datetime DEFAULT NULL,
  `CreatedBy` smallint(5) NOT NULL DEFAULT '0',
  `cGrantedBy` smallint(5) unsigned NOT NULL DEFAULT '0',
  `ProcTimeLimit` tinyint(3) unsigned NOT NULL DEFAULT '0',
  `SrcWorkItems` varchar(200) NOT NULL DEFAULT '0',
  PRIMARY KEY (`WorkItem`),
  UNIQUE KEY `Pf_A_BizProcRcd_UK1` (`BizSeq`,`ProcessedBy`,`pGrantedBy`,`ArrivedTs`),
  KEY `ProcessedBy` (`ProcessedBy`),
  KEY `CurrNode` (`CurrNode`),
  KEY `ActionID` (`ActionID`),
  KEY `BizSeq` (`BizSeq`),
  CONSTRAINT `Pf_A_BizProcRcd_FK1` FOREIGN KEY (`ProcessedBy`) REFERENCES `Pf_M_Usr` (`ID`),
  CONSTRAINT `Pf_A_BizProcRcd_FK2` FOREIGN KEY (`CurrNode`) REFERENCES `Pf_M_BizNode` (`ID`),
  CONSTRAINT `Pf_A_BizProcRcd_FK3` FOREIGN KEY (`ActionID`) REFERENCES `Pf_M_BizFlowBranch` (`ID`),
  CONSTRAINT `Pf_A_BizProcRcd_fk4` FOREIGN KEY (`BizSeq`) REFERENCES `Pf_A_Biz` (`Seq`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=2145 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_A_BizProcRcd`
--

LOCK TABLES `Pf_A_BizProcRcd` WRITE;
/*!40000 ALTER TABLE `Pf_A_BizProcRcd` DISABLE KEYS */;
INSERT INTO `Pf_A_BizProcRcd` VALUES ('2018-01-26',5,2,14,'数据信息部',0,'2018-01-26 18:37:28',39,NULL,60,'2018-01-26 18:40:00',0,0,0,'0'),('2018-01-26',7,2,14,'数据信息部',0,'2018-01-26 18:40:00',40,NULL,191,'2018-01-26 18:40:05',14,0,0,'5'),('2018-01-26',8,2,2,'董事长总经理',0,'2018-01-26 18:40:05',124,NULL,63,'2018-01-26 18:43:34',14,0,0,'7'),('2018-01-26',9,2,14,'数据信息部',0,'2018-01-26 18:43:34',42,NULL,66,'2018-01-26 18:51:58',2,0,0,'8'),('2018-01-26',10,2,10,'运营管理部',0,'2018-01-26 18:51:58',43,NULL,67,'2018-01-26 19:03:02',14,0,0,'9'),('2018-01-31',52,10,14,'数据信息部',0,'2018-01-31 14:07:39',39,NULL,60,'2018-01-31 14:09:59',0,0,0,'0'),('2018-01-31',53,10,14,'数据信息部',0,'2018-01-31 14:09:59',40,NULL,191,'2018-01-31 14:10:05',14,0,0,'52'),('2018-01-31',54,10,2,'董事长总经理',0,'2018-01-31 14:10:05',124,'同意',63,'2018-01-31 14:11:38',14,0,0,'53'),('2018-01-31',55,10,14,'数据信息部',0,'2018-01-31 14:11:38',42,NULL,66,'2018-01-31 14:14:20',2,0,0,'54'),('2018-01-31',56,10,10,'运营管理部',0,'2018-01-31 14:14:20',43,NULL,67,'2018-01-31 14:18:54',14,0,0,'55'),('2018-02-04',96,17,14,'数据信息部',0,'2018-02-04 12:48:07',45,NULL,68,'2018-02-04 12:50:27',0,0,0,'0'),('2018-02-04',97,17,14,'数据信息部',0,'2018-02-04 12:50:27',46,NULL,70,'2018-02-04 12:50:56',14,0,0,'96'),('2018-02-04',98,17,3,'副总经理',0,'2018-02-04 12:50:56',47,'同意',73,'2018-02-04 12:52:50',14,0,0,'97'),('2018-02-04',99,17,10,'运营管理部',0,'2018-02-04 12:50:56',47,NULL,73,'2018-02-04 12:53:35',14,0,0,'97'),('2018-02-04',100,17,14,'数据信息部',0,'2018-02-04 12:53:35',46,NULL,71,'2018-02-04 12:58:03',14,0,0,'96'),('2018-02-04',101,17,14,'数据信息部',0,'2018-02-04 12:58:03',48,NULL,74,'2018-02-04 12:59:26',14,0,0,'100'),('2018-02-04',102,17,11,'运营管理部',0,'2018-02-04 12:59:26',49,'我的部分搞定了',75,'2018-02-04 13:11:09',14,0,0,'101'),('2018-02-04',103,17,12,'业务部',0,'2018-02-04 12:59:26',49,'领导绝对满意',75,'2018-02-04 13:12:00',14,0,0,'101'),('2018-02-04',104,17,14,'数据信息部',0,'2018-02-04 13:12:00',50,NULL,76,'2018-02-04 13:13:27',-2,0,0,'102,103'),('2018-02-04',111,19,14,'数据信息部',0,'2018-02-04 16:04:17',63,NULL,93,'2018-02-04 17:31:00',0,0,0,'0'),('2018-02-04',113,19,14,'数据信息部',0,'2018-02-04 17:31:00',64,NULL,385,'2018-02-04 17:31:54',14,0,0,'111'),('2018-02-04',114,19,11,'运营管理部',0,'2018-02-04 17:31:54',66,NULL,103,'2018-02-04 17:32:32',14,0,0,'113'),('2018-02-04',115,19,14,'数据信息部',0,'2018-02-04 17:32:32',67,NULL,104,'2018-05-22 10:00:49',11,0,0,'114'),('2018-02-21',120,21,12,'业务部',0,'2018-02-21 15:43:59',237,NULL,452,'2018-02-21 15:51:49',0,0,0,'0'),('2018-02-21',121,21,12,'业务部',0,'2018-02-21 15:51:49',238,'自己先同意',453,'2018-02-21 15:52:14',12,0,0,'120'),('2018-02-21',122,21,4,'副总经理',0,'2018-02-21 15:52:14',239,'同意',455,'2018-02-21 16:05:38',12,0,0,'121'),('2018-02-21',123,21,5,'副总经理',0,'2018-02-21 16:05:38',240,'同意',457,'2018-02-22 15:41:55',4,0,0,'122'),('2018-02-21',124,21,6,'副总经理',0,'2018-02-22 15:41:55',241,'同意',459,'2018-02-22 15:42:44',5,0,0,'123'),('2018-02-21',125,21,9,'会计核算部',0,'2018-02-22 15:42:44',242,'利润高',461,'2018-02-22 15:43:36',6,0,0,'124'),('2018-02-21',126,21,2,'董事长总经理',0,'2018-02-22 15:43:36',243,'同意',463,'2018-02-22 15:44:47',9,0,0,'125'),('2018-02-21',127,21,12,'业务部',0,'2018-02-22 15:44:47',244,NULL,465,'2018-02-22 16:37:39',2,0,0,'126'),('2018-02-21',128,21,2,'董事长总经理',0,'2018-02-22 16:37:39',245,NULL,467,'2018-02-22 16:40:09',12,0,0,'127'),('2018-02-21',129,21,4,'副总经理',0,'2018-02-22 16:37:39',245,NULL,467,'2018-02-22 16:39:49',12,0,0,'127'),('2018-02-21',130,21,5,'副总经理',0,'2018-02-22 16:37:39',245,NULL,467,'2018-02-22 16:39:22',12,0,0,'127'),('2018-02-21',131,21,12,'业务部',0,'2018-02-22 16:37:39',245,NULL,467,'2018-02-22 16:38:14',12,0,0,'127'),('2018-02-21',132,21,12,'业务部',0,'2018-02-22 16:40:09',244,NULL,466,'2018-02-22 16:52:22',2,0,0,'126'),('2018-03-02',133,22,14,'数据信息部',0,'2018-03-02 11:36:03',237,NULL,452,'2018-03-02 11:36:18',0,0,0,'0'),('2018-03-02',134,22,14,'数据信息部',0,'2018-03-02 11:36:18',238,NULL,453,'2018-03-02 11:36:28',14,0,0,'133'),('2018-03-02',135,22,4,'副总经理',0,'2018-03-02 11:36:28',239,NULL,455,'2018-03-02 11:37:17',14,0,0,'134'),('2018-03-02',136,22,5,'副总经理',0,'2018-03-02 11:37:17',240,NULL,457,'2018-03-02 11:37:56',4,0,0,'135'),('2018-03-02',137,22,6,'副总经理',0,'2018-03-02 11:37:56',241,NULL,459,'2018-03-02 11:38:26',5,0,0,'136'),('2018-03-02',138,22,9,'会计核算部',0,'2018-03-02 11:38:26',242,NULL,461,'2018-03-02 11:38:56',6,0,0,'137'),('2018-03-02',139,22,2,'董事长总经理',0,'2018-03-02 11:38:56',243,NULL,463,'2018-03-02 11:39:16',9,0,0,'138'),('2018-03-02',140,22,14,'数据信息部',0,'2018-03-02 11:39:16',244,NULL,466,'2018-03-02 11:44:42',2,0,0,'139'),('2018-03-05',141,23,14,'数据信息部',0,'2018-03-05 14:11:46',268,NULL,505,'2018-03-06 14:25:00',0,0,0,'0'),('2018-03-05',142,23,10,'运营管理部',0,'2018-03-06 14:25:00',275,NULL,511,'2018-03-07 16:07:16',14,0,0,'141'),('2018-03-07',143,24,14,'数据信息部',0,'2018-03-07 11:50:02',268,NULL,501,'2018-03-07 11:50:48',0,0,0,'0'),('2018-03-07',144,24,14,'数据信息部',0,'2018-03-07 11:50:48',269,NULL,506,'2018-03-07 13:09:49',14,0,0,'143'),('2018-03-07',145,24,14,'数据信息部',0,'2018-03-07 13:09:49',268,'sdfsdfsfsd',502,'2018-03-07 13:10:43',0,0,0,'0'),('2018-03-07',146,24,4,'副总经理',0,'2018-03-07 13:10:43',270,'rrrrrrrrrrrrrr',507,'2018-03-07 13:11:29',14,0,0,'145'),('2018-03-07',147,24,14,'数据信息部',0,'2018-03-07 13:11:29',268,NULL,503,'2018-03-07 13:12:02',0,0,0,'0'),('2018-03-07',148,24,5,'副总经理',0,'2018-03-07 13:12:02',271,'tttttttttttttttt',508,'2018-03-07 13:12:32',14,0,0,'147'),('2018-03-07',149,24,14,'数据信息部',0,'2018-03-07 13:12:32',268,NULL,504,'2018-03-07 13:12:50',0,0,0,'0'),('2018-03-07',150,24,2,'董事长总经理',0,'2018-03-07 13:12:50',272,'yyyyyyyyyyyyy',509,'2018-03-07 13:13:10',14,0,0,'149'),('2018-03-07',151,24,14,'数据信息部',0,'2018-03-07 13:13:10',268,NULL,505,'2018-03-07 13:13:35',0,0,0,'0'),('2018-03-07',152,24,10,'运营管理部',0,'2018-03-07 13:13:35',275,NULL,510,'2018-03-07 13:13:54',14,0,0,'151'),('2018-03-07',153,24,2,'董事长总经理',0,'2018-03-07 13:13:54',273,NULL,512,'2018-03-07 13:14:19',10,0,0,'152'),('2018-03-07',154,24,4,'副总经理',0,'2018-03-07 13:13:54',273,NULL,512,'2018-03-07 13:14:54',10,0,0,'152'),('2018-03-07',155,24,5,'副总经理',0,'2018-03-07 13:13:54',273,NULL,512,'2018-03-07 13:15:15',10,0,0,'152'),('2018-03-07',156,24,14,'数据信息部',0,'2018-03-07 13:13:54',273,NULL,512,'2018-03-07 14:34:39',10,0,0,'152'),('2018-03-07',158,24,10,'运营管理部',0,'2018-03-07 14:34:39',275,NULL,511,'2018-03-07 14:52:50',14,0,0,'151'),('2018-03-07',159,25,10,'运营管理部',0,'2018-03-07 16:05:56',268,NULL,NULL,NULL,0,0,0,'0'),('2018-03-08',160,26,14,'数据信息部',0,'2018-03-08 16:35:42',247,'12131313',468,'2018-03-09 14:33:12',0,0,0,'0'),('2018-03-08',163,26,14,'数据信息部',0,'2018-03-09 14:33:12',248,NULL,469,'2018-03-09 14:33:18',14,0,0,'160'),('2018-03-08',164,26,4,'副总经理',0,'2018-03-09 14:33:18',249,NULL,472,'2018-03-09 15:58:17',14,0,0,'163'),('2018-03-12',165,27,14,'数据信息部',0,'2018-03-12 11:41:05',251,NULL,473,'2018-03-13 10:42:57',0,0,0,'0'),('2018-03-12',166,27,14,'数据信息部',0,'2018-03-13 10:42:57',252,'fffffffffffffffffffffffffffffffffffffffffffffffffff',474,'2018-03-13 10:43:43',14,0,0,'165'),('2018-03-12',167,27,4,'副总经理',0,'2018-03-13 10:43:43',253,'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa',477,'2018-03-13 10:44:15',14,0,0,'166'),('2018-03-12',168,27,14,'数据信息部',0,'2018-03-13 10:44:15',252,'bbbbbbbbbbbbbbbbbbbbbbbbbb',476,'2018-03-13 10:44:45',4,0,0,'167'),('2018-03-12',169,27,5,'副总经理',0,'2018-03-13 10:44:45',254,'ccccccccccccccccccccccccccccc',478,'2018-03-13 10:45:08',14,0,0,'168'),('2018-03-12',170,27,9,'会计核算部',0,'2018-03-13 10:45:08',255,'ddddddddddddddddddddddddddddddd',480,'2018-03-13 10:45:54',5,0,0,'169'),('2018-03-12',171,27,9,'会计核算部',0,'2018-03-13 10:45:54',256,'eeeeeeeeeeeeeeeeeeeeeeeee',482,'2018-03-13 10:46:07',9,0,0,'170'),('2018-03-12',172,27,3,'副总经理',0,'2018-03-13 10:46:07',257,'gggggggggggggggggggggggggggggg',484,'2018-03-13 10:46:32',9,0,0,'171'),('2018-03-12',173,27,9,'会计核算部',0,'2018-03-13 10:46:32',256,'hhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh',483,'2018-03-13 10:46:56',3,0,0,'172'),('2018-03-12',174,27,3,'副总经理',0,'2018-03-13 10:46:56',255,'iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii',485,'2018-03-13 10:47:48',9,0,0,'173'),('2018-03-12',175,27,10,'运营管理部',0,'2018-03-13 10:47:48',258,'jjjjjjjjjjjjjjjjjjjjjj',488,'2018-03-13 10:58:40',3,0,0,'174'),('2018-03-12',176,27,2,'董事长总经理',0,'2018-03-13 10:58:40',260,'kkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkk',490,'2018-03-13 11:00:52',10,0,0,'175'),('2018-03-12',177,27,10,'运营管理部',0,'2018-03-13 11:00:52',258,NULL,489,'2018-03-13 11:02:25',2,0,0,'176'),('2018-03-12',178,27,14,'数据信息部',0,'2018-03-13 11:02:25',251,NULL,473,'2018-03-13 12:08:05',10,0,0,'177'),('2018-03-12',179,27,14,'数据信息部',0,'2018-03-13 12:08:05',252,NULL,476,'2018-03-13 12:08:21',14,0,0,'178'),('2018-03-12',180,27,5,'副总经理',0,'2018-03-13 12:08:21',254,NULL,478,'2018-03-13 12:08:53',14,0,0,'179'),('2018-03-12',181,27,9,'会计核算部',0,'2018-03-13 12:08:53',255,NULL,485,'2018-03-13 12:09:29',5,0,0,'180'),('2018-03-12',182,27,10,'运营管理部',0,'2018-03-13 12:09:29',258,NULL,491,'2018-03-13 14:31:43',9,0,0,'181'),('2018-03-14',183,28,12,'业务部',0,'2018-03-14 09:51:37',237,NULL,452,'2018-03-14 09:52:44',0,0,0,'0'),('2018-03-14',184,28,12,'业务部',0,'2018-03-14 09:52:44',238,'同意',453,'2018-03-14 09:52:53',12,0,0,'183'),('2018-03-14',185,28,4,'副总经理',0,'2018-03-14 09:52:53',239,'同意',455,'2018-03-14 09:53:18',12,0,0,'184'),('2018-03-14',186,28,5,'副总经理',0,'2018-03-14 09:53:18',240,'好',457,'2018-03-14 09:53:40',4,0,0,'185'),('2018-03-14',187,28,6,'副总经理',0,'2018-03-14 09:53:40',241,NULL,459,'2018-03-14 09:53:59',5,0,0,'186'),('2018-03-14',188,28,9,'会计核算部',0,'2018-03-14 09:53:59',242,'注意效益',461,'2018-03-14 09:54:41',6,0,0,'187'),('2018-03-14',189,28,2,'董事长总经理',0,'2018-03-14 09:54:41',243,'批准',463,'2018-03-14 09:55:08',9,0,0,'188'),('2018-03-14',190,28,12,'业务部',0,'2018-03-14 09:55:08',244,NULL,465,'2018-03-14 09:57:37',2,0,0,'189'),('2018-03-14',191,28,2,'董事长总经理',0,'2018-03-14 09:57:37',245,NULL,NULL,NULL,12,0,0,'190'),('2018-03-14',192,28,4,'副总经理',0,'2018-03-14 09:57:37',245,NULL,467,'2018-03-14 10:04:54',12,0,0,'190'),('2018-03-14',193,28,5,'副总经理',0,'2018-03-14 09:57:37',245,NULL,NULL,NULL,12,0,0,'190'),('2018-03-14',194,28,9,'会计核算部',0,'2018-03-14 09:57:37',245,NULL,NULL,NULL,12,0,0,'190'),('2018-03-14',195,28,12,'业务部',0,'2018-03-14 09:57:37',245,NULL,467,'2018-03-14 09:58:22',12,0,0,'190'),('2018-03-14',196,29,11,'运营管理部',0,'2018-03-14 14:35:47',263,NULL,494,'2018-03-14 14:55:55',0,0,0,'0'),('2018-03-14',197,29,2,'董事长总经理',0,'2018-03-14 14:55:55',264,'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa',498,'2018-03-14 14:56:19',11,0,0,'196'),('2018-03-14',198,29,11,'运营管理部',0,'2018-03-14 14:56:19',263,NULL,495,'2018-03-14 14:57:06',0,0,0,'0'),('2018-03-14',199,29,2,'董事长总经理',0,'2018-03-14 14:57:06',265,'bbbbbbbbbbbbbbbbbbbbbbbbbbb',499,'2018-03-14 14:57:24',11,0,0,'198'),('2018-03-14',200,29,11,'运营管理部',0,'2018-03-14 14:57:24',263,NULL,496,'2018-03-14 15:04:04',0,0,0,'0'),('2018-03-14',201,29,2,'董事长总经理',0,'2018-03-14 15:04:04',266,NULL,500,'2018-03-14 15:09:39',11,0,0,'200'),('2018-03-14',202,29,11,'运营管理部',0,'2018-03-14 15:09:39',263,NULL,497,'2018-03-14 15:26:27',0,0,0,'0'),('2018-03-11',203,30,12,'业务部',0,'2018-03-11 14:21:36',237,NULL,452,'2018-03-11 14:23:17',0,0,0,'0'),('2018-03-11',204,30,12,'业务部',0,'2018-03-11 14:23:17',238,'同意',453,'2018-03-11 14:23:35',12,0,0,'203'),('2018-03-11',205,30,4,'副总经理',0,'2018-03-11 14:23:35',239,'同意',455,'2018-03-11 14:24:57',12,0,0,'204'),('2018-03-11',206,30,5,'副总经理',0,'2018-03-11 14:24:57',240,'没意见',457,'2018-03-11 14:25:39',4,0,0,'205'),('2018-03-11',207,30,6,'副总经理',0,'2018-03-11 14:25:39',241,'同意',459,'2018-03-11 14:26:20',5,0,0,'206'),('2018-03-11',208,30,9,'会计核算部',0,'2018-03-11 14:26:20',242,NULL,461,'2018-03-11 14:26:43',6,0,0,'207'),('2018-03-11',209,30,2,'董事长总经理',0,'2018-03-11 14:26:43',243,'批准',463,'2018-03-11 14:27:32',9,0,0,'208'),('2018-03-11',210,30,12,'业务部',0,'2018-03-11 14:27:32',244,NULL,465,'2018-03-11 14:29:48',2,0,0,'209'),('2018-03-11',211,30,2,'董事长总经理',0,'2018-03-11 14:29:48',245,NULL,467,'2018-03-11 14:41:27',12,0,0,'210'),('2018-03-11',212,30,4,'副总经理',0,'2018-03-11 14:29:48',245,NULL,467,'2018-03-11 14:38:03',12,0,0,'210'),('2018-03-11',213,30,5,'副总经理',0,'2018-03-11 14:29:48',245,NULL,467,'2018-03-11 14:38:47',12,0,0,'210'),('2018-03-11',214,30,9,'会计核算部',0,'2018-03-11 14:29:48',245,NULL,467,'2018-03-11 14:42:32',12,0,0,'210'),('2018-03-11',215,30,12,'业务部',0,'2018-03-11 14:29:48',245,NULL,467,'2018-03-11 14:32:12',12,0,0,'210'),('2018-03-11',216,30,12,'业务部',0,'2018-03-11 14:42:32',244,NULL,466,'2018-03-11 14:45:07',2,0,0,'209'),('2018-03-22',244,35,12,'业务部',0,'2018-03-22 11:54:41',237,NULL,452,'2018-03-22 13:20:36',0,0,0,'0'),('2018-03-22',245,35,12,'业务部',0,'2018-03-22 13:20:36',238,NULL,453,'2018-03-22 13:21:03',12,0,0,'244'),('2018-03-22',246,35,4,'副总经理',0,'2018-03-22 13:21:03',239,NULL,455,'2018-03-22 13:21:49',12,0,0,'245'),('2018-03-22',247,35,5,'副总经理',0,'2018-03-22 13:21:49',240,NULL,457,'2018-03-22 13:22:33',4,0,0,'246'),('2018-03-22',248,35,6,'副总经理',0,'2018-03-22 13:22:33',241,NULL,459,'2018-03-22 13:23:00',5,0,0,'247'),('2018-03-22',249,35,9,'会计核算部',0,'2018-03-22 13:23:00',242,NULL,461,'2018-03-22 13:23:31',6,0,0,'248'),('2018-03-22',250,35,2,'董事长总经理',0,'2018-03-22 13:23:31',243,NULL,463,'2018-03-22 13:23:56',9,0,0,'249'),('2018-03-22',251,35,12,'业务部',0,'2018-03-22 13:23:56',244,NULL,465,'2018-03-22 13:26:29',2,0,0,'250'),('2018-03-22',257,35,2,'董事长总经理',0,'2018-03-22 13:26:29',245,NULL,467,'2018-03-22 13:28:53',12,0,0,'251'),('2018-03-22',258,35,4,'副总经理',0,'2018-03-22 13:26:29',245,NULL,467,'2018-03-22 13:30:15',12,0,0,'251'),('2018-03-22',259,35,5,'副总经理',0,'2018-03-22 13:26:29',245,NULL,467,'2018-03-22 13:29:22',12,0,0,'251'),('2018-03-22',260,35,9,'会计核算部',0,'2018-03-22 13:26:29',245,NULL,467,'2018-03-22 13:29:52',12,0,0,'251'),('2018-03-22',261,35,12,'业务部',0,'2018-03-22 13:26:29',245,NULL,467,'2018-03-22 13:28:21',12,0,0,'251'),('2018-03-22',262,35,12,'业务部',0,'2018-03-22 13:30:15',244,NULL,466,'2018-03-22 13:30:45',2,0,0,'250'),('2018-03-22',263,36,12,'业务部',0,'2018-03-22 13:31:53',247,NULL,468,'2018-03-22 13:33:12',0,0,0,'0'),('2018-03-22',264,36,12,'业务部',0,'2018-03-22 13:33:12',248,NULL,469,'2018-03-22 13:33:28',12,0,0,'263'),('2018-03-22',265,36,4,'副总经理',0,'2018-03-22 13:33:28',249,NULL,472,'2018-03-22 13:33:54',12,0,0,'264'),('2018-03-22',266,37,12,'业务部',0,'2018-03-22 13:38:32',251,NULL,473,'2018-03-22 13:41:41',0,0,0,'0'),('2018-03-22',267,37,12,'业务部',0,'2018-03-22 13:41:41',252,NULL,474,'2018-03-22 13:42:16',12,0,0,'266'),('2018-03-22',268,37,4,'副总经理',0,'2018-03-22 13:42:16',253,NULL,477,'2018-03-22 13:42:35',12,0,0,'267'),('2018-03-22',269,37,12,'业务部',0,'2018-03-22 13:42:35',252,NULL,476,'2018-03-22 13:42:57',4,0,0,'268'),('2018-03-22',270,37,5,'副总经理',0,'2018-03-22 13:42:57',254,NULL,478,'2018-03-22 13:43:12',12,0,0,'269'),('2018-03-22',271,37,9,'会计核算部',0,'2018-03-22 13:43:12',255,NULL,480,'2018-03-22 13:43:49',5,0,0,'270'),('2018-03-22',272,37,9,'会计核算部',0,'2018-03-22 13:43:49',256,NULL,482,'2018-03-22 13:43:58',9,0,0,'271'),('2018-03-22',273,37,3,'副总经理',0,'2018-03-22 13:43:58',257,NULL,484,'2018-03-22 13:44:26',9,0,0,'272'),('2018-03-22',274,37,9,'会计核算部',0,'2018-03-22 13:44:26',256,NULL,483,'2018-03-22 13:45:18',3,0,0,'273'),('2018-03-22',275,37,3,'副总经理',0,'2018-03-22 13:45:18',255,NULL,485,'2018-03-22 13:45:51',9,0,0,'274'),('2018-03-22',276,37,10,'运营管理部',0,'2018-03-22 13:45:51',258,NULL,486,'2018-03-22 13:53:22',3,0,0,'275'),('2018-03-22',277,37,7,'副总经理',0,'2018-03-22 13:53:22',259,NULL,487,'2018-03-22 13:57:24',10,0,0,'276'),('2018-03-22',278,37,10,'运营管理部',0,'2018-03-22 13:57:24',258,NULL,488,'2018-03-22 13:58:50',7,0,0,'277'),('2018-03-22',279,37,2,'董事长总经理',0,'2018-03-22 13:58:50',260,NULL,490,'2018-03-22 13:59:15',10,0,0,'278'),('2018-03-22',280,37,10,'运营管理部',0,'2018-03-22 13:59:15',258,NULL,491,'2018-03-22 14:00:24',2,0,0,'279'),('2018-03-22',281,38,11,'运营管理部',0,'2018-03-22 14:03:43',263,NULL,494,'2018-03-22 14:15:44',0,0,0,'0'),('2018-03-22',282,38,2,'董事长总经理',0,'2018-03-22 14:15:44',264,NULL,498,'2018-03-22 14:15:56',11,0,0,'281'),('2018-03-22',283,38,11,'运营管理部',0,'2018-03-22 14:15:56',263,NULL,495,'2018-03-22 14:16:20',0,0,0,'0'),('2018-03-22',284,38,2,'董事长总经理',0,'2018-03-22 14:16:20',265,NULL,499,'2018-03-22 14:16:30',11,0,0,'283'),('2018-03-22',285,38,11,'运营管理部',0,'2018-03-22 14:16:30',263,NULL,497,'2018-03-22 14:17:55',0,0,0,'0'),('2018-03-22',286,39,12,'业务部',0,'2018-03-22 14:23:46',187,NULL,386,'2018-03-22 14:25:44',0,0,0,'0'),('2018-03-22',288,39,12,'业务部',0,'2018-03-22 14:25:44',194,NULL,391,'2018-03-22 15:02:02',12,0,0,'286'),('2018-03-22',305,41,9,'会计核算部',0,'2018-03-22 14:44:21',268,NULL,501,'2018-03-22 14:47:24',0,0,0,'0'),('2018-03-22',306,41,9,'会计核算部',0,'2018-03-22 14:47:24',269,NULL,506,'2018-03-22 14:47:28',9,0,0,'305'),('2018-03-22',307,41,9,'会计核算部',0,'2018-03-22 14:47:28',268,NULL,502,'2018-03-22 14:47:36',0,0,0,'0'),('2018-03-22',308,41,3,'副总经理',0,'2018-03-22 14:47:36',270,NULL,507,'2018-03-22 14:48:05',9,0,0,'307'),('2018-03-22',309,41,9,'会计核算部',0,'2018-03-22 14:48:05',268,NULL,503,'2018-03-22 14:56:38',0,0,0,'0'),('2018-03-22',310,41,5,'副总经理',0,'2018-03-22 14:56:38',271,NULL,508,'2018-03-22 14:56:52',9,0,0,'309'),('2018-03-22',311,41,9,'会计核算部',0,'2018-03-22 14:56:52',268,NULL,504,'2018-03-22 14:57:07',0,0,0,'0'),('2018-03-22',312,41,2,'董事长总经理',0,'2018-03-22 14:57:07',272,NULL,509,'2018-03-22 14:57:24',9,0,0,'311'),('2018-03-22',313,41,9,'会计核算部',0,'2018-03-22 14:57:24',268,NULL,505,'2018-03-22 14:57:37',0,0,0,'0'),('2018-03-22',314,41,10,'运营管理部',0,'2018-03-22 14:57:37',275,NULL,511,'2018-03-22 14:59:04',9,0,0,'313'),('2018-03-22',315,39,4,'副总经理',0,'2018-03-22 15:02:02',188,NULL,394,'2018-03-22 15:02:33',12,0,0,'288'),('2018-03-22',316,39,9,'会计核算部',0,'2018-03-22 15:02:33',189,NULL,402,'2018-03-22 15:04:00',4,0,0,'315'),('2018-03-22',317,39,9,'会计核算部',0,'2018-03-22 15:04:00',190,NULL,404,'2018-03-22 15:20:05',9,0,0,'316'),('2018-03-22',320,42,12,'业务部',0,'2018-03-22 15:32:41',187,NULL,387,'2018-03-22 15:34:40',0,0,0,'0'),('2018-03-22',321,42,4,'副总经理',0,'2018-03-22 15:34:40',188,NULL,393,'2018-03-22 15:36:47',12,0,0,'320'),('2018-03-22',322,42,2,'董事长总经理',0,'2018-03-22 15:36:47',192,'同意',397,'2018-03-22 15:37:06',4,0,0,'321'),('2018-03-22',323,42,9,'会计核算部',0,'2018-03-22 15:37:06',189,NULL,402,'2018-03-22 15:37:23',2,0,0,'322'),('2018-03-22',324,42,9,'会计核算部',0,'2018-03-22 15:37:23',190,NULL,442,'2018-03-22 15:40:11',9,0,0,'323'),('2018-03-22',325,42,2,'董事长总经理',0,'2018-03-22 15:40:11',233,NULL,443,'2018-03-22 15:46:07',9,0,1,'324'),('2018-03-22',326,42,9,'会计核算部',0,'2018-03-22 15:40:11',233,NULL,443,'2018-03-22 15:42:02',9,0,1,'324'),('2018-03-22',327,42,12,'业务部',0,'2018-03-22 15:40:11',233,NULL,443,'2018-03-22 15:43:52',9,0,1,'324'),('2018-03-22',328,42,9,'会计核算部',0,'2018-03-22 15:46:07',190,NULL,404,'2018-03-22 15:47:13',9,0,0,'323'),('2018-03-27',360,46,12,'业务部',0,'2018-03-27 14:25:17',268,NULL,504,'2018-03-27 14:26:36',0,0,0,'0'),('2018-03-27',361,46,2,'董事长总经理',0,'2018-03-27 14:26:36',272,'同意',509,'2018-03-27 14:28:57',12,0,0,'360'),('2018-03-27',362,46,12,'业务部',0,'2018-03-27 14:28:57',268,NULL,505,'2018-03-27 14:42:12',0,0,0,'0'),('2018-03-27',363,46,10,'运营管理部',0,'2018-03-27 14:42:12',275,NULL,510,'2018-03-27 14:47:38',12,0,0,'362'),('2018-03-27',365,46,2,'董事长总经理',0,'2018-03-27 14:47:38',273,NULL,512,'2018-03-27 14:49:13',10,0,0,'363'),('2018-03-27',366,46,10,'运营管理部',0,'2018-03-27 14:49:13',275,NULL,511,'2018-03-27 14:50:07',12,0,0,'362'),('2018-03-29',367,47,12,'业务部',0,'2018-03-29 08:25:44',297,NULL,547,'2018-03-29 08:32:30',0,0,0,'0'),('2018-03-29',368,47,9,'会计核算部',0,'2018-03-29 08:32:30',298,NULL,548,'2018-03-29 08:39:07',12,0,0,'367'),('2018-03-29',370,47,9,'会计核算部',0,'2018-03-29 08:39:07',299,NULL,550,'2018-03-29 09:02:20',9,0,0,'368'),('2018-03-29',371,47,12,'业务部',0,'2018-03-29 08:39:07',299,NULL,550,'2018-03-29 09:03:05',9,0,0,'368'),('2018-03-29',372,47,9,'会计核算部',0,'2018-03-29 09:03:05',298,NULL,549,'2018-03-29 09:03:32',12,0,0,'367'),('2018-03-31',391,50,12,'业务部',0,'2018-03-31 00:40:51',247,NULL,468,'2018-03-31 00:42:23',0,0,0,'0'),('2018-03-31',392,50,12,'业务部',0,'2018-03-31 00:42:23',248,NULL,469,'2018-03-31 00:42:31',12,0,0,'391'),('2018-03-31',393,50,4,'副总经理',0,'2018-03-31 00:42:31',249,NULL,472,'2018-03-31 00:45:52',12,0,0,'392'),('2018-03-31',394,51,12,'业务部',0,'2018-03-31 03:37:41',251,NULL,473,'2018-03-31 03:38:14',0,0,0,'0'),('2018-03-31',395,51,12,'业务部',0,'2018-03-31 03:38:14',252,NULL,474,'2018-03-31 03:38:25',12,0,0,'394'),('2018-03-31',396,51,4,'副总经理',0,'2018-03-31 03:38:25',253,'同意',477,'2018-03-31 03:38:50',12,0,0,'395'),('2018-03-31',397,51,12,'业务部',0,'2018-03-31 03:38:50',252,NULL,476,'2018-03-31 03:39:07',4,0,0,'396'),('2018-03-31',398,51,5,'副总经理',0,'2018-03-31 03:39:07',254,NULL,478,'2018-03-31 03:39:50',12,0,0,'397'),('2018-03-31',399,51,9,'会计核算部',0,'2018-03-31 03:39:50',255,NULL,480,'2018-03-31 03:40:35',5,0,0,'398'),('2018-03-31',400,51,9,'会计核算部',0,'2018-03-31 03:40:35',256,NULL,482,'2018-03-31 03:40:43',9,0,0,'399'),('2018-03-31',401,51,3,'副总经理',0,'2018-03-31 03:40:43',257,'同意',484,'2018-03-31 03:41:05',9,0,0,'400'),('2018-03-31',402,51,9,'会计核算部',0,'2018-03-31 03:41:05',256,NULL,483,'2018-03-31 04:04:38',3,0,0,'401'),('2018-03-31',405,51,9,'会计核算部',0,'2018-03-31 04:04:38',255,NULL,485,'2018-03-31 04:04:55',9,0,0,'402'),('2018-03-31',406,51,10,'运营管理部',0,'2018-03-31 04:04:55',258,NULL,486,'2018-03-31 04:14:15',9,0,0,'405'),('2018-03-31',408,51,7,'副总经理',0,'2018-03-31 04:14:15',259,'可以',487,'2018-03-31 04:14:59',10,0,0,'406'),('2018-03-31',409,51,10,'运营管理部',0,'2018-03-31 04:14:59',258,NULL,488,'2018-03-31 04:15:40',7,0,0,'408'),('2018-03-31',410,51,2,'董事长总经理',0,'2018-03-31 04:15:40',260,'行',490,'2018-03-31 04:16:07',10,0,0,'409'),('2018-03-31',411,51,10,'运营管理部',0,'2018-03-31 04:16:07',258,NULL,492,'2018-03-31 05:09:56',2,0,0,'410'),('2018-03-31',412,51,2,'董事长总经理',0,'2018-03-31 05:09:56',262,NULL,493,'2018-03-31 06:08:32',10,0,0,'411'),('2018-03-31',413,51,3,'副总经理',0,'2018-03-31 05:09:56',262,NULL,493,'2018-03-31 06:07:13',10,0,0,'411'),('2018-03-31',414,51,4,'副总经理',0,'2018-03-31 05:09:56',262,NULL,493,'2018-03-31 05:23:35',10,0,0,'411'),('2018-03-31',415,51,5,'副总经理',0,'2018-03-31 05:09:56',262,NULL,493,'2018-03-31 05:22:07',10,0,0,'411'),('2018-03-31',416,51,7,'副总经理',0,'2018-03-31 05:09:56',262,NULL,493,'2018-03-31 05:20:31',10,0,0,'411'),('2018-03-31',417,51,9,'会计核算部',0,'2018-03-31 05:09:56',262,NULL,493,'2018-03-31 05:18:10',10,0,0,'411'),('2018-03-31',418,51,10,'运营管理部',0,'2018-03-31 05:09:56',262,NULL,493,'2018-03-31 05:11:34',10,0,0,'411'),('2018-03-31',419,51,12,'业务部',0,'2018-03-31 05:09:56',262,NULL,493,'2018-03-31 05:13:17',10,0,0,'411'),('2018-03-31',420,51,10,'运营管理部',0,'2018-03-31 06:08:32',258,NULL,492,'2018-03-31 06:18:44',2,0,0,'410'),('2018-03-31',421,51,2,'董事长总经理',0,'2018-03-31 06:18:44',262,NULL,493,'2018-03-31 06:28:54',10,0,0,'420'),('2018-03-31',422,51,3,'副总经理',0,'2018-03-31 06:18:44',262,NULL,493,'2018-03-31 06:23:28',10,0,0,'420'),('2018-03-31',423,51,4,'副总经理',0,'2018-03-31 06:18:44',262,NULL,493,'2018-03-31 06:28:23',10,0,0,'420'),('2018-03-31',424,51,5,'副总经理',0,'2018-03-31 06:18:44',262,NULL,493,'2018-03-31 06:26:55',10,0,0,'420'),('2018-03-31',425,51,7,'副总经理',0,'2018-03-31 06:18:44',262,NULL,493,'2018-03-31 06:25:59',10,0,0,'420'),('2018-03-31',426,51,9,'会计核算部',0,'2018-03-31 06:18:44',262,NULL,493,'2018-03-31 06:21:24',10,0,0,'420'),('2018-03-31',427,51,10,'运营管理部',0,'2018-03-31 06:18:44',262,NULL,493,'2018-03-31 06:19:40',10,0,0,'420'),('2018-03-31',428,51,12,'业务部',0,'2018-03-31 06:18:44',262,NULL,493,'2018-03-31 06:24:30',10,0,0,'420'),('2018-03-31',429,51,10,'运营管理部',0,'2018-03-31 06:28:54',258,NULL,491,'2018-03-31 06:29:41',2,0,0,'410'),('2018-03-31',430,52,11,'运营管理部',0,'2018-03-31 06:41:54',263,NULL,494,'2018-03-31 06:42:52',0,0,0,'0'),('2018-03-31',431,52,2,'董事长总经理',0,'2018-03-31 06:42:52',264,'很好',498,'2018-03-31 06:43:09',11,0,0,'430'),('2018-03-31',432,52,11,'运营管理部',0,'2018-03-31 06:43:09',263,NULL,495,'2018-03-31 06:43:30',0,0,0,'0'),('2018-03-31',433,52,2,'董事长总经理',0,'2018-03-31 06:43:30',265,'还是很好',499,'2018-03-31 06:43:49',11,0,0,'432'),('2018-03-31',434,52,11,'运营管理部',0,'2018-03-31 06:43:49',263,NULL,496,'2018-03-31 06:47:21',0,0,0,'0'),('2018-03-31',435,52,2,'董事长总经理',0,'2018-03-31 06:47:21',266,NULL,500,'2018-03-31 06:49:19',11,0,0,'434'),('2018-03-31',436,52,11,'运营管理部',0,'2018-03-31 06:49:19',263,NULL,497,'2018-03-31 06:50:27',0,0,0,'0'),('2018-04-01',462,55,12,'业务部',0,'2018-04-01 02:26:18',251,NULL,473,'2018-04-30 06:20:05',0,0,0,'0'),('2018-04-01',463,56,14,'数据信息部',0,'2018-04-01 10:32:13',187,NULL,387,'2018-04-01 10:32:27',0,0,0,'0'),('2018-04-01',464,56,4,'副总经理',0,'2018-04-01 10:32:27',188,NULL,394,'2018-04-01 10:32:43',14,0,0,'463'),('2018-04-01',465,56,9,'会计核算部',0,'2018-04-01 10:32:43',189,NULL,402,'2018-04-01 10:32:57',4,0,0,'464'),('2018-04-01',466,56,9,'会计核算部',0,'2018-04-01 10:32:57',190,NULL,404,'2018-04-07 11:37:12',9,0,0,'465'),('2018-04-01',467,57,11,'运营管理部',0,'2018-04-01 12:07:47',39,NULL,60,'2018-04-01 12:09:57',0,0,0,'0'),('2018-04-01',468,57,10,'运营管理部',0,'2018-04-01 12:09:57',40,NULL,191,'2018-04-01 12:10:54',11,0,0,'467'),('2018-04-01',469,57,2,'董事长总经理',0,'2018-04-01 12:10:54',124,'同意',63,'2018-04-01 12:11:33',10,0,0,'468'),('2018-04-01',470,57,11,'运营管理部',0,'2018-04-01 12:11:33',42,NULL,66,'2018-05-21 15:58:24',2,0,0,'469'),('2018-04-02',471,58,11,'运营管理部',0,'2018-04-02 02:14:06',39,NULL,60,'2018-04-02 02:16:19',0,0,0,'0'),('2018-04-02',472,58,10,'运营管理部',0,'2018-04-02 02:16:19',40,NULL,191,'2019-03-06 08:03:35',11,0,0,'471'),('2018-04-07',475,59,14,'数据信息部',0,'2018-04-07 11:39:36',187,NULL,387,'2018-04-07 11:39:49',0,0,0,'0'),('2018-04-07',476,59,4,'副总经理',0,'2018-04-07 11:39:49',188,NULL,393,'2018-04-07 11:40:05',14,0,0,'475'),('2018-04-07',477,59,2,'董事长总经理',0,'2018-04-07 11:40:05',192,'同意',397,'2018-04-07 11:40:21',4,0,0,'476'),('2018-04-07',478,59,9,'会计核算部',0,'2018-04-07 11:40:21',189,NULL,402,'2018-04-07 11:40:35',2,0,0,'477'),('2018-04-07',479,59,9,'会计核算部',0,'2018-04-07 11:40:35',190,NULL,404,'2018-04-07 11:42:10',9,0,0,'478'),('2018-04-07',480,60,12,'业务部',0,'2018-04-07 12:09:33',187,NULL,386,'2018-04-07 12:09:37',0,0,0,'0'),('2018-04-07',481,60,12,'业务部',0,'2018-04-07 12:09:37',194,NULL,391,'2018-04-07 12:09:40',12,0,0,'480'),('2018-04-07',482,60,4,'副总经理',0,'2018-04-07 12:09:40',188,NULL,393,'2018-04-07 12:09:53',12,0,0,'481'),('2018-04-07',483,60,2,'董事长总经理',0,'2018-04-07 12:09:53',192,'同意',397,'2018-04-07 12:10:12',4,0,0,'482'),('2018-04-07',484,60,9,'会计核算部',0,'2018-04-07 12:10:12',189,NULL,402,'2018-04-07 12:10:25',2,0,0,'483'),('2018-04-07',485,60,9,'会计核算部',0,'2018-04-07 12:10:25',190,NULL,404,'2018-08-23 10:53:49',9,0,0,'484'),('2018-04-12',509,62,11,'运营管理部',0,'2018-04-12 23:04:06',301,NULL,551,'2018-04-12 23:08:37',0,0,0,'0'),('2018-04-12',510,62,2,'董事长总经理',0,'2018-04-12 23:08:37',302,'请业务部门办理',555,'2018-04-12 23:13:44',11,0,0,'509'),('2018-04-12',511,62,3,'副总经理',0,'2018-04-12 23:13:44',302,'已阅',555,'2018-04-12 23:14:34',11,0,0,'509'),('2018-04-12',512,62,4,'副总经理',0,'2018-04-12 23:14:34',302,NULL,555,'2018-04-12 23:15:16',11,0,0,'509'),('2018-04-12',513,62,11,'运营管理部',0,'2018-04-12 23:15:16',301,NULL,552,'2018-04-12 23:17:09',0,0,0,'0'),('2018-04-12',514,62,5,'副总经理',0,'2018-04-12 23:17:09',303,'已阅',556,'2018-04-12 23:17:47',11,0,0,'513'),('2018-04-12',515,62,6,'副总经理',0,'2018-04-12 23:17:09',303,NULL,556,'2018-04-12 23:18:29',11,0,0,'513'),('2018-04-12',516,62,11,'运营管理部',0,'2018-04-12 23:18:29',301,NULL,554,'2018-04-12 23:19:46',0,0,0,'0'),('2018-04-13',517,63,11,'运营管理部',0,'2018-04-13 00:15:49',301,NULL,NULL,NULL,0,0,0,'0'),('2018-04-20',530,66,14,'数据信息部',0,'2018-04-20 13:23:15',297,NULL,547,'2018-04-20 13:23:34',0,0,0,'0'),('2018-04-20',531,66,9,'会计核算部',0,'2018-04-20 13:23:34',298,NULL,549,'2018-04-20 13:24:41',14,0,0,'530'),('2018-04-20',532,67,14,'数据信息部',0,'2018-04-20 13:36:02',297,NULL,547,'2018-04-20 13:36:06',0,0,0,'0'),('2018-04-20',533,67,9,'会计核算部',0,'2018-04-20 13:36:06',298,NULL,549,'2018-04-20 13:36:37',14,0,0,'532'),('2018-04-21',535,69,9,'会计核算部',0,'2018-04-21 08:13:59',187,NULL,387,'2018-04-21 08:14:21',0,0,0,'0'),('2018-04-21',536,69,3,'副总经理',0,'2018-04-21 08:14:21',188,NULL,393,'2018-04-21 08:14:38',9,0,0,'535'),('2018-04-21',537,69,2,'董事长总经理',0,'2018-04-21 08:14:38',192,'同意',397,'2018-04-21 08:14:52',3,0,0,'536'),('2018-04-21',538,69,9,'会计核算部',0,'2018-04-21 08:14:52',189,NULL,402,'2018-04-21 08:16:33',2,0,0,'537'),('2018-04-21',539,69,9,'会计核算部',0,'2018-04-21 08:16:33',190,NULL,404,'2018-04-21 08:17:51',9,0,0,'538'),('2018-04-21',540,70,14,'数据信息部',0,'2018-04-21 08:18:52',297,NULL,547,'2018-04-21 08:20:18',0,0,0,'0'),('2018-04-21',541,70,9,'会计核算部',0,'2018-04-21 08:20:18',298,NULL,549,'2018-04-21 08:28:22',14,0,0,'540'),('2018-04-24',565,74,12,'业务部',0,'2018-04-24 19:56:15',268,NULL,505,'2018-04-24 20:00:09',0,0,0,'0'),('2018-04-24',566,74,10,'运营管理部',0,'2018-04-24 20:00:09',275,NULL,NULL,NULL,12,0,0,'565'),('2018-04-25',567,75,12,'业务部',0,'2018-04-25 01:15:12',268,NULL,502,'2018-04-25 01:20:43',0,0,0,'0'),('2018-04-25',568,75,4,'副总经理',0,'2018-04-25 01:20:43',270,NULL,507,'2018-12-12 00:20:23',12,0,0,'567'),('2018-04-25',569,76,14,'数据信息部',0,'2018-04-25 02:32:33',268,NULL,501,'2018-04-25 02:35:24',0,0,0,'0'),('2018-04-25',571,76,14,'数据信息部',0,'2018-04-25 02:35:24',269,NULL,506,'2018-04-25 02:35:27',14,0,0,'569'),('2018-04-25',572,76,14,'数据信息部',0,'2018-04-25 02:35:27',268,NULL,502,'2018-04-25 02:35:32',0,0,0,'0'),('2018-04-25',573,76,4,'副总经理',0,'2018-04-25 02:35:32',270,NULL,507,'2018-04-25 02:35:52',14,0,0,'572'),('2018-04-25',574,76,14,'数据信息部',0,'2018-04-25 02:35:52',268,NULL,503,'2018-04-25 02:36:13',0,0,0,'0'),('2018-04-25',575,76,5,'副总经理',0,'2018-04-25 02:36:13',271,NULL,508,'2018-04-25 02:36:35',14,0,0,'574'),('2018-04-25',576,76,14,'数据信息部',0,'2018-04-25 02:36:35',268,NULL,504,'2018-04-25 02:36:52',0,0,0,'0'),('2018-04-25',577,76,2,'董事长总经理',0,'2018-04-25 02:36:52',272,'同意',509,'2018-04-25 02:37:13',14,0,0,'576'),('2018-04-25',578,76,14,'数据信息部',0,'2018-04-25 02:37:13',268,NULL,505,'2018-04-25 02:37:29',0,0,0,'0'),('2018-04-25',579,76,10,'运营管理部',0,'2018-04-25 02:37:29',275,NULL,511,'2018-04-25 02:56:00',14,0,0,'578'),('2018-04-29',580,77,12,'业务部',0,'2018-04-29 22:33:22',305,'啊啊啊',576,'2018-04-29 23:54:19',0,0,0,'0'),('2018-04-29',582,77,12,'业务部',0,'2018-04-29 23:54:19',306,NULL,578,'2018-04-29 23:54:27',12,0,0,'580'),('2018-04-29',583,77,4,'副总经理',0,'2018-04-29 23:54:27',307,'同意',580,'2018-04-30 04:04:30',12,0,0,'582'),('2018-04-29',584,77,12,'业务部',0,'2018-04-30 04:04:30',305,NULL,577,'2018-04-30 04:05:28',4,0,0,'583'),('2018-04-29',585,77,5,'副总经理',0,'2018-04-30 04:05:28',311,'同意',585,'2018-04-30 04:06:12',12,0,0,'584'),('2018-04-29',587,77,12,'业务部',0,'2018-04-30 04:06:12',313,NULL,589,'2018-04-30 04:18:29',5,0,0,'585'),('2018-04-30',588,78,12,'业务部',0,'2018-04-30 05:31:17',237,NULL,452,'2018-04-30 05:33:16',0,0,0,'0'),('2018-04-30',589,78,8,'业务部',0,'2018-04-30 05:33:16',238,'同意',453,'2018-04-30 05:33:51',12,0,0,'588'),('2018-04-30',590,78,4,'副总经理',0,'2018-04-30 05:33:51',239,NULL,455,'2018-04-30 05:35:22',8,0,0,'589'),('2018-04-30',591,78,5,'审计部',0,'2018-04-30 05:35:22',240,'同意',457,'2018-04-30 05:35:55',4,0,0,'590'),('2018-04-30',592,78,6,'风险管理部',0,'2018-04-30 05:35:55',241,NULL,459,'2018-04-30 05:36:27',5,0,0,'591'),('2018-04-30',593,78,9,'会计核算部',0,'2018-04-30 05:36:27',242,NULL,461,'2018-04-30 05:37:11',6,0,0,'592'),('2018-04-30',594,78,2,'董事长总经理',0,'2018-04-30 05:37:11',243,'行',463,'2018-04-30 05:37:55',9,0,0,'593'),('2018-04-30',595,78,12,'业务部',0,'2018-04-30 05:37:55',244,NULL,466,'2018-04-30 07:12:10',2,0,0,'594'),('2018-04-01',596,55,8,'业务部',0,'2018-04-30 06:20:05',252,NULL,NULL,NULL,12,0,0,'462'),('2018-04-30',597,79,12,'业务部',0,'2018-04-30 07:13:00',247,NULL,468,'2018-04-30 07:14:57',0,0,0,'0'),('2018-04-30',598,79,8,'业务部',0,'2018-04-30 07:14:57',248,NULL,469,'2018-04-30 07:15:25',12,0,0,'597'),('2018-04-30',599,79,4,'副总经理',0,'2018-04-30 07:15:25',249,NULL,472,'2018-04-30 07:16:12',8,0,0,'598'),('2018-04-30',600,80,12,'业务部',0,'2018-04-30 08:02:35',251,NULL,590,'2018-04-30 08:11:52',0,0,0,'0'),('2018-04-30',601,80,8,'业务部',0,'2018-04-30 08:11:52',252,'同意',591,'2018-04-30 08:12:26',12,0,0,'600'),('2018-04-30',602,80,4,'副总经理',0,'2018-04-30 08:12:26',253,NULL,592,'2018-04-30 08:12:43',8,0,0,'601'),('2018-04-30',603,80,5,'审计部',0,'2018-04-30 08:12:43',254,'同意',595,'2018-04-30 08:13:03',4,0,0,'602'),('2018-04-30',604,80,9,'会计核算部',0,'2018-04-30 08:13:03',255,NULL,597,'2018-04-30 08:15:22',5,0,0,'603'),('2018-04-30',605,80,3,'资金运营部',0,'2018-04-30 08:15:22',256,'好',600,'2018-04-30 08:15:58',9,0,0,'604'),('2018-04-30',606,80,3,'资金运营部',0,'2018-04-30 08:15:58',257,NULL,598,'2018-04-30 08:16:05',3,0,0,'605'),('2018-04-30',607,80,11,'运营管理部',0,'2018-04-30 08:16:05',258,NULL,603,'2018-04-30 08:17:23',3,0,0,'606'),('2018-04-30',608,80,7,'运营管理部',0,'2018-04-30 08:17:23',259,'同意',607,'2018-04-30 08:17:39',11,0,0,'607'),('2018-04-30',609,80,11,'运营管理部',0,'2018-04-30 08:17:39',258,NULL,604,'2018-04-30 08:17:54',7,0,0,'608'),('2018-04-30',610,80,2,'董事长总经理',0,'2018-04-30 08:17:54',260,'同意',608,'2018-04-30 08:18:30',11,0,0,'609'),('2018-04-30',611,80,11,'运营管理部',0,'2018-04-30 08:18:30',258,NULL,606,'2018-04-30 08:59:16',2,0,0,'610'),('2018-04-30',612,81,11,'运营管理部',0,'2018-04-30 12:53:56',263,NULL,494,'2018-04-30 12:54:23',0,0,0,'0'),('2018-04-30',613,81,2,'董事长总经理',0,'2018-04-30 12:54:23',264,'同意',498,'2018-04-30 12:54:56',11,0,0,'612'),('2018-04-30',614,81,11,'运营管理部',0,'2018-04-30 12:54:56',263,NULL,495,'2018-04-30 12:55:13',0,0,0,'0'),('2018-04-30',615,81,2,'董事长总经理',0,'2018-04-30 12:55:13',265,NULL,499,'2018-04-30 12:55:25',11,0,0,'614'),('2018-04-30',616,81,11,'运营管理部',0,'2018-04-30 12:55:25',263,NULL,497,'2018-04-30 13:16:18',0,0,0,'0'),('2018-04-30',617,82,12,'业务部',0,'2018-04-30 13:18:43',305,NULL,576,'2018-04-30 13:20:28',0,0,0,'0'),('2018-04-30',618,82,8,'业务部',0,'2018-04-30 13:20:28',306,'同意',578,'2018-04-30 13:24:47',12,0,0,'617'),('2018-04-30',619,82,4,'副总经理',0,'2018-04-30 13:24:47',307,NULL,580,'2018-04-30 13:25:27',8,0,0,'618'),('2018-04-30',620,82,12,'业务部',0,'2018-04-30 13:25:27',305,NULL,577,'2018-04-30 13:25:45',4,0,0,'619'),('2018-04-30',621,82,5,'审计部',0,'2018-04-30 13:25:45',311,'同意',585,'2018-04-30 13:26:16',12,0,0,'620'),('2018-04-30',622,82,12,'业务部',0,'2018-04-30 13:26:16',313,NULL,589,'2018-04-30 13:28:05',5,0,0,'621'),('2018-04-30',623,83,12,'业务部',0,'2018-04-30 13:30:13',305,NULL,576,'2018-04-30 13:30:48',0,0,0,'0'),('2018-04-30',624,83,8,'业务部',0,'2018-04-30 13:30:48',306,'同意',578,'2018-04-30 13:31:11',12,0,0,'623'),('2018-04-30',625,83,4,'副总经理',0,'2018-04-30 13:31:11',307,'ok',580,'2018-04-30 13:31:36',8,0,0,'624'),('2018-04-30',626,83,12,'业务部',0,'2018-04-30 13:31:36',305,NULL,577,'2018-04-30 13:31:52',4,0,0,'625'),('2018-04-30',627,83,5,'审计部',0,'2018-04-30 13:31:52',311,'没意见',585,'2018-04-30 13:32:13',12,0,0,'626'),('2018-04-30',628,83,12,'业务部',0,'2018-04-30 13:32:13',313,NULL,589,'2018-05-02 15:57:05',5,0,0,'627'),('2018-05-02',630,85,12,'业务部',0,'2018-05-02 15:57:05',268,NULL,557,'2018-05-02 15:59:27',0,0,0,'0'),('2018-05-02',631,85,8,'业务部',0,'2018-05-02 15:59:27',269,NULL,558,'2018-05-02 16:01:10',12,0,0,'630'),('2018-05-02',632,85,4,'副总经理',0,'2018-05-02 16:01:10',270,NULL,609,'2018-05-02 16:27:17',8,0,0,'631'),('2018-05-02',633,85,5,'审计部',0,'2018-05-02 16:27:17',271,NULL,611,'2018-05-02 16:27:56',4,0,0,'632'),('2018-05-02',634,85,2,'董事长总经理',0,'2018-05-02 16:27:56',272,NULL,614,'2018-05-02 16:38:31',5,0,0,'633'),('2018-05-02',635,86,13,'审计部',0,'2018-05-02 16:36:16',268,NULL,557,'2018-05-02 16:37:46',0,0,0,'0'),('2018-05-02',637,86,5,'审计部',0,'2018-05-02 16:37:46',269,NULL,558,'2018-05-02 16:38:07',13,0,0,'635'),('2018-05-02',638,86,5,'审计部',0,'2018-05-02 16:38:07',270,NULL,609,'2018-05-02 16:38:11',5,0,0,'637'),('2018-05-02',639,86,5,'审计部',0,'2018-05-02 16:38:11',271,NULL,611,'2018-05-02 16:38:15',5,0,0,'638'),('2018-05-02',640,86,2,'董事长总经理',0,'2018-05-02 16:38:15',272,NULL,614,'2018-05-02 16:38:43',5,0,0,'639'),('2018-05-02',641,85,10,'运营管理部',0,'2018-05-02 16:38:31',275,NULL,615,'2018-05-02 17:35:57',2,0,0,'634'),('2018-05-02',642,86,10,'运营管理部',0,'2018-05-02 16:38:43',275,NULL,615,'2018-05-02 17:27:59',2,0,0,'640'),('2018-05-04',675,90,12,'业务部',0,'2018-05-04 22:08:51',268,NULL,557,'2018-05-04 22:09:45',0,0,0,'0'),('2018-05-04',676,90,8,'业务部',0,'2018-05-04 22:09:45',269,'同意',558,'2018-05-04 22:10:10',12,0,0,'675'),('2018-05-04',677,90,4,'副总经理',0,'2018-05-04 22:10:10',270,'好',616,'2018-05-04 22:26:39',8,0,0,'676'),('2018-05-04',678,90,3,'资金运营部',0,'2018-05-04 22:26:39',314,NULL,619,'2018-05-04 22:28:08',4,0,0,'677'),('2018-05-04',679,90,10,'运营管理部',0,'2018-05-04 22:28:08',275,NULL,615,'2018-05-04 22:28:55',3,0,0,'678'),('2018-05-04',680,91,12,'业务部',0,'2018-05-04 22:30:09',268,NULL,557,'2018-05-04 22:30:45',0,0,0,'0'),('2018-05-04',681,91,8,'业务部',0,'2018-05-04 22:30:45',269,NULL,558,'2018-05-04 22:31:00',12,0,0,'680'),('2018-05-04',682,91,4,'副总经理',0,'2018-05-04 22:31:00',270,NULL,609,'2018-05-04 22:31:19',8,0,0,'681'),('2018-05-04',683,91,5,'审计部',0,'2018-05-04 22:31:19',271,'可以',611,'2018-05-04 22:32:03',4,0,0,'682'),('2018-05-04',684,91,2,'董事长总经理',0,'2018-05-04 22:32:03',315,NULL,617,'2018-05-04 22:32:18',5,0,0,'683'),('2018-05-04',685,91,2,'董事长总经理',0,'2018-05-04 22:32:18',272,'同意',614,'2018-05-04 22:32:27',2,0,0,'684'),('2018-05-04',686,91,10,'运营管理部',0,'2018-05-04 22:32:27',275,NULL,615,'2018-05-04 22:33:05',2,0,0,'685'),('2018-05-10',687,92,14,'数据信息部',0,'2018-05-10 17:15:28',34,NULL,53,'2018-05-10 17:18:09',0,0,0,'0'),('2018-05-10',688,92,14,'数据信息部',0,'2018-05-10 17:18:09',35,NULL,193,'2018-05-10 17:18:15',14,0,0,'687'),('2018-05-10',689,92,2,'董事长总经理',0,'2018-05-10 17:18:15',125,'同意',58,'2018-05-10 17:18:33',14,0,0,'688'),('2018-05-10',690,92,14,'数据信息部',0,'2018-05-10 17:18:33',37,NULL,59,'2018-05-10 17:19:04',2,0,0,'689'),('2018-05-10',691,93,14,'数据信息部',0,'2018-05-10 17:21:36',34,NULL,53,'2018-05-10 17:32:47',0,0,0,'0'),('2018-05-10',692,93,14,'数据信息部',0,'2018-05-10 17:32:47',35,NULL,193,'2018-05-10 17:32:59',14,0,0,'691'),('2018-05-10',693,93,2,'董事长总经理',0,'2018-05-10 17:32:59',125,NULL,58,'2018-05-10 17:33:15',14,0,0,'692'),('2018-05-10',694,93,14,'数据信息部',0,'2018-05-10 17:33:15',37,NULL,59,'2018-05-10 17:33:54',2,0,0,'693'),('2018-05-16',702,96,13,'审计部',0,'2018-05-16 09:48:35',268,NULL,557,'2018-05-16 10:22:29',0,0,0,'0'),('2018-05-16',703,96,5,'审计部',0,'2018-05-16 10:22:29',269,NULL,558,'2018-05-16 10:23:03',13,0,0,'702'),('2018-05-16',704,96,5,'审计部',0,'2018-05-16 10:23:03',270,NULL,609,'2018-05-16 10:23:07',5,0,0,'703'),('2018-05-16',705,96,5,'审计部',0,'2018-05-16 10:23:07',271,NULL,611,'2018-05-16 10:23:11',5,0,0,'704'),('2018-05-16',706,96,2,'董事长总经理',0,'2018-05-16 10:23:11',315,NULL,617,'2018-05-16 10:23:43',5,0,0,'705'),('2018-05-16',707,96,2,'董事长总经理',0,'2018-05-16 10:23:43',272,NULL,614,'2018-05-16 10:23:51',2,0,0,'706'),('2018-05-16',708,96,10,'运营管理部',0,'2018-05-16 10:23:51',275,NULL,615,'2018-05-16 10:25:17',2,0,0,'707'),('2018-05-16',709,97,12,'业务部',0,'2018-05-16 10:26:58',305,NULL,577,'2018-05-16 10:28:31',0,0,0,'0'),('2018-05-16',710,97,5,'审计部',0,'2018-05-16 10:28:31',311,NULL,585,'2018-05-16 10:28:57',12,0,0,'709'),('2018-05-16',711,97,12,'业务部',0,'2018-05-16 10:28:57',313,NULL,589,'2018-05-16 10:41:10',5,0,0,'710'),('2018-05-16',712,98,12,'业务部',0,'2018-05-16 10:41:10',268,NULL,557,'2018-05-16 10:41:43',0,0,0,'0'),('2018-05-16',713,98,8,'业务部',0,'2018-05-16 10:41:43',269,NULL,558,'2018-05-16 10:42:04',12,0,0,'712'),('2018-05-16',714,98,4,'副总经理',0,'2018-05-16 10:42:04',270,NULL,609,'2018-05-16 10:42:51',8,0,0,'713'),('2018-05-16',715,98,5,'审计部',0,'2018-05-16 10:42:51',271,NULL,611,'2018-05-16 10:43:13',4,0,0,'714'),('2018-05-16',716,98,2,'董事长总经理',0,'2018-05-16 10:43:13',315,NULL,617,'2018-05-16 10:43:32',5,0,0,'715'),('2018-05-16',717,98,2,'董事长总经理',0,'2018-05-16 10:43:32',272,NULL,614,'2018-05-16 10:43:38',2,0,0,'716'),('2018-05-16',718,98,10,'运营管理部',0,'2018-05-16 10:43:38',275,NULL,615,'2018-05-16 10:45:17',2,0,0,'717'),('2018-05-16',719,99,13,'审计部',0,'2018-05-16 12:06:52',34,NULL,53,'2018-05-16 12:10:50',0,0,0,'0'),('2018-05-16',720,99,5,'审计部',0,'2018-05-16 12:10:50',35,NULL,193,'2018-05-16 12:11:33',13,0,0,'719'),('2018-05-16',721,99,2,'董事长总经理',0,'2018-05-16 12:11:33',125,'同意',58,'2018-05-16 12:11:47',5,0,0,'720'),('2018-05-16',722,99,13,'审计部',0,'2018-05-16 12:11:47',37,NULL,59,'2018-05-16 12:12:12',2,0,0,'721'),('2018-05-17',809,186,12,'业务部',0,'2018-05-17 09:08:02',268,NULL,557,'2018-05-17 09:12:16',0,0,0,'0'),('2018-05-17',810,186,8,'业务部',0,'2018-05-17 09:12:16',269,NULL,NULL,NULL,12,0,0,'809'),('2018-05-20',862,237,13,'审计部',0,'2018-05-20 11:37:02',39,NULL,60,'2018-05-20 11:39:05',0,0,0,'0'),('2018-05-20',863,237,5,'审计部',0,'2018-05-20 11:39:05',40,NULL,191,'2018-05-20 11:40:11',13,0,0,'862'),('2018-05-20',864,237,4,'副总经理',0,'2018-05-20 11:40:11',124,NULL,63,'2018-05-20 11:40:57',5,0,0,'863'),('2018-05-20',865,237,13,'审计部',0,'2018-05-20 11:40:57',42,NULL,66,'2018-05-20 11:43:42',4,0,0,'864'),('2018-05-20',866,237,10,'运营管理部',0,'2018-05-20 11:43:42',43,NULL,67,'2018-05-20 11:51:57',13,0,0,'865'),('2018-05-21',871,239,14,'数据信息部',0,'2018-05-21 13:30:05',39,NULL,60,'2018-05-21 13:34:30',0,0,0,'0'),('2018-05-21',872,239,14,'数据信息部',0,'2018-05-21 13:34:30',40,NULL,62,'2018-05-21 13:36:14',14,0,0,'871'),('2018-05-21',873,239,3,'资金运营部',0,'2018-05-21 13:36:14',41,NULL,65,'2018-05-21 13:37:52',14,0,0,'872'),('2018-05-21',874,239,10,'运营管理部',0,'2018-05-21 13:36:14',41,NULL,65,'2018-05-21 13:38:53',14,0,0,'872'),('2018-05-21',875,239,14,'数据信息部',0,'2018-05-21 13:38:53',40,NULL,191,'2018-05-21 13:40:09',14,0,0,'871'),('2018-05-21',876,239,2,'董事长总经理',0,'2018-05-21 13:40:09',124,NULL,63,'2018-05-21 13:40:58',14,0,0,'875'),('2018-05-21',877,239,14,'数据信息部',0,'2018-05-21 13:40:58',42,NULL,66,'2018-05-21 15:12:39',2,0,0,'876'),('2018-05-21',878,239,10,'运营管理部',0,'2018-05-21 15:12:39',43,NULL,67,'2018-05-21 15:14:45',14,0,0,'877'),('2018-05-21',879,240,10,'运营管理部',0,'2018-05-21 15:16:35',301,NULL,554,'2018-05-21 15:19:20',0,0,0,'0'),('2018-05-21',887,242,14,'数据信息部',0,'2018-05-21 15:37:28',39,NULL,60,'2018-05-21 15:38:58',0,0,0,'0'),('2018-05-21',888,242,14,'数据信息部',0,'2018-05-21 15:38:58',40,NULL,191,'2018-05-21 15:39:21',14,0,0,'887'),('2018-05-21',889,242,2,'董事长总经理',0,'2018-05-21 15:39:21',124,NULL,63,'2018-05-21 15:40:21',14,0,0,'888'),('2018-05-21',890,242,14,'数据信息部',0,'2018-05-21 15:40:21',42,NULL,NULL,NULL,2,0,0,'889'),('2018-04-01',892,57,10,'运营管理部',0,'2018-05-21 15:58:24',43,NULL,NULL,NULL,11,0,0,'470'),('2018-05-21',893,244,14,'数据信息部',0,'2018-05-21 16:12:40',45,NULL,68,'2018-05-21 16:13:39',0,0,0,'0'),('2018-05-21',894,244,14,'数据信息部',0,'2018-05-21 16:13:39',46,NULL,70,'2018-05-21 16:14:55',14,0,0,'893'),('2018-05-21',895,244,10,'运营管理部',0,'2018-05-21 16:14:55',47,NULL,73,'2018-05-21 17:02:40',14,0,0,'894'),('2018-05-21',896,244,12,'业务部',0,'2018-05-21 16:14:55',47,NULL,73,'2018-05-21 17:03:06',14,0,0,'894'),('2018-05-21',898,244,14,'数据信息部',0,'2018-05-21 17:03:06',46,NULL,71,'2018-05-21 18:37:34',14,0,0,'893'),('2018-05-21',905,244,14,'数据信息部',0,'2018-05-21 18:37:34',48,NULL,74,'2018-05-21 18:42:28',14,0,0,'898'),('2018-05-21',907,244,13,'审计部',0,'2018-05-21 18:42:28',49,NULL,75,'2018-05-21 18:43:59',14,0,0,'905'),('2018-05-21',908,244,14,'数据信息部',0,'2018-05-21 18:43:59',50,NULL,76,'2018-05-21 18:44:46',-2,0,0,'907'),('2018-02-04',919,19,14,'数据信息部',0,'2018-05-22 10:00:49',68,NULL,106,'2018-05-22 10:00:57',14,0,0,'115'),('2018-05-22',920,252,14,'数据信息部',0,'2018-05-22 10:01:50',63,NULL,95,'2018-05-22 10:02:59',0,0,0,'0'),('2018-05-22',921,252,14,'数据信息部',0,'2018-05-22 10:02:59',68,NULL,106,'2018-05-22 10:03:04',14,0,0,'920'),('2018-05-22',924,254,14,'数据信息部',0,'2018-05-22 10:08:05',34,NULL,621,'2018-05-22 10:08:05',0,0,0,'0'),('2018-05-22',925,255,14,'数据信息部',0,'2018-05-22 10:08:06',34,NULL,621,'2018-05-22 10:08:06',0,0,0,'0'),('2018-05-22',926,256,14,'数据信息部',0,'2018-05-22 10:08:06',34,NULL,621,'2018-05-22 10:08:06',0,0,0,'0'),('2018-05-22',927,257,14,'数据信息部',0,'2018-05-22 10:08:06',34,NULL,621,'2018-05-22 10:08:06',0,0,0,'0'),('2018-05-22',928,258,14,'数据信息部',0,'2018-05-22 10:08:06',34,NULL,621,'2018-05-22 10:08:06',0,0,0,'0'),('2018-05-22',931,259,14,'数据信息部',0,'2018-05-22 10:10:05',34,NULL,621,'2018-05-22 10:10:06',0,0,0,'0'),('2018-05-22',932,260,14,'数据信息部',0,'2018-05-22 10:10:06',34,NULL,621,'2018-05-22 10:10:06',0,0,0,'0'),('2018-05-22',933,261,14,'数据信息部',0,'2018-05-22 10:10:06',34,NULL,621,'2018-05-22 10:10:06',0,0,0,'0'),('2018-05-22',934,262,14,'数据信息部',0,'2018-05-22 10:10:06',34,NULL,621,'2018-05-22 10:10:06',0,0,0,'0'),('2018-05-22',935,263,14,'数据信息部',0,'2018-05-22 10:10:06',34,NULL,621,'2018-05-22 10:10:06',0,0,0,'0'),('2018-05-22',940,264,14,'数据信息部',0,'2018-05-22 10:27:42',187,NULL,387,'2018-05-22 10:28:00',0,0,0,'0'),('2018-05-22',941,264,4,'副总经理',0,'2018-05-22 10:28:00',188,NULL,393,'2018-05-22 10:28:19',14,0,0,'940'),('2018-05-22',942,264,2,'董事长总经理',0,'2018-05-22 10:28:19',192,NULL,397,'2018-05-22 10:28:36',4,0,0,'941'),('2018-05-22',943,264,9,'会计核算部',0,'2018-05-22 10:28:36',189,NULL,402,'2018-05-22 10:29:03',2,0,0,'942'),('2018-05-22',944,264,9,'会计核算部',0,'2018-05-22 10:29:03',190,NULL,404,'2018-05-22 10:30:32',9,0,0,'943'),('2018-05-22',945,265,14,'数据信息部',0,'2018-05-22 10:33:47',297,NULL,547,'2018-05-22 10:37:58',0,0,0,'0'),('2018-05-22',946,265,9,'会计核算部',0,'2018-05-22 10:37:58',298,NULL,549,'2018-05-22 10:39:36',14,0,0,'945'),('2018-05-22',947,266,14,'数据信息部',0,'2018-05-22 10:43:40',237,NULL,452,'2018-05-22 10:45:35',0,0,0,'0'),('2018-05-22',948,266,14,'数据信息部',0,'2018-05-22 10:45:35',238,NULL,453,'2018-05-22 10:45:51',14,0,0,'947'),('2018-05-22',949,266,4,'副总经理',0,'2018-05-22 10:45:51',239,NULL,455,'2018-05-22 10:46:18',14,0,0,'948'),('2018-05-22',950,266,5,'审计部',0,'2018-05-22 10:46:18',240,NULL,457,'2018-05-22 10:46:57',4,0,0,'949'),('2018-05-22',951,266,6,'风险管理部',0,'2018-05-22 10:46:57',241,NULL,459,'2018-05-22 10:47:47',5,0,0,'950'),('2018-05-22',952,266,9,'会计核算部',0,'2018-05-22 10:47:47',242,NULL,461,'2018-05-22 10:48:42',6,0,0,'951'),('2018-05-22',953,266,2,'董事长总经理',0,'2018-05-22 10:48:42',243,NULL,463,'2018-05-22 10:49:09',9,0,0,'952'),('2018-05-22',954,266,14,'数据信息部',0,'2018-05-22 10:49:09',244,NULL,466,'2018-05-22 10:52:30',2,0,0,'953'),('2018-05-22',955,267,14,'数据信息部',0,'2018-05-22 10:54:01',247,NULL,468,'2018-05-22 10:54:33',0,0,0,'0'),('2018-05-22',956,267,14,'数据信息部',0,'2018-05-22 10:54:33',248,NULL,469,'2018-05-22 10:54:47',14,0,0,'955'),('2018-05-22',957,267,4,'副总经理',0,'2018-05-22 10:54:47',249,NULL,472,'2018-05-22 10:55:12',14,0,0,'956'),('2018-05-22',958,268,14,'数据信息部',0,'2018-05-22 11:31:35',251,NULL,NULL,NULL,0,0,0,'0'),('2018-05-22',959,269,14,'数据信息部',0,'2018-05-22 11:32:29',251,NULL,590,'2018-05-22 11:33:06',0,0,0,'0'),('2018-05-22',960,269,14,'数据信息部',0,'2018-05-22 11:33:06',252,NULL,591,'2018-05-22 11:33:19',14,0,0,'959'),('2018-05-22',961,269,4,'副总经理',0,'2018-05-22 11:33:19',253,NULL,592,'2018-05-22 11:34:17',14,0,0,'960'),('2018-05-22',962,269,5,'审计部',0,'2018-05-22 11:34:17',254,NULL,595,'2018-05-22 11:35:01',4,0,0,'961'),('2018-05-22',963,269,9,'会计核算部',0,'2018-05-22 11:35:01',255,NULL,597,'2018-05-22 11:35:39',5,0,0,'962'),('2018-05-22',964,269,9,'会计核算部',0,'2018-05-22 11:35:39',256,NULL,600,'2018-05-22 11:35:47',9,0,0,'963'),('2018-05-22',965,269,3,'资金运营部',0,'2018-05-22 11:35:47',257,NULL,598,'2018-05-22 11:36:12',9,0,0,'964'),('2018-05-22',966,269,11,'运营管理部',0,'2018-05-22 11:36:12',258,NULL,606,'2018-05-22 11:38:10',3,0,0,'965'),('2018-05-22',967,270,12,'业务部',0,'2018-05-22 13:17:01',268,NULL,557,'2018-05-22 13:18:00',0,0,0,'0'),('2018-05-22',968,270,8,'业务部',0,'2018-05-22 13:18:00',269,NULL,558,'2018-05-22 13:18:59',12,0,0,'967'),('2018-05-22',969,270,4,'副总经理',0,'2018-05-22 13:18:59',270,NULL,NULL,NULL,8,0,0,'968'),('2018-05-22',971,271,14,'数据信息部',0,'2018-05-22 14:43:06',305,NULL,576,'2018-05-22 14:48:59',0,0,0,'0'),('2018-05-22',974,271,14,'数据信息部',0,'2018-05-22 14:48:59',306,NULL,578,'2018-05-22 14:49:05',14,0,0,'971'),('2018-05-22',975,271,4,'副总经理',0,'2018-05-22 14:49:05',307,NULL,580,'2018-05-22 14:49:37',14,0,0,'974'),('2018-05-22',976,271,14,'数据信息部',0,'2018-05-22 14:49:37',305,NULL,577,'2018-05-22 14:50:43',4,0,0,'975'),('2018-05-22',977,271,5,'审计部',0,'2018-05-22 14:50:43',311,NULL,585,'2018-05-22 14:51:19',14,0,0,'976'),('2018-05-22',978,271,14,'数据信息部',0,'2018-05-22 14:51:19',313,NULL,589,'2018-05-22 14:52:40',5,0,0,'977'),('2018-05-22',979,272,14,'数据信息部',0,'2018-05-22 14:52:40',268,NULL,NULL,NULL,0,0,0,'0'),('2018-05-22',980,273,14,'数据信息部',0,'2018-05-22 14:54:28',268,NULL,557,'2018-05-22 14:55:12',0,0,0,'0'),('2018-05-22',981,273,14,'数据信息部',0,'2018-05-22 14:55:12',269,NULL,558,'2018-05-22 14:55:18',14,0,0,'980'),('2018-05-22',982,273,4,'副总经理',0,'2018-05-22 14:55:18',270,NULL,609,'2018-05-22 14:55:57',14,0,0,'981'),('2018-05-22',983,273,5,'审计部',0,'2018-05-22 14:55:57',271,NULL,611,'2018-05-22 14:57:00',4,0,0,'982'),('2018-05-22',984,273,2,'董事长总经理',0,'2018-05-22 14:57:00',315,NULL,617,'2018-05-22 14:58:01',5,0,0,'983'),('2018-05-22',985,273,2,'董事长总经理',0,'2018-05-22 14:58:01',272,NULL,614,'2018-05-22 14:58:08',2,0,0,'984'),('2018-05-22',986,273,10,'运营管理部',0,'2018-05-22 14:58:08',275,NULL,615,'2018-05-22 15:01:04',2,0,0,'985'),('2018-05-22',987,274,10,'运营管理部',0,'2018-05-22 15:01:49',268,NULL,557,'2018-05-22 15:03:28',0,0,0,'0'),('2018-05-22',989,274,7,'运营管理部',0,'2018-05-22 15:03:28',269,NULL,558,'2018-05-22 15:04:11',10,0,0,'987'),('2018-05-22',990,274,7,'运营管理部',0,'2018-05-22 15:04:11',270,NULL,609,'2018-05-22 15:04:18',7,0,0,'989'),('2018-05-22',991,274,5,'审计部',0,'2018-05-22 15:04:18',271,NULL,611,'2018-05-22 15:05:06',7,0,0,'990'),('2018-05-22',992,274,2,'董事长总经理',0,'2018-05-22 15:05:06',315,NULL,617,'2018-05-22 15:05:58',5,0,0,'991'),('2018-05-22',993,274,2,'董事长总经理',0,'2018-05-22 15:05:58',272,NULL,614,'2018-05-22 15:06:04',2,0,0,'992'),('2018-05-22',994,274,10,'运营管理部',0,'2018-05-22 15:06:04',275,NULL,615,'2018-05-22 15:07:22',2,0,0,'993'),('2018-05-22',1017,279,14,'数据信息部',0,'2018-05-22 19:47:58',45,NULL,68,'2018-05-22 19:49:03',0,0,0,'0'),('2018-05-22',1018,279,14,'数据信息部',0,'2018-05-22 19:49:03',46,NULL,71,'2018-05-22 19:49:10',14,0,0,'1017'),('2018-05-22',1019,279,14,'数据信息部',0,'2018-05-22 19:49:10',48,'请及时反馈执行情况+',74,'2018-11-21 04:02:03',14,0,0,'1018'),('2018-05-24',1020,280,14,'数据信息部',0,'2018-05-24 07:09:14',316,NULL,622,'2018-05-24 09:42:19',0,0,0,'0'),('2018-05-24',1021,280,4,'副总经理',0,'2018-05-24 09:42:19',317,'同意',624,'2018-05-24 09:48:41',14,0,0,'1020'),('2018-05-24',1022,280,7,'运营管理部',0,'2018-05-24 09:42:19',317,'同意',624,'2018-05-24 09:50:53',14,0,0,'1020'),('2018-05-24',1023,280,14,'数据信息部',0,'2018-05-24 09:50:53',316,NULL,623,'2018-05-26 10:15:19',0,0,0,'0'),('2018-05-24',1026,280,13,'审计部',0,'2018-05-26 10:15:19',318,NULL,625,'2018-05-26 18:35:08',14,0,0,'1023'),('2018-05-24',1028,280,14,'数据信息部',0,'2018-05-26 18:35:08',321,NULL,630,'2018-05-26 21:49:51',13,0,0,'1026'),('2018-05-26',1029,281,14,'数据信息部',0,'2018-05-26 21:52:44',316,NULL,623,'2018-05-26 21:53:00',0,0,0,'0'),('2018-05-26',1030,281,15,'运营管理部',0,'2018-05-26 21:53:00',318,NULL,626,'2018-05-26 21:55:33',14,0,0,'1029'),('2018-05-26',1031,281,14,'数据信息部',0,'2018-05-26 21:55:33',319,NULL,628,'2018-05-26 21:56:42',15,0,0,'1030'),('2018-05-26',1032,281,4,'副总经理',0,'2018-05-26 21:56:42',320,'行',629,'2018-05-26 21:57:03',14,0,0,'1031'),('2018-05-26',1033,281,7,'运营管理部',0,'2018-05-26 21:56:42',320,'加点钱吧',629,'2018-05-26 21:57:24',14,0,0,'1031'),('2018-05-26',1034,281,14,'数据信息部',0,'2018-05-26 21:57:24',319,NULL,627,'2018-05-26 21:58:11',15,0,0,'1030'),('2018-05-26',1036,281,15,'运营管理部',0,'2018-05-26 21:58:11',318,NULL,625,'2018-05-27 01:29:39',14,0,0,'1034'),('2018-05-27',1037,282,7,'运营管理部',0,'2018-05-27 01:23:48',316,NULL,623,'2018-05-27 01:24:46',0,0,0,'0'),('2018-05-27',1038,282,14,'数据信息部',0,'2018-05-27 01:24:46',318,NULL,625,'2018-05-31 18:36:42',7,0,0,'1037'),('2018-05-26',1039,281,14,'数据信息部',0,'2018-05-27 01:29:39',321,NULL,630,'2018-05-27 01:30:40',15,0,0,'1036'),('2018-05-27',1042,282,7,'运营管理部',0,'2018-05-31 18:36:42',321,'领导意见\r\n1\r\n2',630,'2018-05-31 18:59:14',14,0,0,'1038'),('2018-05-31',1043,284,7,'运营管理部',0,'2018-05-31 19:15:57',316,NULL,623,'2018-05-31 19:30:02',0,0,0,'0'),('2018-05-31',1044,284,15,'运营管理部',0,'2018-05-31 19:30:02',318,NULL,626,'2018-05-31 19:33:42',7,0,0,'1043'),('2018-05-31',1046,284,7,'运营管理部',0,'2018-05-31 19:33:42',319,NULL,627,'2018-05-31 19:34:43',15,0,0,'1044'),('2018-05-31',1048,284,15,'运营管理部',0,'2018-05-31 19:34:43',318,NULL,625,'2018-05-31 19:37:03',7,0,0,'1046'),('2018-05-31',1049,284,7,'运营管理部',0,'2018-05-31 19:37:03',321,'领导没意见',630,'2018-05-31 20:32:21',15,0,0,'1048'),('2018-05-31',1050,285,14,'数据信息部',0,'2018-05-31 21:54:55',316,NULL,623,'2018-05-31 21:55:18',0,0,0,'0'),('2018-05-31',1051,285,13,'审计部',0,'2018-05-31 21:55:18',318,NULL,625,'2018-06-03 20:27:27',14,0,0,'1050'),('2018-05-31',1068,285,14,'数据信息部',0,'2018-06-03 20:27:27',321,NULL,NULL,NULL,13,0,0,'1051'),('2018-06-04',1069,289,13,'审计部',0,'2018-06-04 09:59:53',324,NULL,660,'2018-06-04 10:15:15',0,0,0,'0'),('2018-06-04',1071,289,5,'审计部',0,'2018-06-04 10:15:15',325,NULL,661,'2018-06-04 10:17:33',13,0,0,'1069'),('2018-06-04',1072,289,10,'运营管理部',0,'2018-06-04 10:17:33',326,NULL,664,'2018-06-04 10:18:57',5,0,0,'1071'),('2018-06-04',1073,289,8,'业务部',0,'2018-06-04 10:17:33',326,NULL,665,'2018-06-04 10:19:33',5,0,0,'1071'),('2018-06-04',1074,289,15,'运营管理部',0,'2018-06-04 10:18:57',326,NULL,665,'2018-06-04 10:20:46',10,0,0,'1072'),('2018-06-04',1075,289,11,'运营管理部',0,'2018-06-04 10:18:57',326,NULL,665,'2018-06-04 10:21:03',10,0,0,'1072'),('2018-06-04',1076,289,10,'运营管理部',0,'2018-06-04 10:21:03',326,'部门已办理',665,'2018-06-04 10:21:24',5,0,0,'1071'),('2018-06-04',1077,289,5,'审计部',0,'2018-06-04 10:21:24',325,NULL,662,'2018-06-04 10:21:50',13,0,0,'1069'),('2018-06-04',1078,289,5,'审计部',0,'2018-06-04 10:21:50',327,NULL,666,'2018-06-04 10:31:41',5,0,0,'1077'),('2018-06-04',1079,290,13,'审计部',0,'2018-06-04 10:56:52',324,NULL,660,'2018-06-04 10:57:27',0,0,0,'0'),('2018-06-04',1080,290,5,'审计部',0,'2018-06-04 10:57:27',325,NULL,662,'2018-06-04 11:00:49',13,0,0,'1079'),('2018-06-04',1081,290,5,'审计部',0,'2018-06-04 11:00:49',327,NULL,667,'2018-06-04 11:01:37',5,0,0,'1080'),('2018-06-04',1082,290,13,'审计部',0,'2018-06-04 11:01:37',324,NULL,660,'2018-06-04 11:02:26',5,0,0,'1081'),('2018-06-04',1083,290,5,'审计部',0,'2018-06-04 11:02:26',325,NULL,662,'2018-06-04 11:03:06',13,0,0,'1082'),('2018-06-04',1084,290,5,'审计部',0,'2018-06-04 11:03:06',327,NULL,666,'2018-06-04 11:05:49',5,0,0,'1083'),('2018-06-08',1091,292,13,'审计部',0,'2018-06-08 16:28:46',39,NULL,681,'2018-06-08 17:00:37',0,0,0,'0'),('2018-06-08',1092,292,5,'审计部',0,'2018-06-08 17:00:37',40,NULL,684,'2018-06-08 17:02:28',13,0,0,'1091'),('2018-06-08',1093,292,7,'运营管理部',0,'2018-06-08 17:02:28',331,NULL,691,'2018-06-08 17:03:26',5,0,0,'1092'),('2018-06-08',1094,292,2,'董事长总经理',0,'2018-06-08 17:03:26',124,'同意',687,'2018-06-08 17:03:38',7,0,0,'1093'),('2018-06-08',1095,292,13,'审计部',0,'2018-06-08 17:03:38',42,NULL,689,'2018-06-08 17:14:47',2,0,0,'1094'),('2018-06-08',1096,292,10,'运营管理部',0,'2018-06-08 17:14:47',43,NULL,690,'2018-06-08 17:19:27',13,0,0,'1095'),('2018-06-12',1097,293,14,'数据信息部',0,'2018-06-12 16:57:52',57,NULL,694,'2018-06-12 17:07:15',0,0,0,'0'),('2018-06-12',1098,293,14,'数据信息部',0,'2018-06-12 17:07:15',61,NULL,695,'2018-06-12 17:19:06',14,0,0,'1097'),('2018-06-12',1099,293,3,'资金运营部',0,'2018-06-12 17:19:06',332,NULL,696,'2018-06-12 17:21:59',14,0,0,'1098'),('2018-06-12',1100,293,8,'业务部',0,'2018-06-12 17:19:06',332,NULL,NULL,NULL,14,0,0,'1098'),('2018-06-12',1101,293,12,'业务部',0,'2018-06-12 17:19:06',332,NULL,NULL,NULL,14,0,0,'1098'),('2018-06-12',1102,293,14,'数据信息部',0,'2018-06-12 17:21:59',61,NULL,695,'2018-06-12 17:24:22',14,0,0,'1097'),('2018-06-12',1103,293,3,'资金运营部',0,'2018-06-12 17:24:22',332,NULL,697,'2018-06-12 17:24:44',14,0,0,'1102'),('2018-06-12',1104,293,8,'业务部',0,'2018-06-12 17:24:22',332,NULL,697,'2018-06-12 17:25:37',14,0,0,'1102'),('2018-06-12',1105,293,12,'业务部',0,'2018-06-12 17:24:22',332,'没意见',697,'2018-06-12 17:40:45',14,0,0,'1102'),('2018-06-12',1107,293,14,'数据信息部',0,'2018-06-12 17:40:45',333,NULL,698,'2018-06-12 20:46:11',-2,0,0,'1103,1104,1105'),('2018-06-12',1108,294,14,'数据信息部',0,'2018-06-12 21:55:29',57,NULL,694,'2018-06-12 21:55:39',0,0,0,'0'),('2018-06-12',1109,294,12,'业务部',0,'2018-06-12 21:55:39',61,NULL,NULL,NULL,14,0,0,'1108'),('2018-06-17',1110,295,14,'数据信息部',0,'2018-06-17 19:28:36',334,NULL,699,'2018-06-17 19:31:24',0,0,0,'0'),('2018-06-17',1111,295,10,'运营管理部',0,'2018-06-17 19:31:24',335,NULL,700,'2018-06-17 19:35:00',14,0,0,'1110'),('2018-06-17',1112,295,12,'业务部',0,'2018-06-17 19:35:00',336,'没问题',702,'2018-06-17 19:35:59',10,0,0,'1111'),('2018-06-17',1113,295,10,'运营管理部',0,'2018-06-17 19:35:59',337,NULL,704,'2018-06-17 19:37:59',12,0,0,'1112'),('2018-06-18',1114,296,14,'数据信息部',0,'2018-06-18 02:06:56',339,NULL,706,'2018-06-18 02:10:10',0,0,0,'0'),('2018-06-18',1115,296,14,'数据信息部',0,'2018-06-18 02:10:10',340,NULL,707,'2018-06-18 02:10:31',14,0,0,'1114'),('2018-06-18',1116,296,7,'运营管理部',0,'2018-06-18 02:10:31',341,NULL,709,'2018-06-18 02:19:48',14,0,0,'1115'),('2018-06-18',1117,296,10,'运营管理部',0,'2018-06-18 02:19:48',342,NULL,711,'2018-06-18 02:20:45',7,0,0,'1116'),('2018-06-18',1118,296,14,'数据信息部',0,'2018-06-18 02:20:45',343,'看完了',713,'2018-06-18 02:21:49',10,0,0,'1117'),('2018-06-18',1119,296,10,'运营管理部',0,'2018-06-18 02:21:49',344,NULL,714,'2018-06-18 02:22:55',14,0,0,'1118'),('2018-06-25',1160,301,12,'业务部',0,'2018-06-25 15:57:18',347,NULL,718,'2018-06-25 16:22:39',0,0,0,'0'),('2018-06-25',1161,301,8,'业务部',0,'2018-06-25 16:22:39',348,'同意',719,'2018-06-26 01:57:05',12,0,0,'1160'),('2018-06-25',1162,302,13,'审计部',0,'2018-06-25 22:02:47',324,NULL,660,'2018-06-25 22:04:18',0,0,0,'0'),('2018-06-25',1163,302,5,'审计部',0,'2018-06-25 22:04:18',325,NULL,662,'2018-06-25 22:05:14',13,0,0,'1162'),('2018-06-25',1164,302,5,'审计部',0,'2018-06-25 22:05:14',327,NULL,666,'2018-06-25 22:14:14',5,0,0,'1163'),('2018-06-25',1166,304,13,'审计部',0,'2018-06-25 22:14:14',268,NULL,557,'2018-06-25 23:34:19',0,0,0,'0'),('2018-06-25',1168,304,5,'审计部',0,'2018-06-25 23:34:19',269,'同意',558,'2018-06-25 23:35:36',13,0,0,'1166'),('2018-06-25',1169,304,5,'审计部',0,'2018-06-25 23:35:36',270,NULL,609,'2018-06-25 23:35:42',5,0,0,'1168'),('2018-06-25',1170,304,5,'审计部',0,'2018-06-25 23:35:42',271,NULL,611,'2018-06-25 23:35:49',5,0,0,'1169'),('2018-06-25',1171,304,2,'董事长总经理',0,'2018-06-25 23:35:49',315,'同意',617,'2018-06-25 23:36:09',5,0,0,'1170'),('2018-06-25',1172,304,2,'董事长总经理',0,'2018-06-25 23:36:09',272,NULL,614,'2018-06-25 23:36:14',2,0,0,'1171'),('2018-06-25',1173,304,10,'运营管理部',0,'2018-06-25 23:36:14',275,NULL,715,'2018-06-26 00:15:26',2,0,0,'1172'),('2018-06-25',1175,304,9,'会计核算部',0,'2018-06-26 00:15:26',346,NULL,716,'2018-06-26 00:15:43',10,0,0,'1173'),('2018-06-26',1176,305,12,'业务部',0,'2018-06-26 01:12:19',305,NULL,576,'2018-06-26 01:21:38',0,0,0,'0'),('2018-06-26',1178,305,8,'业务部',0,'2018-06-26 01:21:38',306,'同意',578,'2018-06-26 01:24:40',12,0,0,'1176'),('2018-06-26',1179,305,4,'副总经理',0,'2018-06-26 01:24:40',307,NULL,717,'2018-06-26 01:35:25',8,0,0,'1178'),('2018-06-26',1180,305,5,'审计部',0,'2018-06-26 01:35:25',311,'同意',585,'2018-06-26 01:36:10',4,0,0,'1179'),('2018-06-26',1181,305,12,'业务部',0,'2018-06-26 01:36:10',313,NULL,589,'2018-06-26 01:40:58',5,0,0,'1180'),('2018-06-26',1183,307,12,'业务部',0,'2018-06-26 01:40:58',268,NULL,557,'2018-06-26 01:45:33',0,0,0,'0'),('2018-06-26',1184,307,8,'业务部',0,'2018-06-26 01:45:33',269,NULL,558,'2018-06-26 01:48:23',12,0,0,'1183'),('2018-06-26',1185,307,4,'副总经理',0,'2018-06-26 01:48:23',270,'同意',609,'2018-06-26 01:49:17',8,0,0,'1184'),('2018-06-26',1186,307,5,'审计部',0,'2018-06-26 01:49:17',271,NULL,611,'2018-06-26 01:49:45',4,0,0,'1185'),('2018-06-26',1187,307,2,'董事长总经理',0,'2018-06-26 01:49:45',315,'可以',617,'2018-06-26 01:50:03',5,0,0,'1186'),('2018-06-26',1188,307,2,'董事长总经理',0,'2018-06-26 01:50:03',272,NULL,614,'2018-06-26 01:50:09',2,0,0,'1187'),('2018-06-26',1189,307,10,'运营管理部',0,'2018-06-26 01:50:09',275,NULL,715,'2018-06-26 01:52:13',2,0,0,'1188'),('2018-06-26',1191,307,9,'会计核算部',0,'2018-06-26 01:52:13',346,NULL,716,'2018-06-26 01:54:23',10,0,0,'1189'),('2018-06-25',1192,301,4,'副总经理',0,'2018-06-26 01:57:05',349,'好',721,'2018-06-26 02:00:22',8,0,0,'1161'),('2018-06-25',1193,301,5,'审计部',0,'2018-06-26 02:00:22',350,'没意见',723,'2018-06-26 02:01:07',4,0,0,'1192'),('2018-06-25',1194,301,12,'业务部',0,'2018-06-26 02:01:07',351,'啊啊啊',725,'2018-06-26 02:06:52',5,0,0,'1193'),('2018-06-26',1196,309,12,'业务部',0,'2018-06-26 02:06:53',268,NULL,557,'2018-08-19 02:53:23',0,0,0,'0'),('2018-06-26',1197,310,13,'审计部',0,'2018-06-26 02:09:28',268,NULL,557,'2018-06-26 02:10:39',0,0,0,'0'),('2018-06-26',1198,310,5,'审计部',0,'2018-06-26 02:10:39',269,NULL,558,'2018-06-26 02:12:46',13,0,0,'1197'),('2018-06-26',1199,310,5,'审计部',0,'2018-06-26 02:12:46',270,NULL,616,'2018-06-26 02:12:50',5,0,0,'1198'),('2018-06-26',1200,310,3,'资金运营部',0,'2018-06-26 02:12:50',314,'好',619,'2018-06-26 02:13:14',5,0,0,'1199'),('2018-06-26',1201,310,10,'运营管理部',0,'2018-06-26 02:13:14',275,NULL,715,'2018-06-26 02:14:38',3,0,0,'1200'),('2018-06-26',1203,310,9,'会计核算部',0,'2018-06-26 02:14:38',346,NULL,716,'2018-06-26 02:14:52',10,0,0,'1201'),('2018-06-26',1204,311,13,'审计部',0,'2018-06-26 09:58:21',324,NULL,660,'2018-06-26 13:33:05',0,0,0,'0'),('2018-06-26',1207,311,5,'审计部',0,'2018-06-26 13:33:05',325,NULL,NULL,NULL,13,0,0,'1204'),('2018-07-12',1223,316,2,'董事长总经理',0,'2018-07-12 17:11:50',353,'第一把',726,'2018-07-13 09:38:46',0,0,0,'0'),('2018-07-12',1224,316,14,'数据信息部',0,'2018-07-13 09:38:46',354,NULL,728,'2018-07-13 20:40:17',2,0,0,'1223'),('2018-07-12',1226,316,2,'董事长总经理',0,'2018-07-13 20:40:17',353,NULL,726,'2018-07-13 20:40:48',14,0,0,'1224'),('2018-07-12',1227,316,14,'数据信息部',0,'2018-07-13 20:40:48',354,NULL,728,'2018-07-13 21:08:04',2,0,0,'1226'),('2018-07-12',1231,316,2,'董事长总经理',0,'2018-07-13 21:08:04',353,NULL,726,'2018-07-13 21:08:29',14,0,0,'1227'),('2018-07-12',1232,316,14,'数据信息部',0,'2018-07-13 21:08:29',354,NULL,727,'2018-07-16 00:46:30',2,0,0,'1231'),('2018-07-16',1233,317,5,'审计部',0,'2018-07-16 00:51:18',353,NULL,726,'2018-07-16 00:53:49',0,0,0,'0'),('2018-07-16',1234,317,14,'数据信息部',0,'2018-07-16 00:53:49',354,NULL,NULL,NULL,5,0,0,'1233'),('2018-07-26',1235,318,15,'运营管理部',0,'2018-07-26 13:14:09',224,NULL,657,'2018-07-27 21:10:45',0,0,0,'0'),('2018-07-27',1236,319,15,'运营管理部',0,'2018-07-27 14:33:35',187,NULL,386,'2018-07-27 14:35:02',0,0,0,'0'),('2018-07-27',1237,319,7,'运营管理部',0,'2018-07-27 14:35:02',194,'同意',391,'2018-07-27 14:35:25',15,0,0,'1236'),('2018-07-27',1238,319,7,'运营管理部',0,'2018-07-27 14:35:25',188,NULL,393,'2018-07-27 14:35:29',7,0,0,'1237'),('2018-07-27',1239,319,2,'董事长总经理',0,'2018-07-27 14:35:29',192,'同意',397,'2018-07-27 14:35:42',7,0,0,'1238'),('2018-07-27',1240,319,9,'会计核算部',0,'2018-07-27 14:35:42',189,NULL,402,'2018-07-27 14:35:57',2,0,0,'1239'),('2018-07-27',1241,319,9,'会计核算部',0,'2018-07-27 14:35:57',190,NULL,404,'2018-07-27 14:37:32',9,0,0,'1240'),('2018-07-27',1244,321,15,'运营管理部',0,'2018-07-27 20:43:30',224,NULL,657,'2018-07-27 21:08:07',0,0,0,'0'),('2018-07-27',1245,321,10,'运营管理部',0,'2018-07-27 21:08:07',323,NULL,658,'2018-07-27 21:11:09',15,0,0,'1244'),('2018-07-26',1246,318,10,'运营管理部',0,'2018-07-27 21:10:45',323,NULL,658,'2018-07-27 21:11:18',15,0,0,'1235'),('2018-07-27',1247,321,7,'运营管理部',0,'2018-07-27 21:11:09',225,NULL,648,'2018-07-27 21:11:41',10,0,0,'1245'),('2018-07-26',1248,318,7,'运营管理部',0,'2018-07-27 21:11:18',225,NULL,648,'2018-07-27 21:11:49',10,0,0,'1246'),('2018-07-27',1249,321,9,'会计核算部',0,'2018-07-27 21:11:41',229,NULL,650,'2018-07-27 21:13:36',7,0,0,'1247'),('2018-07-26',1250,318,9,'会计核算部',0,'2018-07-27 21:11:49',229,NULL,650,'2018-07-27 21:14:06',7,0,0,'1248'),('2018-07-27',1251,321,9,'会计核算部',0,'2018-07-27 21:13:36',232,NULL,652,'2018-07-27 21:13:43',9,0,0,'1249'),('2018-07-27',1252,321,2,'董事长总经理',0,'2018-07-27 21:13:43',231,'同意',654,'2018-07-27 21:14:28',9,0,0,'1251'),('2018-07-26',1253,318,9,'会计核算部',0,'2018-07-27 21:14:06',232,NULL,652,'2018-07-27 21:14:12',9,0,0,'1250'),('2018-07-26',1254,318,2,'董事长总经理',0,'2018-07-27 21:14:12',231,'同意',654,'2018-07-27 21:14:36',9,0,0,'1253'),('2018-07-27',1255,321,15,'运营管理部',0,'2018-07-27 21:14:28',227,NULL,NULL,NULL,2,0,0,'1252'),('2018-07-26',1256,318,15,'运营管理部',0,'2018-07-27 21:14:36',227,NULL,NULL,NULL,2,0,0,'1254'),('2018-07-30',1257,322,15,'运营管理部',0,'2018-07-30 13:14:37',224,NULL,657,'2018-07-30 13:20:00',0,0,0,'0'),('2018-07-30',1258,322,10,'运营管理部',0,'2018-07-30 13:20:00',323,NULL,658,'2018-07-30 13:20:47',15,0,0,'1257'),('2018-07-30',1259,322,7,'运营管理部',0,'2018-07-30 13:20:47',225,NULL,648,'2018-07-30 13:21:04',10,0,0,'1258'),('2018-07-30',1260,322,9,'会计核算部',0,'2018-07-30 13:21:04',229,NULL,650,'2018-07-30 14:50:33',7,0,0,'1259'),('2018-07-30',1261,322,3,'资金运营部',0,'2018-07-30 14:50:33',232,NULL,652,'2018-07-30 14:50:53',9,0,0,'1260'),('2018-07-30',1262,322,2,'董事长总经理',0,'2018-07-30 14:50:53',231,'同意',654,'2018-07-30 14:51:10',3,0,0,'1261'),('2018-07-30',1263,322,15,'运营管理部',0,'2018-07-30 14:51:10',227,NULL,NULL,NULL,2,0,0,'1262'),('2018-07-31',1264,323,15,'运营管理部',0,'2018-07-31 05:12:23',224,NULL,657,'2018-07-31 05:19:14',0,0,0,'0'),('2018-07-31',1266,323,10,'运营管理部',0,'2018-07-31 05:19:14',323,NULL,658,'2018-07-31 05:20:18',15,0,0,'1264'),('2018-07-31',1267,323,7,'运营管理部',0,'2018-07-31 05:20:18',225,NULL,648,'2018-07-31 05:21:13',10,0,0,'1266'),('2018-07-31',1268,323,9,'会计核算部',0,'2018-07-31 05:21:13',229,NULL,650,'2018-07-31 05:22:24',7,0,0,'1267'),('2018-07-31',1269,323,3,'资金运营部',0,'2018-07-31 05:22:24',232,NULL,652,'2018-07-31 05:23:06',9,0,0,'1268'),('2018-07-31',1270,323,4,'总经理',0,'2018-07-31 05:23:06',231,NULL,654,'2018-07-31 05:23:45',3,0,0,'1269'),('2018-07-31',1271,323,15,'运营管理部',0,'2018-07-31 05:23:45',227,NULL,NULL,NULL,4,0,0,'1270'),('2018-08-01',1272,324,10,'运营管理部',0,'2018-08-01 23:53:06',288,NULL,533,'2018-08-01 23:54:08',0,0,0,'0'),('2018-08-01',1273,324,7,'运营管理部',0,'2018-08-01 23:54:08',289,NULL,534,'2018-08-01 23:54:48',10,0,0,'1272'),('2018-08-01',1274,324,7,'运营管理部',0,'2018-08-01 23:54:48',290,NULL,536,'2018-08-01 23:54:52',7,0,0,'1273'),('2018-08-01',1275,324,9,'会计核算部',0,'2018-08-01 23:54:52',291,NULL,538,'2018-08-01 23:55:13',7,0,0,'1274'),('2018-08-01',1276,324,9,'会计核算部',0,'2018-08-01 23:55:13',292,NULL,540,'2018-08-01 23:55:20',9,0,0,'1275'),('2018-08-01',1277,324,4,'总经理',0,'2018-08-01 23:55:20',293,NULL,542,'2018-08-01 23:55:39',9,0,0,'1276'),('2018-08-01',1278,324,11,'会计核算部',0,'2018-08-01 23:55:39',294,NULL,545,'2018-08-01 23:56:37',4,0,0,'1277'),('2018-08-02',1279,325,10,'运营管理部',0,'2018-08-02 00:19:29',224,NULL,646,'2018-08-02 00:37:09',0,0,0,'0'),('2018-08-02',1281,325,7,'运营管理部',0,'2018-08-02 00:37:09',225,NULL,648,'2018-08-02 00:37:29',10,0,0,'1279'),('2018-08-02',1282,325,9,'会计核算部',0,'2018-08-02 00:37:29',229,NULL,650,'2018-08-02 00:37:54',7,0,0,'1281'),('2018-08-02',1283,325,3,'资金运营部',0,'2018-08-02 00:37:54',232,NULL,652,'2018-08-02 00:38:16',9,0,0,'1282'),('2018-08-02',1284,325,4,'总经理',0,'2018-08-02 00:38:16',231,NULL,654,'2018-08-02 00:38:31',3,0,0,'1283'),('2018-08-02',1285,325,10,'运营管理部',0,'2018-08-02 00:38:31',227,NULL,656,'2018-08-02 00:39:58',4,0,0,'1284'),('2018-08-02',1286,326,10,'运营管理部',0,'2018-08-02 00:43:19',224,NULL,646,'2018-08-02 00:46:13',0,0,0,'0'),('2018-08-02',1288,326,7,'运营管理部',0,'2018-08-02 00:46:13',225,NULL,648,'2018-08-02 00:46:35',10,0,0,'1286'),('2018-08-02',1289,326,9,'会计核算部',0,'2018-08-02 00:46:35',229,NULL,650,'2018-08-02 00:46:53',7,0,0,'1288'),('2018-08-02',1290,326,3,'资金运营部',0,'2018-08-02 00:46:53',232,NULL,652,'2018-08-02 00:47:10',9,0,0,'1289'),('2018-08-02',1291,326,4,'总经理',0,'2018-08-02 00:47:10',231,NULL,654,'2018-08-02 00:47:29',3,0,0,'1290'),('2018-08-02',1292,326,10,'运营管理部',0,'2018-08-02 00:47:29',227,NULL,656,'2018-08-02 00:49:25',4,0,0,'1291'),('2018-08-02',1293,327,10,'运营管理部',0,'2018-08-02 00:52:32',187,NULL,386,'2018-08-02 00:52:49',0,0,0,'0'),('2018-08-02',1294,327,7,'运营管理部',0,'2018-08-02 00:52:49',194,NULL,391,'2018-08-02 00:53:02',10,0,0,'1293'),('2018-08-02',1295,327,7,'运营管理部',0,'2018-08-02 00:53:02',188,NULL,393,'2018-08-02 00:53:05',7,0,0,'1294'),('2018-08-02',1296,327,4,'总经理',0,'2018-08-02 00:53:05',192,NULL,397,'2018-08-02 00:53:53',7,0,0,'1295'),('2018-08-02',1297,327,9,'会计核算部',0,'2018-08-02 00:53:53',189,NULL,402,'2018-08-02 00:54:04',4,0,0,'1296'),('2018-08-02',1298,327,11,'会计核算部',0,'2018-08-02 00:54:04',190,NULL,404,'2018-08-02 00:54:50',9,0,0,'1297'),('2018-08-02',1299,328,10,'运营管理部',0,'2018-08-02 00:57:07',224,NULL,646,'2018-08-02 00:58:50',0,0,0,'0'),('2018-08-02',1300,328,7,'运营管理部',0,'2018-08-02 00:58:50',225,NULL,648,'2018-08-02 00:59:06',10,0,0,'1299'),('2018-08-02',1301,328,9,'会计核算部',0,'2018-08-02 00:59:06',229,NULL,650,'2018-08-02 01:09:13',7,0,0,'1300'),('2018-08-02',1302,328,3,'资金运营部',0,'2018-08-02 01:09:13',232,NULL,652,'2018-08-02 01:09:33',9,0,0,'1301'),('2018-08-02',1303,328,4,'总经理',0,'2018-08-02 01:09:33',231,NULL,654,'2018-08-02 01:10:21',3,0,0,'1302'),('2018-08-02',1304,328,10,'运营管理部',0,'2018-08-02 01:10:21',227,NULL,656,'2018-08-02 01:11:19',4,0,0,'1303'),('2018-08-06',1311,331,14,'数据信息部',0,'2018-08-06 14:37:04',45,NULL,733,'2018-08-06 14:37:36',0,0,0,'0'),('2018-08-06',1312,331,14,'数据信息部',0,'2018-08-06 14:37:36',46,NULL,734,'2018-08-06 14:37:42',14,0,0,'1311'),('2018-08-06',1313,331,4,'总经理',0,'2018-08-06 14:37:42',360,NULL,736,'2018-08-06 14:37:58',14,0,0,'1312'),('2018-08-06',1314,331,9,'会计核算部',0,'2018-08-06 14:37:58',361,NULL,738,'2018-08-06 14:38:12',4,0,0,'1313'),('2018-08-06',1315,331,14,'数据信息部',0,'2018-08-06 14:38:12',48,NULL,740,'2018-08-06 14:38:57',9,0,0,'1314'),('2018-08-06',1316,331,11,'会计核算部',0,'2018-08-06 14:38:57',49,'完成了',741,'2018-08-06 14:41:51',14,0,1,'1315'),('2018-08-06',1317,331,14,'数据信息部',0,'2018-08-06 14:41:51',50,'再。。。',743,'2018-08-06 14:42:51',-2,0,0,'1316'),('2018-08-06',1318,331,11,'会计核算部',0,'2018-08-06 14:42:51',49,'好了',741,'2018-08-06 14:43:12',14,0,1,'1317'),('2018-08-06',1319,331,14,'数据信息部',0,'2018-08-06 14:43:12',50,NULL,742,'2018-08-06 14:43:31',-2,0,0,'1318'),('2018-08-07',1320,332,15,'运营管理部',0,'2018-08-07 06:17:52',224,NULL,NULL,NULL,0,0,0,'0'),('2018-08-11',1328,335,14,'数据信息部',0,'2018-08-11 04:46:08',288,NULL,533,'2018-08-11 04:46:40',0,0,0,'0'),('2018-08-11',1329,335,14,'数据信息部',0,'2018-08-11 04:46:40',289,NULL,534,'2018-08-11 04:46:44',14,0,0,'1328'),('2018-08-11',1330,335,4,'总经理',0,'2018-08-11 04:46:44',290,NULL,536,'2018-08-11 04:47:08',14,0,0,'1329'),('2018-08-11',1331,335,9,'会计核算部',0,'2018-08-11 04:47:08',291,NULL,538,'2018-08-11 04:47:36',4,0,0,'1330'),('2018-08-11',1332,335,9,'会计核算部',0,'2018-08-11 04:47:36',292,NULL,540,'2018-08-11 04:47:40',9,0,0,'1331'),('2018-08-11',1333,335,4,'总经理',0,'2018-08-11 04:47:40',293,NULL,542,'2018-08-11 04:47:56',9,0,0,'1332'),('2018-08-11',1334,335,14,'数据信息部',0,'2018-08-11 04:47:56',294,NULL,545,'2018-08-11 05:03:42',4,0,0,'1333'),('2018-08-11',1335,336,14,'数据信息部',0,'2018-08-11 11:02:11',362,'正常',745,'2018-08-15 07:23:27',0,0,0,'0'),('2018-08-11',1336,337,16,'运营管理部',0,'2018-08-11 13:10:25',224,NULL,646,'2018-08-11 13:18:28',0,0,0,'0'),('2018-08-11',1337,337,7,'副总经理',0,'2018-08-11 13:18:28',225,NULL,648,'2018-08-11 13:18:53',16,0,0,'1336'),('2018-08-11',1338,337,9,'会计核算部',0,'2018-08-11 13:18:53',229,NULL,650,'2018-08-11 13:19:08',7,0,0,'1337'),('2018-08-11',1339,337,3,'副总经理',0,'2018-08-11 13:19:08',232,NULL,652,'2018-08-11 13:19:37',9,0,0,'1338'),('2018-08-11',1340,337,4,'总经理',0,'2018-08-11 13:19:37',231,NULL,654,'2018-08-11 13:19:50',3,0,0,'1339'),('2018-08-11',1341,337,16,'运营管理部',0,'2018-08-11 13:19:50',227,NULL,NULL,NULL,4,0,0,'1340'),('2018-08-11',1344,336,14,'数据信息部',0,'2018-08-15 07:23:27',363,NULL,746,'2018-08-15 07:23:36',14,0,0,'1335'),('2018-08-11',1345,336,7,'副总经理',0,'2018-08-15 07:23:36',364,'同意',748,'2018-08-15 08:26:47',14,0,0,'1344'),('2018-08-11',1346,336,5,'副总经理',0,'2018-08-15 08:26:47',365,NULL,750,'2018-08-15 08:27:41',7,0,0,'1345'),('2018-08-11',1347,336,3,'副总经理',0,'2018-08-15 08:27:41',366,NULL,753,'2018-08-15 08:28:24',5,0,0,'1346'),('2018-08-11',1348,336,4,'总经理',0,'2018-08-15 08:28:24',367,NULL,754,'2018-08-15 08:28:42',3,0,0,'1347'),('2018-08-11',1349,336,14,'数据信息部',0,'2018-08-15 08:28:42',368,NULL,756,'2018-08-15 13:24:38',4,0,0,'1348'),('2018-08-18',1350,339,12,'业务部',0,'2018-08-18 21:51:18',268,NULL,757,'2018-08-19 02:49:48',0,0,0,'0'),('2018-08-18',1352,339,8,'副总经理',0,'2018-08-19 02:49:48',269,NULL,758,'2018-08-19 02:55:37',12,0,0,'1350'),('2018-06-26',1353,309,8,'副总经理',0,'2018-08-19 02:53:23',269,NULL,558,'2018-08-19 02:55:48',12,0,0,'1196'),('2018-08-18',1354,339,4,'总经理',0,'2018-08-19 02:55:37',270,NULL,761,'2018-08-19 02:56:01',8,0,0,'1352'),('2018-06-26',1355,309,4,'总经理',0,'2018-08-19 02:55:48',270,NULL,609,'2018-08-19 02:56:07',8,0,0,'1353'),('2018-08-18',1356,339,5,'副总经理',0,'2018-08-19 02:56:01',271,NULL,765,'2018-08-19 02:56:24',4,0,0,'1354'),('2018-06-26',1357,309,5,'副总经理',0,'2018-08-19 02:56:07',271,NULL,611,'2018-08-19 02:56:36',4,0,0,'1355'),('2018-08-18',1358,339,4,'总经理',0,'2018-08-19 02:56:24',315,'同意',767,'2018-08-19 02:57:20',5,0,0,'1356'),('2018-06-26',1359,309,4,'总经理',0,'2018-08-19 02:56:36',315,NULL,617,'2018-08-19 02:57:27',5,0,0,'1357'),('2018-08-18',1360,339,10,'运营管理部',0,'2018-08-19 02:57:20',370,NULL,773,'2018-08-19 02:57:48',4,0,0,'1358'),('2018-06-26',1361,309,2,'董事长',0,'2018-08-19 02:57:27',272,NULL,614,'2018-08-19 03:12:04',4,0,0,'1359'),('2018-08-18',1362,339,10,'运营管理部',0,'2018-08-19 02:57:48',371,NULL,772,'2018-10-07 03:41:24',10,0,0,'1360'),('2018-06-26',1363,309,10,'运营管理部',0,'2018-08-19 03:12:04',275,NULL,NULL,NULL,2,0,0,'1361'),('2018-08-19',1364,340,14,'数据信息部',0,'2018-08-19 03:14:35',268,NULL,757,'2018-08-19 03:15:16',0,0,0,'0'),('2018-08-19',1365,340,14,'数据信息部',0,'2018-08-19 03:15:16',269,NULL,758,'2018-08-19 03:15:20',14,0,0,'1364'),('2018-08-19',1366,340,4,'总经理',0,'2018-08-19 03:15:20',270,NULL,761,'2018-08-19 03:15:31',14,0,0,'1365'),('2018-08-19',1367,340,5,'副总经理',0,'2018-08-19 03:15:31',271,NULL,765,'2018-08-19 03:16:14',4,0,0,'1366'),('2018-08-19',1368,340,4,'总经理',0,'2018-08-19 03:16:14',315,NULL,767,'2018-08-19 03:16:47',5,0,0,'1367'),('2018-08-19',1369,340,10,'运营管理部',0,'2018-08-19 03:16:47',370,NULL,NULL,NULL,4,0,0,'1368'),('2018-08-21',1370,341,13,'审计部',0,'2018-08-21 01:58:18',39,NULL,774,'2018-08-21 02:00:38',0,0,0,'0'),('2018-08-21',1371,341,5,'副总经理',0,'2018-08-21 02:00:38',40,NULL,775,'2018-08-21 02:03:27',13,0,0,'1370'),('2018-08-21',1372,341,7,'副总经理',0,'2018-08-21 02:03:27',331,'没意见',777,'2018-08-21 02:04:09',5,0,0,'1371'),('2018-08-21',1373,341,2,'董事长',0,'2018-08-21 02:04:09',372,'同意',779,'2018-08-21 02:04:36',7,0,0,'1372'),('2018-08-21',1374,341,13,'审计部',0,'2018-08-21 02:04:36',42,NULL,781,'2018-08-21 02:16:15',2,0,0,'1373'),('2018-08-21',1375,341,10,'运营管理部',0,'2018-08-21 02:16:15',43,NULL,782,'2018-08-21 02:19:27',13,0,0,'1374'),('2018-08-21',1378,344,12,'业务部',0,'2018-08-21 17:14:35',276,NULL,531,'2018-08-21 17:39:54',0,0,0,'0'),('2018-08-21',1380,344,4,'总经理',0,'2018-08-21 17:39:54',277,NULL,514,'2018-08-21 17:40:13',12,0,0,'1378'),('2018-08-21',1381,344,5,'副总经理',0,'2018-08-21 17:40:13',279,NULL,518,'2018-08-21 17:43:10',4,0,0,'1380'),('2018-08-21',1382,344,9,'会计核算部',0,'2018-08-21 17:43:10',280,NULL,520,'2018-08-21 17:44:06',5,0,0,'1381'),('2018-08-21',1383,344,3,'副总经理',0,'2018-08-21 17:44:06',281,NULL,522,'2018-08-21 17:44:42',9,0,0,'1382'),('2018-08-21',1384,344,4,'总经理',0,'2018-08-21 17:44:42',283,'同意',526,'2018-08-21 17:45:00',3,0,0,'1383'),('2018-08-21',1385,344,11,'会计核算部',0,'2018-08-21 17:45:00',284,NULL,529,'2018-08-21 18:14:39',4,0,0,'1384'),('2018-08-21',1386,345,12,'业务部',0,'2018-08-21 18:18:05',276,NULL,531,'2018-08-21 18:19:15',0,0,0,'0'),('2018-08-21',1387,345,4,'总经理',0,'2018-08-21 18:19:15',277,'可以',514,'2018-08-21 18:19:35',12,0,0,'1386'),('2018-08-21',1388,345,5,'副总经理',0,'2018-08-21 18:19:35',279,'风控审核通过',518,'2018-08-21 18:20:48',4,0,0,'1387'),('2018-08-21',1389,345,9,'会计核算部',0,'2018-08-21 18:20:48',280,'会计审核通过',520,'2018-08-21 18:21:12',5,0,0,'1388'),('2018-08-21',1390,345,3,'副总经理',0,'2018-08-21 18:21:12',281,'财务风控审核通过',522,'2018-08-21 18:21:55',9,0,0,'1389'),('2018-08-21',1391,345,4,'总经理',0,'2018-08-21 18:21:55',283,'同意',526,'2018-08-21 18:22:12',3,0,0,'1390'),('2018-08-21',1392,345,11,'会计核算部',0,'2018-08-21 18:22:12',284,NULL,529,'2018-08-21 18:23:30',4,0,0,'1391'),('2018-08-21',1393,346,14,'数据信息部',0,'2018-08-21 18:31:48',276,NULL,531,'2018-08-21 18:32:35',0,0,0,'0'),('2018-08-21',1394,346,4,'总经理',0,'2018-08-21 18:32:35',277,NULL,514,'2018-08-21 18:33:06',14,0,0,'1393'),('2018-08-21',1395,346,5,'副总经理',0,'2018-08-21 18:33:06',279,NULL,518,'2018-08-21 18:33:54',4,0,0,'1394'),('2018-08-21',1396,346,9,'会计核算部',0,'2018-08-21 18:33:54',280,'会计审核通过',520,'2018-08-21 18:34:16',5,0,0,'1395'),('2018-08-21',1397,346,3,'副总经理',0,'2018-08-21 18:34:16',281,NULL,522,'2018-08-21 18:34:35',9,0,0,'1396'),('2018-08-21',1398,346,4,'总经理',0,'2018-08-21 18:34:35',283,'同意',526,'2018-08-21 18:35:02',3,0,0,'1397'),('2018-08-21',1399,346,11,'会计核算部',0,'2018-08-21 18:35:02',284,NULL,529,'2018-08-21 18:45:08',4,0,0,'1398'),('2018-08-21',1400,347,12,'业务部',0,'2018-08-21 19:04:56',276,NULL,531,'2018-08-21 19:18:05',0,0,0,'0'),('2018-08-21',1401,347,4,'总经理',0,'2018-08-21 19:18:05',277,NULL,514,'2018-08-21 19:18:34',12,0,0,'1400'),('2018-08-21',1402,347,5,'副总经理',0,'2018-08-21 19:18:34',279,'合规审核通过',518,'2018-08-21 19:19:17',4,0,0,'1401'),('2018-08-21',1403,347,9,'会计核算部',0,'2018-08-21 19:19:17',280,'会计审核通过',520,'2018-08-21 19:20:04',5,0,0,'1402'),('2018-08-21',1404,347,3,'副总经理',0,'2018-08-21 19:20:04',281,NULL,522,'2018-08-21 19:21:05',9,0,0,'1403'),('2018-08-21',1405,347,4,'总经理',0,'2018-08-21 19:21:05',283,'同意',526,'2018-08-21 19:21:33',3,0,0,'1404'),('2018-08-21',1406,347,11,'会计核算部',0,'2018-08-21 19:21:33',284,NULL,529,'2018-08-21 19:22:43',4,0,0,'1405'),('2018-08-21',1407,348,12,'业务部',0,'2018-08-21 19:30:13',276,NULL,531,'2018-08-21 19:30:30',0,0,0,'0'),('2018-08-21',1408,348,4,'总经理',0,'2018-08-21 19:30:30',277,NULL,514,'2018-08-21 19:31:09',12,0,0,'1407'),('2018-08-21',1409,348,5,'副总经理',0,'2018-08-21 19:31:09',279,'合规审核通过',518,'2018-08-21 19:32:05',4,0,0,'1408'),('2018-08-21',1410,348,9,'会计核算部',0,'2018-08-21 19:32:05',280,'会计审核通过',520,'2018-08-21 19:32:28',5,0,0,'1409'),('2018-08-21',1411,348,3,'副总经理',0,'2018-08-21 19:32:28',281,NULL,522,'2018-08-21 19:32:48',9,0,0,'1410'),('2018-08-21',1412,348,4,'总经理',0,'2018-08-21 19:32:48',283,'没问题',526,'2018-08-21 19:33:14',3,0,0,'1411'),('2018-08-21',1413,348,11,'会计核算部',0,'2018-08-21 19:33:14',284,NULL,529,'2018-08-21 19:34:32',4,0,0,'1412'),('2018-08-21',1414,349,12,'业务部',0,'2018-08-21 19:36:42',276,NULL,531,'2018-08-21 19:39:16',0,0,0,'0'),('2018-08-21',1415,349,4,'总经理',0,'2018-08-21 19:39:16',277,NULL,514,'2018-08-21 19:40:59',12,0,0,'1414'),('2018-08-21',1416,349,5,'副总经理',0,'2018-08-21 19:40:59',279,'合规审核通过',518,'2018-08-21 19:41:13',4,0,0,'1415'),('2018-08-21',1417,349,9,'会计核算部',0,'2018-08-21 19:41:13',280,'会计审核通过',520,'2018-08-21 19:41:27',5,0,0,'1416'),('2018-08-21',1418,349,3,'副总经理',0,'2018-08-21 19:41:27',281,NULL,522,'2018-08-21 19:42:17',9,0,0,'1417'),('2018-08-21',1419,349,4,'总经理',0,'2018-08-21 19:42:17',283,NULL,526,'2018-08-21 19:42:32',3,0,0,'1418'),('2018-08-21',1420,349,11,'会计核算部',0,'2018-08-21 19:42:32',284,NULL,529,'2018-08-21 19:43:50',4,0,0,'1419'),('2018-08-23',1421,350,12,'业务部',0,'2018-08-23 08:24:49',288,NULL,533,'2018-08-23 08:25:30',0,0,0,'0'),('2018-08-23',1422,350,8,'副总经理',0,'2018-08-23 08:25:30',289,NULL,534,'2018-08-23 08:25:43',12,0,0,'1421'),('2018-08-23',1423,350,4,'总经理',0,'2018-08-23 08:25:43',290,NULL,536,'2018-08-23 08:25:55',8,0,0,'1422'),('2018-08-23',1424,350,9,'会计核算部',0,'2018-08-23 08:25:55',291,NULL,538,'2018-08-23 08:27:06',4,0,0,'1423'),('2018-08-23',1425,350,9,'会计核算部',0,'2018-08-23 08:27:06',292,NULL,540,'2018-08-23 08:27:11',9,0,0,'1424'),('2018-08-23',1426,350,4,'总经理',0,'2018-08-23 08:27:11',293,NULL,542,'2018-08-23 08:27:39',9,0,0,'1425'),('2018-08-23',1427,350,12,'业务部',0,'2018-08-23 08:27:39',294,NULL,NULL,NULL,4,0,0,'1426'),('2018-08-23',1428,351,12,'业务部',0,'2018-08-23 10:24:29',362,NULL,745,'2018-08-23 10:27:40',0,0,0,'0'),('2018-08-23',1429,351,8,'副总经理',0,'2018-08-23 10:27:40',363,NULL,746,'2018-08-23 10:27:54',12,0,0,'1428'),('2018-08-23',1430,351,7,'副总经理',0,'2018-08-23 10:27:54',364,NULL,748,'2018-08-23 10:28:17',8,0,0,'1429'),('2018-08-23',1431,351,5,'副总经理',0,'2018-08-23 10:28:17',365,NULL,750,'2018-08-23 10:28:30',7,0,0,'1430'),('2018-08-23',1432,351,3,'副总经理',0,'2018-08-23 10:28:30',366,NULL,753,'2018-08-23 10:28:44',5,0,0,'1431'),('2018-08-23',1433,351,4,'总经理',0,'2018-08-23 10:28:44',367,NULL,754,'2018-08-23 10:28:57',3,0,0,'1432'),('2018-08-23',1434,351,12,'业务部',0,'2018-08-23 10:28:57',368,NULL,NULL,NULL,4,0,0,'1433'),('2018-08-23',1435,352,12,'业务部',0,'2018-08-23 10:34:26',276,NULL,531,'2018-08-23 10:34:37',0,0,0,'0'),('2018-08-23',1436,352,4,'总经理',0,'2018-08-23 10:34:37',277,NULL,514,'2018-08-23 10:34:51',12,0,0,'1435'),('2018-08-23',1437,352,5,'副总经理',0,'2018-08-23 10:34:51',279,'合规审核通过',518,'2018-08-23 10:35:23',4,0,0,'1436'),('2018-08-23',1438,352,9,'会计核算部',0,'2018-08-23 10:35:23',280,'会计审核通过',520,'2018-08-23 10:35:42',5,0,0,'1437'),('2018-08-23',1439,352,3,'副总经理',0,'2018-08-23 10:35:42',281,NULL,522,'2018-08-23 10:36:00',9,0,0,'1438'),('2018-08-23',1440,352,4,'总经理',0,'2018-08-23 10:36:00',283,NULL,526,'2018-08-23 10:36:13',3,0,0,'1439'),('2018-08-23',1441,352,11,'会计核算部',0,'2018-08-23 10:36:13',284,NULL,NULL,NULL,4,0,0,'1440'),('2018-08-23',1442,353,12,'业务部',0,'2018-08-23 10:40:20',224,NULL,632,'2018-08-23 10:43:50',0,0,0,'0'),('2018-08-23',1444,353,8,'副总经理',0,'2018-08-23 10:43:50',225,NULL,637,'2018-08-23 10:44:22',12,0,0,'1442'),('2018-08-23',1445,353,9,'会计核算部',0,'2018-08-23 10:44:22',229,NULL,639,'2018-08-23 10:44:36',8,0,0,'1444'),('2018-08-23',1446,353,3,'副总经理',0,'2018-08-23 10:44:36',232,NULL,641,'2018-08-23 10:44:54',9,0,0,'1445'),('2018-08-23',1447,353,4,'总经理',0,'2018-08-23 10:44:54',231,NULL,643,'2018-08-23 10:45:06',3,0,0,'1446'),('2018-08-23',1448,353,12,'业务部',0,'2018-08-23 10:45:06',227,NULL,NULL,NULL,4,0,0,'1447'),('2018-08-23',1449,354,12,'业务部',0,'2018-08-23 10:55:05',297,NULL,547,'2018-08-23 11:28:22',0,0,0,'0'),('2018-08-23',1451,354,11,'会计核算部',0,'2018-08-23 11:28:22',298,NULL,NULL,NULL,12,0,0,'1449'),('2018-08-23',1452,355,12,'业务部',0,'2018-08-23 14:52:10',347,NULL,718,'2018-08-23 14:54:49',0,0,0,'0'),('2018-08-23',1453,355,8,'副总经理',0,'2018-08-23 14:54:49',348,NULL,719,'2018-08-23 14:55:32',12,0,0,'1452'),('2018-08-23',1454,355,4,'总经理',0,'2018-08-23 14:55:32',349,NULL,721,'2018-08-23 14:55:58',8,0,0,'1453'),('2018-08-23',1455,355,5,'副总经理',0,'2018-08-23 14:55:58',350,NULL,723,'2018-08-23 14:56:29',4,0,0,'1454'),('2018-08-23',1456,355,12,'业务部',0,'2018-08-23 14:56:29',351,NULL,NULL,NULL,5,0,0,'1455'),('2018-08-31',1457,356,13,'审计部',0,'2018-08-31 22:32:59',39,NULL,681,'2018-08-31 22:46:10',0,0,0,'0'),('2018-08-31',1458,356,5,'副总经理',0,'2018-08-31 22:46:10',40,NULL,684,'2018-08-31 22:47:55',13,0,0,'1457'),('2018-08-31',1459,356,7,'副总经理',0,'2018-08-31 22:47:55',331,NULL,691,'2018-08-31 22:49:32',5,0,0,'1458'),('2018-08-31',1460,356,4,'总经理',0,'2018-08-31 22:49:32',124,NULL,687,'2018-08-31 22:50:52',7,0,0,'1459'),('2018-08-31',1461,356,13,'审计部',0,'2018-08-31 22:50:52',42,NULL,689,'2018-08-31 22:54:07',4,0,0,'1460'),('2018-08-31',1462,356,10,'运营管理部',0,'2018-08-31 22:54:07',43,NULL,NULL,NULL,13,0,0,'1461'),('2018-08-31',1463,357,2,'董事长',0,'2018-08-31 23:28:58',316,NULL,623,'2018-08-31 23:29:38',0,0,0,'0'),('2018-08-31',1464,357,5,'副总经理',0,'2018-08-31 23:29:38',318,NULL,625,'2018-08-31 23:32:56',2,0,0,'1463'),('2018-08-31',1465,357,2,'董事长',0,'2018-08-31 23:32:56',321,NULL,NULL,NULL,5,0,0,'1464'),('2018-09-03',1466,358,12,'业务部',0,'2018-09-03 16:20:05',305,NULL,576,'2018-09-03 16:20:48',0,0,0,'0'),('2018-09-03',1467,358,8,'副总经理',0,'2018-09-03 16:20:48',306,NULL,578,'2018-09-03 16:23:40',12,0,0,'1466'),('2018-09-03',1468,358,4,'总经理',0,'2018-09-03 16:23:40',307,NULL,717,'2018-09-03 16:24:22',8,0,0,'1467'),('2018-09-03',1469,358,5,'副总经理',0,'2018-09-03 16:24:22',311,NULL,585,'2018-09-03 16:24:38',4,0,0,'1468'),('2018-09-03',1470,358,12,'业务部',0,'2018-09-03 16:24:38',313,NULL,NULL,NULL,5,0,0,'1469'),('2018-09-07',1472,360,13,'审计部',0,'2018-09-07 12:24:49',268,NULL,NULL,NULL,0,0,0,'0'),('2018-09-07',1477,363,16,'运营管理部',0,'2018-09-07 18:00:45',356,NULL,729,'2018-09-07 18:08:34',0,0,0,'0'),('2018-09-07',1478,364,16,'运营管理部',0,'2018-09-07 18:02:50',356,NULL,729,'2018-09-07 18:08:49',0,0,0,'0'),('2018-09-07',1479,363,7,'副总经理',0,'2018-09-07 18:08:34',357,NULL,744,'2018-09-07 18:09:04',16,0,0,'1477'),('2018-09-07',1480,364,7,'副总经理',0,'2018-09-07 18:08:49',357,NULL,744,'2018-09-07 18:09:11',16,0,0,'1478'),('2018-09-07',1481,365,15,'运营管理部',0,'2018-09-07 20:12:44',224,NULL,657,'2018-09-07 20:14:47',0,0,0,'0'),('2018-09-07',1482,365,10,'运营管理部',0,'2018-09-07 20:14:47',323,'同意报销',658,'2018-09-13 06:03:36',15,0,0,'1481'),('2018-09-07',1483,366,15,'运营管理部',0,'2018-09-07 20:29:26',224,NULL,657,'2018-09-12 10:54:18',0,0,0,'0'),('2018-09-07',1484,366,10,'运营管理部',0,'2018-09-12 10:54:18',323,'同意报销',658,'2018-09-13 06:03:36',15,0,0,'1483'),('2018-09-12',1485,367,17,'运营管理部',0,'2018-09-12 10:55:45',224,NULL,657,'2018-09-12 10:57:21',0,0,0,'0'),('2018-09-12',1486,367,10,'运营管理部',0,'2018-09-12 10:57:21',323,'同意报销',658,'2018-09-13 06:03:36',17,0,0,'1485'),('2018-09-12',1487,367,7,'副总经理',0,'2018-09-13 06:03:36',225,'没问题',648,'2018-09-13 06:05:37',10,0,0,'1486'),('2018-09-07',1488,366,7,'副总经理',0,'2018-09-13 06:03:36',225,'没问题',648,'2018-09-13 06:05:37',10,0,0,'1484'),('2018-09-07',1489,365,7,'副总经理',0,'2018-09-13 06:03:36',225,'没问题',648,'2018-09-13 06:05:37',10,0,0,'1482'),('2018-09-12',1490,367,9,'会计核算部',0,'2018-09-13 06:05:37',229,'审核通过',650,'2018-09-13 06:08:53',7,0,0,'1487'),('2018-09-07',1491,366,9,'会计核算部',0,'2018-09-13 06:05:37',229,'审核通过',650,'2018-09-13 06:08:53',7,0,0,'1488'),('2018-09-07',1492,365,9,'会计核算部',0,'2018-09-13 06:05:37',229,'审核通过',650,'2018-09-13 06:08:53',7,0,0,'1489'),('2018-09-12',1493,367,3,'副总经理',0,'2018-09-13 06:08:53',232,NULL,652,'2018-09-13 06:09:31',9,0,0,'1490'),('2018-09-07',1494,366,3,'副总经理',0,'2018-09-13 06:08:53',232,NULL,652,'2018-09-13 06:09:31',9,0,0,'1491'),('2018-09-07',1495,365,3,'副总经理',0,'2018-09-13 06:08:53',232,NULL,652,'2018-09-13 06:09:32',9,0,0,'1492'),('2018-09-12',1496,367,4,'总经理',0,'2018-09-13 06:09:31',231,'ok',NULL,NULL,3,0,0,'1493'),('2018-09-07',1497,366,4,'总经理',0,'2018-09-13 06:09:31',231,'ok',654,'2018-12-12 00:20:09',3,0,0,'1494'),('2018-09-07',1498,365,4,'总经理',0,'2018-09-13 06:09:32',231,'ok',654,'2018-10-03 13:36:00',3,0,0,'1495'),('2018-09-28',1499,368,13,'审计部',0,'2018-09-28 11:18:06',224,NULL,634,'2018-10-03 13:01:58',0,0,0,'0'),('2018-10-03',1501,369,14,'数据信息部',0,'2018-10-03 11:29:55',224,NULL,634,'2018-11-21 21:19:42',0,0,0,'0'),('2018-09-28',1503,368,9,'会计核算部',0,'2018-10-03 13:01:58',229,NULL,639,'2018-10-03 13:11:56',13,0,0,'1499'),('2018-09-28',1504,368,3,'副总经理',0,'2018-10-03 13:11:56',232,NULL,641,'2018-10-03 13:35:22',9,0,0,'1503'),('2018-09-28',1505,368,4,'总经理',0,'2018-10-03 13:35:22',231,'同意报销',643,'2018-10-03 13:36:36',3,0,0,'1504'),('2018-09-07',1506,365,15,'运营管理部',0,'2018-10-03 13:36:00',227,NULL,NULL,NULL,4,0,0,'1498'),('2018-09-28',1507,368,13,'审计部',0,'2018-10-03 13:36:36',227,NULL,NULL,NULL,4,0,0,'1505'),('2018-10-06',1508,370,12,'业务部',0,'2018-10-06 16:34:03',224,NULL,632,'2018-10-06 17:29:21',0,0,0,'0'),('2018-10-06',1509,371,12,'业务部',0,'2018-10-06 16:49:42',237,NULL,452,'2018-10-06 16:50:51',0,0,0,'0'),('2018-10-06',1510,371,8,'副总经理',0,'2018-10-06 16:50:51',238,NULL,453,'2018-10-06 16:52:33',12,0,0,'1509'),('2018-10-06',1511,371,4,'总经理',0,'2018-10-06 16:52:33',239,NULL,455,'2018-10-06 16:52:47',8,0,0,'1510'),('2018-10-06',1512,371,5,'副总经理',0,'2018-10-06 16:52:47',240,NULL,457,'2018-10-07 01:26:47',4,0,0,'1511'),('2018-10-06',1513,370,8,'副总经理',0,'2018-10-06 17:29:21',225,NULL,637,'2018-10-06 17:29:42',12,0,0,'1508'),('2018-10-06',1514,370,9,'会计核算部',0,'2018-10-06 17:29:42',229,NULL,639,'2018-10-06 17:30:26',8,0,0,'1513'),('2018-10-06',1515,370,3,'副总经理',0,'2018-10-06 17:30:26',232,NULL,641,'2018-10-06 17:30:43',9,0,0,'1514'),('2018-10-06',1516,370,4,'总经理',0,'2018-10-06 17:30:43',231,NULL,643,'2018-10-06 17:30:59',3,0,0,'1515'),('2018-10-06',1517,370,12,'业务部',0,'2018-10-06 17:30:59',227,NULL,NULL,NULL,4,0,0,'1516'),('2018-10-06',1518,371,5,'副总经理',0,'2018-10-07 01:26:47',241,NULL,459,'2018-10-07 01:26:52',5,0,0,'1512'),('2018-10-06',1519,371,9,'会计核算部',0,'2018-10-07 01:26:52',242,NULL,461,'2018-10-07 01:27:17',5,0,0,'1518'),('2018-10-06',1520,371,2,'董事长',0,'2018-10-07 01:27:17',243,'同意立项',463,'2018-10-07 01:28:19',9,0,0,'1519'),('2018-10-06',1521,371,12,'业务部',0,'2018-10-07 01:28:19',244,NULL,466,'2018-10-07 01:31:10',2,0,0,'1520'),('2018-10-07',1522,372,12,'业务部',0,'2018-10-07 01:36:04',247,NULL,468,'2018-10-07 01:39:24',0,0,0,'0'),('2018-10-07',1523,372,8,'副总经理',0,'2018-10-07 01:39:24',248,NULL,469,'2018-10-07 01:39:37',12,0,0,'1522'),('2018-10-07',1524,372,4,'总经理',0,'2018-10-07 01:39:37',249,'同意',472,'2018-10-07 01:39:54',8,0,0,'1523'),('2018-10-07',1525,373,12,'业务部',0,'2018-10-07 02:40:41',251,NULL,590,'2018-10-07 02:41:18',0,0,0,'0'),('2018-10-07',1526,373,8,'副总经理',0,'2018-10-07 02:41:18',252,'通过',591,'2018-10-07 02:42:49',12,0,0,'1525'),('2018-10-07',1527,373,4,'总经理',0,'2018-10-07 02:42:49',253,'着合规审查',592,'2018-10-07 02:43:26',8,0,0,'1526'),('2018-10-07',1528,373,5,'副总经理',0,'2018-10-07 02:43:26',254,'没问题',595,'2018-10-07 02:44:11',4,0,0,'1527'),('2018-10-07',1529,373,9,'会计核算部',0,'2018-10-07 02:44:11',255,NULL,597,'2018-10-07 02:44:40',5,0,0,'1528'),('2018-10-07',1530,373,3,'副总经理',0,'2018-10-07 02:44:40',256,'同意',600,'2018-10-07 02:46:18',9,0,0,'1529'),('2018-10-07',1531,373,4,'总经理',0,'2018-10-07 02:46:18',257,NULL,598,'2018-10-07 02:46:41',3,0,0,'1530'),('2018-10-07',1532,373,14,'数据信息部',0,'2018-10-07 02:46:41',258,NULL,603,'2018-10-07 02:48:31',4,0,0,'1531'),('2018-10-07',1533,373,4,'总经理',0,'2018-10-07 02:48:31',259,'同意',607,'2018-10-07 02:48:48',14,0,0,'1532'),('2018-10-07',1534,373,14,'数据信息部',0,'2018-10-07 02:48:48',258,NULL,604,'2018-10-07 02:49:00',4,0,0,'1533'),('2018-10-07',1535,373,2,'董事长',0,'2018-10-07 02:49:00',260,'同意',608,'2018-10-07 02:49:14',14,0,0,'1534'),('2018-10-07',1536,373,14,'数据信息部',0,'2018-10-07 02:49:14',258,NULL,606,'2018-10-07 02:50:01',2,0,0,'1535'),('2018-10-07',1537,374,14,'数据信息部',0,'2018-10-07 02:55:52',263,NULL,494,'2018-10-07 03:01:34',0,0,0,'0'),('2018-10-07',1538,374,4,'总经理',0,'2018-10-07 03:01:34',264,'同意实施方案',498,'2018-10-07 03:01:55',14,0,0,'1537'),('2018-10-07',1539,374,14,'数据信息部',0,'2018-10-07 03:01:55',263,NULL,495,'2018-10-07 03:02:17',0,0,0,'0'),('2018-10-07',1540,374,2,'董事长',0,'2018-10-07 03:02:17',265,'同意',499,'2018-10-07 03:02:31',14,0,0,'1539'),('2018-10-07',1541,374,14,'数据信息部',0,'2018-10-07 03:02:31',263,NULL,497,'2018-10-07 03:03:25',0,0,0,'0'),('2018-10-07',1542,375,12,'业务部',0,'2018-10-07 03:15:06',305,NULL,576,'2018-10-07 03:16:37',0,0,0,'0'),('2018-10-07',1543,375,8,'副总经理',0,'2018-10-07 03:16:37',306,NULL,578,'2018-10-07 03:17:04',12,0,0,'1542'),('2018-10-07',1544,375,4,'总经理',0,'2018-10-07 03:17:04',307,'同意',717,'2018-10-07 03:17:21',8,0,0,'1543'),('2018-10-07',1545,375,5,'副总经理',0,'2018-10-07 03:17:21',311,'没问题',585,'2018-10-07 03:18:13',4,0,0,'1544'),('2018-10-07',1546,375,12,'业务部',0,'2018-10-07 03:18:13',313,NULL,589,'2018-10-07 20:14:14',5,0,0,'1545'),('2018-10-07',1556,377,12,'业务部',0,'2018-10-07 03:48:09',276,NULL,531,'2018-10-07 03:49:35',0,0,0,'0'),('2018-10-07',1557,377,4,'总经理',0,'2018-10-07 03:49:35',277,NULL,514,'2018-10-07 03:50:05',12,0,0,'1556'),('2018-10-07',1558,377,5,'副总经理',0,'2018-10-07 03:50:05',279,'合规审核通过',518,'2018-10-07 03:50:32',4,0,0,'1557'),('2018-10-07',1559,377,9,'会计核算部',0,'2018-10-07 03:50:32',280,'会计审核通过',520,'2018-10-07 03:51:18',5,0,0,'1558'),('2018-10-07',1560,377,3,'副总经理',0,'2018-10-07 03:51:18',281,NULL,522,'2018-10-07 03:53:00',9,0,0,'1559'),('2018-10-07',1561,377,4,'总经理',0,'2018-10-07 03:53:00',283,NULL,526,'2018-10-07 03:53:19',3,0,0,'1560'),('2018-10-07',1562,377,11,'会计核算部',0,'2018-10-07 03:53:19',284,NULL,529,'2018-10-07 03:58:58',4,0,0,'1561'),('2018-10-07',1564,379,12,'业务部',0,'2018-10-07 20:14:14',268,NULL,757,'2018-10-07 20:46:42',0,0,0,'0'),('2018-10-07',1565,379,8,'副总经理',0,'2018-10-07 20:46:42',269,'同意+',758,'2018-10-07 20:47:13',12,0,0,'1564'),('2018-10-07',1566,379,4,'总经理',0,'2018-10-07 20:47:13',270,'2次同意',761,'2018-10-07 20:47:32',8,0,0,'1565'),('2018-10-07',1567,379,5,'副总经理',0,'2018-10-07 20:47:32',271,'22次',765,'2018-10-07 20:47:55',4,0,0,'1566'),('2018-10-07',1568,379,4,'总经理',0,'2018-10-07 20:47:55',315,'好2',767,'2018-10-07 20:50:26',5,0,0,'1567'),('2018-10-07',1569,379,10,'运营管理部',0,'2018-10-07 20:50:26',370,NULL,773,'2018-10-07 20:50:53',4,0,0,'1568'),('2018-10-07',1570,379,10,'运营管理部',0,'2018-10-07 20:50:53',371,NULL,772,'2018-10-07 20:51:51',10,0,0,'1569'),('2018-10-17',1577,381,13,'审计部',0,'2018-10-17 01:14:48',362,NULL,745,'2018-10-17 01:16:40',0,0,0,'0'),('2018-10-17',1578,381,5,'副总经理',0,'2018-10-17 01:16:40',363,NULL,746,'2018-10-17 01:17:01',13,0,0,'1577'),('2018-10-17',1579,381,7,'副总经理',0,'2018-10-17 01:17:01',364,NULL,748,'2018-10-17 01:17:18',5,0,0,'1578'),('2018-10-17',1580,381,5,'副总经理',0,'2018-10-17 01:17:18',365,NULL,750,'2018-10-17 01:17:31',7,0,0,'1579'),('2018-10-17',1581,381,3,'副总经理',0,'2018-10-17 01:17:31',366,NULL,753,'2018-10-17 01:17:48',5,0,0,'1580'),('2018-10-17',1582,381,4,'总经理',0,'2018-10-17 01:17:48',367,NULL,754,'2018-10-17 01:18:03',3,0,0,'1581'),('2018-10-17',1583,381,13,'审计部',0,'2018-10-17 01:18:03',368,NULL,NULL,NULL,4,0,0,'1582'),('2018-10-31',1584,382,14,'数据信息部',0,'2018-10-31 14:30:08',224,NULL,634,'2018-10-31 14:39:34',0,0,0,'0'),('2018-10-31',1587,382,9,'会计核算部',0,'2018-10-31 14:39:34',229,NULL,NULL,NULL,14,0,0,'1584'),('2018-11-02',1588,383,12,'业务部',0,'2018-11-02 16:36:01',334,NULL,699,'2018-11-02 16:37:25',0,0,0,'0'),('2018-11-02',1589,383,10,'运营管理部',0,'2018-11-02 16:37:25',335,'移动输入的意见',700,'2018-11-03 09:42:10',12,0,0,'1588'),('2018-11-03',1590,384,13,'审计部',0,'2018-11-03 01:37:14',63,NULL,95,'2018-11-03 01:39:04',0,0,0,'0'),('2018-11-03',1591,384,5,'副总经理',0,'2018-11-03 01:39:04',68,'确认休假',107,'2018-11-21 00:11:35',13,0,0,'1590'),('2018-11-02',1593,383,10,'运营管理部',0,'2018-11-03 09:42:10',336,'意见带附件s',702,'2018-11-03 09:51:29',10,0,0,'1589'),('2018-11-02',1594,383,10,'运营管理部',0,'2018-11-03 09:51:29',337,NULL,NULL,NULL,10,0,0,'1593'),('2018-11-03',1595,385,12,'业务部',0,'2018-11-03 09:55:05',334,NULL,699,'2018-11-03 09:55:51',0,0,0,'0'),('2018-11-03',1596,385,10,'运营管理部',0,'2018-11-03 09:55:51',335,'接收',700,'2018-11-03 10:08:58',12,0,0,'1595'),('2018-11-03',1597,385,10,'运营管理部',0,'2018-11-03 10:08:58',336,'不错',702,'2018-11-03 10:11:26',10,0,0,'1596'),('2018-11-03',1598,385,10,'运营管理部',0,'2018-11-03 10:11:26',337,'33333555',NULL,NULL,10,0,0,'1597'),('2018-11-03',1599,386,12,'业务部',0,'2018-11-03 23:45:35',334,NULL,699,'2018-11-03 23:45:59',0,0,0,'0'),('2018-11-03',1600,386,10,'运营管理部',0,'2018-11-03 23:45:59',335,'处理页后选人111',701,'2018-11-07 23:34:28',12,0,0,'1599'),('2018-11-04',1602,387,13,'审计部',0,'2018-11-04 00:28:45',301,NULL,551,'2018-11-04 00:30:07',0,0,0,'0'),('2018-11-04',1603,387,2,'董事长',0,'2018-11-04 00:30:07',302,'全员',555,'2018-11-04 00:31:05',13,0,0,'1602'),('2018-11-04',1604,387,4,'总经理',0,'2018-11-04 00:31:05',302,NULL,555,'2018-11-04 00:31:16',13,0,0,'1602'),('2018-11-04',1605,387,13,'审计部',0,'2018-11-04 00:31:16',301,NULL,552,'2018-11-04 00:34:12',0,0,0,'0'),('2018-11-04',1606,387,14,'数据信息部',0,'2018-11-04 00:34:12',303,NULL,556,'2018-11-10 15:24:49',13,0,0,'1605'),('2018-11-03',1612,386,12,'业务部',0,'2018-11-07 23:34:28',334,NULL,699,'2018-11-07 23:35:02',10,0,0,'1600'),('2018-11-03',1613,386,10,'运营管理部',0,'2018-11-07 23:35:02',335,NULL,700,'2018-11-07 23:35:53',12,0,0,'1612'),('2018-11-03',1614,386,16,'运营管理部',0,'2018-11-07 23:35:53',336,'ok by zjj',702,'2018-11-07 23:50:16',10,0,0,'1613'),('2018-11-03',1615,386,10,'运营管理部',0,'2018-11-07 23:50:16',337,'交接文件已确认111',NULL,NULL,16,0,0,'1614'),('2018-11-09',1616,388,12,'业务部',0,'2018-11-09 00:23:24',339,NULL,706,'2018-11-09 00:24:23',0,0,0,'0'),('2018-11-09',1617,388,8,'副总经理',0,'2018-11-09 00:24:23',340,'同意档案借阅',707,'2018-11-09 01:18:37',12,0,0,'1616'),('2018-11-09',1618,388,7,'副总经理',0,'2018-11-09 01:18:37',341,'行',709,'2018-11-09 01:19:54',8,0,0,'1617'),('2018-11-09',1619,388,10,'运营管理部',0,'2018-11-09 01:19:54',342,NULL,711,'2018-11-09 01:42:18',7,0,0,'1618'),('2018-11-09',1620,388,12,'业务部',0,'2018-11-09 01:42:18',343,'已用完',713,'2018-11-09 01:44:16',10,0,0,'1619'),('2018-11-09',1621,388,10,'运营管理部',0,'2018-11-09 01:44:16',344,NULL,714,'2018-11-09 01:51:47',12,0,0,'1620'),('2018-11-09',1622,389,12,'业务部',0,'2018-11-09 12:34:50',334,NULL,699,'2018-11-09 12:35:13',0,0,0,'0'),('2018-11-09',1623,389,10,'运营管理部',0,'2018-11-09 12:35:13',335,NULL,700,'2018-11-10 10:24:11',12,0,0,'1622'),('2018-11-09',1624,389,10,'运营管理部',0,'2018-11-10 10:24:11',336,NULL,702,'2018-11-10 10:24:32',10,0,0,'1623'),('2018-11-09',1625,389,10,'运营管理部',0,'2018-11-10 10:24:32',337,NULL,704,'2018-11-10 10:24:54',10,0,0,'1624'),('2018-11-04',1626,387,13,'审计部',0,'2018-11-10 15:24:49',301,'意见附件',551,'2018-11-10 22:13:31',0,0,0,'0'),('2018-11-10',1627,390,7,'副总经理',0,'2018-11-10 15:53:45',316,NULL,623,'2018-11-10 15:54:55',0,0,0,'0'),('2018-11-10',1628,390,10,'运营管理部',0,'2018-11-10 15:54:55',318,NULL,625,'2018-11-10 15:57:57',7,0,0,'1627'),('2018-11-10',1629,390,7,'副总经理',0,'2018-11-10 15:57:57',321,'意见见附件',NULL,NULL,10,0,0,'1628'),('2018-11-04',1630,387,2,'董事长',0,'2018-11-10 22:13:31',302,'请相关部门严格按文件精神执行+',555,'2018-11-16 23:17:51',13,0,0,'1626'),('2018-11-04',1631,387,4,'总经理',0,'2018-11-16 23:17:51',302,NULL,555,'2018-11-16 23:36:28',13,0,0,'1626'),('2018-11-10',1632,391,12,'业务部',0,'2018-11-10 22:48:36',334,NULL,699,'2018-11-10 22:49:02',0,0,0,'0'),('2018-11-10',1633,391,10,'运营管理部',0,'2018-11-10 22:49:02',335,'交接文件已确认+ok',700,'2018-12-08 06:44:28',12,0,0,'1632'),('2018-11-11',1634,392,14,'数据信息部',0,'2018-11-11 01:05:38',339,NULL,706,'2018-11-11 01:06:03',0,0,0,'0'),('2018-11-11',1635,392,14,'数据信息部',0,'2018-11-11 01:06:03',340,NULL,707,'2018-11-11 01:06:11',14,0,0,'1634'),('2018-11-11',1636,392,7,'副总经理',0,'2018-11-11 01:06:11',341,'注意保密，切记切记',709,'2018-11-11 02:03:26',14,0,0,'1635'),('2018-11-11',1637,392,10,'运营管理部',0,'2018-11-11 02:03:26',342,NULL,NULL,NULL,7,0,0,'1636'),('2018-11-04',1638,387,13,'审计部',0,'2018-11-16 23:36:28',301,NULL,552,'2018-11-16 23:41:51',0,0,0,'0'),('2018-11-04',1639,387,14,'数据信息部',0,'2018-11-16 23:41:51',303,NULL,553,'2018-11-16 23:53:37',13,0,0,'1638'),('2018-11-04',1644,387,2,'董事长',0,'2018-11-16 23:53:37',303,NULL,NULL,NULL,13,0,0,'1638'),('2018-11-04',1645,387,4,'总经理',0,'2018-11-16 23:53:37',303,NULL,NULL,NULL,13,0,0,'1638'),('2018-11-20',1646,393,2,'董事长',0,'2018-11-20 13:36:03',316,NULL,623,'2018-11-20 13:36:32',0,0,0,'0'),('2018-11-20',1647,393,5,'副总经理',0,'2018-11-20 13:36:32',318,NULL,626,'2018-11-20 13:38:14',2,0,0,'1646'),('2018-11-20',1649,393,2,'董事长',0,'2018-11-20 13:38:14',319,NULL,627,'2018-11-20 13:40:54',5,0,0,'1647'),('2018-11-20',1651,393,5,'副总经理',0,'2018-11-20 13:40:54',318,NULL,NULL,NULL,2,0,0,'1649'),('2018-11-20',1654,394,12,'业务部',0,'2018-11-20 22:54:19',334,NULL,699,'2018-11-20 22:55:01',0,0,0,'0'),('2018-11-20',1655,394,10,'运营管理部',0,'2018-11-20 22:55:01',335,'交接文件已确认',700,'2018-11-20 22:57:03',12,0,0,'1654'),('2018-11-20',1656,394,10,'运营管理部',0,'2018-11-20 22:57:03',336,'继续',702,'2018-11-20 22:58:04',10,0,0,'1655'),('2018-11-20',1657,394,10,'运营管理部',0,'2018-11-20 22:58:04',337,'交接文件已确认',704,'2018-11-20 23:40:12',10,0,2,'1656'),('2018-11-03',1659,384,13,'审计部',0,'2018-11-21 00:11:35',63,NULL,95,'2018-11-21 00:12:34',0,0,0,'0'),('2018-11-03',1660,384,5,'副总经理',0,'2018-11-21 00:12:34',68,NULL,106,'2018-11-21 00:13:14',13,0,0,'1659'),('2018-11-21',1662,395,12,'业务部',0,'2018-11-21 03:46:49',362,'请看附件',745,'2018-11-21 03:50:39',0,0,0,'0'),('2018-11-21',1663,395,8,'副总经理',0,'2018-11-21 03:50:39',363,'原则同意，确保性价比最高',746,'2018-11-21 13:31:23',12,0,0,'1662'),('2018-05-22',1664,279,15,'运营管理部',0,'2018-11-21 04:02:03',49,'反馈1',75,'2018-11-21 04:06:43',14,0,1,'1019'),('2018-05-22',1665,279,14,'数据信息部',0,'2018-11-21 04:06:43',50,NULL,NULL,NULL,-2,0,0,'1664'),('2018-11-21',1666,396,12,'业务部',0,'2018-11-21 05:22:07',288,'见附件',533,'2018-11-21 05:23:46',0,0,0,'0'),('2018-11-21',1667,396,8,'副总经理',0,'2018-11-21 05:23:46',289,'同意预付',534,'2018-11-21 05:26:49',12,0,0,'1666'),('2018-11-21',1668,396,4,'总经理',0,'2018-11-21 05:26:49',290,NULL,536,'2018-11-21 05:28:52',8,0,0,'1667'),('2018-11-21',1669,396,9,'会计核算部',0,'2018-11-21 05:28:52',291,NULL,538,'2018-11-21 05:29:46',4,0,0,'1668'),('2018-11-21',1670,396,9,'会计核算部',0,'2018-11-21 05:29:46',292,NULL,540,'2018-11-21 05:29:58',9,0,0,'1669'),('2018-11-21',1671,396,4,'总经理',0,'2018-11-21 05:29:58',293,NULL,542,'2018-11-21 05:30:34',9,0,0,'1670'),('2018-11-21',1672,396,12,'业务部',0,'2018-11-21 05:30:34',294,NULL,NULL,NULL,4,0,0,'1671'),('2018-11-21',1673,397,12,'业务部',0,'2018-11-21 07:55:53',63,NULL,93,'2018-11-21 07:56:45',0,0,0,'0'),('2018-11-21',1674,397,8,'副总经理',0,'2018-11-21 07:56:45',64,'同意',385,'2018-11-21 07:59:48',12,0,0,'1673'),('2018-11-21',1675,397,11,'会计核算部',0,'2018-11-21 07:59:48',66,NULL,NULL,NULL,8,0,0,'1674'),('2018-11-21',1676,395,7,'副总经理',0,'2018-11-21 13:31:23',364,'再比价',749,'2018-11-21 13:33:39',8,0,0,'1663'),('2018-11-21',1677,395,8,'副总经理',0,'2018-11-21 13:33:39',363,NULL,NULL,NULL,7,0,0,'1676'),('2018-11-21',1678,398,12,'业务部',0,'2018-11-21 19:49:58',187,'保证到期归还',386,'2018-11-21 19:50:42',0,0,0,'0'),('2018-11-21',1679,398,8,'副总经理',0,'2018-11-21 19:50:42',194,'同意借款',391,'2018-11-21 19:59:28',12,0,0,'1678'),('2018-11-21',1681,398,4,'总经理',0,'2018-11-21 19:59:28',188,'同意',393,'2018-11-21 20:00:31',8,0,0,'1679'),('2018-11-21',1682,398,4,'总经理',0,'2018-11-21 20:00:31',192,NULL,397,'2018-11-21 20:00:47',4,0,0,'1681'),('2018-11-21',1683,398,9,'会计核算部',0,'2018-11-21 20:00:47',189,NULL,402,'2018-11-21 20:01:34',4,0,0,'1682'),('2018-11-21',1684,398,11,'会计核算部',0,'2018-11-21 20:01:34',190,NULL,404,'2018-11-21 20:02:56',9,0,0,'1683'),('2018-10-03',1685,369,9,'会计核算部',0,'2018-11-21 21:19:42',229,'注意科目',639,'2018-11-21 22:09:17',14,0,0,'1501'),('2018-10-03',1686,369,3,'副总经理',0,'2018-11-21 22:09:17',232,NULL,641,'2018-11-21 22:10:33',9,0,0,'1685'),('2018-10-03',1687,369,4,'总经理',0,'2018-11-21 22:10:33',231,NULL,643,'2018-11-21 22:11:28',3,0,0,'1686'),('2018-10-03',1688,369,14,'数据信息部',0,'2018-11-21 22:11:28',227,NULL,NULL,NULL,4,0,0,'1687'),('2018-11-21',1689,399,15,'运营管理部',0,'2018-11-21 22:15:56',187,NULL,386,'2018-11-21 22:17:35',0,0,0,'0'),('2018-11-21',1691,399,7,'副总经理',0,'2018-11-21 22:17:35',194,'qqqq',NULL,NULL,15,0,0,'1689'),('2018-11-21',1692,400,14,'数据信息部',0,'2018-11-21 22:38:37',324,'参见意见附件',660,'2018-11-21 22:39:45',0,0,0,'0'),('2018-11-21',1693,400,14,'数据信息部',0,'2018-11-21 22:39:45',325,'同意合同内容',662,'2018-11-22 07:59:37',14,0,0,'1692'),('2018-11-21',1699,400,5,'副总经理',0,'2018-11-22 07:59:37',327,NULL,666,'2018-11-22 11:23:39',14,0,0,'1693'),('2018-11-22',1700,401,14,'数据信息部',0,'2018-11-22 11:23:39',268,NULL,NULL,NULL,0,0,0,'0'),('2018-11-22',1701,402,16,'运营管理部',0,'2018-11-22 12:14:38',356,'请参考附件',729,'2018-11-22 12:15:45',0,0,0,'0'),('2018-11-22',1702,402,7,'副总经理',0,'2018-11-22 12:15:45',357,'同意发放',744,'2018-11-22 12:20:45',16,0,0,'1701'),('2018-11-25',1703,403,12,'业务部',0,'2018-11-25 15:40:44',237,'参见说明附件',452,'2018-11-25 15:41:57',0,0,0,'0'),('2018-11-25',1704,403,8,'副总经理',0,'2018-11-25 15:41:57',238,'同意立项',453,'2018-11-25 15:44:37',12,0,0,'1703'),('2018-11-25',1705,403,4,'总经理',0,'2018-11-25 15:44:37',239,NULL,455,'2018-11-25 15:59:11',8,0,0,'1704'),('2018-11-25',1706,403,5,'副总经理',0,'2018-11-25 15:59:11',240,NULL,457,'2018-11-25 15:59:48',4,0,0,'1705'),('2018-11-25',1707,403,5,'副总经理',0,'2018-11-25 15:59:48',241,NULL,459,'2018-11-25 15:59:57',5,0,0,'1706'),('2018-11-25',1708,403,9,'会计核算部',0,'2018-11-25 15:59:57',242,NULL,461,'2018-11-25 16:00:42',5,0,0,'1707'),('2018-11-25',1709,403,2,'董事长',0,'2018-11-25 16:00:42',243,'同意',463,'2018-11-25 16:01:40',9,0,0,'1708'),('2018-11-25',1710,403,12,'业务部',0,'2018-11-25 16:01:40',244,NULL,466,'2018-11-25 16:03:59',2,0,0,'1709'),('2018-11-25',1711,404,12,'业务部',0,'2018-11-25 16:20:49',247,'参看说明附件',468,'2018-11-25 16:23:57',0,0,0,'0'),('2018-11-25',1712,404,8,'副总经理',0,'2018-11-25 16:23:57',248,'同意材料内容',469,'2018-11-25 17:32:39',12,0,0,'1711'),('2018-11-25',1713,404,4,'总经理',0,'2018-11-25 17:32:39',249,NULL,472,'2018-11-25 19:21:55',8,0,0,'1712'),('2018-11-25',1714,405,12,'业务部',0,'2018-11-25 19:27:16',251,'参见附件',590,'2018-11-25 19:28:07',0,0,0,'0'),('2018-11-25',1715,405,8,'副总经理',0,'2018-11-25 19:28:07',252,'建议上会研究',591,'2018-11-26 11:00:31',12,0,0,'1714'),('2018-11-25',1716,405,4,'总经理',0,'2018-11-26 11:00:31',253,NULL,592,'2018-11-26 11:03:01',8,0,0,'1715'),('2018-11-25',1717,405,5,'副总经理',0,'2018-11-26 11:03:01',254,NULL,595,'2018-11-26 11:04:10',4,0,0,'1716'),('2018-11-25',1718,405,9,'会计核算部',0,'2018-11-26 11:04:10',255,'OK',597,'2018-11-26 11:04:56',5,0,0,'1717'),('2018-11-25',1719,405,3,'副总经理',0,'2018-11-26 11:04:56',256,NULL,600,'2018-11-26 11:06:14',9,0,0,'1718'),('2018-11-25',1720,405,4,'总经理',0,'2018-11-26 11:06:14',257,NULL,598,'2018-11-26 11:07:18',3,0,0,'1719'),('2018-11-25',1721,405,14,'数据信息部',0,'2018-11-26 11:07:18',258,NULL,606,'2018-11-26 11:11:34',4,0,0,'1720'),('2018-11-26',1722,406,14,'数据信息部',0,'2018-11-26 11:13:42',263,'参见说明附件',494,'2018-11-26 11:15:10',0,0,0,'0'),('2018-11-26',1723,406,4,'总经理',0,'2018-11-26 11:15:10',264,'原则同意',498,'2018-11-26 11:54:44',14,0,0,'1722'),('2018-11-26',1724,406,14,'数据信息部',0,'2018-11-26 11:54:44',263,NULL,497,'2018-11-26 13:20:04',0,0,0,'0'),('2018-11-26',1725,407,12,'业务部',0,'2018-11-26 14:40:12',305,'参见附件说明',576,'2018-11-26 14:41:39',0,0,0,'0'),('2018-11-26',1726,407,8,'副总经理',0,'2018-11-26 14:41:39',306,'注意付款条件',578,'2018-11-26 14:45:32',12,0,0,'1725'),('2018-11-26',1727,407,4,'总经理',0,'2018-11-26 14:45:32',307,NULL,717,'2018-11-26 14:46:24',8,0,0,'1726'),('2018-11-26',1728,407,5,'副总经理',0,'2018-11-26 14:46:24',311,NULL,585,'2018-11-26 14:47:05',4,0,0,'1727'),('2018-11-26',1729,407,12,'业务部',0,'2018-11-26 14:47:05',313,NULL,589,'2018-11-26 14:48:28',5,0,0,'1728'),('2018-11-26',1730,408,12,'业务部',0,'2018-11-26 14:48:28',268,'参见附件说明',757,'2018-11-27 15:31:41',0,0,0,'0'),('2018-11-26',1731,409,12,'业务部',0,'2018-11-26 16:13:58',347,'参见说明附件',718,'2018-11-26 16:15:52',0,0,0,'0'),('2018-11-26',1732,409,8,'副总经理',0,'2018-11-26 16:15:52',348,'设置尾款协议',719,'2018-11-26 16:21:31',12,0,0,'1731'),('2018-11-26',1733,409,4,'总经理',0,'2018-11-26 16:21:31',349,NULL,721,'2018-11-26 16:22:44',8,0,0,'1732'),('2018-11-26',1734,409,5,'副总经理',0,'2018-11-26 16:22:44',350,NULL,723,'2018-11-26 16:23:20',4,0,0,'1733'),('2018-11-26',1735,409,12,'业务部',0,'2018-11-26 16:23:20',351,NULL,725,'2018-11-26 16:25:14',5,0,0,'1734'),('2018-11-27',1737,411,14,'数据信息部',0,'2018-11-27 10:17:18',334,'参见附件说明',699,'2018-11-27 10:18:54',0,0,0,'0'),('2018-11-27',1738,411,10,'运营管理部',0,'2018-11-27 10:18:54',335,'交接文件已确认',NULL,NULL,14,0,0,'1737'),('2018-11-26',1739,408,8,'副总经理',0,'2018-11-27 15:31:41',269,'同意用印，但不能外带',758,'2018-11-27 16:14:23',12,0,0,'1730'),('2018-11-26',1740,408,4,'总经理',0,'2018-11-27 16:14:23',270,NULL,761,'2018-11-27 16:15:26',8,0,0,'1739'),('2018-11-26',1741,408,5,'副总经理',0,'2018-11-27 16:15:26',271,NULL,765,'2018-11-27 16:16:20',4,0,0,'1740'),('2018-11-26',1742,408,4,'总经理',0,'2018-11-27 16:16:20',315,NULL,767,'2018-11-27 16:16:59',5,0,0,'1741'),('2018-11-26',1743,408,10,'运营管理部',0,'2018-11-27 16:16:59',370,NULL,773,'2018-11-27 16:17:39',4,0,0,'1742'),('2018-11-26',1744,408,10,'运营管理部',0,'2018-11-27 16:17:39',371,NULL,772,'2018-11-27 16:21:07',10,0,0,'1743'),('2018-11-27',1745,412,12,'业务部',0,'2018-11-27 16:53:50',276,'见附件说明',531,'2018-11-27 16:55:44',0,0,0,'0'),('2018-11-27',1746,412,8,'副总经理',0,'2018-11-27 16:55:44',277,'同意付款',514,'2018-11-27 16:58:25',12,0,0,'1745'),('2018-11-27',1747,412,5,'副总经理',0,'2018-11-27 16:58:25',279,NULL,518,'2018-11-27 16:59:34',8,0,0,'1746'),('2018-11-27',1748,412,9,'会计核算部',0,'2018-11-27 16:59:34',280,NULL,520,'2018-11-27 17:00:17',5,0,0,'1747'),('2018-11-27',1749,412,3,'副总经理',0,'2018-11-27 17:00:17',281,NULL,522,'2018-11-27 17:00:55',9,0,0,'1748'),('2018-11-27',1750,412,4,'总经理',0,'2018-11-27 17:00:55',283,NULL,526,'2018-11-27 17:01:39',3,0,0,'1749'),('2018-11-27',1751,412,11,'会计核算部',0,'2018-11-27 17:01:39',284,NULL,529,'2018-11-27 17:03:22',4,0,0,'1750'),('2018-11-10',1752,391,10,'运营管理部',0,'2018-12-08 06:44:28',336,'交接文件已确认',702,'2018-12-08 06:44:38',10,0,0,'1633'),('2018-11-10',1753,391,10,'运营管理部',0,'2018-12-08 06:44:38',337,NULL,NULL,NULL,10,0,0,'1752'),('2018-09-07',1754,366,15,'运营管理部',0,'2018-12-12 00:20:09',227,NULL,NULL,NULL,4,0,0,'1497'),('2018-04-25',1755,75,12,'业务部',0,'2018-12-12 00:20:23',268,NULL,NULL,NULL,0,0,0,'0'),('2018-12-12',1756,413,13,'审计部',0,'2018-12-12 20:58:33',224,NULL,634,'2018-12-12 22:01:55',0,0,0,'0'),('2018-12-12',1758,413,9,'会计核算部',0,'2018-12-12 22:01:55',229,'同意报销',639,'2018-12-12 22:03:04',13,0,0,'1756'),('2018-12-12',1759,413,3,'副总经理',0,'2018-12-12 22:03:04',232,NULL,641,'2018-12-12 22:05:46',9,0,0,'1758'),('2018-12-12',1760,413,4,'总经理',0,'2018-12-12 22:05:46',231,'同意报销',643,'2018-12-12 22:06:11',3,0,0,'1759'),('2018-12-12',1761,413,13,'审计部',0,'2018-12-12 22:06:11',227,NULL,645,'2018-12-12 22:08:44',4,0,0,'1760'),('2018-12-12',1762,414,13,'审计部',0,'2018-12-12 23:00:40',224,NULL,NULL,NULL,0,0,0,'0'),('2019-01-11',1763,415,14,'数据信息部',0,'2019-01-11 04:53:21',34,NULL,668,'2019-01-11 04:58:09',0,0,0,'0'),('2019-01-11',1764,415,14,'数据信息部',0,'2019-01-11 04:58:09',35,NULL,NULL,NULL,14,0,0,'1763'),('2019-03-04',1765,416,12,'业务部',0,'2019-03-04 07:44:12',347,NULL,718,'2019-03-04 07:45:40',0,0,0,'0'),('2019-03-04',1766,416,8,'副总经理',0,'2019-03-04 07:45:40',348,NULL,719,'2019-03-04 07:45:56',12,0,0,'1765'),('2019-03-04',1767,416,4,'总经理',0,'2019-03-04 07:45:56',349,NULL,721,'2019-03-04 07:46:21',8,0,0,'1766'),('2019-03-04',1768,416,5,'副总经理',0,'2019-03-04 07:46:21',350,NULL,723,'2019-03-04 07:46:35',4,0,0,'1767'),('2019-03-04',1769,416,12,'业务部',0,'2019-03-04 07:46:35',351,NULL,783,'2019-03-06 03:17:38',5,0,0,'1768'),('2019-03-04',1770,416,10,'运营管理部',0,'2019-03-06 03:17:38',373,NULL,784,'2019-03-06 03:22:12',12,0,0,'1769'),('2019-03-04',1771,416,12,'业务部',0,'2019-03-06 03:22:12',351,NULL,783,'2019-03-06 08:15:48',10,0,0,'1770'),('2018-04-02',1773,58,2,'董事长',0,'2019-03-06 08:03:35',124,'同意',63,'2019-03-06 08:03:50',10,0,0,'472'),('2018-04-02',1774,58,11,'会计核算部',0,'2019-03-06 08:03:50',42,NULL,66,'2019-03-06 08:09:45',2,0,0,'1773'),('2018-04-02',1776,58,10,'运营管理部',0,'2019-03-06 08:09:45',43,NULL,NULL,NULL,11,0,0,'1774'),('2019-03-04',1777,416,10,'运营管理部',0,'2019-03-06 08:15:48',373,NULL,784,'2019-03-06 19:55:24',12,0,0,'1771'),('2019-03-06',1778,418,16,'运营管理部',0,'2019-03-06 18:38:48',324,NULL,785,'2019-03-06 18:47:46',0,0,0,'0'),('2019-03-06',1779,418,7,'副总经理',0,'2019-03-06 18:47:46',325,NULL,786,'2019-03-06 18:48:41',16,0,0,'1778'),('2019-03-06',1780,418,5,'副总经理',0,'2019-03-06 18:48:41',327,NULL,791,'2019-03-06 18:51:22',7,0,0,'1779'),('2019-03-06',1781,418,16,'运营管理部',0,'2019-03-06 18:51:22',374,NULL,793,'2019-03-06 19:19:08',5,0,0,'1780'),('2019-03-06',1782,418,10,'运营管理部',0,'2019-03-06 19:19:08',375,NULL,795,'2019-03-06 19:37:31',16,0,0,'1781'),('2019-03-06',1785,418,16,'运营管理部',0,'2019-03-06 19:37:31',374,NULL,793,'2019-03-06 19:49:05',10,0,0,'1782'),('2019-03-06',1787,418,10,'运营管理部',0,'2019-03-06 19:49:05',375,NULL,795,'2019-03-06 19:52:30',16,0,0,'1785'),('2019-03-06',1788,418,16,'运营管理部',0,'2019-03-06 19:52:30',374,NULL,794,'2019-03-06 19:53:36',10,0,0,'1787'),('2019-03-06',1789,421,16,'运营管理部',0,'2019-03-06 19:53:36',268,NULL,757,'2019-03-27 15:03:50',0,0,0,'0'),('2019-03-04',1790,416,12,'业务部',0,'2019-03-06 19:55:24',351,NULL,725,'2019-03-27 15:09:05',10,0,0,'1777'),('2019-03-21',1800,422,12,'业务部',0,'2019-03-21 17:22:13',237,NULL,796,'2019-03-21 17:24:45',0,0,0,'0'),('2019-03-21',1801,422,8,'副总经理',0,'2019-03-21 17:24:45',238,'同意立项',797,'2019-03-21 17:25:16',12,0,0,'1800'),('2019-03-21',1802,422,4,'总经理',0,'2019-03-21 17:25:16',239,'同意',799,'2019-03-21 18:50:03',8,0,0,'1801'),('2019-03-21',1803,422,7,'副总经理',0,'2019-03-21 18:50:03',376,'同意，注意负债核算',810,'2019-03-21 18:51:04',4,0,0,'1802'),('2019-03-21',1804,422,4,'总经理',0,'2019-03-21 18:51:04',377,NULL,807,'2019-03-22 10:26:49',7,0,0,'1803'),('2019-03-21',1806,422,12,'业务部',0,'2019-03-22 10:26:49',244,NULL,809,'2019-03-22 10:27:54',4,0,0,'1804'),('2019-03-22',1807,423,12,'业务部',0,'2019-03-22 10:28:35',247,NULL,468,'2019-03-22 10:58:07',0,0,0,'0'),('2019-03-22',1808,423,8,'副总经理',0,'2019-03-22 10:58:07',248,'同意材料内容',469,'2019-03-22 11:22:34',12,0,0,'1807'),('2019-03-22',1809,423,4,'总经理',0,'2019-03-22 11:22:34',249,NULL,472,'2019-03-22 11:23:00',8,0,0,'1808'),('2019-03-22',1810,424,12,'业务部',0,'2019-03-22 11:34:03',251,NULL,812,'2019-03-22 14:36:28',0,0,0,'0'),('2019-03-22',1811,425,12,'业务部',0,'2019-03-22 14:08:19',247,NULL,468,'2019-03-22 14:31:23',0,0,0,'0'),('2019-03-22',1812,425,8,'副总经理',0,'2019-03-22 14:31:23',248,'同意材料内容',469,'2019-03-22 14:32:01',12,0,0,'1811'),('2019-03-22',1813,425,4,'总经理',0,'2019-03-22 14:32:01',249,NULL,472,'2019-03-22 14:32:25',8,0,0,'1812'),('2019-03-22',1814,424,14,'数据信息部',0,'2019-03-22 14:36:28',258,NULL,831,'2019-03-23 16:41:29',12,0,0,'1810'),('2019-03-22',1815,424,18,'法律合规部',0,'2019-03-23 16:41:29',254,'法律合规部审查意见',817,'2019-03-23 16:43:23',14,0,8,'1814'),('2019-03-22',1816,424,5,'副总经理',0,'2019-03-23 16:43:23',379,'法律合规部负责人意见',822,'2019-03-23 17:16:18',18,0,0,'1815'),('2019-03-22',1821,424,5,'法律合规部',0,'2019-03-23 17:16:18',380,'法律合规部分管副总意见',835,'2019-03-23 17:17:00',5,0,0,'1816'),('2019-03-22',1822,424,14,'数据信息部',0,'2019-03-23 17:17:00',258,NULL,832,'2019-03-23 17:17:16',5,0,0,'1821'),('2019-03-22',1823,424,19,'风险管理部',0,'2019-03-23 17:17:16',381,'风险管理部审查意见',836,'2019-03-23 17:18:06',14,0,8,'1822'),('2019-03-22',1824,424,6,'风险管理部',0,'2019-03-23 17:18:06',382,'风险管理部负责人意见',838,'2019-03-23 17:18:59',19,0,0,'1823'),('2019-03-22',1825,424,6,'风险管理部',0,'2019-03-23 17:18:59',383,'风险管理部分管副总意见',840,'2019-03-23 17:19:07',6,0,0,'1824'),('2019-03-22',1826,424,14,'数据信息部',0,'2019-03-23 17:19:07',258,NULL,833,'2019-03-23 17:19:29',6,0,0,'1825'),('2019-03-22',1827,424,9,'会计核算部',0,'2019-03-23 17:19:29',255,'会计核算部审查意见',823,'2019-03-23 17:19:52',14,0,8,'1826'),('2019-03-22',1828,424,3,'会计核算部',0,'2019-03-23 17:19:52',256,'财务部负责人审查意见',825,'2019-03-23 17:20:30',9,0,0,'1827'),('2019-03-22',1829,424,3,'会计核算部',0,'2019-03-23 17:20:30',257,'分管财务副总审查意见',827,'2019-03-23 17:20:40',3,0,0,'1828'),('2019-03-22',1830,424,14,'数据信息部',0,'2019-03-23 17:20:40',258,NULL,813,'2019-03-23 17:21:07',3,0,0,'1829'),('2019-03-22',1831,424,7,'运营管理部',0,'2019-03-23 17:21:07',259,NULL,829,'2019-03-23 17:21:19',14,0,0,'1830'),('2019-03-22',1832,424,14,'数据信息部',0,'2019-03-23 17:21:19',258,NULL,814,'2019-03-23 17:21:35',7,0,0,'1831'),('2019-03-22',1833,424,4,'总经理',0,'2019-03-23 17:21:35',260,NULL,830,'2019-03-23 17:21:48',14,0,0,'1832'),('2019-03-22',1834,424,14,'数据信息部',0,'2019-03-23 17:21:48',258,NULL,816,'2019-03-23 21:23:03',4,0,0,'1833'),('2019-03-25',1835,426,14,'数据信息部',0,'2019-03-25 09:35:21',384,NULL,842,'2019-03-25 14:05:52',0,0,0,'0'),('2019-03-25',1842,426,4,'总经理',0,'2019-03-25 14:05:52',385,'原则同意',843,'2019-03-25 14:46:49',14,0,0,'1835'),('2019-03-25',1843,426,7,'运营管理部',0,'2019-03-25 14:05:52',385,NULL,843,'2019-03-25 14:47:23',14,0,0,'1835'),('2019-03-25',1844,426,8,'业务部',0,'2019-03-25 14:05:52',385,NULL,843,'2019-03-25 14:48:22',14,0,0,'1835'),('2019-03-25',1845,426,3,'会计核算部',0,'2019-03-25 14:05:52',385,NULL,843,'2019-03-25 14:48:44',14,0,0,'1835'),('2019-03-25',1846,426,5,'法律合规部',0,'2019-03-25 14:05:52',385,NULL,843,'2019-03-25 14:47:52',14,0,0,'1835'),('2019-03-25',1847,426,6,'风险管理部',0,'2019-03-25 14:05:52',385,NULL,843,'2019-03-25 14:49:48',14,0,0,'1835'),('2019-03-25',1849,426,14,'数据信息部',0,'2019-03-25 14:49:48',386,NULL,844,'2019-03-25 17:08:28',-2,0,0,'1842,1843,1844,1845,1846,1847'),('2019-03-26',1850,427,12,'业务部',0,'2019-03-26 11:49:29',305,NULL,845,'2019-03-26 11:52:24',0,0,0,'0'),('2019-03-26',1851,427,8,'业务部',0,'2019-03-26 11:52:24',306,'同意',846,'2019-03-26 11:55:26',12,0,0,'1850'),('2019-03-26',1852,427,4,'总经理',0,'2019-03-26 11:55:26',307,NULL,848,'2019-03-26 11:56:02',8,0,0,'1851'),('2019-03-26',1853,427,5,'法律合规部',0,'2019-03-26 11:56:02',311,'ok',850,'2019-03-26 11:56:24',4,0,0,'1852'),('2019-03-26',1854,427,12,'业务部',0,'2019-03-26 11:56:24',313,NULL,853,'2019-03-26 12:01:50',5,0,0,'1853'),('2019-03-26',1855,427,10,'运营管理部',0,'2019-03-26 12:01:50',387,NULL,854,'2019-03-26 12:10:39',12,0,0,'1854'),('2019-03-26',1856,427,12,'业务部',0,'2019-03-26 12:10:39',313,NULL,852,'2019-03-26 13:19:32',10,0,0,'1855'),('2019-03-26',1859,430,12,'业务部',0,'2019-03-26 14:51:38',276,NULL,855,'2019-03-26 14:54:23',0,0,0,'0'),('2019-03-26',1860,430,8,'业务部',0,'2019-03-26 14:54:23',277,'同意付款',856,'2019-03-26 14:54:50',12,0,0,'1859'),('2019-03-26',1861,430,4,'总经理',0,'2019-03-26 14:54:50',278,NULL,867,'2019-03-26 14:55:34',8,0,0,'1860'),('2019-03-26',1862,430,5,'法律合规部',0,'2019-03-26 14:55:34',279,'合规审核通过',858,'2019-03-26 14:57:48',4,0,0,'1861'),('2019-03-26',1863,430,9,'会计核算部',0,'2019-03-26 14:57:48',280,'会计审核通过',860,'2019-03-26 14:58:13',5,0,0,'1862'),('2019-03-26',1864,430,3,'会计核算部',0,'2019-03-26 14:58:13',281,NULL,862,'2019-03-26 14:58:29',9,0,0,'1863'),('2019-03-26',1865,430,3,'会计核算部',0,'2019-03-26 14:58:29',282,NULL,869,'2019-03-26 14:58:36',3,0,0,'1864'),('2019-03-26',1866,430,4,'总经理',0,'2019-03-26 14:58:36',283,'同意',864,'2019-03-26 14:58:53',3,0,0,'1865'),('2019-03-26',1867,430,11,'会计核算部',0,'2019-03-26 14:58:53',284,NULL,866,'2019-03-27 11:55:55',4,0,0,'1866'),('2019-03-27',1870,433,12,'业务部',0,'2019-03-27 10:19:44',237,NULL,796,'2019-03-27 10:21:54',0,0,0,'0'),('2019-03-27',1871,433,8,'业务部',0,'2019-03-27 10:21:54',238,'同意立项',797,'2019-03-27 10:23:46',12,0,0,'1870'),('2019-03-27',1872,433,4,'总经理',0,'2019-03-27 10:23:46',239,NULL,799,'2019-03-27 10:29:49',8,0,0,'1871'),('2019-03-27',1873,433,7,'运营管理部',0,'2019-03-27 10:29:49',376,NULL,810,'2019-03-27 10:30:13',4,0,0,'1872'),('2019-03-27',1874,433,4,'总经理',0,'2019-03-27 10:30:13',377,'同意立项',807,'2019-03-27 10:30:42',7,0,0,'1873'),('2019-03-27',1875,433,12,'业务部',0,'2019-03-27 10:30:42',244,NULL,809,'2019-03-27 10:32:42',4,0,0,'1874'),('2019-03-27',1876,434,12,'业务部',0,'2019-03-27 10:35:38',247,NULL,468,'2019-03-27 10:37:11',0,0,0,'0'),('2019-03-27',1877,434,8,'业务部',0,'2019-03-27 10:37:11',248,'同意材料内容',469,'2019-03-27 10:38:54',12,0,0,'1876'),('2019-03-27',1878,434,4,'总经理',0,'2019-03-27 10:38:54',249,NULL,472,'2019-03-27 10:39:23',8,0,0,'1877'),('2019-03-27',1879,435,12,'业务部',0,'2019-03-27 10:40:10',251,NULL,812,'2019-03-27 10:44:55',0,0,0,'0'),('2019-03-27',1880,435,14,'数据信息部',0,'2019-03-27 10:44:55',258,NULL,831,'2019-03-27 10:45:41',12,0,0,'1879'),('2019-03-27',1881,435,18,'法律合规部',0,'2019-03-27 10:45:41',254,'审核完毕，合规',817,'2019-03-27 10:47:27',14,0,8,'1880'),('2019-03-27',1882,435,5,'法律合规部',0,'2019-03-27 10:47:27',379,NULL,822,'2019-03-27 10:48:09',18,0,0,'1881'),('2019-03-27',1883,435,5,'法律合规部',0,'2019-03-27 10:48:09',380,'同意',835,'2019-03-27 10:48:29',5,0,0,'1882'),('2019-03-27',1884,435,14,'数据信息部',0,'2019-03-27 10:48:29',258,NULL,832,'2019-03-27 10:48:57',5,0,0,'1883'),('2019-03-27',1885,435,19,'风险管理部',0,'2019-03-27 10:48:57',381,NULL,836,'2019-03-27 10:49:30',14,0,8,'1884'),('2019-03-27',1886,435,6,'风险管理部',0,'2019-03-27 10:49:30',382,'好操作，无经营风险',838,'2019-03-27 10:50:37',19,0,0,'1885'),('2019-03-27',1887,435,6,'风险管理部',0,'2019-03-27 10:50:37',383,NULL,840,'2019-03-27 10:50:42',6,0,0,'1886'),('2019-03-27',1888,435,14,'数据信息部',0,'2019-03-27 10:50:42',258,NULL,833,'2019-03-27 10:51:03',6,0,0,'1887'),('2019-03-27',1889,435,9,'会计核算部',0,'2019-03-27 10:51:03',255,'财务审核完毕',823,'2019-03-27 10:54:43',14,0,8,'1888'),('2019-03-27',1890,435,3,'会计核算部',0,'2019-03-27 10:54:43',256,NULL,825,'2019-03-27 10:55:53',9,0,0,'1889'),('2019-03-27',1891,435,3,'会计核算部',0,'2019-03-27 10:55:53',257,NULL,827,'2019-03-27 10:56:01',3,0,0,'1890'),('2019-03-27',1892,435,14,'数据信息部',0,'2019-03-27 10:56:01',258,NULL,813,'2019-03-27 10:58:58',3,0,0,'1891'),('2019-03-27',1893,435,7,'运营管理部',0,'2019-03-27 10:58:58',259,NULL,829,'2019-03-27 10:59:18',14,0,0,'1892'),('2019-03-27',1894,435,14,'数据信息部',0,'2019-03-27 10:59:18',258,NULL,814,'2019-03-27 11:20:29',7,0,0,'1893'),('2019-03-27',1895,435,4,'总经理',0,'2019-03-27 11:20:29',260,NULL,830,'2019-03-27 11:20:52',14,0,0,'1894'),('2019-03-27',1896,435,14,'数据信息部',0,'2019-03-27 11:20:52',258,NULL,816,'2019-03-27 12:32:42',4,0,0,'1895'),('2019-03-27',1897,436,14,'数据信息部',0,'2019-03-27 12:34:47',384,NULL,842,'2019-03-27 12:36:15',0,0,0,'0'),('2019-03-27',1898,436,4,'总经理',0,'2019-03-27 12:36:15',385,'原则同意',843,'2019-03-27 12:37:41',14,0,0,'1897'),('2019-03-27',1899,436,7,'运营管理部',0,'2019-03-27 12:36:15',385,NULL,843,'2019-03-27 12:42:53',14,0,0,'1897'),('2019-03-27',1900,436,8,'业务部',0,'2019-03-27 12:36:15',385,NULL,843,'2019-03-27 12:38:08',14,0,0,'1897'),('2019-03-27',1901,436,3,'会计核算部',0,'2019-03-27 12:36:15',385,NULL,843,'2019-03-27 12:38:30',14,0,0,'1897'),('2019-03-27',1902,436,5,'法律合规部',0,'2019-03-27 12:36:15',385,NULL,843,'2019-03-27 12:45:02',14,0,0,'1897'),('2019-03-27',1903,436,6,'风险管理部',0,'2019-03-27 12:36:15',385,NULL,843,'2019-03-27 12:45:23',14,0,0,'1897'),('2019-03-27',1904,436,14,'数据信息部',0,'2019-03-27 12:45:23',386,NULL,844,'2019-03-27 12:52:11',-2,0,0,'1898,1899,1900,1901,1902,1903'),('2019-03-27',1905,437,12,'业务部',0,'2019-03-27 12:55:57',305,NULL,845,'2019-03-27 12:57:37',0,0,0,'0'),('2019-03-27',1906,437,8,'业务部',0,'2019-03-27 12:57:37',306,'同意',846,'2019-03-27 13:23:40',12,0,0,'1905'),('2019-03-27',1907,437,4,'总经理',0,'2019-03-27 13:23:40',307,NULL,848,'2019-03-27 13:23:57',8,0,0,'1906'),('2019-03-27',1908,437,5,'法律合规部',0,'2019-03-27 13:23:57',311,'同意条款',850,'2019-03-27 13:24:42',4,0,0,'1907'),('2019-03-27',1909,437,12,'业务部',0,'2019-03-27 13:24:42',313,NULL,853,'2019-03-27 13:30:41',5,0,0,'1908'),('2019-03-27',1911,437,16,'运营管理部',0,'2019-03-27 13:30:41',387,NULL,854,'2019-03-27 13:33:34',12,0,0,'1909'),('2019-03-27',1912,437,12,'业务部',0,'2019-03-27 13:33:34',313,NULL,852,'2019-03-27 13:34:43',16,0,0,'1911'),('2019-03-27',1913,438,12,'业务部',0,'2019-03-27 13:34:43',268,NULL,757,'2019-03-27 13:38:54',0,0,0,'0'),('2019-03-27',1914,438,8,'业务部',0,'2019-03-27 13:38:54',269,'同意用印外带，注意及时归还',758,'2019-03-27 13:56:59',12,0,0,'1913'),('2019-03-27',1915,438,4,'总经理',0,'2019-03-27 13:56:59',270,NULL,761,'2019-03-27 13:57:56',8,0,0,'1914'),('2019-03-27',1916,438,5,'法律合规部',0,'2019-03-27 13:57:56',271,NULL,765,'2019-03-27 13:58:13',4,0,0,'1915'),('2019-03-27',1917,438,4,'总经理',0,'2019-03-27 13:58:13',315,NULL,767,'2019-03-27 13:59:24',5,0,0,'1916'),('2019-03-27',1918,438,16,'运营管理部',0,'2019-03-27 13:59:24',370,NULL,773,'2019-03-27 13:59:57',4,0,0,'1917'),('2019-03-27',1919,438,16,'运营管理部',0,'2019-03-27 13:59:57',371,NULL,772,'2019-03-27 14:59:35',16,0,0,'1918'),('2019-03-06',1920,421,7,'运营管理部',0,'2019-03-27 15:03:50',269,NULL,758,'2019-03-27 15:04:07',16,0,0,'1789'),('2019-03-06',1921,421,7,'运营管理部',0,'2019-03-27 15:04:07',270,NULL,761,'2019-03-27 15:04:35',7,0,0,'1920'),('2019-03-06',1922,421,5,'法律合规部',0,'2019-03-27 15:04:35',271,NULL,765,'2019-03-27 15:04:54',7,0,0,'1921'),('2019-03-06',1923,421,4,'总经理',0,'2019-03-27 15:04:54',315,NULL,767,'2019-03-27 15:05:10',5,0,0,'1922'),('2019-03-06',1924,421,16,'运营管理部',0,'2019-03-27 15:05:10',370,NULL,773,'2019-03-27 15:05:27',4,0,0,'1923'),('2019-03-06',1925,421,16,'运营管理部',0,'2019-03-27 15:05:27',371,NULL,772,'2019-03-27 15:05:54',16,0,0,'1924'),('2019-03-27',1926,439,12,'业务部',0,'2019-03-27 15:09:05',268,NULL,757,'2019-03-27 15:10:05',0,0,0,'0'),('2019-03-27',1927,439,8,'业务部',0,'2019-03-27 15:10:05',269,'同意用印，但不能外带',758,'2019-03-27 15:10:30',12,0,0,'1926'),('2019-03-27',1928,439,4,'总经理',0,'2019-03-27 15:10:30',270,NULL,761,'2019-03-27 15:10:42',8,0,0,'1927'),('2019-03-27',1929,439,5,'法律合规部',0,'2019-03-27 15:10:42',271,NULL,765,'2019-03-27 15:10:54',4,0,0,'1928'),('2019-03-27',1930,439,4,'总经理',0,'2019-03-27 15:10:54',315,NULL,767,'2019-03-27 15:11:09',5,0,0,'1929'),('2019-03-27',1931,439,16,'运营管理部',0,'2019-03-27 15:11:09',370,NULL,773,'2019-03-27 15:11:32',4,0,0,'1930'),('2019-03-27',1932,439,16,'运营管理部',0,'2019-03-27 15:11:32',371,NULL,772,'2019-03-27 15:24:43',16,0,0,'1931'),('2019-03-27',1933,440,16,'运营管理部',0,'2019-03-27 15:28:42',324,NULL,785,'2019-03-27 15:29:30',0,0,0,'0'),('2019-03-27',1934,440,7,'运营管理部',0,'2019-03-27 15:29:30',325,NULL,786,'2019-03-27 15:29:51',16,0,0,'1933'),('2019-03-27',1935,440,5,'法律合规部',0,'2019-03-27 15:29:51',327,NULL,791,'2019-03-27 15:30:07',7,0,0,'1934'),('2019-03-27',1936,440,16,'运营管理部',0,'2019-03-27 15:30:07',374,NULL,793,'2019-03-27 15:30:36',5,0,0,'1935'),('2019-03-27',1937,440,16,'运营管理部',0,'2019-03-27 15:30:36',375,NULL,795,'2019-03-27 15:33:17',16,0,0,'1936'),('2019-03-27',1938,440,16,'运营管理部',0,'2019-03-27 15:33:17',374,NULL,794,'2019-03-27 15:33:29',16,0,0,'1937'),('2019-03-27',1939,441,16,'运营管理部',0,'2019-03-27 15:33:29',268,NULL,NULL,NULL,0,0,0,'0'),('2019-04-02',1940,442,13,'数据信息部',0,'2019-04-02 01:59:37',324,'情况详见意见附件',785,'2019-04-02 06:13:41',0,0,0,'0'),('2019-04-02',1942,442,14,'数据信息部',0,'2019-04-02 06:13:41',325,'同意合同内容',786,'2019-04-02 06:35:15',13,0,0,'1940'),('2019-04-02',1943,442,5,'法律合规部',0,'2019-04-02 06:35:15',327,NULL,791,'2019-04-02 07:05:31',14,0,0,'1942'),('2019-04-02',1945,442,13,'数据信息部',0,'2019-04-02 07:05:31',374,NULL,793,'2019-04-02 07:41:02',5,0,0,'1943'),('2019-04-02',1946,442,16,'运营管理部',0,'2019-04-02 07:41:02',375,NULL,795,'2019-04-02 08:27:59',13,0,0,'1945'),('2019-04-02',1947,442,13,'数据信息部',0,'2019-04-02 08:27:59',374,NULL,794,'2019-04-02 08:28:45',16,0,0,'1946'),('2019-04-09',1948,443,13,'数据信息部',0,'2019-04-09 09:58:54',324,'呈领导审批',785,'2019-04-09 10:00:54',0,0,0,'0'),('2019-04-09',1949,443,14,'数据信息部',0,'2019-04-09 10:00:54',325,NULL,786,'2019-04-09 10:04:25',13,0,0,'1948'),('2019-04-09',1950,443,5,'法律合规部',0,'2019-04-09 10:04:25',327,'请详见意见附件说明',791,'2019-04-09 10:06:51',14,0,0,'1949'),('2019-04-09',1951,443,13,'数据信息部',0,'2019-04-09 10:06:51',374,NULL,793,'2019-04-09 10:10:22',5,0,0,'1950'),('2019-04-09',1952,443,16,'运营管理部',0,'2019-04-09 10:10:22',375,'完成',795,'2019-04-09 10:16:02',13,0,0,'1951'),('2019-04-09',1953,443,13,'数据信息部',0,'2019-04-09 10:16:02',374,NULL,793,'2019-04-09 10:17:57',16,0,0,'1952'),('2019-04-09',1955,443,16,'运营管理部',0,'2019-04-09 10:17:57',375,NULL,795,'2019-04-09 10:19:09',13,0,0,'1953'),('2019-04-09',1956,443,13,'数据信息部',0,'2019-04-09 10:19:09',374,NULL,794,'2019-04-09 10:19:19',16,0,0,'1955'),('2019-04-09',1958,446,12,'业务部',0,'2019-04-09 10:36:06',237,NULL,796,'2019-04-09 10:36:59',0,0,0,'0'),('2019-04-09',1959,446,8,'业务部',0,'2019-04-09 10:36:59',238,'同意立项',797,'2019-04-09 10:37:35',12,0,0,'1958'),('2019-04-09',1960,446,4,'总经理',0,'2019-04-09 10:37:35',239,NULL,799,'2019-04-09 10:40:45',8,0,0,'1959'),('2019-04-09',1961,446,7,'运营管理部',0,'2019-04-09 10:40:45',376,NULL,810,'2019-04-09 10:40:59',4,0,0,'1960'),('2019-04-09',1962,446,4,'总经理',0,'2019-04-09 10:40:59',377,NULL,807,'2019-04-09 10:41:09',7,0,0,'1961'),('2019-04-09',1963,446,12,'业务部',0,'2019-04-09 10:41:09',244,NULL,809,'2019-04-09 10:43:01',4,0,0,'1962'),('2019-04-09',1964,447,12,'业务部',0,'2019-04-09 10:45:33',247,NULL,468,'2019-04-09 10:46:36',0,0,0,'0'),('2019-04-09',1965,447,8,'业务部',0,'2019-04-09 10:46:36',248,'同意材料内容',469,'2019-04-09 10:47:15',12,0,0,'1964'),('2019-04-09',1966,447,4,'总经理',0,'2019-04-09 10:47:15',249,NULL,472,'2019-04-09 10:47:36',8,0,0,'1965'),('2019-04-09',1967,448,12,'业务部',0,'2019-04-09 10:48:51',251,'呈领导审查审议',812,'2019-04-09 10:49:21',0,0,0,'0'),('2019-04-09',1968,448,14,'数据信息部',0,'2019-04-09 10:49:21',258,NULL,831,'2019-04-09 10:50:06',12,0,0,'1967'),('2019-04-09',1969,448,18,'法律合规部',0,'2019-04-09 10:50:06',254,'法规没问题',817,'2019-04-09 10:50:34',14,0,8,'1968'),('2019-04-09',1970,448,5,'法律合规部',0,'2019-04-09 10:50:34',379,'同意',822,'2019-04-09 10:51:01',18,0,0,'1969'),('2019-04-09',1971,448,5,'法律合规部',0,'2019-04-09 10:51:01',380,NULL,835,'2019-04-09 10:51:06',5,0,0,'1970'),('2019-04-09',1972,448,14,'数据信息部',0,'2019-04-09 10:51:06',258,NULL,832,'2019-04-09 10:51:46',5,0,0,'1971'),('2019-04-09',1973,448,19,'风险管理部',0,'2019-04-09 10:51:46',381,'风险审查通过',836,'2019-04-09 10:52:38',14,0,8,'1972'),('2019-04-09',1974,448,6,'风险管理部',0,'2019-04-09 10:52:38',382,NULL,838,'2019-04-09 10:53:40',19,0,0,'1973'),('2019-04-09',1975,448,6,'风险管理部',0,'2019-04-09 10:53:40',383,'同意',840,'2019-04-09 10:53:51',6,0,0,'1974'),('2019-04-09',1976,448,14,'数据信息部',0,'2019-04-09 10:53:51',258,NULL,833,'2019-04-09 10:54:02',6,0,0,'1975'),('2019-04-09',1977,448,9,'会计核算部',0,'2019-04-09 10:54:02',255,NULL,823,'2019-04-09 10:54:12',14,0,8,'1976'),('2019-04-09',1978,448,3,'会计核算部',0,'2019-04-09 10:54:12',256,'财务审核通过',825,'2019-04-09 10:54:43',9,0,0,'1977'),('2019-04-09',1979,448,3,'会计核算部',0,'2019-04-09 10:54:43',257,NULL,827,'2019-04-09 10:54:46',3,0,0,'1978'),('2019-04-09',1980,448,14,'数据信息部',0,'2019-04-09 10:54:46',258,NULL,813,'2019-04-09 10:55:04',3,0,0,'1979'),('2019-04-09',1981,448,7,'运营管理部',0,'2019-04-09 10:55:04',259,'同意',829,'2019-04-09 10:55:18',14,0,0,'1980'),('2019-04-09',1982,448,14,'数据信息部',0,'2019-04-09 10:55:18',258,NULL,814,'2019-04-09 10:55:29',7,0,0,'1981'),('2019-04-09',1983,448,4,'总经理',0,'2019-04-09 10:55:29',260,'同意',830,'2019-04-09 10:55:45',14,0,0,'1982'),('2019-04-09',1984,448,14,'数据信息部',0,'2019-04-09 10:55:45',258,NULL,816,'2019-04-09 10:59:35',4,0,0,'1983'),('2019-04-09',1985,449,14,'数据信息部',0,'2019-04-09 11:01:25',384,NULL,842,'2019-04-09 11:03:20',0,0,0,'0'),('2019-04-09',1990,449,4,'总经理',0,'2019-04-09 11:03:20',385,'原则同意',843,'2019-04-09 11:05:19',14,0,0,'1985'),('2019-04-09',1991,449,7,'运营管理部',0,'2019-04-09 11:03:20',385,'同意',843,'2019-04-09 11:03:52',14,0,0,'1985'),('2019-04-09',1992,449,8,'业务部',0,'2019-04-09 11:03:20',385,NULL,843,'2019-04-09 11:04:12',14,0,0,'1985'),('2019-04-09',1993,449,3,'会计核算部',0,'2019-04-09 11:03:20',385,NULL,843,'2019-04-09 11:04:51',14,0,0,'1985'),('2019-04-09',1994,449,14,'数据信息部',0,'2019-04-09 11:05:19',386,NULL,844,'2019-04-09 11:06:55',-2,0,0,'1990,1991,1992,1993'),('2019-04-09',1995,450,12,'业务部',0,'2019-04-09 11:09:57',305,NULL,845,'2019-04-09 11:10:43',0,0,0,'0'),('2019-04-09',1996,450,8,'业务部',0,'2019-04-09 11:10:43',306,'注意付款条件',846,'2019-04-09 11:21:00',12,0,0,'1995'),('2019-04-09',1997,450,4,'总经理',0,'2019-04-09 11:21:00',307,'同意',848,'2019-04-09 11:21:17',8,0,0,'1996'),('2019-04-09',1998,450,5,'法律合规部',0,'2019-04-09 11:21:17',311,'同意',850,'2019-04-09 11:21:57',4,0,0,'1997'),('2019-04-09',1999,450,12,'业务部',0,'2019-04-09 11:21:57',313,NULL,853,'2019-04-09 11:23:47',5,0,0,'1998'),('2019-04-09',2001,450,16,'运营管理部',0,'2019-04-09 11:23:47',387,NULL,854,'2019-04-09 11:28:19',12,0,0,'1999'),('2019-04-09',2002,450,12,'业务部',0,'2019-04-09 11:28:19',313,NULL,853,'2019-04-09 11:31:14',16,0,0,'2001'),('2019-04-09',2004,450,16,'运营管理部',0,'2019-04-09 11:31:14',387,NULL,854,'2019-04-09 11:31:45',12,0,0,'2002'),('2019-04-09',2005,450,12,'业务部',0,'2019-04-09 11:31:45',313,NULL,852,'2019-04-09 11:32:00',16,0,0,'2004'),('2019-04-09',2006,452,12,'业务部',0,'2019-04-09 11:32:00',268,NULL,757,'2019-04-09 11:33:48',0,0,0,'0'),('2019-04-09',2007,452,8,'业务部',0,'2019-04-09 11:33:48',269,'同意用印，但不能外带',758,'2019-04-09 11:34:05',12,0,0,'2006'),('2019-04-09',2008,452,4,'总经理',0,'2019-04-09 11:34:05',270,NULL,761,'2019-04-09 11:34:19',8,0,0,'2007'),('2019-04-09',2009,452,5,'法律合规部',0,'2019-04-09 11:34:19',271,NULL,765,'2019-04-09 11:34:31',4,0,0,'2008'),('2019-04-09',2010,452,4,'总经理',0,'2019-04-09 11:34:31',315,NULL,767,'2019-04-09 11:34:44',5,0,0,'2009'),('2019-04-09',2011,452,16,'运营管理部',0,'2019-04-09 11:34:44',370,NULL,773,'2019-04-09 11:34:59',4,0,0,'2010'),('2019-04-09',2012,452,16,'运营管理部',0,'2019-04-09 11:34:59',371,NULL,772,'2019-04-09 11:35:24',16,0,0,'2011'),('2019-04-09',2013,453,12,'业务部',0,'2019-04-09 11:39:53',276,NULL,855,'2019-04-09 11:40:12',0,0,0,'0'),('2019-04-09',2014,453,8,'业务部',0,'2019-04-09 11:40:12',277,'同意付款',856,'2019-04-09 11:40:26',12,0,0,'2013'),('2019-04-09',2015,453,4,'总经理',0,'2019-04-09 11:40:26',278,NULL,867,'2019-04-09 11:40:38',8,0,0,'2014'),('2019-04-09',2016,453,5,'法律合规部',0,'2019-04-09 11:40:38',279,'合规审核通过',858,'2019-04-09 11:40:50',4,0,0,'2015'),('2019-04-09',2017,453,9,'会计核算部',0,'2019-04-09 11:40:50',280,'会计审核通过',860,'2019-04-09 11:41:02',5,0,0,'2016'),('2019-04-09',2018,453,3,'会计核算部',0,'2019-04-09 11:41:02',281,NULL,862,'2019-04-09 11:41:16',9,0,0,'2017'),('2019-04-09',2019,453,3,'会计核算部',0,'2019-04-09 11:41:16',282,NULL,869,'2019-04-09 11:41:20',3,0,0,'2018'),('2019-04-09',2020,453,4,'总经理',0,'2019-04-09 11:41:20',283,NULL,864,'2019-04-09 11:41:34',3,0,0,'2019'),('2019-04-09',2021,453,11,'会计核算部',0,'2019-04-09 11:41:34',284,NULL,866,'2019-04-09 11:42:22',4,0,0,'2020'),('2019-04-14',2022,454,16,'运营管理部',0,'2019-04-14 07:35:47',187,NULL,386,'2019-04-14 07:36:06',0,0,0,'0'),('2019-04-14',2023,454,7,'运营管理部',0,'2019-04-14 07:36:06',194,NULL,391,'2019-04-14 07:44:44',16,0,0,'2022'),('2019-04-14',2024,454,7,'运营管理部',0,'2019-04-14 07:44:44',188,NULL,393,'2019-04-14 07:44:48',7,0,0,'2023'),('2019-04-14',2025,454,4,'总经理',0,'2019-04-14 07:44:48',192,NULL,397,'2019-04-14 07:59:17',7,0,0,'2024'),('2019-04-14',2026,454,3,'会计核算部',0,'2019-04-14 07:59:17',189,NULL,402,'2019-04-14 07:59:33',4,0,0,'2025'),('2019-04-14',2027,454,11,'会计核算部',0,'2019-04-14 07:59:33',190,NULL,404,'2019-04-14 08:03:00',3,0,0,'2026'),('2019-04-14',2028,455,16,'运营管理部',0,'2019-04-14 08:04:13',187,NULL,NULL,NULL,0,0,0,'0'),('2019-04-17',2029,456,12,'业务部',0,'2019-04-17 16:12:16',45,NULL,884,'2019-04-17 16:13:38',0,0,0,'0'),('2019-04-17',2030,456,8,'业务部',0,'2019-04-17 16:13:38',46,NULL,885,'2019-04-17 16:14:15',12,0,0,'2029'),('2019-04-17',2031,456,4,'总经理',0,'2019-04-17 16:14:15',360,'同意',887,'2019-04-17 16:15:05',8,0,0,'2030'),('2019-04-17',2032,456,3,'会计核算部',0,'2019-04-17 16:15:05',47,NULL,892,'2019-04-17 16:15:33',4,0,0,'2031'),('2019-04-17',2033,456,5,'法律合规部',0,'2019-04-17 16:15:33',47,NULL,892,'2019-04-17 16:16:18',4,0,0,'2031'),('2019-04-17',2034,456,4,'总经理',0,'2019-04-17 16:16:18',360,NULL,889,'2019-04-17 16:16:38',8,0,0,'2030'),('2019-04-17',2035,456,12,'业务部',0,'2019-04-17 16:16:38',48,NULL,890,'2019-04-17 16:17:37',4,0,0,'2034'),('2019-04-17',2036,456,12,'业务部',0,'2019-04-17 16:17:37',49,'完成',893,'2019-04-17 16:17:56',12,0,1,'2035'),('2019-04-17',2037,456,12,'业务部',0,'2019-04-17 16:17:56',50,NULL,894,'2019-04-17 16:19:16',-2,0,0,'2036'),('2019-04-17',2038,457,12,'业务部',0,'2019-04-17 16:25:15',45,NULL,884,'2019-04-17 16:25:33',0,0,0,'0'),('2019-04-17',2039,457,8,'业务部',0,'2019-04-17 16:25:33',46,NULL,885,'2019-04-17 16:25:45',12,0,0,'2038'),('2019-04-17',2040,457,4,'总经理',0,'2019-04-17 16:25:45',360,'同意，无需办理',889,'2019-04-17 16:39:26',8,0,0,'2039'),('2019-04-17',2042,457,12,'业务部',0,'2019-04-17 16:39:26',48,NULL,890,'2019-04-17 16:40:10',4,0,0,'2040'),('2019-04-17',2043,457,13,'数据信息部',0,'2019-04-17 16:40:10',49,'liujiani-1',893,'2019-04-17 16:41:03',12,0,1,'2042'),('2019-04-17',2044,457,11,'会计核算部',0,'2019-04-17 16:40:10',49,'zhj',893,'2019-04-17 16:40:41',12,0,1,'2042'),('2019-04-17',2045,457,12,'业务部',0,'2019-04-17 16:41:03',50,NULL,895,'2019-04-18 13:04:59',-2,0,0,'2043,2044'),('2019-04-18',2046,458,12,'业务部',0,'2019-04-18 10:50:57',45,NULL,733,'2019-04-18 10:51:07',0,0,0,'0'),('2019-04-18',2047,458,8,'业务部',0,'2019-04-18 10:51:07',46,NULL,734,'2019-04-18 10:51:20',12,0,0,'2046'),('2019-04-18',2048,458,4,'总经理',0,'2019-04-18 10:51:20',360,NULL,736,'2019-04-18 10:51:33',8,0,0,'2047'),('2019-04-18',2049,458,9,'会计核算部',0,'2019-04-18 10:51:33',361,NULL,738,'2019-04-18 10:51:46',4,0,0,'2048'),('2019-04-18',2050,458,12,'业务部',0,'2019-04-18 10:51:46',48,NULL,740,'2019-04-18 10:52:41',9,0,0,'2049'),('2019-04-18',2051,458,15,'运营管理部',0,'2019-04-18 10:52:41',49,'我的部分ok / DHJ',741,'2019-04-18 10:53:22',12,0,1,'2050'),('2019-04-18',2052,458,13,'数据信息部',0,'2019-04-18 10:52:41',49,'ok / ljn',741,'2019-04-18 10:53:46',12,0,1,'2050'),('2019-04-18',2053,458,12,'业务部',0,'2019-04-18 10:53:46',50,NULL,743,'2019-04-18 13:04:24',-2,0,0,'2051,2052'),('2019-04-18',2060,458,15,'运营管理部',0,'2019-04-18 13:04:24',49,'二次 / dhj',741,'2019-04-18 13:08:10',12,0,1,'2053'),('2019-04-18',2061,458,13,'数据信息部',0,'2019-04-18 13:04:24',49,'二次 / ljn',741,'2019-04-18 13:06:51',12,0,1,'2053'),('2019-04-17',2062,457,13,'数据信息部',0,'2019-04-18 13:04:59',49,'二次 / ljn',893,'2019-04-18 13:07:10',12,0,0,'2042'),('2019-04-17',2063,457,11,'会计核算部',0,'2019-04-18 13:04:59',49,'二次 / zhj',893,'2019-04-18 13:07:35',12,0,0,'2042'),('2019-04-17',2064,457,12,'业务部',0,'2019-04-18 13:07:35',50,NULL,894,'2019-04-18 13:08:55',-2,0,0,'2062,2063'),('2019-04-18',2065,458,12,'业务部',0,'2019-04-18 13:08:10',50,NULL,742,'2019-04-18 13:09:16',-2,0,0,'2060,2061'),('2019-04-18',2087,462,12,'业务部',0,'2019-04-18 15:41:15',324,NULL,871,'2019-04-18 15:43:00',0,0,4,'0'),('2019-04-18',2088,462,8,'业务部',0,'2019-04-18 15:43:00',325,NULL,872,'2019-04-18 15:48:42',12,0,0,'2087'),('2019-04-18',2089,463,12,'业务部',0,'2019-04-18 15:45:09',324,NULL,871,'2019-04-18 15:46:49',0,0,4,'0'),('2019-04-18',2090,463,8,'业务部',0,'2019-04-18 15:46:49',325,NULL,872,'2019-04-18 15:51:00',12,0,0,'2089'),('2019-04-18',2091,462,18,'法律合规部',0,'2019-04-18 15:48:42',388,NULL,882,'2019-04-18 15:56:43',8,0,4,'2088'),('2019-04-18',2092,463,18,'法律合规部',0,'2019-04-18 15:51:00',388,NULL,882,'2019-04-18 15:58:52',8,0,4,'2090'),('2019-04-18',2094,462,5,'法律合规部',0,'2019-04-18 15:56:43',327,NULL,877,'2019-04-18 16:01:38',18,0,0,'2091'),('2019-04-18',2096,463,5,'法律合规部',0,'2019-04-18 15:58:52',327,NULL,877,'2019-04-18 16:01:55',18,0,0,'2092'),('2019-04-18',2097,462,12,'业务部',0,'2019-04-18 16:01:38',374,NULL,879,'2019-04-18 16:05:58',5,0,0,'2094'),('2019-04-18',2098,463,12,'业务部',0,'2019-04-18 16:01:55',374,NULL,879,'2019-04-18 16:03:24',5,0,0,'2096'),('2019-04-18',2099,463,16,'运营管理部',0,'2019-04-18 16:03:24',375,NULL,881,'2019-04-18 16:06:49',12,0,0,'2098'),('2019-04-18',2100,462,16,'运营管理部',0,'2019-04-18 16:05:58',375,NULL,881,'2019-04-18 16:09:41',12,0,0,'2097'),('2019-04-18',2101,463,12,'业务部',0,'2019-04-18 16:06:49',374,NULL,880,'2019-04-18 16:12:18',16,0,0,'2099'),('2019-04-18',2102,462,12,'业务部',0,'2019-04-18 16:09:41',374,NULL,880,'2019-04-18 16:12:00',16,0,0,'2100'),('2019-04-18',2103,464,12,'业务部',0,'2019-04-18 16:12:00',268,NULL,NULL,NULL,0,0,0,'0'),('2019-04-18',2104,465,12,'业务部',0,'2019-04-18 16:12:18',268,NULL,NULL,NULL,0,0,0,'0'),('2019-04-19',2105,466,12,'业务部',0,'2019-04-19 11:39:21',347,NULL,896,'2019-04-19 11:42:21',0,0,4,'0'),('2019-04-19',2106,466,8,'业务部',0,'2019-04-19 11:42:21',348,'设置尾款协议',897,'2019-04-19 11:43:34',12,0,0,'2105'),('2019-04-19',2107,466,4,'总经理',0,'2019-04-19 11:43:34',349,NULL,899,'2019-04-19 11:44:28',8,0,0,'2106'),('2019-04-19',2108,466,18,'法律合规部',0,'2019-04-19 11:44:28',389,NULL,906,'2019-04-19 11:46:29',4,0,4,'2107'),('2019-04-19',2110,466,5,'法律合规部',0,'2019-04-19 11:46:29',350,NULL,901,'2019-04-19 11:47:15',18,0,0,'2108'),('2019-04-19',2111,466,12,'业务部',0,'2019-04-19 11:47:15',351,NULL,903,'2019-04-19 11:49:25',5,0,0,'2110'),('2019-04-19',2112,466,16,'运营管理部',0,'2019-04-19 11:49:25',373,NULL,905,'2019-04-19 11:56:37',12,0,0,'2111'),('2019-04-19',2113,466,12,'业务部',0,'2019-04-19 11:56:37',351,NULL,904,'2019-04-19 11:57:46',16,0,0,'2112'),('2019-04-19',2114,467,12,'业务部',0,'2019-04-19 11:57:46',268,NULL,NULL,NULL,0,0,0,'0'),('2019-04-19',2115,468,12,'业务部',0,'2019-04-19 13:47:45',347,NULL,896,'2019-04-19 13:48:39',0,0,4,'0'),('2019-04-19',2116,468,8,'业务部',0,'2019-04-19 13:48:39',348,'同意',897,'2019-04-19 13:50:00',12,0,0,'2115'),('2019-04-19',2117,468,4,'总经理',0,'2019-04-19 13:50:00',349,NULL,899,'2019-04-19 13:51:31',8,0,0,'2116'),('2019-04-19',2118,468,18,'法律合规部',0,'2019-04-19 13:51:31',389,NULL,906,'2019-04-19 13:52:14',4,0,4,'2117'),('2019-04-19',2120,468,5,'法律合规部',0,'2019-04-19 13:52:14',350,NULL,901,'2019-04-19 13:52:35',18,0,0,'2118'),('2019-04-19',2121,468,12,'业务部',0,'2019-04-19 13:52:35',351,NULL,903,'2019-04-19 13:53:15',5,0,0,'2120'),('2019-04-19',2122,468,16,'运营管理部',0,'2019-04-19 13:53:15',373,NULL,905,'2019-04-19 13:53:37',12,0,0,'2121'),('2019-04-19',2123,468,12,'业务部',0,'2019-04-19 13:53:37',351,NULL,904,'2019-04-19 13:53:51',16,0,0,'2122'),('2019-04-19',2124,469,12,'业务部',0,'2019-04-19 13:53:51',268,NULL,NULL,NULL,0,0,0,'0'),('2019-04-19',2125,470,12,'业务部',0,'2019-04-19 16:03:38',305,NULL,908,'2019-04-19 16:06:59',0,0,4,'0'),('2019-04-19',2126,470,8,'业务部',0,'2019-04-19 16:06:59',306,'注意付款条件',909,'2019-04-19 16:11:40',12,0,0,'2125'),('2019-04-19',2127,470,4,'总经理',0,'2019-04-19 16:11:40',307,NULL,911,'2019-04-19 16:12:24',8,0,0,'2126'),('2019-04-19',2128,470,18,'法律合规部',0,'2019-04-19 16:12:24',390,NULL,918,'2019-04-19 16:13:32',4,0,4,'2127'),('2019-04-19',2130,470,5,'法律合规部',0,'2019-04-19 16:13:32',311,NULL,913,'2019-04-19 16:14:12',18,0,0,'2128'),('2019-04-19',2131,470,12,'业务部',0,'2019-04-19 16:14:12',313,NULL,915,'2019-04-19 16:15:32',5,0,0,'2130'),('2019-04-19',2132,470,16,'运营管理部',0,'2019-04-19 16:15:32',387,NULL,917,'2019-04-19 16:16:53',12,0,0,'2131'),('2019-04-19',2133,470,12,'业务部',0,'2019-04-19 16:16:53',313,NULL,916,'2019-04-19 16:18:03',16,0,0,'2132'),('2019-04-19',2134,471,12,'业务部',0,'2019-04-19 16:18:03',268,NULL,NULL,NULL,0,0,0,'0'),('2019-04-19',2135,472,12,'业务部',0,'2019-04-19 16:26:17',305,NULL,908,'2019-04-19 16:27:23',0,0,4,'0'),('2019-04-19',2136,472,8,'业务部',0,'2019-04-19 16:27:23',306,'同意',909,'2019-04-19 16:28:11',12,0,0,'2135'),('2019-04-19',2137,472,4,'总经理',0,'2019-04-19 16:28:11',307,NULL,911,'2019-04-19 16:32:03',8,0,0,'2136'),('2019-04-19',2138,472,18,'法律合规部',0,'2019-04-19 16:32:03',390,NULL,918,'2019-04-19 16:33:45',4,0,4,'2137'),('2019-04-19',2140,472,5,'法律合规部',0,'2019-04-19 16:33:45',311,NULL,913,'2019-04-19 16:34:03',18,0,0,'2138'),('2019-04-19',2141,472,12,'业务部',0,'2019-04-19 16:34:03',313,NULL,915,'2019-04-19 16:35:39',5,0,0,'2140'),('2019-04-19',2142,472,16,'运营管理部',0,'2019-04-19 16:35:39',387,NULL,917,'2019-04-19 16:35:56',12,0,0,'2141'),('2019-04-19',2143,472,12,'业务部',0,'2019-04-19 16:35:56',313,NULL,916,'2019-04-19 16:36:35',16,0,0,'2142'),('2019-04-19',2144,473,12,'业务部',0,'2019-04-19 16:36:35',268,NULL,NULL,NULL,0,0,0,'0');
/*!40000 ALTER TABLE `Pf_A_BizProcRcd` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_A_BizProcRcd_22` AFTER DELETE ON `Pf_A_BizProcRcd`
  FOR EACH ROW
BEGIN
 	# 删除工作流处理记录后，对处理意见附件标记删除
 	update Pf_A_AttachInfo set DelTag='Y' where PrimaryName='Pf_A_BizProcRcd' and PrimaryID=old.WorkItem;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Pf_C_GrantHis`
--

DROP TABLE IF EXISTS `Pf_C_GrantHis`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_C_GrantHis` (
  `ID` smallint(5) unsigned NOT NULL AUTO_INCREMENT,
  `GrantFrom` smallint(5) unsigned NOT NULL,
  `BizCode` tinyint(3) unsigned NOT NULL,
  `GrantTo` smallint(5) unsigned NOT NULL,
  `AccTs` datetime NOT NULL,
  `AccNote` varchar(100) NOT NULL DEFAULT '',
  `EndTs` datetime DEFAULT NULL,
  PRIMARY KEY (`ID`),
  KEY `GrantFrom` (`GrantFrom`),
  KEY `BizCode` (`BizCode`),
  KEY `GrantTo` (`GrantTo`),
  CONSTRAINT `Pf_C_GrantHis_FK1` FOREIGN KEY (`GrantFrom`) REFERENCES `Pf_M_Usr` (`ID`),
  CONSTRAINT `Pf_C_GrantHis_FK2` FOREIGN KEY (`BizCode`) REFERENCES `Pf_M_Biz` (`Code`),
  CONSTRAINT `Pf_C_GrantHis_FK3` FOREIGN KEY (`GrantTo`) REFERENCES `Pf_M_Usr` (`ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_C_GrantHis`
--

LOCK TABLES `Pf_C_GrantHis` WRITE;
/*!40000 ALTER TABLE `Pf_C_GrantHis` DISABLE KEYS */;
/*!40000 ALTER TABLE `Pf_C_GrantHis` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `Pf_D_FullIndexCmdList`
--

DROP TABLE IF EXISTS `Pf_D_FullIndexCmdList`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_D_FullIndexCmdList` (
  `Seq` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `BizAppName` varchar(10) NOT NULL,
  `BizAppID` int(11) unsigned NOT NULL,
  `OperateType` char(1) NOT NULL DEFAULT '1',
  `RetryCnt` tinyint(4) unsigned NOT NULL DEFAULT '0',
  `ErrMsg` varchar(1000) DEFAULT NULL,
  `CmdFlag` char(1) NOT NULL DEFAULT 'I',
  `CmdExeTs` datetime DEFAULT NULL,
  PRIMARY KEY (`Seq`),
  UNIQUE KEY `Pf_D_FullIndexCmdList_UK` (`BizAppName`,`BizAppID`,`OperateType`)
) ENGINE=InnoDB AUTO_INCREMENT=523 DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_D_FullIndexCmdList`
--

LOCK TABLES `Pf_D_FullIndexCmdList` WRITE;
/*!40000 ALTER TABLE `Pf_D_FullIndexCmdList` DISABLE KEYS */;
INSERT INTO `Pf_D_FullIndexCmdList` VALUES (457,'报销申请',41,'1',0,NULL,'Y','2018-12-12 22:08:48'),(458,'信息发布',188,'0',0,NULL,'Y','2019-01-11 04:01:31'),(459,'信息发布',187,'0',0,NULL,'Y','2019-01-11 04:01:42'),(460,'信息发布',186,'0',0,NULL,'Y','2019-01-11 04:03:34'),(461,'信息发布',184,'0',0,NULL,'Y','2019-01-11 04:04:09'),(462,'信息发布',183,'0',0,NULL,'Y','2019-01-11 04:06:03'),(468,'非业务类合同管理',6,'0',0,NULL,'Y','2019-03-06 19:48:53'),(469,'非业务类合同管理',6,'1',0,NULL,'Y','2019-04-18 16:12:20'),(471,'合同审查',9,'0',0,NULL,'Y','2019-03-12 22:21:19'),(473,'立项申请',11,'0',0,NULL,'Y','2019-03-22 10:23:48'),(474,'立项申请',11,'1',0,NULL,'Y','2019-04-09 10:43:03'),(475,'尽职调查材料审批',8,'1',0,NULL,'Y','2019-04-09 10:47:38'),(476,'尽职调查材料审批',9,'1',0,NULL,'Y','2019-04-09 10:47:38'),(478,'项目审查',10,'0',0,NULL,'Y','2019-03-23 21:21:58'),(479,'项目审查',10,'1',0,NULL,'Y','2019-04-09 10:59:36'),(481,'项目审批',8,'0',0,NULL,'Y','2019-03-25 17:04:39'),(482,'项目审批',8,'1',0,NULL,'Y','2019-04-09 11:06:56'),(484,'合同审批',10,'0',0,NULL,'Y','2019-03-26 13:19:01'),(485,'合同审批',10,'1',0,NULL,'Y','2019-04-19 16:36:38'),(486,'立项申请',14,'1',0,NULL,'Y','2019-04-09 10:43:02'),(487,'尽职调查材料审批',10,'1',0,NULL,'Y','2019-04-09 10:47:37'),(488,'项目付款审批',25,'1',0,NULL,'Y','2019-04-09 11:42:23'),(489,'项目审查',11,'1',0,NULL,'Y','2019-04-09 10:59:37'),(490,'项目审批',9,'1',0,NULL,'Y','2019-04-09 11:06:56'),(491,'合同审批',11,'1',0,NULL,'Y','2019-04-19 16:36:38'),(492,'印章、证照使用审批',44,'1',0,NULL,'Y','2019-04-19 11:57:48'),(493,'印章、证照使用审批',41,'1',7,'解析文件出错:C:\\E_Data\\coaqy\\UploadTmp\\13_20181212_22_01_43\\720.doc__C:\\E_Data\\coaqy\\UploadTmp\\13_20181212_22_01_43\\720.doc (系统找不到指定的路径。)','N','2019-04-19 11:57:48'),(494,'合同审查',9,'1',0,NULL,'Y','2019-04-19 13:53:53'),(495,'印章、证照使用审批',45,'1',0,NULL,'Y','2019-04-19 11:57:48'),(496,'非业务类合同管理',7,'1',0,NULL,'Y','2019-04-18 16:12:20'),(497,'非业务类合同管理',8,'1',0,NULL,'Y','2019-04-18 16:12:20'),(499,'非业务类合同管理',9,'0',0,NULL,'Y','2019-04-09 10:17:45'),(500,'非业务类合同管理',9,'1',0,NULL,'Y','2019-04-18 16:12:20'),(501,'立项申请',15,'1',0,NULL,'Y','2019-04-09 10:43:03'),(502,'尽职调查材料审批',11,'1',0,NULL,'Y','2019-04-09 10:47:38'),(503,'项目审查',12,'1',0,NULL,'Y','2019-04-09 10:59:35'),(504,'项目审批',10,'1',0,NULL,'Y','2019-04-09 11:06:56'),(506,'合同审批',12,'0',0,NULL,'Y','2019-04-09 11:30:58'),(507,'合同审批',12,'1',0,NULL,'Y','2019-04-19 16:36:38'),(508,'印章、证照使用审批',50,'1',0,NULL,'Y','2019-04-19 11:57:48'),(509,'项目付款审批',26,'1',0,NULL,'Y','2019-04-09 11:42:22'),(510,'借款申请',12,'1',0,NULL,'Y','2019-04-14 08:03:06'),(511,'请示签报',6,'1',0,NULL,'Y','2019-04-18 13:09:18'),(512,'请示签报',7,'1',0,NULL,'Y','2019-04-18 13:09:18'),(513,'请示签报',8,'1',0,NULL,'Y','2019-04-18 13:09:17'),(515,'非业务类合同管理',11,'0',0,NULL,'Y','2019-04-18 15:39:21'),(516,'非业务类合同管理',10,'0',0,NULL,'Y','2019-04-18 15:39:31'),(517,'非业务类合同管理',12,'1',0,NULL,'Y','2019-04-18 16:12:21'),(518,'非业务类合同管理',13,'1',0,NULL,'Y','2019-04-18 16:12:21'),(519,'合同审查',10,'1',0,NULL,'Y','2019-04-19 13:53:53'),(520,'合同审查',11,'1',0,NULL,'Y','2019-04-19 13:53:53'),(521,'合同审批',13,'1',0,NULL,'Y','2019-04-19 16:36:38'),(522,'合同审批',14,'1',0,NULL,'Y','2019-04-19 16:36:38');
/*!40000 ALTER TABLE `Pf_D_FullIndexCmdList` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_D_FullIndexCmdList_22` AFTER DELETE ON `Pf_D_FullIndexCmdList` FOR EACH ROW
BEGIN
	delete from Pf_D_IndexContentOfMainText where BizAppName=old.BizAppName and BizAppID=old.BizAppID;
    delete from Pf_D_IndexContentOfAttach where BizAppName=old.BizAppName and BizAppID=old.BizAppID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Pf_D_IndexContentOfAttach`
--

DROP TABLE IF EXISTS `Pf_D_IndexContentOfAttach`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_D_IndexContentOfAttach` (
  `BizAppName` varchar(10) NOT NULL,
  `BizAppID` int(11) unsigned NOT NULL,
  `Title` varchar(100) NOT NULL,
  `ViewUrl` varchar(100) NOT NULL,
  `FilePathName` varchar(100) NOT NULL,
  `UploadFileName` varchar(100) NOT NULL,
  `FileExt` varchar(5) NOT NULL,
  `FileSize` int(11) unsigned NOT NULL,
  `FileSeq` int(11) unsigned NOT NULL,
  PRIMARY KEY (`FileSeq`),
  CONSTRAINT `Pf_D_IndexContentOfAttach_FK1` FOREIGN KEY (`FileSeq`) REFERENCES `Pf_A_AttachInfo` (`Seq`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_D_IndexContentOfAttach`
--

LOCK TABLES `Pf_D_IndexContentOfAttach` WRITE;
/*!40000 ALTER TABLE `Pf_D_IndexContentOfAttach` DISABLE KEYS */;
INSERT INTO `Pf_D_IndexContentOfAttach` VALUES ('报销申请',41,'[刘佳妮]报销日常费用-[41]','../FileApp/BxSq/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//13_20181212_22_00_29//718.jpeg','20180719_1jpeg.jpeg','.jpeg',22405,718),('报销申请',41,'[刘佳妮]报销日常费用-[41]','../FileApp/BxSq/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//13_20181212_22_01_43//720.doc','机关财务记账系统需求.doc','.doc',31744,720),('合同审查',9,'北京雷特世纪网络科技有限公司收购合同','../EntApps/HtSc/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//12_20190304_07_44_35//751.doc','借款合同.doc','.doc',37376,751),('非业务类合同管理',6,'非业务类合同测试20190308','../FileApp/WjHq/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//16_20190306_18_45_48//757.xlsx','北京市异地安置审批表.xlsx','.xlsx',244887,757),('非业务类合同管理',6,'非业务类合同测试20190308','../FileApp/WjHq/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//16_20190306_18_45_48//758.docx','徐家宝仿鲁迅.docx','.docx',19484,758),('非业务类合同管理',6,'非业务类合同测试20190308','../FileApp/WjHq/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//16_20190306_18_45_48//759.docx','仿照鲁迅文笔《纪念昆山龙哥》.docx','.docx',18091,759),('非业务类合同管理',6,'非业务类合同测试20190308','../FileApp/WjHq/view.jsp?BizID=','C://E_Data//coaqy//app//FilePath1//201903//WjHq_A_Zt1C//760.xlsx','北京市异地安置审批表.xlsx','.xlsx',11742,760),('非业务类合同管理',6,'非业务类合同测试20190308','../FileApp/WjHq/view.jsp?BizID=','C://E_Data//coaqy//app//FilePath1//201903//WjHq_A_Zt1C//761.docx','徐家宝仿鲁迅.docx','.docx',19419,761),('非业务类合同管理',6,'非业务类合同测试20190308','../FileApp/WjHq/view.jsp?BizID=','C://E_Data//coaqy//app//FilePath1//201903//WjHq_A_Zt1C//762.docx','仿照鲁迅文笔《纪念昆山龙哥》.docx','.docx',18077,762),('非业务类合同管理',6,'非业务类合同测试20190308','../FileApp/WjHq/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//5_20190306_18_50_57//763.docx','memo.docx','.docx',17710,763),('立项申请',11,'杜斌【内蒙古饭店收购】立项申请','../EntApps/LxSq/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//12_20190321_17_23_27//769.xlsx','北京市异地安置审批表.xlsx','.xlsx',11742,769),('立项申请',11,'杜斌【内蒙古饭店收购】立项申请','../EntApps/LxSq/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//12_20190321_17_23_27//770.docx','第五部分  北京智控美信公司介绍.docx','.docx',22770,770),('尽职调查材料审批',8,'杜斌【内蒙古饭店收购】尽职调查材料审批','../EntApps/JzDc/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//12_20190322_10_57_42//772.doc','IEDS-2-78软件配置管理控制程序.doc','.doc',254976,772),('尽职调查材料审批',8,'杜斌【内蒙古饭店收购】尽职调查材料审批','../EntApps/JzDc/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//12_20190322_10_57_42//773.docx','IEDS-2-73软件产品设计和开发控制程序.docx','.docx',1075129,773),('尽职调查材料审批',9,'杜斌【雷特世纪收购】尽职调查材料审批','../EntApps/JzDc/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//12_20190322_14_31_02//774.docx','IEDS-2-85需求管理程序.docx','.docx',115504,774),('尽职调查材料审批',9,'杜斌【雷特世纪收购】尽职调查材料审批','../EntApps/JzDc/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//12_20190322_14_31_02//775.docx','IEDS-2-84项目监督与控制程序.docx','.docx',228748,775),('合同审批',10,'内蒙饭店收购合同-1','../EntApps/HtSp/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//12_20190326_11_51_34//782.xlsx','北京市异地安置审批表.xlsx','.xlsx',244941,782),('合同审批',10,'内蒙饭店收购合同-1','../EntApps/HtSp/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//12_20190326_11_51_34//783.doc','借款合同.doc','.doc',36864,783),('合同审批',10,'内蒙饭店收购合同-1','../EntApps/HtSp/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//12_20190326_11_51_34//784.docx','第五部分  北京智控美信公司介绍.docx','.docx',22828,784),('项目付款审批',25,'杜斌申请【内蒙饭店收购合同-1】立项项目合同付款','../EntApps/FkSp/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//12_20190326_14_53_51//791.docx','IEDS-2-85需求管理程序.docx','.docx',115504,791),('项目付款审批',25,'杜斌申请【内蒙饭店收购合同-1】立项项目合同付款','../EntApps/FkSp/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//12_20190326_14_53_51//792.docx','IEDS-2-84项目监督与控制程序.docx','.docx',228748,792),('立项申请',14,'杜斌【北京同天科技有限公司收购】立项申请','../EntApps/LxSq/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//12_20190327_10_21_32//794.docx','徐家宝仿鲁迅.docx','.docx',19419,794),('立项申请',14,'杜斌【北京同天科技有限公司收购】立项申请','../EntApps/LxSq/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//12_20190327_10_21_32//795.docx','第五部分  北京智控美信公司介绍.docx','.docx',22770,795),('尽职调查材料审批',10,'杜斌【北京同天科技有限公司收购】尽职调查材料审批','../EntApps/JzDc/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//12_20190327_10_36_54//797.doc','IEDS-系统部署方案-项目代码-YYMMDD-01.doc','.doc',105984,797),('尽职调查材料审批',10,'杜斌【北京同天科技有限公司收购】尽职调查材料审批','../EntApps/JzDc/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//12_20190327_10_36_54//798.doc','IEDS-测试计划-项目代码-YYMMDD-01.doc','.doc',168448,798),('合同审批',11,'北京同天科技收购合同-1','../EntApps/HtSp/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//12_20190327_12_56_57//805.xls','ExchangeAddressList.xls','.xls',560640,805),('合同审批',11,'北京同天科技收购合同-1','../EntApps/HtSp/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//12_20190327_12_56_57//806.doc','IEDS-系统测试报告-项目代码-YYMMDD-01.doc','.doc',148992,806),('合同审批',11,'北京同天科技收购合同-1','../EntApps/HtSp/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//12_20190327_12_56_57//807.doc','IEDS-系统操作手册-项目代码-YYMMDD-01.doc','.doc',83968,807),('非业务类合同管理',7,'打印机设置无边距测试','../FileApp/WjHq/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//16_20190327_15_29_09//817.doc','借款合同.doc','.doc',36864,817),('非业务类合同管理',7,'打印机设置无边距测试','../FileApp/WjHq/view.jsp?BizID=','C://E_Data//coaqy//app//FilePath2//201903//WjHq_A_Zt1C//818.doc','借款合同.doc','.doc',37888,818),('非业务类合同管理',8,'非业务类合同20190404','../FileApp/WjHq/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//13_20190402_02_32_18//822.xlsx','北京市异地安置审批表.xlsx','.xlsx',12117,822),('非业务类合同管理',8,'非业务类合同20190404','../FileApp/WjHq/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//13_20190402_02_32_18//823.docx','仿照鲁迅文笔《纪念昆山龙哥》.docx','.docx',18017,823),('非业务类合同管理',8,'非业务类合同20190404','../FileApp/WjHq/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//13_20190402_05_43_11//824.docx','1、汇报提纲.docx','.docx',1040445,824),('非业务类合同管理',8,'非业务类合同20190404','../FileApp/WjHq/view.jsp?BizID=','C://E_Data//coaqy//app//FilePath3//201904//WjHq_A_Zt1C//825.xlsx','北京市异地安置审批表.xlsx','.xlsx',12117,825),('非业务类合同管理',8,'非业务类合同20190404','../FileApp/WjHq/view.jsp?BizID=','C://E_Data//coaqy//app//FilePath3//201904//WjHq_A_Zt1C//826.docx','仿照鲁迅文笔《纪念昆山龙哥》.docx','.docx',18025,826),('非业务类合同管理',8,'非业务类合同20190404','../FileApp/WjHq/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//5_20190402_06_51_25//827.docx','M1、科电云OA样机主要业务模型图.docx','.docx',46308,827),('非业务类合同管理',9,'xxx非业务合同审批20190409','../FileApp/WjHq/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//13_20190409_09_59_49//831.xlsx','北京市异地安置审批表.xlsx','.xlsx',244937,831),('非业务类合同管理',9,'xxx非业务合同审批20190409','../FileApp/WjHq/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//13_20190409_09_59_49//832.doc','借款合同.doc','.doc',37376,832),('非业务类合同管理',9,'xxx非业务合同审批20190409','../FileApp/WjHq/view.jsp?BizID=','C://E_Data//coaqy//app//FilePath2//201904//WjHq_A_Zt1C//833.xlsx','北京市异地安置审批表.xlsx','.xlsx',12110,833),('非业务类合同管理',9,'xxx非业务合同审批20190409','../FileApp/WjHq/view.jsp?BizID=','C://E_Data//coaqy//app//FilePath2//201904//WjHq_A_Zt1C//834.doc','借款合同.doc','.doc',37888,834),('非业务类合同管理',9,'xxx非业务合同审批20190409','../FileApp/WjHq/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//5_20190409_10_05_39//835.docx','IEDS-2-73软件产品设计和开发控制程序.docx','.docx',1075129,835),('非业务类合同管理',9,'xxx非业务合同审批20190409','../FileApp/WjHq/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//5_20190409_10_06_20//836.docx','IEDS-需求分析说明书-项目代码-YYMMDD-01.docx','.docx',46530,836),('立项申请',15,'杜斌【踏歌行公司收购】立项申请','../EntApps/LxSq/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//12_20190409_10_36_51//840.doc','IEDS-技术选型方案-项目代码-YYMMDD-01.doc','.doc',82432,840),('立项申请',15,'杜斌【踏歌行公司收购】立项申请','../EntApps/LxSq/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//12_20190409_10_36_51//841.xlsx','IEDS-需求调研表-项目代码-YYMMDD-01.xlsx','.xlsx',10998,841),('尽职调查材料审批',11,'杜斌【踏歌行公司收购】尽职调查材料审批','../EntApps/JzDc/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//12_20190409_10_46_17//843.xls','IEDS-产品集成检查单-项目代码-YYMMDD-01.xls','.xls',37376,843),('尽职调查材料审批',11,'杜斌【踏歌行公司收购】尽职调查材料审批','../EntApps/JzDc/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//12_20190409_10_46_17//844.docx','IEDS-产品集成计划-项目代码-YYMMDD-01.docx','.docx',38936,844),('合同审批',12,'踏歌行业务合同20190409','../EntApps/HtSp/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//12_20190409_11_10_30//851.xlsx','北京市异地安置审批表.xlsx','.xlsx',244943,851),('合同审批',12,'踏歌行业务合同20190409','../EntApps/HtSp/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//12_20190409_11_10_30//852.docx','仿照鲁迅文笔《纪念昆山龙哥》.docx','.docx',18014,852),('项目付款审批',26,'杜斌申请【踏歌行业务合同20190409】立项项目合同付款','../EntApps/FkSp/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//12_20190409_11_40_08//858.jpeg','1.jpeg','.jpeg',59756,858),('请示签报',6,'签报事项20190417-1','../FileApp/QsQb/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//12_20190417_16_13_02//861.docx','庆源OA开发计划.docx','.docx',25601,861),('请示签报',7,'签报事项20190417-2','../FileApp/QsQb/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//12_20190417_16_25_28//862.pdf','20180709中小企业服务平台方案.pdf','.pdf',212999,862),('非业务类合同管理',12,'我方自拟非业务类合同20190418-1','../FileApp/WjHq/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//12_20190418_15_41_45//876.docx','仿照鲁迅文笔《纪念昆山龙哥》.docx','.docx',18104,876),('非业务类合同管理',12,'我方自拟非业务类合同20190418-1','../FileApp/WjHq/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//12_20190418_15_41_45//877.xlsx','北京市异地安置审批表.xlsx','.xlsx',244926,877),('非业务类合同管理',13,'对方提供非业务合同20190418-2','../FileApp/WjHq/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//12_20190418_15_45_48//878.xls','科电人员2019年剩余年假统计表.xls','.xls',188416,878),('非业务类合同管理',13,'对方提供非业务合同20190418-2','../FileApp/WjHq/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//12_20190418_15_45_48//879.docx','HR602职位说明书模板.docx','.docx',26655,879),('非业务类合同管理',12,'我方自拟非业务类合同20190418-1','../FileApp/WjHq/view.jsp?BizID=','C://E_Data//coaqy//app//FilePath2//201904//WjHq_A_Zt1C//880.docx','仿照鲁迅文笔《纪念昆山龙哥》.docx','.docx',18229,880),('非业务类合同管理',12,'我方自拟非业务类合同20190418-1','../FileApp/WjHq/view.jsp?BizID=','C://E_Data//coaqy//app//FilePath1//201904//WjHq_A_Zt1C//881.xlsx','北京市异地安置审批表.xlsx','.xlsx',12121,881),('非业务类合同管理',12,'我方自拟非业务类合同20190418-1','../FileApp/WjHq/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//18_20190418_15_56_10//882.doc','出差员工住房补助申请表-刘赣平.doc','.doc',46592,882),('非业务类合同管理',13,'对方提供非业务合同20190418-2','../FileApp/WjHq/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//18_20190418_15_57_18//883.doc','借款合同.doc','.doc',37376,883),('合同审查',10,'北京雷特世纪网络科技有限公司收购20190419（我方提供合同）','../EntApps/HtSc/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//12_20190419_11_40_29//887.xlsx','北京市异地安置审批表.xlsx','.xlsx',244910,887),('合同审查',10,'北京雷特世纪网络科技有限公司收购20190419（我方提供合同）','../EntApps/HtSc/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//12_20190419_11_40_29//888.docx','第五部分  北京智控美信公司介绍.docx','.docx',22840,888),('合同审查',11,'办公室装饰瓷器采购20190419（对方提供合同）','../EntApps/HtSc/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//12_20190419_13_48_16//893.xls','科电人员2019年剩余年假统计表.xls','.xls',188416,893),('合同审查',11,'办公室装饰瓷器采购20190419（对方提供合同）','../EntApps/HtSc/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//12_20190419_13_48_16//894.docx','HR602职位说明书模板.docx','.docx',26655,894),('合同审批',13,'审批合同20190419（我方出合同）','../EntApps/HtSp/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//12_20190419_16_04_28//896.xls','科电人员2019年剩余年假统计表.xls','.xls',188416,896),('合同审批',13,'审批合同20190419（我方出合同）','../EntApps/HtSp/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//12_20190419_16_04_28//897.docx','仿照鲁迅文笔《纪念昆山龙哥》.docx','.docx',18088,897),('合同审批',14,'审批合同20190419（对方出合同）','../EntApps/HtSp/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//12_20190419_16_26_56//902.xls','IEDS-重大事件评议表-项目代码-YYMMDD-01.xls','.xls',100864,902),('合同审批',14,'审批合同20190419（对方出合同）','../EntApps/HtSp/view.jsp?BizID=','C://E_Data//coaqy//UploadTmp//12_20190419_16_26_56//903.doc','IEDS-2-91重大事件处理程序.doc','.doc',209408,903);
/*!40000 ALTER TABLE `Pf_D_IndexContentOfAttach` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `Pf_D_IndexContentOfMainText`
--

DROP TABLE IF EXISTS `Pf_D_IndexContentOfMainText`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_D_IndexContentOfMainText` (
  `BizAppName` varchar(10) NOT NULL,
  `BizAppID` int(11) unsigned NOT NULL,
  `Title` varchar(100) NOT NULL,
  `ViewUrl` varchar(100) NOT NULL,
  `MainText` mediumtext NOT NULL,
  PRIMARY KEY (`BizAppName`,`BizAppID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_D_IndexContentOfMainText`
--

LOCK TABLES `Pf_D_IndexContentOfMainText` WRITE;
/*!40000 ALTER TABLE `Pf_D_IndexContentOfMainText` DISABLE KEYS */;
INSERT INTO `Pf_D_IndexContentOfMainText` VALUES ('借款申请',12,'[朱佳佳]申请借款，事由：测试20190415','../FileApp/Jk/view.jsp?BizID=','运营管理部 朱佳佳 测试20190415 朱佳佳 北京银行知春路支行 3333 2222 1111 9999 777 -'),('印章、证照使用审批',41,'[朱佳佳]申请使用印章、证照，申请事由[非业务合同用印]','../EntApps/YzZzSq/view.jsp?BizID=','运营管理部 朱佳佳 通过 公章   非业务合同用印 非业务类合同测试20190308 -'),('印章、证照使用审批',44,'[杜斌]申请使用印章、证照，申请事由[北京同天科技收购合同-1合同用印]','../EntApps/YzZzSq/view.jsp?BizID=','业务部 杜斌 通过 公章，财务章   北京同天科技收购合同-1合同用印 北京同天科技收购合同-1 印章、证照使用审批 部门领导意见 同意用印外带，注意及时归还 蔡路'),('印章、证照使用审批',45,'[杜斌]申请使用印章、证照，申请事由[业务合同审查通过后用印]','../EntApps/YzZzSq/view.jsp?BizID=','业务部 杜斌 通过 公章   业务合同审查通过后用印 北京雷特世纪网络科技有限公司收购合同 印章、证照使用审批 部门领导意见 同意用印，但不能外带 蔡路'),('印章、证照使用审批',50,'[杜斌]申请使用印章、证照，申请事由[合同用印：踏歌行]','../EntApps/YzZzSq/view.jsp?BizID=','业务部 杜斌 通过 公章，法人章   合同用印：踏歌行 踏歌行业务合同20190409 印章、证照使用审批 部门领导意见 同意用印，但不能外带 蔡路'),('合同审批',10,'内蒙饭店收购合同-1','../EntApps/HtSp/view.jsp?BizID=','业务部 杜斌 内蒙古饭店收购 201903-001 内蒙古饭店收购：1、鱼香肉丝；2、葱烧海参 内蒙饭店收购合同-1 SPHT-201903-001 合同审批 部门负责人审批 同意 蔡路；合同审批 法律合规部门负责人审批 ok 孙瑞峰'),('合同审批',11,'北京同天科技收购合同-1','../EntApps/HtSp/view.jsp?BizID=','业务部 杜斌 北京同天科技有限公司收购 201903-002 历史沿革：     北京同天科技有限公司于1993年正式成立，属于港澳台独资企业。2008年，公司由港澳台独资企业变更为中外合资企业。同年公司由中外合资企业变更为内资企业，注册资金增至2049.39万元人民币。2011年，注册资金增至5000万元人民币。从2012年开始，同天公司与国内著名安全厂商天融信展开深度合作，2015年，天融信公司注资，同天公司注册资金增至5882万元人民币。主营业务：    北京同天科技有限公司作为北京市科委认定的新一代“高新技术企业”，经过将近20年的发展已经成为中国市场中提供通信和互联网工程解决方案的先锋。公司定位于为行业用户的业务信息化提供解决方案。作为一个基于国际互联网络协议和带宽基础设施领域的网络工程服务供应商，公司一直致力于IT业和服务供应商的市场资源合理化应用。如今，北京同天科技有限公司通过整合国际先进技术，专注行业解决方案，已经迅速发展成为国内极具影响力的IT综合服务解决方案提供商之一。 北京同天科技收购合同-1 HT201903-001 合同审批 部门负责人审批 同意 蔡路；合同审批 法律合规部门负责人审批 同意条款 孙瑞峰'),('合同审批',12,'踏歌行业务合同20190409','../EntApps/HtSp/view.jsp?BizID=','业务部 杜斌 踏歌行公司收购 201904-001 踏歌行，芬兰123 踏歌行业务合同20190409 SG-20190409 合同审批 部门负责人审批 注意付款条件 蔡路；合同审批 部门分管副总审批 同意 鞠文利；合同审批 法律合规部门负责人审批 同意 孙瑞峰'),('合同审批',13,'审批合同20190419（我方出合同）','../EntApps/HtSp/view.jsp?BizID=','业务部 杜斌 踏歌行公司收购 201904-001 踏歌行，芬兰123 审批合同20190419（我方出合同） SPHT-A-20190419 合同审批 部门负责人审批 注意付款条件 蔡路'),('合同审批',14,'审批合同20190419（对方出合同）','../EntApps/HtSp/view.jsp?BizID=','业务部 杜斌 北京同天科技有限公司收购 201903-002 历史沿革：     北京同天科技有限公司于1993年正式成立，属于港澳台独资企业。2008年，公司由港澳台独资企业变更为中外合资企业。同年公司由中外合资企业变更为内资企业，注册资金增至2049.39万元人民币。2011年，注册资金增至5000万元人民币。从2012年开始，同天公司与国内著名安全厂商天融信展开深度合作，2015年，天融信公司注资，同天公司注册资金增至5882万元人民币。主营业务：    北京同天科技有限公司作为北京市科委认定的新一代“高新技术企业”，经过将近20年的发展已经成为中国市场中提供通信和互联网工程解决方案的先锋。公司定位于为行业用户的业务信息化提供解决方案。作为一个基于国际互联网络协议和带宽基础设施领域的网络工程服务供应商，公司一直致力于IT业和服务供应商的市场资源合理化应用。如今，北京同天科技有限公司通过整合国际先进技术，专注行业解决方案，已经迅速发展成为国内极具影响力的IT综合服务解决方案提供商之一。 审批合同20190419（对方出合同） SPHT-B-20190419 合同审批 部门负责人审批 同意 蔡路'),('合同审查',9,'北京雷特世纪网络科技有限公司收购合同','../EntApps/HtSc/view.jsp?BizID=','业务部 杜斌 北京雷特世纪网络科技有限公司收购 北京雷特世纪网络科技有限公司 北京雷特世纪网络科技有限公司2003年创建，CEO刘勇为原甘肃农行科技部负责人。产品成功案例客户：1、农业银行甘肃兰州分行；2、农业银行江西吉安分行。 北京雷特世纪网络科技有限公司收购合同 20190304-001 -'),('合同审查',10,'北京雷特世纪网络科技有限公司收购20190419（我方提供合同）','../EntApps/HtSc/view.jsp?BizID=','业务部 杜斌 北京雷特世纪网络科技有限公司收购 北京雷特世纪网络科技有限公司 北京雷特世纪网络科技有限公司2003年创建，CEO刘勇为原甘肃农行科技部负责人。产品成功案例客户：1、农业银行甘肃兰州分行；2、农业银行江西吉安分行。 北京雷特世纪网络科技有限公司收购20190419（我方提供合同） SCHT-A-20190419-1 合同审查 部门负责人审批 设置尾款协议 蔡路'),('合同审查',11,'办公室装饰瓷器采购20190419（对方提供合同）','../EntApps/HtSc/view.jsp?BizID=','业务部 杜斌 办公室装饰瓷器采购 景德镇桃溪川瓷业有限公司 办公室装饰瓷器采购：12 办公室装饰瓷器采购20190419（对方提供合同） SCHT-B-20190419 合同审查 部门负责人审批 同意 蔡路'),('尽职调查材料审批',8,'杜斌【内蒙古饭店收购】尽职调查材料审批','../EntApps/JzDc/view.jsp?BizID=','业务部 杜斌 通过 内蒙古饭店收购 蔡路 尽职调查材料审批 部门经理审批 同意材料内容 蔡路'),('尽职调查材料审批',9,'杜斌【雷特世纪收购】尽职调查材料审批','../EntApps/JzDc/view.jsp?BizID=','业务部 杜斌 通过 雷特世纪收购 蔡路 尽职调查材料审批 部门经理审批 同意材料内容 蔡路'),('尽职调查材料审批',10,'杜斌【北京同天科技有限公司收购】尽职调查材料审批','../EntApps/JzDc/view.jsp?BizID=','业务部 杜斌 通过 北京同天科技有限公司收购 蔡路 尽职调查材料审批 部门经理审批 同意材料内容 蔡路'),('尽职调查材料审批',11,'杜斌【踏歌行公司收购】尽职调查材料审批','../EntApps/JzDc/view.jsp?BizID=','业务部 杜斌 通过 踏歌行公司收购 蔡路 尽职调查材料审批 部门经理审批 同意材料内容 蔡路'),('报销申请',41,'[刘佳妮]报销日常费用-[41]','../FileApp/BxSq/view.jsp?BizID=','审计部 刘佳妮 日常  迅捷票务 建设银行呼和浩特赛罕支行 3232 1313 4545 8989 657-----2018-12-10 20:59 员工成本-其他，一般花费，单据2张，￥3000.003333 3333 3333 3333中介费中介；<br>2018-12-11 21:00 机/车票费，3季度机票款，单据1张，￥122000.002222 2222 2222 2222飞机票机票代理 报销申请 财务审核 同意报销 项鑫；报销申请 总经理审批 同意报销 鞠文利'),('立项申请',11,'杜斌【内蒙古饭店收购】立项申请','../EntApps/LxSq/view.jsp?BizID=','业务部 杜斌 通过 蔡路 内蒙古饭店收购 内蒙古饭店收购：\r\n1、鱼香肉丝；\r\n2、葱烧海参 QYZB 庆源总部 立项申请 部门领导审查 同意立项 蔡路；立项申请 部门分管副总审查 同意 鞠文利；立项申请 运营管理部审核 同意，注意负债核算 张宇'),('立项申请',14,'杜斌【北京同天科技有限公司收购】立项申请','../EntApps/LxSq/view.jsp?BizID=','业务部 杜斌 通过 蔡路 北京同天科技有限公司收购 历史沿革： \r\n\r\n    北京同天科技有限公司于1993年正式成立，属于港澳台独资企业。2008年，公司由港澳台独资企业变更为中外合资企业。同年公司由中外合资企业变更为内资企业，注册资金增至2049.39万元人民币。2011年，注册资金增至5000万元人民币。从2012年开始，同天公司与国内著名安全厂商天融信展开深度合作，2015年，天融信公司注资，同天公司注册资金增至5882万元人民币。\r\n\r\n主营业务：\r\n\r\n    北京同天科技有限公司作为北京市科委认定的新一代“高新技术企业”，经过将近20年的发展已经成为中国市场中提供通信和互联网工程解决方案的先锋。公司定位于为行业用户的业务信息化提供解决方案。作为一个基于国际互联网络协议和带宽基础设施领域的网络工程服务供应商，公司一直致力于IT业和服务供应商的市场资源合理化应用。如今，北京同天科技有限公司通过整合国际先进技术，专注行业解决方案，已经迅速发展成为国内极具影响力的IT综合服务解决方案提供商之一。 QYZB 庆源总部 立项申请 部门领导审查 同意立项 蔡路；立项申请 总裁审批 同意立项 鞠文利'),('立项申请',15,'杜斌【踏歌行公司收购】立项申请','../EntApps/LxSq/view.jsp?BizID=','业务部 杜斌 通过 蔡路 踏歌行公司收购 踏歌行，芬兰\r\n1\r\n2\r\n3 QYZB 庆源总部 立项申请 部门领导审查 同意立项 蔡路'),('请示签报',6,'签报事项20190417-1','../FileApp/QsQb/view.jsp?BizID=','业务部 杜斌 签报事项20190417-1 签报事项20190417-1\r\n1、测试手动选择流程；\r\n2、正常每个环节都踩到。 行政事项 - 杜斌 啊啊啊啊 完成 请示签报 分管领导审批 同意 鞠文利；请示签报 执行反馈 完成 杜斌'),('请示签报',7,'签报事项20190417-2','../FileApp/QsQb/view.jsp?BizID=','业务部 杜斌 签报事项20190417-2 签报事项20190417-2\r\n分管直接归档。 对外谈判事项 啊啊啊啊 刘佳妮，祝慧静 11111111111 完成 请示签报 分管领导审批 同意，无需办理 鞠文利；请示签报 执行反馈 liujiani-1 刘佳妮；请示签报 执行反馈 zhj 祝慧静；请示签报 执行反馈 二次 / ljn 刘佳妮；请示签报 执行反馈 二次 / zhj 祝慧静'),('请示签报',8,'签报事项20190418Debug-1','../FileApp/QsQb/view.jsp?BizID=','业务部 杜斌 签报事项20190418Debug-1 签报事项20190418Debug-1\r\n1、\r\n2、 行政事项 - 段海军，刘佳妮 落实要求：\r\n1、\r\n2、 基本完成 请示签报 执行反馈 我的部分ok / DHJ 段海军；请示签报 执行反馈 ok / ljn 刘佳妮；请示签报 执行反馈 二次 / dhj 段海军；请示签报 执行反馈 二次 / ljn 刘佳妮'),('非业务类合同管理',6,'非业务类合同测试20190308','../FileApp/WjHq/view.jsp?BizID=','运营管理部 朱佳佳 非业务类合同测试20190308 - -'),('非业务类合同管理',7,'打印机设置无边距测试','../FileApp/WjHq/view.jsp?BizID=','运营管理部 朱佳佳 打印机设置无边距测试 - -'),('非业务类合同管理',8,'非业务类合同20190404','../FileApp/WjHq/view.jsp?BizID=','数据信息部 刘佳妮 非业务类合同20190404 注意议价合规 非业务类合同管理 合同起草 情况详见意见附件 刘佳妮；非业务类合同管理 部门负责人审阅 同意合同内容 杨震'),('非业务类合同管理',9,'xxx非业务合同审批20190409','../FileApp/WjHq/view.jsp?BizID=','数据信息部 刘佳妮 xxx非业务合同审批20190409 - 非业务类合同管理 合同起草 呈领导审批 刘佳妮；非业务类合同管理 法律合规部审批 请详见意见附件说明 孙瑞峰；非业务类合同管理 盖章封印 完成 朱佳佳'),('非业务类合同管理',12,'我方自拟非业务类合同20190418-1','../FileApp/WjHq/view.jsp?BizID=','业务部 杜斌 我方自拟非业务类合同20190418-1 - WFFYW-20190418 -'),('非业务类合同管理',13,'对方提供非业务合同20190418-2','../FileApp/WjHq/view.jsp?BizID=','业务部 杜斌 对方提供非业务合同20190418-2 - DFFYW-20190418 -'),('项目付款审批',25,'杜斌申请【内蒙饭店收购合同-1】立项项目合同付款','../EntApps/FkSp/view.jsp?BizID=','业务部 杜斌 通过 内蒙饭店收购合同-1 包不同 内蒙古银行呼和浩特赛罕分行 7777 8888 6666 5555 678 转账（网银、电汇）汇票 改版测试：\r\n1、依据正式立项项目的获批合同\r\n2、诚意合作。 项目付款审批 业务部门负责人审批 同意付款 蔡路；项目付款审批 法律合规部审批 合规审核通过 孙瑞峰；项目付款审批 会计审核 会计审核通过 项鑫；项目付款审批 总经理审批 同意 鞠文利'),('项目付款审批',26,'杜斌申请【踏歌行业务合同20190409】立项项目合同付款','../EntApps/FkSp/view.jsp?BizID=','业务部 杜斌 通过 踏歌行业务合同20190409 北京雷特世纪有限公司 北京银行知春路支行 2222 2222 3333 4444 123 转账（网银、电汇）汇票 踏歌行一期项目合同款 项目付款审批 业务部门负责人审批 同意付款 蔡路；项目付款审批 法律合规部审批 合规审核通过 孙瑞峰；项目付款审批 会计审核 会计审核通过 项鑫'),('项目审批',8,'【内蒙古饭店收购】项目审批','../EntApps/FaSp/view.jsp?BizID=','数据信息部 杨震 通过 内蒙古饭店收购 鞠文利 鞠文利，张宇，蔡路，德力格尔巴图，孙瑞峰，郭新忠 杜斌 - 项目审批 委员表决 原则同意 鞠文利'),('项目审批',9,'【北京同天科技有限公司收购】项目审批','../EntApps/FaSp/view.jsp?BizID=','数据信息部 杨震 通过 北京同天科技有限公司收购 鞠文利 鞠文利，张宇，蔡路，德力格尔巴图，孙瑞峰，郭新忠 杜斌 - 项目审批 委员表决 原则同意 鞠文利'),('项目审批',10,'【踏歌行公司收购】项目审批','../EntApps/FaSp/view.jsp?BizID=','数据信息部 杨震 通过 踏歌行公司收购 鞠文利 鞠文利，张宇，蔡路，德力格尔巴图，孙瑞峰，郭新忠 杜斌 - 项目审批 委员表决 原则同意 鞠文利；项目审批 委员表决 同意 张宇'),('项目审查',10,'杜斌【内蒙古饭店收购】项目审查审批','../EntApps/XmSc/view.jsp?BizID=','业务部 杜斌 通过 内蒙古饭店收购 通过 项目审查 法律合规部审查 法律合规部审查意见 贾涵森；项目审查 法律合规部负责人意见 法律合规部负责人意见 孙瑞峰；项目审查 法律合规部分管副总意见 法律合规部分管副总意见 孙瑞峰；项目审查 风险管理部审查 风险管理部审查意见 包不同；项目审查 风险管理部负责人意见 风险管理部负责人意见 郭新忠；项目审查 风险管理部分管副总意见 风险管理部分管副总意见 郭新忠；项目审查 会计核算部审查 会计核算部审查意见 项鑫；项目审查 财务部负责人审查 财务部负责人审查意见 德力格尔巴图；项目审查 分管财务副总审查 分管财务副总审查意见 德力格尔巴图'),('项目审查',11,'杜斌【北京同天科技有限公司收购】项目审查审批','../EntApps/XmSc/view.jsp?BizID=','业务部 杜斌 通过 北京同天科技有限公司收购 通过 项目审查 法律合规部审查 审核完毕，合规 贾涵森；项目审查 法律合规部分管副总意见 同意 孙瑞峰；项目审查 风险管理部负责人意见 好操作，无经营风险 郭新忠；项目审查 会计核算部审查 财务审核完毕 项鑫'),('项目审查',12,'杜斌【踏歌行公司收购】项目审查审批','../EntApps/XmSc/view.jsp?BizID=','业务部 杜斌 通过 踏歌行公司收购 通过 项目审查 发起 呈领导审查审议 杜斌；项目审查 法律合规部审查 法规没问题 贾涵森；项目审查 法律合规部负责人意见 同意 孙瑞峰；项目审查 风险管理部审查 风险审查通过 包不同；项目审查 风险管理部分管副总意见 同意 郭新忠；项目审查 财务部负责人审查 财务审核通过 德力格尔巴图；项目审查 运营管理部分管副总审查 同意 张宇；项目审查 决策会主任委员审定 同意 鞠文利');
/*!40000 ALTER TABLE `Pf_D_IndexContentOfMainText` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `Pf_D_PromptMail`
--

DROP TABLE IF EXISTS `Pf_D_PromptMail`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_D_PromptMail` (
  `Seq` int(12) unsigned NOT NULL AUTO_INCREMENT,
  `CreateTime` datetime NOT NULL,
  `MailTitle` varchar(100) NOT NULL DEFAULT '',
  `MailBody` varchar(400) NOT NULL DEFAULT '',
  `OrderAtTime` datetime NOT NULL,
  `Sended` char(1) NOT NULL DEFAULT 'N',
  PRIMARY KEY (`Seq`)
) ENGINE=InnoDB AUTO_INCREMENT=9 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_D_PromptMail`
--

LOCK TABLES `Pf_D_PromptMail` WRITE;
/*!40000 ALTER TABLE `Pf_D_PromptMail` DISABLE KEYS */;
INSERT INTO `Pf_D_PromptMail` VALUES (1,'2019-04-18 08:59:56','督办提醒','督办事由20181120','2019-04-18 08:59:56','Y'),(2,'2019-04-18 14:31:44','非业务合同获批后用印申请自动接续提醒','杜斌，你好！\r\n    名为【非业务合同测试20190418-1】的非业务合同已于2019-04-18 14:31获批并归档，且自动发起了用印申请！详情见办公系统。\r\n\r\n办公系统访问地址是：http://localhost:8080/coaqy','2019-04-18 14:31:44','Y'),(3,'2019-04-18 16:12:00','非业务合同获批后用印申请自动接续提醒','杜斌，你好！\r\n    名为【我方自拟非业务类合同20190418-1】的非业务合同已于2019-04-18 16:12获批并归档，且自动发起了用印申请！详情见办公系统。\r\n\r\n办公系统访问地址是：http://localhost:8080/coaqy','2019-04-18 16:12:00','Y'),(4,'2019-04-18 16:12:18','非业务合同获批后用印申请自动接续提醒','杜斌，你好！\r\n    名为【对方提供非业务合同20190418-2】的非业务合同已于2019-04-18 16:12获批并归档，且自动发起了用印申请！详情见办公系统。\r\n\r\n办公系统访问地址是：http://localhost:8080/coaqy','2019-04-18 16:12:18','Y'),(5,'2019-04-19 11:57:46','业务合同审查后用印申请自动接续提醒','杜斌，你好！\r\n    名为【北京雷特世纪网络科技有限公司收购20190419（我方提供合同）】的业务合同审查已于2019-04-19 11:57通过并归档，且自动发起了用印申请！详情见办公系统。\r\n\r\n办公系统访问地址是：http://localhost:8080/coaqy','2019-04-19 11:57:46','Y'),(6,'2019-04-19 13:53:51','业务合同审查后用印申请自动接续提醒','杜斌，你好！\r\n    名为【办公室装饰瓷器采购20190419（对方提供合同）】的业务合同审查已于2019-04-19 13:53通过并归档，且自动发起了用印申请！详情见办公系统。\r\n\r\n办公系统访问地址是：http://localhost:8080/coaqy','2019-04-19 13:53:51','Y'),(7,'2019-04-19 16:18:03','合同获批后用印申请自动接续提醒','杜斌，你好！\r\n    名为【审批合同20190419（我方出合同）】的合同已于2019-04-19 16:18获批并归档，且自动发起了用印申请！详情见办公系统。\r\n\r\n办公系统访问地址是：http://localhost:8080/coaqy','2019-04-19 16:18:03','Y'),(8,'2019-04-19 16:36:35','合同获批后用印申请自动接续提醒','杜斌，你好！\r\n    名为【审批合同20190419（对方出合同）】的合同已于2019-04-19 16:36获批并归档，且自动发起了用印申请！详情见办公系统。\r\n\r\n办公系统访问地址是：http://localhost:8080/coaqy','2019-04-19 16:36:35','Y');
/*!40000 ALTER TABLE `Pf_D_PromptMail` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `Pf_D_PromptMailTo`
--

DROP TABLE IF EXISTS `Pf_D_PromptMailTo`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_D_PromptMailTo` (
  `MailSeq` int(12) unsigned NOT NULL,
  `MailAddr` varchar(100) NOT NULL DEFAULT '',
  `ToCC` char(1) NOT NULL DEFAULT '',
  PRIMARY KEY (`MailSeq`,`MailAddr`),
  CONSTRAINT `Pf_D_PromptMailTo_FK1` FOREIGN KEY (`MailSeq`) REFERENCES `Pf_D_PromptMail` (`Seq`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_D_PromptMailTo`
--

LOCK TABLES `Pf_D_PromptMailTo` WRITE;
/*!40000 ALTER TABLE `Pf_D_PromptMailTo` DISABLE KEYS */;
INSERT INTO `Pf_D_PromptMailTo` VALUES (1,'sunruifeng_@greenamc.com','Z'),(2,'dubin_@greenamc.com','Z'),(3,'dubin_@greenamc.com','Z'),(4,'dubin_@greenamc.com','Z'),(5,'dubin_@greenamc.com','Z'),(6,'dubin_@greenamc.com','Z'),(7,'dubin_@greenamc.com','Z'),(8,'dubin_@greenamc.com','Z');
/*!40000 ALTER TABLE `Pf_D_PromptMailTo` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `Pf_D_PromptSm`
--

DROP TABLE IF EXISTS `Pf_D_PromptSm`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_D_PromptSm` (
  `Seq` int(12) unsigned NOT NULL AUTO_INCREMENT COMMENT '流水',
  `CreateTime` datetime NOT NULL COMMENT '建立时间',
  `SmBody` varchar(60) NOT NULL COMMENT '短信内容',
  `PromptType` char(1) NOT NULL COMMENT '提醒类别',
  `Sended` char(1) NOT NULL DEFAULT 'N' COMMENT '是否已发送',
  PRIMARY KEY (`Seq`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8 PACK_KEYS=0 COMMENT='待发提醒短信库';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_D_PromptSm`
--

LOCK TABLES `Pf_D_PromptSm` WRITE;
/*!40000 ALTER TABLE `Pf_D_PromptSm` DISABLE KEYS */;
INSERT INTO `Pf_D_PromptSm` VALUES (1,'2019-04-18 08:59:56','督办事由20181120','b','Y');
/*!40000 ALTER TABLE `Pf_D_PromptSm` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `Pf_D_PromptSmTo`
--

DROP TABLE IF EXISTS `Pf_D_PromptSmTo`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_D_PromptSmTo` (
  `SmSeq` int(12) unsigned NOT NULL COMMENT '短信流水',
  `MobileNo` char(11) NOT NULL COMMENT '目标手机号',
  PRIMARY KEY (`SmSeq`,`MobileNo`),
  KEY `SmSeq` (`SmSeq`),
  CONSTRAINT `Pf_D_PromptSmTo_fk1` FOREIGN KEY (`SmSeq`) REFERENCES `Pf_D_PromptSm` (`Seq`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 PACK_KEYS=0 COMMENT='待发提醒短信目标';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_D_PromptSmTo`
--

LOCK TABLES `Pf_D_PromptSmTo` WRITE;
/*!40000 ALTER TABLE `Pf_D_PromptSmTo` DISABLE KEYS */;
INSERT INTO `Pf_D_PromptSmTo` VALUES (1,'13701323445');
/*!40000 ALTER TABLE `Pf_D_PromptSmTo` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `Pf_D_Pwd2UsedTs`
--

DROP TABLE IF EXISTS `Pf_D_Pwd2UsedTs`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_D_Pwd2UsedTs` (
  `UsrID` smallint(5) unsigned NOT NULL COMMENT '用户ID',
  `Password2` varchar(20) NOT NULL COMMENT '密码2',
  `UsedTs` datetime NOT NULL COMMENT '最近使用时间',
  PRIMARY KEY (`UsrID`),
  CONSTRAINT `Pf_D_Pwd2UsedTs_fk1` FOREIGN KEY (`UsrID`) REFERENCES `Pf_M_Usr` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_D_Pwd2UsedTs`
--

LOCK TABLES `Pf_D_Pwd2UsedTs` WRITE;
/*!40000 ALTER TABLE `Pf_D_Pwd2UsedTs` DISABLE KEYS */;
INSERT INTO `Pf_D_Pwd2UsedTs` VALUES (4,'MTIzNDU2Nzg~','2018-09-07 17:28:57'),(7,'MTIzNDU2Nzg~','2018-09-07 17:28:30'),(9,'MTIzNDU2Nzg~','2018-08-08 15:54:22'),(10,'MTIzNDU2Nzg~','2018-08-08 01:13:00'),(12,'MTIzNDU2Nzg~','2018-08-08 01:12:05'),(14,'MTIzNDU2Nzg~','2018-08-08 01:13:57');
/*!40000 ALTER TABLE `Pf_D_Pwd2UsedTs` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `Pf_D_ToDoLink`
--

DROP TABLE IF EXISTS `Pf_D_ToDoLink`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_D_ToDoLink` (
  `ToDoWorkItem` int(12) unsigned NOT NULL,
  `BizSeq` int(11) unsigned NOT NULL,
  `ProcessedBy` smallint(5) unsigned NOT NULL,
  `pGrantedBy` smallint(5) unsigned NOT NULL DEFAULT '0',
  `ArrivedTs` datetime NOT NULL,
  `CurrNode` smallint(4) NOT NULL,
  `ProcTimeLimit` tinyint(3) unsigned NOT NULL,
  PRIMARY KEY (`ToDoWorkItem`),
  UNIQUE KEY `Pf_D_ToDoLink_UK1` (`BizSeq`,`ProcessedBy`,`pGrantedBy`,`ArrivedTs`),
  KEY `ProcessedBy` (`ProcessedBy`),
  KEY `CurrNode` (`CurrNode`),
  CONSTRAINT `Pf_D_ToDoLink_FK1` FOREIGN KEY (`ProcessedBy`) REFERENCES `Pf_M_Usr` (`ID`),
  CONSTRAINT `Pf_D_ToDoLink_FK2` FOREIGN KEY (`CurrNode`) REFERENCES `Pf_M_BizNode` (`ID`),
  CONSTRAINT `Pf_D_ToDoLink_FK3` FOREIGN KEY (`ToDoWorkItem`) REFERENCES `Pf_A_BizProcRcd` (`WorkItem`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_D_ToDoLink`
--

LOCK TABLES `Pf_D_ToDoLink` WRITE;
/*!40000 ALTER TABLE `Pf_D_ToDoLink` DISABLE KEYS */;
INSERT INTO `Pf_D_ToDoLink` VALUES (159,25,10,0,'2018-03-07 16:05:56',268,0),(191,28,2,0,'2018-03-14 09:57:37',245,0),(193,28,5,0,'2018-03-14 09:57:37',245,0),(194,28,9,0,'2018-03-14 09:57:37',245,0),(517,63,11,0,'2018-04-13 00:15:49',301,0),(566,74,10,0,'2018-04-24 20:00:09',275,0),(596,55,8,0,'2018-04-30 06:20:05',252,0),(810,186,8,0,'2018-05-17 09:12:16',269,0),(890,242,14,0,'2018-05-21 15:40:21',42,0),(892,57,10,0,'2018-05-21 15:58:24',43,0),(958,268,14,0,'2018-05-22 11:31:35',251,0),(969,270,4,0,'2018-05-22 13:18:59',270,0),(979,272,14,0,'2018-05-22 14:52:40',268,0),(1068,285,14,0,'2018-06-03 20:27:27',321,0),(1109,294,12,0,'2018-06-12 21:55:39',61,0),(1207,311,5,0,'2018-06-26 13:33:05',325,0),(1234,317,14,0,'2018-07-16 00:53:49',354,0),(1255,321,15,0,'2018-07-27 21:14:28',227,0),(1256,318,15,0,'2018-07-27 21:14:36',227,0),(1263,322,15,0,'2018-07-30 14:51:10',227,0),(1271,323,15,0,'2018-07-31 05:23:45',227,0),(1320,332,15,0,'2018-08-07 06:17:52',224,0),(1341,337,16,0,'2018-08-11 13:19:50',227,0),(1363,309,10,0,'2018-08-19 03:12:04',275,0),(1369,340,10,0,'2018-08-19 03:16:47',370,0),(1427,350,12,0,'2018-08-23 08:27:39',294,0),(1434,351,12,0,'2018-08-23 10:28:57',368,0),(1441,352,11,0,'2018-08-23 10:36:13',284,0),(1448,353,12,0,'2018-08-23 10:45:06',227,0),(1451,354,11,0,'2018-08-23 11:28:22',298,0),(1456,355,12,0,'2018-08-23 14:56:29',351,0),(1462,356,10,0,'2018-08-31 22:54:07',43,0),(1465,357,2,0,'2018-08-31 23:32:56',321,0),(1470,358,12,0,'2018-09-03 16:24:38',313,0),(1472,360,13,0,'2018-09-07 12:24:49',268,0),(1496,367,4,0,'2018-09-13 06:09:31',231,0),(1506,365,15,0,'2018-10-03 13:36:00',227,0),(1507,368,13,0,'2018-10-03 13:36:36',227,0),(1517,370,12,0,'2018-10-06 17:30:59',227,0),(1583,381,13,0,'2018-10-17 01:18:03',368,0),(1587,382,9,0,'2018-10-31 14:39:34',229,0),(1594,383,10,0,'2018-11-03 09:51:29',337,0),(1598,385,10,0,'2018-11-03 10:11:26',337,0),(1615,386,10,0,'2018-11-07 23:50:16',337,0),(1629,390,7,0,'2018-11-10 15:57:57',321,0),(1637,392,10,0,'2018-11-11 02:03:26',342,0),(1644,387,2,0,'2018-11-16 23:53:37',303,0),(1645,387,4,0,'2018-11-16 23:53:37',303,0),(1651,393,5,0,'2018-11-20 13:40:54',318,0),(1665,279,14,0,'2018-11-21 04:06:43',50,0),(1672,396,12,0,'2018-11-21 05:30:34',294,0),(1675,397,11,0,'2018-11-21 07:59:48',66,0),(1677,395,8,0,'2018-11-21 13:33:39',363,0),(1688,369,14,0,'2018-11-21 22:11:28',227,0),(1691,399,7,0,'2018-11-21 22:17:35',194,0),(1700,401,14,0,'2018-11-22 11:23:39',268,0),(1738,411,10,0,'2018-11-27 10:18:54',335,0),(1753,391,10,0,'2018-12-08 06:44:38',337,0),(1754,366,15,0,'2018-12-12 00:20:09',227,0),(1755,75,12,0,'2018-12-12 00:20:23',268,0),(1762,414,13,0,'2018-12-12 23:00:40',224,0),(1764,415,14,0,'2019-01-11 04:58:09',35,0),(1776,58,10,0,'2019-03-06 08:09:45',43,0),(1939,441,16,0,'2019-03-27 15:33:29',268,0),(2028,455,16,0,'2019-04-14 08:04:13',187,0),(2103,464,12,0,'2019-04-18 16:12:00',268,0),(2104,465,12,0,'2019-04-18 16:12:18',268,0),(2114,467,12,0,'2019-04-19 11:57:46',268,0),(2124,469,12,0,'2019-04-19 13:53:51',268,0),(2134,471,12,0,'2019-04-19 16:18:03',268,0),(2144,473,12,0,'2019-04-19 16:36:35',268,0);
/*!40000 ALTER TABLE `Pf_D_ToDoLink` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_D_ToDoLink_21` AFTER INSERT ON `Pf_D_ToDoLink`
  FOR EACH ROW
BEGIN
 	declare vCnt tinyint unsigned;
 	declare vPromptWay char(1);
 	declare vAppUrl,vBizTitle varchar(100);
 	declare vPrompt varchar(1000);
    declare vPromptSm varchar(60);
    
    #>>>
 	set vPromptWay='-';
 	select count(*) into vCnt from Pf_M_Biz where Code=Pf_BizCodeByBizSeq(new.BizSeq) and ToDoPromptTag='Y';
 	if vCnt>0 then
 		set vPromptWay='B';
 	end if;
 	
 	select count(*) into vCnt from Pf_M_PrivatePromptSet where UsrID=new.ProcessedBy and BizCode=Pf_BizCodeByBizSeq(new.BizSeq);
 	if vCnt>0 then
 		select PromptWay into vPromptWay from Pf_M_PrivatePromptSet where UsrID=new.ProcessedBy and BizCode=Pf_BizCodeByBizSeq(new.BizSeq);
 	end if;
 	
 	if vPromptWay!='-' then
 		Select AppUrl Into vAppUrl From Pf_M_Ent;
 		select BizTitle into vBizTitle from Pf_A_Biz where Seq=new.BizSeq;
 		set vPrompt=concat(Pf_UsrcName(new.ProcessedBy),'，你好！',Char(13),Char(10),'    请尽快上办公系统处理标题为[',vBizTitle,']的待办事项。处理时限',
 			new.ProcTimeLimit,'小时。',char(13),char(10),char(13),char(10),'办公系统访问地址是：',vAppUrl);
 		set vPromptSm=Pf_Abbre(vBizTitle,60);
        
 		if vPromptWay in ('M','B') then
        	call Pf_MailSend(new.ProcessedBy,concat(Pf_BizName(Pf_BizCodeByBizSeq(new.BizSeq)),'待办提醒'),vPrompt);
 		end if;

 		if vPromptWay in ('S','B') then
 			call Pf_SmSend(new.ProcessedBy,vPromptSm,'a');
 		end if;
 	end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Pf_D_ToDoOpenTs`
--

DROP TABLE IF EXISTS `Pf_D_ToDoOpenTs`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_D_ToDoOpenTs` (
  `ToDoWorkItem` int(12) unsigned NOT NULL,
  `FirstOpenTs` datetime NOT NULL,
  PRIMARY KEY (`ToDoWorkItem`),
  CONSTRAINT `Pf_D_ToDoOpenTs_FK1` FOREIGN KEY (`ToDoWorkItem`) REFERENCES `Pf_D_ToDoLink` (`ToDoWorkItem`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_D_ToDoOpenTs`
--

LOCK TABLES `Pf_D_ToDoOpenTs` WRITE;
/*!40000 ALTER TABLE `Pf_D_ToDoOpenTs` DISABLE KEYS */;
INSERT INTO `Pf_D_ToDoOpenTs` VALUES (159,'2018-03-07 16:05:57'),(191,'2018-03-15 18:23:38'),(193,'2018-03-14 10:05:12'),(194,'2018-04-07 11:37:37'),(517,'2018-04-13 00:15:49'),(566,'2018-04-24 20:00:25'),(890,'2018-10-27 21:51:21'),(892,'2018-05-21 16:02:21'),(958,'2018-05-22 14:37:05'),(969,'2018-05-22 13:19:14'),(979,'2018-05-22 14:53:35'),(1068,'2019-01-11 02:48:46'),(1234,'2018-07-16 00:54:45'),(1255,'2018-07-30 10:04:40'),(1256,'2018-07-30 09:31:51'),(1263,'2018-07-30 14:51:21'),(1271,'2018-07-31 05:24:04'),(1320,'2018-08-07 06:17:52'),(1341,'2018-08-11 13:20:01'),(1369,'2018-08-19 03:17:12'),(1427,'2018-08-23 08:27:47'),(1434,'2018-08-23 10:29:06'),(1441,'2018-08-23 10:36:22'),(1448,'2018-08-23 10:45:14'),(1451,'2018-08-23 11:29:13'),(1456,'2018-08-23 14:56:38'),(1462,'2018-08-31 22:54:24'),(1465,'2018-08-31 23:33:11'),(1470,'2018-09-03 16:24:49'),(1472,'2018-09-07 12:24:49'),(1496,'2018-09-13 21:08:51'),(1507,'2018-10-06 23:46:54'),(1517,'2018-10-06 17:31:08'),(1583,'2018-10-17 01:25:54'),(1587,'2018-10-31 14:39:45'),(1615,'2018-12-12 00:19:02'),(1629,'2018-11-10 20:16:09'),(1637,'2018-11-27 10:10:23'),(1665,'2018-11-21 04:07:55'),(1672,'2019-03-22 14:30:00'),(1677,'2019-04-18 14:53:48'),(1688,'2019-01-11 02:48:24'),(1691,'2018-11-21 22:17:44'),(1700,'2018-11-25 16:04:50'),(1738,'2018-11-27 10:19:09'),(1755,'2019-04-09 11:28:27'),(1762,'2018-12-12 23:00:40'),(1764,'2019-01-11 04:58:09'),(1776,'2019-03-06 08:09:56'),(2028,'2019-04-14 08:04:13'),(2103,'2019-04-18 16:13:41'),(2104,'2019-04-18 16:12:22'),(2114,'2019-04-19 11:57:50'),(2124,'2019-04-19 13:54:04'),(2134,'2019-04-19 16:20:04'),(2144,'2019-04-19 16:37:55');
/*!40000 ALTER TABLE `Pf_D_ToDoOpenTs` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `Pf_D_ToDoPush`
--

DROP TABLE IF EXISTS `Pf_D_ToDoPush`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_D_ToDoPush` (
  `ToDoWorkItem` int(12) unsigned NOT NULL,
  `PushCycle` tinyint(3) unsigned NOT NULL,
  `LastAlertTs` datetime NOT NULL,
  PRIMARY KEY (`ToDoWorkItem`),
  CONSTRAINT `Pf_D_ToDoPush_FK1` FOREIGN KEY (`ToDoWorkItem`) REFERENCES `Pf_D_ToDoLink` (`ToDoWorkItem`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_D_ToDoPush`
--

LOCK TABLES `Pf_D_ToDoPush` WRITE;
/*!40000 ALTER TABLE `Pf_D_ToDoPush` DISABLE KEYS */;
/*!40000 ALTER TABLE `Pf_D_ToDoPush` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_D_ToDoPush_21` AFTER INSERT ON `Pf_D_ToDoPush` FOR EACH ROW
BEGIN
	declare vAppUrl varchar(100);
    declare vPrompt varchar(400);
    declare vBizCode tinyint unsigned;
    declare vProcessedBy smallint unsigned;
    
    SELECT AppUrl INTO vAppUrl FROM Pf_M_Ent;

	SELECT concat(Pf_UsrcName(Processedby),'，你好！',char(13),char(10),'    标题为[',Pf_BizTitle(BizSeq),']的待办事项已超时，请尽快上系统办理。',char(13),char(10), 
  		char(13),char(10), '	系统访问地址是：',vAppUrl),Pf_BizCodeByBizSeq(BizSeq),ProcessedBy
	INTO vPrompt,vBizCode,vProcessedBy
	FROM Pf_D_ToDoLink
	WHERE ToDoWorkItem=new.ToDoWorkItem;
  
	INSERT INTO Pf_D_PromptMail VALUES (null,now(),concat(Pf_BizName(vBizCode),'催办提醒'),vPrompt,now(),'N');
	INSERT INTO Pf_D_PromptMailTo VALUES (@@identity,Pf_UsrEmail(vProcessedBy),'Z');
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Pf_M_AppAttachPath`
--

DROP TABLE IF EXISTS `Pf_M_AppAttachPath`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_M_AppAttachPath` (
  `Code` tinyint(3) unsigned NOT NULL,
  `fPath` varchar(100) NOT NULL DEFAULT '',
  `OccupySize` bigint(20) unsigned NOT NULL DEFAULT '0',
  `IfOpenUse` char(1) NOT NULL DEFAULT 'Y',
  PRIMARY KEY (`Code`),
  UNIQUE KEY `Pf_M_AppAttachPath_UK1` (`fPath`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_M_AppAttachPath`
--

LOCK TABLES `Pf_M_AppAttachPath` WRITE;
/*!40000 ALTER TABLE `Pf_M_AppAttachPath` DISABLE KEYS */;
INSERT INTO `Pf_M_AppAttachPath` VALUES (1,'C://E_Data//coaqy//app//FilePath1//',42218910,'Y'),(2,'C://E_Data//coaqy//app//FilePath2//',42189997,'Y'),(3,'C://E_Data//coaqy//app//FilePath3//',42264439,'Y');
/*!40000 ALTER TABLE `Pf_M_AppAttachPath` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_AppAttachPath_23` AFTER UPDATE ON `Pf_M_AppAttachPath` FOR EACH ROW
BEGIN
	declare vMinOccupySize bigint;
    declare vPathCode tinyint unsigned;
    
    SELECT COALESCE(MIN(OccupySize),-1)
    INTO vMinOccupySize
    FROM Pf_M_AppAttachPath
    WHERE IfOpenUse='Y';
    
    SELECT COALESCE(MIN(Code),-1)
    INTO vPathCode
    FROM Pf_M_AppAttachPath
    WHERE IfOpenUse='Y' AND OccupySize =vMinOccupySize;
    
    IF vPathCode != -1 THEN
      UPDATE Pf_M_Ent SET NextAppAttachPathCode=vPathCode;
    END IF;
    
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_AppAttachPath_12` BEFORE DELETE ON `Pf_M_AppAttachPath` FOR EACH ROW
BEGIN
	IF old.Occupysize!=0 THEN 
        call Pf_M_AppAttachPath_12_err1(); 
	END IF;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Pf_M_AreaDutyPsn`
--

DROP TABLE IF EXISTS `Pf_M_AreaDutyPsn`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_M_AreaDutyPsn` (
  `UsrID` smallint(5) unsigned NOT NULL,
  `AreaID` smallint(5) unsigned NOT NULL,
  PRIMARY KEY (`UsrID`,`AreaID`),
  KEY `AreaID` (`AreaID`),
  CONSTRAINT `Pf_M_AreaDutyPsn_FK1` FOREIGN KEY (`UsrID`) REFERENCES `Pf_M_Usr` (`ID`) ON DELETE CASCADE,
  CONSTRAINT `Pf_M_AreaDutyPsn_FK2` FOREIGN KEY (`AreaID`) REFERENCES `Pf_M_EntAppCode` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_M_AreaDutyPsn`
--

LOCK TABLES `Pf_M_AreaDutyPsn` WRITE;
/*!40000 ALTER TABLE `Pf_M_AreaDutyPsn` DISABLE KEYS */;
INSERT INTO `Pf_M_AreaDutyPsn` VALUES (2,9);
/*!40000 ALTER TABLE `Pf_M_AreaDutyPsn` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `Pf_M_AttachInfo`
--

DROP TABLE IF EXISTS `Pf_M_AttachInfo`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_M_AttachInfo` (
  `ID` int(12) unsigned NOT NULL AUTO_INCREMENT,
  `PrimaryID` int(11) unsigned NOT NULL,
  `PrimaryName` varchar(30) NOT NULL DEFAULT '',
  `FileName` varchar(100) NOT NULL DEFAULT '',
  `FileExt` varchar(5) NOT NULL DEFAULT '',
  `FileSize` int(11) unsigned NOT NULL,
  `CreatedBy` smallint(5) unsigned NOT NULL,
  `CreatedTs` datetime NOT NULL,
  `UpdatedBy` smallint(5) unsigned DEFAULT NULL,
  `UpdateTs` datetime DEFAULT NULL,
  `LocationTag` char(1) NOT NULL DEFAULT 'N',
  `DelTag` char(1) NOT NULL DEFAULT 'N',
  PRIMARY KEY (`ID`),
  KEY `CreatedBy` (`CreatedBy`),
  KEY `UpdatedBy` (`UpdatedBy`),
  CONSTRAINT `Pf_M_AttachInfo_FK1` FOREIGN KEY (`CreatedBy`) REFERENCES `Pf_M_Usr` (`ID`),
  CONSTRAINT `Pf_M_AttachInfo_FK2` FOREIGN KEY (`UpdatedBy`) REFERENCES `Pf_M_Usr` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=273 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_M_AttachInfo`
--

LOCK TABLES `Pf_M_AttachInfo` WRITE;
/*!40000 ALTER TABLE `Pf_M_AttachInfo` DISABLE KEYS */;
INSERT INTO `Pf_M_AttachInfo` VALUES (3,0,'EntBanner','Banner12.gif','.gif',5805,1,'2018-01-24 16:23:54',NULL,NULL,'Y','N'),(4,0,'EntLogo','logo.gif','.gif',8166,1,'2018-01-24 16:24:15',NULL,NULL,'Y','N'),(5,0,'EntAddrBook','庆源.xls','.xls',31232,1,'2018-01-25 11:47:20',NULL,NULL,'Y','N'),(6,1,'GsWj_M_Mb','公司发文模板.docx','.docx',217238,14,'2018-01-25 12:35:28',14,'2018-04-02 08:07:54','Y','N'),(7,1,'Pub_M_Template','02、日常借款凭证.docx','.docx',25063,14,'2018-01-29 19:04:07',14,'2018-04-02 08:10:48','Y','N'),(8,2,'Pub_M_Template','03、出差借款凭证.docx','.docx',17075,14,'2018-01-29 19:21:25',14,'2018-01-29 19:29:14','Y','N'),(9,3,'Pub_M_Template','04、日常报销凭证.docx','.docx',36231,14,'2018-01-29 19:30:24',14,'2018-10-06 16:33:17','Y','N'),(10,4,'Pub_M_Template','05、差旅报销凭证.docx','.docx',29286,14,'2018-01-29 19:48:08',14,'2018-08-15 00:28:28','Y','N'),(11,5,'Pub_M_Template','附件3-经营决策委员会立项申请表.docx','.docx',17805,14,'2018-02-21 15:01:22',14,'2019-03-21 19:02:59','Y','N'),(12,2,'ZxBg_M_XmDir','HR602职位说明书模板.docx','.docx',26655,12,'2018-02-22 16:52:22',NULL,NULL,'Y','N'),(13,2,'ZxBg_M_XmDir','立项申请表-1.docx','.docx',17472,12,'2018-02-22 16:52:22',NULL,NULL,'Y','N'),(14,2,'ZxBg_M_XmDir','HR112录用条件确认书.docx','.docx',68907,12,'2018-02-22 16:52:22',NULL,NULL,'Y','N'),(15,10,'ZxBg_M_XmDir','立项申请表-2.docx','.docx',17371,14,'2018-03-02 11:44:42',NULL,NULL,'Y','N'),(17,19,'ZxBg_M_XmDir','文化墙2.docx','.docx',559382,11,'2018-03-05 14:13:31',NULL,NULL,'Y','N'),(18,6,'Pub_M_Template','10、印章、证照使用审批单.docx','.docx',20003,14,'2018-03-06 09:46:56',14,'2018-06-26 00:12:19','Y','N'),(19,11,'ZxBg_M_XmDir','缺少.txt','.txt',1324,4,'2018-03-09 15:58:17',NULL,NULL,'Y','N'),(20,7,'Pub_M_Template','07、经营决策委员会成本效益审查表.docx','.docx',17455,14,'2018-03-13 09:51:30',14,'2018-04-20 11:27:05','Y','Y'),(21,8,'Pub_M_Template','08、经营决策委员会决策项目方案审核表.docx','.docx',16349,14,'2018-03-13 09:59:34',14,'2018-04-20 11:30:21','Y','Y'),(22,12,'ZxBg_M_XmDir','项目审查-经营决策委员会决策项目方案审核表-1.docx','.docx',16082,10,'2018-03-13 14:31:58',NULL,NULL,'Y','N'),(23,12,'ZxBg_M_XmDir','项目审查-经营决策委员会成本效益审查表-1.docx','.docx',17345,10,'2018-03-13 14:31:58',NULL,NULL,'Y','N'),(24,9,'Pub_M_Template','09、经营决策委员会实施方案审批表.docx','.docx',18089,14,'2018-03-14 14:15:16',14,'2018-04-20 11:34:03','Y','Y'),(25,13,'ZxBg_M_XmDir','实施方案审批-1.docx','.docx',38251,11,'2018-03-14 15:26:27',NULL,NULL,'Y','N'),(28,30,'ZxBg_M_XmDir','立项申请表-4.docx','.docx',83493,12,'2018-03-11 14:45:07',NULL,NULL,'Y','N'),(29,30,'ZxBg_M_XmDir','科翰在不同系统的可用性.doc','.doc',79872,12,'2018-03-11 14:45:07',NULL,NULL,'Y','N'),(31,14,'ZxBg_M_XmDir','项目付款审批单-2.docx','.docx',26552,9,'2018-03-15 17:19:52',NULL,NULL,'Y','N'),(32,14,'ZxBg_M_XmDir','项目付款审批单-3.docx','.docx',26477,9,'2018-03-15 18:25:20',NULL,NULL,'Y','N'),(33,14,'ZxBg_M_XmDir','项目付款审批单-2.docx','.docx',26552,9,'2018-03-15 18:27:28',NULL,NULL,'Y','N'),(34,11,'Pub_M_Template','还款单.docx','.docx',27390,14,'2018-03-21 12:00:12',14,'2018-04-20 10:24:16','Y','N'),(35,12,'Pub_M_Template','预付审批单.docx','.docx',27008,14,'2018-03-21 17:21:05',14,'2018-08-23 08:30:12','Y','N'),(36,38,'ZxBg_M_XmDir','codetemplates.xml','.xml',393,12,'2018-03-22 13:30:45',NULL,NULL,'Y','N'),(37,38,'ZxBg_M_XmDir','测试lx.docx','.docx',15566,12,'2018-03-22 13:30:45',NULL,NULL,'Y','N'),(38,38,'ZxBg_M_XmDir','立项申请表-5.docx','.docx',17407,12,'2018-03-22 13:30:45',NULL,NULL,'Y','N'),(39,39,'ZxBg_M_XmDir','测试jzdc.docx','.docx',15566,4,'2018-03-22 13:33:54',NULL,NULL,'Y','N'),(40,40,'ZxBg_M_XmDir','项目审查-经营决策委员会成本效益审查表-2.docx','.docx',39312,10,'2018-03-22 14:00:24',NULL,NULL,'Y','N'),(41,40,'ZxBg_M_XmDir','项目审查-经营决策委员会决策项目方案审核表-2.docx','.docx',64827,10,'2018-03-22 14:00:24',NULL,NULL,'Y','N'),(42,41,'ZxBg_M_XmDir','实施方案审批-2.docx','.docx',33337,11,'2018-03-22 14:17:55',NULL,NULL,'Y','N'),(43,42,'ZxBg_M_XmDir','项目付款审批单-5.docx','.docx',74272,9,'2018-03-22 14:40:43',NULL,NULL,'Y','N'),(44,13,'Pub_M_Template','11、项目付款审批单.docx','.docx',27833,14,'2018-03-26 18:32:28',14,'2019-03-27 11:44:15','Y','N'),(45,3,'ZxBg_M_XmDir','北京市异地安置审批表.xlsx','.xlsx',11742,4,'2018-03-31 00:45:52',NULL,NULL,'Y','N'),(46,3,'ZxBg_M_XmDir','出差员工住房补助申请表-刘赣平.doc','.doc',46592,4,'2018-03-31 00:45:52',NULL,NULL,'Y','N'),(47,4,'ZxBg_M_XmDir','项目审查-经营决策委员会成本效益审查表-3.docx','.docx',69534,10,'2018-03-31 06:29:41',NULL,NULL,'Y','N'),(48,4,'ZxBg_M_XmDir','项目审查-经营决策委员会决策项目方案审核表-3.docx','.docx',119188,10,'2018-03-31 06:29:41',NULL,NULL,'Y','N'),(49,5,'ZxBg_M_XmDir','实施方案审批-3.docx','.docx',37544,11,'2018-03-31 06:50:27',NULL,NULL,'Y','N'),(50,6,'ZxBg_M_XmDir','第五部分  北京智控美信公司介绍.docx','.docx',22770,9,'2018-03-31 09:23:50',NULL,NULL,'Y','N'),(51,6,'ZxBg_M_XmDir','项目付款审批单-6.docx','.docx',137242,9,'2018-03-31 09:23:50',NULL,NULL,'Y','N'),(52,12,'UsrSignature','杜斌.png','.png',2798,12,'2018-04-01 02:59:52',NULL,NULL,'Y','N'),(53,14,'UsrSignature','杨震.png','.png',5337,14,'2018-06-22 16:37:36',14,'2018-06-22 16:37:36','Y','N'),(54,2,'UsrSignature','哈斯.png','.png',1057,2,'2018-04-01 03:18:04',NULL,NULL,'Y','N'),(55,3,'UsrSignature','德力格尔巴图.png','.png',6596,3,'2018-04-01 03:18:41',NULL,NULL,'Y','N'),(56,4,'UsrSignature','鞠文利.png','.png',3648,4,'2018-04-01 03:19:14',NULL,NULL,'Y','N'),(57,5,'UsrSignature','孙瑞峰.png','.png',3669,5,'2018-04-01 03:21:22',NULL,NULL,'Y','N'),(58,6,'UsrSignature','郭新忠.png','.png',3980,6,'2018-04-01 03:22:31',NULL,NULL,'Y','N'),(59,7,'UsrSignature','张宇.png','.png',2648,7,'2018-04-01 03:23:18',NULL,NULL,'Y','N'),(60,8,'UsrSignature','蔡路.png','.png',2913,8,'2018-04-01 03:24:26',NULL,NULL,'Y','N'),(61,10,'UsrSignature','付春奇.png','.png',3502,10,'2018-04-01 03:26:06',NULL,NULL,'Y','N'),(62,11,'UsrSignature','祝慧静.png','.png',3916,11,'2018-04-01 03:26:50',NULL,NULL,'Y','N'),(63,9,'UsrSignature','项鑫2.png','.png',4554,9,'2018-06-21 15:06:59',9,'2018-06-21 15:06:59','Y','N'),(64,13,'UsrSignature','刘佳妮.png','.png',3558,13,'2018-04-01 03:33:36',NULL,NULL,'Y','N'),(65,42,'ZxBg_M_XmDir','项目付款审批单-7.docx','.docx',50517,9,'2018-04-21 08:58:56',NULL,NULL,'Y','N'),(66,14,'Pub_M_Template','附件9-合同审批单.docx','.docx',17886,14,'2018-04-29 11:36:19',14,'2019-03-26 12:51:04','Y','N'),(69,42,'ZxBg_M_XmDir','SG_2018001_红头.jpg','.jpg',336988,12,'2018-04-30 04:18:29',NULL,NULL,'Y','N'),(70,42,'ZxBg_M_XmDir','SG_2018001_合同审批单-1.docx','.docx',29305,12,'2018-04-30 04:18:30',NULL,NULL,'Y','N'),(74,54,'ZxBg_M_XmDir','异地安置申请表（丰台）.xls','.xls',32768,12,'2018-04-30 07:12:10',NULL,NULL,'Y','N'),(75,54,'ZxBg_M_XmDir','异地安置审批表（丰台）.pdf','.pdf',24342,12,'2018-04-30 07:12:10',NULL,NULL,'Y','N'),(76,54,'ZxBg_M_XmDir','立项申请表-7.docx','.docx',33818,12,'2018-04-30 07:12:10',NULL,NULL,'Y','N'),(77,55,'ZxBg_M_XmDir','HR602职位说明书模板[4].docx','.docx',26655,4,'2018-04-30 07:16:12',NULL,NULL,'Y','N'),(78,55,'ZxBg_M_XmDir','HR112录用条件确认书[4].docx','.docx',68928,4,'2018-04-30 07:16:12',NULL,NULL,'Y','N'),(85,56,'ZxBg_M_XmDir','项目审查-经营决策委员会成本效益审查表[5].docx','.docx',28064,11,'2018-04-30 08:59:16',NULL,NULL,'Y','N'),(86,56,'ZxBg_M_XmDir','项目审查-经营决策委员会决策项目方案审核表[5].docx','.docx',39273,11,'2018-04-30 08:59:16',NULL,NULL,'Y','N'),(89,57,'ZxBg_M_XmDir','实施方案审批表[4].docx','.docx',20282,11,'2018-04-30 13:16:18',NULL,NULL,'Y','N'),(90,58,'ZxBg_M_XmDir','SG-2018002_卓正软件产品总览.pdf','.pdf',1902184,12,'2018-04-30 13:28:05',NULL,NULL,'Y','N'),(91,58,'ZxBg_M_XmDir','SG-2018002_PageOffice4.0开发平台三个版本功能区别及零售、批发和无限分发报价表.pdf','.pdf',753513,12,'2018-04-30 13:28:05',NULL,NULL,'Y','N'),(92,58,'ZxBg_M_XmDir','SG-2018002_合同审批单.docx','.docx',29632,12,'2018-04-30 13:28:05',NULL,NULL,'Y','N'),(99,58,'ZxBg_M_XmDir','SG-2018004_pageoffice产品授权详细解释.docx','.docx',40299,12,'2018-05-02 15:57:05',NULL,NULL,'Y','N'),(100,58,'ZxBg_M_XmDir','SG-2018004_合同审批单.docx','.docx',29523,12,'2018-05-02 15:57:05',NULL,NULL,'Y','N'),(102,58,'ZxBg_M_XmDir','印章、证照使用审批单[Yy10].docx','.docx',32236,10,'2018-05-02 17:35:57',NULL,NULL,'Y','N'),(103,58,'ZxBg_M_XmDir','内蒙古庆源绿色金融资产管理有限公司_邮箱用户列表.xlsx','.xlsx',12353,9,'2018-05-03 06:58:51',NULL,NULL,'Y','N'),(104,58,'ZxBg_M_XmDir','项目付款审批单.docx','.docx',50711,9,'2018-05-03 06:58:51',NULL,NULL,'Y','N'),(105,58,'ZxBg_M_XmDir','项目付款审批单.docx','.docx',50638,9,'2018-05-03 07:12:23',NULL,NULL,'Y','N'),(106,58,'ZxBg_M_XmDir','项目付款审批单[10].docx','.docx',50598,9,'2018-05-03 07:24:43',NULL,NULL,'Y','N'),(108,2,'ZdHb_M_Zt','附件1-业务办理记录单.docx','.docx',19307,14,'2018-05-11 01:11:39',NULL,NULL,'Y','N'),(109,2,'ZdHb_M_Zt','附件3-经营决策委员会立项申请表.docx','.docx',16750,14,'2018-05-11 01:11:39',NULL,NULL,'Y','N'),(110,58,'ZxBg_M_XmDir','SG-GZXJ-2018001_异地安置申请表（丰台）.xls','.xls',32768,12,'2018-05-16 10:41:10',NULL,NULL,'Y','N'),(111,58,'ZxBg_M_XmDir','SG-GZXJ-2018001_第五部分  北京智控美信公司介绍.docx','.docx',22770,12,'2018-05-16 10:41:10',NULL,NULL,'Y','N'),(112,58,'ZxBg_M_XmDir','SG-GZXJ-2018001_合同审批单.docx','.docx',22620,12,'2018-05-16 10:41:10',NULL,NULL,'Y','N'),(113,58,'ZxBg_M_XmDir','印章、证照使用审批单[Yy16].docx','.docx',39818,10,'2018-05-16 10:45:18',NULL,NULL,'Y','N'),(114,63,'ZxBg_M_XmDir','立项申请表.docx','.docx',31808,14,'2018-05-22 10:52:30',NULL,NULL,'Y','N'),(115,65,'ZxBg_M_XmDir','项目审查-经营决策委员会成本效益审查表[7].docx','.docx',28067,11,'2018-05-22 11:38:10',NULL,NULL,'Y','N'),(116,65,'ZxBg_M_XmDir','项目审查-经营决策委员会决策项目方案审核表[7].docx','.docx',29156,11,'2018-05-22 11:38:10',NULL,NULL,'Y','N'),(117,14,'ZxBg_M_XmDir','-20180101_合同审批单.docx','.docx',27699,14,'2018-05-22 14:52:40',NULL,NULL,'Y','N'),(118,14,'ZxBg_M_XmDir','-20180101_正文.docx','.docx',12857,14,'2018-05-22 14:52:40',NULL,NULL,'Y','N'),(119,14,'ZxBg_M_XmDir','项目付款审批单[11].docx','.docx',48731,9,'2018-05-22 16:03:27',NULL,NULL,'Y','N'),(120,15,'Pub_M_Template','督办单.docx','.docx',15106,14,'2018-05-23 06:07:17',14,'2018-05-26 21:40:59','Y','N'),(122,3,'Dsj_M_Book','AZQI2001.JPG','.JPG',200383,10,'2018-05-27 14:25:07',NULL,NULL,'Y','N'),(123,1,'Dsj_M_Book','IMG_0624.JPG','.JPG',68915,10,'2018-05-30 07:38:49',NULL,NULL,'Y','N'),(124,16,'Pub_M_Template','10、合同审批单.docx','.docx',18366,14,'2018-06-25 10:29:58',14,'2018-06-25 10:37:31','Y','N'),(127,42,'ZxBg_M_XmDir','HF20180627_内蒙古庆源绿色金融资产管理有限公司督查督办工作管理办法-20180523-001.docx','.docx',78882,12,'2018-06-26 01:40:58',NULL,NULL,'Y','N'),(128,42,'ZxBg_M_XmDir','HF20180627_合同审批单.docx','.docx',29526,12,'2018-06-26 01:40:58',NULL,NULL,'Y','N'),(130,42,'ZxBg_M_XmDir','印章、证照使用审批单[Yy25].docx','.docx',39838,9,'2018-06-26 01:54:23',NULL,NULL,'Y','N'),(131,17,'Pub_M_Template','采购申请审批单.docx','.docx',32529,14,'2018-08-15 10:23:35',14,'2018-08-15 13:20:08','Y','N'),(132,58,'ZxBg_M_XmDir','2[16].jpeg','.jpeg',29417,11,'2018-08-21 18:14:39',NULL,NULL,'Y','N'),(133,58,'ZxBg_M_XmDir','HR112录用条件确认书[16].docx','.docx',68928,11,'2018-08-21 18:14:39',NULL,NULL,'Y','N'),(134,58,'ZxBg_M_XmDir','项目付款审批单[16].docx','.docx',47695,11,'2018-08-21 18:14:39',NULL,NULL,'Y','N'),(135,42,'ZxBg_M_XmDir','项目付款审批单[17].docx','.docx',47722,11,'2018-08-21 18:23:30',NULL,NULL,'Y','N'),(136,14,'ZxBg_M_XmDir','立项申请表COAQY[18].docx','.docx',36548,11,'2018-08-21 18:45:08',NULL,NULL,'Y','N'),(137,14,'ZxBg_M_XmDir','项目付款审批单[18].docx','.docx',47762,11,'2018-08-21 18:45:08',NULL,NULL,'Y','N'),(138,4,'ZdHb_M_Zt','第五部分  北京智控美信公司介绍.docx','.docx',22770,14,'2018-08-31 23:04:21',NULL,NULL,'Y','N'),(139,71,'ZxBg_M_XmDir','仿照鲁迅文笔《纪念昆山龙哥》.docx','.docx',18025,12,'2018-10-07 01:31:10',NULL,NULL,'Y','N'),(140,71,'ZxBg_M_XmDir','立项申请表.docx','.docx',35414,12,'2018-10-07 01:31:10',14,'2018-10-07 19:45:56','Y','N'),(141,72,'ZxBg_M_XmDir','HR112录用条件确认书[6].docx','.docx',68928,4,'2018-10-07 01:39:55',NULL,NULL,'Y','N'),(142,73,'ZxBg_M_XmDir','项目审查-经营决策委员会成本效益审查表[8].docx','.docx',33506,14,'2018-10-07 02:50:01',14,'2018-10-07 19:51:10','Y','N'),(143,73,'ZxBg_M_XmDir','项目审查-经营决策委员会决策项目方案审核表[8].docx','.docx',39557,14,'2018-10-07 02:50:01',14,'2018-10-07 19:52:01','Y','N'),(144,74,'ZxBg_M_XmDir','实施方案审批表[5].docx','.docx',24090,14,'2018-10-07 03:03:25',14,'2018-10-07 19:53:08','Y','N'),(148,75,'ZxBg_M_XmDir','华春莹[23].jpeg','.jpeg',134938,11,'2018-10-07 03:58:58',NULL,NULL,'Y','N'),(149,75,'ZxBg_M_XmDir','597[23].docx','.docx',1010797,11,'2018-10-07 03:58:58',NULL,NULL,'Y','N'),(150,75,'ZxBg_M_XmDir','项目付款审批单[23].docx','.docx',47618,11,'2018-10-07 03:58:58',14,'2018-10-07 23:59:21','Y','N'),(152,75,'ZxBg_M_XmDir','印章、证照使用审批单[32].docx','.docx',38488,10,'2018-10-07 04:16:57',NULL,NULL,'Y','N'),(155,75,'ZxBg_M_XmDir','徐家宝仿鲁迅[8].docx','.docx',19419,12,'2018-10-07 20:14:14',NULL,NULL,'Y','N'),(156,75,'ZxBg_M_XmDir','合同审批单[8].docx','.docx',29508,12,'2018-10-07 20:14:14',NULL,NULL,'Y','N'),(157,75,'ZxBg_M_XmDir','印章、证照使用审批单[34].docx','.docx',38446,10,'2018-10-07 20:51:51',NULL,NULL,'Y','N'),(158,1,'Manual','02、通用办公-信息发布 用户手册.docx','.docx',461961,14,'2018-11-09 03:24:59',NULL,NULL,'Y','N'),(159,1,'Manual','01、通用办公-工作周报 用户手册.docx','.docx',368580,14,'2018-11-09 03:24:59',NULL,NULL,'Y','N'),(160,1,'Manual','04、通用办公-公司收文 用户手册.docx','.docx',283770,14,'2018-11-09 06:22:10',NULL,NULL,'Y','N'),(161,1,'Manual','03、通用办公-公司文件 用户手册.docx','.docx',279434,14,'2018-11-09 06:22:10',NULL,NULL,'Y','N'),(162,1,'Manual','06、通用办公-会议管理 用户手册.docx','.docx',296342,14,'2018-11-09 06:22:25',NULL,NULL,'Y','N'),(163,1,'Manual','05、通用办公-请示签报 用户手册.docx','.docx',276069,14,'2018-11-09 06:22:25',NULL,NULL,'Y','N'),(164,1,'Manual','08、通用办公-借款申请 用户手册.docx','.docx',329792,14,'2018-11-09 06:22:41',NULL,NULL,'Y','N'),(165,1,'Manual','07、通用办公-请休假 用户手册.docx','.docx',281067,14,'2018-11-09 06:22:41',NULL,NULL,'Y','N'),(166,1,'Manual','10、通用办公-报销申请 用户手册.docx','.docx',613884,14,'2018-11-09 06:22:59',NULL,NULL,'Y','N'),(167,1,'Manual','09、通用办公-还款记录 用户手册.docx','.docx',337377,14,'2018-11-09 06:22:59',NULL,NULL,'Y','N'),(168,1,'Manual','12、专项办公-尽职调查材料审批用户手册 .docx','.docx',734061,14,'2018-11-09 06:23:18',NULL,NULL,'Y','N'),(169,1,'Manual','11、专项办公-立项申请用户手册 .docx','.docx',1096610,14,'2018-11-09 06:23:18',NULL,NULL,'Y','N'),(170,1,'Manual','15、专项办公-印章、证照使用审批用户手册 .docx','.docx',629459,14,'2018-11-09 06:23:42',NULL,NULL,'Y','N'),(171,1,'Manual','14、专项办公-实施方案审批用户手册 .docx','.docx',584818,14,'2018-11-09 06:23:42',NULL,NULL,'Y','N'),(172,1,'Manual','13、专项办公-项目审查用户手册 .docx','.docx',662375,14,'2018-11-09 06:23:42',NULL,NULL,'Y','N'),(173,1,'Manual','17、专项办公-项目付款审批用户手册 .docx','.docx',804073,14,'2018-11-09 06:25:21',NULL,NULL,'Y','N'),(174,1,'Manual','16、专项办公-预付款审批用户手册 .docx','.docx',719636,14,'2018-11-09 06:25:21',NULL,NULL,'Y','N'),(175,79,'ZxBg_M_XmDir','庆源OA需求梳理-20181119-001.docx','.docx',40234,12,'2018-11-25 16:03:59',NULL,NULL,'Y','N'),(176,79,'ZxBg_M_XmDir','立项申请表.docx','.docx',35406,12,'2018-11-25 16:03:59',NULL,NULL,'Y','N'),(179,80,'ZxBg_M_XmDir','组织机构[7].jpg','.jpg',115176,4,'2018-11-25 19:21:55',NULL,NULL,'Y','N'),(180,80,'ZxBg_M_XmDir','庆源OA需求[读书角]整理-20180525-001[7].docx','.docx',16711,4,'2018-11-25 19:21:55',NULL,NULL,'Y','N'),(181,81,'ZxBg_M_XmDir','项目审查-经营决策委员会决策项目方案审核表[9].docx','.docx',32801,14,'2018-11-26 11:11:34',NULL,NULL,'Y','N'),(182,81,'ZxBg_M_XmDir','项目审查-经营决策委员会成本效益审查表[9].docx','.docx',33567,14,'2018-11-26 11:11:34',NULL,NULL,'Y','N'),(184,82,'ZxBg_M_XmDir','实施方案审批表[6].docx','.docx',22822,14,'2018-11-26 13:20:04',NULL,NULL,'Y','N'),(185,83,'ZxBg_M_XmDir','招聘[9].docx','.docx',19881,12,'2018-11-26 14:48:28',NULL,NULL,'Y','N'),(186,83,'ZxBg_M_XmDir','合同审批单[9].docx','.docx',29542,12,'2018-11-26 14:48:28',NULL,NULL,'Y','N'),(187,83,'ZxBg_M_XmDir','印章、证照使用审批单[36].docx','.docx',38456,10,'2018-11-27 16:21:07',NULL,NULL,'Y','N'),(188,83,'ZxBg_M_XmDir','2[24].jpeg','.jpeg',29417,11,'2018-11-27 17:03:22',NULL,NULL,'Y','N'),(189,83,'ZxBg_M_XmDir','HR112录用条件确认书[24].docx','.docx',68928,11,'2018-11-27 17:03:22',NULL,NULL,'Y','N'),(190,83,'ZxBg_M_XmDir','项目付款审批单[24].docx','.docx',50774,11,'2018-11-27 17:03:22',NULL,NULL,'Y','N'),(191,14,'UsrPhoto','lgp.gif','.gif',21761,14,'2019-01-11 05:37:04',NULL,NULL,'Y','N'),(192,22,'Pub_M_Template','HR112录用条件确认书.docx','.docx',41108,14,'2019-02-25 03:37:14',14,'2019-03-13 00:16:03','Y','N'),(193,23,'Pub_M_Template','HR112录用条件确认书.docx','.docx',33592,14,'2019-02-25 04:02:03',14,'2019-03-26 11:26:51','Y','N'),(194,24,'Pub_M_Template','10、带二维码插入标签的审批合同模板-1.docx','.docx',36474,14,'2019-03-06 04:12:45',14,'2019-03-06 04:15:09','N','N'),(195,87,'ZxBg_M_XmDir','北京市异地安置审批表.xlsx','.xlsx',11742,12,'2019-03-21 19:03:49',NULL,NULL,'Y','Y'),(196,87,'ZxBg_M_XmDir','第五部分  北京智控美信公司介绍.docx','.docx',22770,12,'2019-03-21 19:03:49',NULL,NULL,'Y','Y'),(197,87,'ZxBg_M_XmDir','立项申请表.docx','.docx',28562,12,'2019-03-21 19:03:49',14,'2019-03-22 10:18:40','Y','Y'),(198,95,'ZxBg_M_XmDir','北京市异地安置审批表.xlsx','.xlsx',11742,12,'2019-03-22 10:27:54',NULL,NULL,'Y','N'),(199,95,'ZxBg_M_XmDir','第五部分  北京智控美信公司介绍.docx','.docx',22770,12,'2019-03-22 10:27:54',NULL,NULL,'Y','N'),(200,95,'ZxBg_M_XmDir','立项申请表.docx','.docx',28624,12,'2019-03-22 10:27:54',NULL,NULL,'Y','N'),(201,96,'ZxBg_M_XmDir','IEDS-2-78软件配置管理控制程序[8].doc','.doc',254976,4,'2019-03-22 11:23:01',NULL,NULL,'Y','N'),(202,96,'ZxBg_M_XmDir','IEDS-2-73软件产品设计和开发控制程序[8].docx','.docx',1075129,4,'2019-03-22 11:23:01',NULL,NULL,'Y','N'),(203,31,'ZxBg_M_XmDir','IEDS-2-85需求管理程序[9].docx','.docx',115504,4,'2019-03-22 14:32:25',NULL,NULL,'Y','N'),(204,31,'ZxBg_M_XmDir','IEDS-2-84项目监督与控制程序[9].docx','.docx',228748,4,'2019-03-22 14:32:25',NULL,NULL,'Y','N'),(205,25,'Pub_M_Template','空白.docx','.docx',17378,14,'2019-03-23 17:26:40',14,'2019-03-23 21:03:42','N','N'),(206,26,'Pub_M_Template','空白.docx','.docx',17290,14,'2019-03-23 18:45:50',14,'2019-03-23 21:02:27','N','N'),(207,27,'Pub_M_Template','空白.docx','.docx',17262,14,'2019-03-23 19:02:54',14,'2019-03-23 21:03:57','N','N'),(208,97,'ZxBg_M_XmDir','项目审查-项目法律合规审查意见表[10].docx','.docx',22076,14,'2019-03-23 21:14:03',NULL,NULL,'Y','Y'),(209,97,'ZxBg_M_XmDir','项目审查-项目风险审查意见表[10].docx','.docx',22286,14,'2019-03-23 21:14:03',NULL,NULL,'Y','Y'),(210,97,'ZxBg_M_XmDir','项目审查-项目财务审查意见表[10].docx','.docx',29656,14,'2019-03-23 21:14:03',NULL,NULL,'Y','Y'),(211,97,'ZxBg_M_XmDir','项目审查-项目法律合规审查意见表[10].docx','.docx',22052,14,'2019-03-23 21:23:03',14,'2019-03-23 22:18:20','Y','N'),(212,97,'ZxBg_M_XmDir','项目审查-项目风险审查意见表[10].docx','.docx',22295,14,'2019-03-23 21:23:03',14,'2019-03-23 22:19:06','Y','N'),(213,97,'ZxBg_M_XmDir','项目审查-项目财务审查意见表[10].docx','.docx',29673,14,'2019-03-23 21:23:03',14,'2019-03-25 23:50:15','Y','N'),(214,28,'Pub_M_Template','空白.docx','.docx',15981,14,'2019-03-25 10:15:15',14,'2019-03-25 14:04:26','N','N'),(215,29,'Pub_M_Template','空白.docx','.docx',18049,14,'2019-03-25 10:18:14',14,'2019-03-27 12:49:53','N','N'),(216,30,'Pub_M_Template','空白.docx','.docx',22592,14,'2019-03-25 10:20:45',14,'2019-03-25 16:40:45','N','N'),(217,98,'ZxBg_M_XmDir','项目表决结果表[8].docx','.docx',42348,14,'2019-03-25 16:48:53',NULL,NULL,'Y','Y'),(218,98,'ZxBg_M_XmDir','决策会会议通知[8].docx','.docx',16015,14,'2019-03-25 17:08:28',14,'2019-03-25 23:46:11','Y','N'),(219,98,'ZxBg_M_XmDir','项目表决结果表[8].docx','.docx',42346,14,'2019-03-25 17:08:28',14,'2019-03-25 23:41:41','Y','N'),(220,98,'ZxBg_M_XmDir','决策会会议纪要[8].docx','.docx',22665,14,'2019-03-25 17:08:28',14,'2019-03-25 23:45:25','Y','N'),(221,99,'ZxBg_M_XmDir','合同审批单[10].docx','.docx',29639,12,'2019-03-26 13:16:15',NULL,NULL,'Y','Y'),(222,99,'ZxBg_M_XmDir','北京市异地安置审批表[10].xlsx','.xlsx',244941,12,'2019-03-26 13:16:15',NULL,NULL,'Y','Y'),(223,99,'ZxBg_M_XmDir','第五部分  北京智控美信公司介绍[10].pdf','.pdf',483023,12,'2019-03-26 13:16:15',NULL,NULL,'Y','Y'),(224,99,'ZxBg_M_XmDir','借款合同[10].pdf','.pdf',525943,12,'2019-03-26 13:16:15',NULL,NULL,'Y','Y'),(225,99,'ZxBg_M_XmDir','合同审批单[10].docx','.docx',29639,12,'2019-03-26 13:19:32',NULL,NULL,'Y','N'),(226,99,'ZxBg_M_XmDir','北京市异地安置审批表[10].xlsx','.xlsx',244941,12,'2019-03-26 13:19:32',NULL,NULL,'Y','N'),(227,99,'ZxBg_M_XmDir','第五部分  北京智控美信公司介绍[10].pdf','.pdf',483023,12,'2019-03-26 13:19:32',NULL,NULL,'Y','N'),(228,99,'ZxBg_M_XmDir','借款合同[10].pdf','.pdf',525943,12,'2019-03-26 13:19:32',NULL,NULL,'Y','N'),(229,103,'ZxBg_M_XmDir','徐家宝仿鲁迅.docx','.docx',19419,12,'2019-03-27 10:32:42',NULL,NULL,'Y','N'),(230,103,'ZxBg_M_XmDir','第五部分  北京智控美信公司介绍.docx','.docx',22770,12,'2019-03-27 10:32:42',NULL,NULL,'Y','N'),(231,103,'ZxBg_M_XmDir','立项申请表.docx','.docx',29161,12,'2019-03-27 10:32:42',NULL,NULL,'Y','N'),(232,104,'ZxBg_M_XmDir','IEDS-系统部署方案-项目代码-YYMMDD-01[10].doc','.doc',105984,4,'2019-03-27 10:39:23',NULL,NULL,'Y','N'),(233,104,'ZxBg_M_XmDir','IEDS-测试计划-项目代码-YYMMDD-01[10].doc','.doc',168448,4,'2019-03-27 10:39:23',NULL,NULL,'Y','N'),(234,99,'ZxBg_M_XmDir','IEDS-2-85需求管理程序[25].docx','.docx',115504,11,'2019-03-27 11:55:55',NULL,NULL,'Y','N'),(235,99,'ZxBg_M_XmDir','IEDS-2-84项目监督与控制程序[25].docx','.docx',228748,11,'2019-03-27 11:55:55',NULL,NULL,'Y','N'),(236,99,'ZxBg_M_XmDir','项目付款审批单[25].docx','.docx',51070,11,'2019-03-27 11:55:55',NULL,NULL,'Y','N'),(237,105,'ZxBg_M_XmDir','项目审查-项目法律合规审查意见表[11].docx','.docx',22100,14,'2019-03-27 12:32:42',NULL,NULL,'Y','N'),(238,105,'ZxBg_M_XmDir','项目审查-项目风险审查意见表[11].docx','.docx',22264,14,'2019-03-27 12:32:42',NULL,NULL,'Y','N'),(239,105,'ZxBg_M_XmDir','项目审查-项目财务审查意见表[11].docx','.docx',29681,14,'2019-03-27 12:32:42',NULL,NULL,'Y','N'),(240,106,'ZxBg_M_XmDir','决策会会议通知[9].docx','.docx',16018,14,'2019-03-27 12:52:11',NULL,NULL,'Y','N'),(241,106,'ZxBg_M_XmDir','项目表决结果表[9].docx','.docx',42394,14,'2019-03-27 12:52:11',NULL,NULL,'Y','N'),(242,106,'ZxBg_M_XmDir','决策会会议纪要[9].docx','.docx',22689,14,'2019-03-27 12:52:11',NULL,NULL,'Y','N'),(243,107,'ZxBg_M_XmDir','ExchangeAddressList[11].xls','.xls',560640,12,'2019-03-27 13:34:43',NULL,NULL,'Y','N'),(244,107,'ZxBg_M_XmDir','IEDS-系统操作手册-项目代码-YYMMDD-01[11].pdf','.pdf',695773,12,'2019-03-27 13:34:43',NULL,NULL,'Y','N'),(245,107,'ZxBg_M_XmDir','IEDS-系统测试报告-项目代码-YYMMDD-01[11].pdf','.pdf',951724,12,'2019-03-27 13:34:43',NULL,NULL,'Y','N'),(246,107,'ZxBg_M_XmDir','合同审批单[11].docx','.docx',30333,12,'2019-03-27 13:34:43',NULL,NULL,'Y','N'),(247,107,'ZxBg_M_XmDir','印章、证照使用审批单[44].docx','.docx',35011,16,'2019-03-27 14:59:35',NULL,NULL,'Y','N'),(248,111,'ZxBg_M_XmDir','IEDS-技术选型方案-项目代码-YYMMDD-01.doc','.doc',82432,12,'2019-04-09 10:43:01',NULL,NULL,'Y','N'),(249,111,'ZxBg_M_XmDir','IEDS-需求调研表-项目代码-YYMMDD-01.xlsx','.xlsx',10998,12,'2019-04-09 10:43:01',NULL,NULL,'Y','N'),(250,111,'ZxBg_M_XmDir','立项申请表.docx','.docx',28550,12,'2019-04-09 10:43:01',NULL,NULL,'Y','N'),(251,112,'ZxBg_M_XmDir','IEDS-产品集成检查单-项目代码-YYMMDD-01[11].xls','.xls',37376,4,'2019-04-09 10:47:36',NULL,NULL,'Y','N'),(252,112,'ZxBg_M_XmDir','IEDS-产品集成计划-项目代码-YYMMDD-01[11].docx','.docx',38936,4,'2019-04-09 10:47:36',NULL,NULL,'Y','N'),(253,113,'ZxBg_M_XmDir','项目审查-项目法律合规审查意见表[12].docx','.docx',22065,14,'2019-04-09 10:59:35',NULL,NULL,'Y','N'),(254,113,'ZxBg_M_XmDir','项目审查-项目风险审查意见表[12].docx','.docx',22276,14,'2019-04-09 10:59:35',NULL,NULL,'Y','N'),(255,113,'ZxBg_M_XmDir','项目审查-项目财务审查意见表[12].docx','.docx',29677,14,'2019-04-09 10:59:35',NULL,NULL,'Y','N'),(256,114,'ZxBg_M_XmDir','决策会会议通知[10].docx','.docx',16029,14,'2019-04-09 11:06:55',NULL,NULL,'Y','N'),(257,114,'ZxBg_M_XmDir','决策会会议纪要[10].docx','.docx',22680,14,'2019-04-09 11:06:55',NULL,NULL,'Y','N'),(258,114,'ZxBg_M_XmDir','项目表决结果表[10].docx','.docx',34144,14,'2019-04-09 11:06:55',NULL,NULL,'Y','N'),(259,115,'ZxBg_M_XmDir','合同审批单[12].docx','.docx',29621,12,'2019-04-09 11:29:35',NULL,NULL,'Y','Y'),(260,115,'ZxBg_M_XmDir','北京市异地安置审批表[12].xlsx','.xlsx',244943,12,'2019-04-09 11:29:35',NULL,NULL,'Y','Y'),(261,115,'ZxBg_M_XmDir','合同审批单[12].docx','.docx',29621,12,'2019-04-09 11:32:00',NULL,NULL,'Y','N'),(262,115,'ZxBg_M_XmDir','仿照鲁迅文笔《纪念昆山龙哥》[12].pdf','.pdf',444536,12,'2019-04-09 11:32:00',NULL,NULL,'Y','N'),(263,115,'ZxBg_M_XmDir','北京市异地安置审批表[12].xlsx','.xlsx',244943,12,'2019-04-09 11:32:00',NULL,NULL,'Y','N'),(264,115,'ZxBg_M_XmDir','印章、证照使用审批单[50].docx','.docx',34977,16,'2019-04-09 11:35:24',NULL,NULL,'Y','N'),(265,115,'ZxBg_M_XmDir','1[26].jpeg','.jpeg',59756,11,'2019-04-09 11:42:22',NULL,NULL,'Y','N'),(266,115,'ZxBg_M_XmDir','项目付款审批单[26].docx','.docx',50944,11,'2019-04-09 11:42:22',NULL,NULL,'Y','N'),(267,115,'ZxBg_M_XmDir','科电人员2019年剩余年假统计表[13].xls','.xls',188416,12,'2019-04-19 16:18:03',NULL,NULL,'Y','N'),(268,115,'ZxBg_M_XmDir','合同审批单[13].docx','.docx',29638,12,'2019-04-19 16:18:03',NULL,NULL,'Y','N'),(269,115,'ZxBg_M_XmDir','仿照鲁迅文笔《纪念昆山龙哥》[13].pdf','.pdf',444849,12,'2019-04-19 16:18:03',NULL,NULL,'Y','N'),(270,107,'ZxBg_M_XmDir','合同审批单[14].docx','.docx',30354,12,'2019-04-19 16:36:35',NULL,NULL,'Y','N'),(271,107,'ZxBg_M_XmDir','IEDS-重大事件评议表-项目代码-YYMMDD-01[14].xls','.xls',100864,12,'2019-04-19 16:36:35',NULL,NULL,'Y','N'),(272,107,'ZxBg_M_XmDir','IEDS-2-91重大事件处理程序[14].doc','.doc',209408,12,'2019-04-19 16:36:35',NULL,NULL,'Y','N');
/*!40000 ALTER TABLE `Pf_M_AttachInfo` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_AttachInfo_11` BEFORE INSERT ON `Pf_M_AttachInfo` FOR EACH ROW
BEGIN
	IF instr(new.FileName,'.')!=0 THEN 
    	set new.FileExt = reverse(substr(reverse(new.FileName),1,instr(reverse(new.FileName),'.')));
	ELSE
		set new.FileExt = '.txt';
	END IF;
  
	if new.FileSize=0 then
    	call Pf_M_AttachInfo_11_err1();	
	end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_AttachInfo_21` AFTER INSERT ON `Pf_M_AttachInfo` FOR EACH ROW
BEGIN
 	declare vKhXmID SMALLINT(6);
 	
 	if new.PrimaryName='XmXx_M_KhXmWjMl' then #当新增客户项目技术文件时，更新项目主体更新时间
 		select KhXmID into vKhXmID from XmXx_M_KhXmWjMl where ID=new.PrimaryID and Lb='T';
 		if vKhXmID is not null then 
 			update XmXx_M_KhXm set GxSj=now() where ID=vKhXmID;
 		end if;
 	end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_AttachInfo_13` BEFORE UPDATE ON `Pf_M_AttachInfo` FOR EACH ROW
BEGIN
	if new.FileName!=old.FileName then
		IF instr(new.FileName,'.')!=0 THEN 
    		set new.FileExt = reverse(substr(reverse(new.FileName),1,instr(reverse(new.FileName),'.')));
		ELSE
			set new.FileExt = '.txt';
		END IF;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_AttachInfo_23` AFTER UPDATE ON `Pf_M_AttachInfo` FOR EACH ROW
BEGIN
 	declare vKhXmID SMALLINT(6); 
 	
 	if new.UpdateTs!=old.UpdateTs THEN
 		DELETE from Pf_M_AttachReadHis WHERE AttachID=old.ID;
 	end if;
 	
 	if old.PrimaryName='XmXx_M_KhXmWjMl' then #当更新客户项目技术文件时，更新项目主体更新时间
 		select KhXmID into vKhXmID from XmXx_M_KhXmWjMl where ID=old.PrimaryID and Lb='T';
 		if vKhXmID is not null then 
 			update XmXx_M_KhXm set GxSj=now() where ID=vKhXmID;
 		end if;
 	end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Pf_M_AttachReadHis`
--

DROP TABLE IF EXISTS `Pf_M_AttachReadHis`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_M_AttachReadHis` (
  `AttachID` int(12) unsigned NOT NULL,
  `UsrID` smallint(5) unsigned NOT NULL,
  `ReadTs` datetime NOT NULL,
  PRIMARY KEY (`AttachID`,`UsrID`),
  KEY `AttachID` (`AttachID`),
  KEY `UsrID` (`UsrID`),
  CONSTRAINT `Pf_M_AttachReadHis_FK1` FOREIGN KEY (`AttachID`) REFERENCES `Pf_M_AttachInfo` (`ID`) ON DELETE CASCADE,
  CONSTRAINT `Pf_M_AttachReadHis_FK2` FOREIGN KEY (`UsrID`) REFERENCES `Pf_M_Usr` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_M_AttachReadHis`
--

LOCK TABLES `Pf_M_AttachReadHis` WRITE;
/*!40000 ALTER TABLE `Pf_M_AttachReadHis` DISABLE KEYS */;
INSERT INTO `Pf_M_AttachReadHis` VALUES (5,1,'2018-02-02 19:19:14'),(6,14,'2018-08-31 23:06:03'),(7,14,'2018-04-12 13:52:22'),(8,14,'2018-01-29 19:21:28'),(9,14,'2018-10-06 17:36:01'),(10,14,'2018-08-15 00:37:01'),(12,11,'2018-02-24 23:41:51'),(12,12,'2018-02-25 04:28:44'),(13,11,'2018-02-24 23:42:04'),(13,12,'2018-02-25 04:28:49'),(14,11,'2018-02-24 23:41:35'),(14,12,'2018-02-25 04:28:28'),(17,11,'2018-03-05 14:14:18'),(18,14,'2018-06-26 00:13:30'),(19,4,'2018-03-09 16:07:17'),(20,14,'2018-04-20 20:47:40'),(21,14,'2018-04-20 20:49:27'),(22,10,'2018-03-13 14:32:46'),(24,14,'2018-04-20 20:51:16'),(25,11,'2018-03-14 15:27:11'),(34,14,'2018-04-20 10:25:07'),(35,14,'2018-08-23 08:30:24'),(44,14,'2019-03-27 11:58:30'),(45,4,'2018-03-31 00:49:16'),(46,4,'2018-03-31 00:49:23'),(47,11,'2018-03-31 06:33:13'),(48,11,'2018-03-31 06:33:35'),(49,11,'2018-03-31 06:51:51'),(51,9,'2018-03-31 09:25:03'),(52,9,'2018-04-07 12:10:37'),(52,10,'2018-05-16 10:44:06'),(52,11,'2018-08-23 10:55:48'),(52,12,'2018-04-20 18:57:16'),(52,16,'2019-03-27 14:00:10'),(53,9,'2018-04-01 23:54:33'),(53,10,'2018-04-25 02:37:57'),(53,11,'2018-05-22 11:37:54'),(53,14,'2018-05-22 10:52:09'),(54,9,'2018-04-07 11:40:52'),(54,10,'2018-04-25 02:37:57'),(54,11,'2018-04-30 08:19:20'),(54,12,'2018-04-20 18:10:02'),(54,14,'2018-05-22 10:52:10'),(54,15,'2018-06-21 14:19:54'),(55,9,'2018-04-21 08:51:06'),(55,10,'2018-08-02 00:38:59'),(55,11,'2018-04-30 08:18:58'),(55,12,'2018-08-23 10:29:22'),(55,13,'2018-10-03 13:37:10'),(55,14,'2018-08-15 12:40:47'),(55,15,'2018-07-30 14:51:33'),(55,16,'2018-08-14 22:40:09'),(56,9,'2018-04-21 08:51:06'),(56,10,'2018-04-25 02:37:57'),(56,11,'2018-04-30 08:19:20'),(56,12,'2018-04-20 18:57:16'),(56,13,'2018-10-03 13:37:10'),(56,14,'2018-05-22 10:52:10'),(56,15,'2018-07-31 06:39:47'),(56,16,'2018-08-14 22:40:09'),(57,9,'2018-04-21 08:51:06'),(57,10,'2018-04-25 02:37:57'),(57,11,'2018-04-30 08:19:20'),(57,12,'2018-04-20 18:57:16'),(57,13,'2018-10-17 01:26:10'),(57,14,'2018-05-22 10:52:10'),(57,16,'2019-03-27 14:00:10'),(58,14,'2019-03-23 20:55:48'),(59,9,'2018-06-03 06:23:27'),(59,10,'2018-05-22 15:06:37'),(59,11,'2018-04-30 08:19:20'),(59,12,'2018-08-23 10:29:23'),(59,13,'2018-10-17 01:26:10'),(59,14,'2018-08-15 12:40:48'),(59,15,'2018-06-21 14:19:54'),(59,16,'2018-08-14 22:40:09'),(60,9,'2018-05-03 06:53:22'),(60,10,'2018-05-02 16:41:52'),(60,11,'2018-04-30 08:19:19'),(60,12,'2018-04-30 06:35:56'),(60,14,'2018-10-07 02:47:47'),(60,16,'2019-03-27 14:00:10'),(61,10,'2018-05-16 10:24:24'),(61,11,'2018-08-02 00:54:30'),(62,11,'2018-04-30 08:19:20'),(63,9,'2018-07-27 14:36:55'),(63,10,'2018-08-02 00:38:59'),(63,11,'2018-08-01 23:56:05'),(63,12,'2018-08-23 08:28:03'),(63,13,'2018-10-03 13:37:10'),(63,14,'2018-06-22 16:44:15'),(63,15,'2018-06-21 15:07:21'),(63,16,'2018-08-14 22:40:09'),(64,10,'2018-05-16 10:24:24'),(64,13,'2018-10-03 13:37:11'),(76,14,'2018-10-06 22:34:14'),(85,14,'2018-10-06 22:33:04'),(86,14,'2018-10-07 00:35:37'),(100,12,'2018-05-02 15:57:25'),(104,9,'2018-05-03 07:00:32'),(106,9,'2018-05-03 07:26:56'),(108,2,'2018-05-11 03:18:43'),(108,14,'2018-05-11 01:13:25'),(109,14,'2018-05-11 01:12:58'),(110,2,'2018-05-16 10:43:26'),(113,11,'2018-08-21 18:26:07'),(120,14,'2018-05-27 03:00:53'),(122,10,'2018-11-14 19:06:55'),(122,14,'2018-11-03 07:39:46'),(124,14,'2019-02-25 03:50:42'),(127,5,'2018-06-26 01:49:31'),(127,8,'2018-06-26 01:45:51'),(127,10,'2018-06-26 01:50:23'),(127,14,'2018-11-27 15:20:30'),(128,5,'2018-06-26 01:49:37'),(128,8,'2018-06-26 01:46:03'),(128,12,'2018-06-26 01:44:54'),(128,14,'2018-11-27 15:20:17'),(131,14,'2018-08-15 13:25:44'),(134,11,'2018-08-21 18:25:36'),(135,11,'2018-08-21 18:27:11'),(136,11,'2018-08-21 18:47:45'),(137,11,'2018-08-21 18:48:07'),(138,14,'2018-08-31 23:04:24'),(140,14,'2018-10-07 19:46:06'),(142,14,'2018-10-07 19:51:20'),(143,14,'2018-10-07 19:52:09'),(144,14,'2018-10-07 19:53:18'),(150,14,'2018-10-07 23:59:32'),(158,14,'2018-11-26 19:33:13'),(159,10,'2018-11-09 05:57:25'),(159,14,'2018-11-26 19:32:23'),(160,14,'2018-12-06 22:48:40'),(161,14,'2018-11-26 19:41:32'),(164,14,'2018-11-27 17:50:49'),(168,10,'2018-11-09 06:26:06'),(169,14,'2019-04-02 00:19:19'),(174,10,'2018-11-09 07:11:40'),(185,8,'2018-11-27 15:47:46'),(185,10,'2018-11-27 16:21:35'),(186,8,'2018-11-27 15:47:57'),(192,14,'2019-03-26 11:17:08'),(193,14,'2019-03-26 11:26:55'),(194,14,'2019-03-06 04:20:56'),(197,14,'2019-03-22 10:19:16'),(201,14,'2019-03-22 16:50:58'),(205,14,'2019-03-23 21:06:25'),(206,14,'2019-03-23 21:06:49'),(207,14,'2019-03-23 21:07:12'),(211,14,'2019-03-23 22:18:35'),(212,14,'2019-03-23 22:19:31'),(213,14,'2019-03-25 23:50:29'),(214,14,'2019-03-25 14:57:44'),(216,14,'2019-03-25 16:41:48'),(218,14,'2019-03-25 23:46:16'),(219,14,'2019-03-25 23:42:00'),(220,14,'2019-03-25 23:45:42'),(225,12,'2019-03-26 13:20:50'),(228,12,'2019-03-26 13:21:05'),(231,12,'2019-03-27 10:33:17'),(236,11,'2019-03-27 11:57:47'),(243,4,'2019-03-27 13:57:37'),(243,12,'2019-03-27 13:37:12'),(244,12,'2019-03-27 13:37:41'),(245,12,'2019-03-27 13:38:00'),(246,12,'2019-03-27 13:38:06'),(247,14,'2019-03-27 15:00:29'),(248,11,'2019-04-09 11:44:41'),(250,12,'2019-04-09 10:44:08'),(259,12,'2019-04-09 11:29:51'),(260,12,'2019-04-09 11:30:00'),(261,12,'2019-04-09 11:32:06'),(262,12,'2019-04-09 11:32:14'),(263,12,'2019-04-09 11:32:26'),(264,12,'2019-04-09 11:35:52'),(266,11,'2019-04-09 11:42:39'),(266,14,'2019-04-09 15:33:28'),(268,12,'2019-04-19 16:19:41'),(269,12,'2019-04-19 16:19:20'),(270,12,'2019-04-19 16:37:29');
/*!40000 ALTER TABLE `Pf_M_AttachReadHis` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `Pf_M_Biz`
--

DROP TABLE IF EXISTS `Pf_M_Biz`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_M_Biz` (
  `Code` tinyint(3) unsigned NOT NULL,
  `Name` varchar(10) NOT NULL DEFAULT '',
  `FuncID` smallint(4) unsigned NOT NULL,
  `ToDoPromptTag` char(1) NOT NULL DEFAULT 'N',
  `BizTableName` varchar(30) NOT NULL DEFAULT '',
  `HandleUrl` varchar(100) NOT NULL DEFAULT '-',
  `ViewUrl` varchar(100) NOT NULL DEFAULT '',
  PRIMARY KEY (`Code`),
  UNIQUE KEY `Pf_M_Biz_UK1` (`Name`) USING BTREE,
  UNIQUE KEY `Pf_M_Biz_UK2` (`FuncID`) USING BTREE,
  CONSTRAINT `Pf_M_Biz_FK1` FOREIGN KEY (`FuncID`) REFERENCES `Pf_M_Func` (`ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_M_Biz`
--

LOCK TABLES `Pf_M_Biz` WRITE;
/*!40000 ALTER TABLE `Pf_M_Biz` DISABLE KEYS */;
INSERT INTO `Pf_M_Biz` VALUES (4,'采购申请',72,'N','CgSq_A_Zt','../../EntApps/CgSq/handle.jsp?ToDoWorkItem=','../../EntApps/CgSq/view.jsp?BizID='),(5,'工资发放',70,'N','Gz_A_Zt','../../FileApp/GzFf/handle1.jsp?ToDoWorkItem=','../../FileApp/GzFf/view1.jsp?BizID='),(6,'公司论坛',68,'N','GsLt_A_Zt','../../FileApp/GsLt/handle.jsp?ToDoWorkItem=','../../FileApp/GsLt/view.jsp?BizID='),(7,'档案交接',65,'N','Da_A_Jj','../../EntApps/DaJj/handle.jsp?ToDoWorkItem=','../../EntApps/DaJj/view.jsp?BizID='),(8,'档案借阅',66,'N','Da_A_Jy','../../EntApps/DaJy/handle.jsp?ToDoWorkItem=','../../EntApps/DaJy/view.jsp?BizID='),(9,'非业务类合同管理',64,'N','WjHq_A_Zt','../../FileApp/WjHq/handle.jsp?ToDoWorkItem=','../../FileApp/WjHq/view.jsp?BizID='),(10,'督查督办',62,'N','DcDb_A_Zt','../../FileApp/DcDb/handle.jsp?ToDoWorkItem=','../../FileApp/DcDb/view.jsp?BizID='),(11,'信息发布',22,'N','XxFb_A_Zt','../../FileApp/XxFb/handle.jsp?ToDoWorkItem=','../../FileApp/XxFb/view.jsp?BizID='),(12,'公司文件',23,'N','GsWj_A_Zt','../../FileApp/GsWj/handle.jsp?ToDoWorkItem=','../../FileApp/GsWj/view.jsp?BizID='),(13,'请示签报',25,'N','QsQb_A_Zt','../../FileApp/QsQb/handle.jsp?ToDoWorkItem=','../../FileApp/QsQb/view.jsp?BizID='),(14,'借款申请',47,'N','JkBx_A_Jk','../../FileApp/Jk/handle.jsp?ToDoWorkItem=','../../FileApp/Jk/view.jsp?BizID='),(15,'还款记录',48,'N','JkBx_A_Hk','../../FileApp/Hk/handle.jsp?ToDoWorkItem=','../../FileApp/Hk/view.jsp?BizID='),(16,'会议管理',28,'N','HyGl_A_Zt','../../FileApp/HyGl/handle.jsp?ToDoWorkItem=','../../FileApp/HyGl/view.jsp?BizID='),(17,'请休假',29,'N','Xj_A_Zt','../../FileApp/Qxj/handle.jsp?ToDoWorkItem=','../../FileApp/Qxj/view.jsp?BizID='),(18,'报销申请',49,'N','JkBx_A_Bx','../../FileApp/BxSq/handle1.jsp?ToDoWorkItem=','../../FileApp/BxSq/view.jsp?BizID='),(19,'预付款审批',58,'N','ZxBg_A_YfkSp','../../EntApps/YfkSp/handle.jsp?ToDoWorkItem=','../../EntApps/YfkSp/view.jsp?BizID='),(20,'公司收文',59,'N','GsSw_A_Zt','../../FileApp/GsSw/handle.jsp?ToDoWorkItem=','../../FileApp/GsSw/view.jsp?BizID='),(21,'立项申请',50,'N','ZxBg_A_LxSq','../../EntApps/LxSq/handle.jsp?ToDoWorkItem=','../../EntApps/LxSq/view.jsp?BizID='),(22,'尽职调查材料审批',51,'N','ZxBg_A_JzDc','../../EntApps/JzDc/handle.jsp?ToDoWorkItem=','../../EntApps/JzDc/view.jsp?BizID='),(23,'项目审查',52,'N','ZxBg_A_XmSc','../../EntApps/XmSc/handle.jsp?ToDoWorkItem=','../../EntApps/XmSc/view.jsp?BizID='),(24,'项目审批',53,'N','ZxBg_A_FaSp','../../EntApps/FaSp/handle.jsp?ToDoWorkItem=','../../EntApps/FaSp/view.jsp?BizID='),(25,'印章、证照使用审批',54,'N','ZxBg_A_YzZzSq','../../EntApps/YzZzSq/handle.jsp?ToDoWorkItem=','../../EntApps/YzZzSq/view.jsp?BizID='),(26,'项目付款审批',55,'N','ZxBg_A_FkSp','../../EntApps/FkSp/handle.jsp?ToDoWorkItem=','../../EntApps/FkSp/view.jsp?BizID='),(27,'合同审批',60,'N','ZxBg_A_HtSp','../../EntApps/HtSp/handle.jsp?ToDoWorkItem=','../../EntApps/HtSp/view.jsp?BizID='),(28,'合同审查',67,'N','ZxBg_A_HtSc','../../EntApps/HtSc/handle.jsp?ToDoWorkItem=','../../EntApps/HtSc/view.jsp?BizID=');
/*!40000 ALTER TABLE `Pf_M_Biz` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_Biz_23` AFTER UPDATE ON `Pf_M_Biz` FOR EACH ROW
BEGIN
	if new.ToDoPromptTag!=old.ToDoPromptTag and new.ToDoPromptTag='Y' then
    	delete from Pf_M_PrivatePromptSet where BizCode=old.Code;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Pf_M_BizFlow`
--

DROP TABLE IF EXISTS `Pf_M_BizFlow`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_M_BizFlow` (
  `ID` smallint(4) unsigned NOT NULL AUTO_INCREMENT,
  `Name` varchar(40) NOT NULL DEFAULT '',
  `BizCode` tinyint(3) unsigned NOT NULL,
  `MapCond` varchar(1000) DEFAULT NULL,
  `MapCondDesc` varchar(500) DEFAULT NULL,
  `IfValid` char(1) NOT NULL DEFAULT 'Y',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `Pf_M_BizFlow_UK1` (`Name`) USING BTREE,
  KEY `Pf_M_BizFlow_FK1` (`BizCode`),
  CONSTRAINT `Pf_M_BizFlow_FK1` FOREIGN KEY (`BizCode`) REFERENCES `Pf_M_Biz` (`Code`)
) ENGINE=InnoDB AUTO_INCREMENT=55 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_M_BizFlow`
--

LOCK TABLES `Pf_M_BizFlow` WRITE;
/*!40000 ALTER TABLE `Pf_M_BizFlow` DISABLE KEYS */;
INSERT INTO `Pf_M_BizFlow` VALUES (7,'信息发布流程',11,'<WebCrawler>N</WebCrawler>','非爬虫采编','Y'),(8,'公司文件发文流程',12,'','','N'),(9,'请示签报流程',13,'','','N'),(11,'会议管理流程',16,'',NULL,'Y'),(12,'请休假流程',17,'',NULL,'Y'),(13,'借款申请审批流程',14,'','','Y'),(15,'报销申请审批流程',18,'','','N'),(16,'立项申请流程',21,'','','N'),(17,'尽职调查材料审批流程',22,'','','Y'),(18,'项目审查流程',23,'','','N'),(19,'实施方案审批流程',24,'','','N'),(20,'印章、证照使用审批流程',25,'','','N'),(21,'项目付款审批流程',26,'','','N'),(22,'预付款审批流程',19,'','','Y'),(23,'还款流程',15,'','','Y'),(24,'公司收文流程',20,'','','Y'),(25,'印章证照使用审批流程201805',25,'','','N'),(26,'合同审批流程0',27,'','','N'),(27,'合同审批流程201805',27,'','','N'),(28,'项目审查流程201805',23,'','','N'),(29,'爬虫采编信息发布',11,'<WebCrawler>Y</WebCrawler>','爬虫采编','Y'),(30,'督查督办流程',10,'','','Y'),(31,'一般报销审批流程',18,'','','Y'),(32,'部门两级报销审批流程',18,'','','Y'),(33,'非业务类合同审签流程',9,'','','N'),(34,'公司信息发布流程',11,'<WebCrawler>N</WebCrawler>','非爬虫采编','Y'),(35,'公司文件发文流程201806',12,'','','Y'),(36,'档案交接流程',7,'','','Y'),(37,'档案借阅流程',8,'','','Y'),(38,'合同审查流程',28,'','','N'),(39,'公司论坛操作流程',6,'','','Y'),(40,'工资发放作业流程',5,'','','Y'),(41,'保理部业务请示签报流程',13,'','','Y'),(42,'采购申请审批流程',4,'','','Y'),(43,'印章证照使用审批流程201808',25,'','','Y'),(44,'公司任命发文流程201808',12,'','','Y'),(45,'非业务类合同审签流程2019',9,'','','N'),(46,'立项申请流程2019',21,'','','Y'),(47,'项目审查流程2019',23,'','','Y'),(48,'项目审批流程2019',24,'','','Y'),(49,'合同审批流程2019',27,'','','N'),(50,'项目付款审批流程2019',26,'','','Y'),(51,'非业务类合同审签流程201904',9,'','','Y'),(52,'一般请示签报流程2019',13,'','','Y'),(53,'合同审查流程201904',28,'','','Y'),(54,'合同审批流程201904',27,'','','Y');
/*!40000 ALTER TABLE `Pf_M_BizFlow` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `Pf_M_BizFlowBranch`
--

DROP TABLE IF EXISTS `Pf_M_BizFlowBranch`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_M_BizFlowBranch` (
  `ID` smallint(5) unsigned NOT NULL AUTO_INCREMENT,
  `Name` varchar(40) NOT NULL DEFAULT '',
  `BizFlowID` smallint(4) unsigned NOT NULL,
  `BizNodeID1` smallint(4) NOT NULL,
  `BizNodeID2` smallint(4) NOT NULL,
  `IfValid` char(1) NOT NULL DEFAULT 'Y',
  `MapCond` varchar(1000) DEFAULT NULL,
  `MapCondDesc` varchar(500) DEFAULT NULL,
  `PsnSelAttr` tinyint(3) unsigned NOT NULL,
  `SpecNodeID` smallint(4) unsigned DEFAULT NULL,
  `CanSetNextNodePTL` char(1) NOT NULL DEFAULT 'N',
  `SpecRoleID` tinyint(3) unsigned DEFAULT NULL,
  `PassReject` char(1) DEFAULT NULL,
  `DisplayOrd` tinyint(3) unsigned NOT NULL DEFAULT '0',
  `ProcTimeLimit` tinyint(3) unsigned NOT NULL,
  PRIMARY KEY (`ID`),
  KEY `BizFlowID` (`BizFlowID`),
  KEY `BizNodeID1` (`BizNodeID1`),
  KEY `BizNodeID2` (`BizNodeID2`),
  CONSTRAINT `Pf_M_BizFlowBranch_FK1` FOREIGN KEY (`BizFlowID`) REFERENCES `Pf_M_BizFlow` (`ID`) ON DELETE CASCADE,
  CONSTRAINT `Pf_M_BizFlowBranch_FK2` FOREIGN KEY (`BizNodeID1`) REFERENCES `Pf_M_BizNode` (`ID`) ON DELETE CASCADE,
  CONSTRAINT `Pf_M_BizFlowBranch_FK3` FOREIGN KEY (`BizNodeID2`) REFERENCES `Pf_M_BizNode` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=920 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_M_BizFlowBranch`
--

LOCK TABLES `Pf_M_BizFlowBranch` WRITE;
/*!40000 ALTER TABLE `Pf_M_BizFlowBranch` DISABLE KEYS */;
INSERT INTO `Pf_M_BizFlowBranch` VALUES (53,'提交部门审批',7,34,35,'Y','',NULL,14,NULL,'N',NULL,'',1,0),(54,'提交部门其他领导审批',7,35,35,'Y','',NULL,15,NULL,'N',NULL,'',1,0),(55,'提交公司领导会签',7,35,36,'Y','',NULL,57,NULL,'N',NULL,'',3,0),(56,'驳回到起草',7,35,34,'Y','',NULL,2,34,'N',NULL,'',9,0),(57,'确认批复',7,36,0,'Y','',NULL,3,NULL,'N',NULL,'',1,0),(58,'着起草人发布',7,125,37,'Y','',NULL,2,34,'N',NULL,'',1,0),(59,'确认发布',7,37,38,'Y','',NULL,1,NULL,'N',NULL,'',1,0),(60,'提交部门审批',8,39,40,'Y','',NULL,14,NULL,'N',NULL,'',1,0),(61,'提交部门其他领导审批',8,40,40,'Y','',NULL,15,NULL,'N',NULL,'',1,0),(62,'提交公司会签',8,40,41,'Y','',NULL,57,NULL,'N',NULL,'',2,0),(63,'着起草人编号套红',8,124,42,'Y','',NULL,2,39,'N',NULL,'',1,0),(64,'驳回到起草',8,40,39,'Y','',NULL,2,39,'N',NULL,'',9,0),(65,'确认批复',8,41,0,'Y','',NULL,3,NULL,'N',NULL,'',1,0),(66,'转总裁办盖章分发',8,42,43,'Y','','',31,NULL,'N',57,'',1,0),(67,'确认分发/撤销，结束流程',8,43,44,'Y','',NULL,1,NULL,'N',NULL,'',1,0),(68,'提交部门审批',9,45,46,'Y','',NULL,14,NULL,'N',NULL,'',1,0),(69,'提交部门其他领导审批',9,46,46,'Y','',NULL,15,NULL,'N',NULL,'',1,0),(70,'提交公司领导会签',9,46,47,'Y','',NULL,57,NULL,'N',NULL,'',2,0),(71,'着起草人执行指派',9,46,48,'Y','',NULL,2,45,'N',NULL,'',3,0),(72,'驳回到起草',9,46,45,'Y','',NULL,2,45,'N',NULL,'',9,0),(73,'确认批复',9,47,0,'Y','',NULL,3,NULL,'N',NULL,'',1,0),(74,'着执行人反馈执行情况',9,48,49,'Y','','',107,NULL,'Y',NULL,'',1,0),(75,'提交执行情况反馈',9,49,50,'Y','',NULL,2,48,'N',NULL,'P',1,0),(76,'归档完毕结束流程',9,50,51,'Y','',NULL,1,NULL,'N',NULL,'',1,0),(77,'退回执行反馈',9,50,49,'Y','',NULL,107,NULL,'N',NULL,'',9,0),(93,'提交部门审批',12,63,64,'Y','<ClrJbMin>5</ClrJbMin>\r\n<ClrJbMax>99</ClrJbMax>\r\n<SfBj>N</SfBj>\r\n<SqTsMin>-</SqTsMin>\r\n<SqTsMax>-</SqTsMax>','处理人级别5~99\r\n正常请假',53,NULL,'N',NULL,'',1,0),(94,'提交总裁审批',12,63,65,'Y','<ClrJbMin>2</ClrJbMin>\r\n<ClrJbMax>3</ClrJbMax>\r\n<SfBj>N</SfBj>\r\n<SqTsMin>-</SqTsMin>\r\n<SqTsMax>-</SqTsMax>','处理人级别2~3\r\n正常请假',58,NULL,'N',NULL,'',3,0),(95,'提交销假确认',12,63,68,'Y','<ClrJbMin>5</ClrJbMin>\r\n<ClrJbMax>99</ClrJbMax>\r\n<SfBj>Y</SfBj>\r\n<SqTsMin>-</SqTsMin>\r\n<SqTsMax>-</SqTsMax>','处理人级别5~99\r\n补假',53,NULL,'N',NULL,'',4,0),(96,'提交销假确认',12,63,68,'Y','<ClrJbMin>2</ClrJbMin>\r\n<ClrJbMax>3</ClrJbMax>\r\n<SfBj>Y</SfBj>\r\n<SqTsMin>-</SqTsMin>\r\n<SqTsMax>-</SqTsMax>','处理人级别2~3\r\n补假',58,NULL,'N',NULL,'',6,0),(97,'提交分管副总审批',12,64,236,'Y','','',71,NULL,'N',NULL,'',1,0),(98,'提交人资备案',12,236,66,'Y','<ClrJbMin>-</ClrJbMin>\r\n<ClrJbMax>-</ClrJbMax>\r\n<SfBj>-</SfBj>\r\n<SqTsMin>0</SqTsMin>\r\n<SqTsMax>2</SqTsMax>','申请天数2天以内',31,NULL,'N',46,'',2,0),(99,'提交总裁审批',12,236,65,'Y','','',58,NULL,'N',NULL,'',1,0),(100,'驳回申请',12,64,63,'Y','',NULL,2,63,'N',NULL,'',9,0),(101,'驳回申请',12,65,63,'Y','',NULL,2,63,'N',NULL,'',9,0),(102,'转人资备案',12,65,66,'Y','',NULL,31,NULL,'N',46,'',1,0),(103,'转申请人销假',12,66,67,'Y','',NULL,2,63,'N',NULL,'',1,0),(104,'提交领导确认销假',12,67,68,'Y','<ClrJbMin>5</ClrJbMin>\r\n<ClrJbMax>99</ClrJbMax>\r\n<SfBj>-</SfBj>\r\n<SqTsMin>-</SqTsMin>\r\n<SqTsMax>-</SqTsMax>','处理人级别5~99',53,NULL,'N',NULL,'',1,0),(105,'提交领导确认销假',12,67,68,'Y','<ClrJbMin>2</ClrJbMin>\r\n<ClrJbMax>3</ClrJbMax>\r\n<SfBj>-</SfBj>\r\n<SqTsMin>-</SqTsMin>\r\n<SqTsMax>-</SqTsMax>','处理人级别2~3',58,NULL,'N',NULL,'',3,0),(106,'确认销假，结束流程',12,68,69,'Y','',NULL,1,NULL,'N',NULL,'',1,0),(107,'驳回到销假/申请',12,68,-1,'Y','',NULL,4,NULL,'N',NULL,'',9,0),(191,'呈主管领导签发',8,40,124,'Y','',NULL,31,NULL,'N',26,'',3,0),(192,'退回部门审批',8,124,40,'Y','',NULL,4,NULL,'N',NULL,'',9,0),(193,'呈主管领导审批',7,35,125,'Y','',NULL,31,NULL,'N',26,'',5,0),(194,'退回部门审批',7,125,-1,'Y','',NULL,4,NULL,'N',NULL,'',9,0),(385,'提交人资备案',12,64,66,'Y','<ClrJbMin>-</ClrJbMin>\r\n<ClrJbMax>-</ClrJbMax>\r\n<SfBj>-</SfBj>\r\n<SqTsMin>0</SqTsMin>\r\n<SqTsMax>1</SqTsMax>','申请天数1天以内',31,NULL,'N',46,'',2,0),(386,'提交部门审批',13,187,194,'Y','<SqrGwJb1>6</SqrGwJb1>\r\n<SqrGwJb2>10</SqrGwJb2>\r\n<JkEd1>-</JkEd1>\r\n<JkEd2>-</JkEd2>','申请人级别6~10',53,NULL,'N',NULL,'',1,0),(387,'提交分管副总审批',13,187,188,'Y','<SqrGwJb1>5</SqrGwJb1>\r\n<SqrGwJb2>5</SqrGwJb2>\r\n<JkEd1>-</JkEd1>\r\n<JkEd2>-</JkEd2>','申请人级别5',71,NULL,'N',NULL,'',2,0),(388,'提交总经理审批',13,187,192,'Y','<SqrGwJb1>3</SqrGwJb1>\r\n<SqrGwJb2>4</SqrGwJb2>\r\n<JkEd1>-</JkEd1>\r\n<JkEd2>-</JkEd2>','申请人级别3~4',31,NULL,'N',36,'',3,0),(390,'提交财务审核',13,194,189,'Y','<SqrGwJb1>-</SqrGwJb1>\r\n<SqrGwJb2>-</SqrGwJb2>\r\n<JkEd1>0</JkEd1>\r\n<JkEd2>2999</JkEd2>','借款不超过3000',31,NULL,'N',21,'',1,0),(391,'提交分管副总审批',13,194,188,'Y','','',71,NULL,'N',NULL,'',2,0),(392,'退回申请',13,194,187,'Y','','',2,187,'N',NULL,'',9,0),(393,'提交总经理审批',13,188,192,'Y','','',31,NULL,'N',36,'',2,0),(394,'提交财务审核',13,188,189,'Y','<SqrGwJb1>-</SqrGwJb1>\r\n<SqrGwJb2>-</SqrGwJb2>\r\n<JkEd1>0</JkEd1>\r\n<JkEd2>4999</JkEd2>','借款不超过5000',31,NULL,'N',21,'',1,0),(395,'退回申请',13,188,187,'Y','','',2,187,'N',NULL,'',9,0),(397,'转财务审核',13,192,189,'Y','','',31,NULL,'N',21,'',2,0),(398,'退回申请',13,192,187,'Y','','',2,187,'N',NULL,'',9,0),(402,'着出纳放款',13,189,190,'Y','','',31,NULL,'N',22,'',2,0),(403,'退回申请',13,189,187,'Y','','',2,187,'N',NULL,'',9,0),(404,'已放款并确认了签字，结束流程',13,190,191,'Y','','',1,NULL,'N',NULL,'',9,0),(424,'提交部门经理审批',15,224,225,'Y','<SqrGwJb1>6</SqrGwJb1>\r\n<SqrGwJb2>10</SqrGwJb2>','申请人岗级部门经理以下（6-10）',53,NULL,'N',NULL,'',1,0),(425,'提交分管副总审批',15,224,230,'Y','<SqrGwJb1>5</SqrGwJb1>\r\n<SqrGwJb2>5</SqrGwJb2>','申请人岗级部门经理（5）',71,NULL,'N',NULL,'',2,0),(427,'转财务审核',15,224,229,'Y','<SqrGwJb1>2</SqrGwJb1>\r\n<SqrGwJb2>4</SqrGwJb2>','申请人岗级总监、分管副总、总经理（2-4）',31,NULL,'N',38,'',4,0),(428,'提交分管副总审批',15,225,230,'Y','','',71,NULL,'N',NULL,'',1,0),(429,'退回申报',15,225,224,'Y','','',2,224,'N',NULL,'',9,0),(430,'转财务审核',15,230,229,'Y','','',31,NULL,'N',38,'',1,0),(431,'退回申报',15,230,224,'Y','','',2,224,'N',NULL,'',9,0),(432,'转报销结清',15,231,227,'Y','','',31,NULL,'N',22,'',1,0),(433,'退回申报',15,231,224,'Y','','',2,224,'N',NULL,'',9,0),(434,'提交财务复核',15,229,232,'Y','','',31,NULL,'N',21,'',1,0),(435,'退回申报',15,229,224,'Y','','',2,224,'N',NULL,'',9,0),(437,'呈总经理审批',15,232,231,'Y','','',31,NULL,'N',36,'',1,0),(438,'退回申报',15,232,224,'Y','','',2,224,'N',NULL,'',9,0),(441,'报销已结清并确认了签字，结束流程',15,227,228,'Y','','',1,NULL,'N',NULL,'',9,0),(442,'提交相关人员账务凭证线上签字',13,190,233,'N','','',101,NULL,'N',NULL,'',1,1),(443,'已线上签字',13,233,0,'N','','',3,NULL,'N',NULL,'',1,0),(448,'提交分管副总审批',12,63,236,'Y','<ClrJbMin>4</ClrJbMin>\r\n<ClrJbMax>4</ClrJbMax>\r\n<SfBj>N</SfBj>\r\n<SqTsMin>-</SqTsMin>\r\n<SqTsMax>-</SqTsMax>','处理人级别4\r\n正常请假',71,NULL,'N',NULL,'',2,0),(449,'提交销假确认',12,63,68,'Y','<ClrJbMin>4</ClrJbMin>\r\n<ClrJbMax>4</ClrJbMax>\r\n<SfBj>Y</SfBj>\r\n<SqTsMin>-</SqTsMin>\r\n<SqTsMax>-</SqTsMax>','处理人级别4\r\n补假',71,NULL,'N',NULL,'',5,0),(450,'提交领导确认销假',12,67,68,'Y','<ClrJbMin>4</ClrJbMin>\r\n<ClrJbMax>4</ClrJbMax>\r\n<SfBj>-</SfBj>\r\n<SqTsMin>-</SqTsMin>\r\n<SqTsMax>-</SqTsMax>','处理人级别4',71,NULL,'N',NULL,'',2,0),(451,'驳回申请',12,236,63,'Y','','',2,63,'N',NULL,'',9,0),(452,'提交部门审查',16,237,238,'Y','','',53,NULL,'N',NULL,'',1,0),(453,'提交分管副总审查',16,238,239,'Y','','',71,NULL,'N',NULL,'',1,0),(454,'退回申请',16,238,237,'Y','','',2,237,'N',NULL,'',9,0),(455,'转法律合规部审查',16,239,240,'Y','','',31,NULL,'N',58,'',1,0),(456,'退回申请',16,239,237,'Y','','',2,237,'N',NULL,'',9,0),(457,'转风险管理部审查',16,240,241,'Y','','',31,NULL,'N',59,'',1,0),(458,'退回申请',16,240,237,'Y','','',2,237,'N',NULL,'',9,0),(459,'转财务部审查',16,241,242,'Y','','',31,NULL,'N',21,'',1,0),(460,'退回申请',16,241,237,'Y','','',2,237,'N',NULL,'',9,0),(461,'呈请决策部主任批示',16,242,243,'Y','','',31,NULL,'N',37,'',1,0),(462,'退回申请',16,242,237,'Y','','',2,237,'N',NULL,'',9,0),(463,'转立项归档',16,243,244,'Y','','',2,237,'N',NULL,'',1,0),(464,'退回申请',16,243,237,'Y','','',2,237,'N',NULL,'',9,0),(465,'呈相关领导线上签字',16,244,245,'N','','',101,NULL,'N',NULL,'',1,0),(466,'完成立项结论标注，结束流程',16,244,246,'Y','','',1,NULL,'N',NULL,'',9,0),(467,'已线上签字',16,245,0,'N','','',3,NULL,'N',NULL,'',1,0),(468,'提交部门经理审批',17,247,248,'Y','','',53,NULL,'N',NULL,'',1,0),(469,'提交部门分管副总审批',17,248,249,'Y','','',71,NULL,'N',NULL,'',1,0),(470,'退回起草补充或修正材料',17,248,247,'Y','','',2,247,'N',NULL,'',9,0),(471,'退回起草补充或修正材料',17,249,247,'Y','','',2,247,'N',NULL,'',9,0),(472,'材料合格，同意进入项目审查阶段',17,249,250,'Y','','',1,NULL,'N',NULL,'',1,0),(473,'提交部门经理审查',18,251,252,'Y','','',53,NULL,'N',NULL,'',1,0),(474,'提交申请部室分管副总审查',18,252,253,'Y','','',71,NULL,'N',NULL,'',1,0),(475,'退回发起',18,252,251,'Y','','',2,251,'N',NULL,'',9,0),(476,'提交法律合规部审查',18,252,254,'Y','','',31,NULL,'N',58,'',2,0),(477,'确认批复',18,253,252,'Y','','',4,NULL,'N',NULL,'',1,0),(478,'转会计部审查',18,254,255,'Y','','',31,NULL,'N',38,'',1,0),(479,'退回发起',18,254,251,'Y','','',2,251,'N',NULL,'',9,0),(480,'提交部门负责人审查',18,255,256,'Y','','',54,NULL,'N',NULL,'',1,0),(481,'退回发起',18,255,251,'Y','','',2,251,'N',NULL,'',9,0),(482,'提交分管副总审查',18,256,257,'Y','','',72,NULL,'N',NULL,'',1,0),(483,'确认批复',18,256,255,'Y','','',2,255,'N',NULL,'',9,0),(484,'确认批复',18,257,256,'Y','','',4,NULL,'N',NULL,'',1,0),(485,'转运营管理部审查/归档',18,255,258,'Y','','',31,NULL,'N',42,'',2,0),(486,'提交分管副总审查',18,258,259,'Y','','',72,NULL,'N',NULL,'',1,0),(487,'确认批复',18,259,258,'Y','','',4,NULL,'N',NULL,'',1,0),(488,'呈请决策部主任批示',18,258,260,'Y','','',31,NULL,'N',37,'',2,0),(489,'退回发起',18,258,251,'Y','','',2,251,'N',NULL,'',7,0),(490,'确认批复',18,260,258,'Y','','',4,NULL,'N',NULL,'',1,0),(491,'确认审查结果，结束流程',18,258,261,'Y','','',1,NULL,'N',NULL,'',9,0),(492,'呈相关领导线上签字',18,258,262,'N','','',101,NULL,'N',NULL,'',3,0),(493,'已线上签字',18,262,0,'N','','',3,NULL,'N',NULL,'',1,0),(494,'呈决策会主任审批',19,263,264,'Y','','',31,NULL,'N',36,'',1,0),(495,'呈董事长审批',19,263,265,'Y','','',31,NULL,'N',37,'',2,0),(496,'呈决策领导线上签字',19,263,266,'N','','',101,NULL,'N',NULL,'',3,0),(497,'完成实施方案审批表填制，结束流程',19,263,267,'Y','','',1,NULL,'N',NULL,'',9,0),(498,'确认批复',19,264,-1,'Y','','',4,NULL,'N',NULL,'',1,0),(499,'确认批复',19,265,-1,'Y','','',4,NULL,'N',NULL,'',1,0),(500,'已线上签字',19,266,0,'N','','',3,NULL,'N',NULL,'',1,0),(501,'提交部门审批',20,268,269,'Y','','',53,NULL,'N',NULL,'',1,0),(502,'提交部门分管副总审批',20,268,270,'Y','','',71,NULL,'N',NULL,'',2,0),(503,'提交分管合规副总审批',20,268,271,'Y','','',31,NULL,'N',62,'',3,0),(504,'提交公司领导审批',20,268,272,'Y','','',31,NULL,'N',26,'',4,0),(505,'提交用印管理员发放',20,268,275,'Y','','',31,NULL,'N',57,'',5,0),(506,'确认批复',20,269,-1,'Y','','',4,NULL,'N',NULL,'',1,0),(507,'确认批复',20,270,-1,'Y','','',4,NULL,'N',NULL,'',1,0),(508,'确认批复',20,271,-1,'Y','','',4,NULL,'N',NULL,'',1,0),(509,'确认批复',20,272,-1,'Y','','',4,NULL,'N',NULL,'',1,0),(510,'呈相关领导线上签字',20,275,273,'N','','',101,NULL,'N',NULL,'',1,0),(511,'已发放印章/证照，结束流程',20,275,274,'Y','','',1,NULL,'N',NULL,'',9,0),(512,'已线上签字',20,273,0,'N','','',3,NULL,'N',NULL,'',1,0),(514,'转法律合规部审核',21,277,279,'Y','','',31,NULL,'N',58,'',1,0),(515,'退回申请',21,277,276,'Y','','',2,276,'N',NULL,'',9,0),(518,'转会计审核',21,279,280,'Y','','',31,NULL,'N',38,'',1,0),(519,'退回申请',21,279,276,'Y','','',2,276,'N',NULL,'',9,0),(520,'提交财务部负责人审批',21,280,281,'Y','','',31,NULL,'N',64,'',1,0),(521,'退回申请',21,280,276,'Y','','',2,276,'N',NULL,'',9,0),(522,'提交总经理审批',21,281,283,'Y','','',31,NULL,'N',36,'',1,0),(523,'退回申请',21,281,276,'Y','','',2,276,'N',NULL,'',9,0),(526,'着出纳放款',21,283,284,'Y','','',31,NULL,'N',22,'',1,0),(527,'退回申请',21,283,276,'Y','','',2,276,'N',NULL,'',9,0),(529,'审批签字已确认、完成付款并结束流程',21,284,286,'Y','','',1,NULL,'N',NULL,'',9,0),(531,'提交部门负责人审核',21,276,277,'Y','','',71,NULL,'N',NULL,'',1,0),(533,'提交部门负责人审批',22,288,289,'Y','','',53,NULL,'N',NULL,'',1,0),(534,'提交部门分管副总审批',22,289,290,'Y','','',71,NULL,'N',NULL,'',1,0),(535,'退回申请',22,289,288,'Y','','',2,288,'N',NULL,'',9,0),(536,'转会计审核',22,290,291,'Y','','',31,NULL,'N',38,'',1,0),(537,'退回申请',22,290,288,'Y','','',2,288,'N',NULL,'',9,0),(538,'提交财务部门负责人审批',22,291,292,'Y','','',31,NULL,'N',21,'',1,0),(539,'退回申请',22,291,288,'Y','','',2,288,'N',NULL,'',9,0),(540,'呈总经理审批',22,292,293,'Y','','',31,NULL,'N',36,'',1,0),(541,'退回申请',22,292,288,'Y','','',2,288,'N',NULL,'',9,0),(542,'着经办人打印付款凭证',22,293,294,'Y','','',2,288,'N',NULL,'',1,0),(543,'退回申请',22,293,288,'Y','','',2,288,'N',NULL,'',9,0),(544,'呈相关领导线上签字',22,294,295,'N','','',101,NULL,'N',NULL,'',1,0),(545,'审批签字已确认、完成付款并结束流程',22,294,296,'Y','','',1,NULL,'N',NULL,'',9,0),(546,'已线上签字',22,295,0,'N','','',3,NULL,'N',NULL,'',1,0),(547,'提交财务办理',23,297,298,'Y','','',31,NULL,'N',22,'',1,0),(548,'转双方线上签字',23,298,299,'N','','',101,NULL,'N',NULL,'',1,0),(549,'确认签字、确认还款、结束流程',23,298,300,'Y','','',1,NULL,'N',NULL,'',2,0),(550,'确认已线上签字',23,299,0,'N','','',3,NULL,'N',NULL,'',1,0),(551,'提交公司领导批办',24,301,302,'Y','','',38,NULL,'N',26,'',1,0),(552,'转收文传阅/办理',24,301,303,'Y','','',57,NULL,'N',NULL,'',2,0),(553,'着部门传阅/办理',24,303,303,'Y','','',38,NULL,'N',26,'',2,0),(554,'传阅/办理完毕、已指定分发范围、结束流程',24,301,304,'Y','','',1,NULL,'N',NULL,'',9,0),(555,'确认批复',24,302,0,'Y','','',3,NULL,'N',NULL,'',1,0),(556,'已阅/已办理',24,303,0,'Y','','',3,NULL,'N',NULL,'',1,0),(557,'提交部门领导审批',25,268,269,'Y','','',53,NULL,'N',NULL,'',1,0),(558,'提交部门分管领导审批',25,269,270,'Y','','',71,NULL,'N',NULL,'',1,0),(559,'驳回申请',25,269,268,'Y','','',2,268,'N',NULL,'',9,0),(560,'提交法律合规专工审核',26,305,310,'Y','','',31,NULL,'N',63,'',2,0),(561,'提交部门分管副总审批',26,306,307,'Y','','',71,NULL,'N',NULL,'',1,0),(563,'确认批复',26,307,305,'Y','','',2,305,'N',NULL,'',1,0),(564,'审核通过结束流程',26,310,309,'Y','','',1,NULL,'N',NULL,'',2,0),(567,'提交部门负责人审批',26,305,306,'Y','','',53,NULL,'N',NULL,'',1,0),(568,'提交部门负责人审批',26,310,311,'Y','','',54,NULL,'N',NULL,'',1,0),(569,'提交分管副总审批',26,311,312,'Y','','',72,NULL,'N',NULL,'',1,0),(570,'确认批复',26,312,310,'Y','','',2,310,'N',NULL,'',1,0),(571,'退回起草',26,306,305,'Y','','',2,305,'N',NULL,'',9,0),(572,'退回部门负责人',26,307,306,'Y','','',2,306,'N',NULL,'',9,0),(573,'退回专工审核',26,311,310,'Y','','',2,310,'N',NULL,'',9,0),(574,'退回部门负责人',26,312,311,'Y','','',2,311,'N',NULL,'',9,0),(575,'退回起草',26,310,305,'Y','','',2,305,'N',NULL,'',9,0),(576,'提交部门负责人审批',27,305,306,'Y','','',53,NULL,'N',NULL,'',1,0),(577,'提交法律合规负责人审批',27,305,311,'N','','',31,NULL,'N',58,'',2,0),(578,'提交部门分管副总审批',27,306,307,'Y','','',71,NULL,'N',NULL,'',1,0),(579,'退回起草',27,306,305,'Y','','',2,305,'N',NULL,'',9,0),(580,'确认批复',27,307,305,'N','','',2,305,'N',NULL,'',1,0),(581,'退回部门负责人',27,307,306,'Y','','',2,306,'N',NULL,'',9,0),(585,'转起草人审批单归档',27,311,313,'Y','','',2,305,'N',NULL,'',1,0),(586,'退回起草',27,311,305,'Y','','',2,305,'N',NULL,'',9,0),(589,'归档完毕结束流程',27,313,309,'Y','','',1,NULL,'N',NULL,'',1,0),(590,'提交部门经理审查',28,251,252,'Y','','',53,NULL,'N',NULL,'',1,0),(591,'提交申请部室分管副总审查',28,252,253,'Y','','',71,NULL,'N',NULL,'',1,0),(592,'转法律合规部审查',28,253,254,'Y','','',31,NULL,'N',58,'',1,0),(593,'退回发起',28,252,251,'Y','','',2,251,'N',NULL,'',9,0),(594,'退回发起',28,253,251,'Y','','',2,251,'N',NULL,'',9,0),(595,'转会计部审查',28,254,255,'Y','','',31,NULL,'N',38,'',1,0),(596,'退回发起',28,254,251,'Y','','',2,251,'N',NULL,'',9,0),(597,'提交部门负责人审查',28,255,256,'Y','','',54,NULL,'N',NULL,'',1,0),(598,'转运营管理部审查/归档',28,257,258,'Y','','',31,NULL,'N',61,'',1,0),(599,'退回发起',28,255,251,'Y','','',2,251,'N',NULL,'',9,0),(600,'提交分管副总审查',28,256,257,'Y','','',72,NULL,'N',NULL,'',1,0),(601,'退回发起',28,256,251,'Y','','',2,251,'N',NULL,'',9,0),(602,'退回发起',28,257,251,'Y','','',2,251,'N',NULL,'',9,0),(603,'提交分管副总审查',28,258,259,'Y','','',72,NULL,'N',NULL,'',1,0),(604,'呈请决策部主任批示',28,258,260,'Y','','',31,NULL,'N',37,'',2,0),(605,'退回发起',28,258,251,'Y','','',2,251,'N',NULL,'',7,0),(606,'确认审查结果，结束流程',28,258,261,'Y','','',1,NULL,'N',NULL,'',9,0),(607,'确认批复',28,259,258,'Y','','',4,NULL,'N',NULL,'',1,0),(608,'确认批复',28,260,258,'Y','','',4,NULL,'N',NULL,'',1,0),(609,'转分管合规副总审批',25,270,271,'Y','<CwzOnly>N</CwzOnly>','申请两枚以上章',31,NULL,'N',62,'',2,0),(610,'驳回申请',25,270,268,'Y','','',2,268,'N',NULL,'',9,0),(611,'提交总经理审批',25,271,315,'Y','','',31,NULL,'N',36,'',1,0),(612,'驳回申请',25,271,268,'Y','','',2,268,'N',NULL,'',9,0),(613,'驳回申请',25,272,268,'Y','','',2,268,'N',NULL,'',9,0),(614,'转用印管理员监印',25,272,275,'Y','','',31,NULL,'N',57,'',1,0),(615,'完成监印，结束流程',25,275,274,'N','','',1,NULL,'N',NULL,'',1,0),(616,'转分管财务副总审批',25,270,314,'Y','<CwzOnly>Y</CwzOnly>','仅申请财务章',31,NULL,'N',64,'',1,0),(617,'提交董事长审批',25,315,272,'Y','','',31,NULL,'N',37,'',1,0),(618,'驳回申请',25,315,268,'Y','','',2,268,'N',NULL,'',9,0),(619,'转用印管理员监印',25,314,275,'Y','','',31,NULL,'N',57,'',1,0),(620,'驳回申请',25,314,268,'Y','','',2,268,'N',NULL,'',9,0),(621,'自动发布',29,34,38,'Y','','',1,NULL,'N',NULL,'',1,0),(622,'提交立项审批',30,316,317,'N','','',38,NULL,'N',26,'',1,0),(623,'着承办人承办',30,316,318,'Y','','',108,NULL,'Y',NULL,'',3,0),(624,'确认批复',30,317,0,'Y','','',3,NULL,'N',NULL,'',1,0),(625,'完成督办事项，提交督办人审核',30,318,321,'Y','','',2,316,'N',NULL,'',1,0),(626,'申请延期',30,318,319,'Y','','',2,316,'N',NULL,'',3,0),(627,'着承办人继续执行',30,319,318,'Y','','',108,NULL,'Y',NULL,'',1,0),(628,'呈公司领导审批',30,319,320,'N','','',38,NULL,'N',26,'',3,0),(629,'确认批复',30,320,0,'Y','','',3,NULL,'N',NULL,'',1,0),(630,'确认督办事项办理完成，结束督办',30,321,322,'Y','','',1,NULL,'N',NULL,'',1,0),(631,'确认督办事项未完成，退回承办',30,321,318,'Y','','',108,NULL,'N',NULL,'',3,0),(632,'提交部门经理审批',31,224,225,'Y','<SqrGwJb1>6</SqrGwJb1>\r\n<SqrGwJb2>10</SqrGwJb2>','申请人岗级部门经理以下（6-10）',51,NULL,'N',NULL,'',1,0),(634,'转财务审核',31,224,229,'Y','<SqrGwJb1>2</SqrGwJb1>\r\n<SqrGwJb2>5</SqrGwJb2>','申请人岗级部门经理以上（2-5含部门经理）',31,NULL,'N',38,'',4,0),(637,'转财务审核',31,225,229,'Y','','',31,NULL,'N',38,'',1,0),(638,'退回申报',31,225,224,'Y','','',2,224,'N',NULL,'',9,0),(639,'提交财务复核',31,229,232,'Y','','',31,NULL,'N',64,'',1,0),(640,'退回申报',31,229,224,'Y','','',2,224,'N',NULL,'',9,0),(641,'呈总经理审批',31,232,231,'Y','','',31,NULL,'N',36,'',1,0),(642,'退回申报',31,232,224,'Y','','',2,224,'N',NULL,'',9,0),(643,'转经办人报销结清',31,231,227,'Y','','',2,224,'N',NULL,'',1,0),(644,'退回申报',31,231,224,'Y','','',2,224,'N',NULL,'',9,0),(645,'报销已结清并确认了签字，结束流程',31,227,228,'Y','','',1,NULL,'N',NULL,'',9,0),(646,'提交部门经理审批',32,224,225,'Y','<SqrGwJb1>6</SqrGwJb1>\r\n<SqrGwJb2>6</SqrGwJb2>','申请人岗级6（部门副理）',51,NULL,'N',NULL,'',2,0),(647,'转财务审核',32,224,229,'Y','<SqrGwJb1>2</SqrGwJb1>\r\n<SqrGwJb2>5</SqrGwJb2>','申请人岗级部门经理以上（2-5含部门经理）',31,NULL,'N',38,'',4,0),(648,'转财务审核',32,225,229,'Y','','',31,NULL,'N',38,'',1,0),(649,'退回申报',32,225,224,'Y','','',2,224,'N',NULL,'',9,0),(650,'提交财务复核',32,229,232,'Y','','',31,NULL,'N',64,'',1,0),(651,'退回申报',32,229,224,'Y','','',2,224,'N',NULL,'',9,0),(652,'呈总经理审批',32,232,231,'Y','','',31,NULL,'N',36,'',1,0),(653,'退回申报',32,232,224,'Y','','',2,224,'N',NULL,'',9,0),(654,'转经办人报销结清',32,231,227,'Y','','',2,224,'N',NULL,'',1,0),(655,'退回申报',32,231,224,'Y','','',2,224,'N',NULL,'',9,0),(656,'报销已结清并确认了签字，结束流程',32,227,228,'Y','','',1,NULL,'N',NULL,'',9,0),(657,'提交部门副理审批',32,224,323,'Y','<SqrGwJb1>7</SqrGwJb1>\r\n<SqrGwJb2>10</SqrGwJb2>','申请人岗级7以下（部门副理以下）',21,NULL,'N',NULL,'',1,0),(658,'提交部门经理审批',32,323,225,'Y','','',51,NULL,'N',NULL,'',1,0),(659,'退回申报',32,323,224,'Y','','',2,224,'N',NULL,'',9,0),(660,'提交部门负责人审批',33,324,325,'Y','','',51,NULL,'N',NULL,'',1,0),(661,'提交相关部门协办',33,325,326,'Y','','',57,NULL,'N',NULL,'',3,0),(662,'提交法律合规部审批',33,325,327,'Y','','',31,NULL,'N',58,'',1,0),(663,'退回起草',33,325,324,'Y','','',2,324,'N',NULL,'',9,0),(664,'转部门办理',33,326,326,'Y','','',20,NULL,'N',NULL,'',1,0),(665,'提交协办反馈',33,326,0,'Y','','',3,NULL,'N',NULL,'',2,0),(666,'审核通过、结束流程',33,327,328,'Y','','',1,NULL,'N',NULL,'',1,0),(667,'退回起草',33,327,324,'Y','','',2,324,'N',NULL,'',9,0),(668,'提交部门审批',34,34,35,'Y','','',51,NULL,'N',NULL,'',1,0),(671,'提交运营管理部分管副总审批',34,35,329,'Y','','',31,NULL,'N',67,'',1,0),(672,'驳回到起草',34,35,34,'Y','',NULL,2,34,'N',NULL,'',9,0),(674,'着起草人发布',34,330,37,'Y','','',2,34,'N',NULL,'',1,0),(675,'提交董事长审批',34,125,330,'Y','','',31,NULL,'N',37,'',1,0),(676,'确认发布',34,37,38,'Y','',NULL,1,NULL,'N',NULL,'',1,0),(677,'提交总经理审批',34,329,125,'Y','','',31,NULL,'N',36,'',1,0),(678,'驳回到起草',34,329,34,'Y','','',2,34,'N',NULL,'',9,0),(679,'驳回到起草',34,330,34,'Y','','',2,34,'N',NULL,'',9,0),(680,'驳回到起草',34,125,34,'Y','','',2,34,'N',NULL,'',9,0),(681,'提交部门审批',35,39,40,'Y','','',51,NULL,'N',NULL,'',1,0),(684,'提交运营管理部分管副总审批',35,40,331,'Y','','',31,NULL,'N',67,'',1,0),(685,'驳回到起草',35,40,39,'Y','',NULL,2,39,'N',NULL,'',9,0),(687,'着起草人编号套红',35,124,42,'Y','',NULL,2,39,'N',NULL,'',1,0),(689,'转用印管理员盖章分发',35,42,43,'Y','','',31,NULL,'N',57,'',1,0),(690,'确认分发/撤销，结束流程',35,43,44,'Y','',NULL,1,NULL,'N',NULL,'',1,0),(691,'呈总经理审批',35,331,124,'Y','','',31,NULL,'N',36,'',1,0),(692,'驳回到起草',35,331,39,'Y','','',2,39,'N',NULL,'',9,0),(693,'驳回到起草',35,124,39,'Y','','',2,39,'N',NULL,'',9,0),(694,'转会议记录员登记会议结论',11,57,61,'Y','','',102,NULL,'N',NULL,'',1,0),(695,'会议结论登记完毕提交会签',11,61,332,'Y','','',103,NULL,'N',NULL,'',1,0),(696,'驳回到记录员修正会议结论或纪要内容',11,332,0,'Y','','',3,NULL,'N',NULL,'R',2,0),(697,'同意会议结论和纪要内容',11,332,333,'Y','','',2,61,'N',NULL,'P',1,0),(698,'会议纪要整理完毕，结束流程',11,333,62,'Y','','',1,NULL,'N',NULL,'',1,0),(699,'提交档案接收',36,334,335,'Y','','',31,NULL,'N',68,'',1,0),(700,'提交监督交接',36,335,336,'Y','','',31,NULL,'N',57,'',1,0),(701,'退回发起',36,335,334,'Y','','',2,334,'N',NULL,'',9,0),(702,'提交确认',36,336,337,'Y','','',2,335,'Y',NULL,'',1,0),(703,'退回档案接收',36,336,335,'Y','','',2,335,'N',NULL,'',9,0),(704,'档案接收已完成结束流程',36,337,338,'Y','','',1,NULL,'N',NULL,'',1,0),(705,'退回发起',36,337,334,'Y','','',2,334,'N',NULL,'',9,0),(706,'提交部门领导审批',37,339,340,'Y','','',51,NULL,'N',NULL,'',1,0),(707,'提交档案管理主管领导审批',37,340,341,'Y','','',31,NULL,'N',67,'',1,0),(708,'退回申请',37,340,339,'Y','','',2,339,'N',NULL,'',9,0),(709,'同意借阅，着档案员准备',37,341,342,'Y','','',31,NULL,'N',68,'',1,0),(710,'退回申请部门领导',37,341,340,'Y','','',2,340,'N',NULL,'',9,0),(711,'发放申请档案',37,342,343,'Y','','',2,339,'N',NULL,'',1,0),(712,'退回领导审批',37,342,341,'Y','','',2,341,'N',NULL,'',9,0),(713,'申请档案使用完毕归还档案室',37,343,344,'Y','','',2,342,'N',NULL,'',1,0),(714,'确认档案已归还结束流程',37,344,345,'Y','','',1,NULL,'N',NULL,'',1,0),(715,'提交财务主管备案',25,275,346,'Y','','',31,NULL,'N',38,'',1,0),(716,'完成备案，结束流程',25,346,274,'Y','','',1,NULL,'N',NULL,'',1,0),(717,'提交法律合规负责人审批',27,307,311,'Y','','',31,NULL,'N',58,'',1,0),(718,'提交部门负责人审批',38,347,348,'Y','','',53,NULL,'N',NULL,'',1,0),(719,'提交部门分管副总审批',38,348,349,'Y','','',71,NULL,'N',NULL,'',1,0),(720,'退回起草',38,348,347,'Y','','',2,347,'N',NULL,'',9,0),(721,'提交法律合规负责人审批',38,349,350,'Y','','',31,NULL,'N',58,'',1,0),(722,'退回部门负责人',38,349,348,'Y','','',2,348,'N',NULL,'',9,0),(723,'转起草人审批单归档',38,350,351,'Y','','',2,347,'N',NULL,'',1,0),(724,'退回起草',38,350,347,'Y','','',2,347,'N',NULL,'',9,0),(725,'归档完毕结束流程',38,351,352,'Y','','',1,NULL,'N',NULL,'',9,0),(726,'发起议题讨论或投票',39,353,354,'Y','','',45,NULL,'N',1,'',1,0),(727,'关闭议题讨论或投票',39,354,355,'Y','','',1,NULL,'N',NULL,'',1,0),(728,'退回发起',39,354,353,'Y','','',2,353,'N',NULL,'',9,0),(729,'提交领导审核',40,356,357,'Y','','',31,NULL,'N',67,'',1,0),(730,'着出纳发放',40,357,358,'N','','',31,NULL,'N',22,'',2,0),(731,'退回做表',40,357,356,'Y','','',2,356,'N',NULL,'',9,0),(732,'完成发放，结束作业',40,358,359,'N','','',1,NULL,'N',NULL,'',1,0),(733,'提交部门领导审批',41,45,46,'Y','','',53,NULL,'N',NULL,'',1,0),(734,'提交部门分管领导审批',41,46,360,'Y','','',71,NULL,'N',NULL,'',1,0),(735,'退回起草',41,46,45,'Y','','',2,45,'N',NULL,'',9,0),(736,'提交财务领导审批',41,360,361,'Y','','',31,NULL,'N',38,'',1,0),(737,'退回起草',41,360,45,'Y','','',2,45,'N',NULL,'',9,0),(738,'审批通过转执行',41,361,48,'Y','','',2,45,'N',NULL,'',1,0),(739,'退回起草',41,361,45,'Y','','',2,45,'N',NULL,'',9,0),(740,'着签报事项执行人反馈办理情况',41,48,49,'Y','','',107,NULL,'N',NULL,'',1,1),(741,'提交执行情况反馈',41,49,50,'Y','','',2,48,'N',NULL,'P',1,0),(742,'归档完毕结束流程',41,50,51,'Y','','',1,NULL,'N',NULL,'',1,0),(743,'退回执行反馈',41,50,49,'Y','','',107,NULL,'N',NULL,'',9,1),(744,'审核通过',40,357,359,'Y','','',1,NULL,'N',NULL,'',1,0),(745,'提交部门领导审批',42,362,363,'Y','','',53,NULL,'N',NULL,'',1,0),(746,'提交运营管理部审批',42,363,364,'Y','','',31,NULL,'N',67,'',1,0),(747,'退回申请',42,363,362,'Y','','',2,362,'N',NULL,'',9,0),(748,'提交合规领导审批',42,364,365,'Y','','',31,NULL,'N',58,'',1,0),(749,'退回部门领导审批',42,364,363,'Y','','',2,363,'N',NULL,'',9,0),(750,'提交财务部审批',42,365,366,'Y','','',31,NULL,'N',64,'',1,0),(751,'退回运营管理部审批',42,365,364,'Y','','',2,364,'N',NULL,'',9,0),(752,'退回合规领导审批',42,366,365,'Y','','',2,365,'N',NULL,'',9,0),(753,'提交总经理审批',42,366,367,'Y','','',31,NULL,'N',36,'',1,0),(754,'转申请人归档',42,367,368,'Y','','',2,362,'N',NULL,'',1,0),(755,'退回财务负责人审批',42,367,366,'Y','','',2,366,'N',NULL,'',9,0),(756,'归档完毕结束流程',42,368,369,'Y','','',1,NULL,'N',NULL,'',1,0),(757,'提交部门领导审批',43,268,269,'Y','','',53,NULL,'N',NULL,'',1,0),(758,'提交部门分管领导审批',43,269,270,'Y','','',71,NULL,'N',NULL,'',1,0),(759,'驳回申请',43,269,268,'Y','','',2,268,'N',NULL,'',9,0),(761,'转分管合规副总审批',43,270,271,'Y','','',31,NULL,'N',62,'',1,0),(762,'退回部门领导审批',43,270,269,'Y','','',2,269,'N',NULL,'',9,0),(765,'提交总经理审批',43,271,315,'Y','','',31,NULL,'N',36,'',1,0),(766,'退回分管领导审批',43,271,270,'Y','','',2,270,'N',NULL,'',9,0),(767,'着用印管理员发放',43,315,370,'Y','','',31,NULL,'N',57,'',1,0),(768,'退回合规领导审批',43,315,271,'Y','','',2,271,'N',NULL,'',9,0),(772,'确认已归还并备案，结束流程',43,371,274,'Y','','',1,NULL,'N',NULL,'',1,0),(773,'已发放等待归还',43,370,371,'Y','','',2,370,'N',NULL,'',1,0),(774,'提交部门审批',44,39,40,'Y','','',51,NULL,'N',NULL,'',1,0),(775,'提交运营管理部分管副总审批',44,40,331,'Y','','',31,NULL,'N',67,'',1,0),(776,'驳回到起草',44,40,39,'Y','',NULL,2,39,'N',NULL,'',9,0),(777,'呈董事长审批',44,331,372,'Y','','',31,NULL,'N',37,'',1,0),(778,'驳回到起草',44,331,39,'Y','','',2,39,'N',NULL,'',9,0),(779,'着起草人编号套红',44,372,42,'Y','','',2,39,'N',NULL,'',1,0),(780,'驳回到起草',44,372,39,'Y','','',2,39,'N',NULL,'',9,0),(781,'转用印管理员盖章分发',44,42,43,'Y','','',31,NULL,'N',57,'',1,0),(782,'确认分发/撤销，结束流程',44,43,44,'Y','',NULL,1,NULL,'N',NULL,'',1,0),(783,'转盖章封印',38,351,373,'Y','','',31,NULL,'N',57,'',1,0),(784,'盖章封印完毕',38,373,351,'Y','','',2,351,'N',NULL,'',1,0),(785,'提交部门负责人审批',45,324,325,'Y','','',51,NULL,'N',NULL,'',1,0),(786,'提交法律合规部审批',45,325,327,'Y','','',31,NULL,'N',58,'',1,0),(787,'提交相关部门协办',45,325,326,'Y','','',57,NULL,'N',NULL,'',3,0),(788,'退回起草',45,325,324,'Y','','',2,324,'N',NULL,'',9,0),(789,'转部门办理',45,326,326,'Y','','',20,NULL,'N',NULL,'',1,0),(790,'提交协办反馈',45,326,0,'Y','','',3,NULL,'N',NULL,'',2,0),(791,'审核通过转起草人排版归档',45,327,374,'Y','','',2,324,'N',NULL,'',1,0),(792,'退回起草',45,327,324,'Y','','',2,324,'N',NULL,'',9,0),(793,'转盖章封印',45,374,375,'Y','','',31,NULL,'N',57,'',1,0),(794,'归档完毕、结束审批流程',45,374,328,'Y','','',1,NULL,'N',NULL,'',9,0),(795,'盖章封印完毕',45,375,374,'Y','','',2,374,'N',NULL,'',1,0),(796,'提交部门审查',46,237,238,'Y','','',53,NULL,'N',NULL,'',1,0),(797,'提交分管副总审查',46,238,239,'Y','','',71,NULL,'N',NULL,'',1,0),(798,'退回申请',46,238,237,'Y','','',2,237,'N',NULL,'',9,0),(799,'转运营管理部审核',46,239,376,'Y','','',31,NULL,'N',67,'',1,0),(800,'退回申请',46,239,237,'Y','','',2,237,'N',NULL,'',9,0),(807,'转立项归档',46,377,244,'Y','','',2,237,'N',NULL,'',1,0),(808,'退回申请',46,377,237,'Y','','',2,237,'N',NULL,'',9,0),(809,'完成立项结论标注，结束流程',46,244,246,'Y','','',1,NULL,'N',NULL,'',9,0),(810,'呈总裁审批',46,376,377,'Y','','',31,NULL,'N',36,'',1,0),(811,'退回申请',46,376,237,'Y','','',2,237,'N',NULL,'',9,0),(812,'提交运营管理部初审',47,251,258,'Y','','',31,NULL,'N',61,'',1,0),(813,'提交运营管理部分管副总审查',47,258,259,'Y','','',31,NULL,'N',67,'',6,0),(814,'呈请决策会主任委员批示',47,258,260,'Y','','',31,NULL,'N',36,'',7,0),(815,'退回发起',47,258,251,'Y','','',2,251,'N',NULL,'',9,0),(816,'确认审查结果，结束流程',47,258,261,'Y','','',1,NULL,'N',NULL,'',8,0),(817,'提交部门负责人审查',47,254,379,'Y','','',54,NULL,'N',NULL,'',1,0),(819,'退回运营管理部',47,254,258,'Y','','',2,258,'N',NULL,'',9,0),(822,'提交分管副总审查',47,379,380,'Y','','',72,NULL,'N',NULL,'',1,0),(823,'提交部门负责人审查',47,255,256,'Y','','',54,NULL,'N',NULL,'',1,0),(824,'退回运营管理部',47,255,258,'Y','','',2,258,'N',NULL,'',9,0),(825,'提交分管副总审查',47,256,257,'Y','','',72,NULL,'N',NULL,'',1,0),(826,'退回运营管理部',47,256,258,'Y','','',2,258,'N',NULL,'',9,0),(827,'批复运营管理部',47,257,258,'Y','','',2,258,'N',NULL,'',1,0),(829,'确认批复',47,259,258,'Y','','',4,NULL,'N',NULL,'',1,0),(830,'确认批复',47,260,258,'Y','','',4,NULL,'N',NULL,'',1,0),(831,'提交法律合规部审查',47,258,254,'Y','','',31,NULL,'N',63,'',1,8),(832,'提交风险管理部审查',47,258,381,'Y','','',31,NULL,'N',69,'',2,8),(833,'提交会计核算部审查',47,258,255,'Y','','',31,NULL,'N',38,'',3,8),(834,'退回运营管理部',47,379,258,'Y','','',2,258,'N',NULL,'',9,0),(835,'批复运营管理部',47,380,258,'Y','','',2,258,'N',NULL,'',1,0),(836,'提交部门负责人审查',47,381,382,'Y','','',31,NULL,'N',59,'',1,0),(837,'退回运营管理部',47,381,258,'Y','','',2,258,'N',NULL,'',9,0),(838,'提交分管副总审查',47,382,383,'Y','','',31,NULL,'N',70,'',1,0),(839,'退回运营管理部',47,382,258,'Y','','',2,258,'N',NULL,'',9,0),(840,'批复运营管理部',47,383,258,'Y','','',2,258,'N',NULL,'',1,0),(842,'发起项目审批',48,384,385,'Y','','',109,NULL,'N',NULL,'',1,0),(843,'确认表决意见',48,385,386,'Y','','',2,384,'N',NULL,'P',1,0),(844,'归档完毕，结束流程',48,386,267,'Y','','',1,NULL,'N',NULL,'',1,0),(845,'提交部门负责人审批',49,305,306,'Y','','',53,NULL,'N',NULL,'',1,0),(846,'提交部门分管副总审批',49,306,307,'Y','','',71,NULL,'N',NULL,'',1,0),(847,'退回起草',49,306,305,'Y','','',2,305,'N',NULL,'',9,0),(848,'提交法律合规负责人审批',49,307,311,'Y','','',31,NULL,'N',58,'',1,0),(849,'退回部门负责人',49,307,306,'Y','','',2,306,'N',NULL,'',9,0),(850,'转起草人审批单归档',49,311,313,'Y','','',2,305,'N',NULL,'',1,0),(851,'退回起草',49,311,305,'Y','','',2,305,'N',NULL,'',9,0),(852,'归档完毕结束流程',49,313,309,'Y','','',1,NULL,'N',NULL,'',9,0),(853,'转盖章封印',49,313,387,'Y','','',31,NULL,'N',57,'',1,0),(854,'盖章封印完毕',49,387,313,'Y','','',2,313,'N',NULL,'',1,0),(855,'提交部门负责人审核',50,276,277,'Y','','',53,NULL,'N',NULL,'',1,0),(856,'提交分管副总审批',50,277,278,'Y','','',71,NULL,'N',NULL,'',1,0),(857,'退回申请',50,277,276,'Y','','',2,276,'N',NULL,'',9,0),(858,'转会计审核',50,279,280,'Y','','',31,NULL,'N',38,'',1,0),(859,'退回申请',50,279,276,'Y','','',2,276,'N',NULL,'',9,0),(860,'提交财务部负责人审批',50,280,281,'Y','','',31,NULL,'N',21,'',1,0),(861,'退回申请',50,280,276,'Y','','',2,276,'N',NULL,'',9,0),(862,'提交分管副总审批',50,281,282,'Y','','',72,NULL,'N',NULL,'',1,0),(863,'退回申请',50,281,276,'Y','','',2,276,'N',NULL,'',9,0),(864,'着出纳放款',50,283,284,'Y','','',31,NULL,'N',22,'',1,0),(865,'退回申请',50,283,276,'Y','','',2,276,'N',NULL,'',9,0),(866,'审批签字已确认、完成付款并结束流程',50,284,286,'Y','','',1,NULL,'N',NULL,'',9,0),(867,'转法律合规部审核',50,278,279,'Y','','',31,NULL,'N',58,'',1,0),(868,'退回申请',50,278,276,'Y','','',2,276,'N',NULL,'',9,0),(869,'提交总经理审批',50,282,283,'Y','','',31,NULL,'N',36,'',1,0),(870,'退回申请',50,282,276,'Y','','',2,276,'N',NULL,'',9,0),(871,'提交部门负责人审批',51,324,325,'Y','','',51,NULL,'N',NULL,'',1,0),(872,'转法律合规部审核',51,325,388,'Y','','',31,NULL,'N',63,'',1,4),(873,'提交相关部门协办',51,325,326,'Y','','',57,NULL,'N',NULL,'',3,0),(874,'退回起草',51,325,324,'Y','','',2,324,'N',NULL,'',9,4),(875,'转部门办理',51,326,326,'Y','','',20,NULL,'N',NULL,'',1,0),(876,'提交协办反馈',51,326,0,'Y','','',3,NULL,'N',NULL,'',2,0),(877,'审核通过转起草人排版归档',51,327,374,'Y','','',2,324,'N',NULL,'',1,0),(878,'退回起草',51,327,324,'Y','','',2,324,'N',NULL,'',9,4),(879,'转盖章封印',51,374,375,'Y','','',31,NULL,'N',57,'',1,0),(880,'归档完毕、结束审批流程',51,374,328,'Y','','',1,NULL,'N',NULL,'',9,0),(881,'盖章封印完毕',51,375,374,'Y','','',2,374,'N',NULL,'',1,0),(882,'提交分管领导审批',51,388,327,'Y','','',72,NULL,'N',NULL,'',1,0),(883,'退回起草',51,388,324,'Y','','',2,324,'N',NULL,'',9,4),(884,'提交部门领导审批',52,45,46,'Y','','',53,NULL,'N',NULL,'',1,0),(885,'提交部门分管领导审批',52,46,360,'Y','','',71,NULL,'N',NULL,'',1,0),(886,'退回起草',52,46,45,'Y','','',2,45,'N',NULL,'',9,0),(887,'发起公司领导会签',52,360,47,'Y','','',38,NULL,'N',26,'',1,0),(888,'退回起草',52,360,45,'Y','','',2,45,'N',NULL,'',9,0),(889,'审批通过转执行',52,360,48,'Y','','',2,45,'N',NULL,'',3,0),(890,'着签报事项执行人反馈办理情况',52,48,49,'Y','','',107,NULL,'N',NULL,'',1,1),(891,'签报事项无需执行可直接归档',52,360,50,'Y','','',2,45,'N',NULL,'',5,0),(892,'确认批复意见',52,47,0,'Y','','',3,NULL,'N',NULL,'',1,0),(893,'提交执行情况反馈',52,49,50,'Y','','',2,45,'N',NULL,'P',1,0),(894,'归档完毕结束流程',52,50,51,'Y','','',1,NULL,'N',NULL,'',1,0),(895,'退回到来源环节',52,50,-1,'Y','','',4,NULL,'N',NULL,'',2,0),(896,'提交部门负责人审批',53,347,348,'Y','','',53,NULL,'N',NULL,'',1,0),(897,'提交部门分管副总审批',53,348,349,'Y','','',71,NULL,'N',NULL,'',1,0),(898,'退回起草',53,348,347,'Y','','',2,347,'N',NULL,'',9,4),(899,'转法律合规部审核',53,349,389,'Y','','',31,NULL,'N',63,'',1,4),(900,'退回部门负责人',53,349,348,'Y','','',2,348,'N',NULL,'',9,0),(901,'转起草人归档',53,350,351,'Y','','',2,347,'N',NULL,'',1,0),(902,'退回起草',53,350,347,'Y','','',2,347,'N',NULL,'',9,4),(903,'转盖章封印',53,351,373,'Y','','',31,NULL,'N',57,'',1,0),(904,'归档完毕结束流程',53,351,352,'Y','','',1,NULL,'N',NULL,'',9,0),(905,'盖章封印完毕',53,373,351,'Y','','',2,351,'N',NULL,'',1,0),(906,'提交法律合规负责人审批',53,389,350,'Y','','',31,NULL,'N',58,'',1,0),(907,'退回起草',53,389,347,'Y','','',2,347,'N',NULL,'',9,4),(908,'提交部门负责人审批',54,305,306,'Y','','',53,NULL,'N',NULL,'',1,0),(909,'提交部门分管副总审批',54,306,307,'Y','','',71,NULL,'N',NULL,'',1,0),(910,'退回起草',54,306,305,'Y','','',2,305,'N',NULL,'',9,4),(911,'转法律合规部审核',54,307,390,'Y','','',31,NULL,'N',63,'',1,4),(912,'退回部门负责人',54,307,306,'Y','','',2,306,'N',NULL,'',9,0),(913,'转起草人审批单归档',54,311,313,'Y','','',2,305,'N',NULL,'',1,0),(914,'退回起草',54,311,305,'Y','','',2,305,'N',NULL,'',9,4),(915,'转盖章封印',54,313,387,'Y','','',31,NULL,'N',57,'',1,0),(916,'归档完毕结束流程',54,313,309,'Y','','',1,NULL,'N',NULL,'',9,0),(917,'盖章封印完毕',54,387,313,'Y','','',2,313,'N',NULL,'',1,0),(918,'提交法律合规负责人审批',54,390,311,'Y','','',31,NULL,'N',58,'',1,0),(919,'退回起草',54,390,305,'Y','','',2,305,'N',NULL,'',9,4);
/*!40000 ALTER TABLE `Pf_M_BizFlowBranch` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_BizFlowBranch_11` BEFORE INSERT ON `Pf_M_BizFlowBranch` FOR EACH ROW
BEGIN
	Declare vNode1TzSys2 char(1);
    
    Select Pf_BizNodeSysBitByPt(new.BizNodeID1,2) Into vNode1TzSys2 From Dual;
    If vNode1TzSys2='T' Then
      	If new.PassReject='P' And new.BizNodeID2<=0 Then
        	call Pf_M_BizFlowBranch_11_err1(); 
      	End If;

      	If new.PassReject='R' And new.BizNodeID2!=0 Then
        	call Pf_M_BizFlowBranch_11_err2(); 
      	End If;
    End If;

    if new.BizNodeID1=new.BizNodeID2 and vNode1TzSys2 in ('S','C','T') then
        call Pf_M_BizFlowBranch_11_err3(); 
    end if;

    if vNode1TzSys2 in ('S','C') and new.BizNodeID2!=0 then
        call Pf_M_BizFlowBranch_11_err4(); 
    end if;

    if vNode1TzSys2 in ('A','Z','M') and new.BizNodeID2!=0 and new.BizNodeID1!=new.BizNodeID2 then
        call Pf_M_BizFlowBranch_11_err5(); 
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_BizFlowBranch_13` BEFORE UPDATE ON `Pf_M_BizFlowBranch` FOR EACH ROW
BEGIN
	Declare vNode1TzSys2 char(1);
    
    Select Pf_BizNodeSysBitByPt(new.BizNodeID1,2) Into vNode1TzSys2 From Dual;
    If vNode1TzSys2='T' Then
      	If new.PassReject='P' And new.BizNodeID2<=0 Then
        	call Pf_M_BizFlowBranch_11_err1(); 
     	 End If;

      	If new.PassReject='R' And new.BizNodeID2!=0 Then
        	call Pf_M_BizFlowBranch_11_err2(); 
      	End If;
    End If;

    if new.BizNodeID1=new.BizNodeID2 and vNode1TzSys2 in ('S','C','T') then
        call Pf_M_BizFlowBranch_11_err3(); 
    end if;

    if vNode1TzSys2 in ('S','C') and new.BizNodeID2!=0 then
        call Pf_M_BizFlowBranch_11_err4(); 
    end if;

    if vNode1TzSys2 in ('A','Z','M') and new.BizNodeID2!=0 and new.BizNodeID1!=new.BizNodeID2 then
        call Pf_M_BizFlowBranch_11_err5(); 
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Pf_M_BizNode`
--

DROP TABLE IF EXISTS `Pf_M_BizNode`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_M_BizNode` (
  `ID` smallint(4) NOT NULL AUTO_INCREMENT,
  `Name` varchar(20) NOT NULL DEFAULT '',
  `BizCode` tinyint(3) unsigned DEFAULT NULL,
  `TzSys` varchar(10) DEFAULT '',
  `TzApp` varchar(20) DEFAULT NULL,
  `ProcTimeLimit` tinyint(3) unsigned NOT NULL DEFAULT '0',
  `IfValid` char(1) NOT NULL DEFAULT 'Y',
  `PassRate` tinyint(3) unsigned DEFAULT NULL,
  `DisplayOrd` tinyint(3) unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `Pf_M_BizNode_UK1` (`Name`,`BizCode`)
) ENGINE=InnoDB AUTO_INCREMENT=391 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_M_BizNode`
--

LOCK TABLES `Pf_M_BizNode` WRITE;
/*!40000 ALTER TABLE `Pf_M_BizNode` DISABLE KEYS */;
INSERT INTO `Pf_M_BizNode` VALUES (-2,'终止',NULL,'',NULL,0,'Y',NULL,0),(-1,'上一环节',NULL,'',NULL,0,'Y',NULL,0),(0,'待计算',NULL,'',NULL,0,'Y',NULL,0),(34,'起草',11,'S--YNN','Y',0,'Y',NULL,0),(35,'部门主管审批',11,'---YNN','',1,'Y',NULL,2),(36,'公司会签',11,'-CNYNN','',0,'N',NULL,4),(37,'确认发布范围并发布',11,'---YNN','Y',0,'Y',NULL,12),(38,'结束',11,'E--NNN','',0,'Y',NULL,20),(39,'起草',12,'S--YNN','',0,'Y',NULL,1),(40,'部门主管审批',12,'---YNY','YNN',0,'Y',NULL,3),(41,'公司会签',12,'-C-YNY','YNN',0,'N',NULL,5),(42,'编号套红',12,'---NNN','NYN',0,'Y',NULL,7),(43,'盖章分发',12,'---YNN','NNY',0,'Y',NULL,9),(44,'结束',12,'E--NNY','',0,'Y',NULL,20),(45,'起草',13,'S--YNN','',0,'Y',NULL,1),(46,'部门审批',13,'---YNY','',0,'Y',NULL,3),(47,'公司会签',13,'-SNYNY','',0,'Y',NULL,5),(48,'执行指派',13,'---YNN','YN',0,'Y',NULL,7),(49,'执行反馈',13,'-TNYNY','',1,'Y',100,9),(50,'归档',13,'---YNN','NY',0,'Y',NULL,11),(51,'结束',13,'E--NNY','',0,'Y',NULL,19),(57,'发起',16,'S--YNN','',0,'Y',NULL,1),(61,'会议记录',16,'---YNY','YNN',0,'Y',NULL,3),(62,'结束',16,'E--NNY','',0,'Y',NULL,11),(63,'申请',17,'S--YNN','',0,'Y',NULL,1),(64,'部门审批',17,'---YNY','',0,'Y',NULL,3),(65,'总裁审批',17,'---YNY','',0,'Y',NULL,5),(66,'人资备案',17,'---YNY','',0,'Y',NULL,7),(67,'销假',17,'---YNY','Y',0,'Y',NULL,9),(68,'销假确认',17,'---YNY','',0,'Y',NULL,11),(69,'结束',17,'E--NNY','',0,'Y',NULL,19),(124,'总经理审批',12,'---YNY','YNN',0,'Y',NULL,6),(125,'总经理审批',11,'---YNN','',0,'Y',NULL,8),(187,'申请',14,'S--YNN','',0,'Y',NULL,1),(188,'分管副总审批',14,'---YNY','',0,'Y',NULL,5),(189,'财务审核',14,'---YNY','',0,'Y',NULL,11),(190,'出纳放款',14,'---YNN','YN',0,'Y',NULL,13),(191,'结束',14,'E--NNN','',0,'Y',NULL,99),(192,'总经理审批',14,'---YNY','',0,'Y',NULL,7),(194,'部门经理审批',14,'---YNY','',0,'Y',NULL,3),(224,'报销申报',18,'S--YNN','',0,'Y',NULL,0),(225,'部门经理审批',18,'---YNY','',0,'Y',NULL,2),(227,'报销结清',18,'---YNN','YNN',0,'Y',NULL,8),(228,'结束',18,'E--NNN','',0,'Y',NULL,99),(229,'财务审核',18,'---YNY','NNY',0,'Y',NULL,4),(230,'分管副总审批',18,'---YNY','',0,'N',NULL,3),(231,'总经理审批',18,'---YNY','',0,'Y',NULL,6),(232,'财务复核',18,'---YNY','',0,'Y',NULL,5),(233,'账务凭证签字',14,'-C-NNN','NY',1,'N',NULL,15),(235,'账务凭证签字',18,'-C-NNN','NYN',1,'N',NULL,9),(236,'分管副总审批',17,'---YNY','',0,'Y',NULL,4),(237,'申请',21,'S--YNN','',0,'Y',NULL,1),(238,'部门领导审查',21,'---YNY','',0,'Y',NULL,3),(239,'部门分管副总审查',21,'---YNY','',0,'Y',NULL,5),(240,'法律合规部审查',21,'---YNY','',0,'N',NULL,7),(241,'风险管理部审查',21,'---YNY','',0,'N',NULL,9),(242,'财务部审查',21,'---YNY','',0,'N',NULL,11),(243,'决策部主任批示',21,'---YNY','',0,'N',NULL,13),(244,'立项归档',21,'---NNN','Y',0,'Y',NULL,15),(245,'立项申请表线上签字',21,'-C-YYN','NY',0,'N',NULL,17),(246,'结束',21,'E--NNN','',0,'Y',NULL,99),(247,'起草',22,'S--YNN','',0,'Y',NULL,1),(248,'部门经理审批',22,'---YNY','',0,'Y',NULL,3),(249,'分管副总审批',22,'---YNY','',0,'Y',NULL,5),(250,'结束',22,'E--NNN','',0,'Y',NULL,9),(251,'发起',23,'S--YNN','',0,'Y',NULL,1),(252,'申请部室负责人审查',23,'---YNY','',0,'N',NULL,3),(253,'申请部室分管副总审查',23,'---YNY','',0,'N',NULL,5),(254,'法律合规部审查',23,'---YNY','',8,'Y',NULL,3),(255,'会计核算部审查',23,'---YNY','',8,'Y',NULL,9),(256,'财务部负责人审查',23,'---YNY','',0,'Y',NULL,11),(257,'分管财务副总审查',23,'---YNY','',0,'Y',NULL,13),(258,'运营管理部审查/归档',23,'---YNY','Y',0,'Y',NULL,2),(259,'运营管理部分管副总审查',23,'---YNY','',0,'Y',NULL,17),(260,'决策会主任委员审定',23,'---YNY','',0,'Y',NULL,19),(261,'结束',23,'E--NNN','',0,'Y',NULL,99),(262,'项目审查表线上签字',23,'-C-NNN','NY',0,'N',NULL,21),(263,'实施方案审批表填制',24,'S--YNN','YN',0,'N',NULL,1),(264,'主任委员意见',24,'---YNY','',0,'N',NULL,3),(265,'董事长意见',24,'---YNY','',0,'N',NULL,5),(266,'实施方案审批表线上签字',24,'-C-NNN','NY',0,'N',NULL,7),(267,'结束',24,'E--NNN','',0,'Y',NULL,19),(268,'申请',25,'S--YNN','',0,'Y',NULL,1),(269,'部门领导意见',25,'---YNY','',0,'Y',NULL,3),(270,'分管部门领导意见',25,'---YNY','',0,'Y',NULL,5),(271,'分管合规领导意见',25,'---YNY','',0,'Y',NULL,7),(272,'公司领导意见',25,'---YNY','',0,'N',NULL,9),(273,'印章、证照使用审批单线上签字',25,'-C-NNN','NY',0,'N',NULL,11),(274,'结束',25,'E--NNN','',0,'Y',NULL,19),(275,'用印审核与监印',25,'---NNN','YN',0,'N',NULL,10),(276,'申请',26,'S--YNN','',0,'Y',NULL,1),(277,'业务部门负责人审批',26,'---YNY','',0,'Y',NULL,3),(278,'业务部门分管副总审批',26,'---YNY','',0,'Y',NULL,5),(279,'法律合规部审批',26,'---YNY','',0,'Y',NULL,7),(280,'会计审核',26,'---YNY','',0,'Y',NULL,9),(281,'财务部负责人审批',26,'---YNY','',0,'Y',NULL,11),(282,'分管财务副总审批',26,'---YNY','',0,'Y',NULL,13),(283,'总经理审批',26,'---YNY','',0,'Y',NULL,15),(284,'出纳放款',26,'---YNN','Y',0,'Y',NULL,17),(285,'项目付款审批单线上签字',26,'-C-NNN','NY',0,'N',NULL,19),(286,'结束',26,'E--NNN','',0,'Y',NULL,29),(287,'付款前提落实审核',26,'---YNY','',0,'N',NULL,2),(288,'申请',19,'S--YNN','',0,'Y',NULL,1),(289,'部门负责人审批',19,'---YNY','',0,'Y',NULL,2),(290,'部门分管副总审批',19,'---YNY','',0,'Y',NULL,3),(291,'会计审核',19,'---YNY','',0,'Y',NULL,4),(292,'财务部负责人审批',19,'---YNY','',0,'Y',NULL,5),(293,'总经理审批',19,'---YNY','',0,'Y',NULL,8),(294,'付款凭证打印',19,'---YNN','YN',0,'Y',NULL,9),(295,'预付款审批单线上签字',19,'-C-NNN','NY',0,'N',NULL,10),(296,'结束',19,'E--NNN','',0,'Y',NULL,19),(297,'发起',15,'S--YNN','',0,'Y',NULL,1),(298,'财务办理',15,'---YNN','YN',0,'Y',NULL,3),(299,'双方线上签字',15,'-C-NNN','NY',0,'N',NULL,5),(300,'结束',15,'E--NNN','',0,'Y',NULL,9),(301,'登记',20,'S--YNN','',0,'Y',NULL,1),(302,'公司领导批办',20,'-S-YNY','',0,'Y',NULL,3),(303,'收文传阅/办理',20,'-Z-YNY','',0,'Y',NULL,5),(304,'结束',20,'E--NNN','',0,'Y',NULL,7),(305,'起草',27,'S--YNN','NNNY',4,'Y',NULL,1),(306,'部门负责人审批',27,'---YNY','NNNY',0,'Y',NULL,3),(307,'部门分管副总审批',27,'---YNY','NNNY',0,'Y',NULL,5),(309,'结束',27,'E--NNN','',0,'Y',NULL,19),(310,'法律合规专工审核',27,'---YNY','Y',0,'N',NULL,6),(311,'法律合规部门负责人审批',27,'---YNY','NNNY',0,'Y',NULL,7),(312,'法律合规部门分管副总审批',27,'---YNY','',0,'N',NULL,8),(313,'审批单归档',27,'---YNN','YNNN',0,'Y',NULL,9),(314,'分管财务领导意见',25,'---YNY','',0,'N',NULL,6),(315,'总经理意见',25,'---YNY','',0,'Y',NULL,8),(316,'立项',10,'S--YNN','',0,'Y',NULL,1),(317,'立项审批',10,'-CNYNY','',0,'Y',NULL,3),(318,'承办',10,'---YNN','YNN',0,'Y',NULL,5),(319,'延期审核',10,'---YNN','NYN',0,'Y',NULL,7),(320,'延期审批',10,'-CNYNY','',0,'Y',NULL,9),(321,'反馈报告审核与归档',10,'---YNN','NNY',0,'Y',NULL,11),(322,'结束',10,'E--NNN','',0,'Y',NULL,19),(323,'部门副理审批',18,'---YNY','',0,'Y',NULL,1),(324,'合同起草',9,'S--YNN','NNNY',4,'Y',NULL,1),(325,'部门负责人审阅',9,'---YNY','NNNY',0,'Y',NULL,3),(326,'相关部门协办',9,'-ANYNY','NNNY',0,'Y',NULL,5),(327,'法律合规部审批',9,'---YNN','NNNY',0,'Y',NULL,7),(328,'结束',9,'E--NNN','',0,'Y',NULL,19),(329,'运营管理部分管副总审批',11,'---YNN','',0,'Y',NULL,6),(330,'董事长审批',11,'---YNN','',0,'Y',NULL,10),(331,'运营管理部分管副总审批',12,'---YNY','YNN',0,'Y',NULL,4),(332,'经营决策委员会会签',16,'-TNYNN','NYN',0,'Y',100,5),(333,'会议纪要清样归档',16,'---NNN','NNY',0,'Y',NULL,7),(334,'发起',7,'S--YNN','',0,'Y',NULL,1),(335,'档案接收',7,'---YNY','Y',0,'Y',NULL,3),(336,'监督交接',7,'---YNY','',0,'Y',NULL,5),(337,'接收确认',7,'---YNY','',0,'Y',NULL,7),(338,'结束',7,'E--NNN','',0,'Y',NULL,9),(339,'申请',8,'S--YNN','',0,'Y',NULL,1),(340,'申请人主管领导审批',8,'---YNY','',0,'Y',NULL,3),(341,'档案管理主管领导审批',8,'---YNY','',0,'Y',NULL,5),(342,'档案准备',8,'---YNY','',0,'Y',NULL,7),(343,'档案利用',8,'---YNY','',0,'Y',NULL,9),(344,'档案归还确认',8,'---YNY','',0,'Y',NULL,11),(345,'结束',8,'E--NNN','',0,'Y',NULL,19),(346,'财务主管备案',25,'---YNY','',0,'N',NULL,12),(347,'起草',28,'S--YNN','NNNY',4,'Y',NULL,1),(348,'部门负责人审批',28,'---YNY','NNNY',0,'Y',NULL,3),(349,'部门分管副总审批',28,'---YNY','NNNY',0,'Y',NULL,5),(350,'法律合规部门负责人审批',28,'---YNY','NNNY',0,'Y',NULL,7),(351,'审批单归档',28,'---YNY','YNNN',0,'Y',NULL,9),(352,'结束',28,'E--NNN','',0,'Y',NULL,19),(353,'发起',6,'S--YNN','',0,'Y',NULL,1),(354,'评论/投票',6,'---YNN','',0,'Y',NULL,3),(355,'关闭',6,'E--NNN','',0,'Y',NULL,9),(356,'做表',5,'S--YNN','',0,'Y',NULL,1),(357,'审核',5,'---YNY','',0,'Y',NULL,3),(358,'发放',5,'---YNY','',0,'N',NULL,5),(359,'结束',5,'E--NNN','',0,'Y',NULL,9),(360,'分管领导审批',13,'---YNY','',0,'Y',NULL,4),(361,'财务领导审批',13,'---YNY','',0,'Y',NULL,6),(362,'申请',4,'S--YNN','',0,'Y',NULL,1),(363,'部门领导意见',4,'---YNY','',0,'Y',NULL,3),(364,'运营管理部意见',4,'---YNY','',0,'Y',NULL,5),(365,'法律合规部意见',4,'---YNY','',0,'Y',NULL,7),(366,'财务负责人意见',4,'---YNY','',0,'Y',NULL,9),(367,'总经理意见',4,'---YNY','',0,'Y',NULL,11),(368,'归档',4,'---NNN','Y',0,'Y',NULL,13),(369,'结束',4,'E--NNN','',0,'Y',NULL,19),(370,'公司用印管理员发放',25,'---YNY','',0,'Y',NULL,9),(371,'印章、证照归还',25,'---NNN','YN',0,'Y',NULL,10),(372,'董事长审批',12,'---YNY','YNN',0,'Y',NULL,6),(373,'盖章封印',28,'---YNN','NYNN',0,'Y',NULL,11),(374,'排版归档',9,'---YNN','NYNN',0,'Y',NULL,9),(375,'盖章封印',9,'---YNN','NNYN',0,'Y',NULL,11),(376,'运营管理部审核',21,'---YNY','',0,'Y',NULL,7),(377,'总裁审批',21,'---YNY','',0,'Y',NULL,9),(379,'法律合规部负责人意见',23,'---YNY','',0,'Y',NULL,4),(380,'法律合规部分管副总意见',23,'---YNY','',0,'Y',NULL,5),(381,'风险管理部审查',23,'---YNY','',8,'Y',NULL,6),(382,'风险管理部负责人意见',23,'---YNY','',0,'Y',NULL,7),(383,'风险管理部分管副总意见',23,'---YNY','',0,'Y',NULL,8),(384,'发起',24,'S--YNN','',0,'Y',NULL,1),(385,'委员表决',24,'-T-YNN','YN',0,'Y',100,3),(386,'审批结果归档',24,'---YNN','NY',0,'Y',NULL,5),(387,'盖章封印',27,'---YNN','NYNN',0,'Y',NULL,11),(388,'法律合规部审核',9,'---YNN','YNNY',4,'Y',NULL,6),(389,'法律合规部审核',28,'---YNY','NNYY',4,'Y',NULL,6),(390,'法律合规部审核',27,'---YNY','NNYY',4,'Y',NULL,6);
/*!40000 ALTER TABLE `Pf_M_BizNode` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `Pf_M_CharCode`
--

DROP TABLE IF EXISTS `Pf_M_CharCode`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_M_CharCode` (
  `CodeType` tinyint(3) unsigned NOT NULL,
  `Code` char(1) NOT NULL DEFAULT '',
  `Value` varchar(40) NOT NULL DEFAULT '',
  `OrdNum` tinyint(3) unsigned NOT NULL DEFAULT '1',
  PRIMARY KEY (`CodeType`,`Code`),
  UNIQUE KEY `Pf_M_CharCode_UK1` (`CodeType`,`Value`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_M_CharCode`
--

LOCK TABLES `Pf_M_CharCode` WRITE;
/*!40000 ALTER TABLE `Pf_M_CharCode` DISABLE KEYS */;
INSERT INTO `Pf_M_CharCode` VALUES (0,'A','应用计算',2),(0,'E','引擎计算',1),(0,'L','列表单人',5),(0,'M','列表多人',6),(0,'O','机构多人',4),(0,'S','机构单人',3),(1,'N','否/无',2),(1,'Y','是/有',1),(2,'F','女',2),(2,'M','男',1),(3,'C','一般',3),(3,'F','副职',2),(3,'Z','正职',1),(4,'P','弹出',2),(4,'R','右侧',1),(5,'-','中间环节',2),(5,'E','结束环节',3),(5,'S','起草环节',1),(6,'-','单人 / 无意义',1),(6,'A','多层并发全询问',4),(6,'C','单层并发',3),(6,'M','多层并发询问加转发',6),(6,'S','多人顺序',2),(6,'T','投票模式',7),(6,'Z','多层并发全转发',5),(7,'-','无意义',1),(7,'N','不抢占',2),(7,'Y','抢占',3),(8,'P','同意',1),(8,'R','反对',2),(9,'A','接受',2),(9,'C','收回',4),(9,'R','拒绝',3),(9,'W','待确认',1),(10,'B','两者',3),(10,'M','仅邮件',1),(10,'S','仅短信',2),(11,'A','暗送',3),(11,'C','抄送',2),(11,'Z','主送',1),(21,'C','终止',4),(21,'P','通过',2),(21,'R','拒绝',3),(21,'W','待定',1),(22,'A','企业公开',2),(22,'N','不公开',3),(22,'P','社会公开',1),(23,'O','部门',1),(23,'P','人员',2),(24,'B','公文编号',1),(24,'M','公文模板',2),(25,'A','暗送',3),(25,'C','抄送',2),(25,'Z','主送',1),(26,'a','项目立项阶段',1),(26,'b','项目尽职调查及实施方案设计阶段',2),(26,'c','项目审查审议阶段',3),(26,'d','决策会审批阶段',4),(26,'e','项目实施阶段',5),(26,'f','项目后续管理及处置阶段',6),(26,'g','项目完成结算、清算与退出阶段',7),(26,'x','中止',8),(27,'a','公章',1),(27,'b','法人章',2),(27,'c','财务章',3),(27,'d','手签章',4),(27,'e','其它',5),(28,'a','营业执照',1),(28,'b','开户许可证',2),(28,'c','法人身份证',3),(28,'d','其他',4),(29,'a','低值易耗品（￥伍仟以内、使用期3个月以上）',1),(29,'b','固定资产（￥伍仟以上、使用期一年以上）',2),(29,'c','大额购买（￥叁万以上）',3),(30,'1','现金',1),(30,'2','支票',2),(30,'3','转账（网银、电汇）汇票',3),(31,'C','差旅',2),(31,'F','日常',3),(32,'1','城际',1),(32,'2','本市',2),(32,'3','外阜',3),(33,'F','发文',1),(33,'S','收文',2),(34,'a','绝密',1),(34,'b','机密',2),(34,'c','普密',3),(35,'1','普通发票',1),(35,'2','增值税专用发票',2),(35,'3','增值税普通发票',3),(38,'Q','全天',1),(38,'S','上午',2),(38,'X','下午',3),(39,'r','每日',1),(39,'z','每周',2),(40,'D','弃权',3),(40,'P','赞成',1),(40,'R','反对',2),(41,'A','无系统来源',1),(41,'B','非业务合同',2),(41,'C','临时项目审查合同',3),(41,'D','正式立项项目',4),(55,'C','已确认',2),(55,'W','待确认',1);
/*!40000 ALTER TABLE `Pf_M_CharCode` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_CharCode_11` BEFORE INSERT ON `Pf_M_CharCode` FOR EACH ROW
BEGIN
	declare vNewOrdNum integer unsigned;
    
    select coalesce(MAX(OrdNum),0)+1 into vNewOrdNum from Pf_M_CharCode where CodeType=new.CodeType;
    set new.OrdNum=vNewOrdNum;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Pf_M_CodeType`
--

DROP TABLE IF EXISTS `Pf_M_CodeType`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_M_CodeType` (
  `Code` tinyint(3) unsigned NOT NULL,
  `IC` char(1) NOT NULL DEFAULT '',
  `Name` varchar(40) NOT NULL DEFAULT '',
  PRIMARY KEY (`Code`,`IC`),
  UNIQUE KEY `Pf_M_CodeType_UK1` (`IC`,`Name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_M_CodeType`
--

LOCK TABLES `Pf_M_CodeType` WRITE;
/*!40000 ALTER TABLE `Pf_M_CodeType` DISABLE KEYS */;
INSERT INTO `Pf_M_CodeType` VALUES (21,'C','业务状态'),(25,'C','主送/抄送/暗送'),(41,'C','交档来源'),(32,'C','交通费类别'),(30,'C','付款方式'),(38,'C','休假半天全天选择'),(22,'C','信息公开类别'),(23,'C','信息发布/公司文件分发范围类别'),(4,'C','功能展示方式'),(27,'C','印章种类'),(33,'C','发文/收文区分'),(35,'C','发票类型'),(9,'C','委托状态'),(31,'C','差旅/费用区分'),(10,'C','待办提醒方式'),(2,'C','性别'),(8,'C','投票选择'),(34,'C','收文密级'),(1,'C','是否'),(24,'C','模板编号区分'),(3,'C','正职/副职/一般'),(0,'C','流程分支选人界面形式'),(39,'C','督办反馈周期'),(5,'C','系统特征字[1]-节点位置'),(6,'C','系统特征字[2]-节点并发路径特征'),(7,'C','系统特征字[3]-节点并发抢占特征'),(40,'C','表决意见'),(55,'C','记录确认状态'),(28,'C','证照种类'),(11,'C','邮件主送/抄送'),(29,'C','采购类型'),(26,'C','项目阶段'),(14,'I','交通方式'),(11,'I','会议室设施种类'),(15,'I','住宿地级别'),(12,'I','假别条件'),(1,'I','应用种类'),(13,'I','报销预算科目'),(0,'I','流程分支选人方式码');
/*!40000 ALTER TABLE `Pf_M_CodeType` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `Pf_M_DeptDutyPsn`
--

DROP TABLE IF EXISTS `Pf_M_DeptDutyPsn`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_M_DeptDutyPsn` (
  `UsrID` smallint(5) unsigned NOT NULL,
  `OrgID` smallint(5) unsigned NOT NULL,
  PRIMARY KEY (`UsrID`,`OrgID`),
  KEY `Pf_M_DeptDutyPsn_FK2` (`OrgID`),
  CONSTRAINT `Pf_M_DeptDutyPsn_FK1` FOREIGN KEY (`UsrID`) REFERENCES `Pf_M_Usr` (`ID`) ON DELETE CASCADE,
  CONSTRAINT `Pf_M_DeptDutyPsn_FK2` FOREIGN KEY (`OrgID`) REFERENCES `Pf_M_Org` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_M_DeptDutyPsn`
--

LOCK TABLES `Pf_M_DeptDutyPsn` WRITE;
/*!40000 ALTER TABLE `Pf_M_DeptDutyPsn` DISABLE KEYS */;
INSERT INTO `Pf_M_DeptDutyPsn` VALUES (4,3),(3,4),(7,5),(4,6),(8,6),(5,7),(4,8),(8,8),(5,9),(5,10),(3,11),(6,12);
/*!40000 ALTER TABLE `Pf_M_DeptDutyPsn` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `Pf_M_Ent`
--

DROP TABLE IF EXISTS `Pf_M_Ent`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_M_Ent` (
  `ShortName` varchar(10) NOT NULL,
  `FullName` varchar(50) NOT NULL,
  `PostCode` char(6) DEFAULT NULL,
  `Addr` varchar(100) DEFAULT NULL,
  `HomePage` varchar(100) DEFAULT NULL,
  `Tel` varchar(40) DEFAULT NULL,
  `Fax` varchar(40) DEFAULT NULL,
  `LegalPsn` varchar(20) DEFAULT NULL,
  `WorkHourBegin1` char(5) NOT NULL,
  `WorkHourEnd1` char(5) NOT NULL,
  `WorkHourBegin2` char(5) NOT NULL,
  `WorkHourEnd2` char(5) NOT NULL,
  `AdminSmtpSvr` varchar(50) NOT NULL DEFAULT '',
  `EntPop3Svr` varchar(50) NOT NULL,
  `AdminMailAcct` varchar(50) NOT NULL DEFAULT '',
  `AdminMailPwd` varchar(20) NOT NULL DEFAULT '',
  `MailSvrCallAcct` varchar(50) NOT NULL,
  `MailSvrCallPwd` varchar(20) NOT NULL,
  `AppUrl` varchar(100) NOT NULL DEFAULT '',
  `MenuRegenTag` char(1) NOT NULL DEFAULT 'N',
  `NextAppAttachPathCode` tinyint(3) unsigned NOT NULL DEFAULT '1',
  `AttachUpLoadTmpPath` varchar(100) NOT NULL DEFAULT '',
  `MasterAttachPath` varchar(100) NOT NULL DEFAULT '',
  `DeployRootPath` varchar(200) NOT NULL,
  `EntAdminUsrID` smallint(5) unsigned DEFAULT NULL,
  `MailAddrSyncTag` char(1) NOT NULL DEFAULT 'N',
  `EntHomePage` varchar(100) DEFAULT NULL,
  `ZoomSealSvrURL` varchar(100) DEFAULT NULL COMMENT '电子印章服务网址',
  `WebCrawlerPath` varchar(100) DEFAULT NULL COMMENT '网爬服务器路径',
  PRIMARY KEY (`ShortName`),
  KEY `EntAdminUsrID` (`EntAdminUsrID`),
  KEY `NextAppAttachPathCode` (`NextAppAttachPathCode`),
  CONSTRAINT `Pf_M_Ent_fk1` FOREIGN KEY (`EntAdminUsrID`) REFERENCES `Pf_M_UsrPwd` (`UsrID`),
  CONSTRAINT `Pf_M_Ent_fk2` FOREIGN KEY (`NextAppAttachPathCode`) REFERENCES `Pf_M_AppAttachPath` (`Code`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_M_Ent`
--

LOCK TABLES `Pf_M_Ent` WRITE;
/*!40000 ALTER TABLE `Pf_M_Ent` DISABLE KEYS */;
INSERT INTO `Pf_M_Ent` VALUES ('庆源金融','内蒙古庆源绿色金融资产管理公司',NULL,NULL,NULL,NULL,NULL,NULL,'08:30','12:00','13:00','17:30','mail.greenamc.com','mail.greenamc.com','webmaster@greenamc.com','MTIzNDU2','SSODEV@greenamc.com','MTIzNDU2','http://localhost:8080/coaqy','N',2,'C://E_Data//coaqy//UploadTmp//','C://E_Data//coaqy//master//','C://A_Tools//apache-tomcat-7.0.85//webapps//coaqy//',14,'N','http://www.greenamc.com','http://192.168.38.10:8080/ZoomSeal/zmserver.zz','C://A_Tools//tomcat6//webapps');
/*!40000 ALTER TABLE `Pf_M_Ent` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_Ent_11` BEFORE INSERT ON `Pf_M_Ent` FOR EACH ROW
BEGIN
	if !(new.WorkHourBegin1<new.WorkHourEnd1 and new.WorkHourEnd1<new.WorkHourBegin2 and new.WorkHourBegin2<new.WorkHourEnd2) THEN
		call Pf_M_Ent_11_err1(); 
	end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_Ent_21` AFTER INSERT ON `Pf_M_Ent` FOR EACH ROW
BEGIN
	insert into Pf_M_Org(IsValid,ShortName,ParentID,SmallOrd,TreeLevel,BigOrdCode,FullName,ContactInfo) values 
	('Y',new.ShortName,0,0,0,'000',new.ShortName,'-');
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_Ent_13` BEFORE UPDATE ON `Pf_M_Ent` FOR EACH ROW
BEGIN
	if !(new.WorkHourBegin1<new.WorkHourEnd1 and new.WorkHourEnd1<new.WorkHourBegin2 and new.WorkHourBegin2<new.WorkHourEnd2) THEN
		call Pf_M_Ent_13_err1(); 
	end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_Ent_23` AFTER UPDATE ON `Pf_M_Ent` FOR EACH ROW
BEGIN
	declare vRoleID tinyint unsigned;
    
	if old.ShortName!=new.ShortName then
		select ID into @RootOrgID from Pf_M_Org where ShortName=old.ShortName and ParentID=0;
		call Pf_UpdOrgShortName(@RootOrgID,new.ShortName);
	end if;
    
    select ID into vRoleID from Pf_M_Role where Name='企业管理员'; 
    
    if old.EntAdminUsrID is null and new.EntAdminUsrID is not null then 
        insert into Pf_M_RoleUsr values (vRoleID, new.EntAdminUsrID); 
    end if;

    if old.EntAdminUsrID is not null and new.EntAdminUsrID is null then 
        delete from Pf_M_RoleUsr where RoleID=vRoleID and UsrID=old.EntAdminUsrID; 
    end if;

    if old.EntAdminUsrID is not null and new.EntAdminUsrID is not null and old.EntAdminUsrID!=new.EntAdminUsrID then 
        delete from Pf_M_RoleUsr where RoleID=vRoleID and UsrID=old.EntAdminUsrID;
        insert into Pf_M_RoleUsr values (vRoleID, new.EntAdminUsrID); 
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Pf_M_EntAppCode`
--

DROP TABLE IF EXISTS `Pf_M_EntAppCode`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_M_EntAppCode` (
  `ID` smallint(5) unsigned NOT NULL AUTO_INCREMENT,
  `Name` varchar(100) NOT NULL,
  `AppType` tinyint(3) unsigned NOT NULL,
  `OrdNum` smallint(5) unsigned NOT NULL,
  `IfUnUsed` char(1) NOT NULL DEFAULT 'N',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `Pf_M_EntAppCode_idx1` (`Name`,`AppType`)
) ENGINE=InnoDB AUTO_INCREMENT=76 DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_M_EntAppCode`
--

LOCK TABLES `Pf_M_EntAppCode` WRITE;
/*!40000 ALTER TABLE `Pf_M_EntAppCode` DISABLE KEYS */;
INSERT INTO `Pf_M_EntAppCode` VALUES (1,'董事长',3,1,'N'),(2,'董事长',4,1,'N'),(3,'副总经理',3,3,'N'),(4,'副总经理',4,2,'N'),(5,'部门经理',3,5,'N'),(6,'部门经理',4,3,'N'),(7,'部门主管',3,6,'N'),(8,'部门主管',4,4,'N'),(9,'呼市总部',1,1,'N'),(13,'干事',4,5,'N'),(14,'内蒙古发改委',13,1,'N'),(15,'行政事项',12,1,'N'),(16,'对外谈判事项',12,2,'N'),(17,'北京立思震科技公司',15,1,'N'),(18,'科电',15,2,'N'),(19,'内蒙古长生不老公司',15,3,'N'),(20,'北京雷特世纪科技有限公司',15,4,'N'),(21,'汇丰银行',15,5,'N'),(22,'贵州习酒股份有限公司',15,6,'N'),(23,'内蒙古金融监管局',16,1,'N'),(24,'-',4,6,'N'),(25,'助理',4,7,'N'),(26,'1',16,2,'N'),(27,'科电数据',15,7,'N'),(28,'职员',3,7,'N'),(29,'二楼大会议室',11,1,'N'),(30,'-',17,1,'N'),(31,'-',18,1,'N'),(32,'飞机票',17,2,'N'),(33,'代办费',18,2,'N'),(34,'酒店住宿',17,3,'N'),(35,'住宿',18,3,'N'),(36,'餐费',17,4,'N'),(37,'餐饮服务',18,4,'N'),(38,'电信话费流量费',17,5,'N'),(39,'通讯服务',18,5,'N'),(40,'汽油',17,6,'N'),(41,'车品服务',18,6,'N'),(42,'办公用品',17,7,'N'),(43,'办公用品服务',18,7,'N'),(44,'低值易耗品',17,8,'N'),(45,'礼品',17,9,'N'),(46,'礼品',18,8,'N'),(47,'餐饮服务',17,10,'N'),(48,'餐费',18,9,'N'),(49,'固定资产档案柜',17,11,'N'),(50,'燃油',17,12,'N'),(51,'汽车用品',18,10,'N'),(52,'司机',4,8,'N'),(53,'票务',18,11,'N'),(54,'机票',18,12,'N'),(55,'设备',17,13,'N'),(56,'设备及服务',18,13,'N'),(57,'电子产品',17,14,'N'),(58,'电子产品服务',18,14,'N'),(59,'烟酒',17,15,'N'),(60,'电器',17,16,'N'),(61,'电器销售',18,15,'N'),(62,'劳务',17,17,'N'),(63,'劳务',18,16,'N'),(64,'内蒙古科电数据服务公司',15,8,'N'),(65,'电信服务',18,17,'N'),(66,'呼市银监局',16,3,'N'),(67,'呼和浩特大会宾餐饮有限公司',15,9,'N'),(68,'景德镇桃溪川瓷业有限公司',15,10,'N'),(69,'中介费',17,18,'N'),(70,'中介',18,18,'N'),(71,'机票代理',18,19,'N'),(72,'北京雷特世纪网络科技有限公司',15,11,'N'),(73,'法务专员',4,9,'N'),(74,'风控专员',4,10,'N'),(75,'总经理',3,2,'N');
/*!40000 ALTER TABLE `Pf_M_EntAppCode` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `Pf_M_EntWorkHour`
--

DROP TABLE IF EXISTS `Pf_M_EntWorkHour`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_M_EntWorkHour` (
  `AreaID` smallint(5) unsigned NOT NULL,
  `WorkHourBegin1` char(5) NOT NULL,
  `WorkHourEnd1` char(5) NOT NULL,
  `WorkHourBegin2` char(5) NOT NULL,
  `WorkHourEnd2` char(5) NOT NULL,
  PRIMARY KEY (`AreaID`),
  CONSTRAINT `Pf_M_EntWorkHour_FK1` FOREIGN KEY (`AreaID`) REFERENCES `Pf_M_EntAppCode` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_M_EntWorkHour`
--

LOCK TABLES `Pf_M_EntWorkHour` WRITE;
/*!40000 ALTER TABLE `Pf_M_EntWorkHour` DISABLE KEYS */;
/*!40000 ALTER TABLE `Pf_M_EntWorkHour` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_EntWorkHour_11` BEFORE INSERT ON `Pf_M_EntWorkHour` FOR EACH ROW
BEGIN
	if !(new.WorkHourBegin1<new.WorkHourEnd1 and new.WorkHourEnd1<new.WorkHourBegin2 and new.WorkHourBegin2<new.WorkHourEnd2) THEN
		call Pf_M_EntWorkHour_11_err1(); 
	end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_EntWorkHour_13` BEFORE UPDATE ON `Pf_M_EntWorkHour` FOR EACH ROW
BEGIN
	if !(new.WorkHourBegin1<new.WorkHourEnd1 and new.WorkHourEnd1<new.WorkHourBegin2 and new.WorkHourBegin2<new.WorkHourEnd2) THEN
		call Pf_M_EntWorkHour_13_err1(); 
	end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Pf_M_ErrCase`
--

DROP TABLE IF EXISTS `Pf_M_ErrCase`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_M_ErrCase` (
  `Code` varchar(40) NOT NULL DEFAULT '',
  `ErrPrompt` varchar(200) NOT NULL DEFAULT '',
  PRIMARY KEY (`Code`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_M_ErrCase`
--

LOCK TABLES `Pf_M_ErrCase` WRITE;
/*!40000 ALTER TABLE `Pf_M_ErrCase` DISABLE KEYS */;
INSERT INTO `Pf_M_ErrCase` VALUES ('DcDb_A_Fk_11_err1','前条不确认不能增加新的反馈!'),('DcDb_A_Fk_13_err1','已存在后续反馈，当前反馈不能取消确认！'),('DcDb_A_Zt_13_err1','【开始时间】在【要求完成时间】之前！'),('Dsj_A_Xd_13_err1','已有人看了你的心得，取消发表无效！'),('Dsj_M_Book_13_err1','<限期阅读时间>是将来的时间！'),('Dsj_M_Book_13_err2','<限期阅读时间>是登记时间之后的时间！'),('Dsj_M_Book_13_err3','有人阅读取消无效！'),('Engine_SubmitBizFlowBranch_err1','提交的分支动作与流程不匹配，请先保存业务主体再选择分支动作提交！'),('Engine_SubmitBizFlowBranch_err2','流程配置错误：指定环节还没经过，请检查流程环节顺序！'),('Engine_SubmitBizFlowBranch_err3','流程配置错误：当前处理环节不存在办理来源，请检查流程环节顺序！'),('Engine_SubmitBizFlowBranch_err4','流程配置错误：注意分支动作提交后的节点是单人处理环节！'),('EngSub_RedrawBizFlowWI_err1','因参数工作项的提交生成的处理记录中，有已处理的，当下工作项已不能撤回！'),('EngSub_RedrawBizFlowWI_err2','有同仁在参数工作项提交之后也提交了他/她的处理。当下工作项已不能撤回！'),('GsWj_A_Zt_FK2','当前文件有废除的旧文没有删除，请先删除旧文！'),('GsWj_A_Zt_FK3','编号样式被引用，不能删除！'),('GsWj_A_Zt_UK','公司文件编号重复！'),('GsWj_ZtQy_err_1','流程结束前【审批状态】必须明确：拒绝/通过，不能是待定！'),('GsWj_ZtQy_err_2','公司文件不公开，而分发范围又没有定义！'),('GsWj_ZtQy_err_3','公司文件盖章分发前要编号！'),('GzHb_A_Zt_11_err1','工作汇报时段填报错：时段顺序填反 / 时段末是个将来的日期！'),('GzHb_A_Zt_11_err2','工作汇报时段填报错：与以往汇报时段重叠！'),('GzHb_A_Zt_13_err1','工作汇报时段填报错：时段顺序填反 / 时段末是个将来的日期！'),('GzHb_A_Zt_13_err2','工作汇报时段填报错：与以往汇报时段重叠！'),('GzHb_M_TcHbLd_11_err1','汇报领导不能是自己！'),('Gz_A_Zt_11_err1','发放年份不能大于当前年！'),('Gz_A_Zt_11_err2','发放月份不能在当前月之后！'),('HyGl_A_Zt_11_err1','召开时间不能大于闭幕时间！'),('HyGl_A_Zt_13_err1','召开时间不能大于闭幕时间！'),('HyGl_ZtQy_Err1','会议场地不能为空！'),('HyGl_ZtQy_Err2','使用情况反馈不能为空！'),('Hy_M_Cd_idx1','名称不能重叠！'),('Hy_M_Cd_idx2','地点不能重叠！'),('JkBx_A_BxBg_11_err1','发生时间不能大于当前时间！'),('JkBx_A_BxBg_11_err2','其他报销费必须大于0！'),('JkBx_A_BxBg_13_err1','发生时间不能大于当前时间！'),('JkBx_A_BxBg_13_err2','其他报销费必须大于0！'),('JkBx_A_BxBzCl_11_err1','出差时段填报错误！'),('JkBx_A_BxBzCl_11_err2','出差时段不能大于当前时间！'),('JkBx_A_BxBzCl_11_err3','同一申请人，出差时段与以往申请存在重叠！'),('JkBx_A_BxBzCl_11_err4','招待次数不能大于出差天数！'),('JkBx_A_BxBzCl_13_err1','出差时段填报错误！'),('JkBx_A_BxBzCl_13_err2','出差时段不能大于当前时间！'),('JkBx_A_BxBzCl_13_err3','同一申请人，出差时段与以往申请存在重叠！'),('JkBx_A_BxBzCl_13_err4','招待次数不能大于出差天数！'),('JkBx_A_BxCf_11_err1','发生时间不能大于当前时间！'),('JkBx_A_BxCf_11_err2','差旅餐费必须大于0！'),('JkBx_A_BxCf_13_err1','发生时间不能大于当前时间！'),('JkBx_A_BxCf_13_err2','差旅餐费必须大于0！'),('JkBx_A_BxJt_11_err1','出发时间不能大于到达时间！'),('JkBx_A_BxJt_11_err2','到达时间在当前时间之前！'),('JkBx_A_BxJt_11_err3','出发时间和到达时间差值不能超过24小时！'),('JkBx_A_BxJt_11_err4','同一报销人交通票发生时段不能重叠！'),('JkBx_A_BxJt_11_err5','交通报销费必须大于0！'),('JkBx_A_BxJt_11_err6','报销人当前交通票发生时段与历史机/车票行程单（费用）行程时段重叠！'),('JkBx_A_BxJt_13_err1','出发时间不能大于到达时间！'),('JkBx_A_BxJt_13_err2','到达时间不能大于当前时间！'),('JkBx_A_BxJt_13_err3','出发时间和到达时间差值不能超过24小时！'),('JkBx_A_BxJt_13_err4','交通报销费必须大于0！'),('JkBx_A_BxJt_13_err5','同一报销人交通票发生时段不能重叠！'),('JkBx_A_BxJt_13_err6','报销人当前交通票发生时段改得与历史机/车票行程单（费用）行程时段重叠！'),('JkBx_A_BxQtXcd_11_err0','<内部乘机/车人>、<外部乘机/车人>不能都不填！'),('JkBx_A_BxQtXcd_11_err1','出发时间不能大于到达时间！'),('JkBx_A_BxQtXcd_11_err2','到达时间在当前时间之前！'),('JkBx_A_BxQtXcd_11_err3','出发时间和到达时间差值不能超过24小时！'),('JkBx_A_BxQtXcd_11_err4','有同一行程人，当前机/车票行程单（费用）行程时段与历史差旅报销单交通票的重叠！'),('JkBx_A_BxQtXcd_11_err5','有行程人，当前机/车票行程单（费用）行程时段与历史的重叠！'),('JkBx_A_BxQtXcd_13_err0','<内部乘机/车人>、<外部乘机/车人>不能都不填！'),('JkBx_A_BxQtXcd_13_err1','出发时间不能大于到达时间！'),('JkBx_A_BxQtXcd_13_err2','到达时间在当前时间之前！'),('JkBx_A_BxQtXcd_13_err3','出发时间和到达时间差值不能超过24小时！'),('JkBx_A_BxQtXcd_13_err4','有同一行程人，当前机/车票行程单（费用）行程时段改得与历史差旅报销单交通票的重叠！'),('JkBx_A_BxQtXcd_13_err5','有行程人，当前机/车票行程单（费用）行程时段改得与历史的重叠！'),('JkBx_A_BxTx_11_err1','费用月段无效（顺序无效或末月不是当前月份之前的月）！'),('JkBx_A_BxTx_11_err2','同一报销人报销话费年月不能重叠！'),('JkBx_A_BxTx_11_err3','通讯报销费必须大于0！'),('JkBx_A_BxTx_11_err4','费用发生时间不能大于当前时间！'),('JkBx_A_BxTx_13_err1','费用月段无效（顺序无效或末月不是当前月份之前的月）！'),('JkBx_A_BxTx_13_err2','同一报销人报销话费年月不能重叠！'),('JkBx_A_BxTx_13_err3','通讯报销费必须大于0！'),('JkBx_A_BxTx_13_err4','费用发生时间不能大于当前时间！'),('JkBx_A_BxZd_11_err1','发生时间不能大于当前时间！'),('JkBx_A_BxZd_11_err2','招待报销项，参与同事不包括自己！'),('JkBx_A_BxZd_11_err3','招待报销费必须大于0！'),('JkBx_A_BxZd_11_err4','参与人数不能小于参与同事+1！'),('JkBx_A_BxZd_13_err1','发生时间不能大于当前时间！'),('JkBx_A_BxZd_13_err2','招待报销项，参与同事不包括自己！'),('JkBx_A_BxZd_13_err3','招待报销费必须大于0！'),('JkBx_A_BxZd_13_err4','参与人数不能小于参与同事+1！'),('JkBx_A_BxZsCy_11_err1','同住其他成员不能是报销人本人！'),('JkBx_A_BxZsCy_11_err2','同住其他成员自己申报的住宿时段与当前你把他/她作为同住人申报的住宿时段有重叠！'),('JkBx_A_BxZsCy_11_err3','同一同住人，他人与你申报的住宿时段有重叠！'),('JkBx_A_BxZs_11_err1','住宿时段填写无效！'),('JkBx_A_BxZs_11_err2','住宿时间不能大于当前时间！'),('JkBx_A_BxZs_11_err3','同一申请人，住宿时段与以往申请存在重叠！'),('JkBx_A_BxZs_11_err4','当前申报住宿时段与他人把你申报为同住人申报的住宿时段存在重叠！'),('JkBx_A_BxZs_11_err5','住宿报销费必须大于0！'),('JkBx_A_BxZs_13_err1','住宿时段填写无效！'),('JkBx_A_BxZs_13_err2','住宿时间不能大于当前时间！'),('JkBx_A_BxZs_13_err3','同一申请人，住宿时段与以往申请存在重叠！'),('JkBx_A_BxZs_13_err4','修改后申报住宿时段与他人把你作为同住人申报的住宿时段存在重叠！'),('JkBx_A_BxZs_13_err5','住宿报销费必须大于0！'),('JkBx_A_Hk_11_err1','还款额超过借款余额！'),('JkBx_A_Hk_13_err1','还款额超过借款余额！'),('JkBx_A_Jk_11_err1','借款周期必须大于0！'),('JkBx_A_Jk_11_err2','借款金额必须大于0！'),('JkBx_A_Jk_13_err1','借款周期必须大于0！'),('JkBx_A_Jk_13_err2','借款金额必须大于0！'),('JkBx_M_BxBzJt_11_err1','交通费报销标准不能重叠！'),('JkBx_M_BxBzTx_11_err1','通讯费报销标准不能重叠！'),('JkBx_M_BxBzZs_11_err1','住宿费报销标准不能重叠！'),('JkBx_M_BzBzZd_11_err1','招待费报销标准不能重叠！'),('JkBx_M_CcdBzBz_idx1','操作无效：您输入的[出差地]已经存在，请重新输入！'),('Pf_A_AttachInfo_11_err1','请不要同时上传相同的文件！'),('Pf_A_AttachInfo_11_err2','上传附件类别没有对应的应用主体！'),('Pf_A_AttachInfo_11_err3','公司文件的正文必须是微软Office Word格式文件！'),('Pf_A_AttachInfo_FK1','【应用文件附件信息】表还在引用的【创建人】不能删除！'),('Pf_A_AttachInfo_FK2','【应用文件附件信息】表还在引用的【最后更新人】不能删除！'),('Pf_A_AttachInfo_FK3','【应用文件附件信息】表还在引用的【目标存放路径】不能删除！'),('Pf_A_BizProcRcd_FK1','【业务处理记录】表还在引用的【处理人】不能删除！'),('Pf_A_BizProcRcd_FK2','【业务处理记录】表还在引用的【要求处理活动】不能删除！'),('Pf_A_BizProcRcd_FK3','【业务处理记录】表还在引用的【处理动作】不能删除！'),('Pf_A_BizProcRcd_UK1','【业务处理记录】表的【业务流水】【处理人】【处理人授权人】【待办到达时间】连起来不能重复！'),('Pf_C_GrantHis_FK1','【个人委托历史】表还在引用的【委托人】不能删除！'),('Pf_C_GrantHis_FK2','【个人委托历史】表还在引用的【委托处理业务】不能删除！'),('Pf_C_GrantHis_FK3','【个人委托历史】表还在引用的【代办人】不能删除！'),('Pf_D_ToDoLink_FK1','【待办链接】表还在引用的【处理人】不能删除！'),('Pf_D_ToDoLink_FK2','【待办链接】表还在引用的【要求处理活动】不能删除！'),('Pf_D_ToDoLink_UK1','【待办链接】表的【业务流水】【处理人】【处理人授权人】【待办到达时间】连起来不能重复！'),('Pf_M_AppAttachPath_12_err1','当前路径下有附件，不能删除！'),('Pf_M_AppAttachPath_UK1','【应用文件附件存放路径】表的【路径】不能重复！'),('Pf_M_AttachInfo_11_err1','请不要同时上传相同的文件！'),('Pf_M_AttachInfo_FK1','【主文件附件信息】表还在引用的【创建人】不能删除！'),('Pf_M_AttachInfo_FK2','【主文件附件信息】表还在引用的【最后更新人】不能删除！'),('Pf_M_BizFlow_FK1','【流程定义】表还在引用的【所属业务】不能删除！'),('Pf_M_BizFlow_UK1','【流程定义】表的【名称】不能重复！'),('Pf_M_BizNode_UK1','【业务节点编码】表的【名称】【所属业务】连起来不能重复！'),('Pf_M_Biz_FK1','【业务编码】表还在引用的【对应功能】不能删除！'),('Pf_M_Biz_UK1','【业务编码】表的【名称】不能重复！'),('Pf_M_Biz_UK2','【业务编码】表的【对应功能】不能重复！'),('Pf_M_CharCode_UK1','【字符编码】表的【编码类】【值】连起来不能重复！'),('Pf_M_CodeType_UK1','【编码类名】表的【整型/字符】【类名】连起来不能重复！'),('Pf_M_EntAppCode_idx1','应用种类与编码名称连起来不能重复！'),('Pf_M_EntWorkHour_11_err1','坐班时间设置不合法！'),('Pf_M_EntWorkHour_13_err1','坐班时间设置不合法！'),('Pf_M_Ent_11_err1','坐班时间设置不合法！'),('Pf_M_Ent_13_err1','坐班时间设置不合法！'),('Pf_M_Ent_fk1','先换企业管理员再删老的企业管理员！'),('Pf_M_ErrCase_11_Err1','新编码与已存在编码不能存在互相包含！'),('Pf_M_Func_FK1','【模块功能】定义表还在引用的【所属模块】不能删除！'),('Pf_M_Func_UK1','【模块功能】定义表的【名称】【所属模块】连起来不能重复！'),('Pf_M_Func_UK2','【模块功能】定义表的【访问路径】不能重复！'),('Pf_M_GrantSet_FK1','【个人委托设置】表还在引用的【委托人】不能删除！'),('Pf_M_GrantSet_FK2','【个人委托设置】表还在引用的【委托处理业务】不能删除！'),('Pf_M_GrantSet_FK3','【个人委托设置】表还在引用的【代办人】不能删除！'),('Pf_M_IntCode_UK1','【整型编码】表的【编码类】【值】连起来不能重复！'),('Pf_M_JobLevel_UK1','【岗位级别编码】表的【名称】不能重复！'),('Pf_M_JobTitle_UK1','【部门职务编码】表的【名称】不能重复！'),('Pf_M_Module_UK1','【模块】定义表的【名称】不能重复！'),('Pf_M_MyDirectLeader_11_err1','自己不能是自己的领导！'),('Pf_M_MyDirectLeader_11_err2','不能互为领导！'),('Pf_M_MyDirectLeader_11_err3','领导关系出现了循环的情况！'),('Pf_M_MyDirectLeader_13_err1','自己不能是自己的领导！'),('Pf_M_MyDirectLeader_13_err2','不能互为领导！'),('Pf_M_MyDirectLeader_13_err3','领导关系出现了循环的情况！'),('Pf_M_OrgUsr_11_err1','一个人不能有两个主职部门！'),('Pf_M_OrgUsr_11_err2','一个部门不能有两个正职！'),('Pf_M_OrgUsr_13_err1','一个人不能有两个主职部门！'),('Pf_M_OrgUsr_13_err2','一个部门不能有两个正职！'),('Pf_M_OrgUsr_FK2','【人员所属部门】表还在引用的【机构】不能删除！'),('Pf_M_OrgUsr_FK3','部门职务编码在部门用户信息表中存在引用，不能删除！'),('Pf_M_Org_11_err1','无效父机构下不能新增子机构！'),('Pf_M_Org_13_err1','父机构无效时子机构不能置有效！'),('Pf_M_Org_UK1','【机构】表的【简称】【父标识】连起来不能重复！'),('Pf_M_PubHoliday_11_err1','新增公假时段与增前公假时段存在重叠/接续！'),('Pf_M_PubHoliday_11_err2','时段始不能大于时段末！'),('Pf_M_PubHoliday_13_err1','修改当前公假时段引发公假时段重叠/接续！'),('Pf_M_PubHoliday_13_err2','时段始不能大于时段末！'),('Pf_M_PubHoliday_UK1','【公假时段设置】表的【时段始】不能重复！'),('Pf_M_PubHoliday_UK2','【公假时段设置】表的【时段末】不能重复！'),('Pf_M_RoleUsr_FK2','角色成员必须首先是系统用户！'),('Pf_M_Role_UK1','【角色】定义表的【名称】【父角色】连起来不能重复！'),('Pf_M_SubAdmin_11_err1','已经是企业管理员！'),('Pf_M_SubAdmin_FK1','二级管理员必须首先是系统用户！'),('Pf_M_UsrPwd_11_err1','登录密码不能与工资条查询密码一样！'),('Pf_M_UsrPwd_13_err1','登录密码不能与工资条查询密码一样！'),('Pf_M_UsrPwd_UK1','【系统用户】表的【登录名】不能重复！'),('Pf_M_Usr_FK1','岗位级别在用户信息表中存在引用，不能删除！'),('Pf_M_Usr_FK2','地域编码在用户信息表中存在引用，不能删除！'),('Pf_M_VerticalOrgLeader_UK','组织机构条线分管领导须唯一！'),('Pf_RcdPwd2UsedTs_err1','查询密码对不上！'),('Pf_UpdOrgParent_err1','目标父机构不能是修改机构本身或其下级机构！'),('Pf_UpdOrgParent_err2','移动机构引发最大机构层级超过10层限制！'),('Pf_UpdRoleParent_err1','目标父角色不能是修改角色本身或其子角色！'),('Pf_UpdRoleParent_err2','移动角色引发最大角色层级超过4层限制！'),('PRIMARY','当前维护表的主键不能重复！'),('QsQb_A_Zt_13_err1','落实程度不能小于0！'),('QsQb_ZtQy_err_1','提交到下一环节前，【落实责任人员】【落实要求】【落实期限】必填！'),('QsQb_ZtQy_err_2','请示签报的【落实期限】不应小于当前时间！'),('QsQb_ZtQy_err_3','流程结束前，【落实程度】【落实情况总结】必填！'),('QsQb_ZtQy_err_4','请示签报的【落实程度】不应大于100！'),('UpdNodeOfBiz04_err1','流程结束前，须生成归档签字文件！'),('UpdNodeOfBiz05_err1','工资发放审核流程结束不能撤回！'),('UpdNodeOfBiz06_err01','参与范围类别不是公司全员，而参与范围又没有定义！'),('UpdNodeOfBiz06_err02','已发生评论或投票，“发起议题讨论或投票”动作不能撤回！'),('UpdNodeOfBiz09_err1','提交法律合规部审批前应先对合同编号！'),('UpdNodeOfBiz10_err1','申请延期，【申请延期的原因】【申请延期完成时间】必填！'),('UpdNodeOfBiz10_err2','批复延期申请，须明确【是否同意延期】！'),('UpdNodeOfBiz10_err3','【督查督办】流程结束前，须生成【督办单】归档文件！'),('UpdNodeOfBiz10_err4','反馈内容提交督办人审核前须确认！'),('UpdNodeOfBiz14_err1','从【出纳放款】向下流转前，须生成借款申请表线上签字文件！'),('UpdNodeOfBiz14_Err2','流程结束后不能撤回！'),('UpdNodeOfBiz15_Err1','实付金额不能为空，且应小于借款金额！'),('UpdNodeOfBiz15_Err2','实付时间不能为空、不能在提交时间之前！'),('UpdNodeOfBiz15_Err3','实际付款方式不能为空！'),('UpdNodeOfBiz15_Err4','实付金额必须大于0！'),('UpdNodeOfBiz15_Err5','流程结束后不能撤回！'),('UpdNodeOfBiz18_Err1','流程结束后不能撤回！'),('UpdNodeOfBiz18_err2','从【报销结清】向下流转前，须生成报销申请表线上签字文件！'),('UpdNodeOfBiz18_err3','发起报销申请向下流转前，费用报销项的预算科目必须标注！'),('UpdNodeOfBiz18_err4','<是否对外付款><是否核销备用金>互斥！'),('UpdNodeOfBiz18_err5','机/车票费科目的费用报销项的行程单必须录入！'),('UpdNodeOfBiz20_err1','公司收文不公开，而分发范围又没有定义！'),('UpdNodeOfBiz20_err2','在收文【登记】环节，须上传收文正文文件！'),('UpdNodeOfBiz20_err3','公司收文传阅/办理前要编号！'),('UpdNodeOfBiz21_err1','从【立项归档】向下流转前，<签约公司>必选！'),('UpdNodeOfBiz21_err2','从【立项归档】向下流转前，须生成立项申请表线上签字文件！'),('UpdNodeOfBiz21_err3','结束流程前，须标明业务状态，不能是“待定”！'),('UpdNodeOfBiz23_err1','结束流程前，须标明业务状态，不能是“待定”！'),('UpdNodeOfBiz23_err2','结束流程前，须标明审查结果！'),('UpdNodeOfBiz23_err3','结束流程前，须生成《项目法律合规审查意见表》线上签字文件！'),('UpdNodeOfBiz23_err4','结束流程前，须生成《项目风险审查意见表》线上签字文件！'),('UpdNodeOfBiz23_err5','结束流程前，须生成《项目财务审查意见表》线上签字文件！'),('UpdNodeOfBiz24_err1','结束流程前，须标明业务状态，不能是“待定”！'),('UpdNodeOfBiz24_err2','结束流程前，须生成《项目表决结果》线上签字文件和《决策会会议纪要》！'),('UpdNodeOfBiz24_err3','发起项目审批决策会前，请先生成《决策会会议通知》！'),('UpdNodeOfBiz25_err2','提交印章、证照使用审批前，须上传用印文本/法律合规附件！'),('UpdNodeOfBiz25_err3','流程结束前，须生成印章、证照使用审批单归档签字文件！'),('UpdNodeOfBiz25_err4','申请的印章或证照他人在用！'),('UpdNodeOfBiz26_err1','付款流程结束前，须标明资金到位时间！'),('UpdNodeOfBiz26_err2','付款流程结束前，须生成项目付款审批单线上签字文件！'),('UpdNodeOfBiz26_err3','项目付款审批结束的流程不能撤回！'),('UpdNodeOfBiz27_err1','发起合同审批前须上传未盖章合同原版文件！'),('UpdNodeOfBiz27_err2','提交法律合规部门负责人审批前应先对合同编号！'),('UpdNodeOfBiz27_err3','合同获批，结束流程前须生成合同审批单归档文件！'),('UpdNodeOfBiz28_err1','发起合同审查前须上传未盖章合同原版文件！'),('UpdNodeOfBiz28_err2','提交法律合规部门负责人审批前应先对合同编号！'),('UpdNodeOfBiz28_err3','合同获批，结束流程前须生成合同审查单归档文件！'),('Xj_A_Mx_11_err1','申请时段填报错误，开始日期在结束日期之后！'),('Xj_A_Mx_11_err2','申请哺乳假要求填报孩子出生日期！'),('Xj_A_Mx_11_err3','申请时段填报错误，哺乳假结束时间不能超过孩子出生日期一年以后！'),('Xj_A_Mx_11_err4','正常休假应提前申请！'),('Xj_A_Mx_11_err5','补假休的应该是过去的时段！'),('Xj_A_Mx_11_err6','同一申请人，申请/实际休假时段与以往申请存在重叠！'),('Xj_A_Mx_11_err7','各明细申请休假时段日期必须接续！'),('Xj_A_Mx_11_err8','若[申请开始日期]=[申请结束日期]，则[申请开始半天全天选择][申请结束半天全天选择]必须相等！'),('Xj_A_Mx_11_err9','若[申请开始日期]!=[申请结束日期]，则[申请开始半天全天选择]不能是“上午”、[申请结束半天全天选择]不能是“下午”！'),('Xj_A_Mx_11_errA','申请休假天数为零无意义！'),('Xj_A_Mx_11_errB','申请休假天数超过假别条件可休天数！'),('Xj_A_Mx_11_errC','同一申请假别重复！'),('Xj_A_Mx_12_err1','删除明细造成申请休假时段不接续！'),('Xj_A_Mx_13_err1','申请时段填报错误，开始日期在结束日期之后！'),('Xj_A_Mx_13_err2','申请哺乳假要求填报孩子出生日期！'),('Xj_A_Mx_13_err3','申请时段填报错误，哺乳假结束时间不能超过孩子出生日期一年以后！'),('Xj_A_Mx_13_err4','正常休假应提前申请！'),('Xj_A_Mx_13_err5','补假休的应该是过去的时段！'),('Xj_A_Mx_13_err6','同一申请人，申请/实际休假时段与以往申请存在重叠！'),('Xj_A_Mx_13_err7','各明细申请休假时段日期必须接续！'),('Xj_A_Mx_13_err8','若[申请开始日期]=[申请结束日期]，则[申请开始半天全天选择][申请结束半天全天选择]必须相等！'),('Xj_A_Mx_13_err9','若[申请开始日期]!=[申请结束日期]，则[申请开始半天全天选择]不能是“上午”、[申请结束半天全天选择]不能是“下午”！'),('Xj_A_Mx_13_errA','若[实际开始日期]=[实际结束日期]，则[实际开始半天全天选择][实际结束半天全天选择]必须相等！'),('Xj_A_Mx_13_errB','若[实际开始日期]!=[实际结束日期]，则[实际开始半天全天选择]不能是“上午”、[实际结束半天全天选择]不能是“下午”！'),('Xj_A_Mx_13_errC','申请休假天数为零无意义！'),('Xj_A_Mx_13_errD','申请休假天数超过假别条件可休天数！'),('Xj_A_Mx_13_errE','实际休假时段填报错误，开始日期在结束日期之后！'),('Xj_A_Zt_11_err1','上次请假流程未结束，不能申请新的休假！'),('Xj_M_NjTs_13_err1','[上年已休年假天数]不能超过[上年可休年假天数]！'),('Xj_M_NjTs_13_err2','[本年已休年假天数]不能超过[本年可休年假天数]！'),('Xj_ZtQy_err1','请休假明细存在需提供电子证明的假别条件！'),('Xj_ZtQy_err2','销假时间应晚于实际休假时段结束时间！'),('Xj_ZtQy_err3','如果明细中有年假申请，流程结束不能撤回！'),('XmDir_Del_err1','项目目录下有文件！'),('XmDir_Del_err2','保留目录禁止删除！'),('XmDir_UpdMc_err1','保留目录禁止改名！'),('XmDir_UpdParent_err1','保留目录禁止改变从属！'),('XmDir_UpdParent_err2','目标父目录不能是修改目录本身或其下级目录！'),('XmDir_UpdParent_err3','移动目录引发最大目录层级超过10层限制！'),('XmDir_Up_err1','保留目录禁止调序！'),('XxFb_A_Pl_idx1','回复信息评论只能1次！'),('XxFb_M_Lm_11_err1','无效栏目下不能增加子栏目！'),('XxFb_M_Lm_13_err1','无效状态的栏目恢复为有效的前提是其父栏目必须有效！'),('XxFb_UpdLmCs_err1','目标父栏目不能是修改栏目本身或其子栏目！'),('XxFb_UpdLmCs_err2','移动栏目引发最大栏目层级超过10层限制！'),('XxFb_ZtQy_err_1','流程结束前【审批状态】必须明确：拒绝/通过，不能是待定！'),('XxFb_ZtQy_err_2','信息不公开，而发布范围又没有定义！'),('ZxBg_A_YzZzSqMx_11_err1','具体申请印章/证照与申请种类不符！'),('ZxBg_A_YzZzSq_13_err1','具体申请印章与申请种类不符！'),('ZxBg_A_YzZzSq_13_err2','具体申请证照与申请种类不符！'),('ZxBg_M_YzZz_11_err1','<印章种类><证照种类>不能同时为空！'),('ZxBg_M_YzZz_11_err2','<印章种类><证照种类>不能同时不空！'),('ZxBg_M_YzZz_13_err1','<印章种类><证照种类>不能同时为空！'),('ZxBg_M_YzZz_13_err2','<印章种类><证照种类>不能同时不空！');
/*!40000 ALTER TABLE `Pf_M_ErrCase` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_ErrCase_11` BEFORE INSERT ON `Pf_M_ErrCase`
  FOR EACH ROW
label1:
BEGIN
	declare vCnt tinyint unsigned;
    
    select count(*) into vCnt from Pf_M_ErrCase where INSTR(Code,new.Code)>0 or INSTR(new.Code,Code)>0;
    if vCnt>0 then
    	call Pf_M_ErrCase_11_Err1(); # 新编码与已存在编码不能存在互相包含！
        LEAVE label1;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Pf_M_Func`
--

DROP TABLE IF EXISTS `Pf_M_Func`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_M_Func` (
  `ID` smallint(4) unsigned NOT NULL AUTO_INCREMENT,
  `Name` varchar(20) NOT NULL DEFAULT '',
  `RightPopup` char(1) NOT NULL DEFAULT 'R',
  `Url` varchar(100) NOT NULL DEFAULT '',
  `fDesc` varchar(100) NOT NULL DEFAULT '',
  `IsPublic` char(1) NOT NULL DEFAULT 'Y',
  `IsVisible` char(1) NOT NULL DEFAULT 'Y',
  `ModuleID` tinyint(3) unsigned NOT NULL,
  `DisplayOrd` tinyint(3) unsigned NOT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE KEY `Pf_M_Func_UK2` (`Url`) USING BTREE,
  UNIQUE KEY `Pf_M_Func_UK1` (`Name`) USING BTREE,
  KEY `Pf_M_Func_FK1` (`ModuleID`),
  CONSTRAINT `Pf_M_Func_FK1` FOREIGN KEY (`ModuleID`) REFERENCES `Pf_M_Module` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=73 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_M_Func`
--

LOCK TABLES `Pf_M_Func` WRITE;
/*!40000 ALTER TABLE `Pf_M_Func` DISABLE KEYS */;
INSERT INTO `Pf_M_Func` VALUES (1,'待办已办','R','./ToDoSettledPush/MainToDo.jsp','待办已办列表，管理员多个催办','Y','Y',1,1),(2,'个人设置','R','./PrivateSetting/DirectLeader/main.jsp','上司设置、首页信息块定制、业务处理常用语、待办提醒定制','Y','Y',1,3),(6,'代办委托','R','./ToDoDelegate/ToAuthorize/main.jsp','分业务委托自己的待办事项','Y','Y',1,5),(7,'修改口令','P','./PwdModify/PasswordModifyEntry.jsp?type=u','修改口令','Y','Y',1,99),(8,'通讯录','R','./AddrList/main.jsp','企业公共通讯录','Y','Y',9,0),(9,'常用信息','R','./CommonInfo/index.htm','常用信息：日历、天气、...、网站导航','Y','Y',9,1),(10,'全文检索','R','../oa/qwjs_qrylist.action','全城大搜查一定要把李向阳搜出来！','Y','Y',3,1),(13,'组织机构','R','./Admin12Maintain/org/main.jsp','部门维护、部门分管领导设置；用户维护、用户地域/条线分管设置；角色成员维护','N','Y',5,1),(17,'基础办公设置','R','./Admin1Setting/EntAppCode/main.jsp','企业管理员维护，一般人只读：企业级应用编码维护（地域、条线、岗位级别、部门职务...），企业各地域坐班时间，二级管理员设置，公假时段维护','Y','Y',7,1),(22,'信息发布','R','../FileApp/XxFb/ListA/main.jsp','信息发布','Y','Y',9,4),(23,'公司文件','R','../FileApp/GsWj/ListA/main.jsp','公司文件','Y','Y',9,5),(24,'工作周报','R','../FileApp/GzHb/ListA/main.jsp','工作周报','Y','N',9,3),(25,'请示签报','R','../FileApp/QsQb/ListA/main.jsp','请示签报','Y','Y',9,10),(28,'会议管理','R','../FileApp/HyGl/ListA/main.jsp','会议管理','Y','N',9,11),(29,'请休假','R','../FileApp/Qxj/ListA/main.jsp','请休假','Y','Y',9,12),(40,'公文编号与模板设置','R','../FileMaster/GsWj/BhYs/main.jsp','公司文件编号样式、模板设置、编号与模板使用部门设置','N','Y',7,9),(42,'企业应用设置','R','../FileMaster/ZxSz/XxLm/main.jsp','报销标准（财务维护）、会议场地管理、应用模板设置','Y','Y',7,8),(43,'印章管理','P','./OutLink/SealAdmin.jsp','电子印章管理','N','Y',7,11),(46,'业务删除备忘','R','../FileApp/DelBizLog/main.jsp','业务删除备忘列表、备忘修正','N','Y',13,1),(47,'借款申请','R','../FileApp/Jk/entry0.jsp','借款申请','Y','Y',9,16),(48,'还款记录','R','../FileApp/Hk/entry0.jsp','借款还款记录','Y','Y',9,17),(49,'报销申请','R','../FileApp/BxSq/ListA/main.jsp','报销申请','Y','Y',9,18),(50,'立项申请','R','../EntApps/LxSq/entry0.jsp','立项申请','Y','Y',14,1),(51,'尽职调查材料审批','R','../EntApps/JzDc/entry0.jsp','尽职调查材料审批','Y','Y',14,2),(52,'项目审查','R','../EntApps/XmSc/entry0.jsp','项目审查','Y','Y',14,3),(53,'项目审批','R','../EntApps/FaSp/entry0.jsp','项目上会审批','Y','Y',14,4),(54,'印章、证照使用审批','R','../EntApps/YzZzSq/entry0.jsp','印章、证照使用审批','Y','Y',14,6),(55,'项目付款审批','R','../EntApps/FkSp/entry0.jsp','项目付款审批','Y','Y',14,8),(56,'项目管控','R','../EntMasters/XmGk/main.jsp','项目信息展示','Y','Y',14,0),(57,'印章客户端','P','./OutLink/SealClient.jsp','电子印章客户端','Y','Y',7,12),(58,'预付款审批','R','../EntApps/YfkSp/entry0.jsp','预付款审批','Y','Y',9,15),(59,'公司收文','R','../FileApp/GsSw/entry0.jsp','公司收文','Y','Y',9,6),(60,'合同审批','R','../EntApps/HtSp/entry0.jsp','合同审批','Y','Y',14,5),(61,'制度汇编','R','../EntMasters/ZdHb/entry0.jsp','制度汇编','Y','Y',9,2),(62,'督查督办','R','../FileApp/DcDb/entry0.jsp','督查督办','Y','Y',9,9),(63,'读书角','R','../FileApp/Dsj/ListA/main.jsp','书目、读书心得','Y','Y',9,19),(64,'非业务类合同管理','R','../FileApp/WjHq/entry0.jsp','非业务类合同管理','Y','Y',9,20),(65,'档案交接','R','../EntApps/DaJj/entry0.jsp','档案交接','Y','Y',15,1),(66,'档案借阅','R','../EntApps/DaJy/entry0.jsp','档案借阅','Y','Y',15,3),(67,'合同审查','R','../EntApps/HtSc/entry0.jsp','未正式立项的项目需要签署合同','Y','Y',14,5),(68,'公司论坛','R','../FileApp/GsLt/entry0.jsp','发起议题、评论、投票、关闭议题','Y','N',9,7),(69,'考勤评定','R','../FileApp/KqPd/entry0.jsp','系统每日按出勤记录考勤，上司据实修改考勤记录','Y','Y',9,8),(70,'工资发放','R','../FileApp/GzFf/entry0.jsp','工资发放作业','N','Y',9,22),(71,'个人工资条','R','../FileApp/Gzt/main.jsp','个人工资条查询','Y','Y',1,7),(72,'采购申请','R','../EntApps/CgSq/entry0.jsp','采购申请流程','Y','Y',9,14);
/*!40000 ALTER TABLE `Pf_M_Func` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_Func_21` AFTER INSERT ON `Pf_M_Func` FOR EACH ROW
BEGIN
	if new.IsPublic='Y' and new.IsVisible='Y' then
    	update Pf_M_Ent set MenuRegenTag='Y';
	end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_Func_23` AFTER UPDATE ON `Pf_M_Func` FOR EACH ROW
BEGIN
	if old.Name!=new.Name or old.IsPublic!=new.IsPublic or old.IsVisible!=new.IsVisible or old.ModuleID!=new.ModuleID or old.Url!=new.Url then
    	update Pf_M_Ent set MenuRegenTag='Y';
        
        if old.IsPublic='N' and new.IsPublic='Y' then
        	delete from Pf_M_RoleFunc where FuncID=old.ID;
        end if;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_Func_22` AFTER DELETE ON `Pf_M_Func` FOR EACH ROW
BEGIN
	if old.IsPublic='Y' and old.IsVisible='Y' then
    	update Pf_M_Ent set MenuRegenTag='Y';
  	end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Pf_M_GrantSet`
--

DROP TABLE IF EXISTS `Pf_M_GrantSet`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_M_GrantSet` (
  `GrantFrom` smallint(5) unsigned NOT NULL,
  `BizCode` tinyint(3) unsigned NOT NULL,
  `GrantTo` smallint(5) unsigned NOT NULL,
  `GrantStatus` char(1) NOT NULL DEFAULT '',
  `AccRejNote` varchar(100) DEFAULT NULL,
  PRIMARY KEY (`GrantFrom`,`BizCode`) USING BTREE,
  KEY `GrantFrom` (`GrantFrom`) USING BTREE,
  KEY `BizCode` (`BizCode`) USING BTREE,
  KEY `GrantTo` (`GrantTo`) USING BTREE,
  CONSTRAINT `Pf_M_GrantSet_FK1` FOREIGN KEY (`GrantFrom`) REFERENCES `Pf_M_Usr` (`ID`),
  CONSTRAINT `Pf_M_GrantSet_FK2` FOREIGN KEY (`BizCode`) REFERENCES `Pf_M_Biz` (`Code`),
  CONSTRAINT `Pf_M_GrantSet_FK3` FOREIGN KEY (`GrantTo`) REFERENCES `Pf_M_Usr` (`ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_M_GrantSet`
--

LOCK TABLES `Pf_M_GrantSet` WRITE;
/*!40000 ALTER TABLE `Pf_M_GrantSet` DISABLE KEYS */;
INSERT INTO `Pf_M_GrantSet` VALUES (14,11,13,'W','');
/*!40000 ALTER TABLE `Pf_M_GrantSet` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_GrantSet_21` AFTER INSERT ON `Pf_M_GrantSet` FOR EACH ROW
BEGIN
  	insert into Pf_D_PromptMail (CreateTime,MailTitle,MailBody,OrderAtTime,Sended) values (now(),'代办委托提醒', 
    	concat('授权人[',Pf_UsrcName(new.GrantFrom),']临时外出，想把[',Pf_BizName(new.BizCode),']业务交给你代理，请上办公系统确认。'), now(), 'N');
  	insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(new.GrantTo),'Z');
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_GrantSet_13` BEFORE UPDATE ON `Pf_M_GrantSet` FOR EACH ROW
BEGIN
	if old.GrantStatus in ('R','C') and new.GrantStatus='W' then
		set new.AccRejNote='';
	end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_GrantSet_23` AFTER UPDATE ON `Pf_M_GrantSet` FOR EACH ROW
BEGIN
  	if old.GrantStatus=new.GrantStatus and old.GrantStatus='W' and old.GrantTo!=new.GrantTo then
  		insert into Pf_D_PromptMail (CreateTime,MailTitle,MailBody,OrderAtTime,Sended) values (now(),'代办委托提醒', 
    		concat('授权人[',Pf_UsrcName(old.GrantFrom),']给你的[',Pf_BizName(old.BizCode),']业务授权取消。'), now(), 'N');
  		insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(old.GrantTo),'Z');

  		insert into Pf_D_PromptMail (CreateTime,MailTitle,MailBody,OrderAtTime,Sended) values (now(),'代办委托提醒', 
    		concat('授权人[',Pf_UsrcName(old.GrantFrom),']临时外出，想把[',Pf_BizName(old.BizCode),']业务交给你代理，请上办公系统确认。'), now(), 'N');
  		insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(new.GrantTo),'Z');
	end if;

	if old.GrantStatus='W' and New.GrantStatus='A' then
  		insert into Pf_D_PromptMail (CreateTime,MailTitle,MailBody,OrderAtTime,Sended) values (now(),'代办委托提醒', 
    		concat('被授权人[',Pf_UsrcName(old.GrantTo),']接受了您[',Pf_BizName(old.BizCode),']业务的授权。'), now(), 'N');
  		insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(old.GrantFrom),'Z');

		insert into Pf_C_GrantHis (GrantFrom,BizCode,GrantTo,AccTs,AccNote,EndTs) values (old.GrantFrom, old.BizCode, old.GrantTo, now(), new.AccRejNote, null);
	end if;

	if old.GrantStatus='W' and new.GrantStatus='R' then
  		insert into Pf_D_PromptMail (CreateTime,MailTitle,MailBody,OrderAtTime,Sended) values (now(),'代办委托提醒', 
    		concat('被授权人[',Pf_UsrcName(old.GrantTo),']拒绝了您[',Pf_BizName(old.BizCode),']业务的授权。'), now(), 'N');
  		insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(old.GrantFrom),'Z');
	end if;

	if old.GrantStatus in ('R','C') and new.GrantStatus='W' then
  		insert into Pf_D_PromptMail (CreateTime,MailTitle,MailBody,OrderAtTime,Sended) values (now(),'代办委托提醒', 
    		concat('授权人[',Pf_UsrcName(old.GrantFrom),']临时外出，想把[',Pf_BizName(old.BizCode),']业务交给你代理，请上办公系统确认。'), now(), 'N');
  		insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(old.GrantTo),'Z');
	end if;

	if old.GrantStatus!='C' and new.GrantStatus='C' then
		update Pf_A_BizProcRcd
		set ProcessedBy=pGrantedBy,pGrantedBy=0
		where Pf_BizCodeByBizNodeID(CurrNode)=old.BizCode and SubmitTs is null and ProcessedBy=old.GrantTo and pGrantedBy=old.GrantFrom;

		update Pf_D_ToDoLink
		set ProcessedBy=old.GrantFrom,pGrantedBy=0
		where Pf_BizCodeByBizNodeID(CurrNode)=old.BizCode and ProcessedBy=old.GrantTo and pGrantedBy=old.GrantFrom;

		update Pf_C_GrantHis
		set EndTs=now()
    	where GrantFrom=old.GrantFrom and BizCode=old.BizCode and GrantTo=old.GrantTo and EndTs is null;

  		insert into Pf_D_PromptMail (CreateTime,MailTitle,MailBody,OrderAtTime,Sended) values (now(),'代办委托提醒', 
    		concat('授权人[',Pf_UsrcName(old.GrantFrom),']给你的[',Pf_BizName(old.BizCode),']业务授权被收回，授权人感谢你帮忙。'), now(), 'N');
  		insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(old.GrantTo),'Z');
	end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_GrantSet_22` AFTER DELETE ON `Pf_M_GrantSet` FOR EACH ROW
BEGIN
  	if old.GrantStatus='A' then
    	update Pf_A_BizProcRcd
    	set ProcessedBy=pGrantedBy,pGrantedBy=0
    	where Pf_BizCodeByBizNodeID(CurrNode)=old.BizCode and SubmitTs is null and ProcessedBy=old.GrantTo and pGrantedBy=old.GrantFrom;

    	update Pf_D_ToDoLink
    	set ProcessedBy=old.GrantFrom,pGrantedBy=0
    	where Pf_BizCodeByBizNodeID(CurrNode)=old.BizCode and ProcessedBy=old.GrantTo and pGrantedBy=old.GrantFrom;

    	update Pf_C_GrantHis
    	set EndTs=now()
    	where GrantFrom=old.GrantFrom and BizCode=old.BizCode and GrantTo=old.GrantTo and EndTs is null;

  		insert into Pf_D_PromptMail (CreateTime,MailTitle,MailBody,OrderAtTime,Sended) values (now(),'代办委托提醒', 
    		concat('授权人[',Pf_UsrcName(old.GrantFrom),']给你的[',Pf_BizName(old.BizCode),']业务授权被收回，授权人感谢你帮忙。'), now(), 'N');
  		insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(old.GrantTo),'Z');
  end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Pf_M_HomePageInfoBlock`
--

DROP TABLE IF EXISTS `Pf_M_HomePageInfoBlock`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_M_HomePageInfoBlock` (
  `Code` tinyint(3) unsigned NOT NULL,
  `cName` varchar(10) NOT NULL DEFAULT '',
  `eName` varchar(20) NOT NULL DEFAULT '',
  PRIMARY KEY (`Code`),
  UNIQUE KEY `cName` (`cName`),
  UNIQUE KEY `eName` (`eName`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_M_HomePageInfoBlock`
--

LOCK TABLES `Pf_M_HomePageInfoBlock` WRITE;
/*!40000 ALTER TABLE `Pf_M_HomePageInfoBlock` DISABLE KEYS */;
INSERT INTO `Pf_M_HomePageInfoBlock` VALUES (1,'最新公司文件','GsWj'),(2,'最新发布信息','XxFb'),(4,'待还借款','DhJk'),(5,'最新公司收文','GsSw'),(8,'待尽职调查项目','DjzDcXm'),(9,'待审查项目','DScXm'),(10,'待审批项目','DSsFaXm'),(11,'最新公司制度文件','ZdWj'),(12,'员工最新办结报销','TqBjBx'),(13,'员工最新办结用印','TqBjYy'),(14,'员工最新办结付款','TqBjFk'),(15,'特权全业务监控','TqBizMonitor');
/*!40000 ALTER TABLE `Pf_M_HomePageInfoBlock` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `Pf_M_HomePageProfile`
--

DROP TABLE IF EXISTS `Pf_M_HomePageProfile`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_M_HomePageProfile` (
  `UsrID` smallint(5) unsigned NOT NULL,
  `InfoBlockCode` tinyint(3) unsigned NOT NULL,
  `OrderNo` tinyint(3) unsigned NOT NULL,
  PRIMARY KEY (`UsrID`,`InfoBlockCode`),
  KEY `UsrID` (`UsrID`),
  KEY `InfoBlockCode` (`InfoBlockCode`),
  CONSTRAINT `Pf_M_HomePageProfile_FK1` FOREIGN KEY (`UsrID`) REFERENCES `Pf_M_Usr` (`ID`) ON DELETE CASCADE,
  CONSTRAINT `Pf_M_HomePageProfile_FK2` FOREIGN KEY (`InfoBlockCode`) REFERENCES `Pf_M_HomePageInfoBlock` (`Code`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_M_HomePageProfile`
--

LOCK TABLES `Pf_M_HomePageProfile` WRITE;
/*!40000 ALTER TABLE `Pf_M_HomePageProfile` DISABLE KEYS */;
/*!40000 ALTER TABLE `Pf_M_HomePageProfile` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `Pf_M_IntCode`
--

DROP TABLE IF EXISTS `Pf_M_IntCode`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_M_IntCode` (
  `CodeType` tinyint(3) unsigned NOT NULL,
  `Code` tinyint(3) unsigned NOT NULL,
  `Value` varchar(40) NOT NULL DEFAULT '',
  `OrdNum` tinyint(3) unsigned NOT NULL DEFAULT '1',
  PRIMARY KEY (`CodeType`,`Code`),
  UNIQUE KEY `Pf_M_IntCode_UK1` (`CodeType`,`Value`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_M_IntCode`
--

LOCK TABLES `Pf_M_IntCode` WRITE;
/*!40000 ALTER TABLE `Pf_M_IntCode` DISABLE KEYS */;
INSERT INTO `Pf_M_IntCode` VALUES (0,1,'结束流程',1),(0,2,'下一步处理人是之前指定环节处理人',2),(0,3,'并发/多人顺序办理反馈',3),(0,4,'下一步处理人同来源环节处理人',4),(0,11,'组织机构单选',11),(0,12,'起草人所在单位范围单选',12),(0,13,'处理人所在单位范围单选',13),(0,14,'起草人所在部门范围单选',14),(0,15,'处理人所在部门范围单选',15),(0,16,'组织机构多选',16),(0,17,'起草人所在单位范围多选',17),(0,18,'处理人所在单位范围多选',18),(0,19,'起草人所在部门范围多选',19),(0,20,'处理人所在部门范围多选',20),(0,21,'从起草人部门副职选1人',21),(0,31,'指定角色范围单选',31),(0,32,'附加起草人区域分管特征从指定角色范围单选',32),(0,33,'附加处理人区域分管特征从指定角色范围单选',33),(0,34,'附加起草人单位特征从指定角色范围单选',34),(0,35,'附加处理人单位特征从指定角色范围单选',35),(0,36,'附加起草人部门特征从指定角色范围单选',36),(0,37,'附加处理人部门特征从指定角色范围单选',37),(0,38,'从指定角色范围多选',38),(0,39,'附加起草人区域分管特征从指定角色范围多选',39),(0,40,'附加处理人区域分管特征从指定角色范围多选',40),(0,41,'附加起草人单位特征从指定角色范围多选',41),(0,42,'附加处理人单位特征从指定角色范围多选',42),(0,43,'附加起草人部门特征从指定角色范围多选',43),(0,44,'附加处理人部门特征从指定角色范围多选',44),(0,45,'选择指定角色全部成员',45),(0,51,'下一步处理人是起草人主职部门负责人',51),(0,52,'下一步处理人是处理人主职部门负责人',52),(0,53,'起草人所在部门正副职范围内单选',53),(0,54,'处理人所在部门正副职范围内单选',54),(0,55,'起草人所在部门正副职范围内多选',55),(0,56,'处理人所在部门正副职范围内多选',56),(0,57,'部门正副职多选',57),(0,58,'从级别1人员中选1人',58),(0,60,'起草人条线分管领导单选',60),(0,61,'当前处理人条线分管领导单选',61),(0,62,'起草人条线分管领导多选',62),(0,63,'当前处理人条线分管领导多选',63),(0,71,'起草人所在主职部门分管领导单选',71),(0,72,'处理人所在主职部门分管领导单选',72),(0,73,'起草人所在主职部门分管领导多选',73),(0,74,'处理人所在主职部门分管领导多选',74),(0,75,'下一步处理人是当前处理人的部门经理/直属上司（部门经理优先）',75),(0,101,'下一环节处理人是业务相关线上签字人',101),(0,102,'下一步处理人是会议发起指定记录人',102),(0,103,'下一步处理人是会议发起指定参会人',102),(0,107,'下一步处理人是签报指定执行人',107),(0,108,'下一步处理人是督查督办承办人',108),(0,109,'从项目审批决策会出席人员多选',109),(0,200,'从管理员分管单位中选多人',200),(1,1,'组织机构地域',1),(1,2,'机构条线',2),(1,3,'岗位级别',3),(1,4,'部门职务',4),(1,11,'会议地点',11),(1,12,'签报事项类别',12),(1,13,'发文抄报单位',13),(1,14,'发文抄送单位',14),(1,15,'项目单位',15),(1,16,'收文来文单位',16),(1,17,'未正式立项项目',17),(11,1,'电视电话',1),(11,2,'茶水',2),(11,3,'指示牌',3),(11,4,'文件袋',4),(11,5,'音响话筒',5),(11,6,'矿泉水',6),(11,7,'主席台鲜花',7),(11,8,'笔记本',8),(11,9,'投影设备',9),(11,10,'纸巾',10),(11,11,'水果',11),(11,12,'水性笔',12),(12,1,'正常',1),(12,2,'晚婚',2),(12,3,'晚育',3),(12,4,'难产',4),(12,5,'多胎',5),(12,6,'难产、多胎',6),(12,7,'晚育、难产',7),(12,8,'晚育、多胎',8),(12,9,'晚育、难产、多胎',9),(12,10,'直系本地',10),(12,11,'直系外地',11),(12,12,'旁系本地',12),(12,13,'旁系外地',13),(13,1,'办公费',27),(13,2,'文具费',28),(13,3,'印刷费',29),(13,4,'通讯费',30),(13,5,'邮递费',31),(13,6,'差旅费（交通、住宿、出差餐费、补助）',32),(13,7,'图书资料费',33),(13,8,'会议费',34),(13,9,'车辆费-路桥',35),(13,10,'水电费',39),(13,11,'租赁费',40),(13,12,'运输费',41),(13,13,'电脑耗材',42),(13,14,'软件服务',43),(13,15,'证照费',44),(13,16,'业务招待费',45),(13,17,'行政收费-残保金',46),(13,18,'保险费-财产险',52),(13,19,'专业机构费用-审计费',60),(13,20,'员工成本-工资',1),(13,21,'员工成本-奖金',2),(13,22,'员工成本-劳务费',3),(13,23,'员工成本-津贴、补贴',4),(13,24,'员工成本-福利费-食堂费',5),(13,25,'员工成本-福利费-防暑降温',6),(13,26,'员工成本-福利费-职工取暖',7),(13,27,'员工成本-福利费-探亲',8),(13,28,'员工成本-福利费-体检',9),(13,29,'员工成本-福利费-工作餐',10),(13,30,'员工成本-福利费-服装',11),(13,31,'员工成本-福利费-非货币福利',12),(13,32,'员工成本-社会保险费-基本养老',13),(13,33,'员工成本-社会保险费-补充养老',14),(13,34,'员工成本-社会保险费-基本医疗',15),(13,35,'员工成本-社会保险费-补充医疗',16),(13,36,'员工成本-社会保险费-失业',17),(13,37,'员工成本-社会保险费-工伤',18),(13,38,'员工成本-社会保险费-生育',19),(13,39,'员工成本-住房公积金',20),(13,40,'员工成本-职工教育经费',21),(13,41,'员工成本-工会经费',22),(13,42,'员工成本-培训费',23),(13,43,'员工成本-劳动保护费',24),(13,44,'员工成本-市内交通费',25),(13,45,'员工成本-其他',26),(13,46,'车辆费-油气',36),(13,47,'车辆费-修理',37),(13,48,'车辆费-停车',38),(13,49,'行政收费-水资源费',47),(13,50,'行政收费-垃圾处理',48),(13,51,'行政收费-消防费',49),(13,52,'行政收费-公共设施费',50),(13,53,'行政收费-其它',51),(13,54,'折旧费用',53),(13,55,'摊销费用-专利权',54),(13,56,'摊销费用-非专利技术',55),(13,57,'摊销费用-商标权',56),(13,58,'摊销费用-独家经营权',57),(13,59,'摊销费用-软件',58),(13,60,'佣金支出',59),(13,61,'专业机构费用-非审计费用-法律服务',61),(13,62,'专业机构费用-非审计费用-诉讼',62),(13,63,'专业机构费用-非审计费用-技术咨询',63),(13,64,'专业机构费用-非审计费用-顾问',64),(13,65,'专业机构费用-非审计费用-事务所非审计服务',65),(13,66,'专业机构费用-非审计费用-评估',66),(13,67,'专业机构费用-非审计费用-其它',67),(13,68,'安保服务费',68),(13,69,'交易手续费',69),(13,70,'其它',70),(13,71,'机/车票费',32),(14,1,'飞机',1),(14,2,'火车软卧',2),(14,3,'火车硬卧',3),(14,4,'火车硬座',4),(14,5,'高客大巴',5),(14,6,'出租车',6),(14,7,'其它方式',7),(15,1,'直辖市或特区',1),(15,2,'一般地区',2);
/*!40000 ALTER TABLE `Pf_M_IntCode` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_IntCode_11` BEFORE INSERT ON `Pf_M_IntCode` FOR EACH ROW
BEGIN
	declare vNewOrdNum integer unsigned;
    
    select coalesce(MAX(OrdNum),0)+1 into vNewOrdNum from Pf_M_IntCode where CodeType=new.CodeType;
    set new.OrdNum=vNewOrdNum;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Pf_M_Module`
--

DROP TABLE IF EXISTS `Pf_M_Module`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_M_Module` (
  `ID` tinyint(3) unsigned NOT NULL AUTO_INCREMENT,
  `Name` varchar(20) NOT NULL DEFAULT '',
  `mDesc` varchar(100) NOT NULL DEFAULT '',
  `DisplayOrd` tinyint(3) unsigned NOT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE KEY `Pf_M_Module_UK1` (`Name`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=16 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_M_Module`
--

LOCK TABLES `Pf_M_Module` WRITE;
/*!40000 ALTER TABLE `Pf_M_Module` DISABLE KEYS */;
INSERT INTO `Pf_M_Module` VALUES (1,'个人事务','待办已办催办、个人设置、代办委托、个人工资条查询、密码修改',1),(3,'全文检索','只针对业务应用表单及其附件内容的全文检索',94),(5,'组织机构','部门维护、部门分管领导设置；用户维护、用户地域/条线分管设置；角色成员维护',100),(7,'应用设置','基础办公设置、通用办公设置、企业专项应用设置',99),(9,'通用办公','通讯录、常用信息、信息发布、公司文件、公司论坛、请示签报、会议管理、请休假、借款报销',3),(13,'业务审计','业务单据删除备忘',98),(14,'专项办公','专项办公',5),(15,'档案交接借阅','档案交接、借阅',6);
/*!40000 ALTER TABLE `Pf_M_Module` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_Module_23` AFTER UPDATE ON `Pf_M_Module` FOR EACH ROW
BEGIN
	if old.Name!=new.Name or old.mDesc!=new.mDesc or old.DisplayOrd!=new.DisplayOrd then
    	update Pf_M_Ent set MenuRegenTag='Y';
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Pf_M_MyDirectLeader`
--

DROP TABLE IF EXISTS `Pf_M_MyDirectLeader`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_M_MyDirectLeader` (
  `MyUsrID` smallint(5) unsigned NOT NULL,
  `LeaderID` smallint(5) unsigned NOT NULL,
  PRIMARY KEY (`MyUsrID`),
  KEY `Pf_M_MyDirectLeader_FK2` (`LeaderID`),
  CONSTRAINT `Pf_M_MyDirectLeader_FK1` FOREIGN KEY (`MyUsrID`) REFERENCES `Pf_M_Usr` (`ID`) ON DELETE CASCADE,
  CONSTRAINT `Pf_M_MyDirectLeader_FK2` FOREIGN KEY (`LeaderID`) REFERENCES `Pf_M_Usr` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_M_MyDirectLeader`
--

LOCK TABLES `Pf_M_MyDirectLeader` WRITE;
/*!40000 ALTER TABLE `Pf_M_MyDirectLeader` DISABLE KEYS */;
INSERT INTO `Pf_M_MyDirectLeader` VALUES (3,2),(4,2),(5,2),(6,2),(7,2),(8,2),(9,3),(10,7),(12,8),(11,9),(13,14);
/*!40000 ALTER TABLE `Pf_M_MyDirectLeader` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_MyDirectLeader_11` BEFORE INSERT ON `Pf_M_MyDirectLeader` FOR EACH ROW
label1:
BEGIN
	declare vCnt tinyint unsigned;
    declare IsTop,IsLoop char(1);
    declare vCurrLeaderID,vLeaderSLeaderID smallint unsigned;
    
    if new.MyUsrID=new.LeaderID then
    	call Pf_M_MyDirectLeader_11_err1(); 
        leave label1;
    end if;
    
    select count(*) into vCnt from Pf_M_MyDirectLeader where MyUsrID=new.LeaderID and LeaderID=new.MyUsrID;
    if vCnt=1 then
    	call Pf_M_MyDirectLeader_11_err2(); 
        leave label1;
    end if;
    
    set IsTop='N';
    set IsLoop='N';
    set vCurrLeaderID=new.LeaderID;
    while (IsTop='N' and IsLoop='N') do
    	select coalesce(min(LeaderID),0) into vLeaderSLeaderID from Pf_M_MyDirectLeader where MyUsrID=vCurrLeaderID;
        if vLeaderSLeaderID=0 THEN
        	 set IsTop='Y';
        else
        	if vLeaderSLeaderID=new.MyUsrID THEN
            	set IsLoop='Y';
            else
            	set vCurrLeaderID=vLeaderSLeaderID;
            end if;
        end if;
    end while;
    
    if IsLoop='Y' then
    	call Pf_M_MyDirectLeader_11_err3(); 
        leave label1;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_MyDirectLeader_13` BEFORE UPDATE ON `Pf_M_MyDirectLeader` FOR EACH ROW
label1:
BEGIN
	declare vCnt tinyint unsigned;
    declare IsTop,IsLoop char(1);
    declare vCurrLeaderID,vLeaderSLeaderID smallint unsigned;
    
	if new.MyUsrID=new.LeaderID then
    	call Pf_M_MyDirectLeader_13_err1(); 
        leave label1;
    end if;

    select count(*) into vCnt from Pf_M_MyDirectLeader where MyUsrID=new.LeaderID and LeaderID=new.MyUsrID;
    if vCnt=1 then
    	call Pf_M_MyDirectLeader_13_err2(); 
        leave label1;
    end if;

    set IsTop='N';
    set IsLoop='N';
    set vCurrLeaderID=new.LeaderID;
    while (IsTop='N' and IsLoop='N') do
    	select coalesce(min(LeaderID),0) into vLeaderSLeaderID from Pf_M_MyDirectLeader where MyUsrID=vCurrLeaderID;
        if vLeaderSLeaderID=0 THEN
        	 set IsTop='Y';
        else
        	if vLeaderSLeaderID=new.MyUsrID THEN
            	set IsLoop='Y';
            else
            	set vCurrLeaderID=vLeaderSLeaderID;
            end if;
        end if;
    end while;
    
    if IsLoop='Y' then
    	call Pf_M_MyDirectLeader_13_err3(); 
        leave label1;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Pf_M_Org`
--

DROP TABLE IF EXISTS `Pf_M_Org`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_M_Org` (
  `ID` smallint(5) unsigned NOT NULL AUTO_INCREMENT,
  `IsValid` char(1) NOT NULL DEFAULT 'Y',
  `ShortName` varchar(50) NOT NULL DEFAULT '',
  `ParentID` smallint(5) unsigned NOT NULL,
  `SmallOrd` tinyint(3) unsigned NOT NULL,
  `TreeLevel` tinyint(3) unsigned NOT NULL,
  `BigOrdCode` varchar(30) NOT NULL DEFAULT '',
  `FullName` varchar(200) NOT NULL DEFAULT '',
  `ContactInfo` varchar(200) DEFAULT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE KEY `Pf_M_Org_UK1` (`ShortName`,`ParentID`),
  KEY `Pf_M_Org_idx1` (`BigOrdCode`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=14 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_M_Org`
--

LOCK TABLES `Pf_M_Org` WRITE;
/*!40000 ALTER TABLE `Pf_M_Org` DISABLE KEYS */;
INSERT INTO `Pf_M_Org` VALUES (1,'Y','庆源金融',0,1,1,'001','庆源金融','-'),(2,'Y','董事长',1,1,2,'001001','庆源金融/董事长','-'),(3,'Y','副总经理',1,3,2,'001003','庆源金融/副总经理','-'),(4,'Y','会计核算部',1,8,2,'001008','庆源金融/会计核算部','-'),(5,'Y','运营管理部',1,4,2,'001004','庆源金融/运营管理部','-'),(6,'Y','业务部',1,5,2,'001005','庆源金融/业务部','-'),(7,'Y','审计部',1,9,2,'001009','庆源金融/审计部','-'),(8,'Y','数据信息部',1,6,2,'001006','庆源金融/数据信息部','-'),(9,'Y','党群工作部',1,10,2,'001010','庆源金融/党群工作部','-'),(10,'Y','法律合规部',1,11,2,'001011','庆源金融/法律合规部','-'),(11,'Y','资金运营部',1,7,2,'001007','庆源金融/资金运营部','-'),(12,'Y','风险管理部',1,12,2,'001012','庆源金融/风险管理部','风险管理部'),(13,'Y','总经理',1,2,2,'001002','庆源金融/总经理','总经理');
/*!40000 ALTER TABLE `Pf_M_Org` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_Org_11` BEFORE INSERT ON `Pf_M_Org` FOR EACH ROW
BEGIN
 	declare vParentIsValid char(1);
 	
 	select IsValid into vParentIsValid from Pf_M_Org where ID=new.ParentID;
 	if vParentIsValid='N' THEN
 		call Pf_M_Org_11_err1(); 
 	end if;
 	
 	set NEW.SmallOrd=(select COALESCE(max(SmallOrd),0)+1 from Pf_M_Org where ParentID = NEW.ParentID);
 	
 	if NEW.ParentID=0 then
 		set NEW.TreeLevel=1;
 		set NEW.BigOrdCode=LPAD(CONCAT(NEW.SmallOrd,''),3,'0');
 		set NEW.FullName=NEW.ShortName;
 	else
 		select TreeLevel + 1, concat(BigOrdCode,LPAD(concat(NEW.SmallOrd,''),3,'0')), concat(FullName,'/',NEW.ShortName) 
 		into @TreeLevel, @BigOrdCode, @FullName 
 		from Pf_M_Org where ID = NEW.ParentID;
 		
 		set NEW.TreeLevel=@TreeLevel;
 		set NEW.BigOrdCode=@BigOrdCode;
 		set NEW.FullName=@FullName;
 	end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_Org_13` BEFORE UPDATE ON `Pf_M_Org` FOR EACH ROW
BEGIN
	declare vParentIsValid char(1);
    
	if old.IsValid='N' and new.IsValid='Y' then
    	select IsValid into vParentIsValid from Pf_M_Org where ID=old.ParentID;
        if vParentIsValid='N' THEN
        	call Pf_M_Org_13_err1(); 
        end if;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Pf_M_OrgBizFlow`
--

DROP TABLE IF EXISTS `Pf_M_OrgBizFlow`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_M_OrgBizFlow` (
  `OrgID` smallint(5) unsigned NOT NULL COMMENT '机构ID',
  `BizFlowID` smallint(4) unsigned NOT NULL COMMENT '可用流程ID',
  UNIQUE KEY `Pf_M_OrgBizFlow_UK` (`OrgID`,`BizFlowID`),
  KEY `OrgID` (`OrgID`),
  KEY `BizFlowID` (`BizFlowID`),
  CONSTRAINT `Pf_M_OrgBizFlow_fk1` FOREIGN KEY (`OrgID`) REFERENCES `Pf_M_Org` (`ID`) ON DELETE CASCADE,
  CONSTRAINT `Pf_M_OrgBizFlow_fk2` FOREIGN KEY (`BizFlowID`) REFERENCES `Pf_M_BizFlow` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_M_OrgBizFlow`
--

LOCK TABLES `Pf_M_OrgBizFlow` WRITE;
/*!40000 ALTER TABLE `Pf_M_OrgBizFlow` DISABLE KEYS */;
INSERT INTO `Pf_M_OrgBizFlow` VALUES (2,31),(3,31),(4,31),(5,32),(6,31),(7,31),(8,31),(9,31),(10,31),(11,31),(12,31);
/*!40000 ALTER TABLE `Pf_M_OrgBizFlow` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `Pf_M_OrgUsr`
--

DROP TABLE IF EXISTS `Pf_M_OrgUsr`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_M_OrgUsr` (
  `UsrID` smallint(5) unsigned NOT NULL,
  `OrgID` smallint(5) unsigned NOT NULL,
  `InnerOrd` tinyint(3) unsigned NOT NULL,
  `IsMainOrg` char(1) NOT NULL DEFAULT 'Y',
  `JobTitleID` smallint(5) unsigned DEFAULT NULL,
  `JobType` char(1) NOT NULL DEFAULT 'C',
  PRIMARY KEY (`UsrID`,`OrgID`),
  KEY `UsrID` (`UsrID`),
  KEY `OrgID` (`OrgID`),
  KEY `JobInOrg` (`JobTitleID`),
  KEY `Pf_M_OrgUsr_idx1` (`IsMainOrg`) USING BTREE,
  CONSTRAINT `Pf_M_OrgUsr_FK1` FOREIGN KEY (`UsrID`) REFERENCES `Pf_M_Usr` (`ID`) ON DELETE CASCADE,
  CONSTRAINT `Pf_M_OrgUsr_FK2` FOREIGN KEY (`OrgID`) REFERENCES `Pf_M_Org` (`ID`),
  CONSTRAINT `Pf_M_OrgUsr_FK3` FOREIGN KEY (`JobTitleID`) REFERENCES `Pf_M_EntAppCode` (`ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_M_OrgUsr`
--

LOCK TABLES `Pf_M_OrgUsr` WRITE;
/*!40000 ALTER TABLE `Pf_M_OrgUsr` DISABLE KEYS */;
INSERT INTO `Pf_M_OrgUsr` VALUES (1,1,1,'Y',NULL,'C'),(2,2,1,'Y',2,'Z'),(3,3,1,'N',4,'C'),(3,4,1,'Y',24,'Z'),(3,11,1,'N',4,'Z'),(4,13,1,'Y',24,'Z'),(5,3,3,'N',4,'C'),(5,7,1,'N',24,'Z'),(5,9,1,'N',4,'Z'),(5,10,1,'Y',4,'Z'),(6,3,4,'N',4,'C'),(6,12,1,'Y',13,'Z'),(7,3,5,'N',4,'C'),(7,5,1,'Y',24,'Z'),(8,3,6,'N',4,'C'),(8,6,1,'Y',24,'Z'),(9,4,2,'Y',6,'F'),(10,5,2,'Y',6,'F'),(11,4,3,'Y',24,'C'),(12,6,2,'Y',6,'F'),(13,7,2,'N',6,'C'),(13,8,2,'Y',24,'C'),(14,8,1,'Y',6,'Z'),(15,5,4,'Y',8,'C'),(16,5,5,'Y',8,'C'),(17,5,6,'Y',52,'C'),(18,10,2,'Y',73,'C'),(19,12,2,'Y',74,'C');
/*!40000 ALTER TABLE `Pf_M_OrgUsr` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_OrgUsr_11` BEFORE INSERT ON `Pf_M_OrgUsr` FOR EACH ROW
BEGIN
	declare vCnt tinyint unsigned;
    
    set new.InnerOrd=(select coalesce(max(InnerOrd),0)+1 from Pf_M_OrgUsr where OrgID = new.OrgID);
    
    if new.IsMainOrg='Y' then
    	select count(*) into vCnt from Pf_M_OrgUsr where UsrID=new.UsrID and OrgID!=new.OrgID and IsMainOrg='Y';
        if vCnt=1 then
			call Pf_M_OrgUsr_11_err1(); 
        end if;
    end if;
    
    if new.JobType='Z' then
    	select count(*) into vCnt from Pf_M_OrgUsr where UsrID!=new.UsrID and OrgID=new.OrgID and JobType='Z';
        if vCnt=1 then
			call Pf_M_OrgUsr_11_err2(); 
        end if;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_OrgUsr_13` BEFORE UPDATE ON `Pf_M_OrgUsr` FOR EACH ROW
BEGIN
	declare vCnt TINYINT UNSIGNED;
    
	if new.IsMainOrg!=old.IsMainOrg and new.IsMainOrg='Y' then
    	select count(*) into vCnt from Pf_M_OrgUsr where UsrID=old.UsrID and OrgID!=old.OrgID and IsMainOrg='Y';
        if vCnt=1 then
			call Pf_M_OrgUsr_13_err1(); 
        end if;
    end if;
    
    if new.JobType!=old.JobType and new.JobType='Z' then
    	select count(*) into vCnt from Pf_M_OrgUsr where UsrID!=old.UsrID and OrgID=old.OrgID and JobType='Z';
        if vCnt=1 then
			call Pf_M_OrgUsr_13_err2(); 
        end if;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Pf_M_PrivatePromptSet`
--

DROP TABLE IF EXISTS `Pf_M_PrivatePromptSet`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_M_PrivatePromptSet` (
  `UsrID` smallint(5) unsigned NOT NULL,
  `BizCode` tinyint(3) unsigned NOT NULL,
  `PromptWay` char(1) NOT NULL DEFAULT '',
  PRIMARY KEY (`UsrID`,`BizCode`) USING BTREE,
  KEY `UsrID` (`UsrID`) USING BTREE,
  KEY `BizCode` (`BizCode`) USING BTREE,
  CONSTRAINT `Pf_M_PrivatePromptSet_FK1` FOREIGN KEY (`UsrID`) REFERENCES `Pf_M_Usr` (`ID`) ON DELETE CASCADE,
  CONSTRAINT `Pf_M_PrivatePromptSet_FK2` FOREIGN KEY (`BizCode`) REFERENCES `Pf_M_Biz` (`Code`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_M_PrivatePromptSet`
--

LOCK TABLES `Pf_M_PrivatePromptSet` WRITE;
/*!40000 ALTER TABLE `Pf_M_PrivatePromptSet` DISABLE KEYS */;
/*!40000 ALTER TABLE `Pf_M_PrivatePromptSet` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `Pf_M_Privilege`
--

DROP TABLE IF EXISTS `Pf_M_Privilege`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_M_Privilege` (
  `RoleID` tinyint(3) unsigned NOT NULL,
  `FuncID` smallint(4) unsigned NOT NULL,
  KEY `RoleID` (`RoleID`),
  KEY `FuncID` (`FuncID`),
  CONSTRAINT `pf_m_privilege_fk1` FOREIGN KEY (`RoleID`) REFERENCES `Pf_M_Role` (`ID`) ON DELETE CASCADE,
  CONSTRAINT `pf_m_privilege_fk2` FOREIGN KEY (`FuncID`) REFERENCES `Pf_M_Func` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 PACK_KEYS=0 ROW_FORMAT=COMPACT;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_M_Privilege`
--

LOCK TABLES `Pf_M_Privilege` WRITE;
/*!40000 ALTER TABLE `Pf_M_Privilege` DISABLE KEYS */;
INSERT INTO `Pf_M_Privilege` VALUES (37,62),(37,49),(37,54),(37,55),(37,28);
/*!40000 ALTER TABLE `Pf_M_Privilege` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `Pf_M_ProcLocution`
--

DROP TABLE IF EXISTS `Pf_M_ProcLocution`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_M_ProcLocution` (
  `UsrID` smallint(5) unsigned NOT NULL,
  `FuncID` smallint(4) unsigned NOT NULL,
  `Locution` varchar(40) NOT NULL DEFAULT '',
  PRIMARY KEY (`UsrID`,`FuncID`,`Locution`),
  KEY `UsrID` (`UsrID`),
  KEY `FuncID` (`FuncID`),
  CONSTRAINT `Pf_M_ProcLocution_FK1` FOREIGN KEY (`UsrID`) REFERENCES `Pf_M_Usr` (`ID`) ON DELETE CASCADE,
  CONSTRAINT `Pf_M_ProcLocution_FK2` FOREIGN KEY (`FuncID`) REFERENCES `Pf_M_Func` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_M_ProcLocution`
--

LOCK TABLES `Pf_M_ProcLocution` WRITE;
/*!40000 ALTER TABLE `Pf_M_ProcLocution` DISABLE KEYS */;
INSERT INTO `Pf_M_ProcLocution` VALUES (2,22,'同意'),(2,23,'同意'),(2,25,'同意'),(2,28,'同意'),(2,29,'同意'),(2,47,'同意'),(2,48,'同意'),(2,49,'同意'),(2,59,'请各部门传阅'),(2,59,'请相关部门严格按文件精神执行'),(4,49,'下次注意及时报销'),(4,49,'同意报销'),(4,53,'再上会'),(4,53,'原则同意'),(5,29,'同意休假'),(5,29,'确认休假'),(5,55,'合规审核通过'),(7,66,'同意借出'),(7,66,'注意保密'),(7,70,'同意发放'),(7,70,'注意工资制度宣贯'),(8,29,'及时销假'),(8,29,'同意'),(8,47,'同意借款'),(8,47,'注意按期归还'),(8,50,'再考察'),(8,50,'同意立项'),(8,51,'再调查'),(8,51,'同意材料内容'),(8,52,'同意审查'),(8,52,'同意审查结论'),(8,52,'审查不通过'),(8,52,'建议上会研究'),(8,54,'同意用印外带，注意及时归还'),(8,54,'同意用印，但不能外带'),(8,55,'再议'),(8,55,'同意付款'),(8,58,'同意预付'),(8,58,'注意跟进'),(8,60,'同意'),(8,60,'注意付款条件'),(8,67,'同意'),(8,67,'设置尾款协议'),(8,72,'原则同意，确保性价比最高'),(8,72,'无预算'),(9,49,'同意报销'),(9,49,'注意科目'),(9,55,'会计审核通过'),(10,22,'信息发布AAA'),(10,49,'不合理报销项有：'),(10,49,'同意报销'),(10,65,'交接文件已确认'),(14,25,'同意签报事项'),(14,25,'请及时反馈执行情况'),(14,50,'同意'),(14,64,'同意合同内容');
/*!40000 ALTER TABLE `Pf_M_ProcLocution` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `Pf_M_PsnSelAttr`
--

DROP TABLE IF EXISTS `Pf_M_PsnSelAttr`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_M_PsnSelAttr` (
  `Code` tinyint(3) unsigned NOT NULL,
  `InterfaceStyle` char(1) NOT NULL DEFAULT '',
  `RoleRelated` char(1) NOT NULL DEFAULT 'N',
  `StartOrgRelated` char(1) NOT NULL DEFAULT 'N',
  `Interface235CondRelated` char(1) NOT NULL DEFAULT 'N',
  `InitPsnRelated` char(1) NOT NULL DEFAULT 'N',
  `CurrProcPsnRelated` char(1) NOT NULL DEFAULT 'N',
  `AreaRelated` char(1) NOT NULL DEFAULT 'N',
  `UnitRelated` char(1) NOT NULL DEFAULT 'N',
  `DeptRelated` char(1) NOT NULL DEFAULT 'N',
  `DeptLeaderRelated` char(1) NOT NULL DEFAULT 'N',
  `UnitLeaderRelated` char(1) NOT NULL DEFAULT 'N',
  `AppBizRelated` char(1) NOT NULL DEFAULT 'N',
  PRIMARY KEY (`Code`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_M_PsnSelAttr`
--

LOCK TABLES `Pf_M_PsnSelAttr` WRITE;
/*!40000 ALTER TABLE `Pf_M_PsnSelAttr` DISABLE KEYS */;
INSERT INTO `Pf_M_PsnSelAttr` VALUES (1,'E','N','N','N','N','N','N','N','N','N','N','N'),(2,'E','N','N','N','N','N','N','N','N','N','N','N'),(3,'E','N','N','N','N','N','N','N','N','N','N','N'),(4,'E','N','N','N','N','N','N','N','N','N','N','N'),(11,'S','N','N','N','N','N','N','N','N','N','N','N'),(12,'S','N','Y','N','Y','N','N','Y','N','N','N','N'),(13,'S','N','Y','N','N','Y','N','Y','N','N','N','N'),(14,'S','N','Y','N','Y','N','N','N','Y','N','N','N'),(15,'S','N','Y','N','N','Y','N','N','Y','N','N','N'),(16,'O','N','N','N','N','N','N','N','N','N','N','N'),(17,'O','N','Y','N','Y','N','N','Y','N','N','N','N'),(18,'O','N','Y','N','N','Y','N','Y','N','N','N','N'),(19,'O','N','Y','N','Y','N','N','N','Y','N','N','N'),(20,'O','N','Y','N','N','Y','N','N','Y','N','N','N'),(21,'L','N','N','N','Y','N','N','N','Y','Y','N','N'),(31,'L','Y','N','N','N','N','N','N','N','N','N','N'),(32,'L','Y','N','N','Y','N','Y','N','N','N','N','N'),(33,'L','Y','N','N','N','Y','Y','N','N','N','N','N'),(34,'L','Y','N','N','Y','N','N','Y','N','N','N','N'),(35,'L','Y','N','N','N','Y','N','Y','N','N','N','N'),(36,'L','Y','N','N','Y','N','N','N','Y','N','N','N'),(37,'L','Y','N','N','N','Y','N','N','Y','N','N','N'),(38,'M','Y','N','Y','N','N','N','N','N','N','N','N'),(39,'M','Y','N','Y','Y','N','Y','N','N','N','N','N'),(40,'M','Y','N','Y','N','Y','Y','N','N','N','N','N'),(41,'M','Y','N','Y','Y','N','N','Y','N','N','N','N'),(42,'M','Y','N','Y','N','Y','N','Y','N','N','N','N'),(43,'M','Y','N','Y','Y','N','N','N','Y','N','N','N'),(44,'M','Y','N','Y','N','Y','N','N','Y','N','N','N'),(45,'A','Y','N','N','N','N','N','N','N','N','N','N'),(51,'A','N','N','N','Y','N','N','N','Y','Y','N','N'),(52,'A','N','N','N','N','Y','N','N','Y','Y','N','N'),(53,'L','N','N','N','Y','N','N','N','Y','Y','N','N'),(54,'L','N','N','N','N','Y','N','N','Y','Y','N','N'),(55,'M','N','N','Y','Y','N','N','N','Y','Y','N','N'),(56,'M','N','N','Y','N','Y','N','N','Y','Y','N','N'),(57,'O','N','N','Y','N','N','N','N','Y','Y','N','N'),(58,'L','N','N','N','N','N','N','N','N','N','N','Y'),(60,'L','N','N','N','Y','N','N','N','N','N','Y','N'),(61,'L','N','N','N','N','Y','N','N','N','N','Y','N'),(62,'M','N','N','N','Y','N','N','N','N','N','Y','N'),(63,'M','N','N','N','N','Y','N','N','N','N','Y','N'),(71,'L','N','N','N','Y','N','N','N','Y','N','Y','N'),(72,'L','N','N','N','N','Y','N','N','Y','N','Y','N'),(73,'M','N','N','Y','Y','N','N','N','Y','N','Y','N'),(74,'M','N','N','Y','N','Y','N','N','Y','N','Y','N'),(75,'A','N','N','N','N','Y','N','N','Y','N','N','N'),(101,'A','N','N','N','N','N','N','N','N','N','N','Y'),(102,'A','N','N','N','N','N','N','N','N','N','N','Y'),(103,'A','N','N','N','N','N','N','N','N','N','N','Y'),(107,'A','N','N','N','N','N','N','N','N','N','N','Y'),(108,'A','N','N','N','N','N','N','N','N','N','N','Y'),(109,'M','N','N','Y','N','N','N','N','N','N','N','Y'),(200,'O','N','N','Y','N','N','N','Y','Y','N','N','N');
/*!40000 ALTER TABLE `Pf_M_PsnSelAttr` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `Pf_M_PubHoliday`
--

DROP TABLE IF EXISTS `Pf_M_PubHoliday`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_M_PubHoliday` (
  `ID` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `Day1` date NOT NULL,
  `Day2` date NOT NULL,
  `IfLegal` char(1) NOT NULL DEFAULT 'N',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `Pf_M_PubHoliday_UK1` (`Day1`) USING BTREE,
  UNIQUE KEY `Pf_M_PubHoliday_UK2` (`Day2`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=53 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_M_PubHoliday`
--

LOCK TABLES `Pf_M_PubHoliday` WRITE;
/*!40000 ALTER TABLE `Pf_M_PubHoliday` DISABLE KEYS */;
INSERT INTO `Pf_M_PubHoliday` VALUES (1,'2018-01-06','2018-01-07','N'),(2,'2018-01-13','2018-01-14','N'),(3,'2018-01-20','2018-01-21','N'),(4,'2018-01-27','2018-01-28','N'),(5,'2018-02-03','2018-02-04','N'),(6,'2018-02-10','2018-02-10','N'),(7,'2018-02-15','2018-02-21','Y'),(8,'2018-02-25','2018-02-25','N'),(9,'2018-03-03','2018-03-04','N'),(10,'2018-03-10','2018-03-11','N'),(11,'2018-03-17','2018-03-18','N'),(12,'2018-03-24','2018-03-25','N'),(13,'2018-03-31','2018-04-01','N'),(14,'2018-04-05','2018-04-07','Y'),(15,'2018-04-14','2018-04-15','N'),(16,'2018-04-21','2018-04-22','N'),(17,'2018-04-29','2018-05-01','Y'),(18,'2018-05-05','2018-05-06','N'),(19,'2018-05-12','2018-05-13','N'),(20,'2018-05-19','2018-05-20','N'),(21,'2018-05-26','2018-05-27','N'),(22,'2018-06-02','2018-06-03','N'),(23,'2018-06-09','2018-06-10','N'),(24,'2018-06-16','2018-06-18','Y'),(25,'2018-06-23','2018-06-24','N'),(26,'2018-06-30','2018-07-01','N'),(27,'2018-07-07','2018-07-08','N'),(28,'2018-07-14','2018-07-15','N'),(29,'2018-07-21','2018-07-22','N'),(30,'2018-07-28','2018-07-29','N'),(31,'2018-08-04','2018-08-05','N'),(32,'2018-08-11','2018-08-12','N'),(33,'2018-08-18','2018-08-19','N'),(34,'2018-08-25','2018-08-26','N'),(35,'2018-09-01','2018-09-02','N'),(36,'2018-09-08','2018-09-09','N'),(37,'2018-09-15','2018-09-16','N'),(38,'2018-09-22','2018-09-24','Y'),(39,'2018-10-01','2018-10-07','Y'),(41,'2018-10-13','2018-10-14','N'),(42,'2018-10-20','2018-10-21','N'),(43,'2018-10-27','2018-10-28','N'),(44,'2018-11-03','2018-11-04','N'),(45,'2018-11-10','2018-11-11','N'),(46,'2018-11-17','2018-11-18','N'),(47,'2018-11-24','2018-11-25','N'),(48,'2018-12-01','2018-12-02','N'),(49,'2018-12-08','2018-12-09','N'),(50,'2018-12-15','2018-12-16','N'),(51,'2018-12-22','2018-12-23','N'),(52,'2018-12-29','2018-12-30','N');
/*!40000 ALTER TABLE `Pf_M_PubHoliday` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_PubHoliday_11` BEFORE INSERT ON `Pf_M_PubHoliday` FOR EACH ROW
BEGIN
 	declare vCnt tinyint unsigned;
 	
 	select count(*) into vCnt
 	from Pf_M_PubHoliday
 	where new.Day1 between Day1 and Day2 or new.Day2 between Day1 and Day2 or
 		Day1 between new.Day1 and new.Day2 or Day2 between new.Day1 and new.Day2 or
 		Day2=date_add(new.Day1,interval -1 day) or Day1=date_add(new.Day2,interval 1 day);
 	
 	if vCnt>0 then
 		call Pf_M_PubHoliday_11_err1(); 
 	end if;
 	
 	IF new.Day1>new.Day2 then
 		call Pf_M_PubHoliday_11_err2(); #时段始不能大于时段末！
 	end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_PubHoliday_13` BEFORE UPDATE ON `Pf_M_PubHoliday` FOR EACH ROW
BEGIN
 	declare vCnt tinyint unsigned;
 	
 	select count(*) into vCnt
 	from Pf_M_PubHoliday
 	where ID!=new.ID and ( 
 		new.Day1 between Day1 and Day2 or new.Day2 between Day1 and Day2 or
 		Day1 between new.Day1 and new.Day2 or Day2 between new.Day1 and new.Day2 or
 		Day2=date_add(new.Day1,interval -1 day) or Day1=date_add(new.Day2,interval 1 day));
 	
 	if vCnt>0 then
 		call Pf_M_PubHoliday_13_err1(); 
 	end if;
 	
 	if new.Day1>new.Day2 then
 		call Pf_M_PubHoliday_13_err2(); #时段始不能大于时段末！
 	end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Pf_M_Role`
--

DROP TABLE IF EXISTS `Pf_M_Role`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_M_Role` (
  `ID` tinyint(3) unsigned NOT NULL AUTO_INCREMENT,
  `Name` varchar(20) NOT NULL DEFAULT '',
  `rDesc` varchar(100) NOT NULL DEFAULT '',
  `IfReserved` char(1) NOT NULL DEFAULT 'N',
  `ParentID` tinyint(3) unsigned NOT NULL,
  `SmallOrd` tinyint(3) unsigned NOT NULL,
  `TreeLevel` tinyint(3) unsigned NOT NULL,
  `BigOrdCode` varchar(12) NOT NULL DEFAULT '',
  `FullName` varchar(60) NOT NULL DEFAULT '',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `Pf_M_Role_UK1` (`Name`,`ParentID`)
) ENGINE=InnoDB AUTO_INCREMENT=71 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_M_Role`
--

LOCK TABLES `Pf_M_Role` WRITE;
/*!40000 ALTER TABLE `Pf_M_Role` DISABLE KEYS */;
INSERT INTO `Pf_M_Role` VALUES (1,'企业管理员','企业管理员一家企业一人','Y',0,1,1,'001','企业管理员'),(2,'二级管理员','企业管理员指定多位二级管理员实施分片管理','Y',0,2,1,'002','二级管理员'),(21,'财务经理','财务部部门经理','N',31,1,2,'044001','财务人员/财务经理'),(22,'出纳','出纳','N',31,3,2,'044003','财务人员/出纳'),(26,'公司领导','公司领导，拥有特权','Y',0,24,1,'024','公司领导'),(30,'会议室管理员','可以调整会议时间和地点','N',52,3,3,'045008003','综合人员/行政/会议室管理员'),(31,'财务人员','财务人员','N',0,44,1,'044','财务人员'),(36,'总经理','总经理','Y',0,16,1,'016','总经理'),(37,'董事长','董事长','Y',0,14,1,'014','董事长'),(38,'财务审核人','财务审核人','N',31,2,2,'044002','财务人员/财务审核人'),(41,'综合人员','综合服务部人员','N',0,45,1,'045','综合人员'),(42,'综合服务部部门经理','综合服务部部门经理','N',41,1,2,'045001','综合人员/综合服务部部门经理'),(46,'人资专员','人资专员','N',53,2,3,'045009002','综合人员/人事/人资专员'),(51,'行政主管','行政主管','N',52,1,3,'045008001','综合人员/行政/行政主管'),(52,'行政','综合服务部行政人员','N',41,8,2,'045008','综合人员/行政'),(53,'人事','综合服务部人事人员','N',41,9,2,'045009','综合人员/人事'),(55,'人资主管','人资主管','N',53,1,3,'045009001','综合人员/人事/人资主管'),(56,'行政库管','行政部办公用品、耗材、笔记本电脑、礼品等仓库管理（登记与领用申请发放）','N',52,2,3,'045008002','综合人员/行政/行政库管'),(57,'公司用印管理员','公司用印管理员','N',0,38,1,'038','公司用印管理员'),(58,'法律合规负责人','法律合规负责人','N',0,36,1,'036','法律合规负责人'),(59,'风险管理负责人','风险管理负责人','N',0,37,1,'037','风险管理负责人'),(60,'业务员','业务员','N',0,40,1,'040','业务员'),(61,'运营管理部干事','运营管理部干事','N',0,41,1,'041','运营管理部干事'),(62,'分管合规副总','分管合规副总','N',0,33,1,'033','分管合规副总'),(63,'法律合规审核人','法律合规审核人','N',0,42,1,'042','法律合规审核人'),(64,'分管财务副总','分管财务副总','N',0,32,1,'032','分管财务副总'),(65,'制度汇编人','制度汇编人','Y',0,39,1,'039','制度汇编人'),(66,'图书管理员','图书管理员','Y',52,4,3,'045008004','综合人员/行政/图书管理员'),(67,'运营管理部分管副总','运营管理部分管副总','N',0,35,1,'035','运营管理部分管副总'),(68,'档案管理员','档案管理员','N',52,5,3,'045008005','综合人员/行政/档案管理员'),(69,'风险管理审核人','风险管理审核人','N',0,43,1,'043','风险管理审核人'),(70,'分管风险副总','分管风险副总','N',0,34,1,'034','分管风险副总');
/*!40000 ALTER TABLE `Pf_M_Role` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_Role_11` BEFORE INSERT ON `Pf_M_Role` FOR EACH ROW
BEGIN
    set new.SmallOrd=(select COALESCE(max(SmallOrd),0)+1 from Pf_M_Role where ParentID = new.ParentID);
    
	if new.ParentID=0 then
    	set new.TreeLevel=1;
        set new.BigOrdCode=LPAD(CONCAT(new.SmallOrd,''),3,'0');
        set new.FullName=new.Name;
    else
        select TreeLevel + 1, concat(BigOrdCode,LPAD(concat(new.SmallOrd,''),3,'0')), concat(FullName,'/',new.Name) 
        into @TreeLevel, @BigOrdCode, @FullName 
        from Pf_M_Role where ID = new.ParentID;
        
        set new.TreeLevel=@TreeLevel;
        set new.BigOrdCode=@BigOrdCode;
        set new.FullName=@FullName;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_Role_23` AFTER UPDATE ON `Pf_M_Role` FOR EACH ROW
BEGIN
 	declare vUsrIDs VARCHAR(2000); #更新角色及其子角色的用户成员
 	
 	if new.ParentID!=old.ParentID then
 		select ifnull(group_concat(UsrID),'-') into vUsrIDs from Pf_M_RoleUsr where Pf_IfRole1UnderRole2(RoleID,old.ID)='Y';
 		
 		if vUsrIDs!='-' then
 			#更新角色及其子角色的用户成员如果存在于新的父角色成员中，则删除他们在父角色中的存在
 			delete from Pf_M_RoleUsr where Pf_IfRole1UnderRole2(old.ID,RoleID)='Y' and old.ID!=RoleID and FIND_IN_SET(UsrID,vUsrIDs)>0;
 		end if;
 		
 		#置更新角色及其子角色成员菜单重新生成标志
 		update Pf_M_UsrPwd set MenuRegenTag='Y' where exists(select 1 from Pf_M_RoleUsr where Pf_IfRole1UnderRole2(RoleID,old.ID)='Y' and UsrID=Pf_M_UsrPwd.UsrID);
 	end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Pf_M_RoleFunc`
--

DROP TABLE IF EXISTS `Pf_M_RoleFunc`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_M_RoleFunc` (
  `RoleID` tinyint(3) unsigned NOT NULL,
  `FuncID` smallint(4) unsigned NOT NULL,
  PRIMARY KEY (`RoleID`,`FuncID`),
  KEY `Pf_M_RoleFunc_FK2` (`FuncID`),
  CONSTRAINT `Pf_M_RoleFunc_FK1` FOREIGN KEY (`RoleID`) REFERENCES `Pf_M_Role` (`ID`) ON DELETE CASCADE,
  CONSTRAINT `Pf_M_RoleFunc_FK2` FOREIGN KEY (`FuncID`) REFERENCES `Pf_M_Func` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_M_RoleFunc`
--

LOCK TABLES `Pf_M_RoleFunc` WRITE;
/*!40000 ALTER TABLE `Pf_M_RoleFunc` DISABLE KEYS */;
INSERT INTO `Pf_M_RoleFunc` VALUES (1,13),(2,13),(1,40),(2,40),(1,43),(1,46),(21,70),(22,70),(36,70),(37,70),(55,70);
/*!40000 ALTER TABLE `Pf_M_RoleFunc` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_RoleFunc_21` AFTER INSERT ON `Pf_M_RoleFunc` FOR EACH ROW
BEGIN
	update Pf_M_UsrPwd set MenuRegenTag='Y' where EXISTS(select 1 from Pf_M_RoleUsr where Pf_IfRole1UnderRole2(RoleID,new.RoleID)='Y' and UsrID=Pf_M_UsrPwd.UsrID);
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_RoleFunc_22` AFTER DELETE ON `Pf_M_RoleFunc` FOR EACH ROW
BEGIN
	declare vMenuRegenTag char;
    
    select MenuRegenTag into vMenuRegenTag from Pf_M_Ent;
    if vMenuRegenTag='N' then
    	update Pf_M_UsrPwd set MenuRegenTag='Y' where EXISTS(select 1 from Pf_M_RoleUsr where Pf_IfRole1UnderRole2(RoleID,old.RoleID)='Y' and UsrID=Pf_M_UsrPwd.UsrID);
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Pf_M_RoleUsr`
--

DROP TABLE IF EXISTS `Pf_M_RoleUsr`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_M_RoleUsr` (
  `RoleID` tinyint(3) unsigned NOT NULL,
  `UsrID` smallint(5) unsigned NOT NULL,
  PRIMARY KEY (`RoleID`,`UsrID`),
  KEY `RoleID` (`RoleID`),
  KEY `UsrID` (`UsrID`),
  CONSTRAINT `Pf_M_RoleUsr_FK1` FOREIGN KEY (`RoleID`) REFERENCES `Pf_M_Role` (`ID`) ON DELETE CASCADE,
  CONSTRAINT `Pf_M_RoleUsr_FK2` FOREIGN KEY (`UsrID`) REFERENCES `Pf_M_UsrPwd` (`UsrID`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_M_RoleUsr`
--

LOCK TABLES `Pf_M_RoleUsr` WRITE;
/*!40000 ALTER TABLE `Pf_M_RoleUsr` DISABLE KEYS */;
INSERT INTO `Pf_M_RoleUsr` VALUES (1,14),(2,13),(21,3),(22,11),(26,2),(26,3),(26,4),(26,5),(26,8),(30,11),(36,4),(37,2),(38,9),(42,10),(46,11),(55,16),(57,16),(58,5),(59,6),(60,12),(60,14),(61,14),(62,5),(63,18),(64,3),(65,14),(66,10),(67,7),(68,10),(69,19),(70,6);
/*!40000 ALTER TABLE `Pf_M_RoleUsr` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_RoleUsr_21` AFTER INSERT ON `Pf_M_RoleUsr` FOR EACH ROW
BEGIN
	update Pf_M_UsrPwd set MenuRegenTag='Y' where UsrID=new.UsrID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_RoleUsr_22` AFTER DELETE ON `Pf_M_RoleUsr` FOR EACH ROW
BEGIN
	update Pf_M_UsrPwd set MenuRegenTag='Y' where UsrID=old.UsrID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Pf_M_SplitCntDicTab`
--

DROP TABLE IF EXISTS `Pf_M_SplitCntDicTab`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_M_SplitCntDicTab` (
  `ID` int(10) unsigned NOT NULL,
  `num` int(10) unsigned NOT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE KEY `num` (`num`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_M_SplitCntDicTab`
--

LOCK TABLES `Pf_M_SplitCntDicTab` WRITE;
/*!40000 ALTER TABLE `Pf_M_SplitCntDicTab` DISABLE KEYS */;
INSERT INTO `Pf_M_SplitCntDicTab` VALUES (1,1),(2,2),(3,3),(4,4),(5,5),(6,6),(7,7),(8,8),(9,9),(10,10),(11,11),(12,12),(13,13),(14,14),(15,15),(16,16),(17,17),(18,18),(19,19),(20,20),(21,21),(22,22),(23,23),(24,24),(25,25),(26,26),(27,27),(28,28),(29,29),(30,30),(31,31),(32,32),(33,33),(34,34),(35,35),(36,36),(37,37),(38,38),(39,39),(40,40),(41,41),(42,42),(43,43),(44,44),(45,45),(46,46),(47,47),(48,48),(49,49),(50,50),(51,51),(52,52),(53,53),(54,54),(55,55),(56,56),(57,57),(58,58),(59,59),(60,60),(61,61),(62,62),(63,63),(64,64),(65,65),(66,66),(67,67),(68,68),(69,69),(70,70),(71,71),(72,72),(73,73),(74,74),(75,75),(76,76),(77,77),(78,78),(79,79),(80,80),(81,81),(82,82),(83,83),(84,84),(85,85),(86,86),(87,87),(88,88),(89,89),(90,90),(91,91),(92,92),(93,93),(94,94),(95,95),(96,96),(97,97),(98,98),(99,99),(100,100),(101,101),(102,102),(103,103),(104,104),(105,105),(106,106),(107,107),(108,108),(109,109),(110,110),(111,111),(112,112),(113,113),(114,114),(115,115),(116,116),(117,117),(118,118),(119,119),(120,120),(121,121),(122,122),(123,123),(124,124),(125,125),(126,126),(127,127),(128,128),(129,129),(130,130),(131,131),(132,132),(133,133),(134,134),(135,135),(136,136),(137,137),(138,138),(139,139),(140,140),(141,141),(142,142),(143,143),(144,144),(145,145),(146,146),(147,147),(148,148),(149,149),(150,150),(151,151),(152,152),(153,153),(154,154),(155,155),(156,156),(157,157),(158,158),(159,159),(160,160),(161,161),(162,162),(163,163),(164,164),(165,165),(166,166),(167,167),(168,168),(169,169),(170,170),(171,171),(172,172),(173,173),(174,174),(175,175),(176,176),(177,177),(178,178),(179,179),(180,180),(181,181),(182,182),(183,183),(184,184),(185,185),(186,186),(187,187),(188,188),(189,189),(190,190),(191,191),(192,192),(193,193),(194,194),(195,195),(196,196),(197,197),(198,198),(199,199),(200,200),(201,201),(202,202),(203,203),(204,204),(205,205),(206,206),(207,207),(208,208),(209,209),(210,210),(211,211),(212,212),(213,213),(214,214),(215,215),(216,216),(217,217),(218,218),(219,219),(220,220),(221,221),(222,222),(223,223),(224,224),(225,225),(226,226),(227,227),(228,228),(229,229),(230,230),(231,231),(232,232),(233,233),(234,234),(235,235),(236,236),(237,237),(238,238),(239,239),(240,240),(241,241),(242,242),(243,243),(244,244),(245,245),(246,246),(247,247),(248,248),(249,249),(250,250),(251,251),(252,252),(253,253),(254,254),(255,255),(256,256),(257,257),(258,258),(259,259),(260,260),(261,261),(262,262),(263,263),(264,264),(265,265),(266,266),(267,267),(268,268),(269,269),(270,270),(271,271),(272,272),(273,273),(274,274),(275,275),(276,276),(277,277),(278,278),(279,279),(280,280),(281,281),(282,282),(283,283),(284,284),(285,285),(286,286),(287,287),(288,288),(289,289),(290,290),(291,291),(292,292),(293,293),(294,294),(295,295),(296,296),(297,297),(298,298),(299,299),(300,300),(301,301),(302,302),(303,303),(304,304),(305,305),(306,306),(307,307),(308,308),(309,309),(310,310),(311,311),(312,312),(313,313),(314,314),(315,315),(316,316),(317,317),(318,318),(319,319),(320,320),(321,321),(322,322),(323,323),(324,324),(325,325),(326,326),(327,327),(328,328),(329,329),(330,330),(331,331),(332,332),(333,333),(334,334),(335,335),(336,336),(337,337),(338,338),(339,339),(340,340),(341,341),(342,342),(343,343),(344,344),(345,345),(346,346),(347,347),(348,348),(349,349),(350,350),(351,351),(352,352),(353,353),(354,354),(355,355),(356,356),(357,357),(358,358),(359,359),(360,360),(361,361),(362,362),(363,363),(364,364),(365,365),(366,366),(367,367),(368,368),(369,369),(370,370),(371,371),(372,372),(373,373),(374,374),(375,375),(376,376),(377,377),(378,378),(379,379),(380,380),(381,381),(382,382),(383,383),(384,384),(385,385),(386,386),(387,387),(388,388),(389,389),(390,390),(391,391),(392,392),(393,393),(394,394),(395,395),(396,396),(397,397),(398,398),(399,399),(400,400),(401,401),(402,402),(403,403),(404,404),(405,405),(406,406),(407,407),(408,408),(409,409),(410,410),(411,411),(412,412),(413,413),(414,414),(415,415),(416,416),(417,417),(418,418),(419,419),(420,420),(421,421),(422,422),(423,423),(424,424),(425,425),(426,426),(427,427),(428,428),(429,429),(430,430),(431,431),(432,432),(433,433),(434,434),(435,435),(436,436),(437,437),(438,438),(439,439),(440,440),(441,441),(442,442),(443,443),(444,444),(445,445),(446,446),(447,447),(448,448),(449,449),(450,450),(451,451),(452,452),(453,453),(454,454),(455,455),(456,456),(457,457),(458,458),(459,459),(460,460),(461,461),(462,462),(463,463),(464,464),(465,465),(466,466),(467,467),(468,468),(469,469),(470,470),(471,471),(472,472),(473,473),(474,474),(475,475),(476,476),(477,477),(478,478),(479,479),(480,480),(481,481),(482,482),(483,483),(484,484),(485,485),(486,486),(487,487),(488,488),(489,489),(490,490),(491,491),(492,492),(493,493),(494,494),(495,495),(496,496),(497,497),(498,498),(499,499),(500,500),(501,501),(502,502),(503,503),(504,504),(505,505),(506,506),(507,507),(508,508),(509,509),(510,510),(511,511),(512,512),(513,513),(514,514),(515,515),(516,516),(517,517),(518,518),(519,519),(520,520),(521,521),(522,522),(523,523),(524,524),(525,525),(526,526),(527,527),(528,528),(529,529),(530,530),(531,531),(532,532),(533,533),(534,534),(535,535),(536,536),(537,537),(538,538),(539,539),(540,540),(541,541),(542,542),(543,543),(544,544),(545,545),(546,546),(547,547),(548,548),(549,549),(550,550),(551,551),(552,552),(553,553),(554,554),(555,555),(556,556),(557,557),(558,558),(559,559),(560,560),(561,561),(562,562),(563,563),(564,564),(565,565),(566,566),(567,567),(568,568),(569,569),(570,570),(571,571),(572,572),(573,573),(574,574),(575,575),(576,576),(577,577),(578,578),(579,579),(580,580),(581,581),(582,582),(583,583),(584,584),(585,585),(586,586),(587,587),(588,588),(589,589),(590,590),(591,591),(592,592),(593,593),(594,594),(595,595),(596,596),(597,597),(598,598),(599,599),(600,600),(601,601),(602,602),(603,603),(604,604),(605,605),(606,606),(607,607),(608,608),(609,609),(610,610),(611,611),(612,612),(613,613),(614,614),(615,615),(616,616),(617,617),(618,618),(619,619),(620,620),(621,621),(622,622),(623,623),(624,624),(625,625),(626,626),(627,627),(628,628),(629,629),(630,630),(631,631),(632,632),(633,633),(634,634),(635,635),(636,636),(637,637),(638,638),(639,639),(640,640),(641,641),(642,642),(643,643),(644,644),(645,645),(646,646),(647,647),(648,648),(649,649),(650,650),(651,651),(652,652),(653,653),(654,654),(655,655),(656,656),(657,657),(658,658),(659,659),(660,660),(661,661),(662,662),(663,663),(664,664),(665,665),(666,666),(667,667),(668,668),(669,669),(670,670),(671,671),(672,672),(673,673),(674,674),(675,675),(676,676),(677,677),(678,678),(679,679),(680,680),(681,681),(682,682),(683,683),(684,684),(685,685),(686,686),(687,687),(688,688),(689,689),(690,690),(691,691),(692,692),(693,693),(694,694),(695,695),(696,696),(697,697),(698,698),(699,699),(700,700),(701,701),(702,702),(703,703),(704,704),(705,705),(706,706),(707,707),(708,708),(709,709),(710,710),(711,711),(712,712),(713,713),(714,714),(715,715),(716,716),(717,717),(718,718),(719,719),(720,720),(721,721),(722,722),(723,723),(724,724),(725,725),(726,726),(727,727),(728,728),(729,729),(730,730),(731,731),(732,732),(733,733),(734,734),(735,735),(736,736),(737,737),(738,738),(739,739),(740,740),(741,741),(742,742),(743,743),(744,744),(745,745),(746,746),(747,747),(748,748),(749,749),(750,750),(751,751),(752,752),(753,753),(754,754),(755,755),(756,756),(757,757),(758,758),(759,759),(760,760),(761,761),(762,762),(763,763),(764,764),(765,765),(766,766),(767,767),(768,768),(769,769),(770,770),(771,771),(772,772),(773,773),(774,774),(775,775),(776,776),(777,777),(778,778),(779,779),(780,780),(781,781),(782,782),(783,783),(784,784),(785,785),(786,786),(787,787),(788,788),(789,789),(790,790),(791,791),(792,792),(793,793),(794,794),(795,795),(796,796),(797,797),(798,798),(799,799),(800,800),(801,801),(802,802),(803,803),(804,804),(805,805),(806,806),(807,807),(808,808),(809,809),(810,810),(811,811),(812,812),(813,813),(814,814),(815,815),(816,816),(817,817),(818,818),(819,819),(820,820),(821,821),(822,822),(823,823),(824,824),(825,825),(826,826),(827,827),(828,828),(829,829),(830,830),(831,831),(832,832),(833,833),(834,834),(835,835),(836,836),(837,837),(838,838),(839,839),(840,840),(841,841),(842,842),(843,843),(844,844),(845,845),(846,846),(847,847),(848,848),(849,849),(850,850),(851,851),(852,852),(853,853),(854,854),(855,855),(856,856),(857,857),(858,858),(859,859),(860,860),(861,861),(862,862),(863,863),(864,864),(865,865),(866,866),(867,867),(868,868),(869,869),(870,870),(871,871),(872,872),(873,873),(874,874),(875,875),(876,876),(877,877),(878,878),(879,879),(880,880),(881,881),(882,882),(883,883),(884,884),(885,885),(886,886),(887,887),(888,888),(889,889),(890,890),(891,891),(892,892),(893,893),(894,894),(895,895),(896,896),(897,897),(898,898),(899,899),(900,900),(901,901),(902,902),(903,903),(904,904),(905,905),(906,906),(907,907),(908,908),(909,909),(910,910),(911,911),(912,912),(913,913),(914,914),(915,915),(916,916),(917,917),(918,918),(919,919),(920,920),(921,921),(922,922),(923,923),(924,924),(925,925),(926,926),(927,927),(928,928),(929,929),(930,930),(931,931),(932,932),(933,933),(934,934),(935,935),(936,936),(937,937),(938,938),(939,939),(940,940),(941,941),(942,942),(943,943),(944,944),(945,945),(946,946),(947,947),(948,948),(949,949),(950,950),(951,951),(952,952),(953,953),(954,954),(955,955),(956,956),(957,957),(958,958),(959,959),(960,960),(961,961),(962,962),(963,963),(964,964),(965,965),(966,966),(967,967),(968,968),(969,969),(970,970),(971,971),(972,972),(973,973),(974,974),(975,975),(976,976),(977,977),(978,978),(979,979),(980,980),(981,981),(982,982),(983,983),(984,984),(985,985),(986,986),(987,987),(988,988),(989,989),(990,990),(991,991),(992,992),(993,993),(994,994),(995,995),(996,996),(997,997),(998,998),(999,999);
/*!40000 ALTER TABLE `Pf_M_SplitCntDicTab` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `Pf_M_SubAdmin`
--

DROP TABLE IF EXISTS `Pf_M_SubAdmin`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_M_SubAdmin` (
  `UsrID` smallint(5) unsigned NOT NULL,
  `OrgID` smallint(5) unsigned NOT NULL,
  PRIMARY KEY (`UsrID`,`OrgID`),
  KEY `Pf_M_SubAdmin_FK2` (`OrgID`),
  KEY `UsrID` (`UsrID`),
  CONSTRAINT `Pf_M_SubAdmin_FK1` FOREIGN KEY (`UsrID`) REFERENCES `Pf_M_UsrPwd` (`UsrID`) ON DELETE CASCADE,
  CONSTRAINT `Pf_M_SubAdmin_FK2` FOREIGN KEY (`OrgID`) REFERENCES `Pf_M_Org` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_M_SubAdmin`
--

LOCK TABLES `Pf_M_SubAdmin` WRITE;
/*!40000 ALTER TABLE `Pf_M_SubAdmin` DISABLE KEYS */;
INSERT INTO `Pf_M_SubAdmin` VALUES (13,1);
/*!40000 ALTER TABLE `Pf_M_SubAdmin` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_SubAdmin_11` BEFORE INSERT ON `Pf_M_SubAdmin` FOR EACH ROW
BEGIN
	if Pf_IfUsrRoleMember(new.UsrID,'企业管理员')='Y' THEN
    	call Pf_M_SubAdmin_11_err1(); 
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_SubAdmin_21` AFTER INSERT ON `Pf_M_SubAdmin` FOR EACH ROW
BEGIN
	declare vRoleID tinyint unsigned;
    declare vCnt tinyint unsigned;
    
    select ID into vRoleID from Pf_M_Role where Name='二级管理员';
    select count(*) into vCnt from Pf_M_RoleUsr where RoleID=vRoleID and UsrID=new.UsrID;
    if vCnt=0 then
    	insert into Pf_M_RoleUsr values (vRoleID, new.UsrID);
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_SubAdmin_22` AFTER DELETE ON `Pf_M_SubAdmin` FOR EACH ROW
BEGIN
	declare vRoleID tinyint unsigned;
    declare vCnt tinyint unsigned;
    
    select ID into vRoleID from Pf_M_Role where Name='二级管理员';
    select count(*) into vCnt from Pf_M_SubAdmin where UsrID=old.UsrID;
    if vCnt=0 then
    	delete from Pf_M_RoleUsr where RoleID=vRoleID and UsrID=old.UsrID;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Pf_M_Usr`
--

DROP TABLE IF EXISTS `Pf_M_Usr`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_M_Usr` (
  `ID` smallint(5) unsigned NOT NULL AUTO_INCREMENT,
  `LastUpdate` datetime NOT NULL,
  `IfSysUsr` char(1) NOT NULL DEFAULT 'N',
  `IsValid` char(1) NOT NULL DEFAULT 'Y',
  `cNAME` varchar(10) NOT NULL DEFAULT '',
  `MF` char(1) NOT NULL DEFAULT 'M',
  `JobLevelID` smallint(5) unsigned DEFAULT NULL,
  `AreaID` smallint(5) unsigned DEFAULT NULL,
  `eMail` varchar(100) NOT NULL,
  `Address` varchar(100) DEFAULT NULL,
  `OfficeNumber` varchar(40) DEFAULT NULL,
  `MobileNumber` varchar(40) DEFAULT NULL,
  `JobInfo` varchar(200) DEFAULT NULL,
  `EntryDate` date NOT NULL,
  `WorkLifeBeforeEntry` tinyint(2) unsigned NOT NULL,
  PRIMARY KEY (`ID`),
  KEY `JobLevel` (`JobLevelID`),
  KEY `AreaID` (`AreaID`),
  CONSTRAINT `Pf_M_Usr_FK1` FOREIGN KEY (`JobLevelID`) REFERENCES `Pf_M_EntAppCode` (`ID`),
  CONSTRAINT `Pf_M_Usr_FK2` FOREIGN KEY (`AreaID`) REFERENCES `Pf_M_EntAppCode` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=20 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_M_Usr`
--

LOCK TABLES `Pf_M_Usr` WRITE;
/*!40000 ALTER TABLE `Pf_M_Usr` DISABLE KEYS */;
INSERT INTO `Pf_M_Usr` VALUES (1,'2018-10-07 01:38:13','Y','Y','webmaster','M',NULL,NULL,'webmaster@greenamc.com','内蒙古庆源绿色金融资产管理公司','1','13701323445',NULL,'2018-01-23',1),(2,'2018-10-07 01:38:13','Y','Y','哈斯','M',1,9,'hasi_@greenamc.com','内蒙古呼和浩特赛罕区万通路火车头俱乐部','0471-7777777','13701323445','','2010-07-15',15),(3,'2019-03-23 17:13:28','Y','Y','德力格尔巴图','M',3,9,'deligeerbatu_@greenamc.com','内蒙古呼和浩特赛罕区万通路火车头俱乐部','0471-8888888','13701323445','','2010-07-16',15),(4,'2019-03-23 17:09:01','Y','Y','鞠文利','M',75,9,'juwenli_@greenamc.com','内蒙古呼和浩特赛罕区万通路火车头俱乐部','0471-1234567','13701323445','','2010-07-17',10),(5,'2019-03-23 17:13:48','Y','Y','孙瑞峰','M',3,9,'sunruifeng_@greenamc.com','内蒙古呼和浩特赛罕区万通路火车头俱乐部','0471-1234567','13701323445','','2010-07-18',10),(6,'2019-03-23 17:13:59','Y','Y','郭新忠','M',3,9,'guoxinzhong_@greenamc.com','内蒙古呼和浩特赛罕区万通路火车头俱乐部','0471-1234567','13701323445','','2010-07-19',10),(7,'2019-03-23 17:10:55','Y','Y','张宇','M',3,9,'zhangyu_@greenamc.com','内蒙古呼和浩特赛罕区万通路火车头俱乐部','0471-1234567','13701323445','','2010-07-20',10),(8,'2019-03-23 17:11:10','Y','Y','蔡路','M',3,9,'cailu_@greenamc.com','内蒙古呼和浩特赛罕区万通路火车头俱乐部','0471-1234567','13701323445','','2010-07-21',10),(9,'2018-10-07 01:38:13','Y','Y','项鑫','M',5,9,'xiangxin_@greenamc.com','内蒙古呼和浩特赛罕区万通路火车头俱乐部','0471-1234567','13701323445','','2015-06-04',10),(10,'2018-10-07 01:38:13','Y','Y','付春奇','M',7,9,'fuchunqi_@greenamc.com','内蒙古呼和浩特赛罕区万通路火车头俱乐部','0471-1234567','13701323445','','2015-06-04',10),(11,'2018-10-07 01:38:13','Y','Y','祝慧静','F',7,9,'zhuhuijing_@greenamc.com','内蒙古呼和浩特赛罕区万通路火车头俱乐部','0471-1234567','13701323445','','2015-06-05',10),(12,'2018-10-07 01:38:13','Y','Y','杜斌','F',7,9,'dubin_@greenamc.com','内蒙古呼和浩特赛罕区万通路火车头俱乐部','0471-1234567','13701323445','','2015-06-06',8),(13,'2019-03-23 17:12:08','Y','Y','刘佳妮','F',5,9,'liujiani_@greenamc.com','内蒙古呼和浩特赛罕区万通路火车头俱乐部','0471-1234567','13701323445','','2015-06-06',5),(14,'2018-10-07 01:38:13','Y','Y','杨震','M',5,9,'yangzhen_@greenamc.com','内蒙古呼和浩特赛罕区万通路火车头俱乐部','0471-1234567','13701323445','','2015-06-06',3),(15,'2018-10-07 01:38:13','Y','Y','段海军','M',28,9,'duanhaijun@greenamc.com','','','13701323445','','2018-05-01',1),(16,'2018-10-07 01:38:13','Y','Y','朱佳佳','F',7,9,'zhujiajia@greenamc.com','1','1','13701323445','工资核算','2018-03-05',10),(17,'2018-10-07 01:38:13','Y','Y','祁雅斌','M',28,9,'qiyabin@greenamc.com','1','1','13701323445','司机','2018-03-05',2),(18,'2019-03-23 16:39:28','Y','Y','贾涵森','M',28,9,'jiahansen_@greenamc.com','1','1','13722115826',NULL,'2018-03-23',4),(19,'2019-03-23 17:00:44','Y','Y','包不同','M',28,9,'baobutong_@green.amc.com','1','1','13311132298',NULL,'2018-03-23',5);
/*!40000 ALTER TABLE `Pf_M_Usr` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_Usr_11` BEFORE INSERT ON `Pf_M_Usr` FOR EACH ROW
BEGIN
	set new.LastUpdate=now();
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_Usr_13` BEFORE UPDATE ON `Pf_M_Usr` FOR EACH ROW
BEGIN
	set new.LastUpdate=now();
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_Usr_23` AFTER UPDATE ON `Pf_M_Usr`
  FOR EACH ROW
BEGIN
	if new.IfSysUsr='N' THEN
		delete from Pf_M_UsrMenu where UsrID=old.ID;
		delete from Pf_M_RoleUsr where UsrID=old.ID;
		delete from Pf_M_UsrPwd where UsrID=old.ID;
	end if;
    
	if old.IfSysUsr='Y' and new.IfSysUsr='Y' and old.IsValid!=new.IsValid then
		if new.IsValid='N' THEN
			delete from Pf_M_RoleUsr where UsrID=old.ID;
			delete from Pf_M_UsrMenu where UsrID=old.ID;
		else
			insert into Pf_M_UsrMenu 
			Select new.ID, m.ID, m.DisplayOrd, m.Name, f.ID, f.DisplayOrd, f.Name, f.Rightpopup, Coalesce(f.Url,'developing.jsp'), Coalesce(f.fDesc,f.Name)
			From Pf_M_Func f, Pf_M_Module m
			where f.IsPublic='Y' and f.IsVisible='Y' and f.ModuleID=m.ID;
		end if;
	end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_Usr_22` AFTER DELETE ON `Pf_M_Usr`
  FOR EACH ROW
BEGIN
	update Pf_M_AttachInfo set DelTag='Y' where PrimaryName in ('UsrPhoto','UsrSignature') and PrimaryID=old.ID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Pf_M_UsrMenu`
--

DROP TABLE IF EXISTS `Pf_M_UsrMenu`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_M_UsrMenu` (
  `UsrID` smallint(5) unsigned NOT NULL,
  `ModuleID` tinyint(3) unsigned NOT NULL,
  `ModuleOrd` tinyint(3) unsigned NOT NULL,
  `ModuleName` varchar(20) NOT NULL DEFAULT '',
  `FuncID` smallint(4) unsigned NOT NULL,
  `FuncOrd` tinyint(3) unsigned NOT NULL,
  `FuncName` varchar(20) NOT NULL DEFAULT '',
  `RightPopup` char(1) NOT NULL DEFAULT '',
  `Url` varchar(100) NOT NULL DEFAULT '',
  `fDesc` varchar(100) NOT NULL DEFAULT '',
  PRIMARY KEY (`UsrID`,`FuncID`),
  KEY `UsrID` (`UsrID`),
  CONSTRAINT `Pf_M_UsrMenu_FK1` FOREIGN KEY (`UsrID`) REFERENCES `Pf_M_UsrPwd` (`UsrID`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_M_UsrMenu`
--

LOCK TABLES `Pf_M_UsrMenu` WRITE;
/*!40000 ALTER TABLE `Pf_M_UsrMenu` DISABLE KEYS */;
INSERT INTO `Pf_M_UsrMenu` VALUES (1,1,1,'个人事务',1,1,'待办已办','R','./ToDoSettledPush/MainToDo.jsp','待办已办列表，管理员多个催办'),(1,1,1,'个人事务',2,3,'个人设置','R','./PrivateSetting/DirectLeader/main.jsp','上司设置、首页信息块定制、业务处理常用语、待办提醒定制'),(1,1,1,'个人事务',6,5,'代办委托','R','./ToDoDelegate/ToAuthorize/main.jsp','分业务委托自己的待办事项'),(1,1,1,'个人事务',7,99,'修改口令','P','./PwdModify/PasswordModifyEntry.jsp?type=u','修改口令'),(1,9,3,'通用办公',8,0,'通讯录','R','./AddrList/main.jsp','企业公共通讯录'),(1,9,3,'通用办公',9,1,'常用信息','R','./CommonInfo/index.htm','常用信息：日历、天气、...、网站导航'),(1,3,94,'全文检索',10,1,'全文检索','R','../oa/qwjs_qrylist.action','全城大搜查一定要把李向阳搜出来！'),(1,7,99,'应用设置',17,1,'基础办公设置','R','./Admin1Setting/EntAppCode/main.jsp','企业管理员维护，一般人只读：企业级应用编码维护（地域、条线、岗位级别、部门职务...），企业各地域坐班时间，二级管理员设置，公假时段维护'),(1,9,3,'通用办公',22,4,'信息发布','R','../FileApp/XxFb/ListA/main.jsp','信息发布'),(1,9,3,'通用办公',23,5,'公司文件','R','../FileApp/GsWj/ListA/main.jsp','公司文件'),(1,9,3,'通用办公',25,10,'请示签报','R','../FileApp/QsQb/ListA/main.jsp','请示签报'),(1,9,3,'通用办公',29,12,'请休假','R','../FileApp/Qxj/ListA/main.jsp','请休假'),(1,7,99,'应用设置',42,8,'企业应用设置','R','../FileMaster/ZxSz/XxLm/main.jsp','报销标准（财务维护）、会议场地管理、应用模板设置'),(1,9,3,'通用办公',47,16,'借款申请','R','../FileApp/Jk/entry0.jsp','借款申请'),(1,9,3,'通用办公',48,17,'还款记录','R','../FileApp/Hk/entry0.jsp','借款还款记录'),(1,9,3,'通用办公',49,18,'报销申请','R','../FileApp/BxSq/ListA/main.jsp','报销申请'),(1,14,5,'专项办公',50,1,'立项申请','R','../EntApps/LxSq/entry0.jsp','立项申请'),(1,14,5,'专项办公',51,2,'尽职调查材料审批','R','../EntApps/JzDc/entry0.jsp','尽职调查材料审批'),(1,14,5,'专项办公',52,3,'项目审查','R','../EntApps/XmSc/entry0.jsp','项目审查'),(1,14,5,'专项办公',53,4,'项目审批','R','../EntApps/FaSp/entry0.jsp','项目上会审批'),(1,14,5,'专项办公',54,6,'印章、证照使用审批','R','../EntApps/YzZzSq/entry0.jsp','印章、证照使用审批'),(1,14,5,'专项办公',55,8,'项目付款审批','R','../EntApps/FkSp/entry0.jsp','项目付款审批'),(1,14,5,'专项办公',56,0,'项目管控','R','../EntMasters/XmGk/main.jsp','项目信息展示'),(1,7,99,'应用设置',57,12,'印章客户端','P','./OutLink/SealClient.jsp','电子印章客户端'),(1,9,3,'通用办公',58,15,'预付款审批','R','../EntApps/YfkSp/entry0.jsp','预付款审批'),(1,9,3,'通用办公',59,6,'公司收文','R','../FileApp/GsSw/entry0.jsp','公司收文'),(1,14,5,'专项办公',60,5,'合同审批','R','../EntApps/HtSp/entry0.jsp','合同审批'),(1,9,3,'通用办公',61,2,'制度汇编','R','../EntMasters/ZdHb/entry0.jsp','制度汇编'),(1,9,3,'通用办公',62,9,'督查督办','R','../FileApp/DcDb/entry0.jsp','督查督办'),(1,9,3,'通用办公',63,19,'读书角','R','../FileApp/Dsj/ListA/main.jsp','书目、读书心得'),(1,9,3,'通用办公',64,20,'非业务类合同管理','R','../FileApp/WjHq/entry0.jsp','非业务类合同管理'),(1,15,6,'档案交接借阅',65,1,'档案交接','R','../EntApps/DaJj/entry0.jsp','档案交接'),(1,15,6,'档案交接借阅',66,3,'档案借阅','R','../EntApps/DaJy/entry0.jsp','档案借阅'),(1,14,5,'专项办公',67,5,'合同审查','R','../EntApps/HtSc/entry0.jsp','未正式立项的项目需要签署合同'),(1,9,3,'通用办公',69,8,'考勤评定','R','../FileApp/KqPd/entry0.jsp','系统每日按出勤记录考勤，上司据实修改考勤记录'),(1,1,1,'个人事务',71,7,'个人工资条','R','../FileApp/Gzt/main.jsp','个人工资条查询'),(1,9,3,'通用办公',72,14,'采购申请','R','../EntApps/CgSq/entry0.jsp','采购申请流程'),(2,1,1,'个人事务',1,1,'待办已办','R','./ToDoSettledPush/MainToDo.jsp','待办已办列表，管理员多个催办'),(2,1,1,'个人事务',2,3,'个人设置','R','./PrivateSetting/DirectLeader/main.jsp','上司设置、首页信息块定制、业务处理常用语、待办提醒定制'),(2,1,1,'个人事务',6,5,'代办委托','R','./ToDoDelegate/ToAuthorize/main.jsp','分业务委托自己的待办事项'),(2,1,1,'个人事务',7,99,'修改口令','P','./PwdModify/PasswordModifyEntry.jsp?type=u','修改口令'),(2,9,3,'通用办公',8,0,'通讯录','R','./AddrList/main.jsp','企业公共通讯录'),(2,9,3,'通用办公',9,1,'常用信息','R','./CommonInfo/index.htm','常用信息：日历、天气、...、网站导航'),(2,3,94,'全文检索',10,1,'全文检索','R','../oa/qwjs_qrylist.action','全城大搜查一定要把李向阳搜出来！'),(2,7,99,'应用设置',17,1,'基础办公设置','R','./Admin1Setting/EntAppCode/main.jsp','企业管理员维护，一般人只读：企业级应用编码维护（地域、条线、岗位级别、部门职务...），企业各地域坐班时间，二级管理员设置，公假时段维护'),(2,9,3,'通用办公',22,4,'信息发布','R','../FileApp/XxFb/ListA/main.jsp','信息发布'),(2,9,3,'通用办公',23,5,'公司文件','R','../FileApp/GsWj/ListA/main.jsp','公司文件'),(2,9,3,'通用办公',25,10,'请示签报','R','../FileApp/QsQb/ListA/main.jsp','请示签报'),(2,9,3,'通用办公',29,12,'请休假','R','../FileApp/Qxj/ListA/main.jsp','请休假'),(2,7,99,'应用设置',42,8,'企业应用设置','R','../FileMaster/ZxSz/XxLm/main.jsp','报销标准（财务维护）、会议场地管理、应用模板设置'),(2,9,3,'通用办公',47,16,'借款申请','R','../FileApp/Jk/entry0.jsp','借款申请'),(2,9,3,'通用办公',48,17,'还款记录','R','../FileApp/Hk/entry0.jsp','借款还款记录'),(2,9,3,'通用办公',49,18,'报销申请','R','../FileApp/BxSq/ListA/main.jsp','报销申请'),(2,14,5,'专项办公',50,1,'立项申请','R','../EntApps/LxSq/entry0.jsp','立项申请'),(2,14,5,'专项办公',51,2,'尽职调查材料审批','R','../EntApps/JzDc/entry0.jsp','尽职调查材料审批'),(2,14,5,'专项办公',52,3,'项目审查','R','../EntApps/XmSc/entry0.jsp','项目审查'),(2,14,5,'专项办公',53,4,'项目审批','R','../EntApps/FaSp/entry0.jsp','项目上会审批'),(2,14,5,'专项办公',54,6,'印章、证照使用审批','R','../EntApps/YzZzSq/entry0.jsp','印章、证照使用审批'),(2,14,5,'专项办公',55,8,'项目付款审批','R','../EntApps/FkSp/entry0.jsp','项目付款审批'),(2,14,5,'专项办公',56,0,'项目管控','R','../EntMasters/XmGk/main.jsp','项目信息展示'),(2,7,99,'应用设置',57,12,'印章客户端','P','./OutLink/SealClient.jsp','电子印章客户端'),(2,9,3,'通用办公',58,15,'预付款审批','R','../EntApps/YfkSp/entry0.jsp','预付款审批'),(2,9,3,'通用办公',59,6,'公司收文','R','../FileApp/GsSw/entry0.jsp','公司收文'),(2,14,5,'专项办公',60,5,'合同审批','R','../EntApps/HtSp/entry0.jsp','合同审批'),(2,9,3,'通用办公',61,2,'制度汇编','R','../EntMasters/ZdHb/entry0.jsp','制度汇编'),(2,9,3,'通用办公',62,9,'督查督办','R','../FileApp/DcDb/entry0.jsp','督查督办'),(2,9,3,'通用办公',63,19,'读书角','R','../FileApp/Dsj/ListA/main.jsp','书目、读书心得'),(2,9,3,'通用办公',64,20,'非业务类合同管理','R','../FileApp/WjHq/entry0.jsp','非业务类合同管理'),(2,15,6,'档案交接借阅',65,1,'档案交接','R','../EntApps/DaJj/entry0.jsp','档案交接'),(2,15,6,'档案交接借阅',66,3,'档案借阅','R','../EntApps/DaJy/entry0.jsp','档案借阅'),(2,14,5,'专项办公',67,5,'合同审查','R','../EntApps/HtSc/entry0.jsp','未正式立项的项目需要签署合同'),(2,9,3,'通用办公',69,8,'考勤评定','R','../FileApp/KqPd/entry0.jsp','系统每日按出勤记录考勤，上司据实修改考勤记录'),(2,9,3,'通用办公',70,22,'工资发放','R','../FileApp/GzFf/entry0.jsp','工资发放作业'),(2,1,1,'个人事务',71,7,'个人工资条','R','../FileApp/Gzt/main.jsp','个人工资条查询'),(2,9,3,'通用办公',72,14,'采购申请','R','../EntApps/CgSq/entry0.jsp','采购申请流程'),(3,1,1,'个人事务',1,1,'待办已办','R','./ToDoSettledPush/MainToDo.jsp','待办已办列表，管理员多个催办'),(3,1,1,'个人事务',2,3,'个人设置','R','./PrivateSetting/DirectLeader/main.jsp','上司设置、首页信息块定制、业务处理常用语、待办提醒定制'),(3,1,1,'个人事务',6,5,'代办委托','R','./ToDoDelegate/ToAuthorize/main.jsp','分业务委托自己的待办事项'),(3,1,1,'个人事务',7,99,'修改口令','P','./PwdModify/PasswordModifyEntry.jsp?type=u','修改口令'),(3,9,3,'通用办公',8,0,'通讯录','R','./AddrList/main.jsp','企业公共通讯录'),(3,9,3,'通用办公',9,1,'常用信息','R','./CommonInfo/index.htm','常用信息：日历、天气、...、网站导航'),(3,3,94,'全文检索',10,1,'全文检索','R','../oa/qwjs_qrylist.action','全城大搜查一定要把李向阳搜出来！'),(3,7,99,'应用设置',17,1,'基础办公设置','R','./Admin1Setting/EntAppCode/main.jsp','企业管理员维护，一般人只读：企业级应用编码维护（地域、条线、岗位级别、部门职务...），企业各地域坐班时间，二级管理员设置，公假时段维护'),(3,9,3,'通用办公',22,4,'信息发布','R','../FileApp/XxFb/ListA/main.jsp','信息发布'),(3,9,3,'通用办公',23,5,'公司文件','R','../FileApp/GsWj/ListA/main.jsp','公司文件'),(3,9,3,'通用办公',25,10,'请示签报','R','../FileApp/QsQb/ListA/main.jsp','请示签报'),(3,9,3,'通用办公',29,12,'请休假','R','../FileApp/Qxj/ListA/main.jsp','请休假'),(3,7,99,'应用设置',42,8,'企业应用设置','R','../FileMaster/ZxSz/XxLm/main.jsp','报销标准（财务维护）、会议场地管理、应用模板设置'),(3,9,3,'通用办公',47,16,'借款申请','R','../FileApp/Jk/entry0.jsp','借款申请'),(3,9,3,'通用办公',48,17,'还款记录','R','../FileApp/Hk/entry0.jsp','借款还款记录'),(3,9,3,'通用办公',49,18,'报销申请','R','../FileApp/BxSq/ListA/main.jsp','报销申请'),(3,14,5,'专项办公',50,1,'立项申请','R','../EntApps/LxSq/entry0.jsp','立项申请'),(3,14,5,'专项办公',51,2,'尽职调查材料审批','R','../EntApps/JzDc/entry0.jsp','尽职调查材料审批'),(3,14,5,'专项办公',52,3,'项目审查','R','../EntApps/XmSc/entry0.jsp','项目审查'),(3,14,5,'专项办公',53,4,'项目审批','R','../EntApps/FaSp/entry0.jsp','项目上会审批'),(3,14,5,'专项办公',54,6,'印章、证照使用审批','R','../EntApps/YzZzSq/entry0.jsp','印章、证照使用审批'),(3,14,5,'专项办公',55,8,'项目付款审批','R','../EntApps/FkSp/entry0.jsp','项目付款审批'),(3,14,5,'专项办公',56,0,'项目管控','R','../EntMasters/XmGk/main.jsp','项目信息展示'),(3,7,99,'应用设置',57,12,'印章客户端','P','./OutLink/SealClient.jsp','电子印章客户端'),(3,9,3,'通用办公',58,15,'预付款审批','R','../EntApps/YfkSp/entry0.jsp','预付款审批'),(3,9,3,'通用办公',59,6,'公司收文','R','../FileApp/GsSw/entry0.jsp','公司收文'),(3,14,5,'专项办公',60,5,'合同审批','R','../EntApps/HtSp/entry0.jsp','合同审批'),(3,9,3,'通用办公',61,2,'制度汇编','R','../EntMasters/ZdHb/entry0.jsp','制度汇编'),(3,9,3,'通用办公',62,9,'督查督办','R','../FileApp/DcDb/entry0.jsp','督查督办'),(3,9,3,'通用办公',63,19,'读书角','R','../FileApp/Dsj/ListA/main.jsp','书目、读书心得'),(3,9,3,'通用办公',64,20,'非业务类合同管理','R','../FileApp/WjHq/entry0.jsp','非业务类合同管理'),(3,15,6,'档案交接借阅',65,1,'档案交接','R','../EntApps/DaJj/entry0.jsp','档案交接'),(3,15,6,'档案交接借阅',66,3,'档案借阅','R','../EntApps/DaJy/entry0.jsp','档案借阅'),(3,14,5,'专项办公',67,5,'合同审查','R','../EntApps/HtSc/entry0.jsp','未正式立项的项目需要签署合同'),(3,9,3,'通用办公',69,8,'考勤评定','R','../FileApp/KqPd/entry0.jsp','系统每日按出勤记录考勤，上司据实修改考勤记录'),(3,9,3,'通用办公',70,22,'工资发放','R','../FileApp/GzFf/entry0.jsp','工资发放作业'),(3,1,1,'个人事务',71,7,'个人工资条','R','../FileApp/Gzt/main.jsp','个人工资条查询'),(3,9,3,'通用办公',72,14,'采购申请','R','../EntApps/CgSq/entry0.jsp','采购申请流程'),(4,1,1,'个人事务',1,1,'待办已办','R','./ToDoSettledPush/MainToDo.jsp','待办已办列表，管理员多个催办'),(4,1,1,'个人事务',2,3,'个人设置','R','./PrivateSetting/DirectLeader/main.jsp','上司设置、首页信息块定制、业务处理常用语、待办提醒定制'),(4,1,1,'个人事务',6,5,'代办委托','R','./ToDoDelegate/ToAuthorize/main.jsp','分业务委托自己的待办事项'),(4,1,1,'个人事务',7,99,'修改口令','P','./PwdModify/PasswordModifyEntry.jsp?type=u','修改口令'),(4,9,3,'通用办公',8,0,'通讯录','R','./AddrList/main.jsp','企业公共通讯录'),(4,9,3,'通用办公',9,1,'常用信息','R','./CommonInfo/index.htm','常用信息：日历、天气、...、网站导航'),(4,3,94,'全文检索',10,1,'全文检索','R','../oa/qwjs_qrylist.action','全城大搜查一定要把李向阳搜出来！'),(4,7,99,'应用设置',17,1,'基础办公设置','R','./Admin1Setting/EntAppCode/main.jsp','企业管理员维护，一般人只读：企业级应用编码维护（地域、条线、岗位级别、部门职务...），企业各地域坐班时间，二级管理员设置，公假时段维护'),(4,9,3,'通用办公',22,4,'信息发布','R','../FileApp/XxFb/ListA/main.jsp','信息发布'),(4,9,3,'通用办公',23,5,'公司文件','R','../FileApp/GsWj/ListA/main.jsp','公司文件'),(4,9,3,'通用办公',25,10,'请示签报','R','../FileApp/QsQb/ListA/main.jsp','请示签报'),(4,9,3,'通用办公',29,12,'请休假','R','../FileApp/Qxj/ListA/main.jsp','请休假'),(4,7,99,'应用设置',42,8,'企业应用设置','R','../FileMaster/ZxSz/XxLm/main.jsp','报销标准（财务维护）、会议场地管理、应用模板设置'),(4,9,3,'通用办公',47,16,'借款申请','R','../FileApp/Jk/entry0.jsp','借款申请'),(4,9,3,'通用办公',48,17,'还款记录','R','../FileApp/Hk/entry0.jsp','借款还款记录'),(4,9,3,'通用办公',49,18,'报销申请','R','../FileApp/BxSq/ListA/main.jsp','报销申请'),(4,14,5,'专项办公',50,1,'立项申请','R','../EntApps/LxSq/entry0.jsp','立项申请'),(4,14,5,'专项办公',51,2,'尽职调查材料审批','R','../EntApps/JzDc/entry0.jsp','尽职调查材料审批'),(4,14,5,'专项办公',52,3,'项目审查','R','../EntApps/XmSc/entry0.jsp','项目审查'),(4,14,5,'专项办公',53,4,'项目审批','R','../EntApps/FaSp/entry0.jsp','项目上会审批'),(4,14,5,'专项办公',54,6,'印章、证照使用审批','R','../EntApps/YzZzSq/entry0.jsp','印章、证照使用审批'),(4,14,5,'专项办公',55,8,'项目付款审批','R','../EntApps/FkSp/entry0.jsp','项目付款审批'),(4,14,5,'专项办公',56,0,'项目管控','R','../EntMasters/XmGk/main.jsp','项目信息展示'),(4,7,99,'应用设置',57,12,'印章客户端','P','./OutLink/SealClient.jsp','电子印章客户端'),(4,9,3,'通用办公',58,15,'预付款审批','R','../EntApps/YfkSp/entry0.jsp','预付款审批'),(4,9,3,'通用办公',59,6,'公司收文','R','../FileApp/GsSw/entry0.jsp','公司收文'),(4,14,5,'专项办公',60,5,'合同审批','R','../EntApps/HtSp/entry0.jsp','合同审批'),(4,9,3,'通用办公',61,2,'制度汇编','R','../EntMasters/ZdHb/entry0.jsp','制度汇编'),(4,9,3,'通用办公',62,9,'督查督办','R','../FileApp/DcDb/entry0.jsp','督查督办'),(4,9,3,'通用办公',63,19,'读书角','R','../FileApp/Dsj/ListA/main.jsp','书目、读书心得'),(4,9,3,'通用办公',64,20,'非业务类合同管理','R','../FileApp/WjHq/entry0.jsp','非业务类合同管理'),(4,15,6,'档案交接借阅',65,1,'档案交接','R','../EntApps/DaJj/entry0.jsp','档案交接'),(4,15,6,'档案交接借阅',66,3,'档案借阅','R','../EntApps/DaJy/entry0.jsp','档案借阅'),(4,14,5,'专项办公',67,5,'合同审查','R','../EntApps/HtSc/entry0.jsp','未正式立项的项目需要签署合同'),(4,9,3,'通用办公',69,8,'考勤评定','R','../FileApp/KqPd/entry0.jsp','系统每日按出勤记录考勤，上司据实修改考勤记录'),(4,9,3,'通用办公',70,22,'工资发放','R','../FileApp/GzFf/entry0.jsp','工资发放作业'),(4,1,1,'个人事务',71,7,'个人工资条','R','../FileApp/Gzt/main.jsp','个人工资条查询'),(4,9,3,'通用办公',72,14,'采购申请','R','../EntApps/CgSq/entry0.jsp','采购申请流程'),(5,1,1,'个人事务',1,1,'待办已办','R','./ToDoSettledPush/MainToDo.jsp','待办已办列表，管理员多个催办'),(5,1,1,'个人事务',2,3,'个人设置','R','./PrivateSetting/DirectLeader/main.jsp','上司设置、首页信息块定制、业务处理常用语、待办提醒定制'),(5,1,1,'个人事务',6,5,'代办委托','R','./ToDoDelegate/ToAuthorize/main.jsp','分业务委托自己的待办事项'),(5,1,1,'个人事务',7,99,'修改口令','P','./PwdModify/PasswordModifyEntry.jsp?type=u','修改口令'),(5,9,3,'通用办公',8,0,'通讯录','R','./AddrList/main.jsp','企业公共通讯录'),(5,9,3,'通用办公',9,1,'常用信息','R','./CommonInfo/index.htm','常用信息：日历、天气、...、网站导航'),(5,3,94,'全文检索',10,1,'全文检索','R','../oa/qwjs_qrylist.action','全城大搜查一定要把李向阳搜出来！'),(5,7,99,'应用设置',17,1,'基础办公设置','R','./Admin1Setting/EntAppCode/main.jsp','企业管理员维护，一般人只读：企业级应用编码维护（地域、条线、岗位级别、部门职务...），企业各地域坐班时间，二级管理员设置，公假时段维护'),(5,9,3,'通用办公',22,4,'信息发布','R','../FileApp/XxFb/ListA/main.jsp','信息发布'),(5,9,3,'通用办公',23,5,'公司文件','R','../FileApp/GsWj/ListA/main.jsp','公司文件'),(5,9,3,'通用办公',25,10,'请示签报','R','../FileApp/QsQb/ListA/main.jsp','请示签报'),(5,9,3,'通用办公',29,12,'请休假','R','../FileApp/Qxj/ListA/main.jsp','请休假'),(5,7,99,'应用设置',42,8,'企业应用设置','R','../FileMaster/ZxSz/XxLm/main.jsp','报销标准（财务维护）、会议场地管理、应用模板设置'),(5,9,3,'通用办公',47,16,'借款申请','R','../FileApp/Jk/entry0.jsp','借款申请'),(5,9,3,'通用办公',48,17,'还款记录','R','../FileApp/Hk/entry0.jsp','借款还款记录'),(5,9,3,'通用办公',49,18,'报销申请','R','../FileApp/BxSq/ListA/main.jsp','报销申请'),(5,14,5,'专项办公',50,1,'立项申请','R','../EntApps/LxSq/entry0.jsp','立项申请'),(5,14,5,'专项办公',51,2,'尽职调查材料审批','R','../EntApps/JzDc/entry0.jsp','尽职调查材料审批'),(5,14,5,'专项办公',52,3,'项目审查','R','../EntApps/XmSc/entry0.jsp','项目审查'),(5,14,5,'专项办公',53,4,'项目审批','R','../EntApps/FaSp/entry0.jsp','项目上会审批'),(5,14,5,'专项办公',54,6,'印章、证照使用审批','R','../EntApps/YzZzSq/entry0.jsp','印章、证照使用审批'),(5,14,5,'专项办公',55,8,'项目付款审批','R','../EntApps/FkSp/entry0.jsp','项目付款审批'),(5,14,5,'专项办公',56,0,'项目管控','R','../EntMasters/XmGk/main.jsp','项目信息展示'),(5,7,99,'应用设置',57,12,'印章客户端','P','./OutLink/SealClient.jsp','电子印章客户端'),(5,9,3,'通用办公',58,15,'预付款审批','R','../EntApps/YfkSp/entry0.jsp','预付款审批'),(5,9,3,'通用办公',59,6,'公司收文','R','../FileApp/GsSw/entry0.jsp','公司收文'),(5,14,5,'专项办公',60,5,'合同审批','R','../EntApps/HtSp/entry0.jsp','合同审批'),(5,9,3,'通用办公',61,2,'制度汇编','R','../EntMasters/ZdHb/entry0.jsp','制度汇编'),(5,9,3,'通用办公',62,9,'督查督办','R','../FileApp/DcDb/entry0.jsp','督查督办'),(5,9,3,'通用办公',63,19,'读书角','R','../FileApp/Dsj/ListA/main.jsp','书目、读书心得'),(5,9,3,'通用办公',64,20,'非业务类合同管理','R','../FileApp/WjHq/entry0.jsp','非业务类合同管理'),(5,15,6,'档案交接借阅',65,1,'档案交接','R','../EntApps/DaJj/entry0.jsp','档案交接'),(5,15,6,'档案交接借阅',66,3,'档案借阅','R','../EntApps/DaJy/entry0.jsp','档案借阅'),(5,14,5,'专项办公',67,5,'合同审查','R','../EntApps/HtSc/entry0.jsp','未正式立项的项目需要签署合同'),(5,9,3,'通用办公',69,8,'考勤评定','R','../FileApp/KqPd/entry0.jsp','系统每日按出勤记录考勤，上司据实修改考勤记录'),(5,1,1,'个人事务',71,7,'个人工资条','R','../FileApp/Gzt/main.jsp','个人工资条查询'),(5,9,3,'通用办公',72,14,'采购申请','R','../EntApps/CgSq/entry0.jsp','采购申请流程'),(6,1,1,'个人事务',1,1,'待办已办','R','./ToDoSettledPush/MainToDo.jsp','待办已办列表，管理员多个催办'),(6,1,1,'个人事务',2,3,'个人设置','R','./PrivateSetting/DirectLeader/main.jsp','上司设置、首页信息块定制、业务处理常用语、待办提醒定制'),(6,1,1,'个人事务',6,5,'代办委托','R','./ToDoDelegate/ToAuthorize/main.jsp','分业务委托自己的待办事项'),(6,1,1,'个人事务',7,99,'修改口令','P','./PwdModify/PasswordModifyEntry.jsp?type=u','修改口令'),(6,9,3,'通用办公',8,0,'通讯录','R','./AddrList/main.jsp','企业公共通讯录'),(6,9,3,'通用办公',9,1,'常用信息','R','./CommonInfo/index.htm','常用信息：日历、天气、...、网站导航'),(6,3,94,'全文检索',10,1,'全文检索','R','../oa/qwjs_qrylist.action','全城大搜查一定要把李向阳搜出来！'),(6,7,99,'应用设置',17,1,'基础办公设置','R','./Admin1Setting/EntAppCode/main.jsp','企业管理员维护，一般人只读：企业级应用编码维护（地域、条线、岗位级别、部门职务...），企业各地域坐班时间，二级管理员设置，公假时段维护'),(6,9,3,'通用办公',22,4,'信息发布','R','../FileApp/XxFb/ListA/main.jsp','信息发布'),(6,9,3,'通用办公',23,5,'公司文件','R','../FileApp/GsWj/ListA/main.jsp','公司文件'),(6,9,3,'通用办公',25,10,'请示签报','R','../FileApp/QsQb/ListA/main.jsp','请示签报'),(6,9,3,'通用办公',29,12,'请休假','R','../FileApp/Qxj/ListA/main.jsp','请休假'),(6,7,99,'应用设置',42,8,'企业应用设置','R','../FileMaster/ZxSz/XxLm/main.jsp','报销标准（财务维护）、会议场地管理、应用模板设置'),(6,9,3,'通用办公',47,16,'借款申请','R','../FileApp/Jk/entry0.jsp','借款申请'),(6,9,3,'通用办公',48,17,'还款记录','R','../FileApp/Hk/entry0.jsp','借款还款记录'),(6,9,3,'通用办公',49,18,'报销申请','R','../FileApp/BxSq/ListA/main.jsp','报销申请'),(6,14,5,'专项办公',50,1,'立项申请','R','../EntApps/LxSq/entry0.jsp','立项申请'),(6,14,5,'专项办公',51,2,'尽职调查材料审批','R','../EntApps/JzDc/entry0.jsp','尽职调查材料审批'),(6,14,5,'专项办公',52,3,'项目审查','R','../EntApps/XmSc/entry0.jsp','项目审查'),(6,14,5,'专项办公',53,4,'项目审批','R','../EntApps/FaSp/entry0.jsp','项目上会审批'),(6,14,5,'专项办公',54,6,'印章、证照使用审批','R','../EntApps/YzZzSq/entry0.jsp','印章、证照使用审批'),(6,14,5,'专项办公',55,8,'项目付款审批','R','../EntApps/FkSp/entry0.jsp','项目付款审批'),(6,14,5,'专项办公',56,0,'项目管控','R','../EntMasters/XmGk/main.jsp','项目信息展示'),(6,7,99,'应用设置',57,12,'印章客户端','P','./OutLink/SealClient.jsp','电子印章客户端'),(6,9,3,'通用办公',58,15,'预付款审批','R','../EntApps/YfkSp/entry0.jsp','预付款审批'),(6,9,3,'通用办公',59,6,'公司收文','R','../FileApp/GsSw/entry0.jsp','公司收文'),(6,14,5,'专项办公',60,5,'合同审批','R','../EntApps/HtSp/entry0.jsp','合同审批'),(6,9,3,'通用办公',61,2,'制度汇编','R','../EntMasters/ZdHb/entry0.jsp','制度汇编'),(6,9,3,'通用办公',62,9,'督查督办','R','../FileApp/DcDb/entry0.jsp','督查督办'),(6,9,3,'通用办公',63,19,'读书角','R','../FileApp/Dsj/ListA/main.jsp','书目、读书心得'),(6,9,3,'通用办公',64,20,'非业务类合同管理','R','../FileApp/WjHq/entry0.jsp','非业务类合同管理'),(6,15,6,'档案交接借阅',65,1,'档案交接','R','../EntApps/DaJj/entry0.jsp','档案交接'),(6,15,6,'档案交接借阅',66,3,'档案借阅','R','../EntApps/DaJy/entry0.jsp','档案借阅'),(6,14,5,'专项办公',67,5,'合同审查','R','../EntApps/HtSc/entry0.jsp','未正式立项的项目需要签署合同'),(6,9,3,'通用办公',69,8,'考勤评定','R','../FileApp/KqPd/entry0.jsp','系统每日按出勤记录考勤，上司据实修改考勤记录'),(6,1,1,'个人事务',71,7,'个人工资条','R','../FileApp/Gzt/main.jsp','个人工资条查询'),(6,9,3,'通用办公',72,14,'采购申请','R','../EntApps/CgSq/entry0.jsp','采购申请流程'),(7,1,1,'个人事务',1,1,'待办已办','R','./ToDoSettledPush/MainToDo.jsp','待办已办列表，管理员多个催办'),(7,1,1,'个人事务',2,3,'个人设置','R','./PrivateSetting/DirectLeader/main.jsp','上司设置、首页信息块定制、业务处理常用语、待办提醒定制'),(7,1,1,'个人事务',6,5,'代办委托','R','./ToDoDelegate/ToAuthorize/main.jsp','分业务委托自己的待办事项'),(7,1,1,'个人事务',7,99,'修改口令','P','./PwdModify/PasswordModifyEntry.jsp?type=u','修改口令'),(7,9,3,'通用办公',8,0,'通讯录','R','./AddrList/main.jsp','企业公共通讯录'),(7,9,3,'通用办公',9,1,'常用信息','R','./CommonInfo/index.htm','常用信息：日历、天气、...、网站导航'),(7,3,94,'全文检索',10,1,'全文检索','R','../oa/qwjs_qrylist.action','全城大搜查一定要把李向阳搜出来！'),(7,7,99,'应用设置',17,1,'基础办公设置','R','./Admin1Setting/EntAppCode/main.jsp','企业管理员维护，一般人只读：企业级应用编码维护（地域、条线、岗位级别、部门职务...），企业各地域坐班时间，二级管理员设置，公假时段维护'),(7,9,3,'通用办公',22,4,'信息发布','R','../FileApp/XxFb/ListA/main.jsp','信息发布'),(7,9,3,'通用办公',23,5,'公司文件','R','../FileApp/GsWj/ListA/main.jsp','公司文件'),(7,9,3,'通用办公',25,10,'请示签报','R','../FileApp/QsQb/ListA/main.jsp','请示签报'),(7,9,3,'通用办公',29,12,'请休假','R','../FileApp/Qxj/ListA/main.jsp','请休假'),(7,7,99,'应用设置',42,8,'企业应用设置','R','../FileMaster/ZxSz/XxLm/main.jsp','报销标准（财务维护）、会议场地管理、应用模板设置'),(7,9,3,'通用办公',47,16,'借款申请','R','../FileApp/Jk/entry0.jsp','借款申请'),(7,9,3,'通用办公',48,17,'还款记录','R','../FileApp/Hk/entry0.jsp','借款还款记录'),(7,9,3,'通用办公',49,18,'报销申请','R','../FileApp/BxSq/ListA/main.jsp','报销申请'),(7,14,5,'专项办公',50,1,'立项申请','R','../EntApps/LxSq/entry0.jsp','立项申请'),(7,14,5,'专项办公',51,2,'尽职调查材料审批','R','../EntApps/JzDc/entry0.jsp','尽职调查材料审批'),(7,14,5,'专项办公',52,3,'项目审查','R','../EntApps/XmSc/entry0.jsp','项目审查'),(7,14,5,'专项办公',53,4,'项目审批','R','../EntApps/FaSp/entry0.jsp','项目上会审批'),(7,14,5,'专项办公',54,6,'印章、证照使用审批','R','../EntApps/YzZzSq/entry0.jsp','印章、证照使用审批'),(7,14,5,'专项办公',55,8,'项目付款审批','R','../EntApps/FkSp/entry0.jsp','项目付款审批'),(7,14,5,'专项办公',56,0,'项目管控','R','../EntMasters/XmGk/main.jsp','项目信息展示'),(7,7,99,'应用设置',57,12,'印章客户端','P','./OutLink/SealClient.jsp','电子印章客户端'),(7,9,3,'通用办公',58,15,'预付款审批','R','../EntApps/YfkSp/entry0.jsp','预付款审批'),(7,9,3,'通用办公',59,6,'公司收文','R','../FileApp/GsSw/entry0.jsp','公司收文'),(7,14,5,'专项办公',60,5,'合同审批','R','../EntApps/HtSp/entry0.jsp','合同审批'),(7,9,3,'通用办公',61,2,'制度汇编','R','../EntMasters/ZdHb/entry0.jsp','制度汇编'),(7,9,3,'通用办公',62,9,'督查督办','R','../FileApp/DcDb/entry0.jsp','督查督办'),(7,9,3,'通用办公',63,19,'读书角','R','../FileApp/Dsj/ListA/main.jsp','书目、读书心得'),(7,9,3,'通用办公',64,20,'非业务类合同管理','R','../FileApp/WjHq/entry0.jsp','非业务类合同管理'),(7,15,6,'档案交接借阅',65,1,'档案交接','R','../EntApps/DaJj/entry0.jsp','档案交接'),(7,15,6,'档案交接借阅',66,3,'档案借阅','R','../EntApps/DaJy/entry0.jsp','档案借阅'),(7,14,5,'专项办公',67,5,'合同审查','R','../EntApps/HtSc/entry0.jsp','未正式立项的项目需要签署合同'),(7,9,3,'通用办公',69,8,'考勤评定','R','../FileApp/KqPd/entry0.jsp','系统每日按出勤记录考勤，上司据实修改考勤记录'),(7,1,1,'个人事务',71,7,'个人工资条','R','../FileApp/Gzt/main.jsp','个人工资条查询'),(7,9,3,'通用办公',72,14,'采购申请','R','../EntApps/CgSq/entry0.jsp','采购申请流程'),(8,1,1,'个人事务',1,1,'待办已办','R','./ToDoSettledPush/MainToDo.jsp','待办已办列表，管理员多个催办'),(8,1,1,'个人事务',2,3,'个人设置','R','./PrivateSetting/DirectLeader/main.jsp','上司设置、首页信息块定制、业务处理常用语、待办提醒定制'),(8,1,1,'个人事务',6,5,'代办委托','R','./ToDoDelegate/ToAuthorize/main.jsp','分业务委托自己的待办事项'),(8,1,1,'个人事务',7,99,'修改口令','P','./PwdModify/PasswordModifyEntry.jsp?type=u','修改口令'),(8,9,3,'通用办公',8,0,'通讯录','R','./AddrList/main.jsp','企业公共通讯录'),(8,9,3,'通用办公',9,1,'常用信息','R','./CommonInfo/index.htm','常用信息：日历、天气、...、网站导航'),(8,3,94,'全文检索',10,1,'全文检索','R','../oa/qwjs_qrylist.action','全城大搜查一定要把李向阳搜出来！'),(8,7,99,'应用设置',17,1,'基础办公设置','R','./Admin1Setting/EntAppCode/main.jsp','企业管理员维护，一般人只读：企业级应用编码维护（地域、条线、岗位级别、部门职务...），企业各地域坐班时间，二级管理员设置，公假时段维护'),(8,9,3,'通用办公',22,4,'信息发布','R','../FileApp/XxFb/ListA/main.jsp','信息发布'),(8,9,3,'通用办公',23,5,'公司文件','R','../FileApp/GsWj/ListA/main.jsp','公司文件'),(8,9,3,'通用办公',25,10,'请示签报','R','../FileApp/QsQb/ListA/main.jsp','请示签报'),(8,9,3,'通用办公',29,12,'请休假','R','../FileApp/Qxj/ListA/main.jsp','请休假'),(8,7,99,'应用设置',42,8,'企业应用设置','R','../FileMaster/ZxSz/XxLm/main.jsp','报销标准（财务维护）、会议场地管理、应用模板设置'),(8,9,3,'通用办公',47,16,'借款申请','R','../FileApp/Jk/entry0.jsp','借款申请'),(8,9,3,'通用办公',48,17,'还款记录','R','../FileApp/Hk/entry0.jsp','借款还款记录'),(8,9,3,'通用办公',49,18,'报销申请','R','../FileApp/BxSq/ListA/main.jsp','报销申请'),(8,14,5,'专项办公',50,1,'立项申请','R','../EntApps/LxSq/entry0.jsp','立项申请'),(8,14,5,'专项办公',51,2,'尽职调查材料审批','R','../EntApps/JzDc/entry0.jsp','尽职调查材料审批'),(8,14,5,'专项办公',52,3,'项目审查','R','../EntApps/XmSc/entry0.jsp','项目审查'),(8,14,5,'专项办公',53,4,'项目审批','R','../EntApps/FaSp/entry0.jsp','项目上会审批'),(8,14,5,'专项办公',54,6,'印章、证照使用审批','R','../EntApps/YzZzSq/entry0.jsp','印章、证照使用审批'),(8,14,5,'专项办公',55,8,'项目付款审批','R','../EntApps/FkSp/entry0.jsp','项目付款审批'),(8,14,5,'专项办公',56,0,'项目管控','R','../EntMasters/XmGk/main.jsp','项目信息展示'),(8,7,99,'应用设置',57,12,'印章客户端','P','./OutLink/SealClient.jsp','电子印章客户端'),(8,9,3,'通用办公',58,15,'预付款审批','R','../EntApps/YfkSp/entry0.jsp','预付款审批'),(8,9,3,'通用办公',59,6,'公司收文','R','../FileApp/GsSw/entry0.jsp','公司收文'),(8,14,5,'专项办公',60,5,'合同审批','R','../EntApps/HtSp/entry0.jsp','合同审批'),(8,9,3,'通用办公',61,2,'制度汇编','R','../EntMasters/ZdHb/entry0.jsp','制度汇编'),(8,9,3,'通用办公',62,9,'督查督办','R','../FileApp/DcDb/entry0.jsp','督查督办'),(8,9,3,'通用办公',63,19,'读书角','R','../FileApp/Dsj/ListA/main.jsp','书目、读书心得'),(8,9,3,'通用办公',64,20,'非业务类合同管理','R','../FileApp/WjHq/entry0.jsp','非业务类合同管理'),(8,15,6,'档案交接借阅',65,1,'档案交接','R','../EntApps/DaJj/entry0.jsp','档案交接'),(8,15,6,'档案交接借阅',66,3,'档案借阅','R','../EntApps/DaJy/entry0.jsp','档案借阅'),(8,14,5,'专项办公',67,5,'合同审查','R','../EntApps/HtSc/entry0.jsp','未正式立项的项目需要签署合同'),(8,9,3,'通用办公',69,8,'考勤评定','R','../FileApp/KqPd/entry0.jsp','系统每日按出勤记录考勤，上司据实修改考勤记录'),(8,1,1,'个人事务',71,7,'个人工资条','R','../FileApp/Gzt/main.jsp','个人工资条查询'),(8,9,3,'通用办公',72,14,'采购申请','R','../EntApps/CgSq/entry0.jsp','采购申请流程'),(9,1,1,'个人事务',1,1,'待办已办','R','./ToDoSettledPush/MainToDo.jsp','待办已办列表，管理员多个催办'),(9,1,1,'个人事务',2,3,'个人设置','R','./PrivateSetting/DirectLeader/main.jsp','上司设置、首页信息块定制、业务处理常用语、待办提醒定制'),(9,1,1,'个人事务',6,5,'代办委托','R','./ToDoDelegate/ToAuthorize/main.jsp','分业务委托自己的待办事项'),(9,1,1,'个人事务',7,99,'修改口令','P','./PwdModify/PasswordModifyEntry.jsp?type=u','修改口令'),(9,9,3,'通用办公',8,0,'通讯录','R','./AddrList/main.jsp','企业公共通讯录'),(9,9,3,'通用办公',9,1,'常用信息','R','./CommonInfo/index.htm','常用信息：日历、天气、...、网站导航'),(9,3,94,'全文检索',10,1,'全文检索','R','../oa/qwjs_qrylist.action','全城大搜查一定要把李向阳搜出来！'),(9,7,99,'应用设置',17,1,'基础办公设置','R','./Admin1Setting/EntAppCode/main.jsp','企业管理员维护，一般人只读：企业级应用编码维护（地域、条线、岗位级别、部门职务...），企业各地域坐班时间，二级管理员设置，公假时段维护'),(9,9,3,'通用办公',22,4,'信息发布','R','../FileApp/XxFb/ListA/main.jsp','信息发布'),(9,9,3,'通用办公',23,5,'公司文件','R','../FileApp/GsWj/ListA/main.jsp','公司文件'),(9,9,3,'通用办公',25,10,'请示签报','R','../FileApp/QsQb/ListA/main.jsp','请示签报'),(9,9,3,'通用办公',29,12,'请休假','R','../FileApp/Qxj/ListA/main.jsp','请休假'),(9,7,99,'应用设置',42,8,'企业应用设置','R','../FileMaster/ZxSz/XxLm/main.jsp','报销标准（财务维护）、会议场地管理、应用模板设置'),(9,9,3,'通用办公',47,16,'借款申请','R','../FileApp/Jk/entry0.jsp','借款申请'),(9,9,3,'通用办公',48,17,'还款记录','R','../FileApp/Hk/entry0.jsp','借款还款记录'),(9,9,3,'通用办公',49,18,'报销申请','R','../FileApp/BxSq/ListA/main.jsp','报销申请'),(9,14,5,'专项办公',50,1,'立项申请','R','../EntApps/LxSq/entry0.jsp','立项申请'),(9,14,5,'专项办公',51,2,'尽职调查材料审批','R','../EntApps/JzDc/entry0.jsp','尽职调查材料审批'),(9,14,5,'专项办公',52,3,'项目审查','R','../EntApps/XmSc/entry0.jsp','项目审查'),(9,14,5,'专项办公',53,4,'项目审批','R','../EntApps/FaSp/entry0.jsp','项目上会审批'),(9,14,5,'专项办公',54,6,'印章、证照使用审批','R','../EntApps/YzZzSq/entry0.jsp','印章、证照使用审批'),(9,14,5,'专项办公',55,8,'项目付款审批','R','../EntApps/FkSp/entry0.jsp','项目付款审批'),(9,14,5,'专项办公',56,0,'项目管控','R','../EntMasters/XmGk/main.jsp','项目信息展示'),(9,7,99,'应用设置',57,12,'印章客户端','P','./OutLink/SealClient.jsp','电子印章客户端'),(9,9,3,'通用办公',58,15,'预付款审批','R','../EntApps/YfkSp/entry0.jsp','预付款审批'),(9,9,3,'通用办公',59,6,'公司收文','R','../FileApp/GsSw/entry0.jsp','公司收文'),(9,14,5,'专项办公',60,5,'合同审批','R','../EntApps/HtSp/entry0.jsp','合同审批'),(9,9,3,'通用办公',61,2,'制度汇编','R','../EntMasters/ZdHb/entry0.jsp','制度汇编'),(9,9,3,'通用办公',62,9,'督查督办','R','../FileApp/DcDb/entry0.jsp','督查督办'),(9,9,3,'通用办公',63,19,'读书角','R','../FileApp/Dsj/ListA/main.jsp','书目、读书心得'),(9,9,3,'通用办公',64,20,'非业务类合同管理','R','../FileApp/WjHq/entry0.jsp','非业务类合同管理'),(9,15,6,'档案交接借阅',65,1,'档案交接','R','../EntApps/DaJj/entry0.jsp','档案交接'),(9,15,6,'档案交接借阅',66,3,'档案借阅','R','../EntApps/DaJy/entry0.jsp','档案借阅'),(9,14,5,'专项办公',67,5,'合同审查','R','../EntApps/HtSc/entry0.jsp','未正式立项的项目需要签署合同'),(9,9,3,'通用办公',69,8,'考勤评定','R','../FileApp/KqPd/entry0.jsp','系统每日按出勤记录考勤，上司据实修改考勤记录'),(9,1,1,'个人事务',71,7,'个人工资条','R','../FileApp/Gzt/main.jsp','个人工资条查询'),(9,9,3,'通用办公',72,14,'采购申请','R','../EntApps/CgSq/entry0.jsp','采购申请流程'),(10,1,1,'个人事务',1,1,'待办已办','R','./ToDoSettledPush/MainToDo.jsp','待办已办列表，管理员多个催办'),(10,1,1,'个人事务',2,3,'个人设置','R','./PrivateSetting/DirectLeader/main.jsp','上司设置、首页信息块定制、业务处理常用语、待办提醒定制'),(10,1,1,'个人事务',6,5,'代办委托','R','./ToDoDelegate/ToAuthorize/main.jsp','分业务委托自己的待办事项'),(10,1,1,'个人事务',7,99,'修改口令','P','./PwdModify/PasswordModifyEntry.jsp?type=u','修改口令'),(10,9,3,'通用办公',8,0,'通讯录','R','./AddrList/main.jsp','企业公共通讯录'),(10,9,3,'通用办公',9,1,'常用信息','R','./CommonInfo/index.htm','常用信息：日历、天气、...、网站导航'),(10,3,94,'全文检索',10,1,'全文检索','R','../oa/qwjs_qrylist.action','全城大搜查一定要把李向阳搜出来！'),(10,7,99,'应用设置',17,1,'基础办公设置','R','./Admin1Setting/EntAppCode/main.jsp','企业管理员维护，一般人只读：企业级应用编码维护（地域、条线、岗位级别、部门职务...），企业各地域坐班时间，二级管理员设置，公假时段维护'),(10,9,3,'通用办公',22,4,'信息发布','R','../FileApp/XxFb/ListA/main.jsp','信息发布'),(10,9,3,'通用办公',23,5,'公司文件','R','../FileApp/GsWj/ListA/main.jsp','公司文件'),(10,9,3,'通用办公',25,10,'请示签报','R','../FileApp/QsQb/ListA/main.jsp','请示签报'),(10,9,3,'通用办公',29,12,'请休假','R','../FileApp/Qxj/ListA/main.jsp','请休假'),(10,7,99,'应用设置',42,8,'企业应用设置','R','../FileMaster/ZxSz/XxLm/main.jsp','报销标准（财务维护）、会议场地管理、应用模板设置'),(10,9,3,'通用办公',47,16,'借款申请','R','../FileApp/Jk/entry0.jsp','借款申请'),(10,9,3,'通用办公',48,17,'还款记录','R','../FileApp/Hk/entry0.jsp','借款还款记录'),(10,9,3,'通用办公',49,18,'报销申请','R','../FileApp/BxSq/ListA/main.jsp','报销申请'),(10,14,5,'专项办公',50,1,'立项申请','R','../EntApps/LxSq/entry0.jsp','立项申请'),(10,14,5,'专项办公',51,2,'尽职调查材料审批','R','../EntApps/JzDc/entry0.jsp','尽职调查材料审批'),(10,14,5,'专项办公',52,3,'项目审查','R','../EntApps/XmSc/entry0.jsp','项目审查'),(10,14,5,'专项办公',53,4,'项目审批','R','../EntApps/FaSp/entry0.jsp','项目上会审批'),(10,14,5,'专项办公',54,6,'印章、证照使用审批','R','../EntApps/YzZzSq/entry0.jsp','印章、证照使用审批'),(10,14,5,'专项办公',55,8,'项目付款审批','R','../EntApps/FkSp/entry0.jsp','项目付款审批'),(10,14,5,'专项办公',56,0,'项目管控','R','../EntMasters/XmGk/main.jsp','项目信息展示'),(10,7,99,'应用设置',57,12,'印章客户端','P','./OutLink/SealClient.jsp','电子印章客户端'),(10,9,3,'通用办公',58,15,'预付款审批','R','../EntApps/YfkSp/entry0.jsp','预付款审批'),(10,9,3,'通用办公',59,6,'公司收文','R','../FileApp/GsSw/entry0.jsp','公司收文'),(10,14,5,'专项办公',60,5,'合同审批','R','../EntApps/HtSp/entry0.jsp','合同审批'),(10,9,3,'通用办公',61,2,'制度汇编','R','../EntMasters/ZdHb/entry0.jsp','制度汇编'),(10,9,3,'通用办公',62,9,'督查督办','R','../FileApp/DcDb/entry0.jsp','督查督办'),(10,9,3,'通用办公',63,19,'读书角','R','../FileApp/Dsj/ListA/main.jsp','书目、读书心得'),(10,9,3,'通用办公',64,20,'非业务类合同管理','R','../FileApp/WjHq/entry0.jsp','非业务类合同管理'),(10,15,6,'档案交接借阅',65,1,'档案交接','R','../EntApps/DaJj/entry0.jsp','档案交接'),(10,15,6,'档案交接借阅',66,3,'档案借阅','R','../EntApps/DaJy/entry0.jsp','档案借阅'),(10,14,5,'专项办公',67,5,'合同审查','R','../EntApps/HtSc/entry0.jsp','未正式立项的项目需要签署合同'),(10,9,3,'通用办公',69,8,'考勤评定','R','../FileApp/KqPd/entry0.jsp','系统每日按出勤记录考勤，上司据实修改考勤记录'),(10,1,1,'个人事务',71,7,'个人工资条','R','../FileApp/Gzt/main.jsp','个人工资条查询'),(10,9,3,'通用办公',72,14,'采购申请','R','../EntApps/CgSq/entry0.jsp','采购申请流程'),(11,1,1,'个人事务',1,1,'待办已办','R','./ToDoSettledPush/MainToDo.jsp','待办已办列表，管理员多个催办'),(11,1,1,'个人事务',2,3,'个人设置','R','./PrivateSetting/DirectLeader/main.jsp','上司设置、首页信息块定制、业务处理常用语、待办提醒定制'),(11,1,1,'个人事务',6,5,'代办委托','R','./ToDoDelegate/ToAuthorize/main.jsp','分业务委托自己的待办事项'),(11,1,1,'个人事务',7,99,'修改口令','P','./PwdModify/PasswordModifyEntry.jsp?type=u','修改口令'),(11,9,3,'通用办公',8,0,'通讯录','R','./AddrList/main.jsp','企业公共通讯录'),(11,9,3,'通用办公',9,1,'常用信息','R','./CommonInfo/index.htm','常用信息：日历、天气、...、网站导航'),(11,3,94,'全文检索',10,1,'全文检索','R','../oa/qwjs_qrylist.action','全城大搜查一定要把李向阳搜出来！'),(11,7,99,'应用设置',17,1,'基础办公设置','R','./Admin1Setting/EntAppCode/main.jsp','企业管理员维护，一般人只读：企业级应用编码维护（地域、条线、岗位级别、部门职务...），企业各地域坐班时间，二级管理员设置，公假时段维护'),(11,9,3,'通用办公',22,4,'信息发布','R','../FileApp/XxFb/ListA/main.jsp','信息发布'),(11,9,3,'通用办公',23,5,'公司文件','R','../FileApp/GsWj/ListA/main.jsp','公司文件'),(11,9,3,'通用办公',25,10,'请示签报','R','../FileApp/QsQb/ListA/main.jsp','请示签报'),(11,9,3,'通用办公',29,12,'请休假','R','../FileApp/Qxj/ListA/main.jsp','请休假'),(11,7,99,'应用设置',42,8,'企业应用设置','R','../FileMaster/ZxSz/XxLm/main.jsp','报销标准（财务维护）、会议场地管理、应用模板设置'),(11,9,3,'通用办公',47,16,'借款申请','R','../FileApp/Jk/entry0.jsp','借款申请'),(11,9,3,'通用办公',48,17,'还款记录','R','../FileApp/Hk/entry0.jsp','借款还款记录'),(11,9,3,'通用办公',49,18,'报销申请','R','../FileApp/BxSq/ListA/main.jsp','报销申请'),(11,14,5,'专项办公',50,1,'立项申请','R','../EntApps/LxSq/entry0.jsp','立项申请'),(11,14,5,'专项办公',51,2,'尽职调查材料审批','R','../EntApps/JzDc/entry0.jsp','尽职调查材料审批'),(11,14,5,'专项办公',52,3,'项目审查','R','../EntApps/XmSc/entry0.jsp','项目审查'),(11,14,5,'专项办公',53,4,'项目审批','R','../EntApps/FaSp/entry0.jsp','项目上会审批'),(11,14,5,'专项办公',54,6,'印章、证照使用审批','R','../EntApps/YzZzSq/entry0.jsp','印章、证照使用审批'),(11,14,5,'专项办公',55,8,'项目付款审批','R','../EntApps/FkSp/entry0.jsp','项目付款审批'),(11,14,5,'专项办公',56,0,'项目管控','R','../EntMasters/XmGk/main.jsp','项目信息展示'),(11,7,99,'应用设置',57,12,'印章客户端','P','./OutLink/SealClient.jsp','电子印章客户端'),(11,9,3,'通用办公',58,15,'预付款审批','R','../EntApps/YfkSp/entry0.jsp','预付款审批'),(11,9,3,'通用办公',59,6,'公司收文','R','../FileApp/GsSw/entry0.jsp','公司收文'),(11,14,5,'专项办公',60,5,'合同审批','R','../EntApps/HtSp/entry0.jsp','合同审批'),(11,9,3,'通用办公',61,2,'制度汇编','R','../EntMasters/ZdHb/entry0.jsp','制度汇编'),(11,9,3,'通用办公',62,9,'督查督办','R','../FileApp/DcDb/entry0.jsp','督查督办'),(11,9,3,'通用办公',63,19,'读书角','R','../FileApp/Dsj/ListA/main.jsp','书目、读书心得'),(11,9,3,'通用办公',64,20,'非业务类合同管理','R','../FileApp/WjHq/entry0.jsp','非业务类合同管理'),(11,15,6,'档案交接借阅',65,1,'档案交接','R','../EntApps/DaJj/entry0.jsp','档案交接'),(11,15,6,'档案交接借阅',66,3,'档案借阅','R','../EntApps/DaJy/entry0.jsp','档案借阅'),(11,14,5,'专项办公',67,5,'合同审查','R','../EntApps/HtSc/entry0.jsp','未正式立项的项目需要签署合同'),(11,9,3,'通用办公',69,8,'考勤评定','R','../FileApp/KqPd/entry0.jsp','系统每日按出勤记录考勤，上司据实修改考勤记录'),(11,9,3,'通用办公',70,22,'工资发放','R','../FileApp/GzFf/entry0.jsp','工资发放作业'),(11,1,1,'个人事务',71,7,'个人工资条','R','../FileApp/Gzt/main.jsp','个人工资条查询'),(11,9,3,'通用办公',72,14,'采购申请','R','../EntApps/CgSq/entry0.jsp','采购申请流程'),(12,1,1,'个人事务',1,1,'待办已办','R','./ToDoSettledPush/MainToDo.jsp','待办已办列表，管理员多个催办'),(12,1,1,'个人事务',2,3,'个人设置','R','./PrivateSetting/DirectLeader/main.jsp','上司设置、首页信息块定制、业务处理常用语、待办提醒定制'),(12,1,1,'个人事务',6,5,'代办委托','R','./ToDoDelegate/ToAuthorize/main.jsp','分业务委托自己的待办事项'),(12,1,1,'个人事务',7,99,'修改口令','P','./PwdModify/PasswordModifyEntry.jsp?type=u','修改口令'),(12,9,3,'通用办公',8,0,'通讯录','R','./AddrList/main.jsp','企业公共通讯录'),(12,9,3,'通用办公',9,1,'常用信息','R','./CommonInfo/index.htm','常用信息：日历、天气、...、网站导航'),(12,3,94,'全文检索',10,1,'全文检索','R','../oa/qwjs_qrylist.action','全城大搜查一定要把李向阳搜出来！'),(12,7,99,'应用设置',17,1,'基础办公设置','R','./Admin1Setting/EntAppCode/main.jsp','企业管理员维护，一般人只读：企业级应用编码维护（地域、条线、岗位级别、部门职务...），企业各地域坐班时间，二级管理员设置，公假时段维护'),(12,9,3,'通用办公',22,4,'信息发布','R','../FileApp/XxFb/ListA/main.jsp','信息发布'),(12,9,3,'通用办公',23,5,'公司文件','R','../FileApp/GsWj/ListA/main.jsp','公司文件'),(12,9,3,'通用办公',25,10,'请示签报','R','../FileApp/QsQb/ListA/main.jsp','请示签报'),(12,9,3,'通用办公',29,12,'请休假','R','../FileApp/Qxj/ListA/main.jsp','请休假'),(12,7,99,'应用设置',42,8,'企业应用设置','R','../FileMaster/ZxSz/XxLm/main.jsp','报销标准（财务维护）、会议场地管理、应用模板设置'),(12,9,3,'通用办公',47,16,'借款申请','R','../FileApp/Jk/entry0.jsp','借款申请'),(12,9,3,'通用办公',48,17,'还款记录','R','../FileApp/Hk/entry0.jsp','借款还款记录'),(12,9,3,'通用办公',49,18,'报销申请','R','../FileApp/BxSq/ListA/main.jsp','报销申请'),(12,14,5,'专项办公',50,1,'立项申请','R','../EntApps/LxSq/entry0.jsp','立项申请'),(12,14,5,'专项办公',51,2,'尽职调查材料审批','R','../EntApps/JzDc/entry0.jsp','尽职调查材料审批'),(12,14,5,'专项办公',52,3,'项目审查','R','../EntApps/XmSc/entry0.jsp','项目审查'),(12,14,5,'专项办公',53,4,'项目审批','R','../EntApps/FaSp/entry0.jsp','项目上会审批'),(12,14,5,'专项办公',54,6,'印章、证照使用审批','R','../EntApps/YzZzSq/entry0.jsp','印章、证照使用审批'),(12,14,5,'专项办公',55,8,'项目付款审批','R','../EntApps/FkSp/entry0.jsp','项目付款审批'),(12,14,5,'专项办公',56,0,'项目管控','R','../EntMasters/XmGk/main.jsp','项目信息展示'),(12,7,99,'应用设置',57,12,'印章客户端','P','./OutLink/SealClient.jsp','电子印章客户端'),(12,9,3,'通用办公',58,15,'预付款审批','R','../EntApps/YfkSp/entry0.jsp','预付款审批'),(12,9,3,'通用办公',59,6,'公司收文','R','../FileApp/GsSw/entry0.jsp','公司收文'),(12,14,5,'专项办公',60,5,'合同审批','R','../EntApps/HtSp/entry0.jsp','合同审批'),(12,9,3,'通用办公',61,2,'制度汇编','R','../EntMasters/ZdHb/entry0.jsp','制度汇编'),(12,9,3,'通用办公',62,9,'督查督办','R','../FileApp/DcDb/entry0.jsp','督查督办'),(12,9,3,'通用办公',63,19,'读书角','R','../FileApp/Dsj/ListA/main.jsp','书目、读书心得'),(12,9,3,'通用办公',64,20,'非业务类合同管理','R','../FileApp/WjHq/entry0.jsp','非业务类合同管理'),(12,15,6,'档案交接借阅',65,1,'档案交接','R','../EntApps/DaJj/entry0.jsp','档案交接'),(12,15,6,'档案交接借阅',66,3,'档案借阅','R','../EntApps/DaJy/entry0.jsp','档案借阅'),(12,14,5,'专项办公',67,5,'合同审查','R','../EntApps/HtSc/entry0.jsp','未正式立项的项目需要签署合同'),(12,9,3,'通用办公',69,8,'考勤评定','R','../FileApp/KqPd/entry0.jsp','系统每日按出勤记录考勤，上司据实修改考勤记录'),(12,1,1,'个人事务',71,7,'个人工资条','R','../FileApp/Gzt/main.jsp','个人工资条查询'),(12,9,3,'通用办公',72,14,'采购申请','R','../EntApps/CgSq/entry0.jsp','采购申请流程'),(13,1,1,'个人事务',1,1,'待办已办','R','./ToDoSettledPush/MainToDo.jsp','待办已办列表，管理员多个催办'),(13,1,1,'个人事务',2,3,'个人设置','R','./PrivateSetting/DirectLeader/main.jsp','上司设置、首页信息块定制、业务处理常用语、待办提醒定制'),(13,1,1,'个人事务',6,5,'代办委托','R','./ToDoDelegate/ToAuthorize/main.jsp','分业务委托自己的待办事项'),(13,1,1,'个人事务',7,99,'修改口令','P','./PwdModify/PasswordModifyEntry.jsp?type=u','修改口令'),(13,9,3,'通用办公',8,0,'通讯录','R','./AddrList/main.jsp','企业公共通讯录'),(13,9,3,'通用办公',9,1,'常用信息','R','./CommonInfo/index.htm','常用信息：日历、天气、...、网站导航'),(13,3,94,'全文检索',10,1,'全文检索','R','../oa/qwjs_qrylist.action','全城大搜查一定要把李向阳搜出来！'),(13,5,100,'组织机构',13,1,'组织机构','R','./Admin12Maintain/org/main.jsp','部门维护、部门分管领导设置；用户维护、用户地域/条线分管设置；角色成员维护'),(13,7,99,'应用设置',17,1,'基础办公设置','R','./Admin1Setting/EntAppCode/main.jsp','企业管理员维护，一般人只读：企业级应用编码维护（地域、条线、岗位级别、部门职务...），企业各地域坐班时间，二级管理员设置，公假时段维护'),(13,9,3,'通用办公',22,4,'信息发布','R','../FileApp/XxFb/ListA/main.jsp','信息发布'),(13,9,3,'通用办公',23,5,'公司文件','R','../FileApp/GsWj/ListA/main.jsp','公司文件'),(13,9,3,'通用办公',25,10,'请示签报','R','../FileApp/QsQb/ListA/main.jsp','请示签报'),(13,9,3,'通用办公',29,12,'请休假','R','../FileApp/Qxj/ListA/main.jsp','请休假'),(13,7,99,'应用设置',40,9,'公文编号与模板设置','R','../FileMaster/GsWj/BhYs/main.jsp','公司文件编号样式、模板设置、编号与模板使用部门设置'),(13,7,99,'应用设置',42,8,'企业应用设置','R','../FileMaster/ZxSz/XxLm/main.jsp','报销标准（财务维护）、会议场地管理、应用模板设置'),(13,9,3,'通用办公',47,16,'借款申请','R','../FileApp/Jk/entry0.jsp','借款申请'),(13,9,3,'通用办公',48,17,'还款记录','R','../FileApp/Hk/entry0.jsp','借款还款记录'),(13,9,3,'通用办公',49,18,'报销申请','R','../FileApp/BxSq/ListA/main.jsp','报销申请'),(13,14,5,'专项办公',50,1,'立项申请','R','../EntApps/LxSq/entry0.jsp','立项申请'),(13,14,5,'专项办公',51,2,'尽职调查材料审批','R','../EntApps/JzDc/entry0.jsp','尽职调查材料审批'),(13,14,5,'专项办公',52,3,'项目审查','R','../EntApps/XmSc/entry0.jsp','项目审查'),(13,14,5,'专项办公',53,4,'项目审批','R','../EntApps/FaSp/entry0.jsp','项目上会审批'),(13,14,5,'专项办公',54,6,'印章、证照使用审批','R','../EntApps/YzZzSq/entry0.jsp','印章、证照使用审批'),(13,14,5,'专项办公',55,8,'项目付款审批','R','../EntApps/FkSp/entry0.jsp','项目付款审批'),(13,14,5,'专项办公',56,0,'项目管控','R','../EntMasters/XmGk/main.jsp','项目信息展示'),(13,7,99,'应用设置',57,12,'印章客户端','P','./OutLink/SealClient.jsp','电子印章客户端'),(13,9,3,'通用办公',58,15,'预付款审批','R','../EntApps/YfkSp/entry0.jsp','预付款审批'),(13,9,3,'通用办公',59,6,'公司收文','R','../FileApp/GsSw/entry0.jsp','公司收文'),(13,14,5,'专项办公',60,5,'合同审批','R','../EntApps/HtSp/entry0.jsp','合同审批'),(13,9,3,'通用办公',61,2,'制度汇编','R','../EntMasters/ZdHb/entry0.jsp','制度汇编'),(13,9,3,'通用办公',62,9,'督查督办','R','../FileApp/DcDb/entry0.jsp','督查督办'),(13,9,3,'通用办公',63,19,'读书角','R','../FileApp/Dsj/ListA/main.jsp','书目、读书心得'),(13,9,3,'通用办公',64,20,'非业务类合同管理','R','../FileApp/WjHq/entry0.jsp','非业务类合同管理'),(13,15,6,'档案交接借阅',65,1,'档案交接','R','../EntApps/DaJj/entry0.jsp','档案交接'),(13,15,6,'档案交接借阅',66,3,'档案借阅','R','../EntApps/DaJy/entry0.jsp','档案借阅'),(13,14,5,'专项办公',67,5,'合同审查','R','../EntApps/HtSc/entry0.jsp','未正式立项的项目需要签署合同'),(13,9,3,'通用办公',69,8,'考勤评定','R','../FileApp/KqPd/entry0.jsp','系统每日按出勤记录考勤，上司据实修改考勤记录'),(13,1,1,'个人事务',71,7,'个人工资条','R','../FileApp/Gzt/main.jsp','个人工资条查询'),(13,9,3,'通用办公',72,14,'采购申请','R','../EntApps/CgSq/entry0.jsp','采购申请流程'),(14,1,1,'个人事务',1,1,'待办已办','R','./ToDoSettledPush/MainToDo.jsp','待办已办列表，管理员多个催办'),(14,1,1,'个人事务',2,3,'个人设置','R','./PrivateSetting/DirectLeader/main.jsp','上司设置、首页信息块定制、业务处理常用语、待办提醒定制'),(14,1,1,'个人事务',6,5,'代办委托','R','./ToDoDelegate/ToAuthorize/main.jsp','分业务委托自己的待办事项'),(14,1,1,'个人事务',7,99,'修改口令','P','./PwdModify/PasswordModifyEntry.jsp?type=u','修改口令'),(14,9,3,'通用办公',8,0,'通讯录','R','./AddrList/main.jsp','企业公共通讯录'),(14,9,3,'通用办公',9,1,'常用信息','R','./CommonInfo/index.htm','常用信息：日历、天气、...、网站导航'),(14,3,94,'全文检索',10,1,'全文检索','R','../oa/qwjs_qrylist.action','全城大搜查一定要把李向阳搜出来！'),(14,5,100,'组织机构',13,1,'组织机构','R','./Admin12Maintain/org/main.jsp','部门维护、部门分管领导设置；用户维护、用户地域/条线分管设置；角色成员维护'),(14,7,99,'应用设置',17,1,'基础办公设置','R','./Admin1Setting/EntAppCode/main.jsp','企业管理员维护，一般人只读：企业级应用编码维护（地域、条线、岗位级别、部门职务...），企业各地域坐班时间，二级管理员设置，公假时段维护'),(14,9,3,'通用办公',22,4,'信息发布','R','../FileApp/XxFb/ListA/main.jsp','信息发布'),(14,9,3,'通用办公',23,5,'公司文件','R','../FileApp/GsWj/ListA/main.jsp','公司文件'),(14,9,3,'通用办公',25,10,'请示签报','R','../FileApp/QsQb/ListA/main.jsp','请示签报'),(14,9,3,'通用办公',29,12,'请休假','R','../FileApp/Qxj/ListA/main.jsp','请休假'),(14,7,99,'应用设置',40,9,'公文编号与模板设置','R','../FileMaster/GsWj/BhYs/main.jsp','公司文件编号样式、模板设置、编号与模板使用部门设置'),(14,7,99,'应用设置',42,8,'企业应用设置','R','../FileMaster/ZxSz/XxLm/main.jsp','报销标准（财务维护）、会议场地管理、应用模板设置'),(14,7,99,'应用设置',43,11,'印章管理','P','./OutLink/SealAdmin.jsp','电子印章管理'),(14,13,98,'业务审计',46,1,'业务删除备忘','R','../FileApp/DelBizLog/main.jsp','业务删除备忘列表、备忘修正'),(14,9,3,'通用办公',47,16,'借款申请','R','../FileApp/Jk/entry0.jsp','借款申请'),(14,9,3,'通用办公',48,17,'还款记录','R','../FileApp/Hk/entry0.jsp','借款还款记录'),(14,9,3,'通用办公',49,18,'报销申请','R','../FileApp/BxSq/ListA/main.jsp','报销申请'),(14,14,5,'专项办公',50,1,'立项申请','R','../EntApps/LxSq/entry0.jsp','立项申请'),(14,14,5,'专项办公',51,2,'尽职调查材料审批','R','../EntApps/JzDc/entry0.jsp','尽职调查材料审批'),(14,14,5,'专项办公',52,3,'项目审查','R','../EntApps/XmSc/entry0.jsp','项目审查'),(14,14,5,'专项办公',53,4,'项目审批','R','../EntApps/FaSp/entry0.jsp','项目上会审批'),(14,14,5,'专项办公',54,6,'印章、证照使用审批','R','../EntApps/YzZzSq/entry0.jsp','印章、证照使用审批'),(14,14,5,'专项办公',55,8,'项目付款审批','R','../EntApps/FkSp/entry0.jsp','项目付款审批'),(14,14,5,'专项办公',56,0,'项目管控','R','../EntMasters/XmGk/main.jsp','项目信息展示'),(14,7,99,'应用设置',57,12,'印章客户端','P','./OutLink/SealClient.jsp','电子印章客户端'),(14,9,3,'通用办公',58,15,'预付款审批','R','../EntApps/YfkSp/entry0.jsp','预付款审批'),(14,9,3,'通用办公',59,6,'公司收文','R','../FileApp/GsSw/entry0.jsp','公司收文'),(14,14,5,'专项办公',60,5,'合同审批','R','../EntApps/HtSp/entry0.jsp','合同审批'),(14,9,3,'通用办公',61,2,'制度汇编','R','../EntMasters/ZdHb/entry0.jsp','制度汇编'),(14,9,3,'通用办公',62,9,'督查督办','R','../FileApp/DcDb/entry0.jsp','督查督办'),(14,9,3,'通用办公',63,19,'读书角','R','../FileApp/Dsj/ListA/main.jsp','书目、读书心得'),(14,9,3,'通用办公',64,20,'非业务类合同管理','R','../FileApp/WjHq/entry0.jsp','非业务类合同管理'),(14,15,6,'档案交接借阅',65,1,'档案交接','R','../EntApps/DaJj/entry0.jsp','档案交接'),(14,15,6,'档案交接借阅',66,3,'档案借阅','R','../EntApps/DaJy/entry0.jsp','档案借阅'),(14,14,5,'专项办公',67,5,'合同审查','R','../EntApps/HtSc/entry0.jsp','未正式立项的项目需要签署合同'),(14,9,3,'通用办公',69,8,'考勤评定','R','../FileApp/KqPd/entry0.jsp','系统每日按出勤记录考勤，上司据实修改考勤记录'),(14,1,1,'个人事务',71,7,'个人工资条','R','../FileApp/Gzt/main.jsp','个人工资条查询'),(14,9,3,'通用办公',72,14,'采购申请','R','../EntApps/CgSq/entry0.jsp','采购申请流程'),(15,1,1,'个人事务',1,1,'待办已办','R','./ToDoSettledPush/MainToDo.jsp','待办已办列表，管理员多个催办'),(15,1,1,'个人事务',2,3,'个人设置','R','./PrivateSetting/DirectLeader/main.jsp','上司设置、首页信息块定制、业务处理常用语、待办提醒定制'),(15,1,1,'个人事务',6,5,'代办委托','R','./ToDoDelegate/ToAuthorize/main.jsp','分业务委托自己的待办事项'),(15,1,1,'个人事务',7,99,'修改口令','P','./PwdModify/PasswordModifyEntry.jsp?type=u','修改口令'),(15,9,3,'通用办公',8,0,'通讯录','R','./AddrList/main.jsp','企业公共通讯录'),(15,9,3,'通用办公',9,1,'常用信息','R','./CommonInfo/index.htm','常用信息：日历、天气、...、网站导航'),(15,3,94,'全文检索',10,1,'全文检索','R','../oa/qwjs_qrylist.action','全城大搜查一定要把李向阳搜出来！'),(15,7,99,'应用设置',17,1,'基础办公设置','R','./Admin1Setting/EntAppCode/main.jsp','企业管理员维护，一般人只读：企业级应用编码维护（地域、条线、岗位级别、部门职务...），企业各地域坐班时间，二级管理员设置，公假时段维护'),(15,9,3,'通用办公',22,4,'信息发布','R','../FileApp/XxFb/ListA/main.jsp','信息发布'),(15,9,3,'通用办公',23,5,'公司文件','R','../FileApp/GsWj/ListA/main.jsp','公司文件'),(15,9,3,'通用办公',25,10,'请示签报','R','../FileApp/QsQb/ListA/main.jsp','请示签报'),(15,9,3,'通用办公',29,12,'请休假','R','../FileApp/Qxj/ListA/main.jsp','请休假'),(15,7,99,'应用设置',42,8,'企业应用设置','R','../FileMaster/ZxSz/XxLm/main.jsp','报销标准（财务维护）、会议场地管理、应用模板设置'),(15,9,3,'通用办公',47,16,'借款申请','R','../FileApp/Jk/entry0.jsp','借款申请'),(15,9,3,'通用办公',48,17,'还款记录','R','../FileApp/Hk/entry0.jsp','借款还款记录'),(15,9,3,'通用办公',49,18,'报销申请','R','../FileApp/BxSq/ListA/main.jsp','报销申请'),(15,14,5,'专项办公',50,1,'立项申请','R','../EntApps/LxSq/entry0.jsp','立项申请'),(15,14,5,'专项办公',51,2,'尽职调查材料审批','R','../EntApps/JzDc/entry0.jsp','尽职调查材料审批'),(15,14,5,'专项办公',52,3,'项目审查','R','../EntApps/XmSc/entry0.jsp','项目审查'),(15,14,5,'专项办公',53,4,'项目审批','R','../EntApps/FaSp/entry0.jsp','项目上会审批'),(15,14,5,'专项办公',54,6,'印章、证照使用审批','R','../EntApps/YzZzSq/entry0.jsp','印章、证照使用审批'),(15,14,5,'专项办公',55,8,'项目付款审批','R','../EntApps/FkSp/entry0.jsp','项目付款审批'),(15,14,5,'专项办公',56,0,'项目管控','R','../EntMasters/XmGk/main.jsp','项目信息展示'),(15,7,99,'应用设置',57,12,'印章客户端','P','./OutLink/SealClient.jsp','电子印章客户端'),(15,9,3,'通用办公',58,15,'预付款审批','R','../EntApps/YfkSp/entry0.jsp','预付款审批'),(15,9,3,'通用办公',59,6,'公司收文','R','../FileApp/GsSw/entry0.jsp','公司收文'),(15,14,5,'专项办公',60,5,'合同审批','R','../EntApps/HtSp/entry0.jsp','合同审批'),(15,9,3,'通用办公',61,2,'制度汇编','R','../EntMasters/ZdHb/entry0.jsp','制度汇编'),(15,9,3,'通用办公',62,9,'督查督办','R','../FileApp/DcDb/entry0.jsp','督查督办'),(15,9,3,'通用办公',63,19,'读书角','R','../FileApp/Dsj/ListA/main.jsp','书目、读书心得'),(15,9,3,'通用办公',64,20,'非业务类合同管理','R','../FileApp/WjHq/entry0.jsp','非业务类合同管理'),(15,15,6,'档案交接借阅',65,1,'档案交接','R','../EntApps/DaJj/entry0.jsp','档案交接'),(15,15,6,'档案交接借阅',66,3,'档案借阅','R','../EntApps/DaJy/entry0.jsp','档案借阅'),(15,14,5,'专项办公',67,5,'合同审查','R','../EntApps/HtSc/entry0.jsp','未正式立项的项目需要签署合同'),(15,9,3,'通用办公',69,8,'考勤评定','R','../FileApp/KqPd/entry0.jsp','系统每日按出勤记录考勤，上司据实修改考勤记录'),(15,1,1,'个人事务',71,7,'个人工资条','R','../FileApp/Gzt/main.jsp','个人工资条查询'),(15,9,3,'通用办公',72,14,'采购申请','R','../EntApps/CgSq/entry0.jsp','采购申请流程'),(16,1,1,'个人事务',1,1,'待办已办','R','./ToDoSettledPush/MainToDo.jsp','待办已办列表，管理员多个催办'),(16,1,1,'个人事务',2,3,'个人设置','R','./PrivateSetting/DirectLeader/main.jsp','上司设置、首页信息块定制、业务处理常用语、待办提醒定制'),(16,1,1,'个人事务',6,5,'代办委托','R','./ToDoDelegate/ToAuthorize/main.jsp','分业务委托自己的待办事项'),(16,1,1,'个人事务',7,99,'修改口令','P','./PwdModify/PasswordModifyEntry.jsp?type=u','修改口令'),(16,9,3,'通用办公',8,0,'通讯录','R','./AddrList/main.jsp','企业公共通讯录'),(16,9,3,'通用办公',9,1,'常用信息','R','./CommonInfo/index.htm','常用信息：日历、天气、...、网站导航'),(16,3,94,'全文检索',10,1,'全文检索','R','../oa/qwjs_qrylist.action','全城大搜查一定要把李向阳搜出来！'),(16,7,99,'应用设置',17,1,'基础办公设置','R','./Admin1Setting/EntAppCode/main.jsp','企业管理员维护，一般人只读：企业级应用编码维护（地域、条线、岗位级别、部门职务...），企业各地域坐班时间，二级管理员设置，公假时段维护'),(16,9,3,'通用办公',22,4,'信息发布','R','../FileApp/XxFb/ListA/main.jsp','信息发布'),(16,9,3,'通用办公',23,5,'公司文件','R','../FileApp/GsWj/ListA/main.jsp','公司文件'),(16,9,3,'通用办公',25,10,'请示签报','R','../FileApp/QsQb/ListA/main.jsp','请示签报'),(16,9,3,'通用办公',29,12,'请休假','R','../FileApp/Qxj/ListA/main.jsp','请休假'),(16,7,99,'应用设置',42,8,'企业应用设置','R','../FileMaster/ZxSz/XxLm/main.jsp','报销标准（财务维护）、会议场地管理、应用模板设置'),(16,9,3,'通用办公',47,16,'借款申请','R','../FileApp/Jk/entry0.jsp','借款申请'),(16,9,3,'通用办公',48,17,'还款记录','R','../FileApp/Hk/entry0.jsp','借款还款记录'),(16,9,3,'通用办公',49,18,'报销申请','R','../FileApp/BxSq/ListA/main.jsp','报销申请'),(16,14,5,'专项办公',50,1,'立项申请','R','../EntApps/LxSq/entry0.jsp','立项申请'),(16,14,5,'专项办公',51,2,'尽职调查材料审批','R','../EntApps/JzDc/entry0.jsp','尽职调查材料审批'),(16,14,5,'专项办公',52,3,'项目审查','R','../EntApps/XmSc/entry0.jsp','项目审查'),(16,14,5,'专项办公',53,4,'项目审批','R','../EntApps/FaSp/entry0.jsp','项目上会审批'),(16,14,5,'专项办公',54,6,'印章、证照使用审批','R','../EntApps/YzZzSq/entry0.jsp','印章、证照使用审批'),(16,14,5,'专项办公',55,8,'项目付款审批','R','../EntApps/FkSp/entry0.jsp','项目付款审批'),(16,14,5,'专项办公',56,0,'项目管控','R','../EntMasters/XmGk/main.jsp','项目信息展示'),(16,7,99,'应用设置',57,12,'印章客户端','P','./OutLink/SealClient.jsp','电子印章客户端'),(16,9,3,'通用办公',58,15,'预付款审批','R','../EntApps/YfkSp/entry0.jsp','预付款审批'),(16,9,3,'通用办公',59,6,'公司收文','R','../FileApp/GsSw/entry0.jsp','公司收文'),(16,14,5,'专项办公',60,5,'合同审批','R','../EntApps/HtSp/entry0.jsp','合同审批'),(16,9,3,'通用办公',61,2,'制度汇编','R','../EntMasters/ZdHb/entry0.jsp','制度汇编'),(16,9,3,'通用办公',62,9,'督查督办','R','../FileApp/DcDb/entry0.jsp','督查督办'),(16,9,3,'通用办公',63,19,'读书角','R','../FileApp/Dsj/ListA/main.jsp','书目、读书心得'),(16,9,3,'通用办公',64,20,'非业务类合同管理','R','../FileApp/WjHq/entry0.jsp','非业务类合同管理'),(16,15,6,'档案交接借阅',65,1,'档案交接','R','../EntApps/DaJj/entry0.jsp','档案交接'),(16,15,6,'档案交接借阅',66,3,'档案借阅','R','../EntApps/DaJy/entry0.jsp','档案借阅'),(16,14,5,'专项办公',67,5,'合同审查','R','../EntApps/HtSc/entry0.jsp','未正式立项的项目需要签署合同'),(16,9,3,'通用办公',69,8,'考勤评定','R','../FileApp/KqPd/entry0.jsp','系统每日按出勤记录考勤，上司据实修改考勤记录'),(16,9,3,'通用办公',70,22,'工资发放','R','../FileApp/GzFf/entry0.jsp','工资发放作业'),(16,1,1,'个人事务',71,7,'个人工资条','R','../FileApp/Gzt/main.jsp','个人工资条查询'),(16,9,3,'通用办公',72,14,'采购申请','R','../EntApps/CgSq/entry0.jsp','采购申请流程'),(17,1,1,'个人事务',1,1,'待办已办','R','./ToDoSettledPush/MainToDo.jsp','待办已办列表，管理员多个催办'),(17,1,1,'个人事务',2,3,'个人设置','R','./PrivateSetting/DirectLeader/main.jsp','上司设置、首页信息块定制、业务处理常用语、待办提醒定制'),(17,1,1,'个人事务',6,5,'代办委托','R','./ToDoDelegate/ToAuthorize/main.jsp','分业务委托自己的待办事项'),(17,1,1,'个人事务',7,99,'修改口令','P','./PwdModify/PasswordModifyEntry.jsp?type=u','修改口令'),(17,9,3,'通用办公',8,0,'通讯录','R','./AddrList/main.jsp','企业公共通讯录'),(17,9,3,'通用办公',9,1,'常用信息','R','./CommonInfo/index.htm','常用信息：日历、天气、...、网站导航'),(17,3,94,'全文检索',10,1,'全文检索','R','../oa/qwjs_qrylist.action','全城大搜查一定要把李向阳搜出来！'),(17,7,99,'应用设置',17,1,'基础办公设置','R','./Admin1Setting/EntAppCode/main.jsp','企业管理员维护，一般人只读：企业级应用编码维护（地域、条线、岗位级别、部门职务...），企业各地域坐班时间，二级管理员设置，公假时段维护'),(17,9,3,'通用办公',22,4,'信息发布','R','../FileApp/XxFb/ListA/main.jsp','信息发布'),(17,9,3,'通用办公',23,5,'公司文件','R','../FileApp/GsWj/ListA/main.jsp','公司文件'),(17,9,3,'通用办公',25,10,'请示签报','R','../FileApp/QsQb/ListA/main.jsp','请示签报'),(17,9,3,'通用办公',29,12,'请休假','R','../FileApp/Qxj/ListA/main.jsp','请休假'),(17,7,99,'应用设置',42,8,'企业应用设置','R','../FileMaster/ZxSz/XxLm/main.jsp','报销标准（财务维护）、会议场地管理、应用模板设置'),(17,9,3,'通用办公',47,16,'借款申请','R','../FileApp/Jk/entry0.jsp','借款申请'),(17,9,3,'通用办公',48,17,'还款记录','R','../FileApp/Hk/entry0.jsp','借款还款记录'),(17,9,3,'通用办公',49,18,'报销申请','R','../FileApp/BxSq/ListA/main.jsp','报销申请'),(17,14,5,'专项办公',50,1,'立项申请','R','../EntApps/LxSq/entry0.jsp','立项申请'),(17,14,5,'专项办公',51,2,'尽职调查材料审批','R','../EntApps/JzDc/entry0.jsp','尽职调查材料审批'),(17,14,5,'专项办公',52,3,'项目审查','R','../EntApps/XmSc/entry0.jsp','项目审查'),(17,14,5,'专项办公',53,4,'项目审批','R','../EntApps/FaSp/entry0.jsp','项目上会审批'),(17,14,5,'专项办公',54,6,'印章、证照使用审批','R','../EntApps/YzZzSq/entry0.jsp','印章、证照使用审批'),(17,14,5,'专项办公',55,8,'项目付款审批','R','../EntApps/FkSp/entry0.jsp','项目付款审批'),(17,14,5,'专项办公',56,0,'项目管控','R','../EntMasters/XmGk/main.jsp','项目信息展示'),(17,7,99,'应用设置',57,12,'印章客户端','P','./OutLink/SealClient.jsp','电子印章客户端'),(17,9,3,'通用办公',58,15,'预付款审批','R','../EntApps/YfkSp/entry0.jsp','预付款审批'),(17,9,3,'通用办公',59,6,'公司收文','R','../FileApp/GsSw/entry0.jsp','公司收文'),(17,14,5,'专项办公',60,5,'合同审批','R','../EntApps/HtSp/entry0.jsp','合同审批'),(17,9,3,'通用办公',61,2,'制度汇编','R','../EntMasters/ZdHb/entry0.jsp','制度汇编'),(17,9,3,'通用办公',62,9,'督查督办','R','../FileApp/DcDb/entry0.jsp','督查督办'),(17,9,3,'通用办公',63,19,'读书角','R','../FileApp/Dsj/ListA/main.jsp','书目、读书心得'),(17,9,3,'通用办公',64,20,'非业务类合同管理','R','../FileApp/WjHq/entry0.jsp','非业务类合同管理'),(17,15,6,'档案交接借阅',65,1,'档案交接','R','../EntApps/DaJj/entry0.jsp','档案交接'),(17,15,6,'档案交接借阅',66,3,'档案借阅','R','../EntApps/DaJy/entry0.jsp','档案借阅'),(17,14,5,'专项办公',67,5,'合同审查','R','../EntApps/HtSc/entry0.jsp','未正式立项的项目需要签署合同'),(17,9,3,'通用办公',69,8,'考勤评定','R','../FileApp/KqPd/entry0.jsp','系统每日按出勤记录考勤，上司据实修改考勤记录'),(17,1,1,'个人事务',71,7,'个人工资条','R','../FileApp/Gzt/main.jsp','个人工资条查询'),(17,9,3,'通用办公',72,14,'采购申请','R','../EntApps/CgSq/entry0.jsp','采购申请流程'),(18,1,1,'个人事务',1,1,'待办已办','R','./ToDoSettledPush/MainToDo.jsp','待办已办列表，管理员多个催办'),(18,1,1,'个人事务',2,3,'个人设置','R','./PrivateSetting/DirectLeader/main.jsp','上司设置、首页信息块定制、业务处理常用语、待办提醒定制'),(18,1,1,'个人事务',6,5,'代办委托','R','./ToDoDelegate/ToAuthorize/main.jsp','分业务委托自己的待办事项'),(18,1,1,'个人事务',7,99,'修改口令','P','./PwdModify/PasswordModifyEntry.jsp?type=u','修改口令'),(18,9,3,'通用办公',8,0,'通讯录','R','./AddrList/main.jsp','企业公共通讯录'),(18,9,3,'通用办公',9,1,'常用信息','R','./CommonInfo/index.htm','常用信息：日历、天气、...、网站导航'),(18,3,94,'全文检索',10,1,'全文检索','R','../oa/qwjs_qrylist.action','全城大搜查一定要把李向阳搜出来！'),(18,7,99,'应用设置',17,1,'基础办公设置','R','./Admin1Setting/EntAppCode/main.jsp','企业管理员维护，一般人只读：企业级应用编码维护（地域、条线、岗位级别、部门职务...），企业各地域坐班时间，二级管理员设置，公假时段维护'),(18,9,3,'通用办公',22,4,'信息发布','R','../FileApp/XxFb/ListA/main.jsp','信息发布'),(18,9,3,'通用办公',23,5,'公司文件','R','../FileApp/GsWj/ListA/main.jsp','公司文件'),(18,9,3,'通用办公',25,10,'请示签报','R','../FileApp/QsQb/ListA/main.jsp','请示签报'),(18,9,3,'通用办公',29,12,'请休假','R','../FileApp/Qxj/ListA/main.jsp','请休假'),(18,7,99,'应用设置',42,8,'企业应用设置','R','../FileMaster/ZxSz/XxLm/main.jsp','报销标准（财务维护）、会议场地管理、应用模板设置'),(18,9,3,'通用办公',47,16,'借款申请','R','../FileApp/Jk/entry0.jsp','借款申请'),(18,9,3,'通用办公',48,17,'还款记录','R','../FileApp/Hk/entry0.jsp','借款还款记录'),(18,9,3,'通用办公',49,18,'报销申请','R','../FileApp/BxSq/ListA/main.jsp','报销申请'),(18,14,5,'专项办公',50,1,'立项申请','R','../EntApps/LxSq/entry0.jsp','立项申请'),(18,14,5,'专项办公',51,2,'尽职调查材料审批','R','../EntApps/JzDc/entry0.jsp','尽职调查材料审批'),(18,14,5,'专项办公',52,3,'项目审查','R','../EntApps/XmSc/entry0.jsp','项目审查'),(18,14,5,'专项办公',53,4,'项目审批','R','../EntApps/FaSp/entry0.jsp','项目上会审批'),(18,14,5,'专项办公',54,6,'印章、证照使用审批','R','../EntApps/YzZzSq/entry0.jsp','印章、证照使用审批'),(18,14,5,'专项办公',55,8,'项目付款审批','R','../EntApps/FkSp/entry0.jsp','项目付款审批'),(18,14,5,'专项办公',56,0,'项目管控','R','../EntMasters/XmGk/main.jsp','项目信息展示'),(18,7,99,'应用设置',57,12,'印章客户端','P','./OutLink/SealClient.jsp','电子印章客户端'),(18,9,3,'通用办公',58,15,'预付款审批','R','../EntApps/YfkSp/entry0.jsp','预付款审批'),(18,9,3,'通用办公',59,6,'公司收文','R','../FileApp/GsSw/entry0.jsp','公司收文'),(18,14,5,'专项办公',60,5,'合同审批','R','../EntApps/HtSp/entry0.jsp','合同审批'),(18,9,3,'通用办公',61,2,'制度汇编','R','../EntMasters/ZdHb/entry0.jsp','制度汇编'),(18,9,3,'通用办公',62,9,'督查督办','R','../FileApp/DcDb/entry0.jsp','督查督办'),(18,9,3,'通用办公',63,19,'读书角','R','../FileApp/Dsj/ListA/main.jsp','书目、读书心得'),(18,9,3,'通用办公',64,20,'非业务类合同管理','R','../FileApp/WjHq/entry0.jsp','非业务类合同管理'),(18,15,6,'档案交接借阅',65,1,'档案交接','R','../EntApps/DaJj/entry0.jsp','档案交接'),(18,15,6,'档案交接借阅',66,3,'档案借阅','R','../EntApps/DaJy/entry0.jsp','档案借阅'),(18,14,5,'专项办公',67,5,'合同审查','R','../EntApps/HtSc/entry0.jsp','未正式立项的项目需要签署合同'),(18,9,3,'通用办公',69,8,'考勤评定','R','../FileApp/KqPd/entry0.jsp','系统每日按出勤记录考勤，上司据实修改考勤记录'),(18,1,1,'个人事务',71,7,'个人工资条','R','../FileApp/Gzt/main.jsp','个人工资条查询'),(18,9,3,'通用办公',72,14,'采购申请','R','../EntApps/CgSq/entry0.jsp','采购申请流程'),(19,1,1,'个人事务',1,1,'待办已办','R','./ToDoSettledPush/MainToDo.jsp','待办已办列表，管理员多个催办'),(19,1,1,'个人事务',2,3,'个人设置','R','./PrivateSetting/DirectLeader/main.jsp','上司设置、首页信息块定制、业务处理常用语、待办提醒定制'),(19,1,1,'个人事务',6,5,'代办委托','R','./ToDoDelegate/ToAuthorize/main.jsp','分业务委托自己的待办事项'),(19,1,1,'个人事务',7,99,'修改口令','P','./PwdModify/PasswordModifyEntry.jsp?type=u','修改口令'),(19,9,3,'通用办公',8,0,'通讯录','R','./AddrList/main.jsp','企业公共通讯录'),(19,9,3,'通用办公',9,1,'常用信息','R','./CommonInfo/index.htm','常用信息：日历、天气、...、网站导航'),(19,3,94,'全文检索',10,1,'全文检索','R','../oa/qwjs_qrylist.action','全城大搜查一定要把李向阳搜出来！'),(19,7,99,'应用设置',17,1,'基础办公设置','R','./Admin1Setting/EntAppCode/main.jsp','企业管理员维护，一般人只读：企业级应用编码维护（地域、条线、岗位级别、部门职务...），企业各地域坐班时间，二级管理员设置，公假时段维护'),(19,9,3,'通用办公',22,4,'信息发布','R','../FileApp/XxFb/ListA/main.jsp','信息发布'),(19,9,3,'通用办公',23,5,'公司文件','R','../FileApp/GsWj/ListA/main.jsp','公司文件'),(19,9,3,'通用办公',25,10,'请示签报','R','../FileApp/QsQb/ListA/main.jsp','请示签报'),(19,9,3,'通用办公',29,12,'请休假','R','../FileApp/Qxj/ListA/main.jsp','请休假'),(19,7,99,'应用设置',42,8,'企业应用设置','R','../FileMaster/ZxSz/XxLm/main.jsp','报销标准（财务维护）、会议场地管理、应用模板设置'),(19,9,3,'通用办公',47,16,'借款申请','R','../FileApp/Jk/entry0.jsp','借款申请'),(19,9,3,'通用办公',48,17,'还款记录','R','../FileApp/Hk/entry0.jsp','借款还款记录'),(19,9,3,'通用办公',49,18,'报销申请','R','../FileApp/BxSq/ListA/main.jsp','报销申请'),(19,14,5,'专项办公',50,1,'立项申请','R','../EntApps/LxSq/entry0.jsp','立项申请'),(19,14,5,'专项办公',51,2,'尽职调查材料审批','R','../EntApps/JzDc/entry0.jsp','尽职调查材料审批'),(19,14,5,'专项办公',52,3,'项目审查','R','../EntApps/XmSc/entry0.jsp','项目审查'),(19,14,5,'专项办公',53,4,'项目审批','R','../EntApps/FaSp/entry0.jsp','项目上会审批'),(19,14,5,'专项办公',54,6,'印章、证照使用审批','R','../EntApps/YzZzSq/entry0.jsp','印章、证照使用审批'),(19,14,5,'专项办公',55,8,'项目付款审批','R','../EntApps/FkSp/entry0.jsp','项目付款审批'),(19,14,5,'专项办公',56,0,'项目管控','R','../EntMasters/XmGk/main.jsp','项目信息展示'),(19,7,99,'应用设置',57,12,'印章客户端','P','./OutLink/SealClient.jsp','电子印章客户端'),(19,9,3,'通用办公',58,15,'预付款审批','R','../EntApps/YfkSp/entry0.jsp','预付款审批'),(19,9,3,'通用办公',59,6,'公司收文','R','../FileApp/GsSw/entry0.jsp','公司收文'),(19,14,5,'专项办公',60,5,'合同审批','R','../EntApps/HtSp/entry0.jsp','合同审批'),(19,9,3,'通用办公',61,2,'制度汇编','R','../EntMasters/ZdHb/entry0.jsp','制度汇编'),(19,9,3,'通用办公',62,9,'督查督办','R','../FileApp/DcDb/entry0.jsp','督查督办'),(19,9,3,'通用办公',63,19,'读书角','R','../FileApp/Dsj/ListA/main.jsp','书目、读书心得'),(19,9,3,'通用办公',64,20,'非业务类合同管理','R','../FileApp/WjHq/entry0.jsp','非业务类合同管理'),(19,15,6,'档案交接借阅',65,1,'档案交接','R','../EntApps/DaJj/entry0.jsp','档案交接'),(19,15,6,'档案交接借阅',66,3,'档案借阅','R','../EntApps/DaJy/entry0.jsp','档案借阅'),(19,14,5,'专项办公',67,5,'合同审查','R','../EntApps/HtSc/entry0.jsp','未正式立项的项目需要签署合同'),(19,9,3,'通用办公',69,8,'考勤评定','R','../FileApp/KqPd/entry0.jsp','系统每日按出勤记录考勤，上司据实修改考勤记录'),(19,1,1,'个人事务',71,7,'个人工资条','R','../FileApp/Gzt/main.jsp','个人工资条查询'),(19,9,3,'通用办公',72,14,'采购申请','R','../EntApps/CgSq/entry0.jsp','采购申请流程');
/*!40000 ALTER TABLE `Pf_M_UsrMenu` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `Pf_M_UsrPwd`
--

DROP TABLE IF EXISTS `Pf_M_UsrPwd`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_M_UsrPwd` (
  `UsrID` smallint(5) unsigned NOT NULL,
  `LoginName` varchar(20) NOT NULL DEFAULT '',
  `Password` varchar(40) NOT NULL DEFAULT 'ODg4OA~~',
  `Password2` varchar(20) NOT NULL DEFAULT 'MTIzNDU2' COMMENT '密码2',
  `MenuRegenTag` char(1) NOT NULL DEFAULT 'N',
  PRIMARY KEY (`UsrID`),
  UNIQUE KEY `Pf_M_UsrPwd_UK1` (`LoginName`) USING BTREE,
  CONSTRAINT `Pf_M_UsrPwd_FK1` FOREIGN KEY (`UsrID`) REFERENCES `Pf_M_Usr` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_M_UsrPwd`
--

LOCK TABLES `Pf_M_UsrPwd` WRITE;
/*!40000 ALTER TABLE `Pf_M_UsrPwd` DISABLE KEYS */;
INSERT INTO `Pf_M_UsrPwd` VALUES (1,'webmaster','ODg4OA~~','MTIzNDU2','N'),(2,'hasi','MTIzNDU2','MTIzNDU2Nzg~','N'),(3,'deligeerbatu','MTIzNDU2','MTIzNDU2Nzg~','N'),(4,'juwenli','MTIzNDU2','MTIzNDU2Nzg~','N'),(5,'sunruifeng','MTIzNDU2','MTIzNDU2Nzg~','N'),(6,'guoxinzhong','MTIzNDU2','MzMzMDAxVGl2b2xp','N'),(7,'zhangyu','MTIzNDU2','MTIzNDU2Nzg~','N'),(8,'cailu','MTIzNDU2','MTIzNDU2Nzg~','N'),(9,'xiangxin','MTIzNDU2','MTIzNDU2Nzg~','N'),(10,'fuchunqi','MTIzNDU2','MTIzNDU2Nzg~','N'),(11,'zhuhuijing','MTIzNDU2','MTIzNDU2Nzg~','N'),(12,'dubin','MTIzNDU2','MTIzNDU2Nzg~','N'),(13,'liujiani','MTIzNDU2','MTIzNDU2Nzg~','N'),(14,'yangzhen','MTIzNDU2','VGl2b2xpMzMzMDAx','N'),(15,'duanhaijun','MTIzNDU2','MTIzNDU2Nzg~','N'),(16,'zhujiajia','MTIzNDU2','MTIzNDU2Nzg~','N'),(17,'qiyabin','MTIzNDU2','emFxMTJ3c3g~','N'),(18,'jiahansen','MTIzNDU2','MzMzMDAxVGl2b2xp','N'),(19,'baobutong','MTIzNDU2','MzMzMDAxVGl2b2xp','N');
/*!40000 ALTER TABLE `Pf_M_UsrPwd` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_UsrPwd_11` BEFORE INSERT ON `Pf_M_UsrPwd`
  FOR EACH ROW
BEGIN
	if new.Password=new.Password2 then
    	call Pf_M_UsrPwd_11_err1(); # 登录密码不能与工资条查询密码一样！
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_UsrPwd_21` AFTER INSERT ON `Pf_M_UsrPwd` FOR EACH ROW
BEGIN
	insert into Pf_M_UsrMenu 
    Select new.UsrID, m.ID, m.DisplayOrd, m.Name, f.ID, f.DisplayOrd, f.Name, f.Rightpopup, Coalesce(f.Url,'developing.jsp'), Coalesce(f.fDesc,f.Name)
  	From Pf_M_Func f, Pf_M_Module m
  	where f.IsPublic='Y' and f.IsVisible='Y' and f.ModuleID=m.ID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pf_M_UsrPwd_13` BEFORE UPDATE ON `Pf_M_UsrPwd`
  FOR EACH ROW
BEGIN
	if new.Password2!=old.Password2 and new.Password=new.Password2 then
    	call Pf_M_UsrPwd_13_err1(); # 登录密码不能与工资条查询密码一样！
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Pf_M_VerticalOrgLeader`
--

DROP TABLE IF EXISTS `Pf_M_VerticalOrgLeader`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pf_M_VerticalOrgLeader` (
  `UsrID` smallint(5) unsigned NOT NULL,
  `VerticalOrgID` smallint(5) unsigned NOT NULL,
  PRIMARY KEY (`VerticalOrgID`,`UsrID`) USING BTREE,
  KEY `UsrID` (`UsrID`),
  KEY `VerticalOrgID` (`VerticalOrgID`),
  CONSTRAINT `Pf_M_VerticalOrgLeader_fk1` FOREIGN KEY (`UsrID`) REFERENCES `Pf_M_Usr` (`ID`) ON DELETE CASCADE,
  CONSTRAINT `Pf_M_VerticalOrgLeader_FK2` FOREIGN KEY (`VerticalOrgID`) REFERENCES `Pf_M_EntAppCode` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pf_M_VerticalOrgLeader`
--

LOCK TABLES `Pf_M_VerticalOrgLeader` WRITE;
/*!40000 ALTER TABLE `Pf_M_VerticalOrgLeader` DISABLE KEYS */;
/*!40000 ALTER TABLE `Pf_M_VerticalOrgLeader` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `Pub_A_BizDetailViewTs`
--

DROP TABLE IF EXISTS `Pub_A_BizDetailViewTs`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pub_A_BizDetailViewTs` (
  `RecDivTag` date NOT NULL,
  `BizDetailName` varchar(30) NOT NULL,
  `BizDetailSeq` int(12) unsigned NOT NULL,
  `AuthUsrID` smallint(5) unsigned NOT NULL,
  `ReadTs` datetime NOT NULL,
  PRIMARY KEY (`BizDetailName`,`BizDetailSeq`,`AuthUsrID`),
  KEY `AuthUsrID` (`AuthUsrID`),
  CONSTRAINT `Pub_A_BizDetailViewTs_fk1` FOREIGN KEY (`AuthUsrID`) REFERENCES `Pf_M_Usr` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pub_A_BizDetailViewTs`
--

LOCK TABLES `Pub_A_BizDetailViewTs` WRITE;
/*!40000 ALTER TABLE `Pub_A_BizDetailViewTs` DISABLE KEYS */;
/*!40000 ALTER TABLE `Pub_A_BizDetailViewTs` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pub_A_BizDetailViewTs_11` BEFORE INSERT ON `Pub_A_BizDetailViewTs`
  FOR EACH ROW
BEGIN
	DECLARE vRecDivTag DATE; #时间戳
    
    if new.BizDetailName='XmGk_M_RjCgJh' then
    	SELECT coalesce(a.RecDivTag,now()) into vRecDivTag from XmGk_M_RjCgJh m,XmGk_A_JdPsHd a 
        where m.ID=new.BizDetailSeq and m.LyZtID=a.ID;
    end if;
    
    if new.BizDetailName='XmGk_M_YjCgJh' then
    	SELECT coalesce(a.RecDivTag,now()) into vRecDivTag from XmGk_M_YjCgJh m,XmGk_A_JdPsHd a 
        where m.ID=new.BizDetailSeq and m.LyZtID=a.ID;
    end if;
    
    if new.BizDetailName='XmGk_M_RyCgJh' then
    	SELECT coalesce(a.RecDivTag,now()) into vRecDivTag from XmGk_M_RyCgJh m,XmGk_A_JdPsHd a 
        where m.ID=new.BizDetailSeq and m.LyZtID=a.ID;
    end if;
    
    if new.BizDetailName='LsCg_A_Mx' then
    	SELECT RecDivTag into vRecDivTag from LsCg_A_Mx
        where ID=new.BizDetailSeq;
    end if;
    
    if new.BizDetailName='CgHt_A_FkJd' then
    	SELECT RecDivTag into vRecDivTag from CgHt_A_FkJd
        where ID=new.BizDetailSeq;
    end if;
    
    set new.RecDivTag=vRecDivTag; #copy主体时间戳
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Pub_A_BizViewPw`
--

DROP TABLE IF EXISTS `Pub_A_BizViewPw`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pub_A_BizViewPw` (
  `RecDivTag` date NOT NULL,
  `BizSeq` int(11) unsigned NOT NULL,
  `OrgUsrSel` char(1) NOT NULL,
  `OrgUsrID` smallint(5) unsigned NOT NULL,
  PRIMARY KEY (`BizSeq`,`OrgUsrSel`,`OrgUsrID`),
  KEY `BizSeq` (`BizSeq`),
  CONSTRAINT `Pub_A_BizViewPw_fk1` FOREIGN KEY (`BizSeq`) REFERENCES `Pf_A_Biz` (`Seq`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pub_A_BizViewPw`
--

LOCK TABLES `Pub_A_BizViewPw` WRITE;
/*!40000 ALTER TABLE `Pub_A_BizViewPw` DISABLE KEYS */;
INSERT INTO `Pub_A_BizViewPw` VALUES ('2018-04-12',62,'O',4),('2018-04-12',62,'O',5),('2018-04-12',62,'O',6),('2018-04-12',62,'O',7),('2018-04-12',62,'O',8),('2018-04-12',62,'O',9),('2018-04-12',62,'O',10),('2018-04-12',62,'O',11),('2018-04-12',62,'O',12),('2018-04-12',62,'P',2),('2018-04-12',62,'P',3),('2018-04-12',62,'P',4),('2018-04-12',62,'P',5),('2018-04-12',62,'P',6),('2018-04-12',62,'P',7),('2018-04-12',62,'P',8),('2018-06-08',292,'O',2),('2018-06-08',292,'O',3),('2018-06-08',292,'O',5),('2018-06-08',292,'O',6),('2018-06-08',292,'O',8),('2018-07-16',317,'P',3),('2018-07-16',317,'P',4),('2018-07-16',317,'P',6),('2018-07-16',317,'P',7),('2018-07-16',317,'P',8);
/*!40000 ALTER TABLE `Pub_A_BizViewPw` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pub_A_BizViewPw_11` BEFORE INSERT ON `Pub_A_BizViewPw` FOR EACH ROW
BEGIN
	declare vRecDivTag DATE;
    
	select RecDivTag into vRecDivTag from Pf_A_Biz where Seq=new.BizSeq;
    set new.RecDivTag = vRecDivTag;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Pub_A_ClosedBizViewTs`
--

DROP TABLE IF EXISTS `Pub_A_ClosedBizViewTs`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pub_A_ClosedBizViewTs` (
  `RecDivTag` date NOT NULL,
  `BizSeq` int(11) unsigned NOT NULL,
  `AuthUsrID` smallint(5) unsigned NOT NULL,
  `ReadTs` datetime NOT NULL,
  PRIMARY KEY (`BizSeq`,`AuthUsrID`),
  KEY `BizSeq` (`BizSeq`),
  KEY `AuthUsrID` (`AuthUsrID`),
  CONSTRAINT `Pub_A_ClosedBizViewTs_FK1` FOREIGN KEY (`BizSeq`) REFERENCES `Pf_A_Biz` (`Seq`) ON DELETE CASCADE,
  CONSTRAINT `Pub_A_ClosedBizViewTs_FK2` FOREIGN KEY (`AuthUsrID`) REFERENCES `Pf_M_Usr` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pub_A_ClosedBizViewTs`
--

LOCK TABLES `Pub_A_ClosedBizViewTs` WRITE;
/*!40000 ALTER TABLE `Pub_A_ClosedBizViewTs` DISABLE KEYS */;
INSERT INTO `Pub_A_ClosedBizViewTs` VALUES ('2018-01-26',2,10,'2018-01-26 19:03:16'),('2018-01-26',2,14,'2018-01-26 19:04:21'),('2018-01-31',10,10,'2018-01-31 14:19:03'),('2018-01-31',10,14,'2018-02-04 12:39:00'),('2018-03-22',39,9,'2018-03-29 09:04:29'),('2018-03-22',42,9,'2018-03-29 08:22:19'),('2018-03-22',42,12,'2018-03-29 08:24:56'),('2018-04-01',56,9,'2018-04-07 11:37:55'),('2018-04-01',56,14,'2018-04-20 13:32:55'),('2018-04-07',59,9,'2018-04-20 13:22:07'),('2018-04-07',59,14,'2018-04-20 13:22:55'),('2018-04-07',60,12,'2018-08-23 10:54:21'),('2018-04-12',62,11,'2018-04-12 23:19:58'),('2018-04-12',62,14,'2018-04-12 23:20:41'),('2018-04-25',76,2,'2018-06-03 23:18:57'),('2018-05-04',91,2,'2018-05-11 05:09:54'),('2018-05-10',92,14,'2018-05-17 02:06:37'),('2018-05-10',93,14,'2018-05-16 11:55:01'),('2018-05-16',99,14,'2018-05-17 02:22:37'),('2018-05-20',237,10,'2018-05-21 13:39:08'),('2018-05-20',237,14,'2018-05-21 16:37:16'),('2018-05-21',239,10,'2018-05-21 16:15:54'),('2018-05-21',239,14,'2018-05-21 15:36:00'),('2018-05-22',254,14,'2018-05-22 10:10:27'),('2018-05-22',255,14,'2018-05-22 10:10:46'),('2018-05-22',256,14,'2018-05-22 10:11:04'),('2018-05-22',257,14,'2018-05-22 10:11:10'),('2018-05-22',258,14,'2018-05-22 10:10:08'),('2018-05-22',259,14,'2018-05-22 10:11:18'),('2018-05-22',260,14,'2018-05-22 10:11:37'),('2018-05-22',261,14,'2018-05-22 10:11:45'),('2018-05-22',262,14,'2018-05-22 10:11:54'),('2018-05-22',263,2,'2018-07-09 17:23:17'),('2018-05-22',263,5,'2018-07-10 15:03:58'),('2018-05-22',263,12,'2018-05-22 21:09:53'),('2018-05-22',263,13,'2018-07-06 16:20:03'),('2018-05-22',263,14,'2018-05-22 10:12:01'),('2018-05-22',264,14,'2018-05-22 10:33:08'),('2018-06-08',292,2,'2018-06-12 17:28:17'),('2018-06-08',292,10,'2018-06-08 17:19:50'),('2018-06-08',292,14,'2018-07-23 16:33:56'),('2018-06-12',293,2,'2018-06-12 17:42:43'),('2018-06-12',293,12,'2018-06-12 17:26:07'),('2018-06-12',293,14,'2018-06-12 17:19:19'),('2018-06-12',294,8,'2018-06-12 21:57:12'),('2018-06-12',294,12,'2018-06-12 21:56:32'),('2018-06-12',294,14,'2018-06-12 21:56:00'),('2018-06-26',307,9,'2018-06-26 01:53:50'),('2018-06-26',307,12,'2018-11-26 17:21:15'),('2018-07-12',316,2,'2018-07-13 21:08:38'),('2018-07-12',316,5,'2018-07-16 00:40:55'),('2018-07-12',316,13,'2018-07-16 00:43:19'),('2018-07-12',316,14,'2018-07-16 00:44:56'),('2018-07-16',317,3,'2018-07-16 01:07:20'),('2018-07-16',317,4,'2018-07-16 00:55:44'),('2018-07-16',317,5,'2018-07-16 00:53:58'),('2018-07-16',317,7,'2018-07-16 01:05:38'),('2018-07-16',317,8,'2018-07-16 01:03:12'),('2018-07-26',318,15,'2018-07-27 22:26:04'),('2018-07-27',319,15,'2018-07-27 22:26:57'),('2018-07-27',321,15,'2018-07-27 22:26:13'),('2018-08-02',325,10,'2018-08-02 00:40:09'),('2018-08-02',326,10,'2018-08-02 00:49:32'),('2018-08-02',328,10,'2018-08-02 01:11:26'),('2018-08-18',339,10,'2018-08-19 03:10:39'),('2018-08-18',339,12,'2018-11-26 17:21:09'),('2018-08-21',341,4,'2018-08-21 02:20:20'),('2018-08-21',341,10,'2018-08-21 02:19:42'),('2018-08-21',346,11,'2018-08-21 18:46:18'),('2018-08-21',347,11,'2018-08-21 19:23:33'),('2018-08-21',349,11,'2018-08-21 19:44:09'),('2018-09-28',368,13,'2018-10-03 13:38:56'),('2018-10-07',379,12,'2018-11-26 17:21:02'),('2018-11-27',412,12,'2019-03-26 14:46:20'),('2018-12-12',413,13,'2018-12-12 22:09:05'),('2019-03-26',430,11,'2019-03-27 11:57:15');
/*!40000 ALTER TABLE `Pub_A_ClosedBizViewTs` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pub_A_ClosedBizViewTs_11` BEFORE INSERT ON `Pub_A_ClosedBizViewTs` FOR EACH ROW
BEGIN
	declare vRecDivTag DATE;
    
	select RecDivTag into vRecDivTag from Pf_A_Biz where Seq=new.BizSeq;
    set new.RecDivTag = vRecDivTag;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pub_A_ClosedBizViewTs_21` AFTER INSERT ON `Pub_A_ClosedBizViewTs`
  FOR EACH ROW
BEGIN
 	declare vBizCode tinyint unsigned;
 	declare vBizID int unsigned;
 	
 	select BizCode,BizID into vBizCode,vBizID from Pf_A_Biz where Seq=new.BizSeq;
 	/*
 	if vBizCode=11 THEN # 信息发布
 		update XxFb_A_Zt set FwRd=FwRd+1 where ID=vBizID;
 	end if;
 	*/
 	if vBizCode=12 THEN # 公司文件
 		update GsWj_A_Zt set CkJs=CkJs+1 where ID=vBizID;
 	end if;
 	
 	if vBizCode=20 THEN # 公司收文
 		update GsSw_A_Zt set CkJs=CkJs+1 where ID=vBizID;
 	end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Pub_M_BookMark`
--

DROP TABLE IF EXISTS `Pub_M_BookMark`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pub_M_BookMark` (
  `Code` varchar(20) NOT NULL,
  `Name` varchar(20) NOT NULL,
  `BizCode` tinyint(3) unsigned NOT NULL,
  PRIMARY KEY (`Code`),
  UNIQUE KEY `Pub_M_BookMark_UK` (`Name`,`BizCode`) USING BTREE,
  KEY `BizCode` (`BizCode`),
  CONSTRAINT `pub_m_bookmark_fk1` FOREIGN KEY (`BizCode`) REFERENCES `Pf_M_Biz` (`Code`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pub_M_BookMark`
--

LOCK TABLES `Pub_M_BookMark` WRITE;
/*!40000 ALTER TABLE `Pub_M_BookMark` DISABLE KEYS */;
INSERT INTO `Pub_M_BookMark` VALUES ('B27_YwBmFgFzYj','业务部分管副总审批意见',27),('B28_YwBmFgFzYj','业务部分管副总审批意见',28),('B27_YwBmFgFzSj','业务部分管副总审批时间',27),('B28_YwBmFgFzSj','业务部分管副总审批时间',28),('B27Qm_YwBmFgFz','业务部分管副总签名',27),('B28Qm_YwBmFgFz','业务部分管副总签名',28),('B27_YwBmFzrYj','业务部负责人审批意见',27),('B28_YwBmFzrYj','业务部负责人审批意见',28),('B27_YwBmFzrSj','业务部负责人审批时间',27),('B28_YwBmFzrSj','业务部负责人审批时间',28),('B27Qm_YwBmFzr','业务部负责人签名',27),('B28Qm_YwBmFzr','业务部负责人签名',28),('B27_YwBm','业务部门',27),('B28_YwBm','业务部门',28),('B24_Zcr','主持人',24),('B25_Sy','事由',25),('B23_KjHsbScYj','会计审查意见',23),('B23_KjHsbScRq','会计审查时间',23),('B26_KjHsYj','会计审核意见',26),('B26_KjHsRq','会计审核意见日期',26),('B14Qm_Kj','会计签名',14),('B19Qm_Kj','会计签名',19),('B23Qm_Kj','会计签字',23),('B26Qm_Kj','会计签字',26),('B25_Syr','使用人',25),('B25_SyBm','使用部门',25),('B4_SyBm1','使用部门1',4),('B4_SyBm10','使用部门10',4),('B4_SyBm2','使用部门2',4),('B4_SyBm3','使用部门3',4),('B4_SyBm4','使用部门4',4),('B4_SyBm5','使用部门5',4),('B4_SyBm6','使用部门6',4),('B4_SyBm7','使用部门7',4),('B4_SyBm8','使用部门8',4),('B4_SyBm9','使用部门9',4),('B4_SkrMc1','供货商1',4),('B4_SkrMc10','供货商10',4),('B4_SkrMc2','供货商2',4),('B4_SkrMc3','供货商3',4),('B4_SkrMc4','供货商4',4),('B4_SkrMc5','供货商5',4),('B4_SkrMc6','供货商6',4),('B4_SkrMc7','供货商7',4),('B4_SkrMc8','供货商8',4),('B4_SkrMc9','供货商9',4),('B4_Bgr1','保管人1',4),('B4_Bgr10','保管人10',4),('B4_Bgr2','保管人2',4),('B4_Bgr3','保管人3',4),('B4_Bgr4','保管人4',4),('B4_Bgr5','保管人5',4),('B4_Bgr6','保管人6',4),('B4_Bgr7','保管人7',4),('B4_Bgr8','保管人8',4),('B4_Bgr9','保管人9',4),('B14_JkSy','借款事由',14),('B14Qm_Jkr','借款人签名',14),('B15Qm_Jkr','借款人签名',15),('B14_JkrBm','借款人部门',14),('B14_JkZq','借款周期',14),('B14_JkBh','借款编号',14),('B14_JkAmtDx','借款金额大写',14),('B14_JkAmt','借款金额小写',14),('B25_gsldyjRq','公司领导审批时间',25),('B25_gsldyj','公司领导意见',25),('B25_QtYzMc','其他印章使用名称',25),('B25_QtZzMc','其他证照使用名称',25),('B24_JchZkSjD','决策会召开时间',24),('B18_CcSy','出差事由',18),('B24_Cx','出席',24),('B15Qm_Cn','出纳签名',15),('B18Qm_Cn','出纳签名',18),('B19Qm_Cn','出纳签名',19),('B26_FgFzYj','分管副总经理意见',26),('B26_FgFzRq','分管副总经理意见日期',26),('B25_fghgldyjRq','分管合规领导审批时间',25),('B25_fghgldyj','分管合规领导意见',25),('B23_FgCwFzScYj','分管财务副总审查意见',23),('B23_FgCwFzScRq','分管财务副总审查时间',23),('B23Qm_CwFgLd','分管财务副总签字',23),('B26Qm_CwFgLd','分管财务副总签字',26),('B26_CwFzYj','分管财务副总经理意见',26),('B26_CwFzRq','分管财务副总经理意见日期',26),('B25_fgbmldyjRq','分管部门领导审批时间',25),('B25_fgbmldyj','分管部门领导意见',25),('B24_Lx','列席',24),('B19_LastYfYe','前期预付款余额',19),('B4_UnitPrice1','单价1',4),('B4_UnitPrice10','单价10',4),('B4_UnitPrice2','单价2',4),('B4_UnitPrice3','单价3',4),('B4_UnitPrice4','单价4',4),('B4_UnitPrice5','单价5',4),('B4_UnitPrice6','单价6',4),('B4_UnitPrice7','单价7',4),('B4_UnitPrice8','单价8',4),('B4_UnitPrice9','单价9',4),('B25_YzSyZl','印章使用种类',25),('B24_ChCnt','参会人数',24),('B24_ChTpCnt','参会投票人数',24),('B24_RejectCnt','反对数',24),('B15_FqRq','发起日期',15),('B15_FqBm','发起部门',15),('B27_HtMc','合同名称',27),('B28_HtMc','合同名称',28),('B27_HtBh','合同编号',27),('B28_HtBh','合同编号',28),('B27_HtJe','合同金额',27),('B28_HtJe','合同金额',28),('B27_HtFj','合同附件',27),('B28_HtFj','合同附件',28),('B4Qm_HgFg','合规分管签字',4),('B23_HgFgLdYj','合规分管领导意见',23),('B23_HgFgLdRq','合规分管领导时间',23),('B23Qm_HgScr','合规审查人签字',23),('B27_HgFzrYj','合规部负责人审批意见',27),('B28_HgFzrYj','合规部负责人审批意见',28),('B27_HgFzrSj','合规部负责人审批时间',27),('B28_HgFzrSj','合规部负责人审批时间',28),('B27Qm_HgFzr','合规部负责人签名',27),('B28Qm_HgFzr','合规部负责人签名',28),('B23_HgBmFzrYj','合规部门负责人意见',23),('B23_HgBmFzrRq','合规部门负责人时间',23),('B23Qm_HgBmFzr','合规部门负责人签字',23),('B24_PassCnt','同意数',24),('B18_Txrs','同行人',18),('B4_CpXh1','型号1',4),('B4_CpXh10','型号10',4),('B4_CpXh2','型号2',4),('B4_CpXh3','型号3',4),('B4_CpXh4','型号4',4),('B4_CpXh5','型号5',4),('B4_CpXh6','型号6',4),('B4_CpXh7','型号7',4),('B4_CpXh8','型号8',4),('B4_CpXh9','型号9',4),('B21_GdSj','填表时间',21),('B23_TbSj','填表时间',23),('B10_Bz','备注',10),('B19_Bz','备注',19),('B27Tp_2DC','审批合同二维码',27),('B28Tp_2DC','审查合同二维码',28),('B19_AcctNo','帐号',19),('B10_YqWcSj','延期完成时限',10),('B18_SkZhKhh','开户行',18),('B19_Khh','开户银行',19),('B24_DiscardCnt','弃权人数',24),('B24_DqRq','当前日期',24),('B4_TotalAmt1','总价1',4),('B4_TotalAmt10','总价10',4),('B4_TotalAmt2','总价2',4),('B4_TotalAmt3','总价3',4),('B4_TotalAmt4','总价4',4),('B4_TotalAmt5','总价5',4),('B4_TotalAmt6','总价6',4),('B4_TotalAmt7','总价7',4),('B4_TotalAmt8','总价8',4),('B4_TotalAmt9','总价9',4),('B26_ZjlYj','总经理意见',26),('B26_ZjlRq','总经理意见日期',26),('B14Qm_Zjl','总经理签名',14),('B18Qm_Zjl','总经理签名',18),('B19Qm_Zjl','总经理签名',19),('B4Qm_Zjl','总经理签字',4),('B26Qm_Zjl','总经理签字',26),('B21_ZcSpRq','总裁审批时间',21),('B21_ZcSpYj','总裁意见',21),('B21Qm_Zc','总裁签字',21),('B26_FkBig','总额大写',26),('B26_FkAmtCN','总额小写',26),('B15_QkSm','情况说明',15),('B10_Cbr','承办人',10),('B18_Bxr','报销人',18),('B18_BxrBm','报销人部门',18),('B18_BxAmt1','报销金额1',18),('B18_BxAmt10','报销金额10',18),('B18_BxAmt11','报销金额11',18),('B18_BxAmt12','报销金额12',18),('B18_BxAmt13','报销金额13',18),('B18_BxAmt14','报销金额14',18),('B18_BxAmt15','报销金额15',18),('B18_BxAmt16','报销金额16',18),('B18_BxAmt17','报销金额17',18),('B18_BxAmt18','报销金额18',18),('B18_BxAmt19','报销金额19',18),('B18_BxAmt2','报销金额2',18),('B18_BxAmt20','报销金额20',18),('B18_BxAmt21','报销金额21',18),('B18_BxAmt22','报销金额22',18),('B18_BxAmt23','报销金额23',18),('B18_BxAmt24','报销金额24',18),('B18_BxAmt25','报销金额25',18),('B18_BxAmt26','报销金额26',18),('B18_BxAmt27','报销金额27',18),('B18_BxAmt28','报销金额28',18),('B18_BxAmt29','报销金额29',18),('B18_BxAmt3','报销金额3',18),('B18_BxAmt30','报销金额30',18),('B18_BxAmt4','报销金额4',18),('B18_BxAmt5','报销金额5',18),('B18_BxAmt6','报销金额6',18),('B18_BxAmt7','报销金额7',18),('B18_BxAmt8','报销金额8',18),('B18_BxAmt9','报销金额9',18),('B18_BxAmtDx','报销金额大写',18),('B18_BxAmtXx','报销金额小写',18),('B18_TjRq','提交日期',18),('B25_SubmitTsMb','提交时间',25),('B26_ZfFsD','支付方式',26),('B19_SkrMc','收款方',19),('B26_SkrMc','收款方',26),('B26_Khh','收款方银行开户行名称',26),('B26_AcctNo','收款方银行账号',26),('B4_Qty1','数量1',4),('B4_Qty10','数量10',4),('B4_Qty2','数量2',4),('B4_Qty3','数量3',4),('B4_Qty4','数量4',4),('B4_Qty5','数量5',4),('B4_Qty6','数量6',4),('B4_Qty7','数量7',4),('B4_Qty8','数量8',4),('B4_Qty9','数量9',4),('B4_QtyDw1','数量单位1',4),('B4_QtyDw10','数量单位10',4),('B4_QtyDw2','数量单位2',4),('B4_QtyDw3','数量单位3',4),('B4_QtyDw4','数量单位4',4),('B4_QtyDw5','数量单位5',4),('B4_QtyDw6','数量单位6',4),('B4_QtyDw7','数量单位7',4),('B4_QtyDw8','数量单位8',4),('B4_QtyDw9','数量单位9',4),('B18_SfDwFk','是否对外付款',18),('B18_SfCdJk','是否核销备用金',18),('B25_SfDcYy','是否申请外携用印',25),('B19_YfZe','本次付款后余额',19),('B19_YfZeDx','本次付款后余额大写',19),('B23Qm_HgFgLd','法律合规分管副总签字',23),('B25Qm_HgFgLd','法律合规签字',25),('B26Qm_HgFgLd','法律合规签字',26),('B23_FlHgbSpYj','法律合规部审查意见',23),('B23_FlHgbSpRq','法律合规部审查时间',23),('B26_FlHgbYj','法律合规部意见',26),('B26_FlHgbRq','法律合规部意见日期',26),('B25Qm_Sqr','用印人',25),('B25_YyFs','用印份数',25),('B25_YyCl','用印材料',25),('B26_FkSy','申请事由',26),('B4_Sqr','申请人',4),('B19_Sqr','申请人',19),('B26_InitUsr','申请人',26),('B23_SqrBm','申请人部门',23),('B26_SubmitTsD','申请付款日期',26),('B19_FkAmt','申请付款金额',19),('B26_FkAmtD','申请付款金额',26),('B10_SqYqSj','申请延期时间',10),('B19_SqRq','申请日期',19),('B21_SqRq','申请日期',21),('B24_JchSqSjD','申请日期',24),('B4_SqSj','申请时间',4),('B19_SqSm','申请说明',19),('B21_SqBm','申请部室',21),('B21_SqBmFgLdSpRq','申请部室分管副总审批时间',21),('B21_SqBmFgLdSpYj','申请部室分管副总意见',21),('B21Qm_SqBmFgLd','申请部室分管副总签字',21),('B25Qm_SqBmFgLd','申请部室分管副总签字',25),('B26Qm_SqBmFgLd','申请部室分管副总签字',26),('B21_SqBmFzrSpRq','申请部室负责人审批时间',21),('B21_SqBmFzrSpYj','申请部室负责人意见',21),('B21Qm_SqBmFzr','申请部室负责人签字',21),('B25Qm_SqBmFzr','申请部室负责人签字',25),('B26Qm_SqBmFzr','申请部室负责人签字',26),('B4_SqBm','申请部门',4),('B19_SqBm','申请部门',19),('B26_InitOrgName','申请部门',26),('B26_XmMc','申请项目',26),('B25Qm_Jyr','监印人',25),('B10_Sy','督办事由',10),('B10_Dbr','督办人',10),('B10_Nr','督办内容',10),('B10_Fk','督办结果反馈',10),('B10_Bh','督办编号',10),('B18_PjCnt','票据张数',18),('B18_TaxAmtDx','税额大写',18),('B18_TaxAmtXx','税额小写',18),('B21_XmBh','立项编号',21),('B25_BizSeq','编号',25),('B18_HfAmt1','花费金额1',18),('B18_HfAmt10','花费金额10',18),('B18_HfAmt11','花费金额11',18),('B18_HfAmt12','花费金额12',18),('B18_HfAmt13','花费金额13',18),('B18_HfAmt14','花费金额14',18),('B18_HfAmt15','花费金额15',18),('B18_HfAmt16','花费金额16',18),('B18_HfAmt17','花费金额17',18),('B18_HfAmt18','花费金额18',18),('B18_HfAmt19','花费金额19',18),('B18_HfAmt2','花费金额2',18),('B18_HfAmt20','花费金额20',18),('B18_HfAmt21','花费金额21',18),('B18_HfAmt22','花费金额22',18),('B18_HfAmt23','花费金额23',18),('B18_HfAmt24','花费金额24',18),('B18_HfAmt25','花费金额25',18),('B18_HfAmt26','花费金额26',18),('B18_HfAmt27','花费金额27',18),('B18_HfAmt28','花费金额28',18),('B18_HfAmt29','花费金额29',18),('B18_HfAmt3','花费金额3',18),('B18_HfAmt30','花费金额30',18),('B18_HfAmt4','花费金额4',18),('B18_HfAmt5','花费金额5',18),('B18_HfAmt6','花费金额6',18),('B18_HfAmt7','花费金额7',18),('B18_HfAmt8','花费金额8',18),('B18_HfAmt9','花费金额9',18),('B18_HfAmtXx','花费金额小写',18),('B25Qm_Dsz','董事长签字',25),('B24_BjrXm1','表决人1',24),('B24_BjrXm10','表决人10',24),('B24_BjrXm11','表决人11',24),('B24_BjrXm12','表决人12',24),('B24_BjrXm13','表决人13',24),('B24_BjrXm14','表决人14',24),('B24_BjrXm15','表决人15',24),('B24_BjrXm2','表决人2',24),('B24_BjrXm3','表决人3',24),('B24_BjrXm4','表决人4',24),('B24_BjrXm5','表决人5',24),('B24_BjrXm6','表决人6',24),('B24_BjrXm7','表决人7',24),('B24_BjrXm8','表决人8',24),('B24_BjrXm9','表决人9',24),('B24Qm_Bjr1','表决人签名1',24),('B24Qm_Bjr10','表决人签名10',24),('B24Qm_Bjr11','表决人签名11',24),('B24Qm_Bjr12','表决人签名12',24),('B24Qm_Bjr13','表决人签名13',24),('B24Qm_Bjr14','表决人签名14',24),('B24Qm_Bjr15','表决人签名15',24),('B24Qm_Bjr2','表决人签名2',24),('B24Qm_Bjr3','表决人签名3',24),('B24Qm_Bjr4','表决人签名4',24),('B24Qm_Bjr5','表决人签名5',24),('B24Qm_Bjr6','表决人签名6',24),('B24Qm_Bjr7','表决人签名7',24),('B24Qm_Bjr8','表决人签名8',24),('B24Qm_Bjr9','表决人签名9',24),('B24_BjR1','表决反对1',24),('B24_BjR10','表决反对10',24),('B24_BjR11','表决反对11',24),('B24_BjR12','表决反对12',24),('B24_BjR13','表决反对13',24),('B24_BjR14','表决反对14',24),('B24_BjR15','表决反对15',24),('B24_BjR2','表决反对2',24),('B24_BjR3','表决反对3',24),('B24_BjR4','表决反对4',24),('B24_BjR5','表决反对5',24),('B24_BjR6','表决反对6',24),('B24_BjR7','表决反对7',24),('B24_BjR8','表决反对8',24),('B24_BjR9','表决反对9',24),('B24_BjD1','表决弃权1',24),('B24_BjD10','表决弃权10',24),('B24_BjD11','表决弃权11',24),('B24_BjD12','表决弃权12',24),('B24_BjD13','表决弃权13',24),('B24_BjD14','表决弃权14',24),('B24_BjD15','表决弃权15',24),('B24_BjD2','表决弃权2',24),('B24_BjD3','表决弃权3',24),('B24_BjD4','表决弃权4',24),('B24_BjD5','表决弃权5',24),('B24_BjD6','表决弃权6',24),('B24_BjD7','表决弃权7',24),('B24_BjD8','表决弃权8',24),('B24_BjD9','表决弃权9',24),('B24_BjP1','表决赞成1',24),('B24_BjP10','表决赞成10',24),('B24_BjP11','表决赞成11',24),('B24_BjP12','表决赞成12',24),('B24_BjP13','表决赞成13',24),('B24_BjP14','表决赞成14',24),('B24_BjP15','表决赞成15',24),('B24_BjP2','表决赞成2',24),('B24_BjP3','表决赞成3',24),('B24_BjP4','表决赞成4',24),('B24_BjP5','表决赞成5',24),('B24_BjP6','表决赞成6',24),('B24_BjP7','表决赞成7',24),('B24_BjP8','表决赞成8',24),('B24_BjP9','表决赞成9',24),('B10_DbWcSj','要求完成时间',10),('B10_DbKsSj','要求开始时间',10),('B24_Jl','记录',24),('B25_ZzSyZl','证照使用种类',25),('B4Qm_CwFg','财务分管签字',4),('B18Qm_CwShr','财务审核人签名',18),('B14Qm_CwFzr','财务负责人签名',14),('B18Qm_CwFzr','财务负责人签名',18),('B19Qm_CwFzr','财务负责人签名',19),('B23_CwbFzrScYj','财务部负责人审查意见',23),('B23_CwbFzrScRq','财务部负责人审查时间',23),('B23Qm_CwFzr','财务部负责人签字',23),('B26Qm_CwFzr','财务部负责人签字',26),('B26_CwbFzrYj','财务部门负责人意见',26),('B26_CwbFzrRq','财务部门负责人意见日期',26),('B18_SkZhNo','账号',18),('B18_SkZhMc','账户名',18),('B4_Cgx1','货物/服务名1',4),('B4_Cgx10','货物/服务名10',4),('B4_Cgx2','货物/服务名2',4),('B4_Cgx3','货物/服务名3',4),('B4_Cgx4','货物/服务名4',4),('B4_Cgx5','货物/服务名5',4),('B4_Cgx6','货物/服务名6',4),('B4_Cgx7','货物/服务名7',4),('B4_Cgx8','货物/服务名8',4),('B4_Cgx9','货物/服务名9',4),('B18_FyMs1','费用描述1',18),('B18_FyMs10','费用描述10',18),('B18_FyMs11','费用描述11',18),('B18_FyMs12','费用描述12',18),('B18_FyMs13','费用描述13',18),('B18_FyMs14','费用描述14',18),('B18_FyMs15','费用描述15',18),('B18_FyMs16','费用描述16',18),('B18_FyMs17','费用描述17',18),('B18_FyMs18','费用描述18',18),('B18_FyMs19','费用描述19',18),('B18_FyMs2','费用描述2',18),('B18_FyMs20','费用描述20',18),('B18_FyMs21','费用描述21',18),('B18_FyMs22','费用描述22',18),('B18_FyMs23','费用描述23',18),('B18_FyMs24','费用描述24',18),('B18_FyMs25','费用描述25',18),('B18_FyMs26','费用描述26',18),('B18_FyMs27','费用描述27',18),('B18_FyMs28','费用描述28',18),('B18_FyMs29','费用描述29',18),('B18_FyMs3','费用描述3',18),('B18_FyMs30','费用描述30',18),('B18_FyMs4','费用描述4',18),('B18_FyMs5','费用描述5',18),('B18_FyMs6','费用描述6',18),('B18_FyMs7','费用描述7',18),('B18_FyMs8','费用描述8',18),('B18_FyMs9','费用描述9',18),('B18_FyRq1','费用日期1',18),('B18_FyRq10','费用日期10',18),('B18_FyRq11','费用日期11',18),('B18_FyRq12','费用日期12',18),('B18_FyRq13','费用日期13',18),('B18_FyRq14','费用日期14',18),('B18_FyRq15','费用日期15',18),('B18_FyRq16','费用日期16',18),('B18_FyRq17','费用日期17',18),('B18_FyRq18','费用日期18',18),('B18_FyRq19','费用日期19',18),('B18_FyRq2','费用日期2',18),('B18_FyRq20','费用日期20',18),('B18_FyRq21','费用日期21',18),('B18_FyRq22','费用日期22',18),('B18_FyRq23','费用日期23',18),('B18_FyRq24','费用日期24',18),('B18_FyRq25','费用日期25',18),('B18_FyRq26','费用日期26',18),('B18_FyRq27','费用日期27',18),('B18_FyRq28','费用日期28',18),('B18_FyRq29','费用日期29',18),('B18_FyRq3','费用日期3',18),('B18_FyRq30','费用日期30',18),('B18_FyRq4','费用日期4',18),('B18_FyRq5','费用日期5',18),('B18_FyRq6','费用日期6',18),('B18_FyRq7','费用日期7',18),('B18_FyRq8','费用日期8',18),('B18_FyRq9','费用日期9',18),('B18_FyLb1','费用类别1',18),('B18_FyLb10','费用类别10',18),('B18_FyLb11','费用类别11',18),('B18_FyLb12','费用类别12',18),('B18_FyLb13','费用类别13',18),('B18_FyLb14','费用类别14',18),('B18_FyLb15','费用类别15',18),('B18_FyLb16','费用类别16',18),('B18_FyLb17','费用类别17',18),('B18_FyLb18','费用类别18',18),('B18_FyLb19','费用类别19',18),('B18_FyLb2','费用类别2',18),('B18_FyLb20','费用类别20',18),('B18_FyLb21','费用类别21',18),('B18_FyLb22','费用类别22',18),('B18_FyLb23','费用类别23',18),('B18_FyLb24','费用类别24',18),('B18_FyLb25','费用类别25',18),('B18_FyLb26','费用类别26',18),('B18_FyLb27','费用类别27',18),('B18_FyLb28','费用类别28',18),('B18_FyLb29','费用类别29',18),('B18_FyLb3','费用类别3',18),('B18_FyLb30','费用类别30',18),('B18_FyLb4','费用类别4',18),('B18_FyLb5','费用类别5',18),('B18_FyLb6','费用类别6',18),('B18_FyLb7','费用类别7',18),('B18_FyLb8','费用类别8',18),('B18_FyLb9','费用类别9',18),('B21_YyFgSpRq','运营分管副总审批时间',21),('B21_YyFgSpYj','运营分管副总意见',21),('B21Qm_YyFg','运营分管副总签字',21),('B4Qm_YyFg','运营分管签字',4),('B15_HkDx','还款大写',15),('B15_HkXx','还款小写',15),('B18_BxTaxAmt1','进项税1',18),('B18_BxTaxAmt10','进项税10',18),('B18_BxTaxAmt11','进项税11',18),('B18_BxTaxAmt12','进项税12',18),('B18_BxTaxAmt13','进项税13',18),('B18_BxTaxAmt14','进项税14',18),('B18_BxTaxAmt15','进项税15',18),('B18_BxTaxAmt16','进项税16',18),('B18_BxTaxAmt17','进项税17',18),('B18_BxTaxAmt18','进项税18',18),('B18_BxTaxAmt19','进项税19',18),('B18_BxTaxAmt2','进项税2',18),('B18_BxTaxAmt20','进项税20',18),('B18_BxTaxAmt21','进项税21',18),('B18_BxTaxAmt22','进项税22',18),('B18_BxTaxAmt23','进项税23',18),('B18_BxTaxAmt24','进项税24',18),('B18_BxTaxAmt25','进项税25',18),('B18_BxTaxAmt26','进项税26',18),('B18_BxTaxAmt27','进项税27',18),('B18_BxTaxAmt28','进项税28',18),('B18_BxTaxAmt29','进项税29',18),('B18_BxTaxAmt3','进项税3',18),('B18_BxTaxAmt30','进项税30',18),('B18_BxTaxAmt4','进项税4',18),('B18_BxTaxAmt5','进项税5',18),('B18_BxTaxAmt6','进项税6',18),('B18_BxTaxAmt7','进项税7',18),('B18_BxTaxAmt8','进项税8',18),('B18_BxTaxAmt9','进项税9',18),('B4Qm_BmZz','部门正职签字',4),('B21_YwBmZz','部门负责人',21),('B23_YwBmFzr','部门负责人',23),('B26_BmFzrYj','部门负责人意见',26),('B26_BmFzrRq','部门负责人意见日期',26),('B14Qm_BmFzr','部门负责人签名',14),('B18Qm_BmFzr','部门负责人签名',18),('B19Qm_BmFzr','部门负责人签名',19),('B25_bmldyjRq','部门领导审批时间',25),('B25_bmldyj','部门领导意见',25),('B4_TotalAmt','采购总额',4),('B4_Bt','采购标题',4),('B4_CgLx','采购类型',4),('B19_FjCnt','附件张数',19),('B09Tp_2DC','非业务合同二维码',9),('B28_XmDw','项目单位',28),('B21_XmMc','项目名称',21),('B23_XmMc','项目名称',23),('B24_XmMc','项目名称',24),('B27_XmMc','项目名称',27),('B28_XmMc','项目名称',28),('B24_XmMc2','项目名称2',24),('B21_XmJj','项目简介',21),('B27_XmJj','项目简介',27),('B28_XmJj','项目简介',28),('B21_XmFzr','项目经理',21),('B27_XmJl','项目经理',27),('B28_XmJl','项目经理',28),('B23_XmBh','项目编号',23),('B26_XmBh','项目编号',26),('B27_XmBh','项目编号',27),('B23_XmJe','项目金额',23),('B10_LdPs','领导批示',10),('B23_FxFgLdYj','风险分管领导意见',23),('B23_FxFgLdRq','风险分管领导时间',23),('B23Qm_FxFgLd','风险分管领导签字',23),('B23_FxScrYj','风险审查人意见',23),('B23_FxScrRq','风险审查人时间',23),('B23Qm_FxScr','风险审查人签字',23),('B23_FxBmFzrYj','风险部门负责人意见',23),('B23_FxBmFzrRq','风险部门负责人时间',23),('B23Qm_FxBmFzr','风险部门负责人签字',23);
/*!40000 ALTER TABLE `Pub_M_BookMark` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `Pub_M_CommNumAssignBox`
--

DROP TABLE IF EXISTS `Pub_M_CommNumAssignBox`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pub_M_CommNumAssignBox` (
  `CommStyle` varchar(50) NOT NULL,
  `NextNum` smallint(5) unsigned NOT NULL,
  PRIMARY KEY (`CommStyle`),
  UNIQUE KEY `CommStyle` (`CommStyle`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pub_M_CommNumAssignBox`
--

LOCK TABLES `Pub_M_CommNumAssignBox` WRITE;
/*!40000 ALTER TABLE `Pub_M_CommNumAssignBox` DISABLE KEYS */;
/*!40000 ALTER TABLE `Pub_M_CommNumAssignBox` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `Pub_M_Template`
--

DROP TABLE IF EXISTS `Pub_M_Template`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pub_M_Template` (
  `ID` tinyint(3) unsigned NOT NULL AUTO_INCREMENT,
  `Name` varchar(50) NOT NULL,
  `BizCode` tinyint(3) unsigned NOT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE KEY `Pub_M_Template_UK` (`Name`) USING BTREE,
  KEY `BizCode` (`BizCode`),
  CONSTRAINT `pub_m_template_fk1` FOREIGN KEY (`BizCode`) REFERENCES `Pf_M_Biz` (`Code`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=31 DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pub_M_Template`
--

LOCK TABLES `Pub_M_Template` WRITE;
/*!40000 ALTER TABLE `Pub_M_Template` DISABLE KEYS */;
INSERT INTO `Pub_M_Template` VALUES (1,'借款凭证',14),(3,'费用报销凭证',18),(4,'差旅报销凭证',18),(5,'立项申请审批表',21),(6,'印章、证照使用审批单',25),(11,'还款凭证',15),(12,'预付款审批单',19),(13,'项目付款审批单',26),(14,'合同审批单',27),(15,'督办单',10),(16,'合同审查单',28),(17,'采购申请审批单',4),(22,'带二维码插入标签的审查合同模板-1',28),(23,'带二维码插入标签的审批合同模板-1',27),(24,'带二维码插入标签的非业务类合同模板-1',9),(25,'项目法律合规审查意见表',23),(26,'项目风险审查意见表',23),(27,'项目财务审查意见表',23),(28,'决策会会议通知',24),(29,'项目表决结果表',24),(30,'决策会会议纪要',24);
/*!40000 ALTER TABLE `Pub_M_Template` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Pub_M_Template_22` AFTER DELETE ON `Pub_M_Template` FOR EACH ROW
BEGIN
	update Pf_M_AttachInfo set DelTag='Y' where PrimaryName = 'Pub_M_Template' and PrimaryID=old.ID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Pub_M_YMDStyleNumAssignBox`
--

DROP TABLE IF EXISTS `Pub_M_YMDStyleNumAssignBox`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Pub_M_YMDStyleNumAssignBox` (
  `BizCode` tinyint(3) unsigned NOT NULL,
  `BizContentType` smallint(5) unsigned NOT NULL,
  `YMDStyle` varchar(40) NOT NULL,
  `NextNum` smallint(5) unsigned NOT NULL,
  PRIMARY KEY (`BizCode`,`BizContentType`,`YMDStyle`),
  KEY `BizCode` (`BizCode`),
  CONSTRAINT `Pub_M_YMDStyleNumAssignBox_FK1` FOREIGN KEY (`BizCode`) REFERENCES `Pf_M_Biz` (`Code`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Pub_M_YMDStyleNumAssignBox`
--

LOCK TABLES `Pub_M_YMDStyleNumAssignBox` WRITE;
/*!40000 ALTER TABLE `Pub_M_YMDStyleNumAssignBox` DISABLE KEYS */;
INSERT INTO `Pub_M_YMDStyleNumAssignBox` VALUES (10,0,'201811',3),(13,15,'2019',3),(13,16,'2019',2),(14,0,'2018',11),(14,0,'2019',2),(16,0,'2018',3),(21,0,'201903',3),(21,0,'201904',2);
/*!40000 ALTER TABLE `Pub_M_YMDStyleNumAssignBox` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `QsQb_A_Zt`
--

DROP TABLE IF EXISTS `QsQb_A_Zt`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `QsQb_A_Zt` (
  `RecDivTag` date NOT NULL,
  `ID` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `InitUsrID` smallint(5) unsigned NOT NULL,
  `InitOrgName` varchar(100) NOT NULL,
  `Bt` varchar(100) NOT NULL,
  `Sy` varchar(1000) NOT NULL,
  `SxLbID` smallint(5) unsigned NOT NULL,
  `Bz` varchar(200) DEFAULT NULL,
  `Bh` varchar(20) DEFAULT NULL,
  `ZrrUsrIDs` varchar(30) DEFAULT NULL,
  `LsYq` varchar(400) DEFAULT NULL,
  `LsQx` date DEFAULT NULL,
  `LsCd` tinyint(3) unsigned DEFAULT NULL,
  `LsQkZj` varchar(400) DEFAULT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE KEY `Bh` (`Bh`),
  KEY `InitUsrID` (`InitUsrID`),
  KEY `SxLbID` (`SxLbID`),
  CONSTRAINT `QsQb_A_Zt_FK1` FOREIGN KEY (`InitUsrID`) REFERENCES `Pf_M_Usr` (`ID`),
  CONSTRAINT `QsQb_A_Zt_FK2` FOREIGN KEY (`SxLbID`) REFERENCES `Pf_M_EntAppCode` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=9 DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `QsQb_A_Zt`
--

LOCK TABLES `QsQb_A_Zt` WRITE;
/*!40000 ALTER TABLE `QsQb_A_Zt` DISABLE KEYS */;
INSERT INTO `QsQb_A_Zt` VALUES ('2018-02-04',1,14,'数据信息部','总部新办公地址选址','总部新办公地址选址\r\n1、僻静；\r\n2、敞亮。',15,NULL,'行政事项-2018-001','11,12','请按要求选址','2018-02-06',98,'经两位同仁竭力工作基本完成总部新办公地址选址任务，遗留问题：\r\n1\r\n2'),('2018-05-21',2,14,'数据信息部','1','1',15,NULL,'行政事项-2018-002','13','5月22日下班前完成','2018-05-22',100,'已完成'),('2018-05-22',3,14,'数据信息部','督办XXX事项','督办XXX事项\r\n1\r\n2',15,NULL,NULL,'15','落实要求：\r\n1\r\n2','2018-11-26',NULL,NULL),('2018-08-06',4,14,'数据信息部','保理签报事项20180806','保理签报事项20180806\r\n1\r\n2',15,NULL,'行政事项-2018-003','11','1\r\n2','2018-08-08',80,'ok'),('2019-04-17',6,12,'业务部','签报事项20190417-1','签报事项20190417-1\r\n1、测试手动选择流程；\r\n2、正常每个环节都踩到。',15,NULL,'行政事项-2019-001','12','啊啊啊啊','2019-04-18',100,'完成'),('2019-04-17',7,12,'业务部','签报事项20190417-2','签报事项20190417-2\r\n分管直接归档。',16,'啊啊啊啊','对外谈判事项-2019-001','13,11','11111111111','2019-04-18',100,'完成'),('2019-04-18',8,12,'业务部','签报事项20190418Debug-1','签报事项20190418Debug-1\r\n1、\r\n2、',15,NULL,'行政事项-2019-002','15,13','落实要求：\r\n1、\r\n2、','2019-04-19',95,'基本完成');
/*!40000 ALTER TABLE `QsQb_A_Zt` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `QsQb_A_Zt_22` AFTER DELETE ON `QsQb_A_Zt` FOR EACH ROW
BEGIN
	update Pf_A_AttachInfo set DelTag='Y' where PrimaryName='QsQb_A_Zt' and PrimaryID=old.ID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Sw_M_GysQyGs`
--

DROP TABLE IF EXISTS `Sw_M_GysQyGs`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Sw_M_GysQyGs` (
  `ID` smallint(5) unsigned NOT NULL AUTO_INCREMENT,
  `Mc` varchar(100) NOT NULL COMMENT '名称（被引用后不得修改）',
  `GsLb` char(1) NOT NULL COMMENT '公司类别',
  `Khh` varchar(100) NOT NULL COMMENT '开户行',
  `Zh` varchar(50) NOT NULL COMMENT '银行账号',
  `Sh` varchar(50) DEFAULT NULL COMMENT '税号',
  `JyFw` varchar(1000) DEFAULT NULL COMMENT '经营范围',
  `Zz` varchar(1000) DEFAULT NULL COMMENT '资质',
  `Dz` varchar(100) DEFAULT NULL COMMENT '地址',
  `Lxr` varchar(20) NOT NULL COMMENT '联系人',
  `LxTel` varchar(40) NOT NULL COMMENT '联系电话',
  `Email` varchar(40) NOT NULL COMMENT '电子邮箱',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `Sw_M_GysQyGs_idx1` (`Mc`),
  KEY `Lxr` (`Lxr`,`LxTel`,`Email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Sw_M_GysQyGs`
--

LOCK TABLES `Sw_M_GysQyGs` WRITE;
/*!40000 ALTER TABLE `Sw_M_GysQyGs` DISABLE KEYS */;
/*!40000 ALTER TABLE `Sw_M_GysQyGs` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `WjHq_A_Zt`
--

DROP TABLE IF EXISTS `WjHq_A_Zt`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `WjHq_A_Zt` (
  `RecDivTag` date NOT NULL COMMENT '分区日期戳',
  `ID` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '业务标识',
  `InitUsrID` smallint(5) unsigned NOT NULL COMMENT '发起人ID',
  `InitOrgName` varchar(100) NOT NULL COMMENT '发起部门',
  `HtMc` varchar(100) NOT NULL COMMENT '合同名称',
  `Bz` varchar(200) DEFAULT NULL COMMENT '备注',
  `HtBh` varchar(40) DEFAULT NULL COMMENT '合同编号',
  `SfDfTgHt` char(1) NOT NULL DEFAULT 'N' COMMENT '是否对方提供合同',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `HtMc` (`HtMc`),
  KEY `InitUsrID` (`InitUsrID`),
  CONSTRAINT `WjHq_A_Zt_fk1` FOREIGN KEY (`InitUsrID`) REFERENCES `Pf_M_Usr` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=14 DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `WjHq_A_Zt`
--

LOCK TABLES `WjHq_A_Zt` WRITE;
/*!40000 ALTER TABLE `WjHq_A_Zt` DISABLE KEYS */;
INSERT INTO `WjHq_A_Zt` VALUES ('2018-06-04',1,13,'审计部','第一个非业务类合同20180606','问题不大！',NULL,'N'),('2018-06-04',2,13,'审计部','第二个非业务类合同20180606','-',NULL,'N'),('2018-06-25',3,13,'审计部','非业务类合同20180627','-',NULL,'N'),('2018-06-26',4,13,'审计部','待办短信接口测试20180628-1',NULL,NULL,'N'),('2018-11-21',5,14,'数据信息部','非业务类合同移动测试20181123','-',NULL,'N'),('2019-03-06',6,16,'运营管理部','非业务类合同测试20190308','-',NULL,'N'),('2019-03-27',7,16,'运营管理部','打印机设置无边距测试','-',NULL,'N'),('2019-04-02',8,13,'数据信息部','非业务类合同20190404','注意议价合规',NULL,'N'),('2019-04-09',9,13,'数据信息部','xxx非业务合同审批20190409','-',NULL,'N'),('2019-04-18',12,12,'业务部','我方自拟非业务类合同20190418-1','-','WFFYW-20190418','N'),('2019-04-18',13,12,'业务部','对方提供非业务合同20190418-2','-','DFFYW-20190418','Y');
/*!40000 ALTER TABLE `WjHq_A_Zt` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `WjHq_A_Zt_22` AFTER DELETE ON `WjHq_A_Zt`
  FOR EACH ROW
BEGIN
	declare vyFjSeq integer unsigned;
	declare done INT default 0;
    declare cur1 cursor for 
    	select Seq from Pf_A_AttachInfo where PrimaryName = 'WjHq_A_Zt1' and PrimaryID=old.ID;
    declare CONTINUE HANDLER FOR NOT FOUND SET done = 1;
    
    open cur1;
    cur1_loop:
    loop
    	fetch cur1 into vyFjSeq;
        if done=1 then 
        	leave cur1_loop;
        end if;
        
        update Pf_A_AttachInfo set DelTag='Y' 
        where PrimaryName in ('WjHq_A_Zt1_Td','WjHq_A_Zt1_TdPdf') and PrimaryID=vyFjSeq;
    end loop;
    close cur1;
    
	update Pf_A_AttachInfo set DelTag='Y' 
    where PrimaryName in ('WjHq_A_Zt1','WjHq_A_Zt1C','WjHq_A_Zt_2DC','WjHq_A_Zt2') and PrimaryID=old.ID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Xj_A_Mx`
--

DROP TABLE IF EXISTS `Xj_A_Mx`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Xj_A_Mx` (
  `RecDivTag` date NOT NULL,
  `ZtID` int(11) unsigned NOT NULL,
  `JbTjID` tinyint(3) unsigned NOT NULL,
  `HzCsRq` date DEFAULT NULL,
  `JbTjKxTs` smallint(3) unsigned NOT NULL DEFAULT '0',
  `SqKsRq` date NOT NULL,
  `SqKsRqBtQt` char(1) NOT NULL,
  `SqJsRq` date NOT NULL,
  `SqJsRqBtQt` char(1) NOT NULL,
  `SqXjTs` decimal(4,1) unsigned NOT NULL,
  `SfSx` char(1) NOT NULL DEFAULT 'Y',
  `SjKsRq` date DEFAULT NULL,
  `SjKsRqBtQt` char(1) DEFAULT NULL,
  `SjJsRq` date DEFAULT NULL,
  `SjJsRqBtQt` char(1) DEFAULT NULL,
  `SjXjTs` decimal(4,1) unsigned NOT NULL DEFAULT '0.0',
  `CqXjTs` decimal(4,1) unsigned NOT NULL DEFAULT '0.0',
  PRIMARY KEY (`ZtID`,`JbTjID`),
  KEY `ZtID` (`ZtID`),
  KEY `JbTjID` (`JbTjID`),
  CONSTRAINT `Xj_A_Mx_fk1` FOREIGN KEY (`ZtID`) REFERENCES `Xj_A_Zt` (`ID`) ON DELETE CASCADE,
  CONSTRAINT `Xj_A_Mx_fk2` FOREIGN KEY (`JbTjID`) REFERENCES `Xj_M_JbTj` (`ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Xj_A_Mx`
--

LOCK TABLES `Xj_A_Mx` WRITE;
/*!40000 ALTER TABLE `Xj_A_Mx` DISABLE KEYS */;
INSERT INTO `Xj_A_Mx` VALUES ('2018-02-04',1,18,NULL,5,'2018-02-05','Q','2018-02-05','Q',1.0,'Y','2018-02-05','Q','2018-02-05','Q',1.0,0.0),('2018-05-22',2,18,NULL,4,'2018-05-14','Q','2018-05-14','Q',1.0,'Y','2018-05-14','Q','2018-05-14','Q',1.0,0.0),('2018-11-03',3,1,NULL,3,'2018-10-08','Q','2018-10-10','Q',3.0,'Y','2018-10-08','Q','2018-10-10','Q',3.0,0.0),('2018-11-21',4,19,NULL,0,'2018-11-23','Q','2018-11-23','Q',1.0,'Y','2018-11-23','Q','2018-11-23','Q',1.0,0.0);
/*!40000 ALTER TABLE `Xj_A_Mx` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Xj_A_Mx_11` BEFORE INSERT ON `Xj_A_Mx`
  FOR EACH ROW
label1:
BEGIN
 	declare vRecDivTag DATE;
 	declare vJbTjKxTs smallint unsigned;
 	declare vJbCode tinyint unsigned;
 	declare vSfBj char(1);
 	declare vInitUsrID smallint unsigned;
 	declare vCnt tinyint unsigned;
 	declare vMinKsRq,vMaxJsRq date;
 	
 	# 分区时间戳
 	select RecDivTag,InitUsrID into vRecDivTag,vInitUsrID from Xj_A_Zt where ID=new.ZtID;
 	set new.RecDivTag = vRecDivTag;
 	
 	# 假别条件可休天数
 	select YxSqTs,JbCode into vJbTjKxTs,vJbCode from Xj_M_JbTj where ID=new.JbTjID;
 	
 	if vJbCode=6 then # 6-年假
 		select coalesce(min(SnKxTs-SnYxTs+BnKxTs-BnYxTs),0) into vJbTjKxTs 
 		from Xj_M_NjTs 
 		where UsrID=vInitUsrID;
 	end if;
 	
 	set new.JbTjKxTs=vJbTjKxTs;
 	
 	# 申请时段约束
 	if new.SqKsRq>new.SqJsRq then 
 		call Xj_A_Mx_11_err1(); # 申请时段填报错误，开始日期在结束日期之后！
 		leave label1;
 	end if;
 	
 	if vJbCode=5 and new.HzCsRq is null then
 		call Xj_A_Mx_11_err2(); # 申请哺乳假要求填报孩子出生日期！
 		leave label1;
 	end if;
 	
 	if vJbCode=5 and new.SqJsRq>=date_add(new.HzCsRq,interval 365 day) then # 5-哺乳假
 		call Xj_A_Mx_11_err3(); # 申请时段填报错误，哺乳假结束时间不能超过孩子出生日期一年以后！
 		leave label1;
 	end if;
 	
 	select SfBj into vSfBj from Xj_A_Zt where ID=new.ZtID;
 	
 	if vSfBj='N' and DATE_FORMAT(new.SqJsRq,'%Y-%m-%d')<DATE_FORMAT(now(),'%Y-%m-%d') then
 		call Xj_A_Mx_11_err4(); # 正常休假应提前申请！
 		leave label1;
 	end if;
 	
 	if vSfBj='Y' and new.SqKsRq>now() then
 		call Xj_A_Mx_11_err5(); # 补假休的应该是过去的时段！
 		leave label1;
 	end if;
 	
 	select count(*) into vCnt from Xj_A_Mx 
 	where exists(select 1 from Xj_A_Zt where ID=Xj_A_Mx.ZtID and InitUsrID=vInitUsrID) and (
 		new.SqKsRq between SqKsRq and SqJsRq or new.SqJsRq between SqKsRq and SqJsRq or 
 		SqKsRq between new.SqKsRq and new.SqJsRq or SqJsRq between new.SqKsRq and new.SqJsRq or 
 		new.SjKsRq between SjKsRq and SjJsRq or new.SjJsRq between SjKsRq and SjJsRq or 
 		SjKsRq between new.SjKsRq and new.SjJsRq or SjJsRq between new.SjKsRq and new.SjJsRq
 		);
 	if vCnt>0 then
 		call Xj_A_Mx_11_err6(); # 同一申请人，申请/实际休假时段与以往申请存在重叠！
 		leave label1;
 	end if;
 	
 	select count(*) into vCnt from Xj_A_Mx where ZtID=new.ZtID;
 	if vCnt>0 then # 多条明细
 		select min(SqKsRq),max(SqJsRq) into vMinKsRq,vMaxJsRq from Xj_A_Mx where ZtID=new.ZtID;
 		
 		if vMaxJsRq!=date_add(new.SqKsRq,interval -1 day) and vMinKsRq!=date_add(new.SqJsRq,interval 1 day) then 
 			call Xj_A_Mx_11_err7(); # 各明细申请休假时段日期必须接续！
 			leave label1;
 		end if;
 	end if;
 	
 	if new.SqKsRq=new.SqJsRq and new.SqKsRqBtQt!=new.SqJsRqBtQt then
 		call Xj_A_Mx_11_err8(); # 若[申请开始日期]=[申请结束日期]，则[申请开始半天全天选择][申请结束半天全天选择]必须相等！
 		leave label1;
 	end if;
 	
 	if new.SqKsRq!=new.SqJsRq and (new.SqKsRqBtQt='S' or new.SqJsRqBtQt='X') then
 		call Xj_A_Mx_11_err9(); # 若[申请开始日期]!=[申请结束日期]，则[申请开始半天全天选择]不能是“上午”、[申请结束半天全天选择]不能是“下午”！
 		leave label1;
 	end if;
 	
 	set new.SqXjTs=Xj_XjTs(new.JbTjID, new.SqKsRq, new.SqKsRqBtQt, new.SqJsRq, new.SqJsRqBtQt);
 	if new.SqXjTs=0 then
 		call Xj_A_Mx_11_errA(); # 申请休假天数为零无意义！
 		leave label1;
 	end if;
 	
 	if new.JbTjKxTs!=0 and new.JbTjKxTs<new.SqXjTs then
 		call Xj_A_Mx_11_errB(); # 申请休假天数超过假别条件可休天数！
 		leave label1;
 	end if;
 	
 	select count(*) into vCnt from Xj_A_Mx 
 	where ZtID=new.ZtID and EXISTS(select 1 from Xj_M_JbTj where ID=Xj_A_Mx.JbTjID and JbCode=vJbCode);
 	
 	if vCnt>0 then # 同一申请假别重复
 		call Xj_A_Mx_11_errC(); # 同一申请假别重复！
 		leave label1;
 	end if;
 	
 	set new.SfSx='Y';
 	set new.SjKsRq=new.SqKsRq;
 	set new.SjKsRqBtQt=new.SqKsRqBtQt;
 	set new.SjJsRq=new.SqJsRq;
 	set new.SjJsRqBtQt=new.SqJsRqBtQt;
 	set new.SjXjTs=new.SqXjTs;
 	set new.CqXjTs=0;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Xj_A_Mx_21` AFTER INSERT ON `Xj_A_Mx` FOR EACH ROW
BEGIN
	update Xj_A_Zt set SqXjZts=SqXjZts+new.SqXjTs,SjXjZts=SjXjZts+new.SjXjTs where ID=new.ZtID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Xj_A_Mx_13` BEFORE UPDATE ON `Xj_A_Mx`
  FOR EACH ROW
label1:
BEGIN
 	declare vJbTjKxTs smallint unsigned;
 	declare vJbCode tinyint unsigned;
 	declare vSfBj char(1);
 	declare vInitUsrID smallint unsigned;
 	declare vCnt tinyint unsigned;
 	
 	select InitUsrID,SfBj into vInitUsrID,vSfBj from Xj_A_Zt where ID=old.ZtID;
 	
 	# 假别条件可休天数
 	select YxSqTs,JbCode into vJbTjKxTs,vJbCode from Xj_M_JbTj where ID=old.JbTjID;
 	
 	if vJbCode=6 then # 6-年假
 		select coalesce(min(SnKxTs-SnYxTs+BnKxTs-BnYxTs),0) into vJbTjKxTs 
 		from Xj_M_NjTs 
 		where UsrID=vInitUsrID;
 	end if;
 	
 	set new.JbTjKxTs=vJbTjKxTs;
 	
 	# 时段约束
 	if new.SqKsRq>new.SqJsRq then 
 		call Xj_A_Mx_13_err1(); # 申请时段填报错误，开始日期在结束日期之后！
 		leave label1;
 	end if;
 	
 	if vJbCode=5 and new.HzCsRq is null then
 		call Xj_A_Mx_13_err2(); # 申请哺乳假要求填报孩子出生日期！
 		leave label1;
 	end if;
 	
 	if vJbCode=5 and new.SqJsRq>=date_add(new.HzCsRq,interval 365 day) then # 5-哺乳假
 		call Xj_A_Mx_13_err3(); # 申请时段填报错误，哺乳假结束时间不能超过孩子出生日期一年以后！
 		leave label1;
 	end if;
 	
 	if vSfBj='N' and DATE_FORMAT(new.SqJsRq,'%Y-%m-%d')<DATE_FORMAT(now(),'%Y-%m-%d') then
 		call Xj_A_Mx_13_err4(); # 正常休假应提前申请！
 		leave label1;
 	end if;
 	
 	if vSfBj='Y' and new.SqJsRq>now() then
 		call Xj_A_Mx_13_err5(); # 补假休的应该是过去的时段！
 		leave label1;
 	end if;
 	
 	select count(*) into vCnt from Xj_A_Mx 
 	where (ZtID!=old.ZtID or JbTjID!=old.JbTjID) and exists(select 1 from Xj_A_Zt where ID=Xj_A_Mx.ZtID and InitUsrID=vInitUsrID) and (
 		new.SqKsRq between SqKsRq and SqJsRq or new.SqJsRq between SqKsRq and SqJsRq or 
 		SqKsRq between new.SqKsRq and new.SqJsRq or SqJsRq between new.SqKsRq and new.SqJsRq or 
 		new.SjKsRq between SjKsRq and SjJsRq or new.SjJsRq between SjKsRq and SjJsRq or 
 		SjKsRq between new.SjKsRq and new.SjJsRq or SjJsRq between new.SjKsRq and new.SjJsRq
 		);
 	if vCnt>0 then
 		call Xj_A_Mx_13_err6(); # 同一申请人，申请/实际休假时段与以往申请存在重叠！
 		leave label1;
 	end if;
 	
 	select count(*) into vCnt from Xj_A_Mx 
 	where ZtID=old.ZtID and JbTjID!=old.JbTjID and (
 		(SqJsRq=date_add(old.SqKsRq,interval -1 day) and old.SqKsRq!=new.SqKsRq) or 
 		(SqKsRq=date_add(old.SqJsRq,interval 1 day) and old.SqJsRq!=new.SqJsRq)
 		);
 	
 	if vCnt>0 then # 多条明细
 		call Xj_A_Mx_13_err7(); # 各明细申请休假时段日期必须接续！
 		leave label1;
 	end if;
 	
 	if new.SqKsRq=new.SqJsRq and new.SqKsRqBtQt!=new.SqJsRqBtQt then
 		call Xj_A_Mx_13_err8(); # 若[申请开始日期]=[申请结束日期]，则[申请开始半天全天选择][申请结束半天全天选择]必须相等！
 		leave label1;
 	end if;
 	
 	if new.SqKsRq!=new.SqJsRq and (new.SqKsRqBtQt='S' or new.SqJsRqBtQt='X') then
 		call Xj_A_Mx_13_err9(); # 若[申请开始日期]!=[申请结束日期]，则[申请开始半天全天选择]不能是“上午”、[申请结束半天全天选择]不能是“下午”！
 		leave label1;
 	end if;
 	
 	if new.SjKsRq=new.SjJsRq and new.SjKsRqBtQt!=new.SjJsRqBtQt then
 		call Xj_A_Mx_13_errA(); # 若[实际开始日期]=[实际结束日期]，则[实际开始半天全天选择][实际结束半天全天选择]必须相等！
 		leave label1;
 	end if;
 	
 	if new.SjKsRq!=new.SjJsRq and (new.SjKsRqBtQt='S' or new.SjJsRqBtQt='X') then
 		call Xj_A_Mx_13_errB(); # 若[实际开始日期]!=[实际结束日期]，则[实际开始半天全天选择]不能是“上午”、[实际结束半天全天选择]不能是“下午”！
 		leave label1;
 	end if;
 	
 	set new.SqXjTs=Xj_XjTs(new.JbTjID, new.SqKsRq, new.SqKsRqBtQt, new.SqJsRq, new.SqJsRqBtQt);
 	if new.SqXjTs=0 then
 		call Xj_A_Mx_13_errC(); # 申请休假天数为零无意义！
 		leave label1;
 	end if;
 	
 	if new.JbTjKxTs!=0 and new.JbTjKxTs<new.SqXjTs then
 		call Xj_A_Mx_13_errD(); # 申请休假天数超过假别条件可休天数！
 		leave label1;
 	end if;
 	
 	if new.SjKsRq>new.SjJsRq then 
 		call Xj_A_Mx_13_errE(); # 实际休假时段填报错误，开始日期在结束日期之后！
 		leave label1;
 	end if;
 	
 	set new.SjXjTs=0;
 	set new.CqXjTs=0;
 	if new.SfSx='Y' then
 		set new.SjXjTs=Xj_XjTs(new.JbTjID, new.SjKsRq, new.SjKsRqBtQt, new.SjJsRq, new.SjJsRqBtQt);
 		if vJbCode=5 then
 			if new.SjJsRq > date_add(new.HzCsRq,interval 365 day) then
 				set new.CqXjTs=new.SjJsRq - date_add(new.HzCsRq,interval 365 day);
 			end if;
 		else
 			if new.SjXjTs>new.SqXjTs then
 				set new.CqXjTs=new.SjXjTs-new.SqXjTs;
 			end if;
 		end if;
 	else
 		set new.SjKsRq=null;
 		set new.SjKsRqBtQt=null;
 		set new.SjJsRq=null;
 		set new.SjJsRqBtQt=null;
 	end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Xj_A_Mx_23` AFTER UPDATE ON `Xj_A_Mx` FOR EACH ROW
BEGIN
	update Xj_A_Zt set SqXjZts=SqXjZts+new.SqXjTs-old.SqXjTs,SjXjZts=SjXjZts+new.SjXjTs-old.SjXjTs,CqXjZts=CqXjZts+new.CqXjTs-old.CqXjTs where ID=old.ZtID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Xj_A_Mx_12` BEFORE DELETE ON `Xj_A_Mx` FOR EACH ROW
BEGIN
 	declare vCnt tinyint unsigned;
 	
 	select count(*) into vCnt from Xj_A_Mx where ZtID=old.ZtID and JbTjID!=old.JbTjID and SqJsRq=date_add(old.SqKsRq,interval -1 day);
 	
 	if vCnt>0 then # 多条明细
 		select count(*) into vCnt from Xj_A_Mx where ZtID=old.ZtID and JbTjID!=old.JbTjID and SqKsRq=date_add(old.SqJsRq,interval 1 day);
 		if vCnt>0 then
 			call Xj_A_Mx_12_err1(); # 删除明细造成申请休假时段不接续！
 		end if;
 	end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Xj_A_Mx_22` AFTER DELETE ON `Xj_A_Mx` FOR EACH ROW
BEGIN
	update Xj_A_Zt set SqXjZts=SqXjZts-old.SqXjTs,SjXjZts=SjXjZts-old.SjXjTs,CqXjZts=CqXjZts-old.CqXjTs where ID=old.ZtID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Xj_A_Zt`
--

DROP TABLE IF EXISTS `Xj_A_Zt`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Xj_A_Zt` (
  `RecDivTag` date NOT NULL,
  `ID` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `InitUsrID` smallint(5) unsigned NOT NULL,
  `InitOrgName` varchar(100) NOT NULL,
  `Sy` varchar(200) NOT NULL,
  `SfBj` char(1) NOT NULL DEFAULT 'N',
  `SqXjZts` decimal(4,1) unsigned NOT NULL,
  `XjSj` datetime DEFAULT NULL,
  `SjXjZts` decimal(4,1) unsigned NOT NULL DEFAULT '0.0',
  `CqXjZts` decimal(4,1) unsigned NOT NULL DEFAULT '0.0',
  PRIMARY KEY (`ID`),
  KEY `InitUsrID` (`InitUsrID`),
  CONSTRAINT `Xj_A_Zt_fk1` FOREIGN KEY (`InitUsrID`) REFERENCES `Pf_M_Usr` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Xj_A_Zt`
--

LOCK TABLES `Xj_A_Zt` WRITE;
/*!40000 ALTER TABLE `Xj_A_Zt` DISABLE KEYS */;
INSERT INTO `Xj_A_Zt` VALUES ('2018-02-04',1,14,'数据信息部','年假测试','N',1.0,'2018-05-22 10:00:49',1.0,0.0),('2018-05-22',2,14,'数据信息部','请年假','Y',1.0,NULL,1.0,0.0),('2018-11-03',3,13,'审计部','结婚补婚假','Y',3.0,NULL,3.0,0.0),('2018-11-21',4,12,'业务部','私事','N',1.0,NULL,1.0,0.0);
/*!40000 ALTER TABLE `Xj_A_Zt` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Xj_A_Zt_11` BEFORE INSERT ON `Xj_A_Zt` FOR EACH ROW
BEGIN
 	declare vCnt tinyint unsigned;
 	
 	select count(*) into vCnt
 	from Pf_A_Biz
 	where BizCode=17 and InitUsrID=new.InitUsrID and Pf_BizNodeSysBitByPt(FlowStatus,1)!='E';
 	
 	if vCnt>0 then
 		call Xj_A_Zt_11_err1(); #上次请假流程未结束，不能申请新的休假！
 	end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Xj_A_Zt_22` AFTER DELETE ON `Xj_A_Zt` FOR EACH ROW
BEGIN
	update Pf_A_AttachInfo set DelTag='Y' where PrimaryName='Xj_A_Zt' and PrimaryID=old.ID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `Xj_M_Jb`
--

DROP TABLE IF EXISTS `Xj_M_Jb`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Xj_M_Jb` (
  `Code` tinyint(2) unsigned NOT NULL,
  `Mc` varchar(10) NOT NULL,
  `SfXyZmFj` char(1) NOT NULL,
  `SfKcGj` char(1) NOT NULL,
  `SfKcFdj` char(1) NOT NULL,
  PRIMARY KEY (`Code`),
  UNIQUE KEY `Mc` (`Mc`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Xj_M_Jb`
--

LOCK TABLES `Xj_M_Jb` WRITE;
/*!40000 ALTER TABLE `Xj_M_Jb` DISABLE KEYS */;
INSERT INTO `Xj_M_Jb` VALUES (1,'病假','Y','Y','Y'),(2,'婚假','Y','N','N'),(3,'产假','Y','N','Y'),(4,'陪产假','Y','Y','Y'),(5,'哺乳假','Y','N','N'),(6,'年假','N','Y','Y'),(7,'事假','N','Y','Y'),(8,'丧假','N','Y','Y'),(9,'调休','N','Y','Y'),(10,'其它','N','Y','Y');
/*!40000 ALTER TABLE `Xj_M_Jb` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `Xj_M_JbTj`
--

DROP TABLE IF EXISTS `Xj_M_JbTj`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Xj_M_JbTj` (
  `ID` tinyint(3) unsigned NOT NULL AUTO_INCREMENT,
  `JbCode` tinyint(2) unsigned NOT NULL,
  `XjTjCode` tinyint(3) unsigned NOT NULL,
  `YxSqTs` smallint(3) unsigned NOT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE KEY `Xj_M_JbTj_UK` (`JbCode`,`XjTjCode`),
  KEY `JbCode` (`JbCode`),
  CONSTRAINT `Xj_M_JbTj_fk1` FOREIGN KEY (`JbCode`) REFERENCES `Xj_M_Jb` (`Code`)
) ENGINE=InnoDB AUTO_INCREMENT=22 DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Xj_M_JbTj`
--

LOCK TABLES `Xj_M_JbTj` WRITE;
/*!40000 ALTER TABLE `Xj_M_JbTj` DISABLE KEYS */;
INSERT INTO `Xj_M_JbTj` VALUES (1,2,1,3),(2,2,2,10),(3,3,1,98),(4,3,9,158),(5,3,8,143),(6,3,7,143),(7,3,6,128),(8,3,5,103),(9,3,4,103),(10,3,3,128),(11,4,1,2),(12,5,1,365),(13,8,10,3),(14,8,13,3),(15,8,12,1),(16,8,11,5),(17,1,1,0),(18,6,1,0),(19,7,1,0),(20,9,1,0),(21,10,1,0);
/*!40000 ALTER TABLE `Xj_M_JbTj` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `Xj_M_NjTs`
--

DROP TABLE IF EXISTS `Xj_M_NjTs`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Xj_M_NjTs` (
  `UsrID` smallint(5) unsigned NOT NULL,
  `SnKxTs` decimal(4,1) unsigned NOT NULL,
  `SnYxTs` decimal(4,1) unsigned NOT NULL,
  `BnKxTs` decimal(4,1) unsigned NOT NULL,
  `BnYxTs` decimal(4,1) unsigned NOT NULL,
  PRIMARY KEY (`UsrID`),
  CONSTRAINT `Xj_M_NjTs_fk1` FOREIGN KEY (`UsrID`) REFERENCES `Pf_M_Usr` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Xj_M_NjTs`
--

LOCK TABLES `Xj_M_NjTs` WRITE;
/*!40000 ALTER TABLE `Xj_M_NjTs` DISABLE KEYS */;
INSERT INTO `Xj_M_NjTs` VALUES (1,0.0,0.0,5.0,0.0),(2,0.0,0.0,15.0,0.0),(3,0.0,0.0,15.0,0.0),(4,0.0,0.0,10.0,0.0),(5,0.0,0.0,10.0,0.0),(6,0.0,0.0,10.0,0.0),(7,0.0,0.0,10.0,0.0),(8,0.0,0.0,10.0,0.0),(9,0.0,0.0,10.0,0.0),(10,0.0,0.0,10.0,0.0),(11,0.0,0.0,10.0,0.0),(12,0.0,0.0,10.0,0.0),(13,0.0,0.0,5.0,0.0),(14,0.0,0.0,5.0,2.0);
/*!40000 ALTER TABLE `Xj_M_NjTs` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `Xj_M_NjTs_13` BEFORE UPDATE ON `Xj_M_NjTs` FOR EACH ROW
BEGIN
 	if new.SnKxTs < new.SnYxTs then
 		call Xj_M_NjTs_13_err1(); # [上年已休年假天数]不能超过[上年可休年假天数]！
 	end if;
 	
 	if new.BnKxTs < new.BnYxTs then
 		call Xj_M_NjTs_13_err2(); # [本年已休年假天数]不能超过[本年可休年假天数]！
 	end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `XxFb_A_Pl`
--

DROP TABLE IF EXISTS `XxFb_A_Pl`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `XxFb_A_Pl` (
  `RecDivTag` date NOT NULL,
  `ID` int(12) unsigned NOT NULL AUTO_INCREMENT,
  `BizID` int(11) unsigned NOT NULL,
  `PlID` int(12) unsigned DEFAULT NULL,
  `SmallOrd` smallint(5) unsigned NOT NULL,
  `TreeLevel` tinyint(3) unsigned NOT NULL,
  `BigOrdCode` varchar(30) NOT NULL,
  `PlRyUsrID` smallint(5) unsigned NOT NULL,
  `PlNr` mediumtext NOT NULL,
  `TjSj` datetime DEFAULT NULL,
  `SfBpb` char(1) NOT NULL DEFAULT 'N',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `ID` (`ID`),
  KEY `BizID` (`BizID`),
  KEY `PlID` (`PlID`),
  KEY `PlRyUsrID` (`PlRyUsrID`),
  CONSTRAINT `XxFb_A_Pl_fk1` FOREIGN KEY (`BizID`) REFERENCES `XxFb_A_Zt` (`ID`) ON DELETE CASCADE,
  CONSTRAINT `XxFb_A_Pl_fk2` FOREIGN KEY (`PlID`) REFERENCES `XxFb_A_Pl` (`ID`) ON DELETE CASCADE,
  CONSTRAINT `XxFb_A_Pl_fk3` FOREIGN KEY (`PlRyUsrID`) REFERENCES `Pf_M_Usr` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `XxFb_A_Pl`
--

LOCK TABLES `XxFb_A_Pl` WRITE;
/*!40000 ALTER TABLE `XxFb_A_Pl` DISABLE KEYS */;
INSERT INTO `XxFb_A_Pl` VALUES ('2018-05-22',1,182,NULL,1,1,'001',14,'好活动','2018-07-06 16:19:06','N'),('2018-05-22',2,182,1,1,2,'001001',13,'同意\r\n1\r\n2','2018-07-06 16:20:57','N'),('2018-05-22',4,182,NULL,2,1,'002',12,'好热闹\r\n','2018-07-06 22:30:47','N'),('2018-05-22',5,182,1,2,2,'001002',12,'同感','2018-07-06 22:31:04','N'),('2018-05-22',6,182,NULL,3,1,'003',5,'<p><em><u><span style=\"font-size:16px\">想好了</span></u></em><img alt=\"yes\" src=\"http://localhost:7001/coaqy/FileApp/XxFb/../../ckeditor/plugins/smiley/images/thumbs_up.png\" style=\"height:23px; width:23px\" title=\"yes\" /><img alt=\"smiley\" src=\"http://localhost:7001/coaqy/FileApp/XxFb/../../ckeditor/plugins/smiley/images/regular_smile.png\" style=\"height:23px; width:23px\" title=\"smiley\" /></p>\r\n\r\n<p>&nbsp;</p>\r\n',NULL,'N'),('2018-05-22',7,182,5,1,3,'001002001',5,'<p><img alt=\"enlightened\" src=\"http://localhost:7001/coaqy/FileApp/XxFb/../../ckeditor/plugins/smiley/images/lightbulb.png\" style=\"height:23px; width:23px\" title=\"enlightened\" /><span style=\"font-size:16px\"><u><em>观点独到！</em></u></span></p>\r\n\r\n<p><img alt=\"\" src=\"/coaqy/FramePub/FileOperate/ShowAppImage.jsp?AppImageFileSeq=509\" /></p>\r\n',NULL,'N');
/*!40000 ALTER TABLE `XxFb_A_Pl` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `XxFb_A_Pl_11` BEFORE INSERT ON `XxFb_A_Pl`
  FOR EACH ROW
BEGIN
 	declare vRecDivTag date;
 	
 	select RecDivTag into vRecDivTag from XxFb_A_Zt where ID=new.BizID;
 	set new.RecDivTag=vRecDivTag;
 	
 	if new.PlID is null then
 		set new.SmallOrd=(select COALESCE(max(SmallOrd),0)+1 from XxFb_A_Pl where BizID = new.BizID and PlID is null);
 		set new.TreeLevel=1;
 		set new.BigOrdCode=LPAD(CONCAT(new.SmallOrd,''),3,'0');
 	else
 		set new.SmallOrd=(select COALESCE(max(SmallOrd),0)+1 from XxFb_A_Pl where PlID = new.PlID);
 		select TreeLevel + 1, concat(BigOrdCode,LPAD(concat(new.SmallOrd,''),3,'0')) 
 		into @TreeLevel, @BigOrdCode 
 		from XxFb_A_Pl 
 		where ID = new.PlID;
 		
 		set new.TreeLevel=@TreeLevel;
 		set new.BigOrdCode=@BigOrdCode;
 	end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `XxFb_A_Pl_21` AFTER INSERT ON `XxFb_A_Pl` FOR EACH ROW
BEGIN
    update XxFb_A_Zt set PlRd=PlRd+1 where ID=new.BizID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `XxFb_A_Pl_23` AFTER UPDATE ON `XxFb_A_Pl` FOR EACH ROW
BEGIN
 	declare vAppUrl,vBt varchar(100);
 	declare vPrompt varchar(1000);
 	declare vInitUsrID,vZdPlRyUsrID smallint unsigned;
 	
 	if old.TjSj is null and new.TjSj is not null then
 		Select AppUrl Into vAppUrl From Pf_M_Ent;
 		select Bt,InitUsrID into vBt,vInitUsrID from XxFb_A_Zt where ID=new.BizID;
 		
 		if new.PlID is null then 
 			# 针对信息主体提交评论
 			set vPrompt=concat(Pf_UsrcName(vInitUsrID),'，你好！',Char(13),Char(10),'    针对你发的信息[',vBt,']，[',
 				Pf_OrgFullName(Pf_UsrMainOrgID(new.PlRyUsrID)),'/',Pf_UsrcName(new.PlRyUsrID),']发表了评论，可以去公司OA看看。',
 				char(13),char(10),char(13),char(10),'公司OA访问地址是：',vAppUrl);
 			insert into Pf_D_PromptMail values (null, now(), '信息评论提醒',vPrompt, now(), 'N');
 			insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(vInitUsrID),'Z');
 		else
 			# 针对评论提交的评论
 			select PlRyUsrID into vZdPlRyUsrID from XxFb_A_Pl where ID=new.PlID;
 			
 			set vPrompt=concat(Pf_UsrcName(vZdPlRyUsrID),'，你好！',Char(13),Char(10),'    针对信息[',vBt,']你发的评论，[',
 				Pf_OrgFullName(Pf_UsrMainOrgID(new.PlRyUsrID)),'/',Pf_UsrcName(new.PlRyUsrID),']@你发表了评论，可以去公司OA看看。',
 				char(13),char(10),char(13),char(10),'公司OA访问地址是：',vAppUrl);
 			insert into Pf_D_PromptMail values (null, now(), '信息评论提醒',vPrompt, now(), 'N');
 			insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(vZdPlRyUsrID),'Z');
 		end if;
 	end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `XxFb_A_Pl_22` AFTER DELETE ON `XxFb_A_Pl`
  FOR EACH ROW
BEGIN
	update XxFb_A_Zt set PlRd=PlRd-1 where ID=old.BizID;
    update Pf_A_AttachInfo set DelTag='Y' where PrimaryName in ('XxFb_A_Pl','XxFb_A_PlNq') and PrimaryID=old.ID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `XxFb_A_Zt`
--

DROP TABLE IF EXISTS `XxFb_A_Zt`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `XxFb_A_Zt` (
  `RecDivTag` date NOT NULL,
  `ID` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `InitUsrID` smallint(5) unsigned NOT NULL,
  `InitOrgName` varchar(100) NOT NULL,
  `Bt` varchar(100) NOT NULL,
  `Nr` mediumtext,
  `GsLmID` smallint(5) unsigned NOT NULL,
  `GkLb` char(1) NOT NULL DEFAULT 'N',
  `YwZt` char(1) NOT NULL DEFAULT 'R',
  `FwRd` smallint(5) unsigned NOT NULL DEFAULT '0',
  `PlRd` smallint(5) unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `ID` (`ID`),
  UNIQUE KEY `XxFb_A_Zt_UK` (`Bt`,`GsLmID`),
  KEY `InitUsrID` (`InitUsrID`),
  KEY `GsLmID` (`GsLmID`),
  CONSTRAINT `XxFb_A_Zt_fk1` FOREIGN KEY (`InitUsrID`) REFERENCES `Pf_M_Usr` (`ID`),
  CONSTRAINT `XxFb_A_Zt_fk2` FOREIGN KEY (`GsLmID`) REFERENCES `XxFb_M_Lm` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=190 DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `XxFb_A_Zt`
--

LOCK TABLES `XxFb_A_Zt` WRITE;
/*!40000 ALTER TABLE `XxFb_A_Zt` DISABLE KEYS */;
INSERT INTO `XxFb_A_Zt` VALUES ('2018-05-10',8,14,'数据信息部','火车头俱乐部开张了','<h3><img alt=\"\" src=\"/coaqy/PopImage?MA=A&ImgFileIDSeq=151\" style=\"float:left; height:260px; margin-right:10px; width:300px\" />火车头俱乐部开张了</h3>\r\n\r\n<p>火车头俱乐部开张了，火车头俱乐部开张了，火车头俱乐部开张了</p>\r\n\r\n<p>重要的事情说3遍</p>\r\n',15,'P','P',1,0),('2018-05-10',9,14,'数据信息部','公司夏游纪实','<h3><img alt=\"\" src=\"/coaqy/PopImage?MA=A&ImgFileIDSeq=152\" style=\"float:left; height:260px; margin-right:10px; width:300px\" />公司夏游纪实</h3>\r\n\r\n<p>1、全体香格里拉集合；</p>\r\n\r\n<p>2、乘大巴向特格丽塔啦出发</p>\r\n',15,'P','P',1,0),('2018-05-16',10,13,'审计部','深圳1.61亿巨奖得主现身领奖 去年曾中二等奖','<p>&nbsp;</p>\r\n\r\n<div class=\"text-title\" style=\"-webkit-text-stroke-width:0px; background-color:#ffffff; border-bottom-width:0px; border-left-width:0px; border-right-width:0px; border-top-width:0px; color:#666666; font:12px/20px \'PingFang SC\', Arial, 微软雅黑, 宋体, simsun, sans-serif; letter-spacing:normal; padding-bottom:0px; padding-left:0px; padding-right:0px; padding-top:0px; position:relative; text-indent:0px; text-transform:none; top:-6px; white-space:normal; widows:1; word-spacing:0px\">\r\n<h1>深圳1.61亿巨奖得主现身领奖 去年曾中二等奖</h1>\r\n\r\n<div class=\"article-info\" style=\"border-bottom-width:0px; border-left-width:0px; border-right-width:0px; border-top-width:0px; color:#999999; font-size:14px; line-height:20px; padding-bottom:0px; padding-left:0px; padding-right:0px; padding-top:15px\"><span style=\"font-size:14px\">2018-05-17 15:23</span>&nbsp;<span style=\"font-size:14px\">来源:<a href=\"http://toutiao.3g.oeeee.com/mp/toutiao/BAAFRD00002018051780171.html\" style=\"border-left-width: 0px; font-size: 14px; text-decoration: none; border-right-width: 0px; border-bottom-width: 0px; color: rgb(153,153,153); padding-bottom: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; padding-right: 0px; border-top-width: 0px; background-color: transparent\" target=\"_blank\">南方都市报</a></span></div>\r\n</div>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px\">原标题：深圳1.61亿巨奖得主现身领奖 去年曾中二等奖</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px\">　　&nbsp;<strong>报料有奖</strong></p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px\"><strong>南都深圳报料电话：0755-82121212</strong></p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px\">南都讯 记者张馨怡 &ldquo;我中了1.6亿，来兑奖的&hellip;&hellip;&rdquo;等候了两天，亿元巨奖得主黎先生于5月17日上午，在家人陪同下现身深圳福彩兑奖大厅兑奖。黎先生的一句话，让整个兑奖大厅沸腾了！</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px\"><img src=\"/coaqy/PopImage?MA=A&ImgFileIDSeq=163\" style=\"border-bottom-width:0px; border-left-width:0px; border-right-width:0px; border-top-width:0px; display:block; font-size:16px; margin:10px auto 0px; max-width:100%; padding-bottom:0px; padding-left:0px; padding-right:0px; padding-top:0px; width:500px\" /></p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px\">在深圳福彩史上最大奖得主来领奖之前，深圳福彩中心早早准备好了横幅、支票、口罩、帽子、面具，尽可能地保护大奖得主的隐私。验票兑奖、戴上面具参加颁奖仪式后，大奖得主黎先生分享了此次购彩经历。</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px\">买水顺路买彩票 去年中过二等奖</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px\">黎先生是60后，平时自己经营公司，工作之余的最大爱好就是买彩票，&ldquo;我买彩票有15年了，每期都买。&rdquo;因为家庭条件允许，所以黎先生每次购买彩票的金额都在千元左右。</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px\">此次购买彩票，黎先生是刚好路过投注站，想在隔壁的便利店买瓶水喝，发现还是个购票点，就顺便去买了几张彩票。黎先生还透露，这并非自己首次中奖，&ldquo;去年还中过双色球二等奖。&rdquo;这手气也是没谁了。</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px\"><img src=\"/coaqy/PopImage?MA=A&ImgFileIDSeq=164\" style=\"border-bottom-width:0px; border-left-width:0px; border-right-width:0px; border-top-width:0px; display:block; font-size:16px; margin:10px auto 0px; max-width:100%; padding-bottom:0px; padding-left:0px; padding-right:0px; padding-top:0px; width:500px\" /></p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px\">喜中巨奖心情难平 领奖上一夜四点才睡</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px\">黎先生中的一等奖是在5月15日晚开出的，为什么到了17日才来领奖？对此，黎先生表示，他是16日去家里附近的投注站验票时，才发现自己中了大奖。&ldquo;当时我准备验票，拿出票自己先看，结果发现，怎么前6个号码都中了？再一看，蓝球07也中了！&rdquo;</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px\">在发现自己中奖后，黎先生向投注站的销售员确认，5月15日双色球开的是不是第2018055期，看到销售员点头后，黎先生更加确定就是自己中了大奖，赶忙&ldquo;逃出&rdquo;了投注站。</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px\">回家后，黎先生把买彩票中大奖的消息分享给家人，还被误以为在说笑。&ldquo;家人都觉得我在和他们开玩笑，因为我经常这样开玩笑。&rdquo;</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px\">喜中巨奖，再平常心也很难淡定。16日当晚，平时睡眠质量很好的黎先生翻来覆去睡不着，&ldquo;差不多凌晨四点才睡着的，就一直在想明天要怎么样去兑奖。&rdquo;</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px\">选号秘籍：每期研究走势 参考了近期双色球</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px\">在爆出亿元大奖后的消息后，不少彩民都关心大奖得主是怎样选的号码。对此，黎先生也毫无保留，他表示自己买彩票十多年，每次都会研究走势图、热冷号。</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px\">而这次中奖的号码则是自己根据近期的双色球走势和其他玩法的号码组合而成，&ldquo;这组号码最特别的应该是蓝球07，因为我上次中双色球二等奖就是差了个07，这次能中头奖真的是纯属运气好。&rdquo;</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px\">同时黎先生建议，买彩票要抱着做公益的心态，&ldquo;不要只想着中奖。能中奖是运气好，没中奖就是做公益。&rdquo;</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px\">对于巨额奖金的使用，黎先生称还没有完全想好，但是他表示，应该会把大部分的钱投到公司里，让公司能经营得更加完善，为更多人带来福利。</p>\r\n\r\n<p style=\"margin-left:0px; margin-right:0px; text-align:right\">责任编辑：<span style=\"font-size:14px\">刘爱迪 UN918</span></p>\r\n',16,'P','P',1,0),('2018-05-22',173,14,'数据信息部','中国信达召开2018年度工作会议暨表彰大会','\r\n<p class=\"sub_text\">\r\n\r\n		  <P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">&nbsp;&nbsp;&nbsp; 2018</SPAN><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">年<SPAN>1</SPAN>月<SPAN>22</SPAN>日至<SPAN>25</SPAN>日，中国信达召开<SPAN>2018</SPAN>年度工作会议暨表彰大会，学习贯彻党的十九大、全国金融工作会议、中央经济工作会议精神及银监会有关决策部署，表彰<SPAN>2017</SPAN>年公司系统先进集体和个人，回顾总结<SPAN>2017</SPAN>年工作，部署<SPAN>2018</SPAN>年各项工作。侯建杭董事长发表了重要讲话，陈孝周总裁作工作报告。大会由龚建德监事长主持。财政部、银监会相关领导到会指导。公司领导、董事出席，总部各部室、各分子公司主要负责人参加。</SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\">&nbsp;</P>\r\n<P style=\"TEXT-ALIGN: center; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><IMG style=\"WIDTH: 700px\" border=0 src=\"/coaqy/PopImage?MA=A&ImgFileIDSeq=392\"></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\"></SPAN>&nbsp;</P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">&nbsp;&nbsp;&nbsp; 会上，侯建杭董事长围绕进一步学习贯彻十九大精神、提升服务实体经济水平、推动公司发展方式转变、推进党建工作纵深发展发表了重要讲话。<SPAN>2017</SPAN>年，中国信达在监管部门的领导和支持下，在全体干部员工的努力奋斗下，资产规模、经营收入和净利润保持稳健增长，主业优势持续凸显，战略布局更加科学，业务结构显著优化，全面风险管理基础进一步夯实。侯建杭董事长在讲话中明确了公司在新形势下的指导思想、发展原则、发展定位和发展目标，指出要全面贯彻党的十九大精神，以习近平新时代中国特色社会主义思想为指导，加强党对公司各项工作的领导，坚持稳中求进工作总基调，坚持新发展理念，把握新时代机遇，深化转型改革，更好地服务实体经济发展。他强调要进一步发挥功能优势，完善业务模式，要坚守主业、做精专业、做强事业、严控风险，提升发展质量和集团运营效率。要用习近平新时代中国特色社会主义思想指导各项工作，加强党的领导、深化经营融合，深化从严治党，找准新时代公司党建工作规律，全面提升党建科学化水平，为公司改革发展提供坚实保障。</SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">&nbsp;&nbsp;&nbsp; 陈孝周总裁全面总结了<SPAN>2017</SPAN>年中国信达的业务经营情况。他指出，在市场紧平衡、防风险、去杠杆、严监管的政策环境和内外部巨大挑战的压力下，公司强化市场拓展，抓好重大项目，推进风险化解，强化基础管理，经营绩效不断提升，较好地完成了董事会年初下达的各项经营目标。他强调，新的一年，要加大力度回归本源、聚焦主业，积极参与供给侧结构性改革，严控重点风险，切实增强战略定力和业务自信。要继续抓好差异化、特色化和专业经营，继续推进业务改革创新，进一步提高主业经营能力，继续提升做强战略性业务能力，大力提升子公司的协同价值，着力加强风险管理，推进基础管理的制度化和规范化，在严格落实监管要求的同时，不断优化发展路径，推动公司持续健康稳定发展。</SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">&nbsp;&nbsp;&nbsp; 龚建德监事长宣读了公司系统<SPAN>2017</SPAN>年先进表彰相关决定。公司领导分别对公司系统业务能手、服务标兵、先进个人和先进单位、公司系统 “五好党支部”、公司风险管理先进单位及个人代表进行了现场表彰，对<SPAN>2017</SPAN>年在工会和政研条线获得奖项的单位和个人进行了通报，对他们在金融系统宣传公司改革发展成果、展示信达员工良好风貌、树立中国信达品牌形象等方面所做的贡献给予了肯定。</SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\">&nbsp;</P>\r\n<P style=\"TEXT-ALIGN: center; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\"><IMG style=\"WIDTH: 700px\" border=0 src=\"/coaqy/PopImage?MA=A&ImgFileIDSeq=393\"></SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\"></SPAN>&nbsp;</P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">&nbsp;&nbsp;&nbsp; 庄恩岳副总裁作了会议总结发言。他指出，此次年度工作会议主题明确，内容丰富，务实高效，取得了预期目的。会议总结了工作、增强了信心，统一了思想、凝聚了共识，分析了形势、明确了任务，交流了经验、拓宽了思路。庄恩岳副总裁要求公司系统认真学习传达和严格贯彻落实会议精神，以高度的责任感和使命感，全力以赴做好<SPAN>2018</SPAN>年党建和各项经营工作。</SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">&nbsp;&nbsp;&nbsp; 总部各部室、各分子公司主要负责人围绕侯建杭董事长重要讲话、陈孝周总裁工作报告和<SPAN>2018</SPAN>年重点工作安排进行了分组讨论。大家纷纷表示，会议深入分析了公司面临的形势，提出公司未来几年的发展和经营策略，既明确了战略方向，又作出了战术指导，是指导公司持续健康发展的行动指南。与会代表还结合会议精神和各自工作，对公司经营和体制机制改革提出了意见和建议。</SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\"></SPAN>&nbsp;</P>\r\n		\r\n\r\n</p>\r\n<div>\r\n <P align=right id=\"textset\">字体大小[ <A \r\n href=\"javascript:doZoom(14)\">大</A> <A \r\n href=\"javascript:doZoom(12)\">中</A> <A \r\n href=\"javascript:doZoom(9)\">小</A> ] </P>\r\n',15,'P','P',1,0),('2018-05-22',174,14,'数据信息部','中国信达总裁陈孝周出席“国家所需 香港所长——共拓‘一带一路’策略机遇”论坛并作专题论坛演讲','\r\n<p class=\"sub_text\">\r\n\r\n		  <P>\r\n<P style=\"TEXT-ALIGN: center; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\"><IMG style=\"WIDTH: 700px\" border=0 src=\"/coaqy/PopImage?MA=A&ImgFileIDSeq=394\"></SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\"></SPAN>&nbsp;</P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">&nbsp;&nbsp;&nbsp; 2018</SPAN><SPAN><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">年<SPAN>2</SPAN>月<SPAN>3</SPAN>日，香港特别行政区政府及“一带一路”总商会在北京人民大会堂举办 “国家所需 香港所长——共拓‘一带一路’策略机遇”论坛。全国人大常委会委员长张德江出席论坛开幕式并发表题为“迈进新时代共筑中国梦”的主旨演讲，香港特别行政区行政长官林郑月娥作主题发言。中国信达总裁陈孝周出席本次论坛，担任“金融与投资”专题论坛演讲嘉宾并作了题为“发挥金融资产管理公司优势助力香港参与‘一带一路’建设”的演讲。</SPAN></SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\"></SPAN></SPAN>&nbsp;</P>\r\n<P style=\"TEXT-ALIGN: center; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><IMG style=\"WIDTH: 700px\" border=0 src=\"/coaqy/PopImage?MA=A&ImgFileIDSeq=395\"></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\"></SPAN>&nbsp;</P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">&nbsp;&nbsp;&nbsp; 陈孝周总裁在演讲中指出，香港作为国际金融中心，资本市场发达、融资渠道多样、金融产品丰富，同时具有文化多元的特点，在“一带一路”建设的资金融通、民心相通方面能够发挥自身独特的优势与作用。他表示，在参与“一带一路”建设的过程中，很多企业需要的不仅仅是单一的金融产品，更多的是一揽子、综合性、定制化的金融服务解决方案，而这正是包括信达在内的中国金融资产管理公司的特长和优势所在。中国信达金融牌照齐全、金融功能多样，涵盖商业银行、证券、资产管理、保险、信托、租赁等金融服务领域，能够根据企业自身特点、具体需求，充分发挥综合金融服务功能，以香港为桥头堡，通过香港发达的金融市场实现内外联动，为客户在“一带一路”沿线国家开展国际产能合作、基础设施建设等提供个性化、特色化、差异化的综合金融服务方案。</SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; TEXT-INDENT: 24pt; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">陈孝周总裁强调，近年来，中国信达积极响应国家倡议，充分发挥自身独特优势，借助香港发达成熟的资本市场，在大力支持内地企业参与“一带一路”建设方面进行了积极探索、尝试并取得了初步成效。中国信达通过在香港上市、增发，发行优先股、次级债、公募债和私募债等方式，募集大量资金，用于支持内地企业参与“一带一路”建设，在沿线国家开展收购、投资活动，比如通过在港及境内投融资平台支持重要化工集团客户成功收购“一带一路”沿线某国一家全球领先的农药企业等。</SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; TEXT-INDENT: 24pt; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">陈孝周总裁还就内地与香港如何共拓“一带一路”建设中的商机、业务发展策略等重要问题与现场嘉宾们进行了深入交流。</SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; TEXT-INDENT: 24pt; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">本次论坛共设三个专题论坛，主题分别为“金融与投资”、“专业服务”、“商贸、产业发展及科技应用”，内地及香港政界、商界约<SPAN>600</SPAN>名嘉宾参加了论坛。“金融与投资”专题论坛由香港特别行政区政府财经事务及库务局局长刘怡翔主持，其他主讲嘉宾分别是亚洲基础设施投资银行行长金立群、香港交易及结算所有限公司主席周松岗、中国人民银行副行长范一飞、香港金融管理局总裁陈德霖和中国银行董事长陈四清。</SPAN></SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\">&nbsp;</P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">&nbsp;&nbsp;&nbsp; 附：陈孝周总裁参加论坛演讲全文</SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\">&nbsp;</P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: center; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\" align=center><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\"><STRONG>发挥金融资产管理公司优势</STRONG></SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: center; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\" align=center><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\"><STRONG>助力香港参与“一带一路”建设</STRONG></SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: center; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\" align=center><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">中国信达资产管理股份有限公司总裁</SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: center; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\" align=center><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">南洋商业银行有限公司董事长</SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: center; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\" align=center><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">陈孝周</SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: center; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\" align=center><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">2018</SPAN><SPAN><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">年<SPAN>2</SPAN>月<SPAN>3</SPAN>日</SPAN></SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\">&nbsp;</P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; TEXT-INDENT: 24pt; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">尊敬的林郑月娥特首，尊敬的肖主任，尊敬的张主任，尊敬的王主任，各位嘉宾，女士们、先生们：</SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; TEXT-INDENT: 24pt; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">上午好！</SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; TEXT-INDENT: 24pt; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">非常高兴参加“国家所需 香港所长——共拓‘一带一路’策略机遇”论坛。我想从资产管理公司角度，就如何助力香港参与“一带一路”建设，谈三个方面的体会。</SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; TEXT-INDENT: 24pt; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\"><STRONG>一是香港在“一带一路”建设中具有独特优势。</STRONG>资金融通是“一带一路”建设最为重要的内容之一，香港作为重要的国际金融中心，在资金融通方面具有独特的优势：专业队伍、多渠道的融资、发达的资本市场等等。另外，民心相通也是“一带一路”建设的重要方面。中国信达旗下的南洋商业银行，作为根植于香港的本地银行，<SPAN>69</SPAN>年来一直服务于全球各地的华人华侨。在“一带一路”沿线国家，分布着<SPAN>4000</SPAN>多万华人华侨，他们在当地经济中占有重要地位，我们在向他们提供金融服务的同时，也能够起到积极的民心相通的作用。</SPAN></SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; TEXT-INDENT: 24pt; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\"><STRONG>二是金融资产管理公司在助力香港参与“一带一路”建设方面能够发挥独特作用。</STRONG>香港金融业十分发达，无论是股权融资还是债权融资方面的金融产品都十分丰富。从金融资产管理公司的经验来看，我们的客户在参与“一带一路”建设过程中，需要的往往不是单一的金融产品，而是一揽子的、综合性的金融服务，这与我们金融资产管理公司的特点十分契合。相比于其他大型金融机构，中国的金融资产管理公司在规模上属于“小企业”，但在服务实体经济方面却起着独特的作用。<STRONG>一方面</STRONG>，我们可以直接从事与股权相关的活动，持有、经营和管理各类股权，同时发挥股债结合业务优势，支持内地企业以香港为桥头堡，内外联动，利用香港平台开发跨境金融业务，在“一带一路”沿线国家积极开展并购重组，实现全球化战略布局。<STRONG>另一方面</STRONG>，中国信达金融牌照齐全，涵盖商业银行、证券、资产管理、保险、信托、租赁等领域，能够根据企业自身的特点、具体的需求，结合香港发达的金融市场，充分发挥综合金融服务功能，为内地企业在“一带一路”沿线国家开展国际产能合作、基础设施建设提供个性化、特色化、差异化服务，为客户提供量身定制的金融解决方案。</SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; TEXT-INDENT: 24pt; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\"><STRONG>三是中国信达积极探索参与“一带一路”建设并初见成效。</STRONG>“一带一路”沿线国家基础设施相对落后，有着巨大的基础设施投融资需求。随着国家供给侧结构性改革不断深化，产品更新换代加快，做大先进产能，龙头企业走出去收购兼并，都离不开金融服务。香港可以利用其丰富的融资经验、较低的融资成本和创新能力，开展银团贷款、项目融资、债券发行、资产证券化、财务顾问等业务。尤其是香港可以发挥发达的资本市场、多元化的融资渠道优势，根据客户不同需求，提供多维度综合金融方案。近年来，中国信达积极响应国家倡议，充分利用自身优势，根据客户需求，借助香港发达成熟的资本市场，在大力支持内地企业参与“一带一路”建设方面进行了积极探索并取得了初步成效。我们先后通过在香港上市、增发，发行优先股、次级债、公募债和私募债等方式，募集大量资金，用于支持内地企业在“一带一路”沿线国家开展收购、投资活动，如通过在港及境内投融资平台支持我们的一个重要化工集团客户收购“一带一路”沿线某国家一家全球领先的农药企业等。</SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; TEXT-INDENT: 24pt; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">中国信达将继续秉承服务国家“一带一路”建设宗旨，充分发挥自身独特优势，积极利用香港投融资平台，在传统海外资产布局和金融服务的基础上，围绕内地企业的“一带一路”投融资需求，通过重点项目，设计定制化的金融解决方案，在“一带一路”建设框架内，更好服务于香港连接中国与世界的桥梁纽带作用。</SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; TEXT-INDENT: 24pt; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">谢谢大家！</SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; TEXT-INDENT: 24pt; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\"></SPAN>&nbsp;</P>\r\n		\r\n\r\n</p>\r\n<div>\r\n <P align=right id=\"textset\">字体大小[ <A \r\n href=\"javascript:doZoom(14)\">大</A> <A \r\n href=\"javascript:doZoom(12)\">中</A> <A \r\n href=\"javascript:doZoom(9)\">小</A> ] </P>\r\n',15,'P','P',1,0),('2018-05-22',175,14,'数据信息部','中国信达举行2018年在京退休老干部迎新春团拜会','\r\n<p class=\"sub_text\">\r\n\r\n		  <P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">&nbsp;&nbsp;&nbsp; 在新春佳节即将来临之际，<SPAN>2</SPAN>月<SPAN>7</SPAN>日，中国信达党委召开退休老干部迎新春团拜会，公司领导与退休老干部欢聚一堂，共迎新春佳节、共话转型发展。陈孝周总裁出席并致辞，中国信达老领导朱登山、刘亚晶、肖林等<SPAN>32</SPAN>位退休老干部应邀参加。刘丽更副总裁陪同出席。</SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; TEXT-INDENT: 24pt; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">陈孝周总裁代表公司党委向退休老领导、老同志致以新春问候和祝福，介绍了公司一年来认真贯彻全国金融工作会议精神，锐意进取、攻坚克难，在聚焦主业、做精专业等方面取得的成效，并展望了<SPAN>2018</SPAN>年的发展目标。他表示，公司取得的成绩离不开老领导、老同志做出的重要贡献，做好老同志的服务也是公司一项重要工作，关键是多为老同志做实事，多办好事，尽心尽力解决实际困难，切实把党的温暖送到每一位老同志的心坎上，也希望老干部们一如既往地关心和支持公司的经营发展。<SPAN>&nbsp; </SPAN></SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; TEXT-INDENT: 24pt; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">与会老干部们对公司<SPAN>2017</SPAN>年取得的经营业绩感到欣慰，对公司的关心表示感谢，并就公司未来的发展及退休员工工作积极建言献策。会场洋溢在欢乐喜庆的气氛中。</SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\">&nbsp;</P>\r\n<P style=\"TEXT-ALIGN: center; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><IMG style=\"WIDTH: 700px\" border=0 src=\"/coaqy/PopImage?MA=A&ImgFileIDSeq=396\"></P>\r\n<P style=\"TEXT-ALIGN: center; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><FONT face=\"Times New Roman\"></FONT>&nbsp;</P>\r\n		\r\n\r\n</p>\r\n<div>\r\n <P align=right id=\"textset\">字体大小[ <A \r\n href=\"javascript:doZoom(14)\">大</A> <A \r\n href=\"javascript:doZoom(12)\">中</A> <A \r\n href=\"javascript:doZoom(9)\">小</A> ] </P>\r\n',15,'P','P',1,0),('2018-05-22',176,14,'数据信息部','时不我待 只争朝夕 不断开创公司改革发展新局面','\r\n<p class=\"sub_text\">\r\n\r\n		  <P><FONT size=3 face=宋体>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: center; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\" align=center><B><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 18pt\">时不我待 只争朝夕 不断开创公司改革发展新局面</SPAN></B></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: center; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\" align=center>&nbsp;</P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: center; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\" align=center><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\"><SPAN>&nbsp;&nbsp;</SPAN></SPAN><B><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 15pt\">——公司领导新春首个工作日看望慰问总部员工</SPAN></B></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\">&nbsp;</P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">&nbsp;&nbsp;&nbsp; 2</SPAN><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">月<SPAN>22</SPAN>日，春节后首个工作日，陈孝周总裁等公司领导深入总部各部室，看望慰问员工并送上新春祝福。</SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; TEXT-INDENT: 24pt; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">上午<SPAN>9</SPAN>时，公司领导逐层看望慰问总部员工，与广大员工亲切交谈，展望新年。陈孝周总裁在走访中，对大家去年的工作成果给予了充分肯定，衷心感谢大家过去一年为公司改革发展所付出的辛勤努力。陈孝周总裁勉励大家，一年之计在于春，希望全体员工深入学习贯彻落实党的十九大精神，以习近平新时代中国特色社会主义思想为指导，不忘初心、牢记使命，聚焦主业、做精专业，鼓足干劲、再接再厉，为<SPAN>2018</SPAN>年公司经营管理各项工作开好局、起好步，为推动公司持续稳健发展作出更大成绩<SPAN>,</SPAN>为化解金融风险、服务实体经济、助力改革发展作出新的贡献。</SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; TEXT-INDENT: 24pt; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">大家纷纷表示，一定不负公司领导的重托，以崭新的精神风貌和昂扬的斗志迅速投入工作状态，坚持战略定力和业务自信，一步一个脚印地把公司既定工作部署落到实处，以更加优异的工作业绩，确保年内各项任务目标的圆满完成。</SPAN></P></FONT>&nbsp; \r\n		\r\n\r\n</p>\r\n<div>\r\n <P align=right id=\"textset\">字体大小[ <A \r\n href=\"javascript:doZoom(14)\">大</A> <A \r\n href=\"javascript:doZoom(12)\">中</A> <A \r\n href=\"javascript:doZoom(9)\">小</A> ] </P>\r\n',15,'P','P',1,0),('2018-05-22',177,14,'数据信息部','中国信达总部机关举办“快乐工作，健康生活”元宵节活动','\r\n<p class=\"sub_text\">\r\n\r\n		  <P><FONT color=#545454 size=3 face=宋体>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><FONT style=\"COLOR: #000000\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; COLOR: #000000; FONT-SIZE: 12pt\">&nbsp;&nbsp;&nbsp; 3</SPAN><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; COLOR: #000000; FONT-SIZE: 12pt\">月2日，中国信达总部机关全体员工欢聚一堂，共同参加了团队比赛和个人游艺活动。</SPAN></FONT></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; TEXT-INDENT: 24pt; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; COLOR: #000000; FONT-SIZE: 12pt\">元宵节“元宵圆好梦”主题活动是中国信达总部机关的品牌活动，已连续举办了四年。活动丰富了员工业余文化生活，活跃了节日气氛，增强了团队凝聚力和集体荣誉感，诠释了“快乐工作、健康生活”的理念，营造了团结、和谐、融洽的工作氛围。</SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; TEXT-INDENT: 24pt; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\">&nbsp;</P>\r\n<P></P></SPAN></FONT>\r\n		\r\n\r\n</p>\r\n<div>\r\n <P align=right id=\"textset\">字体大小[ <A \r\n href=\"javascript:doZoom(14)\">大</A> <A \r\n href=\"javascript:doZoom(12)\">中</A> <A \r\n href=\"javascript:doZoom(9)\">小</A> ] </P>\r\n',15,'P','P',1,0),('2018-05-22',178,14,'数据信息部','光影记录大国实力   奋斗奏响时代乐章','\r\n<p class=\"sub_text\">\r\n\r\n		  <P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: center; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\" align=center><SPAN><B><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 18pt\">光影记录大国实力<SPAN>&nbsp; </SPAN>奋斗奏响时代乐章</SPAN></B></SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: center; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\" align=center><SPAN><B><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 18pt\"></SPAN></B></SPAN>&nbsp;</P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: center; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\" align=center><SPAN><SPAN><B><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 15pt\">——中国信达各单位组织观看纪录片《厉害了，我的国》</SPAN></B></SPAN></SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\">&nbsp;</P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">&nbsp;&nbsp;&nbsp; 3</SPAN><SPAN><SPAN><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">月<SPAN>2</SPAN>日，《厉害了，我的国》在全国各大影院震撼上映。一周来，中国信达各单位陆续组织员工走入影院，共同感受近五年来中国取得的改革开放和社会主义现代化建设的历史性成就，为祖国助威，为时代点赞。</SPAN></SPAN></SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\">&nbsp;</P>\r\n<P style=\"TEXT-ALIGN: center; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><IMG border=0 src=\"/coaqy/PopImage?MA=A&ImgFileIDSeq=397\"></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN><SPAN><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\"></SPAN></SPAN></SPAN>&nbsp;</P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN><SPAN><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">&nbsp;&nbsp;&nbsp; 党的十八大以来，在以习近平同志为核心的党中央领导下，我们走过了砥砺奋进的五年，站上了新的历史方位，吹响了新时代的号角。中华民族伟大复兴的宏伟誓愿，正在世界的东方回响。回首这五年，无数的光辉时刻值得被所有中国人铭记：“振华<SPAN>30</SPAN>号”完成港珠澳大桥的最后吊装，“复兴号”动车组率先实现<SPAN>350</SPAN>公里时速的运营，首个太空实验站“天宫二号”如期升空，“南水北调工程”完成通水运行……</SPAN></SPAN></SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\">&nbsp;</P>\r\n<P style=\"TEXT-ALIGN: center; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><IMG style=\"WIDTH: 550px\" border=0 src=\"/coaqy/PopImage?MA=A&ImgFileIDSeq=398\"></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\"></SPAN>&nbsp;</P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">&nbsp;&nbsp;&nbsp; 人民生活的兴旺离不开国家的繁荣富强，国家每一项重大成就的取得也都凝聚了全国人民的磅礴力量。影片以“小家”为窗口窥见“大国”，从基层扶贫工作人员的生活状况，到筑起世界上最大的人工林的坝上三代人，再到细致做好入户工作的健康管理员和保家卫国的威武之师，生动记录了我国各方面取得的卓越成就，充分展现了中国人民在全面建成小康社会征程上的伟大奋斗历程。</SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">&nbsp;&nbsp;&nbsp; 影片让大家激情澎湃、热血沸腾。员工们纷纷表示，党的十八大以来，在以习近平同志为核心的党中央领导下，全国各族人民砥砺奋斗、真抓实干，缔造了一个又一个中国奇迹。未来，全体信达人将继续不忘初心，牢记使命，肩负新时代赋予的重任，积极投身到改革创新发展的历史洪流中，为伟大祖国的繁荣富强贡献自己的一份力量！</SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\"></SPAN>&nbsp;</P>\r\n<P style=\"TEXT-ALIGN: center; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\"><IMG style=\"WIDTH: 550px\" border=0 src=\"/coaqy/PopImage?MA=A&ImgFileIDSeq=399\"></SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\"></SPAN>&nbsp;</P>\r\n<P style=\"TEXT-ALIGN: center; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\"><IMG border=0 src=\"/coaqy/PopImage?MA=A&ImgFileIDSeq=400\"></SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\"></SPAN>&nbsp;</P>\r\n<P style=\"TEXT-ALIGN: center; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\"><IMG style=\"WIDTH: 550px\" border=0 src=\"/coaqy/PopImage?MA=A&ImgFileIDSeq=401\"></SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\"></SPAN>&nbsp;</P>\r\n<P style=\"TEXT-ALIGN: center; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\"><IMG style=\"WIDTH: 550px\" border=0 src=\"/coaqy/PopImage?MA=A&ImgFileIDSeq=402\"></SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\"></SPAN>&nbsp;</P>\r\n<P style=\"TEXT-ALIGN: center; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\"><IMG style=\"WIDTH: 550px\" border=0 src=\"/coaqy/PopImage?MA=A&ImgFileIDSeq=403\"></SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\">&nbsp; </P>\r\n		\r\n\r\n</p>\r\n<div>\r\n <P align=right id=\"textset\">字体大小[ <A \r\n href=\"javascript:doZoom(14)\">大</A> <A \r\n href=\"javascript:doZoom(12)\">中</A> <A \r\n href=\"javascript:doZoom(9)\">小</A> ] </P>\r\n',15,'P','P',1,0),('2018-05-22',179,14,'数据信息部','中国信达发布2017年度经营业绩','\r\n<p class=\"sub_text\">\r\n\r\n		  <P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">&nbsp;&nbsp;&nbsp; 3</SPAN><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">月<SPAN>27</SPAN>日，中国信达资产管理股份有限公司（<SPAN>HK</SPAN>：<SPAN>1359</SPAN>，下称中国信达）发布了<SPAN>2017</SPAN>年度业绩报告。报告显示，<SPAN>2017</SPAN>年，面对复杂多变的国内外经济形势和日益趋严的金融监管环境，<STRONG>公司坚持稳中求进总基调，坚持以聚焦主业为根本，以优化结构为主线，以强化风控为保障，奋力拓展市场，推进业务转型，提升发展质量，实现了良好的经营业绩。</STRONG>年末公司总资产达<SPAN>13869</SPAN>亿元，较上年末增长<SPAN>18.1%</SPAN>；归属于公司股东权益达<SPAN>1494</SPAN>亿元，较上年末增长<SPAN>7.3%</SPAN>；全年实现归属于公司股东的净利润<SPAN>181</SPAN>亿元，同比增长<SPAN>16.8%</SPAN>。</SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; TEXT-INDENT: 24.1pt; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><B><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">坚持聚焦不良资产核心主业，助力金融风险防范与化解。</SPAN></B><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">2017</SPAN><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">年，中国信达继续深耕不良资产主业，同时主动适应市场变化，加快主业转型升级，努力由不良资产为主转向不良资产和问题机构并重，由从银行端收购转向从银行和企业两端收购不良资产，帮助危困企业盘活低效、无效资产。全年不良资产经营板块总资产规模新增<SPAN>1355</SPAN>亿元，同比增长<SPAN>29.6%</SPAN>，实现不良资产经营收入<SPAN>453</SPAN>亿元，同比增长<SPAN>41.2%</SPAN>。其中：收购经营类不良资产（主要来自银行）业务作为核心主业，全年新增收购额<SPAN>867</SPAN>亿元，同比增长<SPAN>19.3%</SPAN>，公开市场占有率继续保持行业领先；收购重组类不良资产（主要来自非金融企业，同时也有部分来自于银行和非银行金融机构）业务坚持稳增量和调结构并重，积极帮助企业盘活存量债务，整体资产结构不断优化，资产质量持续提升，年末资产净额增长率达<SPAN>16.6%</SPAN>。去年，中国信达还发起设立了<SPAN>100</SPAN>亿元危困企业救助基金，用于拓展问题机构业务。</SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; TEXT-INDENT: 24.1pt; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><B><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">积极拓展债转股和特殊机遇投资业务，支持供给侧结构性改革。</SPAN></B><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">2017</SPAN><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">年，中国信达围绕不良资产核心主业，积极推进市场化债转股和特殊机遇投资业务，支持实体经济降杠杆。在新一轮市场化债转股中，充分发挥多年来积累的专业优势，通过多种业务模式，实现了中国重工、淮南矿业、西昌矿业等<SPAN>8</SPAN>个市场化债转股项目落地，落地总金额<SPAN>105</SPAN>亿元。公司还创新方式，发起设立总规模<SPAN>500</SPAN>亿元的降杠杆基金，搭建多元化资本平台，吸引社会资本参与市场化债转股。同时，公司精耕细作存量股权项目，投资收益实现大幅度增长。针对供给侧结构性改革过程中国企混改、主辅分离、并购重组等带来的业务机会，积极发展特投业务，围绕战略客户，主动布局，促进了客户企业结构优化和转型升级。</SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; TEXT-INDENT: 24.1pt; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><B><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">着力强化集团业务协同，有效服务实体经济。</SPAN></B><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">2017</SPAN><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">年，中国信达围绕增强各经营主体的市场竞争力，积极优化分公司分类管理，加快子公司战略整合，着力构筑分公司和子公司的差异化、特色化、专业化经营优势，夯实集团协同发展和高质量发展的基础，提升服务实体经济能力。全年实现协同业务销售收入<SPAN>26.8</SPAN>亿元，项目<SPAN>624</SPAN>个，涉及客户<SPAN>1625</SPAN>户，协同业务规模<SPAN>3570</SPAN>亿元。南商银行在加入中国信达一年多时间里，积极参与集团协同业务，年末资产规模达<SPAN>3631</SPAN>亿元，同比增长<SPAN>16.1%</SPAN>，税前利润<SPAN>32</SPAN>亿，同比增长<SPAN>15.5%</SPAN>，发展质量进一步提升。</SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; TEXT-INDENT: 24.1pt; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><B><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">全面加强资产负债管理，持续强化风控能力建设。</SPAN></B><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">2017</SPAN><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">年，中国信达着力完善资产负债管理框架，前瞻性资产负债管理力度加大，资产负债结构持续优化。集团完善了内部产品定价模型，建立起以资金价格、风险溢价为核心要素的内部产品定价体系，实现了资源配置优化，资产期限结构改善。加强负债融资管理，确保了集团流动性安全。合理把握融资窗口期，顺利完成<SPAN>300</SPAN>亿元人民币金融债券和<SPAN>30</SPAN>亿美元债券的发行。公司资本充足率达到<SPAN>16.77%</SPAN>，资本实力进一步增强。与此同时，中国信达还大力推进“合规年”各项工作，持续完善风险管理制度体系，细化风险管理政策，健全风险偏好传导机制，强化风险化解，风控效率和风控能力显著提升，进一步夯实了可持续发展的基础。</SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; TEXT-INDENT: 24pt; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">展望<SPAN>2018</SPAN>年，在习近平新时代中国特色社会主义思想指引下，中国信达将认真贯彻党的十九大、中央经济工作会议和全国金融工作会议精神，继续坚持稳中求进工作总基调，按照高质量发展的要求，进一步聚焦主业，创新发展不良资产业务，打造“大不良”业务模式；进一步做精专业，做强做优债转股和特殊机遇投资业务；进一步深化经营转型，推进分公司和子公司差异化、特色化、专业化发展；进一步强化负债融资管理，不断提高集团流动性管理能力；进一步完善全面风险管理体系，坚守风险底线，全力实现各项业务持续稳定健康发展，为股东、客户、员工和社会创造更大的价值。</SPAN></P>\r\n<P>&nbsp;</P>\r\n<P style=\"TEXT-ALIGN: center\">&nbsp;<IMG style=\"WIDTH: 700px\" border=0 src=\"/coaqy/PopImage?MA=A&ImgFileIDSeq=404\"></P>\r\n<P>&nbsp;</P>\r\n		\r\n\r\n</p>\r\n<div>\r\n <P align=right id=\"textset\">字体大小[ <A \r\n href=\"javascript:doZoom(14)\">大</A> <A \r\n href=\"javascript:doZoom(12)\">中</A> <A \r\n href=\"javascript:doZoom(9)\">小</A> ] </P>\r\n',15,'P','P',1,0),('2018-05-22',180,14,'数据信息部','十九载初心不渝，新征程锐意前行','\r\n<p class=\"sub_text\">\r\n\r\n		  <P>\r\n<P style=\"TEXT-ALIGN: center; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\"><IMG style=\"WIDTH: 700px\" border=0 src=\"/coaqy/PopImage?MA=A&ImgFileIDSeq=405\"></SPAN></P>\r\n<P style=\"TEXT-ALIGN: center; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\"></SPAN>&nbsp;</P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\"></SPAN>&nbsp;</P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">&nbsp;&nbsp;&nbsp; 中国信达是国内最早成立、最早完成股改、最早引战上市的金融资产管理公司。从<SPAN>1999</SPAN>年<SPAN>4</SPAN>月<SPAN>19</SPAN>日成立至今，中国信达在党中央、国务院的关心支持下，在上级党委正确领导下，在财政部、人民银行和社会各界支持下，认真履行“化解金融风险、服务实体经济、助力国企改革”的使命，不断深耕不良资产核心主业，为维护金融体系稳定作出了贡献，也为自身可持续发展奠定了基础。</SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\">&nbsp;</P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: center; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\" align=center><B><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">忆往昔峥嵘岁月</SPAN></B></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\">&nbsp;</P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\"><SPAN>&nbsp;&nbsp;&nbsp; </SPAN></SPAN><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">作为中国第一家由国务院批准设立的金融资产管理公司，十九年来，一代代信达人胸怀理想，牢记使命，克服重重困难，不断创新发展，不断超越自我，在支持国有银行和国企改革、化解金融风险、维护金融体系稳定的同时，也由小到大、由弱到强，实现了脱胎换骨的巨变。中国信达不仅以现金回收率最高、费用支出率最低的优异业绩圆满完成国家下达的政策性不良资产处置任务，而且努力探索适合国情的金融资产管理公司改革发展道路，率先于同业完成了股改、引战、上市“三步走战略”，实现了从存续期的政策性机构到可持续发展的上市公司的转型。在此过程中，公司始终坚持牢记历史使命，保持战略定力，深耕不良资产核心主业，创立了一个又一个的里程碑。</SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\">&nbsp;</P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: center; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\" align=center><B><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">看今朝风光旖旎</SPAN></B></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\">&nbsp;</P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">&nbsp;&nbsp;&nbsp; 十九载的稳健经营，中国信达构建了完善的公司治理、科学的战略布局、合理的资产结构、有竞争力的核心主业、有效的风控体系，拥有了数万家企业和机构客户，与众多地方政府、国内主要金融机构和<SPAN>540</SPAN>多家企业建立了战略合作关系，服务网络遍布全国<SPAN>33</SPAN>个省、自治区、直辖市和香港特别行政区，设有<SPAN>32</SPAN>个分公司和银行、证券、保险、信托、金融租赁等多家控股子公司，也是唯一拥有境内外银行平台的资产管理公司。十九载创新发展，中国信达加快主业转型升级，有效助力金融风险防范与化解；积极拓展债转股和特殊机遇投资业务，支持供给侧结构性改革；着力强化集团业务协同，不断提升服务实体经济质效。截止<SPAN>2017</SPAN>年末，中国信达资产总额已达<SPAN>13869</SPAN>亿元，净资产达<SPAN>1494</SPAN>亿元，实现归属于本公司股东的净利润<SPAN>181</SPAN>亿元。</SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\">&nbsp;</P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: center; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\" align=center><B><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">新征程锐意前行</SPAN></B></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\">&nbsp;</P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">&nbsp;&nbsp;&nbsp; 奋进新时代，开启新征程。<SPAN>2018</SPAN>年，中国信达坚持以习近平新时代中国特色社会主义思想为指引，认真贯彻党的十九大、中央经济工作会议和全国金融工作会议精神，牢牢把握经济步入高质量发展阶段的新特征，坚持新发展理念，把握新时代机遇，落实各项监管要求，把准市场定位，巩固核心优势。继续坚守主业、深耕主业，继续优化结构、做精专业，继续深化转型、推动变革，继续优化风控、守住底线，围绕高质量发展，围绕供给侧结构性改革，围绕防范化解风险攻坚战，做问题企业的“专业救助者”，做产能过剩行业的“资源优化者”，做新兴产业的“加速推动者”，不忘初心、砥砺前行，努力创出无愧于新时代的金融资产管理公司的新业绩！</SPAN></P>&nbsp; \r\n		\r\n\r\n</p>\r\n<div>\r\n <P align=right id=\"textset\">字体大小[ <A \r\n href=\"javascript:doZoom(14)\">大</A> <A \r\n href=\"javascript:doZoom(12)\">中</A> <A \r\n href=\"javascript:doZoom(9)\">小</A> ] </P>\r\n',15,'P','P',1,0),('2018-05-22',181,14,'数据信息部','信达青年在“五四”前夕开展扶贫志愿活动','\r\n<p class=\"sub_text\">\r\n\r\n		  <P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 1.5; MARGIN: 0pt; FONT-FAMILY: 等线; FONT-SIZE: 10.5pt\"><SPAN style=\"FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">\r\n<P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">&nbsp;&nbsp;&nbsp; “五四”青年节前夕，中国信达工会、团委组织来自总部及分、子公司的<SPAN>22</SPAN>名优秀青年员工代表，深入公司定点帮扶的青海省海东市乐都区，开展了“走进乐都，走进城子村”中国信达青年扶贫志愿活动。</SPAN></SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">&nbsp;&nbsp;&nbsp; 2002</SPAN><SPAN><SPAN><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">年，国务院确定青海省乐都县为中国信达的定点帮扶县。十六年来，在公司领导的高度重视和大力支持下，先后选派<SPAN>9</SPAN>位同志任副县（区）长，采取科技扶贫、教育扶贫、产业扶贫、水利扶贫等一些列措施，累计捐资捐物达<SPAN>3000</SPAN>余万元，资助数千名学生就读，捐建双千亩果蔬基地，改变了当地的经济面貌和群众的生活条件。自<SPAN>2015</SPAN>年精准扶贫政策实施以来，公司又向乐都区城台乡城子村派驻两任驻村第一书记，从党建工程、民生工程入手，推进组织建设、基础</SPAN></SPAN></SPAN><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">设施建设、产业结构转变，为当地藏民开山、修路、引水、建房，带领村民种植富硒大蒜、发展禽蛋养殖、学会电商销售，确保在今年完成全村脱贫摘帽。</SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\"></SPAN>&nbsp;</P>\r\n<P style=\"TEXT-ALIGN: center; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\"><IMG border=0 src=\"/coaqy/PopImage?MA=A&ImgFileIDSeq=406\"></SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\"></SPAN>&nbsp;</P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">&nbsp;&nbsp;&nbsp; 青年员工代表们来到城子村，驻村体验贫困地区的劳动与生活，走访、慰问村里的贫困户，听取精准扶贫工作成果介绍，了解精准扶贫工作的要求和措施。大家深刻感受到了新时代基层党员干部的奉献精神和社会责任意识。在城台乡中心学校，青年员工代表们与当地小学生积极互动，捐赠爱心书籍，丰富他们的文化、业余生活，为他们搭建快乐的成长阶梯，帮助孩子们播种梦想、点燃梦想，并通过自身不同的成长经历，引导激励贫困地区青少年崇尚自力更生，以实际行动创造美好生活。</SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\"></SPAN></SPAN>&nbsp;</P>\r\n<P style=\"TEXT-ALIGN: center; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\"><IMG style=\"WIDTH: 544px\" border=0 src=\"/coaqy/PopImage?MA=A&ImgFileIDSeq=407\"></SPAN></SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\"></SPAN></SPAN>&nbsp;</P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">&nbsp;&nbsp;&nbsp; 中国信达将以本次青年志愿活动为契机，加强青年员工的情感培育和思想提升<SPAN>,</SPAN>唤起青年员工对社会公益的重视与关注，激发爱党爱国热情，将服务社会、奉献社会的精神铭记于心，不断增强青年员工为公司和社会发展贡献力量的使命感和责任感。</SPAN></SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\">&nbsp;</P>\r\n<P style=\"TEXT-ALIGN: center; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><IMG style=\"WIDTH: 544px\" border=0 src=\"/coaqy/PopImage?MA=A&ImgFileIDSeq=408\"></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\">&nbsp;</P></SPAN>\r\n		\r\n\r\n</p>\r\n<div>\r\n <P align=right id=\"textset\">字体大小[ <A \r\n href=\"javascript:doZoom(14)\">大</A> <A \r\n href=\"javascript:doZoom(12)\">中</A> <A \r\n href=\"javascript:doZoom(9)\">小</A> ] </P>\r\n',15,'P','P',1,0),('2018-05-22',182,14,'数据信息部','中国信达开展2018年入党积极分子培训','\r\n<p class=\"sub_text\">\r\n\r\n		  <P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">&nbsp;&nbsp;&nbsp; 5</SPAN><SPAN><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">月<SPAN>7</SPAN>日至<SPAN>11</SPAN>日，中国信达<SPAN>2018</SPAN>年入党积极分子培训班在公司党校现场教学基地——安徽金寨干部学院举办，公司系统<SPAN>56</SPAN>名入党积极分子参加了培训。</SPAN></SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">&nbsp;&nbsp;&nbsp; 本次培训班是中国信达深入贯彻落实十九大精神，结合入党积极分子实际，精心开展的积极分子入党前的培训，旨在加强对系统内入党积极分子的培养教育，引导广大积极分子以习近平新时代中国特色社会主义思想作为行动指南，树立正确的人生观、价值观，确立为共产主义事业奋斗的信念。</SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">&nbsp;&nbsp;&nbsp; 培训期间，邀请了安徽省直机关工委、安徽省委党校、安徽金寨红军历史研究会的专家，围绕习近平新时代中国特色社会主义思想、党的十九大精神、新党章、党的发展历程、党员权利和义务、党员修养等等内容进行了理论教学，使学员了解如何做一名合格的共产党员。此外，还组织学员们来到金寨红军广场，通过向革命烈士纪念塔敬献花篮，宣读入党誓词，瞻仰红军纪念堂、洪学智将军墓和红军烈士墓园等方式进行了现场教学，使大家亲身感受信仰的力量。</SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\">&nbsp;&nbsp;&nbsp; 近年来，中国信达注重在青年骨干人才中发展党员，聚焦青年人才群体特点，加强思想政治引导；聚焦提升入党积极分子能力素质，加强党员和技术骨干的双向培养；聚焦发展党员质量，加强审查把关、考核评价、动态跟踪的机制保障。</SPAN></P>\r\n<P style=\"TEXT-JUSTIFY: inter-ideograph; TEXT-ALIGN: justify; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\"></SPAN>&nbsp;</P>\r\n<P style=\"TEXT-ALIGN: center; LINE-HEIGHT: 150%; MARGIN: 0cm 0cm 0pt; FONT-FAMILY: \'Calibri\',\'sans-serif\'; FONT-SIZE: 10.5pt\"><SPAN style=\"LINE-HEIGHT: 150%; FONT-FAMILY: 宋体; FONT-SIZE: 12pt\"><IMG style=\"WIDTH: 700px\" border=0 src=\"/coaqy/PopImage?MA=A&ImgFileIDSeq=409\"></SPAN></P>&nbsp;\r\n<P></P>\r\n		\r\n\r\n</p>\r\n<div>\r\n <P align=right id=\"textset\">字体大小[ <A \r\n href=\"javascript:doZoom(14)\">大</A> <A \r\n href=\"javascript:doZoom(12)\">中</A> <A \r\n href=\"javascript:doZoom(9)\">小</A> ] </P>\r\n',15,'P','P',5,6),('2019-01-11',189,14,'数据信息部','测试图片展示jsp替换为servlet','<p>图片展示jsp替换为servlet</p>\r\n\r\n<p><img alt=\"\" src=\"/coaqy/PopImage?MA=A&amp;ImgFileIDSeq=741\" /></p>\r\n',16,'P','W',0,0);
/*!40000 ALTER TABLE `XxFb_A_Zt` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `XxFb_A_Zt_12` BEFORE DELETE ON `XxFb_A_Zt`
  FOR EACH ROW
BEGIN
    # 明细下挂附件标记删除
    update Pf_A_AttachInfo set DelTag='Y' where PrimaryName in ('XxFb_A_Pl','XxFb_A_PlNq') and 
    	exists(select 1 from XxFb_A_Pl where Pf_A_AttachInfo.PrimaryID=ID and BizID=old.ID);
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `XxFb_A_Zt_22` AFTER DELETE ON `XxFb_A_Zt` FOR EACH ROW
BEGIN
	update Pf_A_AttachInfo set DelTag='Y' where PrimaryName in ('XxFb_A_Zt','XxFb_A_ZtNq') and PrimaryID=old.ID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `XxFb_M_Lm`
--

DROP TABLE IF EXISTS `XxFb_M_Lm`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `XxFb_M_Lm` (
  `ID` smallint(5) unsigned NOT NULL AUTO_INCREMENT COMMENT '标识',
  `LmMc` varchar(20) NOT NULL COMMENT '栏目名称',
  `UpLmID` smallint(5) unsigned NOT NULL COMMENT '父栏目ID',
  `SmallOrd` tinyint(3) unsigned NOT NULL COMMENT '同级排序号',
  `LmLevel` tinyint(3) unsigned NOT NULL COMMENT '栏目树层级',
  `BigOrdCode` varchar(30) NOT NULL COMMENT '总排序码',
  `FullPathName` varchar(100) NOT NULL COMMENT '全路径名',
  `IsValid` char(1) NOT NULL DEFAULT 'Y' COMMENT '是否有效',
  `ChannelID` int(11) unsigned NOT NULL DEFAULT '0' COMMENT '爬虫系统栏目ID',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `XxFb_M_Lm_uk` (`LmMc`,`UpLmID`)
) ENGINE=InnoDB AUTO_INCREMENT=49 DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `XxFb_M_Lm`
--

LOCK TABLES `XxFb_M_Lm` WRITE;
/*!40000 ALTER TABLE `XxFb_M_Lm` DISABLE KEYS */;
INSERT INTO `XxFb_M_Lm` VALUES (1,'庆源信息',0,1,1,'001','庆源信息','Y',0),(2,'咨询中心',0,2,1,'002','咨询中心','Y',0),(6,'业务领域',0,3,1,'003','业务领域','Y',0),(7,'人力资源',0,4,1,'004','人力资源','Y',0),(8,'信息公开',0,5,1,'005','信息公开','Y',0),(9,'联系我们',0,6,1,'006','联系我们','Y',0),(10,'同业动态',0,7,1,'007','同业动态','Y',0),(11,'同业产品',0,8,1,'008','同业产品','Y',0),(12,'公司简介',1,1,2,'001001','庆源信息/公司简介','Y',0),(13,'股东介绍',1,2,2,'001002','庆源信息/股东介绍','Y',0),(14,'组织架构',1,3,2,'001003','庆源信息/组织架构','Y',0),(15,'企业文化',1,4,2,'001004','庆源信息/企业文化','Y',133),(16,'企业要闻',2,1,2,'002001','咨询中心/企业要闻','Y',0),(17,'行业动态',2,2,2,'002002','咨询中心/行业动态','Y',0),(18,'不良资产管理',6,1,2,'003001','业务领域/不良资产管理','Y',0),(19,'资产管理',6,2,2,'003002','业务领域/资产管理','Y',0),(20,'特色投融资',6,3,2,'003003','业务领域/特色投融资','Y',0),(21,'人才理念',7,1,2,'004001','人力资源/人才理念','Y',0),(22,'招聘',7,2,2,'004002','人力资源/招聘','Y',0),(23,'信息公开',8,1,2,'005001','信息公开/信息公开','Y',0),(24,'政策法规',8,2,2,'005002','信息公开/政策法规','Y',0),(25,'四大国有',10,1,2,'007001','同业动态/四大国有','Y',0),(26,'华北地区',10,2,2,'007002','同业动态/华北地区','Y',5),(27,'东北地区',10,3,2,'007003','同业动态/东北地区','Y',6),(28,'西北地区 ',10,4,2,'007004','同业动态/西北地区 ','Y',7),(29,'华东地区',10,5,2,'007005','同业动态/华东地区','Y',8),(30,'华中地区',10,6,2,'007006','同业动态/华中地区','Y',9),(31,'华南地区',10,7,2,'007007','同业动态/华南地区','Y',10),(32,'西南地区',10,8,2,'007008','同业动态/西南地区','Y',11),(33,'华融资产',25,1,3,'007001001','同业动态/四大国有/华融资产','Y',1),(34,'东方资产',25,2,3,'007001002','同业动态/四大国有/东方资产','Y',2),(35,'信达资产',25,3,3,'007001003','同业动态/四大国有/信达资产','Y',3),(36,'长城资产',25,4,3,'007001004','同业动态/四大国有/长城资产','Y',4),(37,'四大国有',11,1,2,'008001','同业产品/四大国有','Y',0),(38,'华北地区',11,2,2,'008002','同业产品/华北地区','Y',24),(39,'东北地区  ',11,3,2,'008003','同业产品/东北地区  ','Y',25),(40,'西北地区  ',11,4,2,'008004','同业产品/西北地区  ','Y',26),(41,'华东地区  ',11,5,2,'008005','同业产品/华东地区  ','Y',27),(42,'华中地区  ',11,6,2,'008006','同业产品/华中地区  ','Y',28),(43,'华南地区  ',11,7,2,'008007','同业产品/华南地区  ','Y',29),(44,'西南地区  ',11,8,2,'008008','同业产品/西南地区  ','Y',30),(45,'华融资产',37,1,3,'008001001','同业产品/四大国有/华融资产','Y',20),(46,'东方资产',37,2,3,'008001002','同业产品/四大国有/东方资产','Y',21),(47,'信达资产',37,3,3,'008001003','同业产品/四大国有/信达资产','Y',22),(48,'长城资产',37,4,3,'008001004','同业产品/四大国有/长城资产','Y',23);
/*!40000 ALTER TABLE `XxFb_M_Lm` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `XxFb_M_Lm_11` BEFORE INSERT ON `XxFb_M_Lm`
  FOR EACH ROW
BEGIN
 	declare vParentIsValid char(1);
 	
 	select IsValid into vParentIsValid from XxFb_M_Lm where ID=new.UpLmID;
 	if vParentIsValid='N' THEN
 		call XxFb_M_Lm_11_err1(); #无效栏目下不能增加子栏目！
 	end if;
 	
 	set NEW.SmallOrd=(select COALESCE(max(SmallOrd),0)+1 from XxFb_M_Lm where UpLmID = NEW.UpLmID);
 	
 	if NEW.UpLmID=0 then
 		set NEW.LmLevel=1;
 		set NEW.BigOrdCode=LPAD(CONCAT(NEW.SmallOrd,''),3,'0');
 		set NEW.FullPathName=NEW.LmMc;
 	else
 		select LmLevel + 1, concat(BigOrdCode,LPAD(concat(NEW.SmallOrd,''),3,'0')), concat(FullPathName,'/',NEW.LmMc) 
 		into @LmLevel, @BigOrdCode, @FullPathName 
 		from XxFb_M_Lm where ID = NEW.UpLmID;
 		
 		set NEW.LmLevel=@LmLevel;
 		set NEW.BigOrdCode=@BigOrdCode;
 		set NEW.FullPathName=@FullPathName;
 	end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `XxFb_M_Lm_13` BEFORE UPDATE ON `XxFb_M_Lm`
  FOR EACH ROW
BEGIN
	declare vUpLmIsValid char(1);
    
	if old.IsValid='N' and new.IsValid='Y' then
    	select IsValid into vUpLmIsValid from XxFb_M_Lm where ID=old.UpLmID;
        if vUpLmIsValid='N' THEN
        	call XxFb_M_Lm_13_err1(); #无效状态的栏目恢复为有效的前提是其父栏目必须有效！
        end if;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `ZdHb_M_Zt`
--

DROP TABLE IF EXISTS `ZdHb_M_Zt`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ZdHb_M_Zt` (
  `ID` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '标识',
  `InitUsrID` smallint(5) unsigned NOT NULL COMMENT '汇编人ID',
  `InitOrgName` varchar(100) NOT NULL,
  `SubmitTs` datetime DEFAULT NULL COMMENT '发布时间',
  `Bt` varchar(100) NOT NULL COMMENT '标题',
  `SxRq` date NOT NULL COMMENT '生效日期',
  `FzRq` date DEFAULT NULL COMMENT '废止日期',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `Bt` (`Bt`),
  KEY `InitUsrID` (`InitUsrID`),
  CONSTRAINT `ZdHb_M_Zt_fk1` FOREIGN KEY (`InitUsrID`) REFERENCES `Pf_M_Usr` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `ZdHb_M_Zt`
--

LOCK TABLES `ZdHb_M_Zt` WRITE;
/*!40000 ALTER TABLE `ZdHb_M_Zt` DISABLE KEYS */;
INSERT INTO `ZdHb_M_Zt` VALUES (2,14,'数据信息部','2018-05-11 01:11:46','公司立项制度','2018-05-01',NULL),(3,14,'数据信息部','2018-05-21 11:56:10','公司请休假制度','2018-05-21','2018-05-22'),(4,14,'数据信息部',NULL,'公司项目管理制度','2018-06-01',NULL);
/*!40000 ALTER TABLE `ZdHb_M_Zt` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `ZdHb_M_Zt_23` AFTER UPDATE ON `ZdHb_M_Zt`
  FOR EACH ROW
BEGIN
 	declare vAppUrl varchar(100);
 	declare vPrompt varchar(1000);
 	declare vUsrID smallint unsigned;
 	declare vUsrcName varchar(10);
 	
 	declare done INT DEFAULT 0;
	declare cur1 cursor for select ID, cName from Pf_M_Usr where IsValid='Y';
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;
    
	if new.SubmitTs is not null and old.SubmitTs is null then
    	select AppUrl Into vAppUrl From Pf_M_Ent;
        set done=0;
 		open cur1;
 		fetch cur1 into vUsrID,vUsrcName;
 		while (done!=1) do
 			set vPrompt=concat(vUsrcName,'，你好！',Char(13),Char(10),'    标题为：[',new.Bt,']的制度文件集已发布，请及时查阅！',
 				char(13),char(10),char(13),char(10),'办公系统访问地址是：',vAppUrl);
 			insert into Pf_D_PromptMail values (null, now(), '制度文件发布提醒',vPrompt, now(), 'N');
 			insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(vUsrID),'Z');
 			fetch cur1 into vUsrID,vUsrcName;
 		end while; 
 		close cur1;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `ZdHb_M_Zt_22` AFTER DELETE ON `ZdHb_M_Zt`
  FOR EACH ROW
BEGIN
	update Pf_M_AttachInfo set DelTag='Y' where PrimaryName = 'ZdHb_M_Zt' and PrimaryID=old.ID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `ZxBg_A_FaSp`
--

DROP TABLE IF EXISTS `ZxBg_A_FaSp`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ZxBg_A_FaSp` (
  `RecDivTag` date NOT NULL COMMENT '分区日期戳',
  `ID` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `InitUsrID` smallint(5) unsigned NOT NULL COMMENT '发起人ID',
  `InitOrgName` varchar(100) NOT NULL COMMENT '发起部门',
  `BizStatus` char(1) NOT NULL COMMENT '业务状态',
  `XmID` smallint(5) unsigned NOT NULL COMMENT '项目ID',
  `JchSqSj` date NOT NULL COMMENT '决策会申请时间',
  `JchZkSj` date NOT NULL COMMENT '决策会召开时间',
  `ZcrID` smallint(5) unsigned NOT NULL COMMENT '主持人ID',
  `CxIDs` varchar(100) NOT NULL COMMENT '出席IDs',
  `LxIDs` varchar(100) DEFAULT NULL COMMENT '列席IDs',
  `ChTpCnt` tinyint(3) unsigned NOT NULL COMMENT '参会投票人数',
  `PassCnt` tinyint(3) unsigned NOT NULL COMMENT '同意数',
  `RejectCnt` tinyint(3) unsigned NOT NULL COMMENT '反对数',
  `DiscardCnt` tinyint(3) unsigned NOT NULL COMMENT '弃权数',
  `SsYj` varchar(1000) DEFAULT NULL COMMENT '项目实施要件',
  PRIMARY KEY (`ID`),
  KEY `InitUsrID` (`InitUsrID`),
  KEY `XmID` (`XmID`),
  KEY `ZcrID` (`ZcrID`),
  CONSTRAINT `ZxBg_A_FaSp_fk1` FOREIGN KEY (`InitUsrID`) REFERENCES `Pf_M_Usr` (`ID`),
  CONSTRAINT `ZxBg_A_FaSp_fk2` FOREIGN KEY (`XmID`) REFERENCES `ZxBg_M_XmXx` (`ID`),
  CONSTRAINT `ZxBg_A_FaSp_fk3` FOREIGN KEY (`ZcrID`) REFERENCES `Pf_M_Usr` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=11 DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `ZxBg_A_FaSp`
--

LOCK TABLES `ZxBg_A_FaSp` WRITE;
/*!40000 ALTER TABLE `ZxBg_A_FaSp` DISABLE KEYS */;
INSERT INTO `ZxBg_A_FaSp` VALUES ('2018-03-14',1,11,'运营管理部','P',2,'2018-03-14','2018-03-15',11,'',NULL,15,10,5,0,'1.abcd哈哈哈\r\n2.356的附件'),('2018-03-22',2,11,'运营管理部','P',5,'2018-03-22','2018-03-23',11,'',NULL,12,6,6,0,'121212'),('2018-03-31',3,11,'运营管理部','P',1,'2018-03-30','2018-03-31',11,'',NULL,6,5,1,0,'项目实施要件：\r\n111\r\n222\r\n333\r\n一一一\r\n二二二'),('2018-04-30',4,11,'运营管理部','P',7,'2018-04-27','2018-04-30',11,'',NULL,6,5,1,0,'项目实施要件：\r\n1、\r\n2、'),('2018-10-07',5,14,'数据信息部','P',9,'2018-10-09','2018-10-09',14,'',NULL,5,5,0,0,'项目实施要件：\r\n1、\r\n2、'),('2018-11-26',6,14,'数据信息部','P',10,'2018-11-25','2018-11-25',14,'',NULL,5,5,0,0,'立项移动测试20181125项目实施要件：\r\n1\r\n2'),('2019-03-25',8,14,'数据信息部','P',12,'2019-03-22','2019-03-25',4,'4,8,3,6,5,7','12',6,5,0,1,NULL),('2019-03-27',9,14,'数据信息部','P',13,'2019-03-27','2019-03-27',4,'8,3,6,5,7,4','12',6,4,1,1,NULL),('2019-04-09',10,14,'数据信息部','P',14,'2019-04-09','2019-04-09',4,'4,8,3,6,5,7','12',4,3,0,1,NULL);
/*!40000 ALTER TABLE `ZxBg_A_FaSp` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `ZxBg_A_FaSp_22` AFTER DELETE ON `ZxBg_A_FaSp`
  FOR EACH ROW
BEGIN
	update Pf_A_AttachInfo 
    set DelTag='Y' 
    where PrimaryName in ('ZxBg_A_FaSp_Tz','ZxBg_A_FaSp_Qz','ZxBg_A_FaSp_Jy') and PrimaryID=old.ID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `ZxBg_A_FaSpBj`
--

DROP TABLE IF EXISTS `ZxBg_A_FaSpBj`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ZxBg_A_FaSpBj` (
  `RecDivTag` date NOT NULL COMMENT '分区日期戳',
  `ID` int(12) unsigned NOT NULL AUTO_INCREMENT COMMENT '表决记录流水',
  `ZtID` int(11) unsigned NOT NULL COMMENT '业务主体ID',
  `BjrID` smallint(5) unsigned NOT NULL COMMENT '表决人ID',
  `BjYj` char(1) NOT NULL DEFAULT 'P' COMMENT '表决意见',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `ZxBg_A_FaSpBj_UK` (`ZtID`,`BjrID`),
  KEY `ZtID` (`ZtID`),
  KEY `BjrID` (`BjrID`),
  CONSTRAINT `ZxBg_A_FaSpBj_fk1` FOREIGN KEY (`ZtID`) REFERENCES `ZxBg_A_FaSp` (`ID`) ON DELETE CASCADE,
  CONSTRAINT `ZxBg_A_FaSpBj_fk2` FOREIGN KEY (`BjrID`) REFERENCES `Pf_M_Usr` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=17 DEFAULT CHARSET=utf8 PACK_KEYS=0 COMMENT='项目审批表决记录';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `ZxBg_A_FaSpBj`
--

LOCK TABLES `ZxBg_A_FaSpBj` WRITE;
/*!40000 ALTER TABLE `ZxBg_A_FaSpBj` DISABLE KEYS */;
INSERT INTO `ZxBg_A_FaSpBj` VALUES ('2019-03-25',1,8,3,'P'),('2019-03-25',2,8,4,'P'),('2019-03-25',3,8,5,'D'),('2019-03-25',4,8,6,'P'),('2019-03-25',5,8,7,'P'),('2019-03-25',6,8,8,'P'),('2019-03-27',7,9,3,'D'),('2019-03-27',8,9,4,'P'),('2019-03-27',9,9,5,'R'),('2019-03-27',10,9,6,'P'),('2019-03-27',11,9,7,'P'),('2019-03-27',12,9,8,'P'),('2019-04-09',13,10,3,'P'),('2019-04-09',14,10,4,'P'),('2019-04-09',15,10,7,'P'),('2019-04-09',16,10,8,'D');
/*!40000 ALTER TABLE `ZxBg_A_FaSpBj` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `ZxBg_A_FaSpBj_11` BEFORE INSERT ON `ZxBg_A_FaSpBj`
  FOR EACH ROW
BEGIN
	declare vRecDivTag date;
    
    select RecDivTag into vRecDivTag from ZxBg_A_FaSp where ID=new.ZtID;
    set new.RecDivTag=vRecDivTag;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `ZxBg_A_FkSp`
--

DROP TABLE IF EXISTS `ZxBg_A_FkSp`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ZxBg_A_FkSp` (
  `RecDivTag` date NOT NULL COMMENT '分区日期戳',
  `ID` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `InitUsrID` smallint(5) unsigned NOT NULL COMMENT '发起人ID',
  `InitOrgName` varchar(100) NOT NULL COMMENT '发起部门',
  `BizStatus` char(1) NOT NULL COMMENT '业务状态',
  `YjLb` char(1) DEFAULT NULL COMMENT '依据类别',
  `YjID` int(11) unsigned DEFAULT NULL COMMENT '依据ID(项目/合同)',
  `DjCnt` tinyint(3) unsigned NOT NULL COMMENT '单据张数',
  `SkrMc` varchar(100) NOT NULL COMMENT '收款人名称',
  `Khh` varchar(50) NOT NULL COMMENT '开户银行',
  `AcctNo` varchar(50) NOT NULL COMMENT '帐号',
  `FkAmt` decimal(15,2) unsigned NOT NULL COMMENT '金额',
  `ZfFs` char(1) NOT NULL COMMENT '支付方式',
  `FkSy` varchar(200) NOT NULL COMMENT '付款事由',
  `HtQdRq` date DEFAULT NULL COMMENT '业务合同签订时间',
  `ZjDwRq` date DEFAULT NULL COMMENT '资金到位时间',
  PRIMARY KEY (`ID`),
  KEY `InitUsrID` (`InitUsrID`),
  KEY `XmID` (`YjID`),
  KEY `AcctNo` (`AcctNo`),
  CONSTRAINT `ZxBg_A_FkSp_fk1` FOREIGN KEY (`InitUsrID`) REFERENCES `Pf_M_Usr` (`ID`),
  CONSTRAINT `ZxBg_A_FkSp_fk2` FOREIGN KEY (`AcctNo`) REFERENCES `ZxBg_M_DeSkfZh` (`AcctNo`)
) ENGINE=InnoDB AUTO_INCREMENT=27 DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `ZxBg_A_FkSp`
--

LOCK TABLES `ZxBg_A_FkSp` WRITE;
/*!40000 ALTER TABLE `ZxBg_A_FkSp` DISABLE KEYS */;
INSERT INTO `ZxBg_A_FkSp` VALUES ('2018-08-21',12,12,'业务部','W',NULL,NULL,2,'北京雷特世纪有限公司','建设银行知春路支行','1111 2222 3333 4444 123',100000.00,'3','付款10万支付供货商北京雷特世纪有限公司视频会议系统工程款：\r\n1、设备8万；\r\n2、人工2万。',NULL,NULL),('2018-08-21',13,12,'业务部','W',NULL,NULL,2,'北京雷特世纪有限公司','北京银行知春路支行','2222 2222 3333 4444 123',100000.00,'3','付款10万支付供货商北京雷特世纪有限公司视频会议系统工程款：\r\n1、设备8万；\r\n2、人工2万。',NULL,NULL),('2018-08-21',16,12,'业务部','P','a',7,2,'贵州习酒股份有限公司','建设银行贵阳支行','3333 1212 2323 3434 678',30000000.00,'3','贵州习酒收购项目付款（a）：\r\n1、\r\n2、','2018-08-01','2018-08-21'),('2018-08-21',17,12,'业务部','P','b',12,1,'李嘉诚','香港汇丰银行','2222 3232 2323 3434 222',20000000.00,'3','b-正式立项项目的获批合同依据测试：\r\n1、\r\n2、','2018-08-02','2018-08-21'),('2018-08-21',18,14,'数据信息部','P','b',10,1,'科电数据服务有限公司','中信银行内蒙古呼和浩特分行','2222 4343 2525 6565 777',15000000.00,'2','b-正式立项项目的获批合同二次测试：\r\n1、\r\n2、','2018-08-03','2018-08-21'),('2018-08-21',19,12,'业务部','P','c',1,1,'胡平','建设银行江苏扬州分行','3333 1212 3232 4334 223',330000.00,'2','依据c-未正式立项项目付款：\r\n1、\r\n2、','2018-08-02','2018-08-21'),('2018-08-21',20,12,'业务部','P','d',6,1,'胡平','建设银行江苏扬州分行','3333 1212 3232 4334 333',440000.00,'2','依据：d-未正式立项项目的获批合同付款测试\r\n1、\r\n2、','2018-08-04','2018-08-21'),('2018-08-21',21,12,'业务部','P','e',NULL,1,'北京雷特世纪有限公司','建设银行知春路支行','1111 2222 3333 4444 123',5000.00,'1','e-无项目依据付款测试\r\n1、\r\n2、',NULL,'2018-08-21'),('2018-08-23',22,12,'业务部','W','c',1,1,'北京雷特世纪有限公司','北京银行知春路支行','2222 2222 3333 4444 123',902926.48,'3','测试\r\n金额小写转大写','2018-08-03',NULL),('2018-10-07',23,12,'业务部','P','a',9,2,'科电数据服务有限公司','中信银行内蒙古呼和浩特分行','2222 4343 2525 6565 777',5000000.00,'3','科电入股项目1期','2018-09-03','2018-10-09'),('2018-11-27',24,12,'业务部','P','a',10,2,'科电数据服务有限公司','中信银行内蒙古呼和浩特分行','2222 4343 2525 6565 777',3050000.00,'3','移动测试20181127\r\n1\r\n2','2018-11-26','2018-11-27'),('2019-03-26',25,12,'业务部','P','b',18,2,'包不同','内蒙古银行呼和浩特赛罕分行','7777 8888 6666 5555 678',2600000.00,'3','改版测试：\r\n1、依据正式立项项目的获批合同\r\n2、诚意合作。','2019-03-25','2019-03-25'),('2019-04-09',26,12,'业务部','P','b',21,3,'北京雷特世纪有限公司','北京银行知春路支行','2222 2222 3333 4444 123',5020000.00,'3','踏歌行一期项目合同款','2019-04-08','2019-04-08');
/*!40000 ALTER TABLE `ZxBg_A_FkSp` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `ZxBg_A_FkSp_22` AFTER DELETE ON `ZxBg_A_FkSp`
  FOR EACH ROW
BEGIN
	update Pf_A_AttachInfo 
    set DelTag='Y' 
    where PrimaryName in ('ZxBg_A_FkSp','ZxBg_A_FkSp_Qz') and PrimaryID=old.ID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `ZxBg_A_HtSc`
--

DROP TABLE IF EXISTS `ZxBg_A_HtSc`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ZxBg_A_HtSc` (
  `RecDivTag` date NOT NULL COMMENT '分区日期戳',
  `ID` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '业务标识',
  `InitUsrID` smallint(5) unsigned NOT NULL COMMENT '发起人ID',
  `InitOrgName` varchar(100) NOT NULL COMMENT '发起部门',
  `BizStatus` char(1) NOT NULL COMMENT '业务状态',
  `XmID` smallint(5) unsigned NOT NULL COMMENT '项目ID',
  `HtMc` varchar(100) NOT NULL COMMENT '合同名称',
  `HtAmt` decimal(15,2) unsigned NOT NULL COMMENT '合同金额',
  `HtBh` varchar(40) DEFAULT NULL COMMENT '合同编号',
  `SfDfTgHt` char(1) NOT NULL DEFAULT 'N' COMMENT '是否对方提供合同',
  PRIMARY KEY (`ID`) USING BTREE,
  KEY `InitUsrID` (`InitUsrID`) USING BTREE,
  KEY `XmID` (`XmID`) USING BTREE,
  CONSTRAINT `ZxBg_A_HtSc_fk1` FOREIGN KEY (`InitUsrID`) REFERENCES `Pf_M_Usr` (`ID`),
  CONSTRAINT `ZxBg_A_HtSc_fk2` FOREIGN KEY (`XmID`) REFERENCES `ZxBg_M_LsXm` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=12 DEFAULT CHARSET=utf8 COMMENT='合同审查';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `ZxBg_A_HtSc`
--

LOCK TABLES `ZxBg_A_HtSc` WRITE;
/*!40000 ALTER TABLE `ZxBg_A_HtSc` DISABLE KEYS */;
INSERT INTO `ZxBg_A_HtSc` VALUES ('2018-06-25',6,12,'业务部','P',1,'立思震科技参股项目合同之一',1200000.00,'LSC20180627','N'),('2018-08-23',7,12,'业务部','W',1,'测试合同加水印',1100000.00,'LsXm-2018-002','N'),('2018-11-26',8,12,'业务部','P',2,'庆源办公室装饰瓷器采购合同',200000.00,'LS2018-010','N'),('2019-03-04',9,12,'业务部','P',3,'北京雷特世纪网络科技有限公司收购合同',5000000.00,'20190304-001','N'),('2019-04-19',10,12,'业务部','P',3,'北京雷特世纪网络科技有限公司收购20190419（我方提供合同）',20050000.00,'SCHT-A-20190419-1','N'),('2019-04-19',11,12,'业务部','P',2,'办公室装饰瓷器采购20190419（对方提供合同）',120000.00,'SCHT-B-20190419','Y');
/*!40000 ALTER TABLE `ZxBg_A_HtSc` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `ZxBg_A_HtSc_22` AFTER DELETE ON `ZxBg_A_HtSc`
  FOR EACH ROW
BEGIN
	declare vyFjSeq integer unsigned;
	declare done INT default 0;
    declare cur1 cursor for 
    	select Seq from Pf_A_AttachInfo where PrimaryName = 'ZxBg_A_HtSc' and PrimaryID=old.ID;
    declare CONTINUE HANDLER FOR NOT FOUND SET done = 1;
    
    open cur1;
    cur1_loop:
    loop
    	fetch cur1 into vyFjSeq;
        if done=1 then 
        	leave cur1_loop;
        end if;
        
        update Pf_A_AttachInfo set DelTag='Y' 
        where PrimaryName in ('ZxBg_A_HtSc_Td','ZxBg_A_HtSc_TdPdf') and PrimaryID=vyFjSeq;
    end loop;
    close cur1;
    
	update Pf_A_AttachInfo 
    set DelTag='Y' 
    where PrimaryName in ('ZxBg_A_HtSc','ZxBg_A_HtSc_2DC','ZxBg_A_HtSc_Qz') and PrimaryID=old.ID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `ZxBg_A_HtSp`
--

DROP TABLE IF EXISTS `ZxBg_A_HtSp`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ZxBg_A_HtSp` (
  `RecDivTag` date NOT NULL COMMENT '分区日期戳',
  `ID` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '业务标识',
  `InitUsrID` smallint(5) unsigned NOT NULL COMMENT '发起人ID',
  `InitOrgName` varchar(100) NOT NULL COMMENT '发起部门',
  `BizStatus` char(1) NOT NULL COMMENT '业务状态',
  `XmID` smallint(5) unsigned NOT NULL COMMENT '项目ID',
  `HtMc` varchar(100) NOT NULL COMMENT '合同名称',
  `HtAmt` decimal(15,2) unsigned NOT NULL COMMENT '合同金额',
  `HtBh` varchar(40) DEFAULT NULL COMMENT '合同编号',
  `SfDfTgHt` char(1) NOT NULL DEFAULT 'N' COMMENT '是否对方提供合同',
  PRIMARY KEY (`ID`),
  KEY `InitUsrID` (`InitUsrID`),
  KEY `XmID` (`XmID`),
  CONSTRAINT `ZxBg_A_HtSp_fk1` FOREIGN KEY (`InitUsrID`) REFERENCES `Pf_M_Usr` (`ID`),
  CONSTRAINT `ZxBg_A_HtSp_fk2` FOREIGN KEY (`XmID`) REFERENCES `ZxBg_M_XmXx` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=15 DEFAULT CHARSET=utf8 PACK_KEYS=0 COMMENT='合同审批';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `ZxBg_A_HtSp`
--

LOCK TABLES `ZxBg_A_HtSp` WRITE;
/*!40000 ALTER TABLE `ZxBg_A_HtSp` DISABLE KEYS */;
INSERT INTO `ZxBg_A_HtSp` VALUES ('2018-04-29',1,12,'业务部','P',5,'入股汇丰银行合同1',10000000.00,'SG_2018001','N'),('2018-04-30',2,12,'业务部','P',7,'贵州习酒收购1期合同',12000000.00,'SG-2018002','N'),('2018-04-30',3,12,'业务部','P',7,'贵州习酒收购2期',21000000.00,'SG-2018004','N'),('2018-05-16',4,12,'业务部','P',7,'与贵州习酒往来合同1',20000000.00,'SG-GZXJ-2018001','N'),('2018-05-22',5,14,'数据信息部','P',2,'OA系统建设项目',1000000.00,'-20180101','N'),('2018-06-26',6,12,'业务部','P',5,'汇丰入股合同20180627',30000000.00,'HF20180627','N'),('2018-09-03',7,12,'业务部','W',7,'贵州习酒股份有限公司合同水印盖章测试20180903',1110000.00,'HTSP-2018011','N'),('2018-10-07',8,12,'业务部','P',9,'科电入股1期',50000000.00,'KDRG-01','N'),('2018-11-26',9,12,'业务部','P',10,'呼和浩特大会宾餐饮有限公司收购1期款',5010000.00,'ZB2018-101','N'),('2019-03-26',10,12,'业务部','P',12,'内蒙饭店收购合同-1',7120000.00,'SPHT-201903-001','N'),('2019-03-27',11,12,'业务部','P',13,'北京同天科技收购合同-1',21200000.00,'HT201903-001','N'),('2019-04-09',12,12,'业务部','P',14,'踏歌行业务合同20190409',5020000.00,'SG-20190409','N'),('2019-04-19',13,12,'业务部','P',14,'审批合同20190419（我方出合同）',3000000.00,'SPHT-A-20190419','N'),('2019-04-19',14,12,'业务部','P',13,'审批合同20190419（对方出合同）',4500000.00,'SPHT-B-20190419','Y');
/*!40000 ALTER TABLE `ZxBg_A_HtSp` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `ZxBg_A_HtSp_22` AFTER DELETE ON `ZxBg_A_HtSp`
  FOR EACH ROW
BEGIN
	declare vyFjSeq integer unsigned;
	declare done INT default 0;
    declare cur1 cursor for 
    	select Seq from Pf_A_AttachInfo where PrimaryName = 'ZxBg_A_HtSp' and PrimaryID=old.ID;
    declare CONTINUE HANDLER FOR NOT FOUND SET done = 1;
    
    open cur1;
    cur1_loop:
    loop
    	fetch cur1 into vyFjSeq;
        if done=1 then 
        	leave cur1_loop;
        end if;
        
        update Pf_A_AttachInfo set DelTag='Y' 
        where PrimaryName in ('ZxBg_A_HtSp_Td','ZxBg_A_HtSp_TdPdf') and PrimaryID=vyFjSeq;
    end loop;
    close cur1;
    
	update Pf_A_AttachInfo 
    set DelTag='Y' 
    where PrimaryName in ('ZxBg_A_HtSp','ZxBg_A_HtSp_2DC','ZxBg_A_HtSp_Qz') and PrimaryID=old.ID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `ZxBg_A_JzDc`
--

DROP TABLE IF EXISTS `ZxBg_A_JzDc`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ZxBg_A_JzDc` (
  `RecDivTag` date NOT NULL COMMENT '分区日期戳',
  `ID` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `InitUsrID` smallint(5) unsigned NOT NULL COMMENT '发起人ID',
  `InitOrgName` varchar(100) NOT NULL COMMENT '发起部门',
  `BizStatus` char(1) NOT NULL COMMENT '业务状态',
  `XmID` smallint(5) unsigned NOT NULL COMMENT '项目ID',
  `JzDcXzCyIDs` varchar(20) NOT NULL COMMENT '尽调小组成员IDs',
  PRIMARY KEY (`ID`),
  KEY `InitUsrID` (`InitUsrID`),
  KEY `XmID` (`XmID`),
  CONSTRAINT `ZxBg_A_JzDc_fk1` FOREIGN KEY (`InitUsrID`) REFERENCES `Pf_M_Usr` (`ID`),
  CONSTRAINT `ZxBg_A_JzDc_fk2` FOREIGN KEY (`XmID`) REFERENCES `ZxBg_M_XmXx` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=12 DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `ZxBg_A_JzDc`
--

LOCK TABLES `ZxBg_A_JzDc` WRITE;
/*!40000 ALTER TABLE `ZxBg_A_JzDc` DISABLE KEYS */;
INSERT INTO `ZxBg_A_JzDc` VALUES ('2018-03-08',1,14,'数据信息部','P',2,'10,11'),('2018-03-22',2,12,'业务部','P',5,'5,6,3'),('2018-03-31',3,12,'业务部','P',1,'14'),('2018-04-30',4,12,'业务部','P',7,'14'),('2018-05-22',5,14,'数据信息部','P',8,'6,4'),('2018-10-07',6,12,'业务部','P',9,'8'),('2018-11-25',7,12,'业务部','P',10,'8,12'),('2019-03-22',8,12,'业务部','P',12,'8'),('2019-03-22',9,12,'业务部','P',4,'8'),('2019-03-27',10,12,'业务部','P',13,'8'),('2019-04-09',11,12,'业务部','P',14,'8');
/*!40000 ALTER TABLE `ZxBg_A_JzDc` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `ZxBg_A_JzDc_22` AFTER DELETE ON `ZxBg_A_JzDc`
  FOR EACH ROW
BEGIN
	update Pf_A_AttachInfo 
    set DelTag='Y' 
    where PrimaryName = 'ZxBg_A_JzDc' and PrimaryID=old.ID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `ZxBg_A_LxSq`
--

DROP TABLE IF EXISTS `ZxBg_A_LxSq`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ZxBg_A_LxSq` (
  `RecDivTag` date NOT NULL COMMENT '分区日期戳',
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `InitUsrID` smallint(5) unsigned NOT NULL COMMENT '发起人ID',
  `InitOrgName` varchar(100) NOT NULL COMMENT '发起部门',
  `BizStatus` char(1) NOT NULL COMMENT '业务状态',
  `Ywy2ID` smallint(5) unsigned NOT NULL COMMENT '第二业务员ID',
  `XmMc` varchar(100) NOT NULL COMMENT '项目名称',
  `XmJj` varchar(1000) NOT NULL COMMENT '项目简介',
  `QqFyYn` char(1) NOT NULL COMMENT '有无前期费用',
  `QyGsID` tinyint(3) unsigned DEFAULT NULL COMMENT '签约公司',
  `XmBh` char(10) DEFAULT NULL COMMENT '项目编号',
  PRIMARY KEY (`ID`),
  KEY `InitUsrID` (`InitUsrID`),
  KEY `Ywy2ID` (`Ywy2ID`),
  CONSTRAINT `ZxBg_A_LxSq_fk1` FOREIGN KEY (`InitUsrID`) REFERENCES `Pf_M_Usr` (`ID`),
  CONSTRAINT `ZxBg_A_LxSq_fk2` FOREIGN KEY (`Ywy2ID`) REFERENCES `Pf_M_Usr` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=16 DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `ZxBg_A_LxSq`
--

LOCK TABLES `ZxBg_A_LxSq` WRITE;
/*!40000 ALTER TABLE `ZxBg_A_LxSq` DISABLE KEYS */;
INSERT INTO `ZxBg_A_LxSq` VALUES ('2018-02-21',1,12,'业务部','P',14,'北京立思震科技有限公司收购','北京立思震科技公司收购项目简介：\r\n1、\r\n2、\r\n3、','N',NULL,NULL),('2018-03-02',2,14,'数据信息部','P',12,'测试项目','测试项目111','Y',NULL,NULL),('2018-03-14',3,12,'业务部','P',14,'长生收购','内蒙古长生不老公司\r\n内蒙古长生不老公司内蒙古长生不老公司\r\n1\r\n2','Y',NULL,NULL),('2018-03-11',4,12,'业务部','P',14,'雷特世纪收购','北京雷特世纪科技有限公司是一家IT安全方案设计实施公司，\r\n1、\r\n2、','N',1,NULL),('2018-03-22',5,12,'业务部','P',14,'入股汇丰银行','1.前期入股1200万。\r\n2.100万资产及1100万资金。','Y',1,NULL),('2018-04-30',7,12,'业务部','P',14,'贵州习酒收购','贵州习酒是酱香型白酒的典范\r\n1、\r\n2、','N',1,NULL),('2018-05-22',8,14,'数据信息部','P',14,'OA系统','OA','N',1,NULL),('2018-10-06',9,12,'业务部','P',12,'科电入股','内蒙古科电数据服务公司简介\r\n1、\r\n2、','Y',1,NULL),('2018-11-25',10,12,'业务部','P',12,'立项移动测试20181125','呼和浩特大会宾餐饮有限公司收购\r\n1\r\n2','N',1,NULL),('2019-03-21',11,12,'业务部','P',8,'内蒙古饭店收购','内蒙古饭店收购：\r\n1、鱼香肉丝；\r\n2、葱烧海参','N',1,'201903-001'),('2019-03-27',14,12,'业务部','P',8,'北京同天科技有限公司收购','历史沿革： \r\n\r\n    北京同天科技有限公司于1993年正式成立，属于港澳台独资企业。2008年，公司由港澳台独资企业变更为中外合资企业。同年公司由中外合资企业变更为内资企业，注册资金增至2049.39万元人民币。2011年，注册资金增至5000万元人民币。从2012年开始，同天公司与国内著名安全厂商天融信展开深度合作，2015年，天融信公司注资，同天公司注册资金增至5882万元人民币。\r\n\r\n主营业务：\r\n\r\n    北京同天科技有限公司作为北京市科委认定的新一代“高新技术企业”，经过将近20年的发展已经成为中国市场中提供通信和互联网工程解决方案的先锋。公司定位于为行业用户的业务信息化提供解决方案。作为一个基于国际互联网络协议和带宽基础设施领域的网络工程服务供应商，公司一直致力于IT业和服务供应商的市场资源合理化应用。如今，北京同天科技有限公司通过整合国际先进技术，专注行业解决方案，已经迅速发展成为国内极具影响力的IT综合服务解决方案提供商之一。','Y',1,'201903-002'),('2019-04-09',15,12,'业务部','P',8,'踏歌行公司收购','踏歌行，芬兰\r\n1\r\n2\r\n3','Y',1,'201904-001');
/*!40000 ALTER TABLE `ZxBg_A_LxSq` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `ZxBg_A_LxSq_22` AFTER DELETE ON `ZxBg_A_LxSq`
  FOR EACH ROW
BEGIN
	update Pf_A_AttachInfo 
    set DelTag='Y' 
    where PrimaryName in ('ZxBg_A_LxSq','ZxBg_A_LxSq_Qz') and PrimaryID=old.ID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `ZxBg_A_XmSc`
--

DROP TABLE IF EXISTS `ZxBg_A_XmSc`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ZxBg_A_XmSc` (
  `RecDivTag` date NOT NULL COMMENT '分区日期戳',
  `ID` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `InitUsrID` smallint(5) unsigned NOT NULL COMMENT '发起人ID',
  `InitOrgName` varchar(100) NOT NULL COMMENT '发起部门',
  `BizStatus` char(1) NOT NULL COMMENT '业务状态',
  `XmID` smallint(5) unsigned NOT NULL COMMENT '项目ID',
  `XmJe` decimal(15,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '项目金额（万元）',
  `JgMs` varchar(200) DEFAULT NULL COMMENT '审查结果',
  PRIMARY KEY (`ID`),
  KEY `InitUsrID` (`InitUsrID`),
  KEY `XmID` (`XmID`),
  CONSTRAINT `ZxBg_A_XmSc_fk1` FOREIGN KEY (`InitUsrID`) REFERENCES `Pf_M_Usr` (`ID`),
  CONSTRAINT `ZxBg_A_XmSc_fk2` FOREIGN KEY (`XmID`) REFERENCES `ZxBg_M_XmXx` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=13 DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `ZxBg_A_XmSc`
--

LOCK TABLES `ZxBg_A_XmSc` WRITE;
/*!40000 ALTER TABLE `ZxBg_A_XmSc` DISABLE KEYS */;
INSERT INTO `ZxBg_A_XmSc` VALUES ('2018-03-12',1,14,'数据信息部','P',2,0.00,'通过审查'),('2018-03-22',2,12,'业务部','P',5,0.00,'审查内容合格，同意实施。'),('2018-03-31',3,12,'业务部','P',1,0.00,'通过'),('2018-04-01',4,12,'业务部','W',1,0.00,NULL),('2018-04-30',5,12,'业务部','P',7,0.00,'通过'),('2018-05-22',6,14,'数据信息部','W',8,0.00,NULL),('2018-05-22',7,14,'数据信息部','P',8,0.00,'通过'),('2018-10-07',8,12,'业务部','P',9,0.00,'通过'),('2018-11-25',9,12,'业务部','P',10,0.00,'通过'),('2019-03-22',10,12,'业务部','P',12,0.00,'通过'),('2019-03-27',11,12,'业务部','P',13,5211.00,'通过'),('2019-04-09',12,12,'业务部','P',14,0.00,'通过');
/*!40000 ALTER TABLE `ZxBg_A_XmSc` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `ZxBg_A_XmSc_22` AFTER DELETE ON `ZxBg_A_XmSc`
  FOR EACH ROW
BEGIN
	update Pf_A_AttachInfo 
    set DelTag='Y' 
    where PrimaryName in ('ZxBg_A_XmSc_Qz1','ZxBg_A_XmSc_Qz2','ZxBg_A_XmSc_Qz3') and PrimaryID=old.ID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `ZxBg_A_YfkSp`
--

DROP TABLE IF EXISTS `ZxBg_A_YfkSp`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ZxBg_A_YfkSp` (
  `RecDivTag` date NOT NULL COMMENT '分区日期戳',
  `ID` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '业务标识',
  `InitUsrID` smallint(5) unsigned NOT NULL COMMENT '申请人ID',
  `InitOrgName` varchar(100) NOT NULL COMMENT '申请部门',
  `BizStatus` char(1) NOT NULL DEFAULT 'W' COMMENT '业务状态',
  `SqSm` varchar(100) NOT NULL COMMENT '预付申请说明',
  `SkfID` smallint(5) unsigned NOT NULL COMMENT '收款方ID',
  `SkrMc` varchar(100) NOT NULL COMMENT '收款人名称',
  `Khh` varchar(100) NOT NULL COMMENT '开户银行',
  `AcctNo` varchar(50) NOT NULL COMMENT '帐号',
  `FkAmt` decimal(15,2) unsigned NOT NULL COMMENT '申请付款金额',
  `FjCnt` tinyint(3) unsigned NOT NULL COMMENT '附件张数',
  `LastYfYe` decimal(15,2) unsigned NOT NULL COMMENT '前期预付款余额',
  `YfZe` decimal(15,2) unsigned NOT NULL COMMENT '本次付款后余额',
  `Bz` varchar(100) DEFAULT NULL COMMENT '备注',
  PRIMARY KEY (`ID`),
  KEY `InitUsrID` (`InitUsrID`),
  KEY `SkfID` (`SkfID`),
  CONSTRAINT `ZxBg_A_YfkSp_fk1` FOREIGN KEY (`InitUsrID`) REFERENCES `Pf_M_Usr` (`ID`),
  CONSTRAINT `ZxBg_A_YfkSp_fk2` FOREIGN KEY (`SkfID`) REFERENCES `ZxBg_M_Skf` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=10 DEFAULT CHARSET=utf8 PACK_KEYS=0 COMMENT='预付款审批';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `ZxBg_A_YfkSp`
--

LOCK TABLES `ZxBg_A_YfkSp` WRITE;
/*!40000 ALTER TABLE `ZxBg_A_YfkSp` DISABLE KEYS */;
INSERT INTO `ZxBg_A_YfkSp` VALUES ('2018-08-01',6,10,'运营管理部','P','预付深圳雷特世纪档案柜50%合同款',5,'深圳雷特世纪有限公司','建设银行深圳宝安分行','3241 8576 1122 3344 789',50000.00,1,0.00,50000.00,''),('2018-08-11',7,14,'数据信息部','P','预付款修改2018-08-13',6,'深圳雷特世纪科技有限公司','建设银行深圳保安支行','1212 3434 5656 7788 890',21000.00,1,0.00,21000.00,''),('2018-08-23',8,12,'业务部','W','测试金额转大写',10,'北京雷特世纪有限公司','中国光大银行北京北太平庄支行','35230188000089781',902926.48,1,0.00,902926.99,''),('2018-11-21',9,12,'业务部','W','预付款审批20181121',10,'北京雷特世纪有限公司','中国光大银行北京北太平庄支行','35230188000089781',200000.00,2,0.00,200000.00,'');
/*!40000 ALTER TABLE `ZxBg_A_YfkSp` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `ZxBg_A_YfkSp_11` BEFORE INSERT ON `ZxBg_A_YfkSp`
  FOR EACH ROW
BEGIN
	declare vCnt tinyint unsigned;
    declare vSkfID smallint unsigned;
	declare vYfYe decimal(15,2) unsigned;
    
    #维护<预付收款方>资料
    select count(*) into vCnt from ZxBg_M_Skf where SkrMc=new.SkrMc;
    if vCnt>0 then
    	select ID into vSkfID from ZxBg_M_Skf where SkrMc=new.SkrMc;
        set new.SkfID=vSkfID;
        update ZxBg_M_Skf set Khh=new.Khh,AcctNo=new.AcctNo where SkrMc=new.SkrMc;
    else
    	insert into ZxBg_M_Skf values (null,new.SkrMc,new.Khh,new.AcctNo,0,now());
        set new.SkfID=@@identity;
    end if;
    
    #计算[前期预付款余额][本次付款后余额]
    select coalesce(max(YfYe),0) into vYfYe from ZxBg_M_Skf where ID=new.SkfID;
    set new.LastYfYe=vYfYe;
    set new.YfZe=vYfYe+new.FkAmt;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `ZxBg_A_YfkSp_13` BEFORE UPDATE ON `ZxBg_A_YfkSp`
  FOR EACH ROW
BEGIN
	declare vYfYe decimal(15,2) unsigned;
    
	if new.FkAmt!=old.FkAmt then
    	select coalesce(max(YfYe),0) into vYfYe from ZxBg_M_Skf where ID=new.SkfID;
        set new.LastYfYe=vYfYe;
        set new.YfZe=vYfYe+new.FkAmt;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `ZxBg_A_YfkSp_23` AFTER UPDATE ON `ZxBg_A_YfkSp`
  FOR EACH ROW
BEGIN
	if new.SkrMc!=old.SkrMc or new.Khh!=old.Khh or new.AcctNo!=old.AcctNo then
    	update ZxBg_M_Skf set SkrMc=new.SkrMc,Khh=new.Khh,AcctNo=new.AcctNo where ID=new.SkfID;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `ZxBg_A_YfkSp_22` AFTER DELETE ON `ZxBg_A_YfkSp`
  FOR EACH ROW
BEGIN
	update Pf_A_AttachInfo set DelTag='Y' 
    where PrimaryName in ('ZxBg_A_YfkSp','ZxBg_A_YfkSp_Qz') and PrimaryID=old.ID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `ZxBg_A_YzZzSq`
--

DROP TABLE IF EXISTS `ZxBg_A_YzZzSq`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ZxBg_A_YzZzSq` (
  `RecDivTag` date NOT NULL COMMENT '分区日期戳',
  `ID` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `InitUsrID` smallint(5) unsigned NOT NULL COMMENT '发起人ID',
  `InitOrgName` varchar(100) NOT NULL COMMENT '发起部门',
  `BizStatus` char(1) NOT NULL COMMENT '业务状态',
  `SqYzLbCodes` varchar(10) DEFAULT NULL COMMENT '印章使用种类码s',
  `SqQtYzLbMc` varchar(20) DEFAULT NULL COMMENT '申请其它印章类别名',
  `SqZzLbCodes` varchar(10) DEFAULT NULL COMMENT '证照使用种类码s',
  `SqQtZzLbMc` varchar(20) DEFAULT NULL COMMENT '申请其它证照类别名',
  `SqSy` varchar(200) NOT NULL COMMENT '申请事由',
  `YyFs` tinyint(2) unsigned NOT NULL DEFAULT '1' COMMENT '用印份数',
  `YyHtID` int(11) unsigned DEFAULT NULL COMMENT '用印合同ID',
  `YyHtScID` int(10) unsigned DEFAULT NULL COMMENT '用印合同审查ID',
  `YyWjHqID` int(10) unsigned DEFAULT NULL COMMENT '用印非业务合同审批ID',
  `SfDcYy` char(1) NOT NULL DEFAULT 'N' COMMENT '是否带出用印',
  PRIMARY KEY (`ID`),
  KEY `InitUsrID` (`InitUsrID`),
  KEY `YyHtID` (`YyHtID`),
  CONSTRAINT `ZxBg_A_YzZzSq_fk1` FOREIGN KEY (`InitUsrID`) REFERENCES `Pf_M_Usr` (`ID`),
  CONSTRAINT `ZxBg_A_YzZzSq_fk2` FOREIGN KEY (`YyHtID`) REFERENCES `ZxBg_M_XmHt` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=58 DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `ZxBg_A_YzZzSq`
--

LOCK TABLES `ZxBg_A_YzZzSq` WRITE;
/*!40000 ALTER TABLE `ZxBg_A_YzZzSq` DISABLE KEYS */;
INSERT INTO `ZxBg_A_YzZzSq` VALUES ('2018-03-05',1,14,'数据信息部','P','a','','d','12123','1212',1,NULL,NULL,NULL,'N'),('2018-03-07',2,14,'数据信息部','P','a,b,c,d','大幅度','a,b,c,d','地方大幅度的','汉字',1,NULL,NULL,NULL,'N'),('2018-03-07',3,10,'运营管理部','W','a,d','商务用章','a,b,d','AB证','商用',1,NULL,NULL,NULL,'N'),('2018-03-22',4,9,'会计核算部','P','d','合同','','','申请使用公司章用于入股汇丰银行项目合同盖章',1,NULL,NULL,NULL,'N'),('2018-03-27',5,12,'业务部','P','a,d','户口本','a','','申请事由：\r\n1、测试\r\n2、',1,NULL,NULL,NULL,'N'),('2018-04-24',6,12,'业务部','W','a,d','','a,d','户口本','测试de',1,NULL,NULL,NULL,'N'),('2018-04-25',7,12,'业务部','W','a,d','','a,c','','测试增加用印份数',4,NULL,NULL,NULL,'N'),('2018-04-25',8,14,'数据信息部','P','a,d','','','','申请事由：\r\n测试附件',2,NULL,NULL,NULL,'N'),('2018-05-02',10,12,'业务部','P','a,b','','','','《贵州习酒收购2期》合同用印',2,7,NULL,NULL,'N'),('2018-05-02',11,13,'审计部','P','b','','a','','办公司社保',2,NULL,NULL,NULL,'N'),('2018-05-04',12,12,'业务部','P','c','','','','测试光申请财务章\r\n1、\r\n2、',2,NULL,NULL,NULL,'N'),('2018-05-04',13,12,'业务部','P','a,b,c','','','','测试多章申请\r\na、\r\nb、',4,NULL,NULL,NULL,'N'),('2018-05-16',15,13,'审计部','P','a,b','','','','测试2018-517',2,NULL,NULL,NULL,'N'),('2018-05-16',16,12,'业务部','P','a','','','','合同用印',1,9,NULL,NULL,'N'),('2018-05-17',17,12,'业务部','W','a,b','','','','1、	业务表；模块_M/A/D/C_表名；\r\n[模块]：含义的汉语拼音首字母拼接，每词首字母大写\r\n[M/A/D/C]：M-主文件、A-应用文件、D-从属应用文件归档/冷却后要清除内容的表、C-主文件的历史拷贝\r\n[表名]：含义的汉语拼音首字母拼接，每词首字母大写\r\n2、	框架表；Pf_ M/A_表名。Pf-Public Frame\r\n[表名]：含义的英文整词/公认的缩写拼接，每词首字母大写\r\n',10,NULL,NULL,NULL,'N'),('2018-05-22',18,12,'业务部','W','a,b','','','','测试附件属主可不强制看',2,NULL,NULL,NULL,'N'),('2018-05-22',19,14,'数据信息部','W','a',NULL,NULL,NULL,'合同用印',1,10,NULL,NULL,'N'),('2018-05-22',20,14,'数据信息部','P','a','','a','','审核',3,NULL,NULL,NULL,'N'),('2018-05-22',21,10,'运营管理部','P','','','a','','需要复印件',1,NULL,NULL,NULL,'N'),('2018-06-25',23,13,'审计部','P','a,b','','','','非业务合同20180627用印\r\n1、\r\n2、',3,NULL,NULL,3,'N'),('2018-06-26',25,12,'业务部','P','a,b','','','','汇丰入股合同20180627\r\n合同用印',3,12,NULL,NULL,'N'),('2018-06-26',27,12,'业务部','W','a','','','','业务合同审查通过后用印',1,NULL,6,NULL,'N'),('2018-06-26',28,13,'审计部','P','c','','','','测试手动用印申请：\r\n1、\r\n2、',2,NULL,NULL,NULL,'N'),('2018-08-18',29,12,'业务部','P','a,b','','','','增加具体印章证照选择20180818',1,NULL,NULL,NULL,'Y'),('2018-08-19',30,14,'数据信息部','W','a','','','','测试他人占用发放无效',1,NULL,NULL,NULL,'Y'),('2018-09-07',31,13,'审计部','W','a','','','','测试附件容量',1,NULL,NULL,NULL,'N'),('2018-10-07',34,12,'业务部','P','a,c','','','','合同用印2次',11,15,NULL,NULL,'N'),('2018-11-22',35,14,'数据信息部','W','a',NULL,NULL,NULL,'非业务合同用印',1,NULL,NULL,5,'N'),('2018-11-26',36,12,'业务部','P','a','','','','合同用印',5,16,NULL,NULL,'Y'),('2019-03-06',41,16,'运营管理部','P','a','','','','非业务合同用印',1,NULL,NULL,6,'N'),('2019-03-27',44,12,'业务部','P','a,c','','','','北京同天科技收购合同-1合同用印',1,19,NULL,NULL,'N'),('2019-03-27',45,12,'业务部','P','a','','','','业务合同审查通过后用印',1,NULL,9,NULL,'N'),('2019-03-27',46,16,'运营管理部','W','a',NULL,NULL,NULL,'非业务合同用印',1,NULL,NULL,7,'N'),('2019-04-09',50,12,'业务部','P','a,b','','','','合同用印：踏歌行',1,21,NULL,NULL,'N'),('2019-04-18',52,12,'业务部','W','a','','','','非业务合同用印（我方自拟）',1,NULL,NULL,12,'N'),('2019-04-18',53,12,'业务部','W','a','','','','非业务合同用印（对方提供合同）',1,NULL,NULL,13,'N'),('2019-04-19',54,12,'业务部','W','a',NULL,NULL,NULL,'业务合同审查通过后用印',1,NULL,10,NULL,'N'),('2019-04-19',55,12,'业务部','W','a',NULL,NULL,NULL,'业务合同审查通过后用印',1,NULL,11,NULL,'N'),('2019-04-19',56,12,'业务部','W','a',NULL,NULL,NULL,'合同用印',1,22,NULL,NULL,'N'),('2019-04-19',57,12,'业务部','W','a',NULL,NULL,NULL,'合同用印',1,23,NULL,NULL,'N');
/*!40000 ALTER TABLE `ZxBg_A_YzZzSq` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `ZxBg_A_YzZzSq_13` BEFORE UPDATE ON `ZxBg_A_YzZzSq`
  FOR EACH ROW
label1:
BEGIN
	declare vCnt tinyint unsigned;
    
	if new.SqYzLbCodes!=old.SqYzLbCodes and new.SqYzLbCodes is not null then
    	select count(*) into vCnt 
        from ZxBg_A_YzZzSqMx mx,ZxBg_M_YzZz m
        where mx.ZtID=new.ID and mx.YzZzID=m.ID and m.YzLb is not null and FIND_IN_SET(m.YzLb,new.SqYzLbCodes)=0;
        
        if vCnt>0 then
        	call ZxBg_A_YzZzSq_13_err1(); # 具体申请印章与申请种类不符！
            leave label1;
        end if;
    end if;
    
	if new.SqZzLbCodes!=old.SqZzLbCodes and new.SqZzLbCodes is not null then
    	select count(*) into vCnt 
        from ZxBg_A_YzZzSqMx mx,ZxBg_M_YzZz m
        where mx.ZtID=new.ID and mx.YzZzID=m.ID and m.ZzLb is not null and FIND_IN_SET(m.ZzLb,new.SqZzLbCodes)=0;
        
        if vCnt>0 then
        	call ZxBg_A_YzZzSq_13_err2(); # 具体申请证照与申请种类不符！
            leave label1;
        end if;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `ZxBg_A_YzZzSq_22` AFTER DELETE ON `ZxBg_A_YzZzSq`
  FOR EACH ROW
BEGIN
	update Pf_A_AttachInfo 
    set DelTag='Y' 
    where PrimaryName in ('ZxBg_A_YzZzSq_1','ZxBg_A_YzZzSq_2','ZxBg_A_YzZzSq_Qz') and PrimaryID=old.ID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `ZxBg_A_YzZzSqMx`
--

DROP TABLE IF EXISTS `ZxBg_A_YzZzSqMx`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ZxBg_A_YzZzSqMx` (
  `RecDivTag` date NOT NULL COMMENT '分区日期戳',
  `ID` int(12) unsigned NOT NULL AUTO_INCREMENT COMMENT '明细流水',
  `ZtID` int(10) unsigned NOT NULL COMMENT '申请单ID',
  `YzZzID` tinyint(3) unsigned NOT NULL COMMENT '印章证照ID',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `ZxBg_A_YzZzSqMx_uk` (`ZtID`,`YzZzID`),
  KEY `ZtID` (`ZtID`),
  KEY `YzZzID` (`YzZzID`),
  CONSTRAINT `ZxBg_A_YzZzSqMx_fk1` FOREIGN KEY (`ZtID`) REFERENCES `ZxBg_A_YzZzSq` (`ID`) ON DELETE CASCADE,
  CONSTRAINT `ZxBg_A_YzZzSqMx_fk2` FOREIGN KEY (`YzZzID`) REFERENCES `ZxBg_M_YzZz` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=47 DEFAULT CHARSET=utf8 PACK_KEYS=0 COMMENT='印章、证照申请明细';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `ZxBg_A_YzZzSqMx`
--

LOCK TABLES `ZxBg_A_YzZzSqMx` WRITE;
/*!40000 ALTER TABLE `ZxBg_A_YzZzSqMx` DISABLE KEYS */;
INSERT INTO `ZxBg_A_YzZzSqMx` VALUES ('2018-08-18',19,29,1),('2018-08-18',20,29,4),('2018-06-26',22,27,1),('2018-08-19',24,30,1),('2018-09-07',25,31,1),('2018-10-07',32,34,1),('2018-10-07',33,34,6),('2018-11-26',36,36,1),('2019-03-27',39,44,1),('2019-03-27',40,44,6),('2019-03-06',41,41,1),('2019-03-27',42,45,1),('2019-04-09',43,50,1),('2019-04-09',44,50,4),('2019-04-18',45,53,1),('2019-04-18',46,52,1);
/*!40000 ALTER TABLE `ZxBg_A_YzZzSqMx` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `ZxBg_A_YzZzSqMx_11` BEFORE INSERT ON `ZxBg_A_YzZzSqMx`
  FOR EACH ROW
label1:
BEGIN
	declare vCnt tinyint unsigned;
    declare vRecDivTag date;
    
    select count(*) into vCnt
    from ZxBg_A_YzZzSq
    where ID=new.ZtID and exists(select 1 from ZxBg_M_YzZz where ID=new.YzZzID and 
    	((YzLb is not null and FIND_IN_SET(YzLb,ZxBg_A_YzZzSq.SqYzLbCodes)=0) or 
         (ZzLb is not null and FIND_IN_SET(ZzLb,ZxBg_A_YzZzSq.SqZzLbCodes)=0)));

	if vCnt>0 then
		call ZxBg_A_YzZzSqMx_11_err1(); # 具体申请印章/证照与申请种类不符！
		leave label1;
	end if;
    
    select RecDivTag into vRecDivTag from ZxBg_A_YzZzSq where ID=new.ZtID;
    set new.RecDivTag=vRecDivTag;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `ZxBg_M_DeSkf`
--

DROP TABLE IF EXISTS `ZxBg_M_DeSkf`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ZxBg_M_DeSkf` (
  `ID` smallint(5) unsigned NOT NULL AUTO_INCREMENT COMMENT '收款方ID',
  `SkrMc` varchar(100) NOT NULL COMMENT '收款人名称',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `SkrMc` (`SkrMc`)
) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8 PACK_KEYS=0 COMMENT='大额收款方';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `ZxBg_M_DeSkf`
--

LOCK TABLES `ZxBg_M_DeSkf` WRITE;
/*!40000 ALTER TABLE `ZxBg_M_DeSkf` DISABLE KEYS */;
INSERT INTO `ZxBg_M_DeSkf` VALUES (6,'包不同'),(1,'北京雷特世纪有限公司'),(3,'李嘉诚'),(4,'科电数据服务有限公司'),(5,'胡平'),(2,'贵州习酒股份有限公司');
/*!40000 ALTER TABLE `ZxBg_M_DeSkf` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `ZxBg_M_DeSkfZh`
--

DROP TABLE IF EXISTS `ZxBg_M_DeSkfZh`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ZxBg_M_DeSkfZh` (
  `AcctNo` varchar(50) NOT NULL COMMENT '帐号',
  `Khh` varchar(50) NOT NULL COMMENT '开户银行',
  `DeSkfID` smallint(5) unsigned NOT NULL COMMENT '大额收款方ID',
  PRIMARY KEY (`AcctNo`),
  KEY `DeSkfID` (`DeSkfID`),
  CONSTRAINT `ZxBg_M_DeSkfZh_fk1` FOREIGN KEY (`DeSkfID`) REFERENCES `ZxBg_M_DeSkf` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 PACK_KEYS=0 COMMENT='大额收款方账号';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `ZxBg_M_DeSkfZh`
--

LOCK TABLES `ZxBg_M_DeSkfZh` WRITE;
/*!40000 ALTER TABLE `ZxBg_M_DeSkfZh` DISABLE KEYS */;
INSERT INTO `ZxBg_M_DeSkfZh` VALUES ('1111 2222 3333 4444 123','建设银行知春路支行',1),('2222 2222 3333 4444 123','北京银行知春路支行',1),('2222 3232 2323 3434 222','香港汇丰银行',3),('2222 4343 2525 6565 777','中信银行内蒙古呼和浩特分行',4),('3333 1212 2323 3434 678','建设银行贵阳支行',2),('3333 1212 3232 4334 223','建设银行江苏扬州分行',5),('3333 1212 3232 4334 333','建设银行江苏扬州分行',5),('7777 8888 6666 5555 678','内蒙古银行呼和浩特赛罕分行',6);
/*!40000 ALTER TABLE `ZxBg_M_DeSkfZh` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `ZxBg_M_LsXm`
--

DROP TABLE IF EXISTS `ZxBg_M_LsXm`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ZxBg_M_LsXm` (
  `ID` smallint(5) unsigned NOT NULL AUTO_INCREMENT COMMENT '项目ID',
  `XmMc` varchar(100) NOT NULL COMMENT '项目名称',
  `XmDwID` smallint(5) unsigned NOT NULL COMMENT '项目单位ID',
  `XmJj` varchar(1000) NOT NULL COMMENT '项目简介',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `XmMc` (`XmMc`),
  KEY `XmDwID` (`XmDwID`),
  CONSTRAINT `ZxBg_M_LsXm_fk1` FOREIGN KEY (`XmDwID`) REFERENCES `Pf_M_EntAppCode` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8 PACK_KEYS=0 COMMENT='未正式立项项目';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `ZxBg_M_LsXm`
--

LOCK TABLES `ZxBg_M_LsXm` WRITE;
/*!40000 ALTER TABLE `ZxBg_M_LsXm` DISABLE KEYS */;
INSERT INTO `ZxBg_M_LsXm` VALUES (1,'立思震科技参股项目',17,'立思震科技参股项目\r\n立思震科技参股项目立思震科技参股项目\r\n1、\r\n2、'),(2,'办公室装饰瓷器采购',68,'办公室装饰瓷器采购：\r\n1\r\n2'),(3,'北京雷特世纪网络科技有限公司收购',72,'北京雷特世纪网络科技有限公司2003年创建，CEO刘勇为原甘肃农行科技部负责人。产品成功案例客户：\r\n1、农业银行甘肃兰州分行；\r\n2、农业银行江西吉安分行。');
/*!40000 ALTER TABLE `ZxBg_M_LsXm` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `ZxBg_M_QyGs`
--

DROP TABLE IF EXISTS `ZxBg_M_QyGs`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ZxBg_M_QyGs` (
  `ID` tinyint(3) unsigned NOT NULL AUTO_INCREMENT,
  `Mc` varchar(80) NOT NULL,
  `Dm` varchar(10) NOT NULL,
  `Px` tinyint(3) unsigned NOT NULL,
  `SfYx` char(1) NOT NULL DEFAULT 'Y',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `ID` (`ID`),
  UNIQUE KEY `Mc` (`Mc`),
  UNIQUE KEY `Dm` (`Dm`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `ZxBg_M_QyGs`
--

LOCK TABLES `ZxBg_M_QyGs` WRITE;
/*!40000 ALTER TABLE `ZxBg_M_QyGs` DISABLE KEYS */;
INSERT INTO `ZxBg_M_QyGs` VALUES (1,'庆源总部','QYZB',1,'Y'),(3,'长生公司','QYCS',2,'Y');
/*!40000 ALTER TABLE `ZxBg_M_QyGs` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `ZxBg_M_Skf`
--

DROP TABLE IF EXISTS `ZxBg_M_Skf`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ZxBg_M_Skf` (
  `ID` smallint(5) unsigned NOT NULL AUTO_INCREMENT COMMENT '收款方ID',
  `SkrMc` varchar(100) NOT NULL COMMENT '收款人名称',
  `Khh` varchar(50) DEFAULT NULL COMMENT '开户银行',
  `AcctNo` varchar(50) DEFAULT NULL COMMENT '最新帐号',
  `YfYe` decimal(15,2) unsigned NOT NULL DEFAULT '0.00',
  `UpdTs` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '最后更新时间',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `AcctNo` (`AcctNo`)
) ENGINE=InnoDB AUTO_INCREMENT=14 DEFAULT CHARSET=utf8 PACK_KEYS=0 COMMENT='收款方信息';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `ZxBg_M_Skf`
--

LOCK TABLES `ZxBg_M_Skf` WRITE;
/*!40000 ALTER TABLE `ZxBg_M_Skf` DISABLE KEYS */;
INSERT INTO `ZxBg_M_Skf` VALUES (5,'深圳雷特世纪有限公司','建设银行深圳宝安分行','3241 8576 1122 3344 789',0.00,'2018-08-02 00:49:25'),(6,'深圳雷特世纪科技有限公司','建设银行深圳保安支行','1212 3434 5656 7788 890',21000.00,'2018-08-11 04:46:08'),(7,'深圳赛世特电子商贸公司',NULL,NULL,0.00,'2018-08-15 03:50:19'),(8,'北京长城惠普代理公司',NULL,NULL,0.00,'2018-08-15 03:58:20'),(9,'北京长城电子有限公司',NULL,NULL,0.00,'2018-08-15 07:12:25'),(10,'北京雷特世纪有限公司','中国光大银行北京北太平庄支行','35230188000089781',0.00,'2018-08-23 08:24:48'),(11,'北京雷特世纪',NULL,NULL,0.00,'2018-08-23 10:27:18'),(12,'呼和浩特可汗商贸',NULL,NULL,0.00,'2018-10-17 01:16:33'),(13,'北京以太科技有限公司',NULL,NULL,0.00,'2018-11-21 03:49:26');
/*!40000 ALTER TABLE `ZxBg_M_Skf` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `ZxBg_M_XmBhNdFp`
--

DROP TABLE IF EXISTS `ZxBg_M_XmBhNdFp`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ZxBg_M_XmBhNdFp` (
  `QyGsID` tinyint(3) unsigned NOT NULL,
  `Nd` char(4) NOT NULL,
  `DfpNnBh` tinyint(3) unsigned NOT NULL,
  PRIMARY KEY (`QyGsID`,`Nd`),
  KEY `QyGsID` (`QyGsID`),
  CONSTRAINT `ZxBg_M_XmBhNdFp_fk1` FOREIGN KEY (`QyGsID`) REFERENCES `ZxBg_M_QyGs` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `ZxBg_M_XmBhNdFp`
--

LOCK TABLES `ZxBg_M_XmBhNdFp` WRITE;
/*!40000 ALTER TABLE `ZxBg_M_XmBhNdFp` DISABLE KEYS */;
INSERT INTO `ZxBg_M_XmBhNdFp` VALUES (1,'2018',9);
/*!40000 ALTER TABLE `ZxBg_M_XmBhNdFp` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `ZxBg_M_XmDir`
--

DROP TABLE IF EXISTS `ZxBg_M_XmDir`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ZxBg_M_XmDir` (
  `ID` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `XmID` smallint(5) unsigned NOT NULL COMMENT '所属项目ID',
  `Mc` varchar(80) NOT NULL COMMENT '目录名',
  `UpDirID` int(10) unsigned NOT NULL COMMENT '父目录ID',
  `SmallOrd` tinyint(3) unsigned NOT NULL COMMENT '同级排序号',
  `DirLevel` tinyint(3) unsigned NOT NULL COMMENT '目录树层级',
  `BigOrdCode` varchar(30) NOT NULL COMMENT '总排序码',
  `FullPathName` varchar(300) NOT NULL COMMENT '全路径名',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `ZxBg_M_XmDir_uk1` (`XmID`,`Mc`,`UpDirID`),
  KEY `XmID` (`XmID`),
  CONSTRAINT `ZxBg_M_XmDir_fk1` FOREIGN KEY (`XmID`) REFERENCES `ZxBg_M_XmXx` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=118 DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `ZxBg_M_XmDir`
--

LOCK TABLES `ZxBg_M_XmDir` WRITE;
/*!40000 ALTER TABLE `ZxBg_M_XmDir` DISABLE KEYS */;
INSERT INTO `ZxBg_M_XmDir` VALUES (1,1,'项目文件',0,1,1,'001','项目文件'),(2,1,'a、项目立项阶段',1,1,2,'001001','项目文件/a、项目立项阶段'),(3,1,'b、项目尽职调查及实施方案设计阶段',1,2,2,'001002','项目文件/b、项目尽职调查及实施方案设计阶段'),(4,1,'c、项目审查阶段',1,3,2,'001003','项目文件/c、项目审查阶段'),(5,1,'d、决策会审议阶段',1,4,2,'001004','项目文件/d、决策会审议阶段'),(6,1,'e、项目实施阶段',1,5,2,'001005','项目文件/e、项目实施阶段'),(7,1,'f、项目后续管理及处置阶段',1,6,2,'001006','项目文件/f、项目后续管理及处置阶段'),(8,1,'g、项目完成结算、清算与退出阶段',1,7,2,'001007','项目文件/g、项目完成结算、清算与退出阶段'),(9,2,'项目文件',0,2,1,'002','项目文件'),(10,2,'a、项目立项阶段',9,1,2,'002001','项目文件/a、项目立项阶段'),(11,2,'b、项目尽职调查及实施方案设计阶段',9,2,2,'002002','项目文件/b、项目尽职调查及实施方案设计阶段'),(12,2,'c、项目审查阶段',9,3,2,'002003','项目文件/c、项目审查阶段'),(13,2,'d、决策会审议阶段',9,4,2,'002004','项目文件/d、决策会审议阶段'),(14,2,'e、项目实施阶段',9,5,2,'002005','项目文件/e、项目实施阶段'),(15,2,'f、项目后续管理及处置阶段',9,6,2,'002006','项目文件/f、项目后续管理及处置阶段'),(16,2,'g、项目完成结算、清算与退出阶段',9,7,2,'002007','项目文件/g、项目完成结算、清算与退出阶段'),(18,1,'测试目录2',7,3,3,'001006003','项目文件/f、项目后续管理及处置阶段/测试目录2'),(19,1,'测试目录1',2,1,3,'001001001','项目文件/a、项目立项阶段/测试目录1'),(20,1,'测试目录1',7,2,3,'001006002','项目文件/f、项目后续管理及处置阶段/测试目录1'),(29,4,'项目文件',0,3,1,'003','项目文件'),(30,4,'a、项目立项阶段',29,1,2,'003001','项目文件/a、项目立项阶段'),(31,4,'b、项目尽职调查及实施方案设计阶段',29,2,2,'003002','项目文件/b、项目尽职调查及实施方案设计阶段'),(32,4,'c、项目审查阶段',29,3,2,'003003','项目文件/c、项目审查阶段'),(33,4,'d、决策会审议阶段',29,4,2,'003004','项目文件/d、决策会审议阶段'),(34,4,'e、项目实施阶段',29,5,2,'003005','项目文件/e、项目实施阶段'),(35,4,'f、项目后续管理及处置阶段',29,6,2,'003006','项目文件/f、项目后续管理及处置阶段'),(36,4,'g、项目完成结算、清算与退出阶段',29,7,2,'003007','项目文件/g、项目完成结算、清算与退出阶段'),(37,5,'项目文件',0,4,1,'004','项目文件'),(38,5,'a、项目立项阶段',37,1,2,'004001','项目文件/a、项目立项阶段'),(39,5,'b、项目尽职调查及实施方案设计阶段',37,2,2,'004002','项目文件/b、项目尽职调查及实施方案设计阶段'),(40,5,'c、项目审查阶段',37,3,2,'004003','项目文件/c、项目审查阶段'),(41,5,'d、决策会审议阶段',37,4,2,'004004','项目文件/d、决策会审议阶段'),(42,5,'e、项目实施阶段',37,5,2,'004005','项目文件/e、项目实施阶段'),(43,5,'f、项目后续管理及处置阶段',37,6,2,'004006','项目文件/f、项目后续管理及处置阶段'),(44,5,'g、项目完成结算、清算与退出阶段',37,7,2,'004007','项目文件/g、项目完成结算、清算与退出阶段'),(53,7,'项目文件',0,5,1,'005','项目文件'),(54,7,'a、项目立项阶段',53,1,2,'005001','项目文件/a、项目立项阶段'),(55,7,'b、项目尽职调查及实施方案设计阶段',53,2,2,'005002','项目文件/b、项目尽职调查及实施方案设计阶段'),(56,7,'c、项目审查阶段',53,3,2,'005003','项目文件/c、项目审查阶段'),(57,7,'d、决策会审议阶段',53,4,2,'005004','项目文件/d、决策会审议阶段'),(58,7,'e、项目实施阶段',53,5,2,'005005','项目文件/e、项目实施阶段'),(59,7,'f、项目后续管理及处置阶段',53,6,2,'005006','项目文件/f、项目后续管理及处置阶段'),(60,7,'g、项目完成结算、清算与退出阶段',53,7,2,'005007','项目文件/g、项目完成结算、清算与退出阶段'),(61,7,'事件1',58,1,3,'005005001','项目文件/e、项目实施阶段/事件1'),(62,8,'项目文件',0,6,1,'006','项目文件'),(63,8,'a、项目立项阶段',62,1,2,'006001','项目文件/a、项目立项阶段'),(64,8,'b、项目尽职调查及实施方案设计阶段',62,2,2,'006002','项目文件/b、项目尽职调查及实施方案设计阶段'),(65,8,'c、项目审查阶段',62,3,2,'006003','项目文件/c、项目审查阶段'),(66,8,'d、决策会审议阶段',62,4,2,'006004','项目文件/d、决策会审议阶段'),(67,8,'e、项目实施阶段',62,5,2,'006005','项目文件/e、项目实施阶段'),(68,8,'f、项目后续管理及处置阶段',62,6,2,'006006','项目文件/f、项目后续管理及处置阶段'),(69,8,'g、项目完成结算、清算与退出阶段',62,7,2,'006007','项目文件/g、项目完成结算、清算与退出阶段'),(70,9,'项目文件',0,7,1,'007','项目文件'),(71,9,'a、项目立项阶段',70,1,2,'007001','项目文件/a、项目立项阶段'),(72,9,'b、项目尽职调查及实施方案设计阶段',70,2,2,'007002','项目文件/b、项目尽职调查及实施方案设计阶段'),(73,9,'c、项目审查阶段',70,3,2,'007003','项目文件/c、项目审查阶段'),(74,9,'d、决策会审议阶段',70,4,2,'007004','项目文件/d、决策会审议阶段'),(75,9,'e、项目实施阶段',70,5,2,'007005','项目文件/e、项目实施阶段'),(76,9,'f、项目后续管理及处置阶段',70,6,2,'007006','项目文件/f、项目后续管理及处置阶段'),(77,9,'g、项目完成结算、清算与退出阶段',70,7,2,'007007','项目文件/g、项目完成结算、清算与退出阶段'),(78,10,'项目文件',0,8,1,'008','项目文件'),(79,10,'a、项目立项阶段',78,1,2,'008001','项目文件/a、项目立项阶段'),(80,10,'b、项目尽职调查及实施方案设计阶段',78,2,2,'008002','项目文件/b、项目尽职调查及实施方案设计阶段'),(81,10,'c、项目审查阶段',78,3,2,'008003','项目文件/c、项目审查阶段'),(82,10,'d、决策会审议阶段',78,4,2,'008004','项目文件/d、决策会审议阶段'),(83,10,'e、项目实施阶段',78,5,2,'008005','项目文件/e、项目实施阶段'),(84,10,'f、项目后续管理及处置阶段',78,6,2,'008006','项目文件/f、项目后续管理及处置阶段'),(85,10,'g、项目完成结算、清算与退出阶段',78,7,2,'008007','项目文件/g、项目完成结算、清算与退出阶段'),(94,12,'项目文件',0,9,1,'009','项目文件'),(95,12,'a、项目立项阶段',94,1,2,'009001','项目文件/a、项目立项阶段'),(96,12,'b、项目尽职调查及实施方案设计阶段',94,2,2,'009002','项目文件/b、项目尽职调查及实施方案设计阶段'),(97,12,'c、项目审查审议阶段',94,3,2,'009003','项目文件/c、项目审查审议阶段'),(98,12,'d、决策会审批阶段',94,4,2,'009004','项目文件/d、决策会审批阶段'),(99,12,'e、项目实施阶段',94,5,2,'009005','项目文件/e、项目实施阶段'),(100,12,'f、项目后续管理及处置阶段',94,6,2,'009006','项目文件/f、项目后续管理及处置阶段'),(101,12,'g、项目完成结算、清算与退出阶段',94,7,2,'009007','项目文件/g、项目完成结算、清算与退出阶段'),(102,13,'项目文件',0,10,1,'010','项目文件'),(103,13,'a、项目立项阶段',102,1,2,'010001','项目文件/a、项目立项阶段'),(104,13,'b、项目尽职调查及实施方案设计阶段',102,2,2,'010002','项目文件/b、项目尽职调查及实施方案设计阶段'),(105,13,'c、项目审查审议阶段',102,3,2,'010003','项目文件/c、项目审查审议阶段'),(106,13,'d、决策会审批阶段',102,4,2,'010004','项目文件/d、决策会审批阶段'),(107,13,'e、项目实施阶段',102,5,2,'010005','项目文件/e、项目实施阶段'),(108,13,'f、项目后续管理及处置阶段',102,6,2,'010006','项目文件/f、项目后续管理及处置阶段'),(109,13,'g、项目完成结算、清算与退出阶段',102,7,2,'010007','项目文件/g、项目完成结算、清算与退出阶段'),(110,14,'项目文件',0,11,1,'011','项目文件'),(111,14,'a、项目立项阶段',110,1,2,'011001','项目文件/a、项目立项阶段'),(112,14,'b、项目尽职调查及实施方案设计阶段',110,2,2,'011002','项目文件/b、项目尽职调查及实施方案设计阶段'),(113,14,'c、项目审查审议阶段',110,3,2,'011003','项目文件/c、项目审查审议阶段'),(114,14,'d、决策会审批阶段',110,4,2,'011004','项目文件/d、决策会审批阶段'),(115,14,'e、项目实施阶段',110,5,2,'011005','项目文件/e、项目实施阶段'),(116,14,'f、项目后续管理及处置阶段',110,6,2,'011006','项目文件/f、项目后续管理及处置阶段'),(117,14,'g、项目完成结算、清算与退出阶段',110,7,2,'011007','项目文件/g、项目完成结算、清算与退出阶段');
/*!40000 ALTER TABLE `ZxBg_M_XmDir` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `ZxBg_M_XmDir_11` BEFORE INSERT ON `ZxBg_M_XmDir`
  FOR EACH ROW
BEGIN
 	set NEW.SmallOrd=(select COALESCE(max(SmallOrd),0)+1 from ZxBg_M_XmDir where UpDirID = NEW.UpDirID);
 	
 	if NEW.UpDirID=0 then
 		set NEW.DirLevel=1;
 		set NEW.BigOrdCode=LPAD(CONCAT(NEW.SmallOrd,''),3,'0');
 		set NEW.FullPathName=NEW.Mc;
 	else
 		select DirLevel + 1, concat(BigOrdCode,LPAD(concat(NEW.SmallOrd,''),3,'0')), concat(FullPathName,'/',NEW.Mc),XmID 
 		into @DirLevel, @BigOrdCode, @FullPathName, @XmID 
 		from ZxBg_M_XmDir where ID = NEW.UpDirID;
 		
 		set NEW.DirLevel=@DirLevel;
 		set NEW.BigOrdCode=@BigOrdCode;
 		set NEW.FullPathName=@FullPathName;
        set NEW.XmID=@XmID;
 	end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `ZxBg_M_XmDir_22` AFTER DELETE ON `ZxBg_M_XmDir`
  FOR EACH ROW
BEGIN
	update Pf_M_AttachInfo set DelTag='Y' where PrimaryName ='ZxBg_M_XmDir' and PrimaryID=old.ID;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `ZxBg_M_XmHt`
--

DROP TABLE IF EXISTS `ZxBg_M_XmHt`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ZxBg_M_XmHt` (
  `ID` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '标识',
  `HtBh` varchar(40) NOT NULL COMMENT '合同编号',
  `HtMc` varchar(100) NOT NULL COMMENT '合同名称',
  `HtAmt` decimal(15,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '合同金额',
  `LjFkAmt` decimal(15,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '已付金额',
  `XmID` smallint(5) unsigned NOT NULL COMMENT '所属项目ID',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `HtBh` (`HtBh`),
  UNIQUE KEY `HtMc` (`HtMc`),
  KEY `XmID` (`XmID`),
  CONSTRAINT `ZxBg_M_XmHt_fk1` FOREIGN KEY (`XmID`) REFERENCES `ZxBg_M_XmXx` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=24 DEFAULT CHARSET=utf8 PACK_KEYS=0 COMMENT='项目合同';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `ZxBg_M_XmHt`
--

LOCK TABLES `ZxBg_M_XmHt` WRITE;
/*!40000 ALTER TABLE `ZxBg_M_XmHt` DISABLE KEYS */;
INSERT INTO `ZxBg_M_XmHt` VALUES (2,'SG_2018001','入股汇丰银行合同1',10000000.00,0.00,5),(3,'SG-2018002','贵州习酒收购1期合同',12000000.00,0.00,7),(7,'SG-2018004','贵州习酒收购2期',21000000.00,200000.00,7),(9,'SG-GZXJ-2018001','与贵州习酒往来合同1',20000000.00,0.00,7),(10,'-20180101','OA系统建设项目',1000000.00,15000000.00,2),(12,'HF20180627','汇丰入股合同20180627',30000000.00,20000000.00,5),(15,'KDRG-01','科电入股1期',50000000.00,0.00,9),(16,'ZB2018-101','呼和浩特大会宾餐饮有限公司收购1期款',5010000.00,0.00,10),(18,'SPHT-201903-001','内蒙饭店收购合同-1',7120000.00,2600000.00,12),(19,'HT201903-001','北京同天科技收购合同-1',21200000.00,0.00,13),(21,'SG-20190409','踏歌行业务合同20190409',5020000.00,5020000.00,14),(22,'SPHT-A-20190419','审批合同20190419（我方出合同）',3000000.00,0.00,14),(23,'SPHT-B-20190419','审批合同20190419（对方出合同）',4500000.00,0.00,13);
/*!40000 ALTER TABLE `ZxBg_M_XmHt` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `ZxBg_M_XmXx`
--

DROP TABLE IF EXISTS `ZxBg_M_XmXx`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ZxBg_M_XmXx` (
  `ID` smallint(5) unsigned NOT NULL AUTO_INCREMENT,
  `XmMc` varchar(100) NOT NULL COMMENT '项目名称',
  `QyGsID` tinyint(3) unsigned DEFAULT NULL COMMENT '签约公司',
  `XmBh` varchar(20) DEFAULT NULL COMMENT '项目编号',
  `XmJj` varchar(1000) NOT NULL COMMENT '项目简介',
  `XmJe` decimal(15,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '项目金额（万元）',
  `QqFyYn` char(1) NOT NULL COMMENT '有无前期费用',
  `JbBmID` smallint(5) unsigned NOT NULL COMMENT '经办业务部门ID',
  `SqLxSj` datetime NOT NULL COMMENT '申请立项时间',
  `SqLxrID` smallint(5) unsigned NOT NULL COMMENT '申请立项人ID',
  `Ywy2ID` smallint(5) unsigned NOT NULL COMMENT '第二业务员ID',
  `LxHpSj` datetime NOT NULL COMMENT '立项获批时间',
  `XmDqJdCode` char(1) NOT NULL COMMENT '项目当前阶段',
  `GgXmJdSm` varchar(200) DEFAULT NULL COMMENT '更改项目阶段说明',
  `JzDcXzCyIDs` varchar(20) DEFAULT NULL COMMENT '尽调小组成员IDs',
  `JzDcTjFgLdSj` datetime DEFAULT NULL COMMENT '尽调材料提交分管领导时间',
  `JzDcHpSj` datetime DEFAULT NULL COMMENT '尽调材料获批时间',
  `TjScSj` datetime DEFAULT NULL COMMENT '提交审查时间',
  `ScWcSj` datetime DEFAULT NULL COMMENT '审查完成时间',
  `XmScJgMs` varchar(200) DEFAULT NULL COMMENT '审查结果',
  `XmScHpSj` datetime DEFAULT NULL COMMENT '项目审查获批时间',
  `JchSqSj` date DEFAULT NULL COMMENT '决策会申请时间',
  `JchZkSj` date DEFAULT NULL COMMENT '决策会召开时间',
  `ChTpCnt` tinyint(3) unsigned DEFAULT NULL COMMENT '参会投票人数',
  `PassCnt` tinyint(3) unsigned DEFAULT NULL COMMENT '同意数',
  `RejectCnt` tinyint(3) unsigned DEFAULT NULL COMMENT '反对数',
  `DiscardCnt` tinyint(3) unsigned DEFAULT NULL COMMENT '弃权数',
  `SsYj` varchar(1000) DEFAULT NULL COMMENT '项目实施要件',
  `FkSqSj` datetime DEFAULT NULL COMMENT '付款申请时间',
  `FkSqrID` smallint(5) unsigned DEFAULT NULL COMMENT '付款申请人ID',
  `ZjDwRq` date DEFAULT NULL COMMENT '资金到位时间',
  `FkJbCnID` smallint(5) unsigned DEFAULT NULL COMMENT '付款经办出纳ID',
  `HtQdRq` date DEFAULT NULL COMMENT '业务合同签订时间',
  `HtYjKjHsSj` datetime DEFAULT NULL COMMENT '合同移交会计核算时间',
  `FkSj` datetime DEFAULT NULL COMMENT '划款时间',
  `LjFkAmt` decimal(15,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '累计付款金额',
  `XmGlFs` varchar(80) DEFAULT NULL COMMENT '项目管理方式',
  `XmGlSd1` date DEFAULT NULL COMMENT '项目管理时段1',
  `XmGlSd2` date DEFAULT NULL COMMENT '项目管理时段2',
  `ZcCzInitJbID` smallint(5) unsigned DEFAULT NULL COMMENT '持有管理经办人ID',
  `ZcCzJzDcSj1` date DEFAULT NULL COMMENT '资产处置尽职调查时间1',
  `ZcCzJzDcSj2` date DEFAULT NULL COMMENT '资产处置尽职调查时间2',
  `ZcCzJzDcRyIDs` varchar(20) DEFAULT NULL COMMENT '资产处置调查人员IDs',
  `ZcCzClTjSj` date DEFAULT NULL COMMENT '资产处置材料提交决策办时间',
  `ZcCzJcbShSj` date DEFAULT NULL COMMENT '资产处置决策办审核时间',
  `ZcCzJchFqJbID` smallint(5) unsigned DEFAULT NULL COMMENT '资产处置发起决策会经办人ID',
  `ZcCzJcSj` date DEFAULT NULL COMMENT '资产处置决策时间',
  `ZcCzJcYj` varchar(100) DEFAULT NULL COMMENT '资产处置决策意见',
  `ZcCzHtQsSj` date DEFAULT NULL COMMENT '处置合同签署时间',
  `ZcCzHtQsJbID` smallint(5) unsigned DEFAULT NULL COMMENT '资产处置合同经办人ID',
  `ZcCzYjSj` date DEFAULT NULL COMMENT '资产处置移交时间',
  `ZcCzYjJbID` smallint(5) unsigned DEFAULT NULL COMMENT '资产处置移交经办人ID',
  `ZcCzXhSj` date DEFAULT NULL COMMENT '资产处置销户时间',
  `ZcCzXhJbID` smallint(5) unsigned DEFAULT NULL COMMENT '资产处置销户经办人ID',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `XmMc` (`XmMc`),
  UNIQUE KEY `XmBh` (`XmBh`),
  KEY `JbBmID` (`JbBmID`),
  KEY `SqLxrID` (`SqLxrID`),
  KEY `Ywy2ID` (`Ywy2ID`),
  KEY `FkSqrID` (`FkSqrID`),
  KEY `FkJbCnID` (`FkJbCnID`),
  KEY `ZcCzJchFqJbID` (`ZcCzJchFqJbID`),
  KEY `ZcCzHtQsJbID` (`ZcCzHtQsJbID`),
  KEY `ZcCzYjJbID` (`ZcCzYjJbID`),
  KEY `ZcCzXhJbID` (`ZcCzXhJbID`),
  CONSTRAINT `ZxBg_M_XmXx_fk10` FOREIGN KEY (`ZcCzXhJbID`) REFERENCES `Pf_M_Usr` (`ID`),
  CONSTRAINT `ZxBg_M_XmXx_fk2` FOREIGN KEY (`JbBmID`) REFERENCES `Pf_M_Org` (`ID`),
  CONSTRAINT `ZxBg_M_XmXx_fk3` FOREIGN KEY (`SqLxrID`) REFERENCES `Pf_M_Usr` (`ID`),
  CONSTRAINT `ZxBg_M_XmXx_fk4` FOREIGN KEY (`Ywy2ID`) REFERENCES `Pf_M_Usr` (`ID`),
  CONSTRAINT `ZxBg_M_XmXx_fk5` FOREIGN KEY (`FkSqrID`) REFERENCES `Pf_M_Usr` (`ID`),
  CONSTRAINT `ZxBg_M_XmXx_fk6` FOREIGN KEY (`FkJbCnID`) REFERENCES `Pf_M_Usr` (`ID`),
  CONSTRAINT `ZxBg_M_XmXx_fk7` FOREIGN KEY (`ZcCzJchFqJbID`) REFERENCES `Pf_M_Usr` (`ID`),
  CONSTRAINT `ZxBg_M_XmXx_fk8` FOREIGN KEY (`ZcCzHtQsJbID`) REFERENCES `Pf_M_Usr` (`ID`),
  CONSTRAINT `ZxBg_M_XmXx_fk9` FOREIGN KEY (`ZcCzYjJbID`) REFERENCES `Pf_M_Usr` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=15 DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `ZxBg_M_XmXx`
--

LOCK TABLES `ZxBg_M_XmXx` WRITE;
/*!40000 ALTER TABLE `ZxBg_M_XmXx` DISABLE KEYS */;
INSERT INTO `ZxBg_M_XmXx` VALUES (1,'北京立思震科技有限公司收购',1,'QYZB-2018-003','北京立思震科技公司收购项目简介：\r\n1、\r\n2、\r\n3、',0.00,'N',6,'2018-02-21 15:51:50',12,14,'2018-02-22 16:52:22','c','1、有问题，按领导意思驳回到立项阶段。/2018-02-26','14','2018-03-31 00:42:31','2018-03-31 00:45:52','2018-03-31 03:38:14','2018-03-31 06:29:41','通过','2018-03-31 06:29:41','2018-03-30','2018-03-31',6,5,1,NULL,'项目实施要件：\r\n111\r\n222\r\n333\r\n一一一\r\n二二二','2018-03-31 06:58:08',12,'2018-04-01',9,'2018-03-31','2018-03-31 09:05:49','2018-03-31 09:23:50',0.00,'管理方式1','2018-02-28','2018-05-30',12,'2018-02-26','2019-02-26','12,14',NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL),(2,'测试项目',1,'QYZB-2018-002','测试项目111',0.00,'Y',8,'2018-03-02 11:36:18',14,12,'2018-03-02 11:44:42','e',NULL,'10,11','2018-03-09 14:33:18','2018-03-09 15:58:17','2018-03-13 10:42:57','2018-03-13 14:31:43','通过审查','2018-03-13 14:31:43','2018-03-14','2018-03-15',15,10,5,NULL,'1.abcd哈哈哈\r\n2.356的附件','2018-08-21 18:32:35',14,'2018-08-21',11,'2018-08-03','2018-08-21 18:33:54','2018-08-21 18:45:08',1126111111.00,NULL,'2018-02-26','2019-02-26',12,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL),(4,'雷特世纪收购',1,'QYZB-2018-001','北京雷特世纪科技有限公司是一家IT安全方案设计实施公司，\r\n1、\r\n2、',0.00,'N',6,'2018-03-11 14:23:17',12,14,'2018-03-11 14:45:07','c',NULL,'8','2019-03-22 14:32:01','2019-03-22 14:32:25',NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,0.00,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL),(5,'入股汇丰银行',1,'QYZB-2018-004','1.前期入股1200万。\r\n2.100万资产及1100万资金。',0.00,'Y',6,'2018-03-22 13:20:36',12,14,'2018-03-22 13:30:45','e',NULL,'5,6,3','2018-03-22 13:33:28','2018-03-22 13:33:54','2018-03-22 13:41:41','2018-03-22 14:00:24','审查内容合格，同意实施。','2018-03-22 14:00:24','2018-03-22','2018-03-23',12,6,6,NULL,'121212','2018-08-21 18:19:15',12,'2018-08-21',11,'2018-08-02','2018-08-21 18:20:48','2018-08-21 18:23:30',20000000.00,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL),(7,'贵州习酒收购',1,'QYZB-2018-005','贵州习酒是酱香型白酒的典范\r\n1、\r\n2、',0.00,'N',6,'2018-04-30 05:33:16',12,14,'2018-04-30 07:12:10','e',NULL,'14','2018-04-30 07:15:25','2018-04-30 07:16:12','2018-04-30 08:11:52','2018-04-30 08:59:16','通过','2018-04-30 08:59:16','2018-04-27','2018-04-30',6,5,1,NULL,'项目实施要件：\r\n1、\r\n2、','2018-08-21 17:16:04',12,'2018-08-21',11,'2018-08-01','2018-08-21 17:43:10','2018-08-21 18:14:39',30600000.00,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL),(8,'OA系统',1,'QYZB-2018-006','OA',0.00,'N',8,'2018-05-22 10:45:35',14,14,'2018-05-22 10:52:30','d',NULL,'6,4','2018-05-22 10:54:47','2018-05-22 10:55:12','2018-05-22 11:33:06','2018-05-22 11:38:10','通过','2018-05-22 11:38:10',NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,0.00,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL),(9,'科电入股',1,'QYZB-2018-007','内蒙古科电数据服务公司简介\r\n1、\r\n2、',0.00,'Y',6,'2018-09-24 00:00:00',12,12,'2018-09-25 00:00:00','e',NULL,'8','2018-09-26 00:00:00','2018-09-27 00:00:00','2018-09-27 00:00:00','2018-09-28 00:00:00','通过','2018-10-07 02:50:01','2018-10-07','2018-10-09',5,5,0,NULL,'项目实施要件：\r\n1、\r\n2、','2018-10-02 00:00:00',12,'2018-10-03',11,'2018-09-28','2018-10-03 00:00:00','2018-10-05 00:00:00',5000000.00,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL),(10,'立项移动测试20181125',1,'QYZB-2018-008','呼和浩特大会宾餐饮有限公司收购\r\n1\r\n2',0.00,'N',6,'2018-11-25 15:41:57',12,12,'2018-11-25 16:03:59','e',NULL,'8,12','2018-11-25 17:32:39','2018-11-25 19:21:55','2018-11-25 19:28:07','2018-11-26 11:11:34','通过','2018-11-26 11:11:34','2018-11-25','2018-11-25',5,5,0,NULL,'立项移动测试20181125项目实施要件：\r\n1\r\n2','2018-11-27 16:55:44',12,'2018-11-27',11,'2018-11-26','2018-11-27 16:59:34','2018-11-27 17:03:22',3050000.00,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL),(12,'内蒙古饭店收购',1,'201903-001','内蒙古饭店收购：\r\n1、鱼香肉丝；\r\n2、葱烧海参',0.00,'N',6,'2019-03-21 17:24:45',12,8,'2019-03-22 10:27:54','e',NULL,'8','2019-03-22 11:22:34','2019-03-22 11:23:00','2019-03-22 00:00:00','2019-03-22 00:00:00','通过','2019-03-23 21:23:03','2019-03-22','2019-03-24',6,5,0,1,NULL,'2019-03-26 14:54:23',12,'2019-03-25',11,'2019-03-25','2019-03-26 14:57:48','2019-03-27 11:55:55',2600000.00,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL),(13,'北京同天科技有限公司收购',1,'201903-002','历史沿革： \r\n\r\n    北京同天科技有限公司于1993年正式成立，属于港澳台独资企业。2008年，公司由港澳台独资企业变更为中外合资企业。同年公司由中外合资企业变更为内资企业，注册资金增至2049.39万元人民币。2011年，注册资金增至5000万元人民币。从2012年开始，同天公司与国内著名安全厂商天融信展开深度合作，2015年，天融信公司注资，同天公司注册资金增至5882万元人民币。\r\n\r\n主营业务：\r\n\r\n    北京同天科技有限公司作为北京市科委认定的新一代“高新技术企业”，经过将近20年的发展已经成为中国市场中提供通信和互联网工程解决方案的先锋。公司定位于为行业用户的业务信息化提供解决方案。作为一个基于国际互联网络协议和带宽基础设施领域的网络工程服务供应商，公司一直致力于IT业和服务供应商的市场资源合理化应用。如今，北京同天科技有限公司通过整合国际先进技术，专注行业解决方案，已经迅速发展成为国内极具影响力的IT综合服务解决方案提供商之一。',0.00,'Y',6,'2019-03-27 10:21:54',12,8,'2019-03-27 10:32:42','e',NULL,'8','2019-03-27 10:38:54','2019-03-27 10:39:23','2019-03-27 10:44:55','2019-03-27 12:32:42','通过','2019-03-27 12:32:42','2019-03-27','2019-03-27',6,4,1,1,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,0.00,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL),(14,'踏歌行公司收购',1,'201904-001','踏歌行，芬兰\r\n1\r\n2\r\n3',0.00,'Y',6,'2019-04-09 10:36:59',12,8,'2019-04-09 10:43:01','e',NULL,'8','2019-04-09 10:47:15','2019-04-09 10:47:36','2019-04-09 10:49:21','2019-04-09 10:59:35','通过','2019-04-09 10:59:35','2019-04-09','2019-04-09',4,3,0,1,NULL,'2019-04-09 11:40:12',12,'2019-04-08',11,'2019-04-08','2019-04-09 11:40:50','2019-04-09 11:42:22',5020000.00,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL);
/*!40000 ALTER TABLE `ZxBg_M_XmXx` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `ZxBg_M_XmXx_21` AFTER INSERT ON `ZxBg_M_XmXx`
  FOR EACH ROW
BEGIN
	declare vXmDirRoot integer unsigned;
    
	insert into ZxBg_M_XmDir values (null,new.ID,'项目文件',0,0,0,'000','-');
    set vXmDirRoot=@@identity;
    insert into ZxBg_M_XmDir values (null,new.ID,concat('a、',Pf_CodeValueByCharCode(26,'a')),vXmDirRoot,0,0,'000','-');
    insert into ZxBg_M_XmDir values (null,new.ID,concat('b、',Pf_CodeValueByCharCode(26,'b')),vXmDirRoot,0,0,'000','-');
    insert into ZxBg_M_XmDir values (null,new.ID,concat('c、',Pf_CodeValueByCharCode(26,'c')),vXmDirRoot,0,0,'000','-');
    insert into ZxBg_M_XmDir values (null,new.ID,concat('d、',Pf_CodeValueByCharCode(26,'d')),vXmDirRoot,0,0,'000','-');
    insert into ZxBg_M_XmDir values (null,new.ID,concat('e、',Pf_CodeValueByCharCode(26,'e')),vXmDirRoot,0,0,'000','-');
    insert into ZxBg_M_XmDir values (null,new.ID,concat('f、',Pf_CodeValueByCharCode(26,'f')),vXmDirRoot,0,0,'000','-');
    insert into ZxBg_M_XmDir values (null,new.ID,concat('g、',Pf_CodeValueByCharCode(26,'g')),vXmDirRoot,0,0,'000','-');
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `ZxBg_M_XmXx_12` BEFORE DELETE ON `ZxBg_M_XmXx`
  FOR EACH ROW
BEGIN
	update Pf_M_AttachInfo set DelTag='Y' 
    where PrimaryName ='ZxBg_M_XmDir' and exists(
    	select 1 from ZxBg_M_XmDir where XmID=old.ID and ID=Pf_M_AttachInfo.PrimaryID);
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `ZxBg_M_YzZz`
--

DROP TABLE IF EXISTS `ZxBg_M_YzZz`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ZxBg_M_YzZz` (
  `ID` tinyint(3) unsigned NOT NULL AUTO_INCREMENT COMMENT '标识',
  `Mc` varchar(80) NOT NULL COMMENT '名称',
  `YzLb` char(1) DEFAULT NULL COMMENT '印章种类',
  `ZzLb` char(1) DEFAULT NULL COMMENT '证照种类',
  `Px` tinyint(3) unsigned NOT NULL COMMENT '排序',
  `SfYx` char(1) NOT NULL DEFAULT 'Y' COMMENT '是否有效',
  `SfZy` char(1) NOT NULL DEFAULT 'N' COMMENT '是否在用',
  PRIMARY KEY (`ID`),
  UNIQUE KEY `Mc` (`Mc`)
) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8 PACK_KEYS=0;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `ZxBg_M_YzZz`
--

LOCK TABLES `ZxBg_M_YzZz` WRITE;
/*!40000 ALTER TABLE `ZxBg_M_YzZz` DISABLE KEYS */;
INSERT INTO `ZxBg_M_YzZz` VALUES (1,'庆源公章','a',NULL,1,'Y','N'),(4,'庆源法人章','b',NULL,2,'Y','N'),(6,'庆源财务章','c',NULL,3,'Y','N');
/*!40000 ALTER TABLE `ZxBg_M_YzZz` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `ZxBg_M_YzZz_11` BEFORE INSERT ON `ZxBg_M_YzZz`
  FOR EACH ROW
label1:
BEGIN
	if new.YzLb is null and new.ZzLb is null then
		call ZxBg_M_YzZz_11_err1(); # <印章种类><证照种类>不能同时为空！
        leave label1;
    end if;
    
	if new.YzLb is not null and new.ZzLb is not null then
		call ZxBg_M_YzZz_11_err2(); # <印章种类><证照种类>不能同时不空！
        leave label1;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`%`*/ /*!50003 TRIGGER `ZxBg_M_YzZz_13` BEFORE UPDATE ON `ZxBg_M_YzZz`
  FOR EACH ROW
label1:
BEGIN
	if new.YzLb is null and new.ZzLb is null then
		call ZxBg_M_YzZz_13_err1(); # <印章种类><证照种类>不能同时为空！
        leave label1;
    end if;
    
	if new.YzLb is not null and new.ZzLb is not null then
		call ZxBg_M_YzZz_13_err2(); # <印章种类><证照种类>不能同时不空！
        leave label1;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Temporary table structure for view `v_GsLt_A_Tp`
--

DROP TABLE IF EXISTS `v_GsLt_A_Tp`;
/*!50001 DROP VIEW IF EXISTS `v_GsLt_A_Tp`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
/*!50001 CREATE TABLE `v_GsLt_A_Tp` (
  `BizID` tinyint NOT NULL,
  `TpRyUsrID` tinyint NOT NULL,
  `TpXzMc` tinyint NOT NULL
) ENGINE=MyISAM */;
SET character_set_client = @saved_cs_client;

--
-- Temporary table structure for view `v_ZxBg_A_FkSp`
--

DROP TABLE IF EXISTS `v_ZxBg_A_FkSp`;
/*!50001 DROP VIEW IF EXISTS `v_ZxBg_A_FkSp`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
/*!50001 CREATE TABLE `v_ZxBg_A_FkSp` (
  `ID` tinyint NOT NULL,
  `XmMc` tinyint NOT NULL,
  `XmBh` tinyint NOT NULL,
  `HtMc` tinyint NOT NULL,
  `DjCnt` tinyint NOT NULL,
  `SkrMc` tinyint NOT NULL,
  `Khh` tinyint NOT NULL,
  `AcctNo` tinyint NOT NULL,
  `FkAmt` tinyint NOT NULL,
  `ZfFs` tinyint NOT NULL,
  `FkSy` tinyint NOT NULL,
  `HtQdRq` tinyint NOT NULL,
  `ZjDwRq` tinyint NOT NULL,
  `SqLxSj` tinyint NOT NULL,
  `XmJj` tinyint NOT NULL,
  `XmJe` tinyint NOT NULL,
  `QqFyYn` tinyint NOT NULL,
  `JzDcXzCyIDs` tinyint NOT NULL,
  `XmScJgMs` tinyint NOT NULL,
  `JchSqSj` tinyint NOT NULL,
  `JchZkSj` tinyint NOT NULL,
  `ChTpCnt` tinyint NOT NULL,
  `PassCnt` tinyint NOT NULL,
  `RejectCnt` tinyint NOT NULL,
  `DiscardCnt` tinyint NOT NULL,
  `SsYj` tinyint NOT NULL,
  `InitOrgName` tinyint NOT NULL
) ENGINE=MyISAM */;
SET character_set_client = @saved_cs_client;

--
-- Dumping routines for database 'coaqy'
--
/*!50003 DROP FUNCTION IF EXISTS `BxSq_CyUsrIDs` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `BxSq_CyUsrIDs`(
        `pID` INTEGER(19) UNSIGNED
    ) RETURNS varchar(100) CHARSET utf8
BEGIN
  DECLARE rst VARCHAR(100);
  select (GROUP_CONCAT(CyUsrID separator ',')) into rst  from JkBx_A_BxZsCy where BxZsID=pID;
  RETURN rst;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `BxSq_CyUsrNames` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `BxSq_CyUsrNames`(
        `pID` INTEGER(19) UNSIGNED
    ) RETURNS varchar(500) CHARSET utf8
BEGIN
  DECLARE rst VARCHAR(500);
  SELECT  Pf_UsrNamesOfUsrIDs(GROUP_CONCAT(CyUsrID))into rst  from JkBx_A_BxZsCy where BxZsID=pID;
  RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `BxSq_JtFBz` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `BxSq_JtFBz`(
        `pSqrJb` TINYINT(3) UNSIGNED
    ) RETURNS tinyint(6)
    COMMENT '根据申请人级别查询报销申请申报人的交通费报销标准'
BEGIN
	DECLARE rst TINYINT unsigned;
    
    SELECT ifnull(min(ZgBz),0) into rst from `JkBx_M_BxBzJt` where pSqrJb between JbFrom and JbTo;
	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `BxSq_QtXcdMs` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `BxSq_QtXcdMs`(
        `pBxQtID` INTEGER(12) UNSIGNED
    ) RETURNS varchar(2000) CHARSET utf8
    COMMENT '取其它费行程详情'
BEGIN
	declare rst varchar(2000);
    
    select coalesce(group_concat(
    	case when NbCyIDs is not null then concat('公司人员：<',Pf_UsrNamesOfUsrIDs(NbCyIDs),'>，') else '' end,
        case when WbCys is not null then concat('外部人员：<',ifnull(WbCys,'-'),'>，') else '' end,
    	DATE_FORMAT(CfSj,'%Y-%m-%d %H:%i'),'~',DATE_FORMAT(DdSj,'%Y-%m-%d %H:%i'),'，',CfDd,'~',DdDd,
        case when Bz is not null then concat('，',Bz) else '' end 
        order by CfSj Separator '；<br>'),'-') 
    into rst
    from JkBx_A_BxQtXcd
    where BxQtID=pBxQtID;
    
    RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `BxSq_SfCb` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `BxSq_SfCb`(
        `pBxID` INTEGER(19) UNSIGNED
    ) RETURNS char(2) CHARSET utf8
    COMMENT '根据当前报销ID判断报销项是否超标'
BEGIN
	DECLARE rst CHAR(2);
    DECLARE vCnt INT;
   	
    SELECT COUNT(*) INTO vCnt from dual
	WHERE EXISTS(SELECT * from JkBx_A_BxJt where BxID=pBxID and  JtFs<ZgBz and JtfLb = '1')
		or
		EXISTS(SELECT * from JkBx_A_BxTx where BxID=pBxID and HfAmt>BzAmt and BzAmt!=0)
        or
		EXISTS(SELECT * from JkBx_A_BxZd where BxID=pBxID and HfAmt/CyRs>BzAmt and BzAmt!=0)
        OR
		EXISTS(select * from JkBx_A_BxZs where BxID=pBxID and Fj/Rc>BzAmt and BzAmt!=0);
	
    if vCnt!=0 then
		set rst = 'Y';
    else
		set rst = 'N';
    END IF;
  	
    RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `BxSq_TxFBz` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `BxSq_TxFBz`(
        `pSqrJb` TINYINT(6) UNSIGNED
    ) RETURNS decimal(7,2) unsigned
    COMMENT '根据申请人级别查询报销申请申报人的通讯费报销标准'
BEGIN
	DECLARE rst DECIMAL(7,2);
    
    SELECT ZgBzAmt into rst from `JkBx_M_BxBzTx` where pSqrJb >= JbFrom and pSqrJb<=JbTo;
	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `BxSq_ZdFBz` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `BxSq_ZdFBz`(
        `pSqrJb` TINYINT(3) UNSIGNED
    ) RETURNS decimal(7,2) unsigned
    COMMENT '根据申请人级别查询报销申请申报人的招待费报销标准'
BEGIN
	DECLARE rst TINYINT unsigned;
    
    SELECT ZgBzAmt into rst from `JkBx_M_BzBzZd` where pSqrJb between JbFrom and JbTo;
	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `BxSq_ZsFBz` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `BxSq_ZsFBz`(
        `pSqrJb` TINYINT(3) UNSIGNED,
        `pZsdJb` TINYINT(3) UNSIGNED
    ) RETURNS decimal(7,2) unsigned
    COMMENT '根据申请人级别和住宿地级别查询报销申请申报人的住宿费报销标准'
BEGIN
	DECLARE rst DECIMAL(7,2);
    
    SELECT ZgBzAmt into rst from `JkBx_M_BxBzZs` where pSqrJb between JbFrom and JbTo and ZsdJb = pZsdJb;
	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `CcSq_CcDName` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `CcSq_CcDName`(
        `pID` TINYINT(6)
    ) RETURNS varchar(40) CHARSET utf8
    COMMENT '返回出差地地名'
BEGIN
	DECLARE rst VARCHAR(40);
    
    SELECT CcD INTO rst FROM JkBx_M_CcdBzBz WHERE ID = pID;
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `CcSq_CcTs` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `CcSq_CcTs`(
        `pCcSdS` DATETIME,
        `pCcSdM` DATETIME
    ) RETURNS decimal(3,1) unsigned
    COMMENT '计算出差天数'
BEGIN
	declare DayS DECIMAL(3,1) unsigned;
 	declare DayE DECIMAL(3,1) unsigned;
 	
 	if DATE_FORMAT(pCcSdS,'%Y-%m-%d')=DATE_FORMAT(pCcSdM,'%Y-%m-%d') then
 		RETURN 1;
 	else
 		if DATE_FORMAT(pCcSdS,'%H')<'12' then 
 			set DayS=1;
 		else
 			set DayS=0.5;
 		end if;
 		
 		if DATE_FORMAT(pCcSdM,'%H')<'12' then 
 			set DayE=0.5;
 		else
 			set DayE=1;
 		end if;
 		
 		RETURN (DayS + DATEDIFF(pCcSdM,pCcSdS)-1 + DayE);
 	end if;
 END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `DaJj_XmHtBhMc` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `DaJj_XmHtBhMc`(
        `pJdLy` CHAR(1),
        `pLyYwOrXmID` INTEGER(11) UNSIGNED
    ) RETURNS varchar(150) CHARSET utf8
    COMMENT '返回交档来源项目/合同编号+名称'
BEGIN
	declare rst VARCHAR(150);
    
    if pJdLy='A' then
    	set rst='-';
    end if;
    
    if pJdLy='B' then
    	select CONCAT(HtBh,HtMc) into rst from WjHq_A_Zt where ID=pLyYwOrXmID;
    end if;
    
    if pJdLy='C' then
    	select CONCAT(HtBh,HtMc) into rst from ZxBg_A_HtSc where ID=pLyYwOrXmID;
    end if;

    if pJdLy='D' then
    	select concat(XmBh,XmMc) into rst from ZxBg_M_XmXx where ID=pLyYwOrXmID;
    end if;

  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Engine_IfSubmitWIRedrawable` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Engine_IfSubmitWIRedrawable`(
        `pSubmittedWorkItem` INTEGER UNSIGNED
    ) RETURNS char(1) CHARSET utf8
    COMMENT '判断指定已办工作项能否撤回'
BodyLable:
BEGIN
    declare vBizSeq integer unsigned;
    declare vSubmitTs datetime;
    declare vCase1Cnt,vCase1HandledCnt,vCase2HandledCnt tinyint unsigned;
    
    select BizSeq, SubmitTs into vBizSeq, vSubmitTs
	from Pf_A_BizProcRcd
	where WorkItem=pSubmittedWorkItem;
    
    select count(*) into vCase1Cnt 
	from Pf_A_BizProcRcd 
	where BizSeq=vBizSeq and ArrivedTs=vSubmitTs;
    
    if vCase1Cnt>0 then #存在因参数工作项的提交生成的处理记录
    	select count(*) into vCase1HandledCnt 
	  	from Pf_A_BizProcRcd 
	  	where BizSeq=vBizSeq and ArrivedTs=vSubmitTs and (ProcNote is not null or SubmitTs is not null);
        
        if vCase1HandledCnt>0 then
	  		#因参数工作项的提交生成的处理记录中，有已处理的
	  		return 'N';
	  	else
	  		return 'Y';
	  	end if;
        leave BodyLable;
    end if;
    
    #不存在因参数工作项的提交生成的处理记录（并发环节），那么看看有无同仁在这之后提交了处理
    select count(*) into vCase2HandledCnt
	from Pf_A_BizProcRcd
	where BizSeq=vBizSeq and SubmitTs>vSubmitTs;	
    
    if vCase2HandledCnt>0 then
		#有同仁在参数工作项提交之后也提交了他/她的处理。应理解为该同仁看了参数工作项提交的内容后作出的决定，这种情况下应认定参数工作项不能撤回
		return 'N';  	
	else
		return 'Y';
	end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `EngSub_SpecNodePsnIDs` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `EngSub_SpecNodePsnIDs`(
        `pBizSeq` INTEGER UNSIGNED,
        `pSpecNodeID` SMALLINT
    ) RETURNS varchar(200) CHARSET utf8
    COMMENT '流程引擎部件：指定环节最后一次处理处理人ID集合'
BEGIN
	declare rst varchar(200);
    
	declare vArrivedTs datetime;
	
	select max(ArrivedTs) into vArrivedTs
	from Pf_A_BizProcRcd
	where BizSeq=pBizSeq and CurrNode=pSpecNodeID;
	
    select group_concat(distinct ProcessedBy order by WorkItem) into rst
    from Pf_A_BizProcRcd
    where BizSeq=pBizSeq And CurrNode=pSpecNodeID And ArrivedTs=vArrivedTs;
	
	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `EngSub_SrcNodePsnIDs` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `EngSub_SrcNodePsnIDs`(
        `pNode1SrcWorkItems` VARCHAR(200)
    ) RETURNS varchar(200) CHARSET utf8
    SQL SECURITY INVOKER
    COMMENT '流程引擎部件：返回办理来源环节处理人ID集合'
BEGIN
	declare rst varchar(200);
	declare vCnt,i tinyint unsigned;
	declare vWI int unsigned;
	
	set vCnt=Pf_SplitStrCnt(pNode1SrcWorkItems,',');
	set i=1;
	set rst='-';
	
	LoopLable:
	Loop
		if i>vCnt then
			LEAVE LoopLable;
		else
			set vWI=convert(Pf_SplitStr(pNode1SrcWorkItems,',',i),unsigned integer);
			select CONCAT(rst,',',ProcessedBy) into rst from Pf_A_BizProcRcd where WorkItem=vWI;
			set i=i+1;
		end if;
	END LOOP LoopLable;
	
	if rst != '-' then
		set rst=trim(LEADING '-,' from rst);
	end if; 
	
	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `EngSub_WICntSrcFrom` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `EngSub_WICntSrcFrom`(
        `pSrcWI` VARCHAR(15)
    ) RETURNS tinyint(3) unsigned
    COMMENT '流程引擎部件：返回指定来源工作项下所有子孙工作项总数'
BEGIN
	declare rst tinyint unsigned;
	declare vChildWIs VARCHAR(4000);
	declare vDirectChildWIs varchar(2000);
	
	set vChildWIs='0';
	set vDirectChildWIs=pSrcWI;
	while vDirectChildWIs is not null do
		set vChildWIs=concat(vChildWIs,',',vDirectChildWIs);
		select group_concat(WorkItem) into vDirectChildWIs from Pf_A_BizProcRcd where find_in_set(SrcWorkItems,vDirectChildWIs)>0;
	end while;
	set vChildWIs=trim(LEADING concat('0,',pSrcWI,',') from vChildWIs);
	set rst=Pf_SplitStrCnt(vChildWIs,',');
	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `EngSub_WISubmitCntSrcFrom` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `EngSub_WISubmitCntSrcFrom`(
        `pSrcWI` VARCHAR(15)
    ) RETURNS tinyint(3) unsigned
    COMMENT '流程引擎部件：返回指定来源工作项下所有子孙工作项已提交总数'
BEGIN
	declare rst tinyint unsigned;
	declare vChildWIs VARCHAR(4000);
	declare vDirectChildWIs varchar(2000);
	
	set vChildWIs='0';
	set vDirectChildWIs=pSrcWI;
	while vDirectChildWIs is not null do
		set vChildWIs=concat(vChildWIs,',',vDirectChildWIs);
		select group_concat(WorkItem) into vDirectChildWIs from Pf_A_BizProcRcd where find_in_set(SrcWorkItems,vDirectChildWIs)>0;
	end while;
	set vChildWIs=trim(LEADING concat('0,',pSrcWI,',') from vChildWIs);
	
	select count(*) into rst from Pf_A_BizProcRcd where find_in_set(WorkItem,vChildWIs)>0 and coalesce(ActionID,0)!=0;
	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `GsLt_PlrXm` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `GsLt_PlrXm`(
        `pPlID` INTEGER UNSIGNED
    ) RETURNS varchar(11) CHARSET utf8
    COMMENT '返回发布公司论坛评论记录的评论人姓名'
BEGIN
	declare rst varchar(11);
    
    select concat('@',Pf_UsrcName(PlRyUsrID)) into rst from GsLt_A_Pl where ID=pPlID;
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `GsLt_SfPlGjFj` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `GsLt_SfPlGjFj`(
        `pPlID` INTEGER UNSIGNED
    ) RETURNS char(1) CHARSET utf8
    COMMENT '判断指定论坛议题评论是否挂接了说明附件'
BEGIN
	declare vCnt tinyint unsigned;
    
    select count(*) into vCnt from Pf_A_AttachInfo where PrimaryID=pPlID and PrimaryName='GsLt_A_Pl' and DelTag='N';
    
    if vCnt>0 then
  		RETURN 'Y';
    else
  		RETURN 'N';
    end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `GsSw_WhByID` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `GsSw_WhByID`(
        `pGsSwID` INTEGER UNSIGNED
    ) RETURNS varchar(40) CHARSET utf8
    COMMENT '返回收文编号'
BEGIN
	declare rst VARCHAR(40);
    
    if pGsSwID is null then
    	return '未编号';
	else
    	select GsWj_WhByYsNdBh(BhYsID,Nd,Bh) into rst from GsSw_A_Zt where ID=pGsSwID;
    	return rst;
	end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `GsWj_FzJwsID` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `GsWj_FzJwsID`(
        `pGsWjID` INTEGER UNSIGNED
    ) RETURNS varchar(40) CHARSET utf8
    COMMENT '获取参数新文废止的目标文ID集合'
BEGIN
	declare rst varchar(40);
    
	select IfNull(group_concat(ID),'') into rst
	from GsWj_A_Zt
	where NewGsWjID=pGsWjID
	order by GsWj_WhByYsNdBh(BhYsID,Nd,Bh);

	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `GsWj_FzJwSj` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `GsWj_FzJwSj`(
        `pGsWjID` INTEGER UNSIGNED
    ) RETURNS date
    COMMENT '返回参数公司文件废止旧文的时间'
BEGIN
	declare rst date;
    
    select FzSj into rst from GsWj_A_Zt where NewGsWjID=pGsWjID limit 1;
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `GsWj_FzJwsWh` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `GsWj_FzJwsWh`(
        `pGsWjID` INTEGER UNSIGNED
    ) RETURNS varchar(200) CHARSET utf8
    COMMENT '获取参数新文废止的目标文文号集合'
BEGIN
	declare rst varchar(200);
    
	select IfNull(group_concat(GsWj_WhByYsNdBh(BhYsID,Nd,Bh) separator '，'),'') into rst 
	from GsWj_A_Zt
	where NewGsWjID=pGsWjID
	order by GsWj_WhByYsNdBh(BhYsID,Nd,Bh);

	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `GsWj_FzJwXx` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `GsWj_FzJwXx`(
        `pGsWjID` INTEGER UNSIGNED
    ) RETURNS varchar(200) CHARSET utf8
    COMMENT '指定公文废止它文的废止信息'
BEGIN
	declare rst VARCHAR(200);
    
    select FzXx into rst from GsWj_A_Zt where NewGsWjID=pGsWjID limit 1;
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `GsWj_MbFileID` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `GsWj_MbFileID`(
        `pMbID` TINYINT UNSIGNED
    ) RETURNS int(10) unsigned
    COMMENT '返回指定模板的文件ID'
BEGIN
	declare rst int unsigned;
    
    select COALESCE(max(ID),0) into rst from Pf_M_AttachInfo where PrimaryID=pMbID and PrimaryName='GsWj_M_Mb';
    return rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `GsWj_WhByID` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `GsWj_WhByID`(
        `pGsWjID` INTEGER UNSIGNED
    ) RETURNS varchar(40) CHARSET utf8
    COMMENT '返回公文的文号'
BEGIN
	declare rst VARCHAR(40);
    
    if pGsWjID is null then
    	return '未编号';
	else
    	select GsWj_WhByYsNdBh(BhYsID,Nd,Bh) into rst from GsWj_A_Zt where ID=pGsWjID;
    	return rst;
	end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `GsWj_WhByYsNdBh` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `GsWj_WhByYsNdBh`(
        `pBhYsID` TINYINT UNSIGNED,
        `pNd` CHAR(4),
        `pBh` SMALLINT UNSIGNED
    ) RETURNS varchar(40) CHARSET utf8
    COMMENT '根据样式、年度、编号解析出完整的公文文号'
BEGIN
	declare rst,vYs varchar(40);
    
	if pBhYsID is null then
    	return '未编号';
    else
    	select Ys into vYs from GsWj_M_BhYs where ID=pBhYsID;
        set rst=REPLACE(REPLACE(vYs,'xxxx',pNd),'yyy',lpad(pBh,3,'0'));
        return rst;
    end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `GzHb_HbLdUsrIDs` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `GzHb_HbLdUsrIDs`(
        `pGzHbID` INTEGER UNSIGNED,
        `pZCA` CHAR(1)
    ) RETURNS varchar(200) CHARSET utf8
    COMMENT '返回指定工作汇报、指定发送类别领导ID集合'
BEGIN
	declare rst varchar(200);
    
    select group_concat(HbLdUsrID) into rst 
    from GzHb_A_HbLd
    where HbID=pGzHbID and ZsCsAs=pZCA
    order by Pf_OrgBigOrd(Pf_UsrMainOrgID(HbLdUsrID)),Pf_UsrOrdInMainOrg(HbLdUsrID);
    
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `GzHb_HbLdUsrXms` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `GzHb_HbLdUsrXms`(
        `pGzHbID` INTEGER UNSIGNED,
        `pZCA` CHAR(1)
    ) RETURNS varchar(200) CHARSET utf8
    COMMENT '返回指定工作汇报、指定发送类别领导姓名集合'
BEGIN
	declare rst varchar(200);
 
	select group_concat(Pf_UsrcName(HbLdUsrID) Separator '，') into rst 
	from GzHb_A_HbLd
	where HbID=pGzHbID and ZsCsAs=pZCA
	order by Pf_OrgBigOrd(Pf_UsrMainOrgID(HbLdUsrID)),Pf_UsrOrdInMainOrg(HbLdUsrID);
 
	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `GzHb_HbLdXmYdSjs` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `GzHb_HbLdXmYdSjs`(
        `pGzHbID` INTEGER UNSIGNED,
        `pZCA` CHAR(1)
    ) RETURNS varchar(1000) CHARSET utf8
    COMMENT '返回指定工作汇报、指定发送类别（领导姓名+阅读时间）集合'
BEGIN
	declare rst varchar(1000);
 
	select group_concat(concat(Pf_UsrcName(HbLdUsrID),'[',COALESCE(DATE_FORMAT(LdYdSj,'%Y-%m-%d %H:%i'),'未读'),']') Separator '，') into rst 
	from GzHb_A_HbLd
	where HbID=pGzHbID and ZsCsAs=pZCA
	order by Pf_OrgBigOrd(Pf_UsrMainOrgID(HbLdUsrID)),Pf_UsrOrdInMainOrg(HbLdUsrID);
 
	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `GzHb_Yjh` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `GzHb_Yjh`(
        `pGzHbID` INTEGER UNSIGNED
    ) RETURNS varchar(2000) CHARSET utf8
    COMMENT '返回上一阶段目标（原计划）'
BEGIN
	declare rst varchar(2000);
 	declare vInitUsrID smallint unsigned;
 	declare vZqGzHbID int unsigned; # 之前工作汇报
 	
 	select InitUsrID into vInitUsrID from GzHb_A_Zt where ID=pGzHbID;
 	
 	set rst='-';
 	select coalesce(max(ID),0) into vZqGzHbID from GzHb_A_Zt where InitUsrID=vInitUsrID and ID<pGzHbID;
 	if vZqGzHbID!=0 then
 		select XyJdMb into rst from GzHb_A_Zt where ID=vZqGzHbID;
 	End If;
 	
 	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `GzHb_YnCkQx` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `GzHb_YnCkQx`(
        `pUsrID` SMALLINT(5) UNSIGNED,
        `pGzHbID` INTEGER UNSIGNED
    ) RETURNS char(1) CHARSET utf8
    COMMENT '返回指定用户对指定汇报是否有查看权限'
BEGIN
	declare rst char(1);
    declare vCnt tinyint unsigned;
    
    set rst='N';
    select count(*) into vCnt from dual
    where exists(select 1 from GzHb_A_Zt where ID=pGzHbID and (InitUsrID=pUsrID or Pf_IfUsrUnderAdmin(InitUsrID,pUsrID)='Y')) or 
    	exists(select 1 from GzHb_A_HbLd where HbID=pGzHbID and HbLdUsrID=pUsrID);
	
    if vCnt>0 then 
    	set rst='Y';
    end if;
    RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `GzHb_YnYdBz` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `GzHb_YnYdBz`(
        `pHbID` INTEGER UNSIGNED,
        `pUsrID` SMALLINT(5) UNSIGNED
    ) RETURNS char(1) CHARSET utf8
    COMMENT '返回当前用户是否阅读过指定汇报'
BEGIN
    declare vCnt tinyint unsigned;
	
    select count(*) into vCnt from GzHb_A_HbLd where HbID=pHbID and HbLdUsrID=pUsrID and LdYdSj is not null;
    if vCnt!=0 then
      return 'Y';
    else
      return 'N';
    end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `HyGl_CdName` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `HyGl_CdName`(
        `pCdID` TINYINT(6) UNSIGNED
    ) RETURNS varchar(40) CHARSET utf8
    COMMENT '获取会议场地名称'
BEGIN
	DECLARE rst VARCHAR(40);
    
    SELECT Mc into rst from Hy_M_Cd where ID = pCdID;
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `HyGl_TimeSectionCollision` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `HyGl_TimeSectionCollision`(
        `pZkSj` VARCHAR(20),
        `pBmSj` VARCHAR(20),
        `pZkSjFind` VARCHAR(20),
        `pBmSjFind` VARCHAR(20)
    ) RETURNS varchar(2) CHARSET utf8
    COMMENT '判断会议冲突'
BEGIN
	DECLARE rst VARCHAR(2);
    DECLARE vCnt int;
    
    SELECT COUNT(*) into vCnt from Hy_A_Zt 
    where pZkSjFind BETWEEN pZkSj and pBmSj or pBmSjFind BETWEEN pZkSj and pBmSj or 
    	pZkSj BETWEEN pZkSjFind and pBmSjFind or pBmSj BETWEEN pZkSjFind and pBmSjFind;
 	if vCnt>0 then
    	set rst='Y';
    else
    	set rst='N';
    end if;
	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `JkBx_JobLevelName` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `JkBx_JobLevelName`(
        `pOrdNum` TINYINT(3) UNSIGNED
    ) RETURNS varchar(500) CHARSET utf8
    COMMENT '获取同级别岗位级别名集合，用于报销标准维护'
BEGIN
  	DECLARE rst VARCHAR(500);
  
  	SELECT group_concat(name order by CONVERT(name USING GBK) separator '，') into rst from `Pf_M_EntAppCode` 
    WHERE AppType = 3 and ordnum=pOrdNum  
    group BY OrdNum  ;
  	
    RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_Abbre` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_Abbre`(
        `pOriginStr` VARCHAR(2000),
        `pShowLength` TINYINT UNSIGNED
    ) RETURNS varchar(100) CHARSET utf8
    COMMENT '返回指定字符串指定长度子串，字符串原长超过指定长度，返回指定长度-3、末尾拼接''...'''
BEGIN
	declare rst VARCHAR(100);
   
	if CHAR_LENGTH(pOriginStr)>pShowLength then
  		set rst=concat(substr(pOriginStr,1,pShowLength-3),'...'); 
  	else
  		set rst=pOriginStr;
  	end if;
   
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_AppAttachReadHis` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_AppAttachReadHis`(
        `pFileSeq` INTEGER UNSIGNED
    ) RETURNS varchar(2000) CHARSET utf8
    COMMENT '返回指定应用文件附件阅读痕迹，长度不超过1970'
BEGIN
	declare rst varchar(2000);
	
	declare vReadHisRcd varchar(30);
	declare done INT DEFAULT FALSE;
	
	declare cur1 CURSOR for 
	Select concat(Pf_UsrcName(UsrID),'，',DATE_FORMAT(ReadTs,'%Y-%m-%d %H:%i'))
	From Pf_A_AttachReadHis
	where AttachSeq=pFileSeq
	order by Pf_OrgBigOrd(Pf_UsrMainOrgID(UsrID)),Pf_UsrOrdInMainOrg(UsrID);
	
	declare CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;
	
	set rst='无';
	
	open cur1;
	read_loop:
	LOOP
		fetch cur1 into vReadHisRcd;
		IF done or char_length(rst)>1970 THEN
			LEAVE read_loop;
		END IF;
		set rst=CONCAT(rst,char(13),char(10),vReadHisRcd);
	END LOOP;
	close cur1;
	
	if rst != '无' then
		set rst=trim(LEADING CONCAT('无',char(13),char(10)) from rst);
	else
		set rst='没人看过！';
	end if; 
	
	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_AttachFileExt` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_AttachFileExt`(
        `pMA` CHAR(1),
        `pAttachFileIDOrSeq` INTEGER UNSIGNED
    ) RETURNS varchar(5) CHARSET utf8
    COMMENT '返回附件文件扩展名'
BEGIN
	declare rst varchar(5);
	
	if pMA='M' then
		select IfNull(FileExt,'') into rst from Pf_M_AttachInfo where ID=pAttachFileIDOrSeq;
	else
		select IfNull(FileExt,'') into rst from Pf_A_AttachInfo where Seq=pAttachFileIDOrSeq;
	end if;
	
	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_AttachOwnerID` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_AttachOwnerID`(
        `pMA` CHAR(1),
        `pAttachIDSeq` INTEGER(12) UNSIGNED
    ) RETURNS smallint(5) unsigned
    COMMENT '获取指定附件属主'
BEGIN
	declare rst smallint unsigned;
    
    if pMA='M' then
    	select case when UpdatedBy is null then CreatedBy else UpdatedBy end into rst 
        from Pf_M_AttachInfo where ID=pAttachIDSeq;
    else
    	select case when UpdatedBy is null then CreatedBy else UpdatedBy end into rst 
        from Pf_A_AttachInfo where Seq=pAttachIDSeq;
    end if;
    
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_BizCodeByBizFlowID` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_BizCodeByBizFlowID`(
        `pBizFlowID` TINYINT UNSIGNED
    ) RETURNS tinyint(3) unsigned
    COMMENT '根据流程ID返回业务码'
BEGIN
	declare rst tinyint unsigned;
 
	select BizCode into rst from Pf_M_BizFlow where ID=pBizFlowID;
	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_BizCodeByBizNodeID` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_BizCodeByBizNodeID`(
        `pBizNodeID` SMALLINT
    ) RETURNS tinyint(3) unsigned
    COMMENT '根据环节ID返回业务码'
BEGIN
	declare rst tinyint unsigned;
 
	select BizCode into rst from Pf_M_BizNode where ID=pBizNodeID;
	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_BizCodeByBizSeq` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_BizCodeByBizSeq`(
        `pBizSeq` INTEGER UNSIGNED
    ) RETURNS tinyint(3) unsigned
    COMMENT '根据业务抽象流水返回业务码'
BEGIN
	declare rst tinyint unsigned;
 
 	select BizCode into rst from Pf_A_Biz where Seq=pBizSeq;
 	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_BizCodeByFuncID` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_BizCodeByFuncID`(
        `pFuncID` SMALLINT UNSIGNED
    ) RETURNS tinyint(3) unsigned
    COMMENT '根据功能ID返回业务码'
BEGIN
	declare rst tinyint unsigned;
 
 	select Code into rst from Pf_M_Biz where FuncID=pFuncID;
 	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_BizFlowBranchName` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_BizFlowBranchName`(
        `pBranchID` SMALLINT UNSIGNED
    ) RETURNS varchar(40) CHARSET utf8
    COMMENT '根据流程分支ID返回分支名'
BEGIN
	declare rst varchar(40);
	
	if pBranchID is null THEN
		set rst='无动作';
	else
		select Name into rst from Pf_M_BizFlowBranch where ID=pBranchID;
	end if;
	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_BizFlowName` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_BizFlowName`(
        `pBizFlowID` TINYINT UNSIGNED
    ) RETURNS varchar(40) CHARSET utf8
    COMMENT '根据流程ID返回流程名'
BEGIN
	declare rst varchar(40);
 
	select Name into rst from Pf_M_BizFlow where ID=pBizFlowID;
	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_BizIDOfBizSeq` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_BizIDOfBizSeq`(
        `pBizSeq` INTEGER UNSIGNED
    ) RETURNS int(10) unsigned
    COMMENT '根据抽象业务流水获取具体业务ID'
BEGIN
	declare rst int unsigned;
	
    select BizID into rst from Pf_A_Biz where Seq=pBizSeq;
    RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_BizName` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_BizName`(
        `pBizCode` TINYINT UNSIGNED
    ) RETURNS varchar(10) CHARSET utf8
    COMMENT '根据业务码返回业务名'
BEGIN
	declare rst varchar(10);
 
 	select Name into rst from Pf_M_Biz where Code=pBizCode;
 	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_BizNodeAppBitByPt` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_BizNodeAppBitByPt`(
        `pNodeID` SMALLINT,
        `pAppBitPt` TINYINT UNSIGNED
    ) RETURNS char(1) CHARSET utf8
    COMMENT '取业务环节指定应用特征位'
BEGIN
	declare rst char(1);
	
	select coalesce(substr(TzApp,pAppBitPt,1),'-') into rst
	from Pf_M_BizNode
	where ID=pNodeID;
	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_BizNodeName` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_BizNodeName`(
        `pNodeID` SMALLINT
    ) RETURNS varchar(20) CHARSET utf8
    COMMENT '根据业务环节ID返回环节名'
BEGIN
 	declare rst varchar(20);
 
 	if pNodeID is null then
 		set rst='';
 	else
 		select Name into rst from Pf_M_BizNode where ID=pNodeID;
 	end if;
 	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_BizNodeOrd` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_BizNodeOrd`(
        `pNodeID` SMALLINT
    ) RETURNS tinyint(3) unsigned
    COMMENT '取业务处理环节顺序定义值'
BEGIN
   	declare rst tinyint unsigned;
	   
	select DisplayOrd into rst from Pf_M_BizNode Where ID=pNodeID;
   	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_BizNodeProcPsnsName` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_BizNodeProcPsnsName`(
        `pBizSeq` INTEGER UNSIGNED,
        `pBizNodeName` VARCHAR(20)
    ) RETURNS varchar(40) CHARSET utf8
    COMMENT '返回指定业务实例、指定节点名处理人姓名集合'
BEGIN
	declare rst varchar(40);
    
	select ifnull(group_concat(PsncName order by Pf_OrgBigOrd(Pf_UsrMainOrgID(ProcessedBy)),Pf_UsrOrdInMainOrg(ProcessedBy) separator '，'),'-') 
    into rst
	from (
    	select distinct ProcessedBy,Pf_UsrcName(ProcessedBy) PsncName 
        from Pf_A_BizProcRcd 
        where BizSeq=pBizSeq and Pf_BizNodeName(CurrNode)=pBizNodeName) t;

	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_BizNodeSysBitByPt` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_BizNodeSysBitByPt`(
        `pNodeID` SMALLINT,
        `pSysBitPt` TINYINT UNSIGNED
    ) RETURNS char(1) CHARSET utf8
    COMMENT '取业务环节指定系统特征位'
BEGIN
	declare rst char(1);
   
  	select coalesce(substr(TzSys,pSysBitPt,1),'-') into rst
  	from Pf_M_BizNode
  	where ID=pNodeID;
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_BizProcUsrNameWithGrant` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_BizProcUsrNameWithGrant`(
        `pProcessedBy` SMALLINT UNSIGNED,
        `pGrantedBy` SMALLINT UNSIGNED
    ) RETURNS varchar(20) CHARSET utf8
    COMMENT '如果是代处理人括弧显示授权人'
BEGIN
	declare rst varchar(20);
 
	if pGrantedBy > 0 then
		set rst=CONCAT(Pf_UsrcName(pProcessedBy),'（代：',Pf_UsrcName(pGrantedBy),'）');
	else
		set rst=Pf_UsrcName(pProcessedBy);
	end if;
	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_BizTitle` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_BizTitle`(
        `pBizSeq` INTEGER UNSIGNED
    ) RETURNS varchar(100) CHARSET utf8
    COMMENT '根据抽象业务流水获取业务标题'
BEGIN
	declare rst varchar(100);
 
	select BizTitle into rst from Pf_A_Biz where Seq=pBizSeq;
	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_BizViewUrl` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_BizViewUrl`(
        `pBizCode` TINYINT UNSIGNED
    ) RETURNS varchar(100) CHARSET utf8
    COMMENT '返回指定业务表单阅读页URL'
BEGIN
	declare rst varchar(100);
 
	select ViewUrl into rst from Pf_M_Biz where Code=pBizCode;
	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_CharCodeOrdNum` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_CharCodeOrdNum`(
        `pCodeType` TINYINT(3) UNSIGNED,
        `pCode` CHAR(1)
    ) RETURNS tinyint(3) unsigned
    COMMENT '返回字符编码显示顺序'
BEGIN
	declare rst tinyint unsigned;
  	
    select OrdNum into rst from Pf_M_CharCode where CodeType=pCodeType and Code=pCode;
    RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_CodeValueByCharCode` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_CodeValueByCharCode`(
        `pCodeType` TINYINT(3) UNSIGNED,
        `pCode` CHAR(1)
    ) RETURNS varchar(40) CHARSET utf8
    COMMENT '返回字符编码编码名'
BEGIN
	declare rst varchar(40);
     
	if pCode is not null then
		select value into rst from Pf_M_CharCode where CodeType=pCodeType and Code=pCode;
	else
		set rst='-';
	end if;
   
	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_CodeValueByIntCode` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_CodeValueByIntCode`(
        `pCodeType` TINYINT(3) UNSIGNED,
        `pCode` TINYINT(3) UNSIGNED
    ) RETURNS varchar(40) CHARSET utf8
    COMMENT '返回整型编码编码名'
BEGIN
	declare rst varchar(40);
 
	if pCode is not null then
		select value into rst from Pf_M_IntCode where CodeType=pCodeType and Code=pCode;
	else
		set rst='-';
	end if;
 
	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_CodeValuesByCharCodes` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_CodeValuesByCharCodes`(
        `pCharCodeType` TINYINT(3) UNSIGNED,
        `pCharCodes` VARCHAR(40)
    ) RETURNS varchar(400) CHARSET utf8
    COMMENT '返回指定字符编码类字符码集合对应的编码名集合'
BEGIN
	declare rst varchar(400);
    
    if pCharCodes is null then
 		RETURN '-';
 	end if;
    
	select group_concat(Value order by OrdNum separator '，') 
	into rst
	from Pf_M_CharCode 
	where CodeType=pCharCodeType and instr(Value,'X')=0 and FIND_IN_SET(Code,pCharCodes)>0;
 
	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_CodeValuesByIntCodes` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_CodeValuesByIntCodes`(
        `pIntCodeType` TINYINT(3) UNSIGNED,
        `pIntCodes` VARCHAR(40)
    ) RETURNS varchar(400) CHARSET utf8
    COMMENT '返回指定整型编码类整型码集合对应的编码名集合'
BEGIN
	declare rst varchar(400);
    
    if pIntCodes is null then
 		RETURN '-';
 	end if;
    
	select group_concat(Value order by OrdNum separator '，') 
	into rst
	from Pf_M_IntCode 
	where CodeType=pIntCodeType and instr(Value,'X')=0 and FIND_IN_SET(Code,pIntCodes)>0;
 
	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_DateOfCN` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_DateOfCN`(
        `pDate` DATE
    ) RETURNS varchar(20) CHARSET utf8
    COMMENT '英文日期转化成中文日期'
BEGIN
	declare rst varchar(20);
    declare tmp varchar(10);
    declare p tinyint unsigned;
    declare pChar char(1);
    declare sYear char(4);
    declare sMonth char(2);
    declare sDay char(2);
    
	set sYear=DATE_FORMAT(pDate,'%Y');
    set sMonth=DATE_FORMAT(pDate,'%m');
    set sDay=DATE_FORMAT(pDate,'%d');
    
    set p=1;
    while p<=4 do
    	set pChar=substr(sYear,p,1);
    	select case when pChar='0' then '○'
        			when pChar='1' then '一'
                    when pChar='2' then '二'
                    when pChar='3' then '三'
                    when pChar='4' then '四'
                    when pChar='5' then '五'
                    when pChar='6' then '六'
                    when pChar='7' then '七'
                    when pChar='8' then '八'
                    when pChar='9' then '九' end into tmp from dual;
        if p=1 then
        	set rst=tmp;
        else
        	set rst=CONCAT(rst,tmp);
        end if;
        set p=p+1;
    end while;
    set rst=CONCAT(rst,'年');
    
    select CONCAT(rst,case 
    	when sMonth='01' then '一'
        when sMonth='02' then '二'
        when sMonth='03' then '三'
        when sMonth='04' then '四'
        when sMonth='05' then '五'
        when sMonth='06' then '六'
        when sMonth='07' then '七'
        when sMonth='08' then '八'
        when sMonth='09' then '九'
        when sMonth='10' then '十'
        when sMonth='11' then '十一'
        when sMonth='12' then '十二' end,'月') into rst from dual;
    
    select CONCAT(rst,case 
    	when sDay='01' then '一'
        when sDay='02' then '二'
        when sDay='03' then '三'
        when sDay='04' then '四'
        when sDay='05' then '五'
        when sDay='06' then '六'
        when sDay='07' then '七'
        when sDay='08' then '八'
        when sDay='09' then '九'
        when sDay='10' then '十'
        when sDay='11' then '十一'
        when sDay='12' then '十二'
        when sDay='13' then '十三'
        when sDay='14' then '十四'
        when sDay='15' then '十五'
        when sDay='16' then '十六'
        when sDay='17' then '十七'
        when sDay='18' then '十八'
        when sDay='19' then '十九'
        when sDay='20' then '二十'
        when sDay='21' then '二十一'
        when sDay='22' then '二十二'
        when sDay='23' then '二十三'
        when sDay='24' then '二十四'
        when sDay='25' then '二十五'
        when sDay='26' then '二十六'
        when sDay='27' then '二十七'
        when sDay='28' then '二十八'
        when sDay='29' then '二十九'
        when sDay='30' then '三十'
        when sDay='31' then '三十一' end,'日') into rst from dual;

    return rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_DirectLeader` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_DirectLeader`(
        `pUsrID` SMALLINT(5) UNSIGNED
    ) RETURNS smallint(5) unsigned
    COMMENT '返回参数人员的直属上司UsrID'
BEGIN
	declare rst smallint(5) unsigned;
    
    select LeaderID into rst from Pf_M_MyDirectLeader where MyUsrID=pUsrID;
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_DutyPsnIDsOfOrg` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_DutyPsnIDsOfOrg`(
        `pOrgID` SMALLINT UNSIGNED
    ) RETURNS varchar(40) CHARSET utf8
    COMMENT '返回指定部门分管领导用户ID集合（8人左右）'
BEGIN
	declare rst varchar(40);
	
	select IfNull(group_concat(UsrID order by Pf_OrgBigOrd(Pf_UsrMainOrgID(UsrID)),Pf_UsrOrdInMainOrg(UsrID)),'') into rst
	from (select distinct UsrID
    	from Pf_M_DeptDutyPsn
		where Pf_IfOrg1UnderOrg2(pOrgID,OrgID)='Y') t;
	
	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_DutyPsnNamesOfOrg` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_DutyPsnNamesOfOrg`(
        `pOrgID` SMALLINT UNSIGNED
    ) RETURNS varchar(40) CHARSET utf8
    COMMENT '返回指定部门分管领导用户姓名集合（8人左右）'
BEGIN
	declare rst varchar(40);
	
	select IfNull(group_concat(Pf_UsrcName(UsrID) order by Pf_OrgBigOrd(Pf_UsrMainOrgID(UsrID)),Pf_UsrOrdInMainOrg(UsrID) separator '，'),'') into rst
	from (select distinct UsrID
	    from Pf_M_DeptDutyPsn
		where Pf_IfOrg1UnderOrg2(pOrgID,OrgID)='Y') t;

	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_EntAppCodeOrd` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_EntAppCodeOrd`(
        `pID` SMALLINT UNSIGNED
    ) RETURNS tinyint(3) unsigned
    COMMENT '获取应用编码排序'
BEGIN
	declare rst tinyint;
    
    select OrdNum into rst from Pf_M_EntAppCode where ID=pID;
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_EntAppCodeVal` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_EntAppCodeVal`(
        `pID` SMALLINT UNSIGNED
    ) RETURNS varchar(40) CHARSET utf8
    COMMENT '获取企业应用编码值'
BEGIN
	declare rst varchar(40);
    
    if pID is null or pID=0 then
    	set rst='-';
    else
    	select Name into rst from Pf_M_EntAppCode where ID=pID;
    end if;
  	
    RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_FullTextOfBizProcNote` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_FullTextOfBizProcNote`(
        `pBizName` VARCHAR(10),
        `pBizID` INTEGER UNSIGNED
    ) RETURNS mediumtext CHARSET utf8
    COMMENT '组装指定业务处理意见全文索引目标内容'
BEGIN
	declare rst mediumtext;
    
    select group_concat(concat_ws(' ',pBizName,Pf_BizNodeName(p.CurrNode),p.ProcNote,Pf_UsrcName(p.ProcessedBy)) order by p.WorkItem Separator '；') into rst
    from Pf_A_BizProcRcd p,Pf_A_Biz b 
    where Pf_BizName(b.BizCode)=pBizName and b.BizID=pBizID and b.Seq=p.BizSeq and p.ProcNote is not null and p.ProcNote<>'无';

  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_FuncIDSetOfRole` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_FuncIDSetOfRole`(
        `pRoleID` TINYINT UNSIGNED
    ) RETURNS varchar(500) CHARSET utf8
    COMMENT '返回指定角色及父角色拥有功能ID集合'
BEGIN
	declare rst VARCHAR(500);
	
    select IfNull(group_concat(FuncID order by Pf_ModuleOrdOfFunc(FuncID),Pf_FuncOrd(FuncID)),'') into rst 
    from Pf_M_RoleFunc 
    where Pf_IfRole1UnderRole2(pRoleID,RoleID)='Y';
  	
    RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_FuncIDSetOfRoleD` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_FuncIDSetOfRoleD`(
        `pRoleID` TINYINT UNSIGNED
    ) RETURNS varchar(500) CHARSET utf8
    COMMENT '返回指定角色直接拥有功能ID集合'
BEGIN
	declare rst VARCHAR(500);
	
    select IfNull(group_concat(FuncID order by Pf_ModuleOrdOfFunc(FuncID),Pf_FuncOrd(FuncID)),'') into rst 
    from Pf_M_RoleFunc 
    where RoleID=pRoleID;
  	
    RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_FuncName` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_FuncName`(
        `pFuncID` SMALLINT UNSIGNED
    ) RETURNS varchar(20) CHARSET utf8
    COMMENT '根据功能ID取功能名'
BEGIN
	declare rst varchar(20);
    
    if pFuncID!=0 then
    	select Name into rst from Pf_M_Func where ID=pFuncID;
    else
    	set rst='根模块';
    end if;
    
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_FuncNameOfBiz` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_FuncNameOfBiz`(
        `pBizCode` TINYINT UNSIGNED
    ) RETURNS varchar(20) CHARSET utf8
    COMMENT '返回指定业务对应功能名'
BEGIN
	declare rst varchar(20);
  	
    select Pf_FuncName(FuncID) into rst from Pf_M_Biz where Code=pBizCode;
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_FuncNameSetOfRole` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_FuncNameSetOfRole`(
        `pRoleID` TINYINT UNSIGNED
    ) RETURNS varchar(2000) CHARSET utf8
    COMMENT '返回指定角色及父角色拥有功能名集合'
BEGIN
	declare rst VARCHAR(2000);
	
    select IfNull(group_concat(Pf_FuncName(FuncID) order by Pf_ModuleOrdOfFunc(FuncID),Pf_FuncOrd(FuncID) separator '，'),'') into rst
    from Pf_M_RoleFunc 
    where Pf_IfRole1UnderRole2(pRoleID,RoleID)='Y';
  	  
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_FuncNameSetOfRoleD` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_FuncNameSetOfRoleD`(
        `pRoleID` TINYINT UNSIGNED
    ) RETURNS varchar(2000) CHARSET utf8
    COMMENT '返回指定角色直接拥有功能名集合'
BEGIN
	declare rst VARCHAR(2000);
	
    select IfNull(group_concat(Pf_FuncName(FuncID) order by Pf_ModuleOrdOfFunc(FuncID),Pf_FuncOrd(FuncID) separator '，'),'') into rst
    from Pf_M_RoleFunc 
    where RoleID=pRoleID;
  	  
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_FuncOrd` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_FuncOrd`(
        `pFuncID` SMALLINT UNSIGNED
    ) RETURNS tinyint(3) unsigned
    COMMENT '返回指定功能显示排序'
BEGIN
	declare rst tinyint unsigned;
    
    select DisplayOrd into rst from Pf_M_Func where ID=pFuncID;
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_FuncOrdOfBiz` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_FuncOrdOfBiz`(
        `pBizCode` TINYINT UNSIGNED
    ) RETURNS tinyint(3) unsigned
    COMMENT '返回指定业务对应功能显示排序'
BEGIN
	declare rst tinyint unsigned;
    
    select Pf_FuncOrd(FuncID) into rst from Pf_M_Biz where Code=pBizCode;
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_IfAppAttachReaded` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_IfAppAttachReaded`(
        `pFileSeq` INTEGER UNSIGNED,
        `pUsrID` SMALLINT UNSIGNED
    ) RETURNS char(1) CHARSET utf8
    COMMENT '判断用户是否阅读过指定应用文件附件'
BEGIN
	declare vCnt tinyint unsigned;
    
   	select count(*) into vCnt from Pf_A_AttachReadHis where AttachSeq=pFileSeq and UsrID=pUsrID;
    
	if vCnt=1 then 
		return 'Y'; 
	else 
		return 'N'; 
	End If;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_IfAppMainHasAttach` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_IfAppMainHasAttach`(
        `pPrimaryName` VARCHAR(30),
        `pPrimaryID` INTEGER(11) UNSIGNED
    ) RETURNS char(1) CHARSET utf8
    COMMENT '判断指定应用主体是否带附件'
BEGIN
	declare vCnt tinyint unsigned;
    
    select count(*) into vCnt from Pf_A_AttachInfo where PrimaryID=pPrimaryID and PrimaryName=pPrimaryName and DelTag='N';
    
    if vCnt>0 then
  		RETURN 'Y';
    else
  		RETURN 'N';
    end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_IfBizProcRcdHasAttach` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_IfBizProcRcdHasAttach`(
        `pWorkItem` INTEGER UNSIGNED
    ) RETURNS char(1) CHARSET utf8
    COMMENT '判断指定工作项有无处理意见附件'
BEGIN
	declare vCnt tinyint unsigned;
    
    select count(*) into vCnt from Pf_A_AttachInfo where PrimaryID=pWorkItem and PrimaryName='Pf_A_BizProcRcd' and DelTag='N';
    
    if vCnt>0 then
  		RETURN 'Y';
    else
  		RETURN 'N';
    end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_IfMasterAttachReaded` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_IfMasterAttachReaded`(
        `pFileID` INTEGER UNSIGNED,
        `pUsrID` SMALLINT UNSIGNED
    ) RETURNS char(1) CHARSET utf8
    COMMENT '判断用户是否阅读过指定主文件附件'
BEGIN
	declare vCnt tinyint unsigned;
    
    select count(*) into vCnt from Pf_M_AttachReadHis where AttachID=pFileID and UsrID=pUsrID;
	if vCnt=1 then 
		return 'Y'; 
	else 
		return 'N'; 
	End If;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_IfOrg1UnderOrg2` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_IfOrg1UnderOrg2`(
        `pOrg1ID` SMALLINT(5) UNSIGNED,
        `pOrg2ID` SMALLINT(5) UNSIGNED
    ) RETURNS char(1) CHARSET utf8
    COMMENT '判断机构pOrg1ID是否从属机构pOrg2ID'
BEGIN
	if instr(Pf_OrgBigOrd(pOrg1ID),Pf_OrgBigOrd(pOrg2ID))=1 then
		return 'Y';
	else
		return 'N';
	end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_IfRole1UnderRole2` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_IfRole1UnderRole2`(
        `pRole1ID` TINYINT UNSIGNED,
        `pRole2ID` TINYINT UNSIGNED
    ) RETURNS char(1) CHARSET utf8
    COMMENT '判断角色pRole1ID是否从属角色pRole2ID'
BEGIN
	if instr(Pf_RoleBigOrd(pRole1ID),Pf_RoleBigOrd(pRole2ID))=1 then
		return 'Y';
	else
		return 'N';
	end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_IfUsr1RptToUsr2` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_IfUsr1RptToUsr2`(
        `pUsr1ID` SMALLINT UNSIGNED,
        `pUsr2ID` SMALLINT UNSIGNED
    ) RETURNS tinyint(3) unsigned
    COMMENT '判断用户pUsr1ID是否有向pUsr2ID的汇报关系'
BEGIN
	declare vCnt tinyint unsigned;
 	declare vCurrLeaderID smallint unsigned;
 	
 	select count(*) into vCnt from Pf_M_MyDirectLeader where MyUsrID=pUsr1ID and LeaderID=pUsr2ID;
 	if vCnt=1 then
 		return 1; # 直接领导
 	end if;
 	
 	select coalesce(min(LeaderID),0) into vCurrLeaderID from Pf_M_MyDirectLeader where MyUsrID=pUsr1ID;
 	while vCurrLeaderID!=0 do
 		if vCurrLeaderID=pUsr2ID then
 			return 2; # 领导的领导
 		else
 			select coalesce(min(LeaderID),0) into vCurrLeaderID from Pf_M_MyDirectLeader where MyUsrID=vCurrLeaderID;
 		end if;
 	end while;
 	
 	RETURN 0; # 没有领导关系
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_IfUsrHasBizFuncEntry` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_IfUsrHasBizFuncEntry`(
        `pUsrID` SMALLINT UNSIGNED,
        `pBizName` VARCHAR(10)
    ) RETURNS char(1) CHARSET utf8
    COMMENT '判断指定用户是否拥有指定业务对应功能入口权限'
BEGIN
	declare vCnt tinyint unsigned;

	select count(*) into vCnt
	from Pf_M_Biz b,Pf_M_Func f
	where b.Name=pBizName and b.FuncID=f.ID and f.IsPublic='Y' and f.IsVisible='Y';
	if vCnt=1 then
		return 'Y';
	end if;

	select count(*) into vCnt
	from Pf_M_Biz b,Pf_M_Func f,Pf_M_RoleFunc rf,Pf_M_RoleUsr ru
	where b.Name=pBizName and b.FuncID=f.ID and f.IsVisible='Y' and f.ID=rf.FuncID and Pf_IfRole1UnderRole2(ru.RoleID,rf.RoleID)='Y' and ru.UsrID=pUsrID;
	if vCnt>=1 then
		return 'Y';
	else
		return 'N';
	end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_IfUsrHasBizViewPower` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_IfUsrHasBizViewPower`(
        `pUsrID` SMALLINT UNSIGNED,
        `pBizSeq` INTEGER UNSIGNED,
        `pInitUsrID` SMALLINT UNSIGNED
    ) RETURNS char(1) CHARSET utf8
    COMMENT '判断指定用户pUsrID是否有权查看抽象业务流水pBizSeq指定的业务主体。需要以下参数协助判断：\r\npInitUsrID 业务发起人'
BodyLabel:
BEGIN
	declare rst char(1);
 	declare vCnt tinyint unsigned;
 	declare vBizCode tinyint unsigned;
 	declare vBizID int unsigned;
 	declare vFlowStatus smallint unsigned;
 	
 	set rst='N';
 	
 	#约束：pInitUsrID必须是业务pBizSeq的发起者
 	select count(*) into vCnt from Pf_A_Biz where Seq=pBizSeq and InitUsrID=pInitUsrID;
 	if vCnt=0 then
 		return 'N';
 		leave BodyLabel;
 	end if;
 	
 	#业务pBizSeq的处理人、处理人授权人
 	select count(*) into vCnt from Pf_A_BizProcRcd where BizSeq=pBizSeq and (ProcessedBy=pUsrID or pGrantedBy=pUsrID);
 	if vCnt!=0 then
 		return 'Y';
 		leave BodyLabel;
 	end if;
 	
 	#pInitUsrID的管理员
 	set rst=Pf_IfUsrUnderAdmin(pInitUsrID,pUsrID);
 	if rst='Y' then
 		return 'Y';
 		leave BodyLabel;
 	end if;
 	
 	select BizCode,BizID,FlowStatus into vBizCode,vBizID,vFlowStatus from Pf_A_Biz where Seq=pBizSeq;
 	
    #业务发起人地域分管、业务特权角色成员；业务分发范围
 	select count(*) into vCnt from dual 
    where exists(
    	select 1 from Pf_M_Privilege p,Pf_M_RoleUsr ru,Pf_M_AreaDutyPsn ad 
 		where p.RoleID=ru.RoleID and Pf_BizCodeByFuncID(p.FuncID)=vBizCode and ru.UsrID=ad.UsrID and 
        	ad.AreaID=pf_UsrAreaID(pInitUsrID) and ad.UsrID=pUsrID) or 
        exists(select 1 from Pub_A_BizViewPw 
        where BizSeq=pBizSeq and ((OrgUsrSel='P' and OrgUsrID=pUsrID) or 
 			(OrgUsrSel='O' and Pf_IfOrg1UnderOrg2(Pf_UsrMainOrgID(pUsrID),OrgUsrID)='Y')));
 	
 	if vCnt!=0 then
 		return 'Y';
 		leave BodyLabel;
 	end if;
 	
    # >>>具体业务
    
 	#【信息发布】【公司文件】
 	if vBizCode in (11,12) and Pf_BizNodeSysBitByPt(vFlowStatus,1)='E' then 
 		if vBizCode=11 then
 			select count(*) into vCnt 
 			from XxFb_A_Zt 
 			where ID=vBizID and YwZt='P' and GkLb!='N';
 			
 			if vCnt!=0 then
 				return 'Y';
 				leave BodyLabel;
 			end if;
 		end if;
 		
 		if vBizCode=12 then
 			select count(*) into vCnt 
 			from GsWj_A_Zt 
 			where ID=vBizID and YwZt='P' and SfGg='Y';
 			
 			if vCnt!=0 then
 				return 'Y';
 				leave BodyLabel;
 			end if;
 		end if;
 	end if;
 	
 	if vBizCode=16 then #会议管理审批业务
 		select count(*) into vCnt from HyGl_A_Zt where ID=vBizID and FIND_IN_SET(pUsrID,NbChRyUsrIDs)>0;
 		if vCnt!=0 then 
 			return 'Y';
 			leave BodyLabel;
 		end if;
 	end if;
 	
 	if vBizCode=6 then
 		select count(*) into vCnt 
 		from GsLt_A_Zt 
 		where ID=vBizID and CyFwLb!='N';
 			
 		if vCnt!=0 then
 			return 'Y';
 			leave BodyLabel;
 		end if;
 	end if;

 	#关联业务
 	
 	return rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_IfUsrHasFuncEntry` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_IfUsrHasFuncEntry`(
        `pUsrID` SMALLINT UNSIGNED,
        `pFuncUrl` VARCHAR(100)
    ) RETURNS char(1) CHARSET utf8
    COMMENT '判断指定用户是否拥有指定功能入口权限'
BEGIN
    declare vCnt tinyint unsigned;
    
	select count(*) into vCnt
	from Pf_M_Func
	where Url=pFuncUrl and IsPublic='Y' and IsVisible='Y';
	if vCnt=1 then
		return 'Y';
	end if;
	  	
	select count(*) into vCnt
	from Pf_M_Func f,Pf_M_RoleFunc rf,Pf_M_RoleUsr ru
	where f.Url=pFuncUrl and f.IsVisible='Y' and f.ID=rf.FuncID and Pf_IfRole1UnderRole2(ru.RoleID,rf.RoleID)='Y' and ru.UsrID=pUsrID;
	if vCnt>=1 then
		return 'Y';
	else
		return 'N';
	end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_IfUsrRoleMember` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_IfUsrRoleMember`(
        `pUsrID` SMALLINT UNSIGNED,
        `pRoleFullName` VARCHAR(20)
    ) RETURNS char(1) CHARSET utf8
    COMMENT '判断指定用户是否是指定角色直接或间接成员'
BEGIN
	declare vRoleID tinyint unsigned;
    declare vCnt tinyint unsigned;
    
    select coalesce(min(ID),0) into vRoleID from Pf_M_Role where FullName=pRoleFullName;
    select count(*) into vCnt from Pf_M_RoleUsr where Pf_IfRole1UnderRole2(RoleID,vRoleID)='Y' and UsrID=pUsrID;
    if vCnt>0 then 
      return 'Y'; 
    else 
      return 'N'; 
    end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_IfUsrUnderAdmin` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_IfUsrUnderAdmin`(
        `pUsrID` SMALLINT UNSIGNED,
        `pAdminUsrID` SMALLINT UNSIGNED
    ) RETURNS char(1) CHARSET utf8
    COMMENT '判断指定用户是否归指定管理员分管'
BEGIN
    declare vCnt tinyint unsigned;
    
	select count(*) into vCnt from Pf_M_Ent where EntAdminUsrID=pAdminUsrID;
	if vCnt=1 then
    	return 'Y';
    end if;
  
	select count(*) into vCnt from Pf_M_SubAdmin where UsrID=pAdminUsrID;
	if vCnt=0 then
    	return 'N';
    end if;

	select count(*) into vCnt from Pf_M_SubAdmin sa,Pf_M_OrgUsr ou
	where sa.UsrID=pAdminUsrID and ou.UsrID=pUsrID and Pf_IfOrg1UnderOrg2(ou.OrgID,sa.OrgID)='Y';
	if vCnt=0 then
		return 'N';
	else
	  	return 'Y';
	end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_InfoBlockIDsOfUsr` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_InfoBlockIDsOfUsr`(
        `pUsrID` SMALLINT UNSIGNED
    ) RETURNS varchar(50) CHARSET utf8
    COMMENT '返回个人定制首页信息块ID集'
BEGIN
	declare rst varchar(50);

    select IfNull(group_concat(InfoBlockCode order by OrderNo),'') into rst
    from Pf_M_HomePageProfile 
    where UsrID=pUsrID;
  	
    RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_InfoBlockNamesOfUsr` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_InfoBlockNamesOfUsr`(
        `pUsrID` SMALLINT UNSIGNED
    ) RETURNS varchar(500) CHARSET utf8
    COMMENT '返回个人定制首页信息块名集'
BEGIN
	declare rst varchar(500);

    select IfNull(group_concat(i.cName order by hp.OrderNo separator '，'),'') into rst 
    from Pf_M_HomePageProfile hp,Pf_M_HomePageInfoBlock i 
    where hp.UsrID=pUsrID and hp.InfoBlockCode=i.Code;
  	
    RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_IntCodeOrdNum` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_IntCodeOrdNum`(
        `pCodeType` TINYINT(3) UNSIGNED,
        `pCode` TINYINT(3) UNSIGNED
    ) RETURNS tinyint(3) unsigned
    COMMENT '返回整型编码显示顺序'
BEGIN
	declare rst tinyint unsigned;
 
	select OrdNum into rst from Pf_M_IntCode where CodeType=pCodeType and Code=pCode;
	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_LastProcNoteOfBizNode` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_LastProcNoteOfBizNode`(
        `pBizName` VARCHAR(10),
        `pBizID` INTEGER(11) UNSIGNED,
        `pNodeName` VARCHAR(20)
    ) RETURNS varchar(1000) CHARSET utf8
    COMMENT '返回指定环节处理最后意见'
BEGIN
	declare rst VARCHAR(1000);
	
    select ifnull(ProcNote,'-') into rst
    from Pf_A_BizProcRcd a,Pf_A_Biz b
    where a.BizSeq=b.Seq and Pf_BizName(b.BizCode)=pBizName And b.BizID=pBizID And 
    	Pf_BizNodeName(a.CurrNode)=pNodeName And a.SubmitTs Is Not Null
    order by a.SubmitTs desc 
    limit 1;
  	RETURN  rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_LastProcTsOfBizNode` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_LastProcTsOfBizNode`(
        `pBizName` VARCHAR(20),
        `pBizID` INTEGER(11) UNSIGNED,
        `pNodeName` VARCHAR(20)
    ) RETURNS datetime
    COMMENT '返回指定环节处理最后提交时间'
BEGIN
	DECLARE rst DATETIME;

    select max(a.SubmitTs) into rst
	from Pf_A_BizProcRcd a,Pf_A_Biz b
	where a.BizSeq=b.Seq and Pf_BizName(b.BizCode)=pBizName And b.BizID=pBizID And 
    	Pf_BizNodeName(a.CurrNode)=pNodeName And a.SubmitTs Is Not Null;
  
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_LastToDoArrivedTsOfBizNode` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_LastToDoArrivedTsOfBizNode`(
        `pBizName` VARCHAR(10),
        `pBizID` INTEGER(11) UNSIGNED,
        `pNodeName` VARCHAR(20)
    ) RETURNS datetime
    COMMENT '返回指定节点最后待办到达时间'
BEGIN
	DECLARE rst DATETIME;

    select max(a.ArrivedTs) into rst
	from Pf_D_ToDoLink a,Pf_A_Biz b
	where a.BizSeq=b.Seq and Pf_BizName(b.BizCode)=pBizName And b.BizID=pBizID And 
    	Pf_BizNodeName(a.CurrNode)=pNodeName;
  
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_MapCondVal` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_MapCondVal`(
        `pMapCondField` VARCHAR(1000),
        `pMapCondName` VARCHAR(20)
    ) RETURNS varchar(20) CHARSET utf8
    COMMENT '根据匹配条件名，从指定条件储存字段获取匹配条件值'
BEGIN
	declare rst varchar(20);
	declare p1,p2 tinyint unsigned;

	if pMapCondField = '' then
    	set rst='-';
    else
      select instr(pMapCondField,concat('<',pMapCondName,'>'))+length(pMapCondName)+2 into p1 from dual;
      select instr(pMapCondField,concat('</',pMapCondName,'>')) into p2 from dual;
      select SUBSTR(pMapCondField,p1,p2-p1) into rst from dual;
	end if;
     
	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_MasterAttachReadHis` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_MasterAttachReadHis`(
        `pFileID` INTEGER UNSIGNED
    ) RETURNS varchar(2000) CHARSET utf8
    COMMENT '返回主文件附件阅读历史'
BEGIN
	declare rst varchar(2000);
	
	declare vReadHisRcd varchar(30);
	declare done INT DEFAULT FALSE;
	declare cur1 CURSOR for 
	Select concat(Pf_UsrcName(UsrID),'，',DATE_FORMAT(ReadTs,'%Y-%m-%d %H:%i'))
	From Pf_M_AttachReadHis
	where AttachID=pFileID
	order by Pf_OrgBigOrd(Pf_UsrMainOrgID(UsrID)),Pf_UsrOrdInMainOrg(UsrID);
	declare CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;
	
	set rst='无';
	open cur1;
	read_loop:
	LOOP
		fetch cur1 into vReadHisRcd;
		IF done or char_length(rst)>1970 THEN
			LEAVE read_loop;
		END IF;
		set rst=CONCAT(rst,char(13),char(10),vReadHisRcd);
	END LOOP;
	close cur1;
	
	if rst != '无' then
		set rst=trim(LEADING CONCAT('无',char(13),char(10)) from rst);
	else
		set rst='没人看过！';
	end if; 
	
	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_ModuleNameOfBiz` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_ModuleNameOfBiz`(
        `pBizCode` TINYINT UNSIGNED
    ) RETURNS varchar(20) CHARSET utf8
    COMMENT '返回指定业务对应功能从属模块名'
BEGIN
	declare rst varchar(20);
  	
    select Pf_ModuleNameOfFunc(FuncID)
    into rst
    from Pf_M_Biz
    where Code=pBizCode;
    RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_ModuleNameOfFunc` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_ModuleNameOfFunc`(
        `pFuncID` SMALLINT UNSIGNED
    ) RETURNS varchar(20) CHARSET utf8
    COMMENT '获取指定功能从属模块名'
BEGIN
	declare rst varchar(20);
    
    select m.Name into rst from Pf_M_Func f,Pf_M_Module m where f.ID=pFuncID and f.ModuleID=m.ID;
	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_ModuleOrd` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_ModuleOrd`(
        `pModuleID` TINYINT UNSIGNED
    ) RETURNS tinyint(3) unsigned
    COMMENT '根据模块ID返回模块显示排序'
BEGIN
	declare rst tinyint unsigned;
    
    select DisplayOrd into rst from Pf_M_Module where ID=pModuleID;
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_ModuleOrdOfBiz` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_ModuleOrdOfBiz`(
        `pBizCode` TINYINT UNSIGNED
    ) RETURNS tinyint(3) unsigned
    COMMENT '返回指定业务对应功能从属模块显示排序'
BEGIN
	declare rst tinyint unsigned;
    
    select Pf_ModuleOrdOfFunc(FuncID) into rst
    from Pf_M_Biz
    where Code=pBizCode;
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_ModuleOrdOfFunc` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_ModuleOrdOfFunc`(
        `pFuncID` SMALLINT UNSIGNED
    ) RETURNS tinyint(3) unsigned
    COMMENT '返回指定功能从属模块显示排序'
BEGIN
	declare rst tinyint unsigned;
    
    select m.DisplayOrd into rst from Pf_M_Func f,Pf_M_Module m where f.ModuleID=m.ID and f.ID=pFuncID;
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_MonthsDiff` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_MonthsDiff`(
        `pNf1` SMALLINT(4) UNSIGNED,
        `pYf1` TINYINT(2) UNSIGNED,
        `pNf2` SMALLINT(4) UNSIGNED,
        `pYf2` TINYINT(2) UNSIGNED
    ) RETURNS tinyint(3) unsigned
    COMMENT '返回月段月数'
BEGIN
	declare rst tinyint unsigned;
    
    set rst=TIMESTAMPDIFF(month,CONCAT(pNf1,'-',LPAD(concat(pYf1,''),2,'0'),'-01'),CONCAT(pNf2,'-',LPAD(concat(pYf2,''),2,'0'),'-01'))+1;
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_MultiChkStr` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_MultiChkStr`(`pCodeType` TINYINT(3) UNSIGNED,
        `pSelCodes` VARCHAR(20),
        `pDisplayCntPerLine` TINYINT(2) UNSIGNED) RETURNS varchar(400) CHARSET utf8
    COMMENT '组装指定字符编码表多选项字符串，一般用于模板套打'
BEGIN
	declare rst varchar(400);
    declare vCode CHAR(1);
    declare vValue varchar(40);
    declare vLoop tinyint unsigned;
    declare vCnt tinyint unsigned;
    
    declare done INT DEFAULT 0;
    declare cur cursor for 
    	select Code,Value from Pf_M_CharCode where CodeType=pCodeType and instr(Value,'X')=0 order by OrdNum; 
  	DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;
    
    # >>>
    set rst='';
    select COUNT(*) into vCnt from Pf_M_CharCode where CodeType=pCodeType and instr(Value,'X')=0;
    
    set done=0;
    set vLoop=1;
    open cur;
    fetch cur into vCode,vValue;
    while (done!=1) do
    	if FIND_IN_SET(vCode,pSelCodes)>0 THEN
        	set rst=concat(rst,'■');
        else
        	set rst=concat(rst,'□');
        end if;
        
        set rst=concat(rst,vValue);
        
        if vLoop!=vCnt then
        	if mod(vLoop,pDisplayCntPerLine)=0 then
            	set rst=concat(rst,char(13),char(10));
            else
            	set rst=concat(rst,'  ');
            end if;
        end if;
        
        set vLoop=vLoop+1;          
        fetch cur into vCode,vValue;
    end while; 
    close cur;
    
    RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_OrderedUsrIDs` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_OrderedUsrIDs`(
        `pUsrIDs` VARCHAR(500)
    ) RETURNS varchar(500) CHARSET utf8
    COMMENT '返回按组织机构序的用户ID集'
BEGIN
	declare rst varchar(500);

	if pUsrIDs is null then
    	RETURN '';
    end if;
    
	select group_concat(ID order by Pf_OrgBigOrd(Pf_UsrMainOrgID(ID)),Pf_UsrOrdInMainOrg(ID) separator ',') 
    into rst
    from Pf_M_Usr 
    where FIND_IN_SET(ID,pUsrIDs)>0;
      	  
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_OrgBigOrd` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_OrgBigOrd`(
        `pOrgID` SMALLINT(5) UNSIGNED
    ) RETURNS varchar(30) CHARSET utf8
    COMMENT '根据机构ID返回机构大排序'
BEGIN
	declare rst VARCHAR(30);
    
    select BigOrdCode into rst from Pf_M_Org where ID=pOrgID;
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_OrgFullName` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_OrgFullName`(
        `pOrgID` SMALLINT(5) UNSIGNED
    ) RETURNS varchar(100) CHARSET utf8
    COMMENT '根据机构ID返回机构全称（不含第一节企业名/）'
BEGIN
	declare rst varchar(200);
    declare p tinyint unsigned;
    
    select FullName into rst from Pf_M_Org where ID=pOrgID;
    set p=instr(rst,'/');
    if p!=0 then
		set rst=substr(rst,p+1);
	end if;
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_OrgNamesOfOrgIDs` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_OrgNamesOfOrgIDs`(
        `pOrgIDs` VARCHAR(200)
    ) RETURNS varchar(2000) CHARSET utf8
    COMMENT '返回指定机构ID集合对应的机构简称集合'
BEGIN
	declare rst varchar(2000);

	select group_concat(ShortName separator '，') into rst
    from Pf_M_Org 
    where FIND_IN_SET(ID,pOrgIDs)>0;
      	  
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_OrgShortName` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_OrgShortName`(
        `pOrgID` SMALLINT UNSIGNED
    ) RETURNS varchar(40) CHARSET utf8
    COMMENT '返回机构ID对应的简称'
BEGIN
	declare rst varchar(40);
    
    select ShortName into rst from Pf_M_Org where ID=pOrgID;
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_PrivilegeFuncIDsD` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_PrivilegeFuncIDsD`(
 `pRoleID` TINYINT UNSIGNED
 ) RETURNS varchar(500) CHARSET utf8
    COMMENT '返回指定角色直接拥有特权功能ID集合'
BEGIN
 declare rst VARCHAR(500);
 
 select IfNull(group_concat(FuncID order by Pf_ModuleOrdOfFunc(FuncID),Pf_FuncOrd(FuncID)),'') into rst 
 from Pf_M_Privilege 
 where RoleID=pRoleID;
 
 RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_PrivilegeFuncNames` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_PrivilegeFuncNames`(
        `pRoleID` TINYINT UNSIGNED
    ) RETURNS varchar(2000) CHARSET utf8
    COMMENT '返回指定角色及其子角色拥有特权功能名集合'
BEGIN
	declare rst VARCHAR(2000);
	
    select IfNull(group_concat(Pf_FuncName(FuncID) order by Pf_ModuleOrdOfFunc(FuncID),Pf_FuncOrd(FuncID) separator '，'),'') into rst
    from Pf_M_Privilege 
    where Pf_IfRole1UnderRole2(pRoleID,RoleID)='Y';
  	  
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_PrivilegeFuncNamesD` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_PrivilegeFuncNamesD`(
 `pRoleID` TINYINT UNSIGNED
 ) RETURNS varchar(2000) CHARSET utf8
    COMMENT '返回指定角色直接拥有特权功能名集合'
BEGIN
 declare rst VARCHAR(2000);
 
 select IfNull(group_concat(Pf_FuncName(FuncID) order by Pf_ModuleOrdOfFunc(FuncID),Pf_FuncOrd(FuncID) separator '，'),'') into rst
 from Pf_M_Privilege 
 where RoleID=pRoleID;
 
 RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_ProcUsrcNamesOfBizNode` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_ProcUsrcNamesOfBizNode`(
        `pBizName` VARCHAR(20),
        `pBizID` INTEGER(11) UNSIGNED,
        `pNodeName` VARCHAR(20)
    ) RETURNS varchar(100) CHARSET utf8
    COMMENT '返回指定业务、指定环节处理人姓名集合'
BEGIN
    declare rst varchar(100);
    
    select coalesce(group_concat(
    	Pf_UsrcName(t.ProcessedBy) 
        order by Pf_OrgBigOrd(Pf_UsrMainOrgID(t.ProcessedBy)),Pf_UsrOrdInMainOrg(t.ProcessedBy)
        Separator '，'),'-')
    into rst
    from (
    	select distinct a.ProcessedBy ProcessedBy
		from Pf_A_BizProcRcd a,Pf_A_Biz b 
		Where a.BizSeq=b.Seq and Pf_BizName(b.BizCode)=pBizName And b.BizID=pBizID And 
        	Pf_BizNodeName(a.CurrNode)=pNodeName And a.SubmitTs Is Not Null) t;
    
	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_ProcUsrIDOfBizNode` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_ProcUsrIDOfBizNode`(
        `pBizName` VARCHAR(20),
        `pBizID` INTEGER(11) UNSIGNED,
        `pNodeName` VARCHAR(20)
    ) RETURNS smallint(5) unsigned
    COMMENT '返回指定业务实例指定环节最后处理人ID'
BEGIN
	declare rst smallint unsigned;
    
    select ProcessedBy into rst
    from (select a.ProcessedBy,max(a.SubmitTs) SubmitTsMax
    	from Pf_A_BizProcRcd a,Pf_A_Biz b 
    	Where a.BizSeq=b.Seq and Pf_BizName(b.BizCode)=pBizName And b.BizID=pBizID And 
    		Pf_BizNodeName(a.CurrNode)=pNodeName And a.SubmitTs Is Not Null
    	group by a.ProcessedBy) t
    order by SubmitTsMax desc 
    limit 1;
  	
    if rst is not null then
    	return rst;
    else
  		return 0;
    end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_ProcUsrIDOfWI` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_ProcUsrIDOfWI`(
        `pWI` INTEGER UNSIGNED
    ) RETURNS smallint(5) unsigned
    COMMENT '获取工作项的处理人'
BEGIN
	declare rst smallint unsigned;
	
    select ProcessedBy into rst from Pf_D_ToDoLink where ToDoWorkItem=pWI;
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_RoleBigOrd` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_RoleBigOrd`(
        `pRoleID` TINYINT UNSIGNED
    ) RETURNS varchar(12) CHARSET utf8
    COMMENT '返回指定角色在角色树中的大排序'
BEGIN
	declare rst VARCHAR(12);
    
    select BigOrdCode into rst from Pf_M_Role where ID=pRoleID;
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_RoleFullName` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_RoleFullName`(
        `pRoleID` TINYINT UNSIGNED
    ) RETURNS varchar(60) CHARSET utf8
    COMMENT '根据角色ID返回角色全称'
BEGIN
	declare rst varchar(60);
    
    if pRoleID=0 or pRoleID is null then
    	set rst='';
    else
    	select FullName into rst from Pf_M_Role where ID=pRoleID;
    end if;
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_RoleIDSetOwnFunc` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_RoleIDSetOwnFunc`(
        `pFuncID` SMALLINT UNSIGNED
    ) RETURNS varchar(500) CHARSET utf8
    COMMENT '返回拥有指定功能直接角色ID集'
BEGIN
	declare rst VARCHAR(500);
	
    select IfNull(group_concat(r.ID order by r.BigOrdCode),'') into rst 
    from Pf_M_RoleFunc rf,Pf_M_Role r 
    where rf.FuncID=pFuncID and r.ID=rf.RoleID;
  	
    RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_RoleName` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_RoleName`(
        `pRoleID` TINYINT UNSIGNED
    ) RETURNS varchar(20) CHARSET utf8
    COMMENT '根据角色ID返回角色简称'
BEGIN
	declare rst varchar(20);
    
    if pRoleID=0 then
    	set rst='无';
    else
    	select Name into rst from Pf_M_Role where ID=pRoleID;
    end if;
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_RoleNameSetOwnFunc` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_RoleNameSetOwnFunc`(
        `pFuncID` SMALLINT UNSIGNED
    ) RETURNS varchar(2000) CHARSET utf8
    COMMENT '返回拥有指定功能直接角色全名集'
BEGIN
	declare rst VARCHAR(2000);
	
    select IfNull(group_concat(r.FullName order by r.BigOrdCode separator '，'),'') into rst
    from Pf_M_RoleFunc rf,Pf_M_Role r	
    where rf.FuncID=pFuncID and r.ID=rf.RoleID;
  	  
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_SettledBizTitleWithGrant` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_SettledBizTitleWithGrant`(
        `pBizSeq` INTEGER UNSIGNED,
        `pGrantedBy` SMALLINT UNSIGNED
    ) RETURNS varchar(120) CHARSET utf8
    COMMENT '如果是代处理人，已办业务标题体现授权人。用于已办列表展示'
BEGIN
	declare rst VARCHAR(120);
    
    if pGrantedBy>0 THEN
    	set rst=concat('（代：',Pf_UsrcName(pGrantedBy),'）',Pf_BizTitle(pBizSeq));
    else
    	set rst=Pf_BizTitle(pBizSeq);
    end if;
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_SplitStr` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_SplitStr`(
        `pStr` VARCHAR(1000),
        `pDelimiter` CHAR(1),
        `pOrd` INTEGER UNSIGNED
    ) RETURNS varchar(20) CHARSET utf8
    COMMENT '返回指定分隔符分隔的、指定次序字符串元素'
BEGIN
	declare rst varchar(20);
    
    set rst=reverse(substring_index(reverse(substring_index(pStr,pDelimiter,pOrd)),pDelimiter,1));
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_SplitStrCnt` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_SplitStrCnt`(
        `pStr` VARCHAR(1000),
        `pDelimiter` CHAR(1)
    ) RETURNS int(10) unsigned
    COMMENT '返回指定分隔符分隔的字符串元素个数'
BEGIN
	if pStr='' or pStr is null THEN
    	return 0;
    else
		return 1+(CHAR_LENGTH(pStr)-CHAR_LENGTH(replace(pStr,pDelimiter,'')));
    end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_StrAfterFistSlash` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_StrAfterFistSlash`(
        `pStr` VARCHAR(100)
    ) RETURNS varchar(100) CHARSET utf8
    COMMENT '获取从左第一个“/”后的字符串'
BEGIN
	declare rst varchar(100);
 	declare p tinyint unsigned;
 	
 	set p=instr(pStr,'/');
 	if p!=0 then
 		set rst=substr(pStr,p+1);
 	else
 		set rst=pStr;
 	end if;
 	
 	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_ToDoBizTitleWithGrant` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_ToDoBizTitleWithGrant`(
        `pBizSeq` INTEGER UNSIGNED,
        `pGrantedBy` SMALLINT UNSIGNED
    ) RETURNS varchar(50) CHARSET utf8
    COMMENT '如果是代处理人，待办标题体现授权人。用于待办列表展示'
BEGIN
	declare rst VARCHAR(50);
    
    if pGrantedBy>0 THEN
    	set rst=Pf_Abbre(concat('（代：',Pf_UsrcName(pGrantedBy),'）',Pf_BizTitle(pBizSeq)),50);
    else
    	set rst=Pf_Abbre(Pf_BizTitle(pBizSeq),50);
    end if;
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_ToRMB` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_ToRMB`(MONEY DECIMAL (14, 2)) RETURNS varchar(150) CHARSET utf8
    COMMENT '将传入小写人民币转换为大写字体人民币'
BEGIN
	DECLARE RV_MONEY0 VARCHAR(20);
	DECLARE RV_MONEY1 VARCHAR(4);
	DECLARE RV_MONEY2 VARCHAR(4);
	DECLARE V_MONEY0 VARCHAR(28);
	DECLARE V_MONEY1 VARCHAR(4);
	DECLARE V_MONEY2 VARCHAR(4);
	DECLARE V_MONEY3 VARCHAR(4);
	DECLARE V_MONEY4 VARCHAR(4);
	DECLARE V_MONEY5 VARCHAR(4);
	DECLARE V_MONEY6 VARCHAR(4);
	DECLARE V_MONEY7 VARCHAR(4);
	DECLARE V_MONEY8 VARCHAR(4);
	DECLARE V_MONEY9 VARCHAR(4);
	DECLARE V_MONEY10 VARCHAR(4);
	DECLARE V_MONEY11 VARCHAR(4);
	DECLARE V_MONEY12 VARCHAR(4);
	DECLARE RPV_MONEY1 VARCHAR(4);
	DECLARE RPV_MONEY2 VARCHAR(4);
	DECLARE PV_MONEY0 VARCHAR(14);
	DECLARE PV_MONEY1 VARCHAR(4);
	DECLARE PV_MONEY2 VARCHAR(4);
	DECLARE PV_MONEY3 VARCHAR(4);
	DECLARE PV_MONEY4 VARCHAR(4);
	DECLARE PV_MONEY5 VARCHAR(4);
	DECLARE PV_MONEY6 VARCHAR(4);
	DECLARE PV_MONEY7 VARCHAR(4);
	DECLARE PV_MONEY8 VARCHAR(4);
	DECLARE PV_MONEY9 VARCHAR(4);
	DECLARE PV_MONEY10 VARCHAR(4);
	DECLARE PV_MONEY11 VARCHAR(4);
	DECLARE PV_MONEY12 VARCHAR(4);
	DECLARE Z_MONEY VARCHAR(28);

	SET Z_MONEY=FLOOR(MONEY);
	SET V_MONEY0=LTRIM(RTRIM(Z_MONEY));
	SET Z_MONEY=FLOOR(MONEY*100);
	SET RV_MONEY0=LTRIM(RTRIM(Z_MONEY));
	SET RV_MONEY1=SUBSTR(RV_MONEY0,LENGTH(RV_MONEY0),1);

	IF LENGTH(RV_MONEY0)>1 THEN
		SET RV_MONEY2=SUBSTR(RV_MONEY0,LENGTH(RV_MONEY0)-1,1);
	ELSE
		SET RV_MONEY2='0';
	END IF;

	SET V_MONEY1=SUBSTR(V_MONEY0,LENGTH(V_MONEY0),1);

	IF LENGTH(V_MONEY0)-1>0 THEN
		SET V_MONEY2=SUBSTR(V_MONEY0,LENGTH(V_MONEY0)-1,1);
	ELSE
		SET V_MONEY2='0';
	END IF;

	IF LENGTH(V_MONEY0)-2>0 THEN
		SET V_MONEY3=SUBSTR(V_MONEY0,LENGTH(V_MONEY0)-2,1);
	ELSE
		SET V_MONEY3='0';
	END IF;

	IF LENGTH(V_MONEY0)-3>0 THEN
		SET V_MONEY4=SUBSTR(V_MONEY0,LENGTH(V_MONEY0)-3,1);
	ELSE
		SET V_MONEY4='0';
	END IF;

	IF LENGTH(V_MONEY0)-4>0 THEN
		SET V_MONEY5=SUBSTR(V_MONEY0,LENGTH(V_MONEY0)-4,1);
	ELSE
		SET V_MONEY5='0';
	END IF;

	IF LENGTH(V_MONEY0)-5>0 THEN
		SET V_MONEY6=SUBSTR(V_MONEY0,LENGTH(V_MONEY0)-5,1);
	ELSE
		SET V_MONEY6='0';
	END IF;

	IF LENGTH(V_MONEY0)-6>0 THEN
		SET V_MONEY7=SUBSTR(V_MONEY0,LENGTH(V_MONEY0)-6,1);
	ELSE
		SET V_MONEY7='0';
	END IF;

	IF LENGTH(V_MONEY0)-7>0 THEN
		SET V_MONEY8=SUBSTR(V_MONEY0,LENGTH(V_MONEY0)-7,1);
	ELSE
		SET V_MONEY8='0';
	END IF;

	IF LENGTH(V_MONEY0)-8>0 THEN
		SET V_MONEY9=SUBSTR(V_MONEY0,LENGTH(V_MONEY0)-8,1);
	ELSE
		SET V_MONEY9='0';
	END IF;

	IF LENGTH(V_MONEY0)-9>0 THEN
		SET V_MONEY10=SUBSTR(V_MONEY0,LENGTH(V_MONEY0)-9,1);
	ELSE
		SET V_MONEY10='0';
	END IF;

	IF LENGTH(V_MONEY0)-10>0 THEN
		SET V_MONEY11=SUBSTR(V_MONEY0,LENGTH(V_MONEY0)-10,1);
	ELSE
		SET V_MONEY11='0';
	END IF;

	IF LENGTH(V_MONEY0)-11>0 THEN
		SET V_MONEY12=SUBSTR(V_MONEY0,LENGTH(V_MONEY0)-11,1);
	ELSE
		SET V_MONEY12='0';
	END IF;

	SELECT IF(RV_MONEY1='0','零分',IF(RV_MONEY1='1','壹分',IF(RV_MONEY1='2','贰分',IF(RV_MONEY1='3','叁分',IF(RV_MONEY1='4','肆分',IF(RV_MONEY1='5','伍分',
		IF(RV_MONEY1='6','陆分',IF(RV_MONEY1='7','柒分',IF(RV_MONEY1='8','捌分','玖分'))))))))) INTO rpv_money1;

	SELECT IF(RV_MONEY2='0','零角',IF(RV_MONEY2='1','壹角',IF(RV_MONEY2='2','贰角',IF(RV_MONEY2='3','叁角',IF(RV_MONEY2='4','肆角',IF(RV_MONEY2='5','伍角',
		IF(RV_MONEY2='6','陆角',IF(RV_MONEY2='7','柒角',IF(RV_MONEY2='8','捌角','玖角'))))))))) INTO rpv_money2;

	SELECT IF(V_MONEY1='0','元',IF(V_MONEY1='1','壹元',IF(V_MONEY1='2','贰元',IF(V_MONEY1='3','叁元',IF(V_MONEY1='4','肆元',IF(V_MONEY1='5','伍元',
		IF(V_MONEY1='6','陆元',IF(V_MONEY1='7','柒元',IF(V_MONEY1='8','捌元','玖元'))))))))) INTO pv_money1;

	SELECT IF(V_MONEY2='0','',IF(V_MONEY2='1','壹拾',IF(V_MONEY2='2','贰拾',IF(V_MONEY2='3','叁拾',IF(V_MONEY2='4','肆拾',IF(V_MONEY2='5','伍拾',
		IF(V_MONEY2='6','陆拾',IF(V_MONEY2='7','柒拾',IF(V_MONEY2='8','捌拾','玖拾'))))))))) INTO pv_money2;

	SELECT IF(V_MONEY3='0','',IF(V_MONEY3='1','壹佰',IF(V_MONEY3='2','贰佰',IF(V_MONEY3='3','叁佰',IF(V_MONEY3='4','肆佰',IF(V_MONEY3='5','伍佰',
		IF(V_MONEY3='6','陆佰',IF(V_MONEY3='7','柒佰',IF(V_MONEY3='8','捌佰','玖佰'))))))))) INTO pv_money3;

	SELECT IF(V_MONEY4='0','',IF(V_MONEY4='1','壹仟',IF(V_MONEY4='2','贰仟',IF(V_MONEY4='3','叁仟',IF(V_MONEY4='4','肆仟',IF(V_MONEY4='5','伍仟',
		IF(V_MONEY4='6','陆仟',IF(V_MONEY4='7','柒仟',IF(V_MONEY4='8','捌仟','玖仟'))))))))) INTO pv_money4;

	SELECT IF(V_MONEY5='0','万',IF(V_MONEY5='1','壹万',IF(V_MONEY5='2','贰万',IF(V_MONEY5='3','叁万',IF(V_MONEY5='4','肆万',IF(V_MONEY5='5','伍万',
		IF(V_MONEY5='6','陆万',IF(V_MONEY5='7','柒万',IF(V_MONEY5='8','捌万','玖万'))))))))) INTO pv_money5;

	SELECT IF(V_MONEY6='0','',IF(V_MONEY6='1','壹拾',IF(V_MONEY6='2','贰拾',IF(V_MONEY6='3','叁拾',IF(V_MONEY6='4','肆拾',IF(V_MONEY6='5','伍拾',
		IF(V_MONEY6='6','陆拾',IF(V_MONEY6='7','柒拾',IF(V_MONEY6='8','捌拾','玖万'))))))))) INTO pv_money6;

	SELECT IF(V_MONEY7='0','',IF(V_MONEY7='1','壹佰',IF(V_MONEY7='2','贰佰',IF(V_MONEY7='3','叁佰',IF(V_MONEY7='4','肆佰',IF(V_MONEY7='5','伍佰',
		IF(V_MONEY7='6','陆佰',IF(V_MONEY7='7','柒佰',IF(V_MONEY7='8','捌佰','玖佰'))))))))) INTO pv_money7;

	SELECT IF(V_MONEY8='0','',IF(V_MONEY8='1','壹仟',IF(V_MONEY8='2','贰仟',IF(V_MONEY8='3','叁仟',IF(V_MONEY8='4','肆仟',IF(V_MONEY8='5','伍仟',
		IF(V_MONEY8='6','陆仟',IF(V_MONEY8='7','柒仟',IF(V_MONEY8='8','捌仟','玖仟'))))))))) INTO pv_money8;

	SELECT IF(V_MONEY9='0','亿',IF(V_MONEY9='1','壹亿',IF(V_MONEY9='2','贰亿',IF(V_MONEY9='3','叁亿',IF(V_MONEY9='4','肆亿',IF(V_MONEY9='5','伍亿',
		IF(V_MONEY9='6','陆亿',IF(V_MONEY9='7','柒亿',IF(V_MONEY9='8','捌亿','玖亿'))))))))) INTO pv_money9;

	SELECT IF(V_MONEY10='0','',IF(V_MONEY10='1','壹拾',IF(V_MONEY10='2','贰拾',IF(V_MONEY10='3','叁拾',IF(V_MONEY10='4','肆拾',IF(V_MONEY10='5','伍拾',
		IF(V_MONEY10='6','陆拾',IF(V_MONEY10='7','柒拾',IF(V_MONEY10='8','捌拾','玖万'))))))))) INTO pv_money10;

	SELECT IF(V_MONEY11='0','',IF(V_MONEY11='1','壹佰',IF(V_MONEY11='2','贰佰',IF(V_MONEY11='3','叁佰',IF(V_MONEY11='4','肆佰',IF(V_MONEY11='5','伍佰',
		IF(V_MONEY11='6','陆佰',IF(V_MONEY11='7','柒佰',IF(V_MONEY11='8','捌佰','玖佰'))))))))) INTO pv_money11;

	SELECT IF(V_MONEY12='0','',IF(V_MONEY12='1','壹仟',IF(V_MONEY12='2','贰仟',IF(V_MONEY12='3','叁仟',IF(V_MONEY12='4','肆仟',IF(V_MONEY12='5','伍仟',
		IF(V_MONEY12='6','陆仟',IF(V_MONEY12='7','柒仟',IF(V_MONEY12='8','捌仟','玖仟'))))))))) INTO pv_money12;

	SET V_MONEY0=CONCAT(PV_MONEY12,PV_MONEY11,PV_MONEY10,PV_MONEY9,PV_MONEY8,PV_MONEY7,PV_MONEY6,PV_MONEY5,PV_MONEY4,PV_MONEY3,PV_MONEY2,PV_MONEY1,RPV_MONEY2,RPV_MONEY1);

	IF SUBSTR(V_MONEY0,1,1)='亿' THEN
		SET V_MONEY0=SUBSTR(V_MONEY0,2,LENGTH(V_MONEY0)-1);
	END IF;

	IF SUBSTR(V_MONEY0,1,1)='万' THEN
		SET V_MONEY0=SUBSTR(V_MONEY0,2,LENGTH(V_MONEY0)-1);
	END IF;

	/* 判断亿和万之间间隔的位数 locate */
	SET V_MONEY0=REPLACE(V_MONEY0,'亿万','亿');
	
	/* 判断亿和元之间间隔的位数 locate */
	IF LOCATE('元',V_MONEY0)-LOCATE('亿',V_MONEY0)=2 THEN
		SET V_MONEY0=REPLACE(V_MONEY0,'亿壹','亿零壹');
		SET V_MONEY0=REPLACE(V_MONEY0,'亿贰','亿零贰');
		SET V_MONEY0=REPLACE(V_MONEY0,'亿叁','亿零叁');
		SET V_MONEY0=REPLACE(V_MONEY0,'亿肆','亿零肆');
		SET V_MONEY0=REPLACE(V_MONEY0,'亿伍','亿零伍');
		SET V_MONEY0=REPLACE(V_MONEY0,'亿陆','亿零陆');
		SET V_MONEY0=REPLACE(V_MONEY0,'亿柒','亿零柒');
		SET V_MONEY0=REPLACE(V_MONEY0,'亿捌','亿零捌');
		SET V_MONEY0=REPLACE(V_MONEY0,'亿玖','亿零玖');
	END IF;

	SET V_MONEY0=REPLACE(V_MONEY0,'亿壹拾','亿零壹拾');
	SET V_MONEY0=REPLACE(V_MONEY0,'亿贰拾','亿零贰拾');
	SET V_MONEY0=REPLACE(V_MONEY0,'亿叁拾','亿零叁拾');
	SET V_MONEY0=REPLACE(V_MONEY0,'亿肆拾','亿零肆拾');
	SET V_MONEY0=REPLACE(V_MONEY0,'亿伍拾','亿零伍拾');
	SET V_MONEY0=REPLACE(V_MONEY0,'亿陆拾','亿零陆拾');
	SET V_MONEY0=REPLACE(V_MONEY0,'亿柒拾','亿零柒拾');
	SET V_MONEY0=REPLACE(V_MONEY0,'亿捌拾','亿零捌拾');
	SET V_MONEY0=REPLACE(V_MONEY0,'亿玖拾','亿零玖拾');
	SET V_MONEY0=REPLACE(V_MONEY0,'亿壹佰','亿零壹佰');
	SET V_MONEY0=REPLACE(V_MONEY0,'亿贰佰','亿零贰佰');
	SET V_MONEY0=REPLACE(V_MONEY0,'亿叁佰','亿零叁佰');
	SET V_MONEY0=REPLACE(V_MONEY0,'亿肆佰','亿零肆佰');
	SET V_MONEY0=REPLACE(V_MONEY0,'亿伍佰','亿零伍佰');
	SET V_MONEY0=REPLACE(V_MONEY0,'亿陆佰','亿零陆佰');
	SET V_MONEY0=REPLACE(V_MONEY0,'亿柒佰','亿零柒佰');
	SET V_MONEY0=REPLACE(V_MONEY0,'亿捌佰','亿零捌佰');
	SET V_MONEY0=REPLACE(V_MONEY0,'亿玖佰','亿零玖佰');

	/* 判断最后一个万和元之间间隔的位数 */
	IF LOCATE('元',V_MONEY0)-LOCATE('万',V_MONEY0)=2 THEN
		SET V_MONEY0=REPLACE(V_MONEY0,'万壹','万零壹');
		SET V_MONEY0=REPLACE(V_MONEY0,'万贰','万零贰');
		SET V_MONEY0=REPLACE(V_MONEY0,'万叁','万零叁');
		SET V_MONEY0=REPLACE(V_MONEY0,'万肆','万零肆');
		SET V_MONEY0=REPLACE(V_MONEY0,'万伍','万零伍');
		SET V_MONEY0=REPLACE(V_MONEY0,'万陆','万零陆');
		SET V_MONEY0=REPLACE(V_MONEY0,'万柒','万零柒');
		SET V_MONEY0=REPLACE(V_MONEY0,'万捌','万零捌');
		SET V_MONEY0=REPLACE(V_MONEY0,'万玖','万零玖');
	END IF;

	SET V_MONEY0=REPLACE(V_MONEY0,'万壹拾','万零壹拾');
	SET V_MONEY0=REPLACE(V_MONEY0,'万贰拾','万零贰拾');
	SET V_MONEY0=REPLACE(V_MONEY0,'万叁拾','万零叁拾');
	SET V_MONEY0=REPLACE(V_MONEY0,'万肆拾','万零肆拾');
	SET V_MONEY0=REPLACE(V_MONEY0,'万伍拾','万零伍拾');
	SET V_MONEY0=REPLACE(V_MONEY0,'万陆拾','万零陆拾');
	SET V_MONEY0=REPLACE(V_MONEY0,'万柒拾','万零柒拾');
	SET V_MONEY0=REPLACE(V_MONEY0,'万捌拾','万零捌拾');
	SET V_MONEY0=REPLACE(V_MONEY0,'万玖拾','万零玖拾');
	SET V_MONEY0=REPLACE(V_MONEY0,'万壹佰','万零壹佰');
	SET V_MONEY0=REPLACE(V_MONEY0,'万贰佰','万零贰佰');
	SET V_MONEY0=REPLACE(V_MONEY0,'万叁佰','万零叁佰');
	SET V_MONEY0=REPLACE(V_MONEY0,'万肆佰','万零肆佰');
	SET V_MONEY0=REPLACE(V_MONEY0,'万伍佰','万零伍佰');
	SET V_MONEY0=REPLACE(V_MONEY0,'万陆佰','万零陆佰');
	SET V_MONEY0=REPLACE(V_MONEY0,'万柒佰','万零柒佰');
	SET V_MONEY0=REPLACE(V_MONEY0,'万捌佰','万零捌佰');
	SET V_MONEY0=REPLACE(V_MONEY0,'万玖佰','万零玖佰');

	/* 判断最后一个千和元之间间隔的位数 */
	IF LOCATE('元',V_MONEY0)-LOCATE('仟',V_MONEY0)=2 THEN
		SET V_MONEY0=REPLACE(V_MONEY0,'仟壹','仟零壹');
		SET V_MONEY0=REPLACE(V_MONEY0,'仟贰','仟零贰');
		SET V_MONEY0=REPLACE(V_MONEY0,'仟叁','仟零叁');
		SET V_MONEY0=REPLACE(V_MONEY0,'仟肆','仟零肆');
		SET V_MONEY0=REPLACE(V_MONEY0,'仟伍','仟零伍');
		SET V_MONEY0=REPLACE(V_MONEY0,'仟陆','仟零陆');
		SET V_MONEY0=REPLACE(V_MONEY0,'仟柒','仟零柒');
		SET V_MONEY0=REPLACE(V_MONEY0,'仟捌','仟零捌');
		SET V_MONEY0=REPLACE(V_MONEY0,'仟玖','仟零玖');
	END IF;

	SET V_MONEY0=REPLACE(V_MONEY0,'仟壹拾','仟零壹拾');
	SET V_MONEY0=REPLACE(V_MONEY0,'仟贰拾','仟零贰拾');
	SET V_MONEY0=REPLACE(V_MONEY0,'仟叁拾','仟零叁拾');
	SET V_MONEY0=REPLACE(V_MONEY0,'仟肆拾','仟零肆拾');
	SET V_MONEY0=REPLACE(V_MONEY0,'仟伍拾','仟零伍拾');
	SET V_MONEY0=REPLACE(V_MONEY0,'仟陆拾','仟零陆拾');
	SET V_MONEY0=REPLACE(V_MONEY0,'仟柒拾','仟零柒拾');
	SET V_MONEY0=REPLACE(V_MONEY0,'仟捌拾','仟零捌拾');
	SET V_MONEY0=REPLACE(V_MONEY0,'仟玖拾','仟零玖拾');

	/* 判断最后一个佰和元之间间隔的位数 */
	IF LOCATE('元',V_MONEY0)-LOCATE('佰',V_MONEY0)=2 THEN
		SET V_MONEY0=REPLACE(V_MONEY0,'佰壹','佰零壹');
		SET V_MONEY0=REPLACE(V_MONEY0,'佰贰','佰零贰');
		SET V_MONEY0=REPLACE(V_MONEY0,'佰叁','佰零叁');
		SET V_MONEY0=REPLACE(V_MONEY0,'佰肆','佰零肆');
		SET V_MONEY0=REPLACE(V_MONEY0,'佰伍','佰零伍');
		SET V_MONEY0=REPLACE(V_MONEY0,'佰陆','佰零陆');
		SET V_MONEY0=REPLACE(V_MONEY0,'佰柒','佰零柒');
		SET V_MONEY0=REPLACE(V_MONEY0,'佰捌','佰零捌');
		SET V_MONEY0=REPLACE(V_MONEY0,'佰玖','佰零玖');
	END IF;

	IF SUBSTR(V_MONEY0,LENGTH(V_MONEY0)/2-1,1)='零' THEN
		SET V_MONEY0=SUBSTR(V_MONEY0,1,LENGTH(V_MONEY0)/2-2);
	END IF;

	IF SUBSTR(V_MONEY0,LENGTH(V_MONEY0)/2-1,1)='零' THEN
		SET V_MONEY0=SUBSTR(V_MONEY0,1,LENGTH(V_MONEY0)/2-2);
		SET V_MONEY0=CONCAT(V_MONEY0,'整');
	END IF;

	/* 判断有没有零角,有就替换成零 */
	SET V_MONEY0=REPLACE(V_MONEY0,'零角','零');
	IF V_MONEY0='元整' THEN
		SET V_MONEY0='零元';
	END IF;

	RETURN V_MONEY0;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_UniAppAttachFileSeq` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_UniAppAttachFileSeq`(
        `pPrimaryName` VARCHAR(30),
        `pPrimaryID` INTEGER(11) UNSIGNED
    ) RETURNS int(12) unsigned
    COMMENT '返回指定应用文件主体唯一附件文件Seq'
BEGIN
	declare rst INTEGER UNSIGNED;
 
 	select COALESCE(MAX(Seq),0) into rst 
    from Pf_A_AttachInfo 
    Where PrimaryID=pPrimaryID And PrimaryName=pPrimaryName and DelTag='N';
 
 	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_UniMasterAttachFileID` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_UniMasterAttachFileID`(
        `pPrimaryName` VARCHAR(30),
        `pPrimaryID` INTEGER(11) UNSIGNED
    ) RETURNS int(12) unsigned
    COMMENT '返回指定主文件主体唯一附件文件ID'
BEGIN
	declare rst INTEGER UNSIGNED;
 
 	select COALESCE(MAX(ID),0) into rst 
    from Pf_M_AttachInfo 
    Where PrimaryID=pPrimaryID And PrimaryName=pPrimaryName and DelTag='N';
 
 	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_UsrAreaID` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_UsrAreaID`(
        `pUsrID` SMALLINT UNSIGNED
    ) RETURNS tinyint(4) unsigned
    COMMENT '返回用户base地域'
BEGIN
	declare rst tinyint unsigned;
 
	select AreaID into rst from Pf_M_Usr where ID=pUsrID;
	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_UsrcName` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_UsrcName`(
        `pUsrID` SMALLINT(5)
    ) RETURNS varchar(10) CHARSET utf8
    COMMENT '根据用户ID返回用户姓名，-2对应显示''投票环节'''
BEGIN
	declare rst varchar(10);
    
    if pUsrID is null THEN
    	set rst='-';
    else
      if pUsrID=-2 then
          set rst='投票环节';
      else
          if pUsrID=0 then
              set rst='-';
          else
              select cName into rst from Pf_M_Usr where ID=pUsrID;
          end if;
      end if;
  	end if;
    RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_UsrContactInfo` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_UsrContactInfo`(
        `pUsrID` SMALLINT UNSIGNED
    ) RETURNS varchar(200) CHARSET utf8
    COMMENT '根据用户ID获取其联系信息（邮件、移动电话）'
BEGIN
	declare rst varchar(200);
    
    if pUsrID is not null then
    	select concat('电子邮件：',eMail,'，联系电话：',MobileNumber) into rst from Pf_M_Usr where ID=pUsrID;
  	else
    	set rst='-';
    end if;
    
    RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_UsrDeptManagerPsnID` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_UsrDeptManagerPsnID`(
        `pUsrID` SMALLINT(5) UNSIGNED
    ) RETURNS smallint(5) unsigned
    COMMENT '返回指定用户主职部门正职用户ID'
BEGIN
	declare rst smallint(5) unsigned;
    
    select UsrID into rst 
    from Pf_M_OrgUsr
    where OrgID=Pf_UsrMainOrgID(pUsrID) and JobType='Z';
  	
    RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_UsrDivisionID` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_UsrDivisionID`(
        `pUsrID` SMALLINT UNSIGNED
    ) RETURNS smallint(5) unsigned
    COMMENT '返回用户所在单位ID'
BEGIN
	declare rst smallint unsigned;
    
    select ID into rst 
    from Pf_M_Org
    where Pf_IfOrg1UnderOrg2(Pf_UsrMainOrgID(pUsrID),ID)='Y' and TreeLevel=2;
    
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_UsrEmail` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_UsrEmail`(
        `pUsrID` SMALLINT UNSIGNED
    ) RETURNS varchar(100) CHARSET utf8
    COMMENT '获取用户email'
BEGIN
	declare rst varchar(100);
    
    select eMail into rst from Pf_M_Usr where ID=pUsrID;
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_UsrIDSetOfRoleUnderAdminE` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_UsrIDSetOfRoleUnderAdminE`(
        `pRoleID` TINYINT UNSIGNED,
        `pAdminUsrID` SMALLINT UNSIGNED
    ) RETURNS varchar(1000) CHARSET utf8
    COMMENT '返回指定管理员分管角色用户成员ID集'
BEGIN
	declare rst varchar(1000);

    select IfNull(group_concat(UsrID order by Pf_OrgBigOrd(Pf_UsrMainOrgID(UsrID)),Pf_UsrOrdInMainOrg(UsrID)),'') into rst
    from Pf_M_RoleUsr 
    Where RoleID=pRoleID And Pf_IfUsrUnderAdmin(UsrID,pAdminUsrID)='Y';
    
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_UsrIDSetRptTo` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_UsrIDSetRptTo`(
        `pLeaderUsrID` SMALLINT UNSIGNED
    ) RETURNS varchar(10000) CHARSET utf8
    COMMENT '返回指定领导所有下属用户ID集'
BEGIN
	declare rst varchar(10000);
    declare vDirectChildIDs varchar(1000);
    
    set rst='0';
    set vDirectChildIDs=cast(pLeaderUsrID as char);
    while vDirectChildIDs is not null do
    	set rst=concat(rst,',',vDirectChildIDs);
        select group_concat(MyUsrID) into vDirectChildIDs from Pf_M_MyDirectLeader where find_in_set(LeaderID,vDirectChildIDs)>0;
    end while;
    set rst=trim(LEADING concat('0,',pLeaderUsrID,',') from rst);
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_UsrJobLevelNum` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_UsrJobLevelNum`(
        `pUsrID` SMALLINT UNSIGNED
    ) RETURNS tinyint(4)
    COMMENT '返回用户级别值'
BEGIN
	declare rst tinyint unsigned;
    
    select c.OrdNum into rst from Pf_M_EntAppCode c,Pf_M_Usr u where u.ID=pUsrID and u.JobLevelID=c.ID;
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_UsrJobTitleID` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_UsrJobTitleID`(
        `pUsrID` SMALLINT(5) UNSIGNED
    ) RETURNS smallint(5) unsigned
    COMMENT '返回用户所在主职部门职务码'
BEGIN
	declare rst smallint unsigned;
  
	select JobTitleID into rst from Pf_M_OrgUsr where UsrID=pUsrID and OrgID=Pf_UsrMainOrgID(pUsrID);
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_UsrLoginName` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_UsrLoginName`(
        `pUsrID` SMALLINT(5) UNSIGNED
    ) RETURNS varchar(20) CHARSET utf8
    COMMENT '返回用户登录账户名'
BEGIN
	if pUsrID=0 then
    	return '0';
    else
    	return (select LoginName from Pf_M_UsrPwd where UsrID=pUsrID); 
    end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_UsrMainOrgID` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_UsrMainOrgID`(
        `pUsrID` SMALLINT(5) UNSIGNED
    ) RETURNS smallint(5) unsigned
    COMMENT '返回用户主职部门ID'
BEGIN
	declare rst smallint unsigned;
    
    select ou.OrgID into rst
    from Pf_M_OrgUsr ou,Pf_M_Org o
    where ou.UsrID=pUsrID and ou.OrgID=o.ID
    order by ou.IsMainOrg desc,o.BigOrdCode
    limit 1;

	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_UsrMobileNum` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_UsrMobileNum`(
        `pUsrID` SMALLINT(5) UNSIGNED
    ) RETURNS varchar(40) CHARSET utf8
    COMMENT '返回用户手机号'
BEGIN
	declare rst VARCHAR(40);
    
    select MobileNumber into rst from Pf_M_Usr where ID=pUsrID;
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_UsrNamesOfUsrIDs` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_UsrNamesOfUsrIDs`(
        `pUsrIDs` VARCHAR(500)
    ) RETURNS varchar(500) CHARSET utf8
    COMMENT '返回用户ID集对应的用户姓名集'
BEGIN
	declare rst varchar(500);

	if pUsrIDs is null then
    	RETURN '';
    end if;
    
	select group_concat(cName order by Pf_OrgBigOrd(Pf_UsrMainOrgID(ID)),Pf_UsrOrdInMainOrg(ID) separator '，') 
    into rst
    from Pf_M_Usr 
    where FIND_IN_SET(ID,pUsrIDs)>0;
      	  
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_UsrOrdInMainOrg` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_UsrOrdInMainOrg`(
        `pUsrID` SMALLINT(5) UNSIGNED
    ) RETURNS tinyint(3) unsigned
    COMMENT '返回用户在主职部门的排位顺序'
BEGIN
	declare rst tinyint unsigned;
    
    select InnerOrd into rst from Pf_M_OrgUsr where UsrID=pUsrID and OrgID=Pf_UsrMainOrgID(pUsrID);
  	
    RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_UsrSetOfRoleUnderAdmin` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_UsrSetOfRoleUnderAdmin`(
        `pRoleID` TINYINT UNSIGNED,
        `pAdminUsrID` SMALLINT UNSIGNED
    ) RETURNS varchar(3000) CHARSET utf8
    COMMENT '返回指定管理员分管角色所有成员姓名集（含子角色成员）'
BEGIN
	declare rst varchar(3000);
	
	select IfNull(group_concat(Pf_UsrcName(UsrID) order by Pf_OrgBigOrd(Pf_UsrMainOrgID(UsrID)),Pf_UsrOrdInMainOrg(UsrID) separator '，'),'') into rst
	from (Select Distinct UsrID From Pf_M_RoleUsr Where Pf_IfRole1UnderRole2(RoleID,pRoleID)='Y' And Pf_IfUsrUnderAdmin(UsrID,pAdminUsrID)='Y') t;
	
	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_UsrSetOfRoleUnderAdminE` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_UsrSetOfRoleUnderAdminE`(
        `pRoleID` TINYINT UNSIGNED,
        `pAdminUsrID` SMALLINT UNSIGNED
    ) RETURNS varchar(3000) CHARSET utf8
    COMMENT '返回指定管理员分管角色直接成员姓名集'
BEGIN
	declare rst varchar(3000);

	select IfNull(group_concat(Pf_UsrcName(UsrID) order by Pf_OrgBigOrd(Pf_UsrMainOrgID(UsrID)),Pf_UsrOrdInMainOrg(UsrID) separator '，'),'') into rst
	from Pf_M_RoleUsr 
    Where RoleID=pRoleID And Pf_IfUsrUnderAdmin(UsrID,pAdminUsrID)='Y';
	
	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pf_WorkHoursBetween` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pf_WorkHoursBetween`(
        `pUsrID` SMALLINT UNSIGNED,
        `pDT1` DATETIME,
        `pDT2` DATETIME
    ) RETURNS decimal(8,1)
    COMMENT '针对参数用户pUsrID，返回指定时间段工作时数。实际是根据用户所在区域【坐班时段】、【公假设置】计算指定时间段包含的工作时数。'
BEGIN
	declare rst DECIMAL(8,1);
 
 	declare vAreaID tinyint unsigned;
 	declare sWorkHourBegin1,sWorkHourEnd1,sWorkHourBegin2,sWorkHourEnd2 char(5);
 	declare iNoonHours,iWholeDayHours DECIMAL(8,1);
 	declare sD1,sD2 char(10); #日期串
 	declare dD1,dD2 date; #日期不带时分
 	declare sT1,sT2 char(5); #时间串
 	declare iJudgeCnt tinyint unsigned; #判断用计数
 	declare dTmp date; #临时日期变量
 	declare iDaysCnt int unsigned; #扣除节假日涉及天数
 	declare hMinus1,hMinus2 DECIMAL(8,1); #头尾分别需要扣除的时间
 	
 	if pDt1>=pDt2 THEN
 		return 0;
 	end if;
 	
 	set vAreaID=Pf_UsrAreaID(pUsrID);
 	
 	select WorkHourBegin1,WorkHourEnd1,WorkHourBegin2,WorkHourEnd2 
 	into sWorkHourBegin1,sWorkHourEnd1,sWorkHourBegin2,sWorkHourEnd2
 	from Pf_M_Ent;
 	
 	select count(*) into iJudgeCnt from Pf_M_EntWorkHour where AreaID=vAreaID;
 	if iJudgeCnt=1 then
 		select WorkHourBegin1,WorkHourEnd1,WorkHourBegin2,WorkHourEnd2 into sWorkHourBegin1,sWorkHourEnd1,sWorkHourBegin2,sWorkHourEnd2
 		from Pf_M_EntWorkHour
 		where AreaID=vAreaID;
 	end if;
 	
 	set iNoonHours=TIMESTAMPDIFF(MINUTE,CONCAT('2015-01-01 ',sWorkHourEnd1),concat('2015-01-01 ',sWorkHourBegin2))/60;
 	set iWholeDayHours=TIMESTAMPDIFF(MINUTE,CONCAT('2015-01-01 ',sWorkHourBegin1),concat('2015-01-01 ',sWorkHourEnd2))/60-iNoonHours;
 	
 	set sD1=DATE_FORMAT(pDT1,'%Y-%m-%d');
 	set sD2=DATE_FORMAT(pDT2,'%Y-%m-%d');
 	set dD1=cast(sD1 as date);
 	set dD2=cast(sD2 as date);
 	set sT1=DATE_FORMAT(pDT1,'%H:%i');
 	set sT2=DATE_FORMAT(pDT2,'%H:%i');
 	
 	#修正参数的日期
 	select count(*) into iJudgeCnt
 	from Pf_M_PubHoliday
 	where dD1 between Day1 and Day2;
 	
 	if iJudgeCnt>0 then
 		select Day1 into dTmp 
 		from Pf_M_PubHoliday
 		where dD1 between Day1 and Day2;
 		set sD1=DATE_FORMAT(date_add(dTmp,interval -1 day),'%Y-%m-%d');
 		set dD1=cast(sD1 as date);
 		set sT1=sWorkHourEnd2;
 	end if;
 	
 	select count(*) into iJudgeCnt
 	from Pf_M_PubHoliday
 	where dD2 between Day1 and Day2;
 	
 	if iJudgeCnt>0 then
 		select Day2 into dTmp
 		from Pf_M_PubHoliday
 		where dD2 between Day1 and Day2;
 		set sD2=DATE_FORMAT(date_add(dTmp,interval 1 day),'%Y-%m-%d');
 		set dD2=cast(sD2 as date);
 		set sT2=sWorkHourBegin1;
 	end if;
 	
 	#修正参数的时分
 	if sT1<sWorkHourBegin1 then
 		set sT1=sWorkHourBegin1;
 	end if;
 	if sT1>sWorkHourEnd1 and sT1<sWorkHourBegin2 then
 		set sT1=sWorkHourBegin2;
 	end if;
 	if sT1>sWorkHourEnd2 then
 		set sT1=sWorkHourEnd2;
 	end if;
 	
 	if sT2<sWorkHourBegin1 then
 		set sT2=sWorkHourBegin1;
 	end if;
 	if sT2>sWorkHourEnd1 and sT2<sWorkHourBegin2 then
 		set sT2=sWorkHourEnd1;
 	end if;
 	if sT2>sWorkHourEnd2 then
 		set sT2=sWorkHourEnd2;
 	end if;
 	
 	#同一天，直接返回间隔小时数
 	if sD1=sD2 then
 		if sT1<=sWorkHourEnd1 and sT2>=sWorkHourBegin2 then
 			set rst=cast(TIMESTAMPDIFF(MINUTE,CONCAT('2015-01-01 ',sT1),concat('2015-01-01 ',sT2))/60-iNoonHours as DECIMAL(8,1)); #跨中午
 		else
 			set rst=cast(TIMESTAMPDIFF(MINUTE,CONCAT('2015-01-01 ',sT1),concat('2015-01-01 ',sT2))/60 as DECIMAL(8,1)); 
 		end if;
 		return rst; 
 	end if;
 	
 	#不在同一天
 	DROP TEMPORARY TABLE IF EXISTS T_Date;
 	CREATE TEMPORARY TABLE `T_Date` (
 		`WorkDay` date NOT NULL,
 		PRIMARY KEY (`WorkDay`) COMMENT '') ENGINE=memory
 		CHARACTER SET 'utf8' COLLATE 'utf8_general_ci';
 	
 	set dTmp=dD1;
 	while dTmp<=dD2 do
 		insert into T_Date values (dTmp);
 		set dTmp=date_add(dTmp,interval 1 day);
 	end while;
 	
 	delete from T_Date where EXISTS(select 1 from Pf_M_PubHoliday where T_Date.WorkDay between day1 and day2); #头尾+中间非节假日日期保留下来
 	select count(*) into iDaysCnt from T_Date;
 	
 	if sT1<=sWorkHourEnd1 then
 		set hMinus1=TIMESTAMPDIFF(MINUTE,concat(sD1,' ',sWorkHourBegin1),concat(sD1,' ',sT1))/60;
 	else
 		set hMinus1=TIMESTAMPDIFF(MINUTE,concat(sD1,' ',sWorkHourBegin1),concat(sD1,' ',sT1))/60-iNoonHours;
 	end if;
 	
 	if sT2<sWorkHourBegin2 then
 		set hMinus2=TIMESTAMPDIFF(MINUTE,concat(sD2,' ',sT2),concat(sD2,' ',sWorkHourEnd2))/60-iNoonHours;
 	else
 		set hMinus2=TIMESTAMPDIFF(MINUTE,concat(sD2,' ',sT2),concat(sD2,' ',sWorkHourEnd2))/60;
 	end if;
 	
 	set rst=cast(iDaysCnt*iWholeDayHours-hMinus1-hMinus2 as DECIMAL(8,1));
 	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `PsnSel_CalcA` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `PsnSel_CalcA`(
        `pFlowStartPsn` SMALLINT UNSIGNED,
        `pCurrProcessor` SMALLINT UNSIGNED,
        `pBizSeq` INTEGER UNSIGNED,
        `pPsnSelAttr` TINYINT UNSIGNED,
        `pSpecRoleID` TINYINT UNSIGNED
    ) RETURNS varchar(1000) CHARSET utf8
    COMMENT '流程选人部件：应用计算方式直接返回人员ID集\r\npFlowStartPsn 流程启动人\r\npCurrProcessor 当前处理人\r\npBizSeq 业务抽象流水\r\npPsnSelAttr 流程选人方式码\r\npSpecRoleID 流程选人指定角色'
BEGIN
	declare rst varchar(1000);
 	declare vStartPsnMainOrgID,vCurrPsnMainOrgID,vUsrID smallint unsigned;
    declare vBizCode tinyint unsigned;
 	
 	if pPsnSelAttr=45 then # 选择指定角色全部成员
 		select group_concat(UsrID) into rst
 		from Pf_M_RoleUsr
 		where RoleID=pSpecRoleID;
 	end if;
 	
 	if pPsnSelAttr=51 then 
 		#51-下一步处理人是起草人主职部门负责人
 		set vStartPsnMainOrgID=Pf_UsrMainOrgID(pFlowStartPsn);
 		
 		select concat(ou.UsrID,'') into rst
 		from Pf_M_OrgUsr ou,Pf_M_Usr u
 		where ou.OrgID=vStartPsnMainOrgID and ou.JobType = 'Z' and ou.UsrID=u.ID and u.IsValid='Y';
 	end if;
 	
 	if pPsnSelAttr=52 then 
 		#52-下一步处理人是处理人主职部门负责人
 		set vCurrPsnMainOrgID=Pf_UsrMainOrgID(pCurrProcessor);
 		
 		select concat(ou.UsrID,'') into rst
 		from Pf_M_OrgUsr ou,Pf_M_Usr u
 		where ou.OrgID=vCurrPsnMainOrgID and ou.JobType = 'Z' and ou.UsrID=u.ID and u.IsValid='Y';
 	end if;
 	
 	if pPsnSelAttr=75 then
 		#75-下一步处理人是当前处理人的部门经理/直属上司 当前处理人就是部门经理则返回其直属上司
 		set vCurrPsnMainOrgID=Pf_UsrMainOrgID(pCurrProcessor);
 		
 		#取当前处理人的部门经理
 		select ou.UsrID into vUsrID
 		from Pf_M_OrgUsr ou,Pf_M_Usr u
 		where ou.OrgID=vCurrPsnMainOrgID and ou.JobType = 'Z' and ou.UsrID=u.ID and u.IsValid='Y';
 		
 		if vUsrID=pCurrProcessor then
 			select concat(LeaderID,'') into rst
 			from Pf_M_MyDirectLeader
 			where MyUsrID=pCurrProcessor; 
 		else
 			set rst=concat(vUsrID,'');
 		end if;
 	end if;
    
 	if pPsnSelAttr=107 then
 		#107-下一步处理人是签报指定执行人
 		select ZrrUsrIDs into rst from QsQb_A_Zt where EXISTS(select 1 from Pf_A_Biz where Seq=pBizSeq and QsQb_A_Zt.ID=BizID);
 	end if;
 	
 	if pPsnSelAttr=108 then
 		#108-下一步处理人是督查督办承办人
 		select concat(CbrID,'') into rst from DcDb_A_Zt where EXISTS(select 1 from Pf_A_Biz where Seq=pBizSeq and DcDb_A_Zt.ID=BizID);
 	end if;
 	
 	if pPsnSelAttr=102 then
 		#102-下一步处理人是会议发起指定记录人
 		select concat(RcdUsrID,'') into rst from HyGl_A_Zt where EXISTS(select 1 from Pf_A_Biz where Seq=pBizSeq and HyGl_A_Zt.ID=BizID);
 	end if;
 	
 	if pPsnSelAttr=103 then
 		#103-下一步处理人是会议发起指定参会人（不算记录人）
 		select group_concat(u.ID) into rst 
        from Pf_M_Usr u,HyGl_A_Zt z 
        where EXISTS(select 1 from Pf_A_Biz where Seq=pBizSeq and z.ID=BizID) and FIND_IN_SET(u.ID,z.NbChRyUsrIDs)>0 and u.ID!=z.RcdUsrID;
 	end if;
 	
 	if pPsnSelAttr=101 then # 下一环节处理人是业务相关线上签字人
    	select BizCode into vBizCode from Pf_A_Biz where Seq=pBizSeq;
        
        if vBizCode = 14 then # 借款申请
        	select group_concat(ProcessedBy) into rst
            from (
            	select distinct ProcessedBy from Pf_A_BizProcRcd 
                where BizSeq=pBizSeq and SubmitTs is not null and Pf_BizNodeName(CurrNode) in 
                	('申请','部门经理审批','财务审核','总经理审批','出纳放款')) t;
        end if;
        
        if vBizCode = 15 then # 还款记录
        	select group_concat(ProcessedBy) into rst
            from (
            	select distinct ProcessedBy from Pf_A_BizProcRcd 
                where BizSeq=pBizSeq and Pf_BizNodeName(CurrNode) in ('发起','财务办理')) t;
        end if;
        
        if vBizCode=18 then # 报销申请
        	select group_concat(ProcessedBy) into rst
            from (
            	select distinct ProcessedBy from Pf_A_BizProcRcd 
                where BizSeq=pBizSeq and SubmitTs is not null and Pf_BizNodeName(CurrNode) in 
                	('部门经理审批','财务审核','财务复核','总经理审批','报销结清')) t;
        end if;
        
        if vBizCode=19 then # 预付款审批
        	select group_concat(ProcessedBy) into rst
            from (
            	select distinct ProcessedBy from Pf_A_BizProcRcd 
                where BizSeq=pBizSeq and SubmitTs is not null and Pf_BizNodeName(CurrNode) in 
                	('出纳放款','部门负责人审批','会计审核','财务部负责人审批','总经理审批')) t;
        end if;
        
        if vBizCode=21 then # 立项申请
        	select group_concat(ProcessedBy) into rst
            from (
            	select distinct ProcessedBy from Pf_A_BizProcRcd 
                where BizSeq=pBizSeq and SubmitTs is not null and Pf_BizNodeName(CurrNode) in ('部门领导审查','部门分管副总审查','法律合规部审查','财务部审查','决策部主任批示')) t;
        end if;
        
        if vBizCode=23 then # 项目审查
        	select group_concat(ProcessedBy) into rst
            from (
            	select distinct ProcessedBy from Pf_A_BizProcRcd 
                where BizSeq=pBizSeq and SubmitTs is not null and Pf_BizNodeName(CurrNode) in ('会计核算部审查','财务部负责人审查','分管财务副总审查',
                	'申请部室负责人审查','申请部室分管副总审查','法律合规部审查','运营管理部审查/归档','运营管理部分管副总审查','决策办委员审查')) t;
        end if;
        
        if vBizCode=24 then # 实施方案审批
        	select group_concat(ProcessedBy) into rst
            from (
            	select distinct ProcessedBy from Pf_A_BizProcRcd 
                where BizSeq=pBizSeq and SubmitTs is not null and Pf_BizNodeName(CurrNode) in ('主任委员意见','董事长意见')) t;
        end if;
        
        if vBizCode=25 then # 印章、证照使用审批
        	select group_concat(ProcessedBy) into rst
            from (
            	select distinct ProcessedBy from Pf_A_BizProcRcd 
                where BizSeq=pBizSeq and SubmitTs is not null and Pf_BizNodeName(CurrNode) in ('部门领导意见','分管部门领导意见','分管合规领导意见','公司领导意见')) t;
        end if;
        
        if vBizCode=26 then # 项目付款审批
        	select group_concat(ProcessedBy) into rst
            from (
            	select distinct ProcessedBy from Pf_A_BizProcRcd 
                where BizSeq=pBizSeq and SubmitTs is not null and Pf_BizNodeName(CurrNode) in ('业务部门负责人审批','业务部门分管副总审批','法律合规部审批',
                	'会计审核','财务部负责人审批','分管财务副总审批','总经理审批')) t;
        end if;
 	end if;

 	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `PsnSel_SpecOrg` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `PsnSel_SpecOrg`(
        `pFlowStartPsn` SMALLINT UNSIGNED,
        `pCurrProcessor` SMALLINT UNSIGNED,
        `pBizSeq` INTEGER UNSIGNED,
        `pPsnSelAttr` TINYINT UNSIGNED,
        `pSpecRoleID` TINYINT UNSIGNED
    ) RETURNS smallint(5) unsigned
    COMMENT '流程选人部件：根据标准选人参数计算返回组织机构选人起点机构ID\r\npFlowStartPsn 流程启动人\r\npCurrProcessor 当前处理人\r\npBizSeq 业务抽象流水\r\npPsnSelAttr 流程选人方式码\r\npSpecRoleID 流程选人指定角色'
BEGIN
 	declare rst smallint unsigned;
 	
 	set rst=0;
 	
 	if pPsnSelAttr in (12,17) then
 		#12-起草人所在单位范围单选
 		#17-起草人所在单位范围多选
 		select Pf_UsrDivisionID(pFlowStartPsn) into rst from dual;
 	end if;
 	
 	if pPsnSelAttr in (13,18) then
 		#13-处理人所在单位范围单选
 		#18-处理人所在单位范围多选
 		select Pf_UsrDivisionID(pCurrProcessor) into rst from dual;
 	end if;
 	
 	if pPsnSelAttr in (14,19) then
 		#14-起草人所在部门范围单选
 		#19-起草人所在部门范围多选
 		select Pf_UsrMainOrgID(pFlowStartPsn) into rst from dual;
 	end if;
 	
 	if pPsnSelAttr in (15,20) then
 		#15-处理人所在部门范围单选
 		#20-处理人所在部门范围多选
 		select Pf_UsrMainOrgID(pCurrProcessor) into rst from dual;
 	end if;
 	
 	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pub_BizDetailReadFlag` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pub_BizDetailReadFlag`(
        `pBizDetailName` VARCHAR(30),
        `pBizDetailSeq` INTEGER UNSIGNED,
        `pUsrID` SMALLINT UNSIGNED
    ) RETURNS char(1) CHARSET utf8
    COMMENT '返回业务明细已读未读标志'
BEGIN
    declare vCnt tinyint unsigned;
    
    select count(*) into vCnt from Pub_A_BizDetailViewTs 
    where BizDetailName=pBizDetailName and BizDetailSeq=pBizDetailSeq and AuthUsrID=pUsrID;
	if vCnt>0 THEN
    	return 'Y';
    else
    	return 'N';
    end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pub_BizViewPwRangeOrg` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pub_BizViewPwRangeOrg`(
        `pBizSeq` INTEGER UNSIGNED
    ) RETURNS varchar(2000) CHARSET utf8
    COMMENT '获取业务分发部门范围名称'
BEGIN
	declare rst varchar(2000);
    
	select IfNull(group_concat(Pf_OrgFullName(OrgUsrID) order by Pf_OrgBigOrd(OrgUsrID) separator '，'),'') into rst
	from Pub_A_BizViewPw
	where BizSeq=pBizSeq and OrgUsrSel='O';
	
	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pub_BizViewPwRangeOrgID` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pub_BizViewPwRangeOrgID`(
        `pBizSeq` INTEGER UNSIGNED
    ) RETURNS varchar(1000) CHARSET utf8
    COMMENT '返回指定业务部门分发范围'
BEGIN
	declare rst varchar(1000);
    
	select IfNull(group_concat(OrgUsrID order by Pf_OrgBigOrd(OrgUsrID)),'') into rst
	from Pub_A_BizViewPw
	where BizSeq=pBizSeq and OrgUsrSel='O';
	
	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pub_BizViewPwRangeUsr` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pub_BizViewPwRangeUsr`(
        `pBizSeq` INTEGER UNSIGNED
    ) RETURNS varchar(2000) CHARSET utf8
    COMMENT '获取业务分发人员范围姓名'
BEGIN
	declare rst varchar(2000);
    
	select IfNull(group_concat(Pf_UsrcName(OrgUsrID) order by concat(Pf_OrgBigOrd(Pf_UsrMainOrgID(OrgUsrID)),'-',Pf_UsrOrdInMainOrg(OrgUsrID)) separator '，'),'') into rst
	from Pub_A_BizViewPw
	where BizSeq=pBizSeq and OrgUsrSel='P';
	
	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pub_BizViewPwRangeUsrID` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pub_BizViewPwRangeUsrID`(
        `pBizSeq` INTEGER UNSIGNED
    ) RETURNS varchar(1000) CHARSET utf8
    COMMENT '获取业务分发人员范围UsrID'
BEGIN
	declare rst varchar(1000);
    
	select IfNull(group_concat(OrgUsrID order by concat(Pf_OrgBigOrd(Pf_UsrMainOrgID(OrgUsrID)),'-',Pf_UsrOrdInMainOrg(OrgUsrID)) ),'') into rst
	from Pub_A_BizViewPw
	where BizSeq=pBizSeq and OrgUsrSel='P';
	
	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Pub_BizViewReadFlag` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Pub_BizViewReadFlag`(
        `pBizSeq` INTEGER UNSIGNED,
        `pUsrID` SMALLINT UNSIGNED
    ) RETURNS char(1) CHARSET utf8
    COMMENT '返回指定发布业务指定人员是否阅读'
BEGIN
    declare vCnt tinyint unsigned;
    
    select count(*) into vCnt from Pub_A_ClosedBizViewTs where BizSeq=pBizSeq and AuthUsrID=pUsrID;
	if vCnt>0 THEN
    	return 'Y';
    else
    	return 'N';
    end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Xj_CqTs` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Xj_CqTs`(
        `pJbCode` TINYINT UNSIGNED,
        `pSqXjTs` DECIMAL(4,1) UNSIGNED,
        `pSjXjTs` DECIMAL(4,1) UNSIGNED,
        `pSjJsRq` DATE,
        `pHzCsRq` DATE
    ) RETURNS decimal(4,1) unsigned
    COMMENT '计算超期休假天数'
BEGIN
 	declare rst decimal(4,1) unsigned;
 	
 	set rst=0.0;
 	if pJbCode=5 then # 哺乳假
 		if pSjJsRq > date_add(pHzCsRq,interval 365 day) then
 			set rst=pSjJsRq - date_add(pHzCsRq,interval 365 day);
 		end if;
 	else
 		if pSjXjTs>pSqXjTs then
 			set rst=pSjXjTs-pSqXjTs;
 		end if;
 	end if;
 	
 	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Xj_KxNjTs` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Xj_KxNjTs`(
        `pUsrID` SMALLINT(5) UNSIGNED
    ) RETURNS tinyint(3) unsigned
    COMMENT '截至目前可休年假天数资格'
BEGIN
	declare rst tinyint unsigned;
    declare vWorkLife tinyint unsigned;
    
    select WorkLifeBeforeEntry+round(DATEDIFF(now(),EntryDate)/365) into vWorkLife from Pf_M_Usr where ID=pUsrID;
    set rst=(case when vWorkLife<10 then 5 else case when vWorkLife<20 then 10 else 15 end end);
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Xj_XjTs` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Xj_XjTs`(
        `pJbTjID` TINYINT UNSIGNED,
        `pKsRq` DATE,
        `pKsRqBtQt` CHAR(1),
        `pJsRq` DATE,
        `pJsRqBtQt` CHAR(1)
    ) RETURNS decimal(4,1) unsigned
    COMMENT '计算指定假别、指定时段休假天数'
BEGIN
 	declare rst DECIMAL(4,1);
 	declare vSfKcGj char(1); #是否扣除公假
 	declare vSfKcFdj char(1); #是否扣除法定假
 	declare dTmp date;
 	declare vCnt tinyint unsigned;
 	declare vIfLegal char(1); #是否法定假
 	declare vQtBt DECIMAL(2,1); #全天-1，半天-0.5
 	
 	select SfKcGj,SfKcFdj into vSfKcGj,vSfKcFdj
 	from Xj_M_Jb
 	where exists(select 1 from Xj_M_JbTj where ID=pJbTjID and JbCode=Xj_M_Jb.Code);
 	
 	if pKsRq=pJsRq then
 		if pKsRqBtQt='Q' then
 			set rst=1;
 		else
 			set rst=0.5;
 		end if;
 	
 		select COUNT(*) into vCnt from Pf_M_PubHoliday where pKsRq between day1 and day2;
 		if vCnt!=0 THEN #落在假日内则进行修正
 			select IfLegal into vIfLegal from Pf_M_PubHoliday where pKsRq between day1 and day2;
 			if (vIfLegal='Y' and vSfKcFdj='Y') or (vIfLegal='N' and vSfKcGj='Y') THEN
 				set rst=0;
 			end if;
 		end if;
 	else #时段
 		set rst=0;
 		set dTmp=pKsRq;
 		while dTmp<=pJsRq do
 			if dTmp=pKsRq or dTmp=pJsRq then
 				if dTmp=pKsRq then
 					#开始日期
 					if pKsRqBtQt='Q' then
 						set vQtBt=1;
 					else
 						set vQtBt=0.5;
 					end if;
 				else
 					#结束日期
 					if pJsRqBtQt='Q' then
 						set vQtBt=1;
 					else
 						set vQtBt=0.5;
 					end if;
 				end if;
 			else
 				#中间日期
 				set vQtBt=1;
 			end if;
 			
 			select COUNT(*) into vCnt from Pf_M_PubHoliday where dTmp between day1 and day2;
 			if vCnt!=0 THEN #落在假日内则进行修正
 				select IfLegal into vIfLegal from Pf_M_PubHoliday where dTmp between day1 and day2;
 				if (vIfLegal='Y' and vSfKcFdj='Y') or (vIfLegal='N' and vSfKcGj='Y') THEN
 					set vQtBt=0;
 				end if;
 			end if;
 			
 			set rst=rst+vQtBt;
 			set dTmp=date_add(dTmp,interval 1 day);
 		end while;
 	end if;
 	
 	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `XmGk_SfGdDir` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `XmGk_SfGdDir`(
        `pDirID` INTEGER(11) UNSIGNED
    ) RETURNS tinyint(3) unsigned
    COMMENT '判断指定项目目录是否是归档保留目录'
BEGIN
    declare rst tinyint unsigned;
    
    select count(*) into rst 
    from ZxBg_M_XmDir
    where ID=pDirID and (FullPathName='项目文件' or exists(
    	select 1 from Pf_M_CharCode 
        where CodeType=26 and concat('项目文件/',Code,'、',Value)=ZxBg_M_XmDir.FullPathName));
  
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `XxFb_IfLeafLm` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `XxFb_IfLeafLm`(
        `pLmID` SMALLINT(5) UNSIGNED
    ) RETURNS char(1) CHARSET utf8
    COMMENT '判断是否叶子栏目'
BEGIN
    declare vCnt tinyint unsigned;
    
    select count(*) into vCnt from XxFb_M_Lm where UpLmID=pLmID;
    if vCnt>0 then
  		return 'N';
    else
    	return 'Y';
    end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `XxFb_IfLm1UnderLm2` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `XxFb_IfLm1UnderLm2`(
        `pLm1ID` SMALLINT(5) UNSIGNED,
        `pLm2ID` SMALLINT(5) UNSIGNED
    ) RETURNS char(1) CHARSET utf8
    COMMENT '判断pLm1ID指向的栏目是否从属pLm2ID指向的栏目'
BEGIN
	if instr(XxFb_LmBigOrd(pLm1ID),XxFb_LmBigOrd(pLm2ID))=1 then
		return 'Y';
	else
		return 'N';
	end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `XxFb_LmBigOrd` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `XxFb_LmBigOrd`(
        `pLmID` SMALLINT(5) UNSIGNED
    ) RETURNS varchar(30) CHARSET utf8
    COMMENT '返回栏目的大排序码'
BEGIN
	declare rst VARCHAR(30);
    
    select BigOrdCode into rst from XxFb_M_Lm where ID=pLmID;
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `XxFb_LmFPNsOfLmIDs` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `XxFb_LmFPNsOfLmIDs`(
        `pLmIDs` VARCHAR(100)
    ) RETURNS varchar(300) CHARSET utf8
    COMMENT '返回栏目全名“，”拼接串'
BEGIN
	declare rst varchar(300);

	select group_concat(FullPathName separator '，') into rst
    from XxFb_M_Lm 
    where FIND_IN_SET(ID,pLmIDs)>0;
      	  
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `XxFb_LmFullPathName` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `XxFb_LmFullPathName`(
        `pLmID` SMALLINT(5) UNSIGNED
    ) RETURNS varchar(100) CHARSET utf8
    COMMENT '返回栏目全路径'
BEGIN
	declare rst varchar(100);
    
    select FullPathName into rst from XxFb_M_Lm where ID=pLmID;
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `XxFb_PlrXm` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `XxFb_PlrXm`(
        `pPlID` INTEGER UNSIGNED
    ) RETURNS varchar(11) CHARSET utf8
    COMMENT '返回发布信息评论记录的评论人姓名'
BEGIN
	declare rst varchar(11);
    
    select concat('@',Pf_UsrcName(PlRyUsrID)) into rst from XxFb_A_Pl where ID=pPlID;
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `XxFb_SfPlGjFj` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `XxFb_SfPlGjFj`(
        `pPlID` INTEGER UNSIGNED
    ) RETURNS char(1) CHARSET utf8
    COMMENT '判断指定评论是否挂接了说明附件'
BEGIN
	declare vCnt tinyint unsigned;
    
    select count(*) into vCnt from Pf_A_AttachInfo where PrimaryID=pPlID and PrimaryName='XxFb_A_Pl' and DelTag='N';
    
    if vCnt>0 then
  		RETURN 'Y';
    else
  		RETURN 'N';
    end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `XxFb_ToBeReplace` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `XxFb_ToBeReplace`(
        `pBizID` INTEGER(11) UNSIGNED
    ) RETURNS varchar(2000) CHARSET utf8
    COMMENT '返回JEECMS导出信息内容中图片路径“|”拼接串'
BEGIN
	declare rst varchar(2000);
    declare vNr MEDIUMTEXT;
    declare p,p1,p2 integer unsigned;
    
    select Nr into vNr from XxFb_A_Zt where ID=pBizID;
    
	set p=1;
    set rst='';
    while LOCATE('src="', vNr, p)>0 do
    	set p1=LOCATE('src="', vNr, p)+5;
        set p2=LOCATE('"', vNr, p1)-1;
        if rst='' then
        	set rst=SUBSTRING(vNr,p1,p2-p1+1);
        else
        	set rst=concat(rst,'|',SUBSTRING(vNr,p1,p2-p1+1));
        end if;
        set p=p2;
    end while;
    
    if rst!='' then
  		return rst;
    else
    	return '-';
    end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `Ys_TxFgLdOfSqr` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `Ys_TxFgLdOfSqr`(
        `pInitUsrID` SMALLINT UNSIGNED
    ) RETURNS smallint(5) unsigned
    COMMENT '根据用户ID获取其所属条线领导ID'
BEGIN
	declare rst smallint(6);
    
    select ifnull(min(UsrID),0) into rst from Pf_M_VerticalOrgLeader a
    where EXISTS(select 1 from Pf_M_DeptDutyPsn
		where Pf_IfOrg1UnderOrg2(Pf_UsrMainOrgID(pInitUsrID),OrgID)='Y' and a.UsrID=UsrID);
        
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `ZdHb_ReadFlag` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `ZdHb_ReadFlag`(
        `pZdID` INTEGER(11) UNSIGNED,
        `pUsrID` SMALLINT(5) UNSIGNED
    ) RETURNS char(1) CHARSET utf8
    COMMENT '判断制度文件是否已读'
BEGIN
	declare vCnt tinyint unsigned;
  	
    select count(*) into vCnt
    from Pf_M_AttachInfo 
    where PrimaryName='ZdHb_M_Zt' and PrimaryID=pZdID and Pf_IfMasterAttachReaded(ID,pUsrID)='Y';
    
	if vCnt>0 then 
		return 'Y'; 
	else 
		return 'N'; 
	End If;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `ZxBg_GdSrcBizID` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `ZxBg_GdSrcBizID`(
        `pFileName` VARCHAR(100)
    ) RETURNS varchar(11) CHARSET utf8
    COMMENT '根据归档文件名返回相应来源应用业务ID'
BEGIN
    declare tmp varchar(100);
    
    if instr(pFileName,'[')>0 then
    	set tmp=replace(pFileName,'[',',');
    	set tmp=replace(tmp,']',',');
  		return Pf_SplitStr(tmp,',',2);
    else
    	return '0';
    end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `ZxBg_HtMc` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `ZxBg_HtMc`(
        `pHtID` INTEGER(11) UNSIGNED
    ) RETURNS varchar(100) CHARSET utf8
    COMMENT '返回合同名称'
BEGIN
	declare rst varchar(100);
    
    if pHtID is null then
    	set rst='-';
    else
    	select HtMc into rst from ZxBg_M_XmHt where ID=pHtID;
    end if;
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `ZxBg_HtScCl` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `ZxBg_HtScCl`(
        `pBizID` INTEGER(11) UNSIGNED
    ) RETURNS varchar(800) CHARSET utf8
    COMMENT '组装合同审查辅助材料文件名串'
BEGIN
	declare rst varchar(800);
    declare vFileName varchar(100);

    declare done INT DEFAULT 0;
    declare cur cursor for 
    	select FileName from Pf_A_AttachInfo
        where PrimaryID=pBizID and PrimaryName = 'ZxBg_A_HtSc' and DelTag='N' 
        order by Seq; 
  	DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;
     
    # >>>
    set rst='';
	
    set done=0;
    open cur;
    fetch cur into vFileName;
    while (done!=1) do
    	set rst=concat(rst,vFileName,char(13),char(10));
        fetch cur into vFileName;
    end while; 
    close cur;
    
    if rst!='' then
    	set rst=trim(TRAILING concat(char(13),char(10)) from rst);
    end if;
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `ZxBg_HtSpCl` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `ZxBg_HtSpCl`(
        `pBizID` INTEGER(11) UNSIGNED
    ) RETURNS varchar(800) CHARSET utf8
    COMMENT '组装合同审批辅助材料文件名串'
BEGIN
	declare rst varchar(800);
    declare vFileName varchar(100);

    declare done INT DEFAULT 0;
    declare cur cursor for 
    	select FileName from Pf_A_AttachInfo
        where PrimaryID=pBizID and PrimaryName = 'ZxBg_A_HtSp' and DelTag='N' 
        order by Seq; 
  	DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;
     
    # >>>
    set rst='';
	
    set done=0;
    open cur;
    fetch cur into vFileName;
    while (done!=1) do
    	set rst=concat(rst,vFileName,char(13),char(10));
        fetch cur into vFileName;
    end while; 
    close cur;
    
    if rst!='' then
    	set rst=trim(TRAILING concat(char(13),char(10)) from rst);
    end if;
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `ZxBg_LsXmHtMc` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `ZxBg_LsXmHtMc`(
        `pHtScID` INTEGER(11) UNSIGNED
    ) RETURNS varchar(100) CHARSET utf8
    COMMENT '返回临时项目合同名称'
BEGIN
	declare rst varchar(100);
    
    select HtMc into rst from ZxBg_A_HtSc where ID=pHtScID;
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `ZxBg_LsXmIDByHtScID` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `ZxBg_LsXmIDByHtScID`(
        `pHtScID` INTEGER(11) UNSIGNED
    ) RETURNS smallint(5) unsigned
    COMMENT '取合同从属临时项目ID'
BEGIN
	declare rst smallint unsigned;
    
    select XmID into rst from ZxBg_A_HtSc where ID=pHtScID;
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `ZxBg_LsXmMc` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `ZxBg_LsXmMc`(
        `pLsXmID` SMALLINT(5) UNSIGNED
    ) RETURNS varchar(100) CHARSET utf8
    COMMENT '返回未正式立项项目名称'
BEGIN
	declare rst varchar(100);
  	
    select XmMc into rst from ZxBg_M_LsXm where ID=pLsXmID;
    RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `ZxBg_QyGsDm` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `ZxBg_QyGsDm`(
        `pQyGsID` TINYINT(3) UNSIGNED
    ) RETURNS varchar(10) CHARSET utf8
    COMMENT '返回签约公司代码'
BEGIN
	declare rst varchar(10);
    
    select Dm into rst from ZxBg_M_QyGs where ID=pQyGsID;
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `ZxBg_QyGsMc` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `ZxBg_QyGsMc`(
        `pQyGsID` TINYINT(3) UNSIGNED
    ) RETURNS varchar(80) CHARSET utf8
    COMMENT '返回签约公司名称'
BEGIN
	declare rst varchar(80);
    
    select Mc into rst from ZxBg_M_QyGs where ID=pQyGsID;
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `ZxBg_XmBh` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `ZxBg_XmBh`(
        `pXmID` SMALLINT(5) UNSIGNED
    ) RETURNS varchar(10) CHARSET utf8
    COMMENT '返回项目编号'
BEGIN
	declare rst varchar(10);
    
    select XmBh into rst from ZxBg_M_XmXx where ID=pXmID;
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `ZxBg_XmIDByHtID` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `ZxBg_XmIDByHtID`(
        `pHtID` INTEGER(11) UNSIGNED
    ) RETURNS smallint(5) unsigned
    COMMENT '取合同从属项目ID'
BEGIN
	declare rst smallint unsigned;
    
    select XmID into rst from ZxBg_M_XmHt where ID=pHtID;
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `ZxBg_XmMc` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `ZxBg_XmMc`(
        `pXmID` SMALLINT(5) UNSIGNED
    ) RETURNS varchar(100) CHARSET utf8
    COMMENT '返回项目名称'
BEGIN
	declare rst varchar(100);
    
    select XmMc into rst from ZxBg_M_XmXx where ID=pXmID;
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `ZxBg_XmScLb` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `ZxBg_XmScLb`(
        `pFileName` VARCHAR(100)
    ) RETURNS char(1) CHARSET utf8
    COMMENT '根据项目审查归档文件名返回文件类别：\r\n1-项目法律合规审查意见表\r\n2-项目风险审查意见表\r\n3-项目财务审查意见表'
BEGIN
	if pFileName REGEXP '^项目审查-项目法律合规审查意见表\\[[1-9]+[0-9]*\\].docx$' then
  		RETURN '1';
    elseif pFileName REGEXP '^项目审查-项目风险审查意见表\\[[1-9]+[0-9]*\\].docx$' then
    	RETURN '2';
    else
    	RETURN '3';
    end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `ZxBg_XmSpLb` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `ZxBg_XmSpLb`(
        `pFileName` VARCHAR(100)
    ) RETURNS char(1) CHARSET utf8
    COMMENT '根据项目审批归档文件名返回文件类别：\r\n1-决策会会议通知\r\n2-项目表决结果表\r\n3-决策会会议纪要'
BEGIN
	if pFileName REGEXP '^决策会会议通知\\[[1-9]+[0-9]*\\].docx$' then
  		RETURN '1';
    elseif pFileName REGEXP '^项目表决结果表\\[[1-9]+[0-9]*\\].docx$' then
    	RETURN '2';
    else
    	RETURN '3';
    end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `ZxBg_XmSpPRD` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `ZxBg_XmSpPRD`(
        `pBizID` INTEGER(11) UNSIGNED,
        `pUsrID` SMALLINT(5) UNSIGNED
    ) RETURNS char(1) CHARSET utf8
    COMMENT '返回指定项目审批指定委员投票值'
BEGIN
	declare rst char(1);
    declare vCnt tinyint unsigned;
    
    select count(*) into vCnt from ZxBg_A_FaSpBj where ZtID=pBizID and BjrID=pUsrID;
    if vCnt=0 then
    	set rst='-';
    else
    	select BjYj into rst from ZxBg_A_FaSpBj where ZtID=pBizID and BjrID=pUsrID;
    end if; 
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `ZxBg_XmZxLb` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `ZxBg_XmZxLb`(
        `pFileName` VARCHAR(100)
    ) RETURNS char(1) CHARSET utf8
    COMMENT '根据项目执行归档文件名返回文件类别：\r\n1-合同审批单\r\n2-印章、证照使用审批单\r\n3-项目付款审批单'
BEGIN
	if pFileName REGEXP '^合同审批单\\[[1-9]+[0-9]*\\].docx$' then
  		RETURN '1';
    elseif pFileName REGEXP '^印章、证照使用审批单\\[[1-9]+[0-9]*\\].docx$' then
    	RETURN '2';
    elseif pFileName REGEXP '^项目付款审批单\\[[1-9]+[0-9]*\\].docx$' then
    	RETURN '3';
    else
    	RETURN '0';
    end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `ZxBg_YyCl` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `ZxBg_YyCl`(
        `pBizID` INTEGER(11) UNSIGNED
    ) RETURNS varchar(800) CHARSET utf8
    COMMENT '组装用印材料文件名串'
BEGIN
	declare rst varchar(800);
    declare vFileName varchar(100);
	declare vYyHtID,vYyHtScID,vYyWjHqID integer(11) unsigned;
    
    declare done INT DEFAULT 0;
    
    declare curHtSp cursor for #合同审批
    	select FileName from Pf_M_AttachInfo
        where DelTag='N' and PrimaryName='ZxBg_M_XmDir' and 
        	exists(select 1 from ZxBg_A_HtSp a,ZxBg_M_XmHt m where m.ID=vYyHtID and m.HtBh=a.HtBh and instr(Pf_M_AttachInfo.FileName,concat('[',a.ID,']'))>0) and
            exists(select 1 from ZxBg_M_XmDir where exists(select 1 from ZxBg_M_XmHt where ZxBg_M_XmDir.XmID=XmID and ID=vYyHtID) and 
            	FullPathName=concat('项目文件/e、',Pf_CodeValueByCharCode(26,'e')) and ID=Pf_M_AttachInfo.PrimaryID)
        order by ID; 
  	
    declare curHtSc cursor for #合同审查
    	select FileName from Pf_A_AttachInfo 
        where ((PrimaryName='ZxBg_A_HtSc_TdPdf' and PrimaryID in 
        	(select Seq from Pf_A_AttachInfo where PrimaryName='ZxBg_A_HtSc' and PrimaryID=vYyHtScID and DelTag='N') and DelTag='N') or (
            PrimaryName='ZxBg_A_HtSc' and PrimaryID=vYyHtScID and DelTag='N' and (FileExt like '.xls%' or FileExt like '.XLS%')
            ))
        order by Seq;
        
    declare curWjHq cursor for #非业务文件会签
    	select FileName from Pf_A_AttachInfo 
        where ((PrimaryName='WjHq_A_Zt1_TdPdf' and PrimaryID in 
        	(select Seq from Pf_A_AttachInfo where PrimaryName='WjHq_A_Zt1' and PrimaryID=vYyWjHqID and DelTag='N') and DelTag='N') or (
            PrimaryName='WjHq_A_Zt1' and PrimaryID=vYyWjHqID and DelTag='N' and (FileExt like '.xls%' or FileExt like '.XLS%')) or (
            PrimaryName='WjHq_A_Zt2' and PrimaryID=vYyWjHqID and DelTag='N'
            )) 
        order by PrimaryName,Seq;
        
    declare curYyXz cursor for #用印新增
    	select FileName from Pf_A_AttachInfo 
        where DelTag='N' and PrimaryName in ('ZxBg_A_YzZzSq_1','ZxBg_A_YzZzSq_2') and PrimaryID=pBizID
        order by PrimaryName,CONVERT(FileName USING GBK);
        
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;
     
    # >>>
    set rst='';
	
    select ifnull(YyHtID,0),ifnull(YyHtScID,0),ifnull(YyWjHqID,0) into vYyHtID,vYyHtScID,vYyWjHqID from ZxBg_A_YzZzSq where ID=pBizID;
    
    if vYyHtID!=0 then
      set done=0;
      open curHtSp;
      fetch curHtSp into vFileName;
      while (done!=1) do
          set rst=concat(rst,vFileName,char(13),char(10));
          fetch curHtSp into vFileName;
      end while; 
      close curHtSp;
    end if;
    
    if vYyHtScID!=0 then
      set done=0;
      open curHtSc;
      fetch curHtSc into vFileName;
      while (done!=1) do
          set rst=concat(rst,vFileName,char(13),char(10));
          fetch curHtSc into vFileName;
      end while; 
      close curHtSc;
    end if;
    
    if vYyWjHqID!=0 then
      set done=0;
      open curWjHq;
      fetch curWjHq into vFileName;
      while (done!=1) do
          set rst=concat(rst,vFileName,char(13),char(10));
          fetch curWjHq into vFileName;
      end while; 
      close curWjHq;
    end if;
    
    set done=0;
    open curYyXz;
    fetch curYyXz into vFileName;
    while (done!=1) do
    	set rst=concat(rst,vFileName,char(13),char(10));
        fetch curYyXz into vFileName;
    end while; 
    close curYyXz;
    
    if rst!='' then
    	set rst=trim(TRAILING concat(char(13),char(10)) from rst);
    end if;
  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `ZxBg_YyHtMc` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` FUNCTION `ZxBg_YyHtMc`(
        `pYyHtID` INTEGER(11) UNSIGNED,
        `pYyHtScID` INTEGER(11) UNSIGNED,
        `pYyWjHqID` INTEGER(11) UNSIGNED
    ) RETURNS varchar(100) CHARSET utf8
    COMMENT '返回用印合同（1、正式立项项目合同；2、未立项项目合同；3、非业务合同）名称'
BEGIN
	declare rst varchar(100);
    
    set rst='-';
    
    if pYyHtID is not null then
    	select HtMc into rst from ZxBg_M_XmHt where ID=pYyHtID;
    end if;

    if pYyHtScID is not null then
    	select HtMc into rst from ZxBg_A_HtSc where ID=pYyHtScID;
    end if;

    if pYyWjHqID is not null then
    	select HtMc into rst from WjHq_A_Zt where ID=pYyWjHqID;
    end if;

  	RETURN rst;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `DsXd_Del` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `DsXd_Del`(
        IN `pDsXdID` INTEGER UNSIGNED
    )
    COMMENT '【读书心得】指定实例删除'
BEGIN
	# 删除索引命令
 	delete from Pf_D_FullIndexCmdList where BizAppName='读书心得' and BizAppID=pDsXdID;
 	delete from Pf_D_IndexContentOfMainText where BizAppName='读书心得' and BizAppID=pDsXdID;
 	delete from Pf_D_IndexContentOfAttach where BizAppName='读书心得' and BizAppID=pDsXdID;
 
 	#删除主体
 	delete from Dsj_A_Xd where ID=pDsXdID;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `Engine_InitBizFlow` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `Engine_InitBizFlow`(
        IN `pBizCode` TINYINT UNSIGNED,
        IN `pBizID` INTEGER UNSIGNED,
        IN `pBizTitle` VARCHAR(100),
        IN `pFlowDefID` TINYINT UNSIGNED,
        IN `pInitNode` SMALLINT UNSIGNED,
        IN `pInitDealer` SMALLINT UNSIGNED,
        OUT `vToDoWorkItem` INTEGER UNSIGNED
    )
    COMMENT '流程引擎部件：流程初始化过程'
BEGIN
	declare vDefaultTimeLimit tinyint unsigned;
 	declare vNowTs datetime;
 	declare vBizSeq int unsigned; #抽象业务流水
 
	#获取要求处理环节的默认处理时限
 	select ProcTimeLimit into vDefaultTimeLimit from Pf_M_BizNode where ID=pInitNode; 
 
	set vNowTs=now();
 
	insert into Pf_A_Biz values (vNowTs,null,pBizCode,pBizID,pBizTitle,pInitDealer,null,null,pFlowDefID,pInitNode,Pf_UsrcName(pInitDealer),'N');
	set vBizSeq=@@identity;
	
    insert into Pf_A_BizProcRcd values (vNowTs,null,vBizSeq,pInitDealer,Pf_OrgFullName(Pf_UsrMainOrgID(pInitDealer)),0,
    	vNowTs,pInitNode,null,null,null,0,0,vDefaultTimeLimit,'0');
	set vToDoWorkItem=@@identity;
	
    insert into Pf_D_ToDoLink values (vToDoWorkItem,vBizSeq,pInitDealer,0,vNowTs,pInitNode,vDefaultTimeLimit);
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `Engine_RedrawBizFlowWI` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `Engine_RedrawBizFlowWI`(
        IN `pSubmittedWorkItem` INTEGER UNSIGNED
    )
    COMMENT '流程引擎部件：撤回指定已办工作项'
BodyLabel:
BEGIN
	declare vBizSeq int unsigned; 
	declare vSubmitTs,vArrivedTs datetime; 
	declare vCurrNode smallint; #提交前业务节点
	
	declare vSrcWorkItems varchar(200); #参数工作项来源工作项s
	declare vNode1TzSys2,vNode1TzSys3 char(1); #参数工作项处理节点 并发内部路径特征、抢占特征
	declare vNextNode smallint; #撤回前/提交后业务节点
	declare vCase1Cnt,vCase1HandledCnt,vCase2HandledCnt tinyint unsigned;
	
    #2017-06-16 +
    declare vActionID smallint unsigned; #撤回工作项已执行的分支ID
    
	#>>>
	select BizSeq, SubmitTs, CurrNode,ArrivedTs,SrcWorkItems,ActionID 
    into vBizSeq, vSubmitTs, vCurrNode,vArrivedTs,vSrcWorkItems,vActionID
	from Pf_A_BizProcRcd
	where WorkItem=pSubmittedWorkItem;
	
	select FlowStatus into vNextNode from Pf_A_Biz where Seq=vBizSeq;
	
	select substr(TzSys,2,1),substr(TzSys,3,1) into vNode1TzSys2,vNode1TzSys3 from Pf_M_BizNode where ID=vCurrNode;
	
	select count(*) into vCase1Cnt 
	from Pf_A_BizProcRcd 
	where BizSeq=vBizSeq and ArrivedTs=vSubmitTs; 
	
	if vCase1Cnt>0 then #1
		#1、存在因参数工作项的提交生成的处理记录
		select count(*) into vCase1HandledCnt 
		from Pf_A_BizProcRcd 
		where BizSeq=vBizSeq and ArrivedTs=vSubmitTs and (ProcNote is not null or SubmitTs is not null);
		
		if vCase1HandledCnt>0 then #1.1
			#因参数工作项的提交生成的处理记录中，有已处理的
			call EngSub_RedrawBizFlowWI_err1(); #因参数工作项的提交生成的处理记录中，有已处理的，当下工作项已不能撤回！
			leave BodyLabel;
		else
			#情形1的撤回
			delete from Pf_D_ToDoLink #删除因参数工作项的提交生成的待办入口
			where BizSeq=vBizSeq and ArrivedTs=vSubmitTs;
			
			if vNode1TzSys2='S' and vCurrNode=vNextNode then #1.1.1
				#多人顺序处理还没出来
				update Pf_A_BizProcRcd set ArrivedTs=vArrivedTs where BizSeq=vBizSeq and ArrivedTs=vSubmitTs;
			else
				delete from Pf_A_BizProcRcd #删除因参数工作项的提交生成的待处理记录
				where BizSeq=vBizSeq and ArrivedTs=vSubmitTs;
			end if; #1.1.1
			
			update Pf_A_BizProcRcd #恢复参数工作项为未提交状态
			set ActionID=null,SubmitTs=null
			where WorkItem=pSubmittedWorkItem;
			
			insert into Pf_D_ToDoLink #恢复参数工作项的待办入口
			select WorkItem,BizSeq,ProcessedBy,pGrantedBy,ArrivedTs,CurrNode,ProcTimeLimit
			from Pf_A_BizProcRcd
			where WorkItem=pSubmittedWorkItem;
			
			if vNode1TzSys2='C' and vNode1TzSys3='Y' then 
				#单层&抢占情况下，还得恢复没抢占成功的其他同仁的待办入口
				insert into Pf_D_ToDoLink
				select WorkItem,BizSeq,ProcessedBy,pGrantedBy,ArrivedTs,CurrNode,ProcTimeLimit
				from Pf_A_BizProcRcd
				where WorkItem!=pSubmittedWorkItem and SrcWorkItems=vSrcWorkItems;
			end if;
			
			if vNode1TzSys2='T' then 
				#投票模式下，还得恢复被剥夺投票机会的其他同仁的待办入口
				insert into Pf_D_ToDoLink
				select WorkItem,BizSeq,ProcessedBy,pGrantedBy,ArrivedTs,CurrNode,ProcTimeLimit
				from Pf_A_BizProcRcd
				where WorkItem!=pSubmittedWorkItem and SrcWorkItems=vSrcWorkItems and ArrivedTs=vArrivedTs and SubmitTs is null;
			end if;
			
			call EngSub_RedrawBizFlowWIPost(vBizSeq,vCurrNode,vNextNode,vActionID);
			leave BodyLabel;
		end if; #1.1
	end if; #1
	
	#2、不存在因参数工作项的提交生成的处理记录（非抢占普通并发环节反馈：那么看看有无同仁在这之后提交了处理；从投票环节提交流程结束/投票未结束。）
	select count(*) into vCase2HandledCnt
	from Pf_A_BizProcRcd
	where BizSeq=vBizSeq and SubmitTs>vSubmitTs;
	
	if vCase2HandledCnt>0 then
		#有同仁在参数工作项提交之后也提交了他/她的处理。应理解为该同仁看了参数工作项提交的内容后作出的决定，这种情况下应认定参数工作项不能撤回
		call EngSub_RedrawBizFlowWI_err2(); #有同仁在参数工作项提交之后也提交了他/她的处理。当下工作项已不能撤回！ 
	else
		#情形2的撤回
		update Pf_A_BizProcRcd #恢复参数工作项为未提交状态
		set ActionID=null,SubmitTs=null
		where WorkItem=pSubmittedWorkItem;
		
		insert into Pf_D_ToDoLink #恢复参数工作项的待办入口
		select WorkItem,BizSeq,ProcessedBy,pGrantedBy,ArrivedTs,CurrNode,ProcTimeLimit
		from Pf_A_BizProcRcd
		where WorkItem=pSubmittedWorkItem;
		
		If vNode1TzSys2='T' Then #2011-08-10 增加整段
			#如果投票结束，还得恢复被剥夺投票机会的其他同仁的待办入口
			insert into Pf_D_ToDoLink
			select WorkItem,BizSeq,ProcessedBy,pGrantedBy,ArrivedTs,CurrNode,ProcTimeLimit
			From Pf_A_BizProcRcd
			Where WorkItem!=pSubmittedWorkItem And SrcWorkItems=vSrcWorkItems And ArrivedTs=vArrivedTs And Submitts is null And 
				not exists(select 1 from Pf_D_ToDoLink where ToDoWorkItem=Pf_A_BizProcRcd.WorkItem); # 投票未结束无需恢复
		end if;
	end if;
	
	call EngSub_RedrawBizFlowWIPost(vBizSeq,vCurrNode,vNextNode,vActionID);
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `Engine_SaveBizProcNote` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `Engine_SaveBizProcNote`(
        IN `pToDoWorkItem` INTEGER UNSIGNED,
        IN `pProcNote` VARCHAR(400)
    )
    COMMENT '流程引擎部件：处理意见保存'
label1:
BEGIN
	declare vCnt tinyint unsigned;
    
    #防止已经处理过的业务记录再次处理
    select count(*) into vCnt from Pf_D_ToDoLink where ToDoWorkItem=pToDoWorkItem;
    if vCnt=0 then  #已处理过了
    	leave label1;
    end if;
    
    update Pf_A_BizProcRcd set ProcNote=pProcNote where WorkItem=pToDoWorkItem;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `Engine_SubmitBizFlowBranch` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `Engine_SubmitBizFlowBranch`(
        IN `pToDoWorkItem` INTEGER UNSIGNED,
        IN `pNewBizFlowID` SMALLINT UNSIGNED,
        IN `pActionID` SMALLINT UNSIGNED,
        IN `pNextDealers` VARCHAR(1000),
        IN `pNextNodeTimeLimit` TINYINT UNSIGNED,
        OUT `vBizNodeID2` SMALLINT
    )
    COMMENT '流程引擎部件：流程驱动'
BodyLabel:
BEGIN
	declare vCnt tinyint unsigned;	#临时判断计数
    declare vSysDate datetime;		#多人处理时需要统一待办到达时间
    declare vRecDivTs date;			#业务主体时间戳
  
    declare vBizCode tinyint unsigned;			#业务编码
    declare vBizSeq	int unsigned;				#业务流水
    declare vCurrDealer smallint unsigned;		#当前处理人
    declare vCurrNode smallint;					#当前工作项处理环节
    declare vDefaultTimeLimit tinyint unsigned;	#要求处理环节默认时限
    declare vNode1TzSys2 char(1);				#当前处理环节系统特征字2-并发内部路径特征
    declare vNode1TzSys3 char(1);				#当前处理环节系统特征字3-并发抢占特征
    declare vNode1PassRate tinyint unsigned;	#当前处理环节最少投票通过比例（投票环节）
    
    declare vArrivedTs datetime;						#当前处理工作项的待办到达时间
    declare vCurrProcessorGrantor smallint unsigned;	#当前环节处理人授权人
    declare vNode1SrcWorkItems varchar(200);			#当前处理工作项的来源工作项

    declare vPsnSelAttr tinyint unsigned;	#分支的下一步处理人选取方式码
    declare vSpecNodeID smallint;			#分支的下一步处理人选人节点参数
    declare vPassReject char(1);			#分支的投票方向
    
    declare vNode2TzSys1 char(1);		#目标去向环节系统特征字1-节点位置
    declare vNode2TzSys2 char(1);		#目标去向环节系统特征字2-并发内部路径特征

    declare vNextDealers varchar(1000);				#入口参数pNextDealers的拷贝，约160人
    declare vNextDealer smallint unsigned;			#目标环节处理人
    declare vNextDealerGrantor smallint unsigned;	#目标环节处理人授权人

    declare vLoop tinyint unsigned;					#提交多人顺序处理时只生成第一个人的待办入口
    
    declare vNode2SrcPsn smallint unsigned;			#待生成处理记录的办理来源人
    declare vNode2SrcPsnGrantFrom smallint unsigned;#待生成处理记录的办理来源人授权人
    declare vNode2SrcWorkItems varchar(200);		#待生成处理记录的办理来源工作项
    declare vNode1SrcNode smallint;					#当前处理办理来源工作项处理节点
  
    declare vPassedCnt tinyint unsigned;	#投票通过计数
    
    declare vWI integer unsigned;			#工作项ID

    declare vNode0CreatedBy smallint;			#当前处理节点前驱节点办理来源
    declare vNode0cGrantedBy smallint unsigned;	#当前处理节点前驱节点办理来源授权人
    declare vNode0SrcWorkItems varchar(200);	#当前处理节点前驱节点来源工作项

    declare vAnsweredCnt tinyint unsigned;	#已反馈计数
    declare vRejectedCnt tinyint unsigned;	#投票反对计数

	#>>>
    
    set vSysDate=now();
    set vNextDealers=pNextDealers;
  
    #防止已经处理过的业务记录再次处理
    select count(*) 
    into vCnt 
    from Pf_D_ToDoLink 
    where ToDoWorkItem=pToDoWorkItem;
    if vCnt=0 then	#已处理过了
      leave BodyLabel;
    end if;
  
    #取当前工作项的业务码、业务流水、当前处理环节、待办到达时间、处理人授权人、来源工作项、业务时间戳
    select Pf_BizCodeByBizNodeID(CurrNode),BizSeq,ProcessedBy,CurrNode,ArrivedTs,pGrantedBy,SrcWorkItems,RecDivTag 
    into vBizCode,vBizSeq,vCurrDealer,vCurrNode,vArrivedTs,vCurrProcessorGrantor,vNode1SrcWorkItems,vRecDivTs 
    from Pf_A_BizProcRcd 
    where WorkItem=pToDoWorkItem;

    #获取要求处理环节的默认处理时限，环节系统特征字2-并发内部路径特征，最少投票通过比例
    select ProcTimeLimit,substr(TzSys,2,1),substr(TzSys,3,1),PassRate 
    into vDefaultTimeLimit,vNode1TzSys2,vNode1TzSys3,vNode1PassRate 
    from Pf_M_BizNode 
    where ID=vCurrNode;
  
    #检查分支与主体最新配置流程是否匹配
    select count(*) 
    into vCnt 
    from Pf_M_BizFlowBranch 
    where ID=pActionID and BizFlowID=pNewBizFlowID;
    if vCnt=0 then  #不匹配
      call Engine_SubmitBizFlowBranch_err1();	#提交的分支动作与流程不匹配，请先保存业务主体再选择分支动作提交！
      leave BodyLabel;
    end if;

	select BizNodeID2,PsnSelAttr,SpecNodeID,PassReject 
    into vBizNodeID2,vPsnSelAttr,vSpecNodeID,vPassReject 
    from Pf_M_BizFlowBranch 
    where ID=pActionID;
	
    #分支选人方式码2、4情况下，需要引擎提供vNextDealers
    if vPsnSelAttr=2 then  #下一节点处理人是指定节点环节处理人  
    	select EngSub_SpecNodePsnIDs(vBizSeq,vSpecNodeID) 
        into vNextDealers 
        from dual;
      	if vNextDealers='-' then
        	call Engine_SubmitBizFlowBranch_err2();	#流程配置错误：指定环节还没经过，请检查流程环节顺序！
            leave BodyLabel;
      	end if;
    end if;

    if vPsnSelAttr=4 then  #下一步动作人同上一环节动作人
    	select EngSub_SrcNodePsnIDs(vNode1SrcWorkItems) 
        into vNextDealers 
        from dual;
      	if vNextDealers='-' then
        	call Engine_SubmitBizFlowBranch_err3();	#流程配置错误：当前处理环节不存在办理来源，请检查流程环节顺序！
            leave BodyLabel;
      	end if;
    end if;
    
    if vBizNodeID2>0 then  #分支目标明确
    	#取目标去向环节系统特征字1-节点位置、特征字2-并发内部路径特征
        select substr(TzSys,1,1),substr(TzSys,2,1) 
        into vNode2TzSys1,vNode2TzSys2 
        from Pf_M_BizNode 
        where ID=vBizNodeID2;
        
        if vNode2TzSys1='E' then  #目标是结束环节
        	#删除其他待办入口
            if vNode1SrcWorkItems!='0' then
            	call EngSub_DelToDoLink(vNode1SrcWorkItems,pToDoWorkItem);
            end if;
            
            call EngSub_SubmitBizFlowBranchPost(pActionID,vSysDate,pToDoWorkItem,vBizSeq,vCurrNode,vBizNodeID2,vBizCode);
            leave BodyLabel;
        end if;
        
        if vNode2TzSys2='-' and instr(vNextDealers,',')!=0 then  #目标是单人处理环节
        	call Engine_SubmitBizFlowBranch_err4();	#流程配置错误：注意分支动作提交后的节点是单人处理环节！
            leave BodyLabel;
        end if;
        
        if vPassReject='' then
        	#当前处理节点非投票模式Begin
            
            if vNode2TzSys2='-' then  
            	#目标环节为单人处理
            	set vNextDealer=convert(vNextDealers,unsigned integer);
                #解析等待处理人的代办关系
                call EngSub_GrantRelation(vBizCode,vNextDealer,vNextDealerGrantor);
                #增加处理记录、待办入口
                insert into Pf_A_BizProcRcd values (vRecdivTs,null,vBizSeq,vNextDealer,Pf_OrgFullName(Pf_UsrMainOrgID(vNextDealer)),vNextDealerGrantor,
                	vSysDate,vBizNodeID2,null,null,null,vCurrDealer,vCurrProcessorGrantor,coalesce(pNextNodeTimeLimit,0),concat('',pToDoWorkItem));
    			insert into Pf_D_ToDoLink values (@@identity,vBizSeq,vNextDealer,vNextDealerGrantor,vSysDate,vBizNodeID2,coalesce(pNextNodeTimeLimit,0));
                call EngSub_SubmitBizFlowBranchPost(pActionID,vSysDate,pToDoWorkItem,vBizSeq,vCurrNode,vBizNodeID2,vBizCode);
            	leave BodyLabel;
            end if;
            
            #目标环节为多人处理
            set vCnt=Pf_SplitStrCnt(vNextDealers,',');
            set vLoop=1;
            
            LoopLable1:
            Loop
            	if vLoop>vCnt then
                	LEAVE LoopLable1;
                else
                	set vNextDealer=convert(Pf_SplitStr(vNextDealers,',',vLoop),unsigned integer);
                    #解析等待处理人的代办关系
                    call EngSub_GrantRelation(vBizCode,vNextDealer,vNextDealerGrantor);
                    
                    #区分Node2并发模式，计算[办理来源人]和[办理来源工作项]
                    if vNode2TzSys2 in ('S','C','A','T') or (vNode2TzSys2 in ('Z','M') and vCurrNode!=vBizNodeID2) then
                    	select vCurrDealer,vCurrProcessorGrantor,concat('',pToDoWorkItem) into vNode2SrcPsn,vNode2SrcPsnGrantFrom,vNode2SrcWorkItems from dual;
                    else
                    	#目标环节Z/M、内部人拉人
                        if vNode2TzSys2='Z' then  #全转发模式下，大家是同一个来源
                        	select ProcessedBy,pGrantedBy into vNode2SrcPsn,vNode2SrcPsnGrantFrom from Pf_A_BizProcRcd where WorkItem=convert(vNode1SrcWorkItems,unsigned integer);
                            set vNode2SrcWorkItems=vNode1SrcWorkItems;
                        else
                        	#取当前处理工作项的来源工作项处理节点
                            select CurrNode into vNode1SrcNode from Pf_A_BizProcRcd where WorkItem=convert(vNode1SrcWorkItems,unsigned integer);
                            if vNode1SrcNode!=vCurrNode then  #当前处理在1层
                            	select vCurrDealer,vCurrProcessorGrantor,concat('',pToDoWorkItem) into vNode2SrcPsn,vNode2SrcPsnGrantFrom,vNode2SrcWorkItems from dual;
                        	else  #当前处理不在1层
                            	#当前处理来源是下一处理人工作项来源
                                select ProcessedBy,pGrantedBy into vNode2SrcPsn,vNode2SrcPsnGrantFrom from Pf_A_BizProcRcd where WorkItem=convert(vNode1SrcWorkItems,unsigned integer);
                                set vNode2SrcWorkItems=vNode1SrcWorkItems;
                            end if;
                        end if;
                    end if;
                    
                    insert into Pf_A_BizProcRcd values (vRecdivTs,null,vBizSeq,vNextDealer,Pf_OrgFullName(Pf_UsrMainOrgID(vNextDealer)),vNextDealerGrantor,
                    	vSysDate,vBizNodeID2,null,null,null,vNode2SrcPsn,vNode2SrcPsnGrantFrom,coalesce(pNextNodeTimeLimit,0),vNode2SrcWorkItems);
                    if vNode2TzSys2!='S' or (vNode2TzSys2='S' and vLoop=1) then
                    	insert into Pf_D_ToDoLink values (@@identity,vBizSeq,vNextDealer,vNextDealerGrantor,vSysDate,vBizNodeID2,coalesce(pNextNodeTimeLimit,0));
                    end if;
                        
                	set vLoop=vLoop+1;
                end if;
            END LOOP LoopLable1;
            call EngSub_SubmitBizFlowBranchPost(pActionID,vSysDate,pToDoWorkItem,vBizSeq,vCurrNode,vBizNodeID2,vBizCode);
            leave BodyLabel;
        	#当前处理节点非投票模式End
        else
        	#当前处理节点是投票模式，分支是同意Begin
            
            #投票参与人数
            select count(*) into vCnt from Pf_A_BizProcRcd where SrcWorkItems=vNode1SrcWorkItems and ArrivedTs=vArrivedTs;
            #其他已同意人数
            select count(*) into vPassedCnt from Pf_A_BizProcRcd where SrcWorkItems=vNode1SrcWorkItems and ArrivedTs=vArrivedTs and ActionID=pActionID;
            
            if (vPassedCnt+1)*100/vCnt>=vNode1PassRate then
            	set vNextDealer=convert(vNextDealers,unsigned integer);
                
                #解析等待处理人的代办关系
                call EngSub_GrantRelation(vBizCode,vNextDealer,vNextDealerGrantor);
                
                #计算投票通过后Node2办理来源工作项集合
                select group_concat(WorkItem) into vNode2SrcWorkItems from Pf_A_BizProcRcd where ArrivedTs=vArrivedTs and SrcWorkItems=vNode1SrcWorkItems order by WorkItem;
                
                #生成通过后Node2处理记录与待办入口
                insert into Pf_A_BizProcRcd values (vRecdivTs,null,vBizSeq,vNextDealer,Pf_OrgFullName(Pf_UsrMainOrgID(vNextDealer)),vNextDealerGrantor,
                	vSysDate,vBizNodeID2,null,null,null,-2,0,coalesce(pNextNodeTimeLimit,0),vNode2SrcWorkItems);
                insert into Pf_D_ToDoLink values (@@identity,vBizSeq,vNextDealer,vNextDealerGrantor,vSysDate,vBizNodeID2,coalesce(pNextNodeTimeLimit,0));
                
                #删除其他没表态待办入口
                call EngSub_DelToDoLink(vNode1SrcWorkItems,pToDoWorkItem);
            else
            	#不够通过投票数，则维持状态不变
                set vBizNodeID2=vCurrNode;
            end if;
            
            call EngSub_SubmitBizFlowBranchPost(pActionID,vSysDate,pToDoWorkItem,vBizSeq,vCurrNode,vBizNodeID2,vBizCode);
            leave BodyLabel;
            #当前处理节点是投票模式，分支是同意END
        end if;
    end if;  #分支目标明确END
	
    if vBizNodeID2=-1 then  #目标是上一环节
    	set vCnt=Pf_SplitStrCnt(vNode1SrcWorkItems,',');
        set vLoop=1;

        LoopLable2:
        Loop
            if vLoop>vCnt then
                LEAVE LoopLable2;
            else
            	select ProcessedBy,CurrNode,CreatedBy,cGrantedBy,SrcWorkItems
                into vNextDealer,vBizNodeID2,vNode0CreatedBy,vNode0cGrantedBy,vNode0SrcWorkItems
                from Pf_A_BizProcRcd
                where WorkItem=convert(Pf_SplitStr(vNode1SrcWorkItems,',',vLoop),unsigned integer);
                
                #解析等待处理人的代办关系
                call EngSub_GrantRelation(vBizCode,vNextDealer,vNextDealerGrantor);

                insert into Pf_A_BizProcRcd values (vRecdivTs,null,vBizSeq,vNextDealer,Pf_OrgFullName(Pf_UsrMainOrgID(vNextDealer)),vNextDealerGrantor,
                	vSysDate,vBizNodeID2,null,null,null,vNode0CreatedBy,vNode0cGrantedBy,coalesce(pNextNodeTimeLimit,0),vNode0SrcWorkItems);
                insert into Pf_D_ToDoLink values (@@identity,vBizSeq,vNextDealer,vNextDealerGrantor,vSysDate,vBizNodeID2,coalesce(pNextNodeTimeLimit,0));
                
                set vLoop=vLoop+1;
            end if;
        END LOOP LoopLable2;

        call EngSub_SubmitBizFlowBranchPost(pActionID,vSysDate,pToDoWorkItem,vBizSeq,vCurrNode,vBizNodeID2,vBizCode);
        leave BodyLabel;
    end if;	#目标是上一环节END
    
    if vBizNodeID2=0 then  #目标环节待计算
    	if vNode1TzSys2='S' then  #多人顺序Begin
        	select count(*) into vCnt from Pf_A_BizProcRcd where SrcWorkItems=vNode1SrcWorkItems and coalesce(ActionID,0)=0 and WorkItem!=pToDoWorkItem;
            if vCnt>0 then
            	#后面还有顺序处理人，改他/她们的待办到达时间
                update Pf_A_BizProcRcd set ArrivedTs=vSysDate where SrcWorkItems=vNode1SrcWorkItems and WorkItem>pToDoWorkItem;
                #取按顺序的下一工作项
                select min(WorkItem) into vWI from Pf_A_BizProcRcd where SrcWorkItems=vNode1SrcWorkItems and WorkItem>pToDoWorkItem;
                #取按顺序的下一工作项的[处理人、处理人授权人、处理环节]
                select ProcessedBy,pGrantedBy,CurrNode into vNextDealer,vNextDealerGrantor,vBizNodeID2
                from Pf_A_BizProcRcd where WorkItem=vWI;
                #生成下一位的待办入口
                insert into Pf_D_ToDoLink values (vWI,vBizSeq,vNextDealer,vNextDealerGrantor,vSysDate,vBizNodeID2,coalesce(pNextNodeTimeLimit,0));
            else
            	#当前处理人是最后一位，生成当前处理环节的前驱发起环节的待办
                call EngSub_GenNode0ProcRcd(vNode1SrcWorkItems,vBizCode,vBizSeq,vSysDate,pNextNodeTimeLimit,vRecDivTs,vBizNodeID2);
            end if;
            
            call EngSub_SubmitBizFlowBranchPost(pActionID,vSysDate,pToDoWorkItem,vBizSeq,vCurrNode,vBizNodeID2,vBizCode);
            leave BodyLabel;
        end if;	#多人顺序End
        
        if vNode1TzSys2='C' then  #单层并发Begin
        	if vNode1TzSys3='Y' then	#抢占
            	#删除他人待办入口
            	call EngSub_DelToDoLink(vNode1SrcWorkItems,pToDoWorkItem);
                
                #生成当前处理环节的前驱发起环节的待办
                call EngSub_GenNode0ProcRcd(vNode1SrcWorkItems,vBizCode,vBizSeq,vSysDate,pNextNodeTimeLimit,vRecDivTs,vBizNodeID2);
            else	#不抢占
            	#参与人数
                select count(*) into vCnt from Pf_A_BizProcRcd where SrcWorkItems=vNode1SrcWorkItems;
                #其他已反馈人数
                select count(*) into vAnsweredCnt from Pf_A_BizProcRcd where SrcWorkItems=vNode1SrcWorkItems and ActionID=pActionID;
                
                #没反馈全，停在当前处理环节
                set vBizNodeID2=vCurrNode;
                
                if vCnt=vAnsweredCnt+1 then  #全部已反馈
                	#生成当前处理环节的前驱发起环节的待办
                    call EngSub_GenNode0ProcRcd(vNode1SrcWorkItems,vBizCode,vBizSeq,vSysDate,pNextNodeTimeLimit,vRecDivTs,vBizNodeID2);
                end if;
            end if;
            
            call EngSub_SubmitBizFlowBranchPost(pActionID,vSysDate,pToDoWorkItem,vBizSeq,vCurrNode,vBizNodeID2,vBizCode);
            leave BodyLabel;
        end if; #单层并发End
        
        if vNode1TzSys2 in ('A','Z','M') then  #全询问，全转发，询问+转发Begin
        	#来源为vNode1SrcWorkItems的工作项总数
            select EngSub_WICntSrcFrom(vNode1SrcWorkItems) into vCnt from dual;
            #来源为vNode1SrcWorkItems的工作项已提交数
            select EngSub_WISubmitCntSrcFrom(vNode1SrcWorkItems) into vAnsweredCnt from dual;
            #没反馈全，停在当前处理环节
            set vBizNodeID2=vCurrNode;
            
            if vCnt=vAnsweredCnt+1 then  #全部已反馈
            	#生成当前处理环节的前驱发起环节的待办
                call EngSub_GenNode0ProcRcd(vNode1SrcWorkItems,vBizCode,vBizSeq,vSysDate,pNextNodeTimeLimit,vRecDivTs,vBizNodeID2);
            end if;
            
            call EngSub_SubmitBizFlowBranchPost(pActionID,vSysDate,pToDoWorkItem,vBizSeq,vCurrNode,vBizNodeID2,vBizCode);
            leave BodyLabel;
        end if; #全询问，全转发，询问+转发End
        
        if vNode1TzSys2='T' then  #投票环节Begin
        	#投票参与人数
            select count(*) into vCnt from Pf_A_BizProcRcd where SrcWorkItems=vNode1SrcWorkItems and ArrivedTs=vArrivedTs;
            #其他已表态反对人数
            select count(*) into vRejectedCnt from Pf_A_BizProcRcd where SrcWorkItems=vNode1SrcWorkItems and ArrivedTs=vArrivedTs and ActionID=pActionID;
            #没反馈全，停在当前处理环节
            set vBizNodeID2=vCurrNode;
            
            if (vRejectedCnt+1)*100/vCnt>(100-vNode1PassRate) then  #投反对票超过(100-最少投票通过比例)
            	#生成当前处理环节的前驱发起环节的待办
                call EngSub_GenNode0ProcRcd(vNode1SrcWorkItems,vBizCode,vBizSeq,vSysDate,pNextNodeTimeLimit,vRecDivTs,vBizNodeID2);
                
                #删除其他没表态待办入口
                call EngSub_DelToDoLink(vNode1SrcWorkItems,pToDoWorkItem);
            end if;	#当前提交反对造成：投反对票超过(100-最少投票通过比例)
                
			call EngSub_SubmitBizFlowBranchPost(pActionID,vSysDate,pToDoWorkItem,vBizSeq,vCurrNode,vBizNodeID2,vBizCode);
        end if; #投票环节End
    end if;  #目标环节待计算END
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `EngSub_DelToDoLink` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `EngSub_DelToDoLink`(
        IN `pNode1SrcWorkItems` VARCHAR(200),
        IN `pToDoWorkItem` INTEGER(12) UNSIGNED
    )
    COMMENT '优化待办链接删除逻辑，避免表锁'
BEGIN
	declare vToDoLinkToBeDeleted integer unsigned;
	declare done tinyint default 0;
	declare c_ToDoLinkToBeDeleted cursor for 
    	select WorkItem 
        from Pf_A_BizProcRcd 
        where SrcWorkItems=pNode1SrcWorkItems and WorkItem!=pToDoWorkItem;
	declare CONTINUE HANDLER FOR NOT FOUND SET done = 1;
       			
    set done=0;
    open c_ToDoLinkToBeDeleted;
    fetch c_ToDoLinkToBeDeleted into vToDoLinkToBeDeleted;
    while (done!=1) do
    	set @sqlstmt=concat('delete from Pf_D_ToDoLink where ToDoWorkItem=',cast(vToDoLinkToBeDeleted as char));
    	PREPARE stmt FROM @sqlstmt;
    	EXECUTE stmt;
		DEALLOCATE PREPARE stmt;
    	fetch c_ToDoLinkToBeDeleted into vToDoLinkToBeDeleted;
    end while;
    close c_ToDoLinkToBeDeleted;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `EngSub_GenNode0ProcRcd` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `EngSub_GenNode0ProcRcd`(
        IN `pNode1SrcWorkItem` VARCHAR(200),
        IN `pBizCode` TINYINT UNSIGNED,
        IN `pBizSeq` INTEGER UNSIGNED,
        IN `pSysDate` DATETIME,
        IN `pTimeLimit` TINYINT UNSIGNED,
        IN `pRecDivTs` DATETIME,
        INOUT `pNodeID2` SMALLINT
    )
    COMMENT '流程引擎部件：生成当前处理环节的前驱发起环节的待办，并置值驱动后的节点'
BEGIN
	declare vNextDealer smallint unsigned;			#将要生成的待办环节处理人 
    declare vNextDealerGrantor smallint unsigned;	#将要生成的待办环节处理授权人
    declare vNodeID2 smallint;						#将要生成的待办环节
    declare vNode0CreatedBy smallint;				#将要生成的待办环节办理来源人（历史拷贝）
    declare vNode0cGrantedBy smallint unsigned;		#将要生成的待办环节办理来源授权人（历史拷贝）
    declare vNode0SrcWorkItems varchar(200);		#将要生成的待办环节的办理来源工作项集合（历史拷贝）
    
    select ProcessedBy,CurrNode,CreatedBy,cGrantedBy,SrcWorkItems 
    into vNextDealer,pNodeID2,vNode0CreatedBy,vNode0cGrantedBy,vNode0SrcWorkItems   
    from Pf_A_BizProcRcd                                                                                                                                   
    where WorkItem=convert(pNode1SrcWorkItem,unsigned integer);  
    
    #解析等待处理人的代办关系
    call EngSub_GrantRelation(pBizCode,vNextDealer,vNextDealerGrantor);
    
    insert into Pf_A_BizProcRcd values (pRecDivTs,null,pBizSeq,vNextDealer,Pf_OrgFullName(Pf_UsrMainOrgID(vNextDealer)),vNextDealerGrantor,
    	pSysDate,pNodeID2,null,null,null,vNode0CreatedBy,vNode0cGrantedBy,coalesce(pTimeLimit,0),vNode0SrcWorkItems);
    insert into Pf_D_ToDoLink values (@@identity,pBizSeq,vNextDealer,vNextDealerGrantor,pSysDate,pNodeID2,coalesce(pTimeLimit,0));            
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `EngSub_GrantRelation` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `EngSub_GrantRelation`(
        IN `pBizCode` TINYINT UNSIGNED,
        INOUT `pNextDealer` SMALLINT UNSIGNED,
        INOUT `pNextDealerGrantor` SMALLINT UNSIGNED
    )
    COMMENT '流程引擎部件：根据代办委托设置，交换可能的处理人/授权人关系'
BEGIN
	declare vCnt tinyint unsigned;
    
    select count(*) into vCnt from dual where exists(select 1 from Pf_M_GrantSet where BizCode=pBizCode and GrantFrom=pNextDealer and GrantStatus='A');
    if vCnt=0 then
    	set pNextDealerGrantor = 0;
    else
    	set pNextDealerGrantor = pNextDealer;
        select GrantTo into pNextDealer from Pf_M_GrantSet Where Bizcode=pBizCode And GrantFrom=pNextDealer And GrantStatus='A';
    end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `EngSub_RedrawBizFlowWIPost` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `EngSub_RedrawBizFlowWIPost`(
        IN `vBizSeq` INTEGER UNSIGNED,
        IN `vCurrNode` SMALLINT,
        IN `vNextNode` SMALLINT,
        IN `pActionID` SMALLINT UNSIGNED
    )
    COMMENT '流程引擎部件：撤回指定已办工作项的后置处理'
BEGIN
	declare vWaitPersons varchar(500); #已办工作项[等待处理人姓名]集合
	declare vBizCode tinyint unsigned; #业务码
	declare vBizID integer unsigned;   #业务ID
	
    #计算[等待处理人姓名串]
    select group_concat(
    	case when pGrantedBy=0 then Pf_UsrcName(ProcessedBy) else concat(Pf_UsrcName(ProcessedBy),'[代：',Pf_UsrcName(pGrantedBy),']') end order by ToDoWorkItem
    	Separator '、')
    into vWaitPersons
	from Pf_D_ToDoLink
	Where BizSeq=vBizSeq; 
	
	#修改业务处理单的当前状态字段、等待处理人姓名串
	update Pf_A_Biz Set FlowStatus=vCurrNode,WaitPersons=Pf_Abbre(vWaitPersons,100) where Seq=vBizSeq;
	
	if vNextNode!=vCurrNode then #计算节点变化后对业务的影响
		select BizCode,BizID into vBizCode,vBizID from Pf_A_Biz where Seq=vBizSeq;
		call Pf_UpdBizNode(vBizCode,vBizID,vNextNode,vCurrNode,'R',pActionID);
	end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `EngSub_SubmitBizFlowBranchPost` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `EngSub_SubmitBizFlowBranchPost`(
        IN `pActionID` SMALLINT UNSIGNED,
        IN `vSysDate` DATETIME,
        IN `pToDoWorkItem` INTEGER UNSIGNED,
        IN `vBizSeq` INTEGER UNSIGNED,
        IN `vCurrNode` SMALLINT,
        IN `vBizNodeID2` SMALLINT,
        IN `pBizCode` TINYINT UNSIGNED
    )
    COMMENT '流程引擎部件：流程驱动后置处理'
BEGIN
    declare vWaitPersons varchar(500);			#已办工作项[等待处理人姓名]'、'拼接
    declare vBizID integer unsigned;			#业务ID
    
    #>>>
    
    #提交分支对应的修改
    update Pf_A_BizProcRcd set ActionID=pActionID,SubmitTs=vSysDate where WorkItem=pToDoWorkItem;
    
    #删除当前待办入口
    delete from Pf_D_ToDoLink where ToDoWorkItem=pToDoWorkItem;
    
    #计算[等待处理人姓名串]
    select IfNull(group_concat(
		case when pGrantedBy=0 then Pf_UsrcName(ProcessedBy) else concat(Pf_UsrcName(ProcessedBy),'[代：',Pf_UsrcName(pGrantedBy),']') end order by ToDoWorkItem
		Separator '、'),'-')
    into vWaitPersons
    from Pf_D_ToDoLink
    Where BizSeq=vBizSeq;	
    
    #修改业务处理单的当前状态字段、等待处理人姓名串
   	update Pf_A_Biz Set FlowStatus=vBizNodeID2, WaitPersons=Pf_Abbre(vWaitPersons,100) where Seq=vBizSeq;

    if vBizNodeID2!=vCurrNode then #计算节点变化后对业务的影响
    	select BizID into vBizID from Pf_A_Biz where Seq=vBizSeq;
    	call Pf_UpdBizNode(pBizCode,vBizID,vCurrNode,vBizNodeID2,'S',pActionID);
    end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `FillIndexForBiz04` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `FillIndexForBiz04`(
        IN `pBizAppID` INTEGER UNSIGNED
    )
    COMMENT '【4-采购申请】业务流程结束后全文索引目标内容填充'
BEGIN
	declare vZw mediumtext;				#正文
    declare vYj mediumtext; 			#意见
    declare vBizAppName VARCHAR(10);	#业务/应用名
    declare vBizAppTitle VARCHAR(100);	#业务/应用标题
    declare vViewUrl VARCHAR(100);		#业务/应用查看页Url
    
    declare vAttachUpLoadTmpPath varchar(100);
    declare vBizSeq int unsigned;
    
    # >>>
    select b.BizTitle,concat_ws(' ',z.InitOrgName,Pf_UsrcName(z.InitUsrID),z.Bt,Pf_CodeValueByCharCode(29,z.CgLx))
    into vBizAppTitle,vZw 
    from CgSq_A_Zt z,Pf_A_Biz b
    where z.ID=b.BizID and b.BizCode=4 and z.ID=pBizAppID;

    SELECT concat(vZw,coalesce(group_concat(concat(CgxMc,'，',QtyDw,'，',ifnull(CpXh,'-'),'，',SkrMc,'，',Pf_OrgFullName(SyBmID),'，',Pf_UsrcName(BgrID)) 
        order by Xc Separator '；<br>'),'-')) into vZw 
    from CgSq_A_Mx where ZtID=pBizAppID;    

    set vBizAppName='采购申请';
    select Pf_StrAfterFistSlash(ViewUrl) into vViewUrl from Pf_M_Biz where Name=vBizAppName;
    set vYj=Pf_FullTextOfBizProcNote(vBizAppName,pBizAppID);
    set vZw=CONCAT(vZw,' ',ifnull(vYj,'-'));
    
    #填充索引目标-表单主体 	
    delete from Pf_D_IndexContentOfMainText where BizAppName=vBizAppName and BizAppID=pBizAppID; 
    insert into Pf_D_IndexContentOfMainText values (vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,vZw);
    
    #填充索引目标-附件路径     
    delete from Pf_D_IndexContentOfAttach where BizAppName=vBizAppName and BizAppID=pBizAppID; 

    select AttachUpLoadTmpPath into vAttachUpLoadTmpPath from Pf_M_Ent;
    
 	insert into Pf_D_IndexContentOfAttach 
 	select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
 		case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
 		else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
 	from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
 	where f.DelTag='N' and f.PrimaryName = 'CgSq_A_Zt' and f.PrimaryID=pBizAppID and f.PathCode=p.Code;

    select Seq into vBizSeq from Pf_A_Biz where BizCode=4 and BizID=pBizAppID; #4-采购申请     
    
    insert into Pf_D_IndexContentOfAttach 
    select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
    	case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
        else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
    from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
    where f.DelTag='N' and f.PrimaryName='Pf_A_BizProcRcd' and exists(select 1 from Pf_A_BizProcRcd where WorkItem=f.PrimaryID and BizSeq=vBizSeq) and f.PathCode=p.Code;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `FillIndexForBiz05` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `FillIndexForBiz05`(
        IN `pBizAppID` INTEGER UNSIGNED
    )
    COMMENT '【5-工资发放】业务流程结束后全文索引目标内容填充'
BEGIN
 	declare vZw mediumtext; #正文
 	declare vYj mediumtext; #意见
 	declare vBizAppName VARCHAR(10); #业务/应用名
 	declare vBizAppTitle VARCHAR(100); #业务/应用标题
 	declare vViewUrl VARCHAR(100); #业务/应用查看页Url
 	
 	declare vAttachUpLoadTmpPath varchar(100);
 	declare vBizSeq int unsigned;
 	
 	select b.BizTitle,concat_ws(' ',z.InitOrgName,Pf_UsrcName(z.InitUsrID),concat('公司',z.FfNf,'年',z.FfYf,'月工资发放审核'))
 	into vBizAppTitle,vZw 
 	from Gz_A_Zt z,Pf_A_Biz b
 	where z.ID=b.BizID and b.BizCode=5 and z.ID=pBizAppID;
 	
 	set vBizAppName='工资发放';
 	select Pf_StrAfterFistSlash(ViewUrl) into vViewUrl from Pf_M_Biz where Name=vBizAppName;
 	set vYj=Pf_FullTextOfBizProcNote(vBizAppName,pBizAppID);
 	set vZw=CONCAT(vZw,' ',ifnull(vYj,'-'));
 	
 	#填充索引目标-表单主体
 	delete from Pf_D_IndexContentOfMainText where BizAppName=vBizAppName and BizAppID=pBizAppID; 
 	
 	insert into Pf_D_IndexContentOfMainText values (vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,vZw);
 	
 	#填充索引目标-附件路径
 	delete from Pf_D_IndexContentOfAttach where BizAppName=vBizAppName and BizAppID=pBizAppID; 
 	
 	select AttachUpLoadTmpPath into vAttachUpLoadTmpPath from Pf_M_Ent;
 	
 	select Seq into vBizSeq from Pf_A_Biz where BizCode=5 and BizID=pBizAppID; # 5-工资发放
 	
 	insert into Pf_D_IndexContentOfAttach 
 	select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
 		case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
 		else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
 	from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
 	where f.DelTag='N' and f.PrimaryName='Pf_A_BizProcRcd' and exists(select 1 from Pf_A_BizProcRcd where WorkItem=f.PrimaryID and BizSeq=vBizSeq) and f.PathCode=p.Code;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `FillIndexForBiz06` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `FillIndexForBiz06`(
        IN `pBizAppID` INTEGER UNSIGNED
    )
    COMMENT '【6-公司论坛】业务流程结束后全文索引目标内容填充'
BEGIN
	declare vZw,vPlNr mediumtext; #正文
 	declare vYj mediumtext; #意见
 	declare vBizAppName VARCHAR(10); #业务/应用名
 	declare vBizAppTitle VARCHAR(100); #业务/应用标题
 	declare vViewUrl VARCHAR(100); #业务/应用查看页Url
 	
 	declare vAttachUpLoadTmpPath varchar(100);
 	declare vBizSeq int unsigned;
 	
 	select b.BizTitle,concat_ws(' ',z.InitOrgName,Pf_UsrcName(z.InitUsrID),z.Yt,ifnull(z.Nr,'-'))
 	into vBizAppTitle,vZw 
 	from GsLt_A_Zt z,Pf_A_Biz b
 	where z.ID=b.BizID and b.BizCode=6 and z.ID=pBizAppID;
 	
	select group_concat(concat(Pf_UsrcName(PlRyUsrID),'：',REPLACE(REPLACE(PlNr,CHAR(10),''),CHAR(13),'')) Separator ' ')
  into vPlNr
  from GsLt_A_Pl
  where BizID=pBizAppID and TjSj is not null;
  if vPlNr!='' THEN
  	set vZw=concat(vZw,' ',vPlNr);
  end if;

 	set vBizAppName='公司论坛';
 	select Pf_StrAfterFistSlash(ViewUrl) into vViewUrl from Pf_M_Biz where Name=vBizAppName; 
 	set vYj=Pf_FullTextOfBizProcNote(vBizAppName,pBizAppID);
 	set vZw=CONCAT(vZw,' ',ifnull(vYj,'-'));
 	
 	#填充索引目标-表单主体
 	delete from Pf_D_IndexContentOfMainText where BizAppName=vBizAppName and BizAppID=pBizAppID; 
 	
 	insert into Pf_D_IndexContentOfMainText values (vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,vZw);
 	
 	#填充索引目标-附件路径
 	delete from Pf_D_IndexContentOfAttach where BizAppName=vBizAppName and BizAppID=pBizAppID; 
 	
 	select AttachUpLoadTmpPath into vAttachUpLoadTmpPath from Pf_M_Ent;
 	
 	insert into Pf_D_IndexContentOfAttach 
 	select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
 		case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
 		else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
 	from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
 	where f.DelTag='N' and f.PrimaryName = 'GsLt_A_Zt' and f.PrimaryID=pBizAppID and f.PathCode=p.Code;
 	
 	insert into Pf_D_IndexContentOfAttach 
 	select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
 		case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
 		else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
 	from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
 	where f.DelTag='N' and f.PrimaryName = 'GsLt_A_Pl' and 
    	exists(select 1 from GsLt_A_Pl where f.PrimaryID=ID and BizID=pBizAppID) and f.PathCode=p.Code;

 	select Seq into vBizSeq from Pf_A_Biz where BizCode=6 and BizID=pBizAppID; #6-公司论坛
 	
 	insert into Pf_D_IndexContentOfAttach 
 	select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
 		case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
 		else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
 	from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
 	where f.DelTag='N' and f.PrimaryName='Pf_A_BizProcRcd' and exists(select 1 from Pf_A_BizProcRcd where WorkItem=f.PrimaryID and BizSeq=vBizSeq) and f.PathCode=p.Code;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `FillIndexForBiz07` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `FillIndexForBiz07`(
        IN `pBizAppID` INTEGER UNSIGNED
    )
    COMMENT '【7-档案交接】业务流程结束后全文索引目标内容填充'
BEGIN
 	declare vZw mediumtext; #正文
 	declare vYj mediumtext; #意见
 	declare vBizAppName VARCHAR(10); #业务/应用名
 	declare vBizAppTitle VARCHAR(100); #业务/应用标题
 	declare vViewUrl VARCHAR(100); #业务/应用查看页Url
 	
 	declare vAttachUpLoadTmpPath varchar(100);
 	declare vBizSeq int unsigned;
 	
 	select b.BizTitle,concat_ws(' ',z.InitOrgName,Pf_UsrcName(z.InitUsrID),z.Bt,REPLACE(REPLACE(ifnull(z.Ms,'-'),CHAR(10),''),CHAR(13),''))
 	into vBizAppTitle,vZw 
 	from Da_A_Jj z,Pf_A_Biz b
 	where z.ID=b.BizID and b.BizCode=7 and z.ID=pBizAppID;
 	
 	set vBizAppName='档案交接';
 	select Pf_StrAfterFistSlash(ViewUrl) into vViewUrl from Pf_M_Biz where Name=vBizAppName;
 	set vYj=Pf_FullTextOfBizProcNote(vBizAppName,pBizAppID);
 	set vZw=CONCAT(vZw,' ',ifnull(vYj,'-'));
 	
 	#填充索引目标-表单主体
 	delete from Pf_D_IndexContentOfMainText where BizAppName=vBizAppName and BizAppID=pBizAppID; 
 	
 	insert into Pf_D_IndexContentOfMainText values (vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,vZw);
 	
 	#填充索引目标-附件路径
 	delete from Pf_D_IndexContentOfAttach where BizAppName=vBizAppName and BizAppID=pBizAppID; 
 	
 	select AttachUpLoadTmpPath into vAttachUpLoadTmpPath from Pf_M_Ent;
 	
 	insert into Pf_D_IndexContentOfAttach 
 	select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
 		case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
 		else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
 	from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
 	where f.DelTag='N' and f.PrimaryName = 'Da_A_Jj' and f.PrimaryID=pBizAppID and f.PathCode=p.Code;
 	
 	select Seq into vBizSeq from Pf_A_Biz where BizCode=7 and BizID=pBizAppID; # 7-档案交接
 	
 	insert into Pf_D_IndexContentOfAttach 
 	select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
 		case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
 		else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
 	from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
 	where f.DelTag='N' and f.PrimaryName='Pf_A_BizProcRcd' and exists(select 1 from Pf_A_BizProcRcd where WorkItem=f.PrimaryID and BizSeq=vBizSeq) and f.PathCode=p.Code;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `FillIndexForBiz08` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `FillIndexForBiz08`(
        IN `pBizAppID` INTEGER UNSIGNED
    )
    COMMENT '【8-档案借阅】业务流程结束后全文索引目标内容填充'
BEGIN
 	declare vZw mediumtext; #正文
 	declare vYj mediumtext; #意见
 	declare vBizAppName VARCHAR(10); #业务/应用名
 	declare vBizAppTitle VARCHAR(100); #业务/应用标题
 	declare vViewUrl VARCHAR(100); #业务/应用查看页Url
 	
 	declare vAttachUpLoadTmpPath varchar(100);
 	declare vBizSeq int unsigned;
 	
 	select b.BizTitle,concat_ws(' ',z.InitOrgName,Pf_UsrcName(z.InitUsrID),z.Bt,REPLACE(REPLACE(ifnull(z.Ms,'-'),CHAR(10),''),CHAR(13),''))
 	into vBizAppTitle,vZw 
 	from Da_A_Jy z,Pf_A_Biz b
 	where z.ID=b.BizID and b.BizCode=8 and z.ID=pBizAppID;
 	
 	set vBizAppName='档案借阅';
 	select Pf_StrAfterFistSlash(ViewUrl) into vViewUrl from Pf_M_Biz where Name=vBizAppName;
 	set vYj=Pf_FullTextOfBizProcNote(vBizAppName,pBizAppID);
 	set vZw=CONCAT(vZw,' ',ifnull(vYj,'-'));
 	
 	#填充索引目标-表单主体
 	delete from Pf_D_IndexContentOfMainText where BizAppName=vBizAppName and BizAppID=pBizAppID; 
 	
 	insert into Pf_D_IndexContentOfMainText values (vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,vZw);
 	
 	#填充索引目标-附件路径
 	delete from Pf_D_IndexContentOfAttach where BizAppName=vBizAppName and BizAppID=pBizAppID; 
 	
 	select AttachUpLoadTmpPath into vAttachUpLoadTmpPath from Pf_M_Ent;
 	
 	insert into Pf_D_IndexContentOfAttach 
 	select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
 		case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
 		else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
 	from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
 	where f.DelTag='N' and f.PrimaryName = 'Da_A_Jy' and f.PrimaryID=pBizAppID and f.PathCode=p.Code;
 	
 	select Seq into vBizSeq from Pf_A_Biz where BizCode=8 and BizID=pBizAppID; # 8-档案借阅
 	
 	insert into Pf_D_IndexContentOfAttach 
 	select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
 		case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
 		else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
 	from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
 	where f.DelTag='N' and f.PrimaryName='Pf_A_BizProcRcd' and exists(select 1 from Pf_A_BizProcRcd where WorkItem=f.PrimaryID and BizSeq=vBizSeq) and f.PathCode=p.Code;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `FillIndexForBiz09` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `FillIndexForBiz09`(
        IN `pBizAppID` INTEGER UNSIGNED
    )
    COMMENT '【9-非业务类合同管理】业务流程结束后全文索引目标内容填充'
BEGIN
 	declare vZw mediumtext; #正文
 	declare vYj mediumtext; #意见
 	declare vBizAppName VARCHAR(10); #业务/应用名
 	declare vBizAppTitle VARCHAR(100); #业务/应用标题
 	declare vViewUrl VARCHAR(100); #业务/应用查看页Url
 	
 	declare vAttachUpLoadTmpPath varchar(100);
 	declare vBizSeq int unsigned;
 	
 	select b.BizTitle,concat_ws(' ',z.InitOrgName,Pf_UsrcName(z.InitUsrID),z.HtMc,REPLACE(REPLACE(ifnull(z.Bz,'-'),CHAR(10),''),CHAR(13),''),z.HtBh)
 	into vBizAppTitle,vZw 
 	from WjHq_A_Zt z,Pf_A_Biz b
 	where z.ID=b.BizID and b.BizCode=9 and z.ID=pBizAppID;
 	
 	set vBizAppName='非业务类合同管理';
 	select Pf_StrAfterFistSlash(ViewUrl) into vViewUrl from Pf_M_Biz where Name=vBizAppName;
 	set vYj=Pf_FullTextOfBizProcNote(vBizAppName,pBizAppID);
 	set vZw=CONCAT(vZw,' ',ifnull(vYj,'-'));
 	
 	#填充索引目标-表单主体
 	delete from Pf_D_IndexContentOfMainText where BizAppName=vBizAppName and BizAppID=pBizAppID; 
 	
 	insert into Pf_D_IndexContentOfMainText values (vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,vZw);
 	
 	#填充索引目标-附件路径
 	delete from Pf_D_IndexContentOfAttach where BizAppName=vBizAppName and BizAppID=pBizAppID; 
 	
 	select AttachUpLoadTmpPath into vAttachUpLoadTmpPath from Pf_M_Ent;
 	
 	insert into Pf_D_IndexContentOfAttach 
 	select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
 		case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
 		else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
 	from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
 	where f.DelTag='N' and f.PrimaryName in ('WjHq_A_Zt1','WjHq_A_Zt1C','WjHq_A_Zt2') and f.PrimaryID=pBizAppID and f.PathCode=p.Code;
 	
 	select Seq into vBizSeq from Pf_A_Biz where BizCode=9 and BizID=pBizAppID; # 9-非业务类合同管理
 	
 	insert into Pf_D_IndexContentOfAttach 
 	select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
 		case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
 		else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
 	from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
 	where f.DelTag='N' and f.PrimaryName='Pf_A_BizProcRcd' and exists(select 1 from Pf_A_BizProcRcd where WorkItem=f.PrimaryID and BizSeq=vBizSeq) and f.PathCode=p.Code;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `FillIndexForBiz10` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `FillIndexForBiz10`(
        IN `pBizAppID` INTEGER UNSIGNED
    )
    COMMENT '【10-督查督办】业务流程结束后全文索引目标内容填充'
BEGIN
 	declare vZw mediumtext; #正文
 	declare vMx mediumtext; #反馈项
 	declare vYj mediumtext; #意见
 	declare vBizAppName VARCHAR(10); #业务/应用名
 	declare vBizAppTitle VARCHAR(100); #业务/应用标题
 	declare vViewUrl VARCHAR(100); #业务/应用查看页Url
 	
 	declare vAttachUpLoadTmpPath varchar(100);
 	declare vBizSeq int unsigned;
 	
 	select b.BizTitle,concat_ws(' ',z.InitOrgName,Pf_UsrcName(z.InitUsrID),z.Bh,z.Sy,REPLACE(REPLACE(z.Nr,CHAR(10),''),CHAR(13),''),
    	Pf_UsrcName(z.CbrID),REPLACE(REPLACE(ifnull(z.SqYqYy,'-'),CHAR(10),''),CHAR(13),''),REPLACE(REPLACE(ifnull(z.Bz,'-'),CHAR(10),''),CHAR(13),''))
 	into vBizAppTitle,vZw 
 	from DcDb_A_Zt z,Pf_A_Biz b
 	where z.ID=b.BizID and b.BizCode=10 and z.ID=pBizAppID;
 	
 	select group_concat(concat_ws(' ',REPLACE(REPLACE(FkNr,CHAR(10),''),CHAR(13),'')) Separator ' ')
 	into vMx
 	from DcDb_A_Fk
 	where ZtID=pBizAppID;
 	
	set vZw=concat(vZw,' ',vMx);
 	
 	set vBizAppName='督查督办';
 	select Pf_StrAfterFistSlash(ViewUrl) into vViewUrl from Pf_M_Biz where Name=vBizAppName;
 	set vYj=Pf_FullTextOfBizProcNote(vBizAppName,pBizAppID);
 	set vZw=CONCAT(vZw,' ',ifnull(vYj,'-'));
 	
 	#填充索引目标-表单主体
 	delete from Pf_D_IndexContentOfMainText where BizAppName=vBizAppName and BizAppID=pBizAppID; 
 	
 	insert into Pf_D_IndexContentOfMainText values (vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,vZw);
 	
 	#填充索引目标-附件路径
 	delete from Pf_D_IndexContentOfAttach where BizAppName=vBizAppName and BizAppID=pBizAppID; 
 	
 	select AttachUpLoadTmpPath into vAttachUpLoadTmpPath from Pf_M_Ent;
 	
 	insert into Pf_D_IndexContentOfAttach 
 	select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
 		case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
 		else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
 	from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
 	where f.DelTag='N' and f.PrimaryName = 'DcDb_A_Zt' and f.PrimaryID=pBizAppID and f.PathCode=p.Code;
 	
 	insert into Pf_D_IndexContentOfAttach 
 	select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
 		case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
 		else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
 	from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
 	where f.DelTag='N' and f.PrimaryName = 'DcDb_A_Fk' and 
    	exists(select 1 from DcDb_A_Fk where f.PrimaryID=ID and ZtID=pBizAppID) and f.PathCode=p.Code;
 	
 	select Seq into vBizSeq from Pf_A_Biz where BizCode=10 and BizID=pBizAppID; # 10-督查督办
 	
 	insert into Pf_D_IndexContentOfAttach 
 	select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
 		case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
 		else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
 	from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
 	where f.DelTag='N' and f.PrimaryName='Pf_A_BizProcRcd' and exists(select 1 from Pf_A_BizProcRcd where WorkItem=f.PrimaryID and BizSeq=vBizSeq) and f.PathCode=p.Code;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `FillIndexForBiz11` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `FillIndexForBiz11`(
        IN `pBizAppID` INTEGER UNSIGNED
    )
    COMMENT '【11-信息发布】业务流程结束后全文索引目标内容填充'
BEGIN
	declare vZw mediumtext; #正文
 	declare vYj mediumtext; #意见
 	declare vBizAppName VARCHAR(10); #业务/应用名
 	declare vBizAppTitle VARCHAR(100); #业务/应用标题
 	declare vViewUrl VARCHAR(100); #业务/应用查看页Url
 	
 	declare vAttachUpLoadTmpPath varchar(100);
 	declare vBizSeq int unsigned;
 	
 	select b.BizTitle,concat_ws(' ',z.InitOrgName,Pf_UsrcName(z.InitUsrID),z.Bt,ifnull(z.Nr,'-'),XxFb_LmFullPathName(z.GsLmID),
 		ifnull(Pf_BizNodeProcPsnsName(b.Seq,'公司会签'),'-'),Pf_BizNodeProcPsnsName(b.Seq,'主管领导审批'),ifnull(Pub_BizViewPwRangeUsr(b.Seq),'-'),
 		ifnull(Pub_BizViewPwRangeOrg(b.Seq),'-'))
 	into vBizAppTitle,vZw 
 	from XxFb_A_Zt z,Pf_A_Biz b
 	where z.ID=b.BizID and b.BizCode=11 and z.ID=pBizAppID;
 	
 	set vBizAppName='信息发布';
 	select Pf_StrAfterFistSlash(ViewUrl) into vViewUrl from Pf_M_Biz where Name=vBizAppName; 
 	set vYj=Pf_FullTextOfBizProcNote(vBizAppName,pBizAppID);
 	set vZw=CONCAT(vZw,' ',ifnull(vYj,'-'));
 	
 	#填充索引目标-表单主体
 	delete from Pf_D_IndexContentOfMainText where BizAppName=vBizAppName and BizAppID=pBizAppID; 
 	
 	insert into Pf_D_IndexContentOfMainText values (vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,vZw);
 	
 	#填充索引目标-附件路径
 	delete from Pf_D_IndexContentOfAttach where BizAppName=vBizAppName and BizAppID=pBizAppID; 
 	
 	select AttachUpLoadTmpPath into vAttachUpLoadTmpPath from Pf_M_Ent;
 	
 	insert into Pf_D_IndexContentOfAttach 
 	select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
 		case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
 		else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
 	from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
 	where f.DelTag='N' and f.PrimaryName = 'XxFb_A_Zt' and f.PrimaryID=pBizAppID and f.PathCode=p.Code;
 	
 	select Seq into vBizSeq from Pf_A_Biz where BizCode=11 and BizID=pBizAppID; #11-信息发布
 	
 	insert into Pf_D_IndexContentOfAttach 
 	select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
 		case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
 		else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
 	from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
 	where f.DelTag='N' and f.PrimaryName='Pf_A_BizProcRcd' and exists(select 1 from Pf_A_BizProcRcd where WorkItem=f.PrimaryID and BizSeq=vBizSeq) and f.PathCode=p.Code;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `FillIndexForBiz12` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `FillIndexForBiz12`(
        IN `pBizAppID` INTEGER UNSIGNED
    )
    COMMENT '【12-公司文件】业务流程结束后全文索引目标内容填充'
BEGIN
	declare vZw mediumtext;				#正文
    declare vYj mediumtext; 			#意见
    declare vBizAppName VARCHAR(10);	#业务/应用名
    declare vBizAppTitle VARCHAR(100);	#业务/应用标题
    declare vViewUrl VARCHAR(100);		#业务/应用查看页Url
    
    declare vAttachUpLoadTmpPath varchar(100);
    declare vBizSeq int unsigned;
    
    select b.BizTitle,concat_ws(' ',z.InitOrgName,Pf_UsrcName(z.InitUsrID),z.Bt,ifnull(z.Ztc,'-'),ifnull(z.FzXx,'-'),GsWj_WhByYsNdBh(z.BhYsID,z.Nd,z.Bh),
    	ifnull(Pf_BizNodeProcPsnsName(b.Seq,'公司会签'),'-'),Pf_BizNodeProcPsnsName(b.Seq,'领导签发'),ifnull(Pub_BizViewPwRangeUsr(b.Seq),'-'),
        ifnull(Pub_BizViewPwRangeOrg(b.Seq),'-'),Pf_EntAppCodeVal(z.CbID),Pf_EntAppCodeVal(z.CsID))
    into vBizAppTitle,vZw 
    from GsWj_A_Zt z,Pf_A_Biz b
    where z.ID=b.BizID and b.BizCode=12 and z.ID=pBizAppID;
    
    set vBizAppName='公司文件';
    select Pf_StrAfterFistSlash(ViewUrl) into vViewUrl from Pf_M_Biz where Name=vBizAppName; 
    set vYj=Pf_FullTextOfBizProcNote(vBizAppName,pBizAppID);
    set vZw=CONCAT(vZw,' ',ifnull(vYj,'-'));
    
    #填充索引目标-表单主体
	delete from Pf_D_IndexContentOfMainText where BizAppName=vBizAppName and BizAppID=pBizAppID; 
    
    insert into Pf_D_IndexContentOfMainText values (vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,vZw);
    
    #填充索引目标-附件路径
    delete from Pf_D_IndexContentOfAttach where BizAppName=vBizAppName and BizAppID=pBizAppID; 
    
    select AttachUpLoadTmpPath into vAttachUpLoadTmpPath from Pf_M_Ent;
    
    insert into Pf_D_IndexContentOfAttach 
    select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
    	case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
        else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
    from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
    where f.DelTag='N' and f.PrimaryName in ('GsWjZw','GsWjFj','GsWjZwCopy','GsWjZwZs','GsWjZwZsPdf') and f.PrimaryID=pBizAppID and f.PathCode=p.Code;
    
    select Seq into vBizSeq from Pf_A_Biz where BizCode=12 and BizID=pBizAppID; #12-公司文件
    
    insert into Pf_D_IndexContentOfAttach 
    select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
    	case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
        else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
    from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
    where f.DelTag='N' and f.PrimaryName='Pf_A_BizProcRcd' and exists(select 1 from Pf_A_BizProcRcd where WorkItem=f.PrimaryID and BizSeq=vBizSeq) and f.PathCode=p.Code;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `FillIndexForBiz13` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `FillIndexForBiz13`(
        IN `pBizAppID` INTEGER UNSIGNED
    )
    COMMENT '【13-请示签报】业务流程结束后全文索引目标内容填充'
BEGIN
 	declare vZw mediumtext; #正文
 	declare vYj mediumtext; #意见
 	declare vBizAppName VARCHAR(10); #业务/应用名
 	declare vBizAppTitle VARCHAR(100); #业务/应用标题
 	declare vViewUrl VARCHAR(100); #业务/应用查看页Url
 	
 	declare vAttachUpLoadTmpPath varchar(100);
 	declare vBizSeq int unsigned;
 	
 	select b.BizTitle,concat_ws(' ',z.InitOrgName,Pf_UsrcName(z.InitUsrID),z.Bt,z.Sy,Pf_EntAppCodeVal(z.SxLbID),ifnull(z.Bz,'-'),
 		Pf_UsrNamesOfUsrIDs(z.ZrrUsrIDs),z.LsYq,z.LsQkZj)
 	into vBizAppTitle,vZw 
 	from QsQb_A_Zt z,Pf_A_Biz b
 	where z.ID=b.BizID and b.BizCode=13 and z.ID=pBizAppID;
 	
 	set vBizAppName='请示签报';
 	select Pf_StrAfterFistSlash(ViewUrl) into vViewUrl from Pf_M_Biz where Name=vBizAppName;
 	set vYj=Pf_FullTextOfBizProcNote(vBizAppName,pBizAppID);
 	set vZw=CONCAT(vZw,' ',ifnull(vYj,'-'));
 	
 	#填充索引目标-表单主体
 	delete from Pf_D_IndexContentOfMainText where BizAppName=vBizAppName and BizAppID=pBizAppID; 
 	
 	insert into Pf_D_IndexContentOfMainText values (vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,vZw);
 	
 	#填充索引目标-附件路径
 	delete from Pf_D_IndexContentOfAttach where BizAppName=vBizAppName and BizAppID=pBizAppID; 
 	
 	select AttachUpLoadTmpPath into vAttachUpLoadTmpPath from Pf_M_Ent;
 	
 	insert into Pf_D_IndexContentOfAttach 
 	select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
 		case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
 		else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
 	from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
 	where f.DelTag='N' and f.PrimaryName='QsQb_A_Zt' and f.PrimaryID=pBizAppID and f.PathCode=p.Code;
 	
 	select Seq into vBizSeq from Pf_A_Biz where BizCode=13 and BizID=pBizAppID; #13-请示签报
 	
 	insert into Pf_D_IndexContentOfAttach 
 	select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
 		case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
 		else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
 	from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
 	where f.DelTag='N' and f.PrimaryName='Pf_A_BizProcRcd' and exists(select 1 from Pf_A_BizProcRcd where WorkItem=f.PrimaryID and BizSeq=vBizSeq) and f.PathCode=p.Code;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `FillIndexForBiz14` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `FillIndexForBiz14`(
        IN `pBizAppID` INTEGER UNSIGNED
    )
    COMMENT '【14-借款申请】业务流程结束后全文索引目标内容填充'
BEGIN
	declare vZw mediumtext; #正文
 	declare vYj mediumtext; #意见
 	declare vBizAppName VARCHAR(10); #业务/应用名
 	declare vBizAppTitle VARCHAR(100); #业务/应用标题
 	declare vViewUrl VARCHAR(100); #业务/应用查看页Url
 	
 	declare vAttachUpLoadTmpPath varchar(100);
 	declare vBizSeq integer unsigned;
 	
 	select b.BizTitle,concat_ws(' ',z.InitOrgName,Pf_UsrcName(z.InitUsrID),z.Sy,z.SkZhMc,z.SkZhKhh,z.SkZhNo)
 	into vBizAppTitle,vZw 
 	from JkBx_A_Jk z,Pf_A_Biz b
 	where z.ID=b.BizID and b.BizCode=14 and z.ID=pBizAppID;
 	
 	set vBizAppName='借款申请';
 	select Pf_StrAfterFistSlash(ViewUrl) into vViewUrl from Pf_M_Biz where Name=vBizAppName;
 	set vYj=Pf_FullTextOfBizProcNote(vBizAppName,pBizAppID);
 	set vZw=CONCAT(vZw,' ',ifnull(vYj,'-'));
 	
 	#填充索引目标-表单主体
 	delete from Pf_D_IndexContentOfMainText where BizAppName=vBizAppName and BizAppID=pBizAppID; 
 	
 	insert into Pf_D_IndexContentOfMainText values (vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,vZw);
 	
 	#填充索引目标-附件路径
 	delete from Pf_D_IndexContentOfAttach where BizAppName=vBizAppName and BizAppID=pBizAppID; 
 	
 	select AttachUpLoadTmpPath into vAttachUpLoadTmpPath from Pf_M_Ent;
 	
 	select Seq into vBizSeq from Pf_A_Biz where BizCode=14 and BizID=pBizAppID; #14-借款申请
 	
 	insert into Pf_D_IndexContentOfAttach 
 	select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
 		case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
 		else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
 	from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
 	where f.DelTag='N' and f.PrimaryName='Pf_A_BizProcRcd' and 
    	exists(select 1 from Pf_A_BizProcRcd where WorkItem=f.PrimaryID and BizSeq=vBizSeq) and f.PathCode=p.Code;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `FillIndexForBiz15` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `FillIndexForBiz15`(
        IN `pBizAppID` INTEGER UNSIGNED
    )
    COMMENT '【15-还款记录】业务流程结束后全文索引目标内容填充'
BEGIN
	declare vZw mediumtext; #正文
 	declare vYj mediumtext; #意见
 	declare vBizAppName VARCHAR(10); #业务/应用名
 	declare vBizAppTitle VARCHAR(100); #业务/应用标题
 	declare vViewUrl VARCHAR(100); #业务/应用查看页Url
 	
 	declare vAttachUpLoadTmpPath varchar(100);
 	declare vBizSeq integer unsigned;
 	
 	select b.BizTitle,concat_ws(' ',z.InitOrgName,Pf_UsrcName(z.InitUsrID),z.QkSm)
 	into vBizAppTitle,vZw 
 	from JkBx_A_Hk z,Pf_A_Biz b
 	where z.ID=b.BizID and b.BizCode=15 and z.ID=pBizAppID;
 	
 	set vBizAppName='还款记录';
 	select Pf_StrAfterFistSlash(ViewUrl) into vViewUrl from Pf_M_Biz where Name=vBizAppName;
 	set vYj=Pf_FullTextOfBizProcNote(vBizAppName,pBizAppID);
 	set vZw=CONCAT(vZw,' ',ifnull(vYj,'-'));
 	
 	#填充索引目标-表单主体
 	delete from Pf_D_IndexContentOfMainText where BizAppName=vBizAppName and BizAppID=pBizAppID; 
 	
 	insert into Pf_D_IndexContentOfMainText values (vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,vZw);
 	
 	#填充索引目标-附件路径
 	delete from Pf_D_IndexContentOfAttach where BizAppName=vBizAppName and BizAppID=pBizAppID; 
 	
 	select AttachUpLoadTmpPath into vAttachUpLoadTmpPath from Pf_M_Ent;
 	
 	select Seq into vBizSeq from Pf_A_Biz where BizCode=15 and BizID=pBizAppID; #15-还款记录
 	
 	insert into Pf_D_IndexContentOfAttach 
 	select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
 		case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
 		else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
 	from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
 	where f.DelTag='N' and f.PrimaryName='Pf_A_BizProcRcd' and 
    	exists(select 1 from Pf_A_BizProcRcd where WorkItem=f.PrimaryID and BizSeq=vBizSeq) and f.PathCode=p.Code;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `FillIndexForBiz16` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `FillIndexForBiz16`(
        IN `pBizAppID` INTEGER UNSIGNED
    )
    COMMENT '【16-会议管理】业务流程结束后全文索引目标内容填充'
BEGIN
	declare vZw mediumtext;				#正文
    declare vYj mediumtext; 			#意见
    declare vBizAppName VARCHAR(10);	#业务/应用名
    declare vBizAppTitle VARCHAR(100);	#业务/应用标题
    declare vViewUrl VARCHAR(100);		#业务/应用查看页Url
    
    declare vAttachUpLoadTmpPath varchar(100);
    declare vBizSeq int unsigned;
    
    select b.BizTitle,concat_ws(' ',z.InitOrgName,Pf_UsrcName(z.InitUsrID),z.Mc,z.Yt,Pf_EntAppCodeVal(z.DdID),Pf_UsrNamesOfUsrIDs(z.NbChRyUsrIDs),
    	Pf_UsrcName(z.RcdUsrID),z.Jy)
    into vBizAppTitle,vZw 
    from Pf_A_Biz b,HyGl_A_Zt z
    where z.ID=b.BizID and b.BizCode=16 and z.ID=pBizAppID;
    
    set vBizAppName='会议管理';
    select Pf_StrAfterFistSlash(ViewUrl) into vViewUrl from Pf_M_Biz where Name=vBizAppName;
    set vYj=Pf_FullTextOfBizProcNote(vBizAppName,pBizAppID);
    set vZw=CONCAT(vZw,' ',ifnull(vYj,'-'));
    
    #填充索引目标-表单主体
	delete from Pf_D_IndexContentOfMainText where BizAppName=vBizAppName and BizAppID=pBizAppID; 
    
    insert into Pf_D_IndexContentOfMainText values (vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,vZw);
    
    #填充索引目标-附件路径
    delete from Pf_D_IndexContentOfAttach where BizAppName=vBizAppName and BizAppID=pBizAppID; 
    
    select AttachUpLoadTmpPath into vAttachUpLoadTmpPath from Pf_M_Ent;
    
    insert into Pf_D_IndexContentOfAttach 
    select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
    	case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
        else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
    from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
    where f.DelTag='N' and f.PrimaryName in ('HyGl_A_Zt1','HyGl_A_Zt2','HyGl_A_Zt2C') and f.PrimaryID=pBizAppID and f.PathCode=p.Code;
    
    select Seq into vBizSeq from Pf_A_Biz where BizCode=16 and BizID=pBizAppID; #16-会议管理
    
    insert into Pf_D_IndexContentOfAttach 
    select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
    	case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
        else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
    from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
    where f.DelTag='N' and f.PrimaryName='Pf_A_BizProcRcd' and exists(select 1 from Pf_A_BizProcRcd where WorkItem=f.PrimaryID and BizSeq=vBizSeq) and f.PathCode=p.Code;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `FillIndexForBiz17` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `FillIndexForBiz17`(
        IN `pBizAppID` INTEGER UNSIGNED
    )
    COMMENT '【17-请休假】业务流程结束后全文索引目标内容填充'
BEGIN
	declare vZw mediumtext; #正文
 	declare vYj mediumtext; #意见
 	declare vBizAppName VARCHAR(10); #业务/应用名
 	declare vBizAppTitle VARCHAR(100); #业务/应用标题
	declare vViewUrl VARCHAR(100); #业务/应用查看页Url
     
	declare vAttachUpLoadTmpPath varchar(100);
	declare vBizSeq int unsigned;
 
	select b.BizTitle,concat_ws(' ',z.InitOrgName,Pf_UsrcName(z.InitUsrID),z.Sy)
 	into vBizAppTitle,vZw 
 	from Xj_A_Zt z,Pf_A_Biz b
 	where z.ID=b.BizID and b.BizCode=17 and z.ID=pBizAppID;
 
 	set vBizAppName='请休假';
 	select Pf_StrAfterFistSlash(ViewUrl) into vViewUrl from Pf_M_Biz where Name=vBizAppName; 
 	set vYj=Pf_FullTextOfBizProcNote(vBizAppName,pBizAppID);
 	set vZw=CONCAT(vZw,' ',ifnull(vYj,'-'));
 
 	#填充索引目标-表单主体
 	delete from Pf_D_IndexContentOfMainText where BizAppName=vBizAppName and BizAppID=pBizAppID; 
 
 	insert into Pf_D_IndexContentOfMainText values (vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,vZw);
 
 	#填充索引目标-附件路径
 	delete from Pf_D_IndexContentOfAttach where BizAppName=vBizAppName and BizAppID=pBizAppID; 
 
 	select AttachUpLoadTmpPath into vAttachUpLoadTmpPath from Pf_M_Ent;
 
 	insert into Pf_D_IndexContentOfAttach 
 	select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
 		case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
 		else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
 	from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
 	where f.DelTag='N' and f.PrimaryName = 'Xj_A_Zt' and f.PrimaryID=pBizAppID and f.PathCode=p.Code;
 
 	select Seq into vBizSeq from Pf_A_Biz where BizCode=17 and BizID=pBizAppID; #17-请休假
 
 	insert into Pf_D_IndexContentOfAttach 
 	select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
 		case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
 		else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
 	from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
 	where f.DelTag='N' and f.PrimaryName='Pf_A_BizProcRcd' and exists(select 1 from Pf_A_BizProcRcd where WorkItem=f.PrimaryID and BizSeq=vBizSeq) and f.PathCode=p.Code;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `FillIndexForBiz18` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `FillIndexForBiz18`(
        IN `pBizAppID` INTEGER UNSIGNED
    )
    COMMENT '【18-报销申请】业务流程结束后全文索引目标内容填充'
BEGIN
	declare vZw mediumtext;				#正文
    declare vYj mediumtext; 			#意见
    declare vBizAppName VARCHAR(10);	#业务/应用名
    declare vBizAppTitle VARCHAR(100);	#业务/应用标题
    declare vViewUrl VARCHAR(100);		#业务/应用查看页Url
    
    declare vAttachUpLoadTmpPath varchar(100);
    declare vBizSeq int unsigned;
    
    select b.BizTitle,concat_ws(' ',z.InitOrgName,Pf_UsrcName(z.InitUsrID),Pf_CodeValueByCharCode(31,z.FyCl),
    	Pf_UsrNamesOfUsrIDs(z.TxRyIDs),z.CcSy,z.SkZhMc,z.SkZhKhh,z.SkZhNo)
    into vBizAppTitle,vZw 
    from JkBx_A_Bx z,Pf_A_Biz b
    where z.ID=b.BizID and b.BizCode=18 and z.ID=pBizAppID;

    SELECT concat(vZw,coalesce(group_concat(concat(DATE_FORMAT(CfSj,'%Y-%m-%d %H:%i'),'-',DATE_FORMAT(DdSj,'%Y-%m-%d %H:%i'),'，',CfDd,'-',DdDd,'，',
		Pf_CodeValueByCharCode(32,JtfLb),'，',Pf_CodeValueByIntCode(14,JtFs),'，',HfSm,'，单据',DjCnt,'张，￥',PricePlusTax,InvNum,
        Pf_EntAppCodeVal(HwYsLwID),Pf_EntAppCodeVal(FwMcID),
        case when JtfLb='1' then (case when JtfLb < ZgBz then '<超标>' else '<未超标>' end) else '<无标准>' end) 
        order by CfSj Separator '；<br>'),'-')) into vZw 
    from JkBx_A_BxJt where BxID=pBizAppID;    

    SELECT concat(vZw,coalesce(group_concat(concat(DATE_FORMAT(ZsSds,'%Y-%m-%d %H:%i'),'-',DATE_FORMAT(ZsSdM,'%Y-%m-%d %H:%i'),'，',ZsTs,'天，',
    	Zsd,'，',Pf_CodeValueByIntCode(15,ZsdJb),'，',HfSm,'，单据',DjCnt,'张，￥',Fj,'/每日，',Rc,'人次，同住：',
        case when Rc>1 then BxSq_CyUsrNames(ID) else '无' end,'，￥',PricePlusTax,InvNum,Pf_EntAppCodeVal(HwYsLwID),Pf_EntAppCodeVal(FwMcID),
        case when BzAmt=0 then '<无标准>' else (case when Fj/Rc>BzAmt then '<超标>' else '<未超标>' end) end) 
        order by ZsSds Separator '；<br>'),'-')) into vZw 
    from JkBx_A_BxZs where BxID=pBizAppID;
    
    /*
    SELECT concat(vZw,coalesce(group_concat(concat(DATE_FORMAT(FsSj,'%Y-%m-%d %H:%i'),'，',Dd,'，',IFNULL(Pf_UsrNamesOfUsrIDs(CyTs),'-'),'，',HfSm,'，单据',
        DjCnt,'张，￥',HfAmt,'，',CyRs,'人参与',case when BzAmt=0 then '<无标准>' else (case when HfAmt/CyRs>BzAmt then '<超标>' else '<未超标>' end) end) 
        order by FsSj Separator '；<br>'),'-')) into vZw 
    from JkBx_A_BxZd where BxID=pBizAppID;
    */
    
    SELECT concat(vZw,coalesce(group_concat(concat(DATE_FORMAT(FsSj,'%Y-%m-%d %H:%i'),' ','，',HfSm,'，单据',DjCnt,'张，￥',PricePlusTax,
    	InvNum,Pf_EntAppCodeVal(HwYsLwID),Pf_EntAppCodeVal(FwMcID)) 
        order by FsSj Separator '；<br>'),'-')) into vZw 
    from JkBx_A_BxCf where BxID=pBizAppID;
    
    SELECT concat(vZw,coalesce(group_concat(concat(DATE_FORMAT(SdKs,'%Y-%m-%d %H:%i'),'-',DATE_FORMAT(SdJs,'%Y-%m-%d %H:%i'),'，',
    	CcSq_CcDName(CcdID),'，',CcTs,'天，补助标准￥', ClBzAmt,'/日，招待扣除￥',KcAmt1+KcAmt2+KcAmt3,'，实补金额￥',HfAmt) 
        order by SdKs Separator '；<br>'),'-')) into vZw 
    from JkBx_A_BxBzCl where BxID=pBizAppID;
    
    SELECT concat(vZw,coalesce(group_concat(concat(BxNf1,'年',BxYf1,'月-',BxNf2,'年',BxYf2,'月，',HfSm,'，单据',DjCnt,'张，￥',PricePlusTax,
    	InvNum,Pf_EntAppCodeVal(HwYsLwID),Pf_EntAppCodeVal(FwMcID),case when BzAmt=0 then '<无标准>' else 
        (case when PricePlusTax/Pf_MonthsDiff(BxNf1,BxYf1,BxNf2,BxYf2) > BzAmt then '<超标>' else '<未超标>' end) end) 
        order by BxNf1,BxYf1 Separator '；<br>'),'-')) into vZw  
    from JkBx_A_BxTx where BxID=pBizAppID;
    
    /*
    SELECT concat(vZw,coalesce(group_concat(concat(DATE_FORMAT(FsSj,'%Y-%m-%d %H:%i'),' ',Pf_CodeValueByIntCode(13,FyLb),'，',
    	HfSm,BxSq_QtXcdMs(ID),'，单据',DjCnt,'张，￥',PricePlusTax,InvNum,Pf_EntAppCodeVal(HwYsLwID),Pf_EntAppCodeVal(FwMcID)) 
        order by FsSj Separator '；<br>'),'-')) into vZw 
    from JkBx_A_BxQt where BxID=pBizAppID;
	*/
    SELECT concat(vZw,coalesce(group_concat(concat(DATE_FORMAT(FsSj,'%Y-%m-%d %H:%i'),' ',Pf_CodeValueByIntCode(13,FyLb),'，',
    	HfSm,'，单据',DjCnt,'张，￥',PricePlusTax,InvNum,Pf_EntAppCodeVal(HwYsLwID),Pf_EntAppCodeVal(FwMcID)) 
        order by FsSj Separator '；<br>'),'-')) into vZw 
    from JkBx_A_BxQt where BxID=pBizAppID;
    
    set vBizAppName='报销申请';
    select Pf_StrAfterFistSlash(ViewUrl) into vViewUrl from Pf_M_Biz where Name=vBizAppName;
    set vYj=Pf_FullTextOfBizProcNote(vBizAppName,pBizAppID);
    set vZw=CONCAT(vZw,' ',ifnull(vYj,'-'));
    
    #填充索引目标-表单主体 	
    delete from Pf_D_IndexContentOfMainText where BizAppName=vBizAppName and BizAppID=pBizAppID; 
    insert into Pf_D_IndexContentOfMainText values (vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,vZw);
    
    #填充索引目标-附件路径     
    delete from Pf_D_IndexContentOfAttach where BizAppName=vBizAppName and BizAppID=pBizAppID; 

    select AttachUpLoadTmpPath into vAttachUpLoadTmpPath from Pf_M_Ent;
    
 	insert into Pf_D_IndexContentOfAttach 
 	select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
 		case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
 		else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
 	from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
 	where f.DelTag='N' and f.PrimaryName = 'JkBx_A_BxQt71' and 
    	exists(select 1 from JkBx_A_BxQt where f.PrimaryID=ID and BxID=pBizAppID) and f.PathCode=p.Code;
 	
    select Seq into vBizSeq from Pf_A_Biz where BizCode=18 and BizID=pBizAppID; #18-报销申请     
    
    insert into Pf_D_IndexContentOfAttach 
    select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
    	case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
        else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
    from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
    where f.DelTag='N' and f.PrimaryName='Pf_A_BizProcRcd' and exists(select 1 from Pf_A_BizProcRcd where WorkItem=f.PrimaryID and BizSeq=vBizSeq) and f.PathCode=p.Code;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `FillIndexForBiz19` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `FillIndexForBiz19`(
        IN `pBizAppID` INTEGER UNSIGNED
    )
    COMMENT '【19-预付款审批】业务流程结束后全文索引目标内容填充'
BEGIN
	declare vZw mediumtext; #正文
 	declare vYj mediumtext; #意见
 	declare vBizAppName VARCHAR(10); #业务/应用名
 	declare vBizAppTitle VARCHAR(100); #业务/应用标题
 	declare vViewUrl VARCHAR(100); #业务/应用查看页Url
 	
 	declare vAttachUpLoadTmpPath varchar(100);
 	declare vBizSeq integer unsigned;
 	
 	select b.BizTitle,concat_ws(' ',z.InitOrgName,Pf_UsrcName(z.InitUsrID),z.SqSm,z.SkrMc,z.Khh,z.AcctNo,ifnull(z.Bz,'-'))
 	into vBizAppTitle,vZw 
 	from ZxBg_A_YfkSp z,Pf_A_Biz b
 	where z.ID=b.BizID and b.BizCode=19 and z.ID=pBizAppID;
 	
 	set vBizAppName='预付款审批';
 	select Pf_StrAfterFistSlash(ViewUrl) into vViewUrl from Pf_M_Biz where Name=vBizAppName;
 	set vYj=Pf_FullTextOfBizProcNote(vBizAppName,pBizAppID);
 	set vZw=CONCAT(vZw,' ',ifnull(vYj,'-'));
 	
 	#填充索引目标-表单主体
 	delete from Pf_D_IndexContentOfMainText where BizAppName=vBizAppName and BizAppID=pBizAppID; 
 	
 	insert into Pf_D_IndexContentOfMainText values (vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,vZw);
 	
 	#填充索引目标-附件路径
 	delete from Pf_D_IndexContentOfAttach where BizAppName=vBizAppName and BizAppID=pBizAppID; 
 	
 	select AttachUpLoadTmpPath into vAttachUpLoadTmpPath from Pf_M_Ent;
 	
 	insert into Pf_D_IndexContentOfAttach 
 	select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
 		case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
 		else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
 	from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
 	where f.DelTag='N' and f.PrimaryName = 'ZxBg_A_YfkSp' and f.PrimaryID=pBizAppID and f.PathCode=p.Code;

 	select Seq into vBizSeq from Pf_A_Biz where BizCode=19 and BizID=pBizAppID; #19-预付款审批
 	
 	insert into Pf_D_IndexContentOfAttach 
 	select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
 		case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
 		else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
 	from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
 	where f.DelTag='N' and f.PrimaryName='Pf_A_BizProcRcd' and 
    	exists(select 1 from Pf_A_BizProcRcd where WorkItem=f.PrimaryID and BizSeq=vBizSeq) and f.PathCode=p.Code;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `FillIndexForBiz20` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `FillIndexForBiz20`(
        IN `pBizAppID` INTEGER UNSIGNED
    )
    COMMENT '【20-公司收文】业务流程结束后全文索引目标内容填充'
BEGIN
	declare vZw mediumtext;				#正文
    declare vYj mediumtext; 			#意见
    declare vBizAppName VARCHAR(10);	#业务/应用名
    declare vBizAppTitle VARCHAR(100);	#业务/应用标题
    declare vViewUrl VARCHAR(100);		#业务/应用查看页Url
    
    declare vAttachUpLoadTmpPath varchar(100);
    declare vBizSeq int unsigned;
    
    select b.BizTitle,concat_ws(' ',z.InitOrgName,Pf_UsrcName(z.InitUsrID),z.Bt,z.Ztc,z.LwWh,Pf_EntAppCodeVal(z.LwDwID),
    	Pf_CodeValueByCharCode(34,z.WjMj),GsWj_WhByYsNdBh(z.BhYsID,z.Nd,z.Bh),
    	ifnull(Pf_BizNodeProcPsnsName(b.Seq,'公司领导批办'),'-'),Pf_BizNodeProcPsnsName(b.Seq,'收文传阅/办理'),
        ifnull(Pub_BizViewPwRangeUsr(b.Seq),'-'),ifnull(Pub_BizViewPwRangeOrg(b.Seq),'-'))
    into vBizAppTitle,vZw 
    from GsSw_A_Zt z,Pf_A_Biz b
    where z.ID=b.BizID and b.BizCode=20 and z.ID=pBizAppID;
    
    set vBizAppName='公司收文';
    select Pf_StrAfterFistSlash(ViewUrl) into vViewUrl from Pf_M_Biz where Name=vBizAppName; 
    set vYj=Pf_FullTextOfBizProcNote(vBizAppName,pBizAppID);
    set vZw=CONCAT(vZw,' ',ifnull(vYj,'-'));
    
    #填充索引目标-表单主体
	delete from Pf_D_IndexContentOfMainText where BizAppName=vBizAppName and BizAppID=pBizAppID; 
    
    insert into Pf_D_IndexContentOfMainText values (vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,vZw);
    
    #填充索引目标-附件路径
    delete from Pf_D_IndexContentOfAttach where BizAppName=vBizAppName and BizAppID=pBizAppID; 
    
    select AttachUpLoadTmpPath into vAttachUpLoadTmpPath from Pf_M_Ent;
    
    insert into Pf_D_IndexContentOfAttach 
    select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
    	case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
        else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
    from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
    where f.DelTag='N' and f.PrimaryName in ('GsSwZw','GsSwFj') and f.PrimaryID=pBizAppID and f.PathCode=p.Code;
    
    select Seq into vBizSeq from Pf_A_Biz where BizCode=20 and BizID=pBizAppID; #20-公司收文
    
    insert into Pf_D_IndexContentOfAttach 
    select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
    	case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
        else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
    from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
    where f.DelTag='N' and f.PrimaryName='Pf_A_BizProcRcd' and 
    	exists(select 1 from Pf_A_BizProcRcd where WorkItem=f.PrimaryID and BizSeq=vBizSeq) and f.PathCode=p.Code;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `FillIndexForBiz21` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `FillIndexForBiz21`(
        IN `pBizAppID` INTEGER UNSIGNED
    )
    COMMENT '【21-立项申请】业务流程结束后全文索引目标内容填充'
BEGIN
	declare vZw mediumtext; #正文
 	declare vYj mediumtext; #意见
 	declare vBizAppName VARCHAR(10); #业务/应用名
 	declare vBizAppTitle VARCHAR(100); #业务/应用标题
 	declare vViewUrl VARCHAR(100); #业务/应用查看页Url
 	
 	declare vAttachUpLoadTmpPath varchar(100);
 	declare vBizSeq integer unsigned;
 	
 	select b.BizTitle,concat_ws(' ',z.InitOrgName,Pf_UsrcName(z.InitUsrID),Pf_CodeValueByCharCode(21,z.BizStatus),Pf_UsrcName(z.Ywy2ID),
    	z.XmMc,z.XmJj,ZxBg_QyGsDm(z.QyGsID),ZxBg_QyGsMc(z.QyGsID))
 	into vBizAppTitle,vZw 
 	from ZxBg_A_LxSq z,Pf_A_Biz b
 	where z.ID=b.BizID and b.BizCode=21 and z.ID=pBizAppID;
 	
 	set vBizAppName='立项申请';
 	select Pf_StrAfterFistSlash(ViewUrl) into vViewUrl from Pf_M_Biz where Name=vBizAppName;
 	set vYj=Pf_FullTextOfBizProcNote(vBizAppName,pBizAppID);
 	set vZw=CONCAT(vZw,' ',ifnull(vYj,'-'));
 	
 	#填充索引目标-表单主体
 	delete from Pf_D_IndexContentOfMainText where BizAppName=vBizAppName and BizAppID=pBizAppID; 
 	
 	insert into Pf_D_IndexContentOfMainText values (vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,vZw);
 	
 	#填充索引目标-附件路径
 	delete from Pf_D_IndexContentOfAttach where BizAppName=vBizAppName and BizAppID=pBizAppID; 
 	
 	select AttachUpLoadTmpPath into vAttachUpLoadTmpPath from Pf_M_Ent;
 	
 	insert into Pf_D_IndexContentOfAttach 
 	select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
 		case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
 		else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
 	from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
 	where f.DelTag='N' and f.PrimaryName = 'ZxBg_A_LxSq' and f.PrimaryID=pBizAppID and f.PathCode=p.Code;

 	select Seq into vBizSeq from Pf_A_Biz where BizCode=21 and BizID=pBizAppID; #21-立项申请
 	
 	insert into Pf_D_IndexContentOfAttach 
 	select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
 		case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
 		else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
 	from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
 	where f.DelTag='N' and f.PrimaryName='Pf_A_BizProcRcd' and exists(select 1 from Pf_A_BizProcRcd where WorkItem=f.PrimaryID and BizSeq=vBizSeq) and f.PathCode=p.Code;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `FillIndexForBiz22` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `FillIndexForBiz22`(
        IN `pBizAppID` INTEGER UNSIGNED
    )
    COMMENT '【22-尽职调查材料审批】业务流程结束后全文索引目标内容填充'
BEGIN
	declare vZw mediumtext; #正文
 	declare vYj mediumtext; #意见
 	declare vBizAppName VARCHAR(10); #业务/应用名
 	declare vBizAppTitle VARCHAR(100); #业务/应用标题
 	declare vViewUrl VARCHAR(100); #业务/应用查看页Url
 	
 	declare vAttachUpLoadTmpPath varchar(100);
 	declare vBizSeq integer unsigned;
 	
 	select b.BizTitle,concat_ws(' ',z.InitOrgName,Pf_UsrcName(z.InitUsrID),Pf_CodeValueByCharCode(21,z.BizStatus),ZxBg_XmMc(z.XmID),
    	Pf_UsrNamesOfUsrIDs(z.JzDcXzCyIDs))
 	into vBizAppTitle,vZw 
 	from ZxBg_A_JzDc z,Pf_A_Biz b
 	where z.ID=b.BizID and b.BizCode=22 and z.ID=pBizAppID;
 	
 	set vBizAppName='尽职调查材料审批';
 	select Pf_StrAfterFistSlash(ViewUrl) into vViewUrl from Pf_M_Biz where Name=vBizAppName;
 	set vYj=Pf_FullTextOfBizProcNote(vBizAppName,pBizAppID);
 	set vZw=CONCAT(vZw,' ',ifnull(vYj,'-'));
 	
 	#填充索引目标-表单主体
 	delete from Pf_D_IndexContentOfMainText where BizAppName=vBizAppName and BizAppID=pBizAppID; 
 	
 	insert into Pf_D_IndexContentOfMainText values (vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,vZw);
 	
 	#填充索引目标-附件路径
 	delete from Pf_D_IndexContentOfAttach where BizAppName=vBizAppName and BizAppID=pBizAppID; 
 	
 	select AttachUpLoadTmpPath into vAttachUpLoadTmpPath from Pf_M_Ent;
 	
 	insert into Pf_D_IndexContentOfAttach 
 	select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
 		case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
 		else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
 	from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
 	where f.DelTag='N' and f.PrimaryName = 'ZxBg_A_JzDc' and f.PrimaryID=pBizAppID and f.PathCode=p.Code;

 	select Seq into vBizSeq from Pf_A_Biz where BizCode=22 and BizID=pBizAppID; #22-尽职调查材料审批
 	
 	insert into Pf_D_IndexContentOfAttach 
 	select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
 		case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
 		else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
 	from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
 	where f.DelTag='N' and f.PrimaryName='Pf_A_BizProcRcd' and exists(select 1 from Pf_A_BizProcRcd where WorkItem=f.PrimaryID and BizSeq=vBizSeq) and f.PathCode=p.Code;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `FillIndexForBiz23` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `FillIndexForBiz23`(
        IN `pBizAppID` INTEGER UNSIGNED
    )
    COMMENT '【23-项目审查】业务流程结束后全文索引目标内容填充'
BEGIN
	declare vZw mediumtext; #正文
 	declare vYj mediumtext; #意见
 	declare vBizAppName VARCHAR(10); #业务/应用名
 	declare vBizAppTitle VARCHAR(100); #业务/应用标题
 	declare vViewUrl VARCHAR(100); #业务/应用查看页Url
 	
 	declare vAttachUpLoadTmpPath varchar(100);
 	declare vBizSeq integer unsigned;
 	
 	select b.BizTitle,concat_ws(' ',z.InitOrgName,Pf_UsrcName(z.InitUsrID),Pf_CodeValueByCharCode(21,z.BizStatus),ZxBg_XmMc(z.XmID),z.JgMs)
 	into vBizAppTitle,vZw 
 	from ZxBg_A_XmSc z,Pf_A_Biz b
 	where z.ID=b.BizID and b.BizCode=23 and z.ID=pBizAppID;
 	
 	set vBizAppName='项目审查';
 	select Pf_StrAfterFistSlash(ViewUrl) into vViewUrl from Pf_M_Biz where Name=vBizAppName;
 	set vYj=Pf_FullTextOfBizProcNote(vBizAppName,pBizAppID);
 	set vZw=CONCAT(vZw,' ',ifnull(vYj,'-'));
 	
 	#填充索引目标-表单主体
 	delete from Pf_D_IndexContentOfMainText where BizAppName=vBizAppName and BizAppID=pBizAppID; 
 	
 	insert into Pf_D_IndexContentOfMainText values (vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,vZw);
 	
 	#填充索引目标-附件路径
 	delete from Pf_D_IndexContentOfAttach where BizAppName=vBizAppName and BizAppID=pBizAppID; 
 	
 	select AttachUpLoadTmpPath into vAttachUpLoadTmpPath from Pf_M_Ent;
 	
 	select Seq into vBizSeq from Pf_A_Biz where BizCode=23 and BizID=pBizAppID; #23-项目审查
 	
 	insert into Pf_D_IndexContentOfAttach 
 	select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
 		case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
 		else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
 	from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
 	where f.DelTag='N' and f.PrimaryName='Pf_A_BizProcRcd' and exists(select 1 from Pf_A_BizProcRcd where WorkItem=f.PrimaryID and BizSeq=vBizSeq) and f.PathCode=p.Code;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `FillIndexForBiz24` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `FillIndexForBiz24`(
        IN `pBizAppID` INTEGER UNSIGNED
    )
    COMMENT '【24-项目审批】业务流程结束后全文索引目标内容填充'
BEGIN
	declare vZw mediumtext; #正文
 	declare vYj mediumtext; #意见
 	declare vBizAppName VARCHAR(10); #业务/应用名
 	declare vBizAppTitle VARCHAR(100); #业务/应用标题
 	declare vViewUrl VARCHAR(100); #业务/应用查看页Url
 	
 	declare vAttachUpLoadTmpPath varchar(100);
 	declare vBizSeq integer unsigned;
 	
 	select b.BizTitle,concat_ws(' ',z.InitOrgName,Pf_UsrcName(z.InitUsrID),Pf_CodeValueByCharCode(21,z.BizStatus),ZxBg_XmMc(z.XmID),
    	Pf_UsrcName(z.ZcrID),Pf_UsrNamesOfUsrIDs(z.CxIDs),Pf_UsrNamesOfUsrIDs(z.LxIDs),ifnull(z.SsYj,'-'))
 	into vBizAppTitle,vZw 
 	from ZxBg_A_FaSp z,Pf_A_Biz b
 	where z.ID=b.BizID and b.BizCode=24 and z.ID=pBizAppID;
 	
 	set vBizAppName='项目审批';
 	select Pf_StrAfterFistSlash(ViewUrl) into vViewUrl from Pf_M_Biz where Name=vBizAppName;
 	set vYj=Pf_FullTextOfBizProcNote(vBizAppName,pBizAppID);
 	set vZw=CONCAT(vZw,' ',ifnull(vYj,'-'));
 	
 	#填充索引目标-表单主体
 	delete from Pf_D_IndexContentOfMainText where BizAppName=vBizAppName and BizAppID=pBizAppID; 
 	
 	insert into Pf_D_IndexContentOfMainText values (vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,vZw);
 	
 	#填充索引目标-附件路径
 	delete from Pf_D_IndexContentOfAttach where BizAppName=vBizAppName and BizAppID=pBizAppID; 
 	
 	select AttachUpLoadTmpPath into vAttachUpLoadTmpPath from Pf_M_Ent;
 	
 	select Seq into vBizSeq from Pf_A_Biz where BizCode=24 and BizID=pBizAppID; #24-项目审批
 	
 	insert into Pf_D_IndexContentOfAttach 
 	select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
 		case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
 		else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
 	from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
 	where f.DelTag='N' and f.PrimaryName='Pf_A_BizProcRcd' and exists(select 1 from Pf_A_BizProcRcd where WorkItem=f.PrimaryID and BizSeq=vBizSeq) and f.PathCode=p.Code;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `FillIndexForBiz25` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `FillIndexForBiz25`(
        IN `pBizAppID` INTEGER UNSIGNED
    )
    COMMENT '【25-印章、证照使用审批】业务流程结束后全文索引目标内容填充'
BEGIN
	declare vZw mediumtext; #正文
 	declare vYj mediumtext; #意见
 	declare vBizAppName VARCHAR(10); #业务/应用名
 	declare vBizAppTitle VARCHAR(100); #业务/应用标题
 	declare vViewUrl VARCHAR(100); #业务/应用查看页Url
 	
 	declare vAttachUpLoadTmpPath varchar(100);
 	declare vBizSeq integer unsigned;
 	
 	select b.BizTitle,concat_ws(' ',z.InitOrgName,Pf_UsrcName(z.InitUsrID),Pf_CodeValueByCharCode(21,z.BizStatus),
    	Pf_CodeValuesByCharCodes(27,z.SqYzLbCodes),ifnull(z.SqQtYzLbMc,'-'),Pf_CodeValuesByCharCodes(28,z.SqZzLbCodes),ifnull(z.SqQtZzLbMc,'-'),
        z.SqSy,ZxBg_YyHtMc(z.YyHtID,z.YyHtScID,z.YyWjHqID))
 	into vBizAppTitle,vZw 
 	from ZxBg_A_YzZzSq z,Pf_A_Biz b
 	where z.ID=b.BizID and b.BizCode=25 and z.ID=pBizAppID;
 	
 	set vBizAppName='印章、证照使用审批';
 	select Pf_StrAfterFistSlash(ViewUrl) into vViewUrl from Pf_M_Biz where Name=vBizAppName;
 	set vYj=Pf_FullTextOfBizProcNote(vBizAppName,pBizAppID);
 	set vZw=CONCAT(vZw,' ',ifnull(vYj,'-'));
 	
 	#填充索引目标-表单主体
 	delete from Pf_D_IndexContentOfMainText where BizAppName=vBizAppName and BizAppID=pBizAppID; 
 	
 	insert into Pf_D_IndexContentOfMainText values (vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,vZw);
 	
 	#填充索引目标-附件路径
 	delete from Pf_D_IndexContentOfAttach where BizAppName=vBizAppName and BizAppID=pBizAppID; 
 	
 	select AttachUpLoadTmpPath into vAttachUpLoadTmpPath from Pf_M_Ent;
 	
 	insert into Pf_D_IndexContentOfAttach 
 	select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
 		case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
 		else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
 	from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
 	where f.DelTag='N' and f.PrimaryName in ('ZxBg_A_YzZzSq_1','ZxBg_A_YzZzSq_2') and f.PrimaryID=pBizAppID and f.PathCode=p.Code;

 	select Seq into vBizSeq from Pf_A_Biz where BizCode=25 and BizID=pBizAppID; #25-印章、证照使用审批
 	
 	insert into Pf_D_IndexContentOfAttach 
 	select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
 		case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
 		else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
 	from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
 	where f.DelTag='N' and f.PrimaryName='Pf_A_BizProcRcd' and exists(select 1 from Pf_A_BizProcRcd where WorkItem=f.PrimaryID and BizSeq=vBizSeq) and f.PathCode=p.Code;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `FillIndexForBiz26` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `FillIndexForBiz26`(
        IN `pBizAppID` INTEGER UNSIGNED
    )
    COMMENT '【26-项目付款审批】业务流程结束后全文索引目标内容填充'
BEGIN
	declare vZw mediumtext; #正文
 	declare vYj mediumtext; #意见
 	declare vBizAppName VARCHAR(10); #业务/应用名
 	declare vBizAppTitle VARCHAR(100); #业务/应用标题
 	declare vViewUrl VARCHAR(100); #业务/应用查看页Url
 	
 	declare vAttachUpLoadTmpPath varchar(100);
 	declare vBizSeq integer unsigned;
 	
 	select b.BizTitle,concat_ws(' ',z.InitOrgName,Pf_UsrcName(z.InitUsrID),Pf_CodeValueByCharCode(21,z.BizStatus),
    	if(z.YjLb='a',ZxBg_XmMc(z.YjID),if(z.YjLb='b',ZxBg_HtMc(z.YjID),if(z.YjLb='c',ZxBg_LsXmMc(z.YjID),if(z.YjLb='d',ZxBg_LsXmHtMc(z.YjID),'-')))),
        z.SkrMc,z.Khh,z.AcctNo,Pf_CodeValueByCharCode(30,z.ZfFs),z.FkSy)
 	into vBizAppTitle,vZw 
 	from ZxBg_A_FkSp z,Pf_A_Biz b
 	where z.ID=b.BizID and b.BizCode=26 and z.ID=pBizAppID;
 	
 	set vBizAppName='项目付款审批';
 	select Pf_StrAfterFistSlash(ViewUrl) into vViewUrl from Pf_M_Biz where Name=vBizAppName;
 	set vYj=Pf_FullTextOfBizProcNote(vBizAppName,pBizAppID);
 	set vZw=CONCAT(vZw,' ',ifnull(vYj,'-'));
 	
 	#填充索引目标-表单主体
 	delete from Pf_D_IndexContentOfMainText where BizAppName=vBizAppName and BizAppID=pBizAppID; 
 	
 	insert into Pf_D_IndexContentOfMainText values (vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,vZw);
 	
 	#填充索引目标-附件路径
 	delete from Pf_D_IndexContentOfAttach where BizAppName=vBizAppName and BizAppID=pBizAppID; 
 	
 	select AttachUpLoadTmpPath into vAttachUpLoadTmpPath from Pf_M_Ent;
 	
 	insert into Pf_D_IndexContentOfAttach 
 	select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
 		case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
 		else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
 	from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
 	where f.DelTag='N' and f.PrimaryName = 'ZxBg_A_FkSp' and f.PrimaryID=pBizAppID and f.PathCode=p.Code;

 	select Seq into vBizSeq from Pf_A_Biz where BizCode=26 and BizID=pBizAppID; #26-项目付款审批
 	
 	insert into Pf_D_IndexContentOfAttach 
 	select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
 		case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
 		else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
 	from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
 	where f.DelTag='N' and f.PrimaryName='Pf_A_BizProcRcd' and exists(select 1 from Pf_A_BizProcRcd where WorkItem=f.PrimaryID and BizSeq=vBizSeq) and f.PathCode=p.Code;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `FillIndexForBiz27` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `FillIndexForBiz27`(
        IN `pBizAppID` INTEGER UNSIGNED
    )
    COMMENT '【27-合同审批】业务流程结束后全文索引目标内容填充'
BEGIN
	declare vZw mediumtext; #正文
 	declare vYj mediumtext; #意见
 	declare vBizAppName VARCHAR(10); #业务/应用名
 	declare vBizAppTitle VARCHAR(100); #业务/应用标题
 	declare vViewUrl VARCHAR(100); #业务/应用查看页Url
 	
 	declare vAttachUpLoadTmpPath varchar(100);
 	declare vBizSeq integer unsigned;
 	
 	select b.BizTitle,concat_ws(' ',z.InitOrgName,Pf_UsrcName(z.InitUsrID),
    	m.XmMc,m.XmBh,REPLACE(REPLACE(m.XmJj,CHAR(10),''),CHAR(13),''),z.HtMc,z.HtBh)
 	into vBizAppTitle,vZw 
 	from ZxBg_A_HtSp z join ZxBg_M_XmXx m on z.XmID=m.ID,Pf_A_Biz b
 	where z.ID=b.BizID and b.BizCode=27 and z.ID=pBizAppID;
 	
 	set vBizAppName='合同审批';
 	select Pf_StrAfterFistSlash(ViewUrl) into vViewUrl from Pf_M_Biz where Name=vBizAppName;
 	set vYj=Pf_FullTextOfBizProcNote(vBizAppName,pBizAppID);
 	set vZw=CONCAT(vZw,' ',ifnull(vYj,'-'));
 	
 	#填充索引目标-表单主体
 	delete from Pf_D_IndexContentOfMainText where BizAppName=vBizAppName and BizAppID=pBizAppID; 
 	
 	insert into Pf_D_IndexContentOfMainText values (vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,vZw);
 	
 	#填充索引目标-附件路径
 	delete from Pf_D_IndexContentOfAttach where BizAppName=vBizAppName and BizAppID=pBizAppID; 
 	
 	select AttachUpLoadTmpPath into vAttachUpLoadTmpPath from Pf_M_Ent;
 	
 	insert into Pf_D_IndexContentOfAttach 
 	select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
 		case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
 		else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
 	from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
 	where f.DelTag='N' and f.PrimaryName = 'ZxBg_A_HtSp' and f.PrimaryID=pBizAppID and f.PathCode=p.Code;

 	select Seq into vBizSeq from Pf_A_Biz where BizCode=27 and BizID=pBizAppID; #27-合同审批
 	
 	insert into Pf_D_IndexContentOfAttach 
 	select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
 		case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
 		else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
 	from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
 	where f.DelTag='N' and f.PrimaryName='Pf_A_BizProcRcd' and 
    	exists(select 1 from Pf_A_BizProcRcd where WorkItem=f.PrimaryID and BizSeq=vBizSeq) and f.PathCode=p.Code;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `FillIndexForBiz28` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `FillIndexForBiz28`(
        IN `pBizAppID` INTEGER UNSIGNED
    )
    COMMENT '【28-合同审查】业务流程结束后全文索引目标内容填充'
BEGIN
	declare vZw mediumtext; #正文
 	declare vYj mediumtext; #意见
 	declare vBizAppName VARCHAR(10); #业务/应用名
 	declare vBizAppTitle VARCHAR(100); #业务/应用标题
 	declare vViewUrl VARCHAR(100); #业务/应用查看页Url
 	
 	declare vAttachUpLoadTmpPath varchar(100);
 	declare vBizSeq integer unsigned;
 	
 	select b.BizTitle,concat_ws(' ',z.InitOrgName,Pf_UsrcName(z.InitUsrID),
    	m.XmMc,Pf_EntAppCodeVal(m.XmDwID),REPLACE(REPLACE(m.XmJj,CHAR(10),''),CHAR(13),''),z.HtMc,z.HtBh)
 	into vBizAppTitle,vZw 
 	from ZxBg_A_HtSc z join ZxBg_M_LsXm m on z.XmID=m.ID,Pf_A_Biz b
 	where z.ID=b.BizID and b.BizCode=28 and z.ID=pBizAppID;
 	
 	set vBizAppName='合同审查';
 	select Pf_StrAfterFistSlash(ViewUrl) into vViewUrl from Pf_M_Biz where Name=vBizAppName;
 	set vYj=Pf_FullTextOfBizProcNote(vBizAppName,pBizAppID);
 	set vZw=CONCAT(vZw,' ',ifnull(vYj,'-'));
 	
 	#填充索引目标-表单主体
 	delete from Pf_D_IndexContentOfMainText where BizAppName=vBizAppName and BizAppID=pBizAppID; 
 	
 	insert into Pf_D_IndexContentOfMainText values (vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,vZw);
 	
 	#填充索引目标-附件路径
 	delete from Pf_D_IndexContentOfAttach where BizAppName=vBizAppName and BizAppID=pBizAppID; 
 	
 	select AttachUpLoadTmpPath into vAttachUpLoadTmpPath from Pf_M_Ent;
 	
 	insert into Pf_D_IndexContentOfAttach 
 	select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
 		case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
 		else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
 	from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
 	where f.DelTag='N' and f.PrimaryName = 'ZxBg_A_HtSc' and f.PrimaryID=pBizAppID and f.PathCode=p.Code;

 	select Seq into vBizSeq from Pf_A_Biz where BizCode=28 and BizID=pBizAppID; #28-合同审查
 	
 	insert into Pf_D_IndexContentOfAttach 
 	select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
 		case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
 		else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
 	from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
 	where f.DelTag='N' and f.PrimaryName='Pf_A_BizProcRcd' and 
    	exists(select 1 from Pf_A_BizProcRcd where WorkItem=f.PrimaryID and BizSeq=vBizSeq) and f.PathCode=p.Code;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `FillIndexForDsXd` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `FillIndexForDsXd`(
        IN `pBizAppID` INTEGER UNSIGNED
    )
    COMMENT '【读书心得】提交后全文索引目标内容填充'
BEGIN
	declare vZw mediumtext;				#正文
    declare vTsPj mediumtext;			#同事评价
    declare vBizAppName VARCHAR(10);	#业务/应用名
    declare vBizAppTitle VARCHAR(100);	#业务/应用标题
    declare vViewUrl VARCHAR(100);		#业务/应用查看页Url
    
    declare vAttachUpLoadTmpPath varchar(100);
    
    select concat(Pf_UsrcName(a.YdrID),'[',m.Sm,']读书心得'),
    	concat_ws(' ',Pf_UsrcName(a.YdrID),a.YdrBm,m.Sm,m.Zz,REPLACE(REPLACE(m.Jj,CHAR(10),''),CHAR(13),''),
        	REPLACE(REPLACE(a.Xd,CHAR(10),''),CHAR(13),''))
    into vBizAppTitle,vZw 
    from Dsj_A_Xd a,Dsj_M_Book m
    where a.ID=pBizAppID and a.BookID=m.ID;

	select group_concat(concat(Pf_UsrcName(YyTsID),'：',REPLACE(REPLACE(Pj,CHAR(10),''),CHAR(13),'')) order by PjSj Separator ' ')
    into vTsPj
    from Dsj_A_XdYdRcd
    where XdID=pBizAppID and PjSj is not null;
    
    if vTsPj!='' THEN
    	set vZw=concat(vZw,' ',vTsPj);
    end if;
    
    set vBizAppName='读书心得';
    set vViewUrl='../FileApp/Dsj/ListB/edit.jsp?ID='; 
    
    #填充索引目标-表单主体
	delete from Pf_D_IndexContentOfMainText where BizAppName=vBizAppName and BizAppID=pBizAppID; 
    
    insert into Pf_D_IndexContentOfMainText values (vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,vZw);
    
    #填充索引目标-附件路径
    delete from Pf_D_IndexContentOfAttach where BizAppName=vBizAppName and BizAppID=pBizAppID; 
    
    select AttachUpLoadTmpPath into vAttachUpLoadTmpPath from Pf_M_Ent;
    
    insert into Pf_D_IndexContentOfAttach 
    select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
    	case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
        else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
    from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
    where f.DelTag='N' and f.PrimaryName = 'Dsj_A_Xd' and f.PrimaryID=pBizAppID and f.PathCode=p.Code;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `FillIndexForGzHb` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `FillIndexForGzHb`(
        IN `pBizAppID` INTEGER UNSIGNED
    )
    COMMENT '【工作汇报X】提交后全文索引目标内容填充'
BEGIN
	declare vZw mediumtext;				#正文
    declare vLdDp mediumtext;			#领导点评
    declare vBizAppName VARCHAR(10);	#业务/应用名
    declare vBizAppTitle VARCHAR(100);	#业务/应用标题
    declare vViewUrl VARCHAR(100);		#业务/应用查看页Url
    
    declare vAttachUpLoadTmpPath varchar(100);
    
    select concat(Pf_UsrcName(InitUsrID),'，时段[',DATE_FORMAT(GzSdS,'%Y-%m-%d'),'~',DATE_FORMAT(GzSdM,'%Y-%m-%d'),']工作总结'),
    	concat_ws(' ',Pf_UsrcName(InitUsrID),InitOrgName,REPLACE(REPLACE(ZyCg,CHAR(10),''),CHAR(13),''),REPLACE(REPLACE(XyJdMb,CHAR(10),''),CHAR(13),''),
        REPLACE(REPLACE(ifnull(RdWt,'-'),CHAR(10),''),CHAR(13),''),REPLACE(REPLACE(ifnull(GrJy,'-'),CHAR(10),''),CHAR(13),''))
    into vBizAppTitle,vZw 
    from GzHb_A_Zt
    where ID=pBizAppID;

	select group_concat(concat(Pf_UsrcName(HbLdUsrID),'：',REPLACE(REPLACE(LdDp,CHAR(10),''),CHAR(13),'')) Separator ' ')
    into vLdDp
    from GzHb_A_HbLd
    where HbID=pBizAppID and LdDpSj is not null;
    if vLdDp!='' THEN
    	set vZw=concat(vZw,' ',vLdDp);
    end if;
    
    set vBizAppName='工作汇报';
    set vViewUrl='../FileApp/GzHb/ListB/view.jsp?ID='; 
    
    #填充索引目标-表单主体
	delete from Pf_D_IndexContentOfMainText where BizAppName=vBizAppName and BizAppID=pBizAppID; 
    
    insert into Pf_D_IndexContentOfMainText values (vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,vZw);
    
    #填充索引目标-附件路径
    delete from Pf_D_IndexContentOfAttach where BizAppName=vBizAppName and BizAppID=pBizAppID; 
    
    select AttachUpLoadTmpPath into vAttachUpLoadTmpPath from Pf_M_Ent;
    
    insert into Pf_D_IndexContentOfAttach 
    select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
    	case when f.LocationTag='N' then concat(vAttachUpLoadTmpPath,f.CreatedBy,'_',DATE_FORMAT(f.CreatedTs, '%Y%m%d_%H_%i_%s'),'//',f.Seq,f.FileExt) 
        else concat(p.fPath,DATE_FORMAT(f.RecDivTag,'%Y%m'),'//',f.PrimaryName,'//',f.Seq,f.FileExt) end, f.FileName,f.FileExt,f.FileSize,f.Seq
    from Pf_M_AppAttachPath p,Pf_A_AttachInfo f 
    where f.DelTag='N' and f.PrimaryName = 'GzHb_A_Zt' and f.PrimaryID=pBizAppID and f.PathCode=p.Code;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `FillIndexForZdHb` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `FillIndexForZdHb`(
        IN `pBizAppID` INTEGER UNSIGNED
    )
    COMMENT '【制度汇编】提交后全文索引目标内容填充'
BEGIN
	declare vZw mediumtext;				#正文
    declare vBizAppName VARCHAR(10);	#业务/应用名
    declare vBizAppTitle VARCHAR(100);	#业务/应用标题
    declare vViewUrl VARCHAR(100);		#业务/应用查看页Url
    
    declare vAttachUpLoadTmpPath,vMasterAttachPath varchar(100);
    
    select concat('制度文件：',Bt),concat_ws(' ',Pf_UsrcName(InitUsrID),InitOrgName,Bt)
    into vBizAppTitle,vZw 
    from ZdHb_M_Zt
    where ID=pBizAppID;

    set vBizAppName='制度汇编';
    set vViewUrl='../EntMasters/ZdHb/view.jsp?ID='; 
    
    #填充索引目标-表单主体
	delete from Pf_D_IndexContentOfMainText where BizAppName=vBizAppName and BizAppID=pBizAppID; 
    
    insert into Pf_D_IndexContentOfMainText values (vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,vZw);
    
    #填充索引目标-附件路径
    delete from Pf_D_IndexContentOfAttach where BizAppName=vBizAppName and BizAppID=pBizAppID; 
    
    select AttachUpLoadTmpPath,MasterAttachPath into vAttachUpLoadTmpPath,vMasterAttachPath from Pf_M_Ent;
    
    insert into Pf_D_IndexContentOfAttach 
    select vBizAppName,pBizAppID,vBizAppTitle,vViewUrl,
    	case when LocationTag='N' then concat(vAttachUpLoadTmpPath,CreatedBy,'_',DATE_FORMAT(CreatedTs, '%Y%m%d_%H_%i_%s'),'//',ID,FileExt) 
        else concat(vMasterAttachPath,PrimaryName,'//',ID,FileExt) end, FileName,FileExt,FileSize,ID
    from Pf_M_AttachInfo
    where DelTag='N' and PrimaryName = 'ZdHb_M_Zt' and PrimaryID=pBizAppID;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `Ft_FillIndexContentOfBizAppIDs` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `Ft_FillIndexContentOfBizAppIDs`(
        IN `pBizAppIDs` VARCHAR(1000),
        IN `pBizAppName` VARCHAR(10)
    )
    COMMENT '所有应用全文索引目标内容填充调用入口'
BEGIN
    declare vBizCode tinyint unsigned;
    declare vSql varchar(100);
    declare i integer unsigned;
    
    set i=1;
    
    select coalesce(Code,0) into vBizCode from Pf_M_Biz where Name=pBizAppName;
    if vBizCode>0 then
    	while i<=Pf_SplitStrCnt(pBizAppIDs,',') do
    		set vSql=CONCAT('call FillIndexForBiz',lpad(cast(vBizCode as char),2,'0'),'(',Pf_SplitStr(pBizAppIDs,',',i),')');
        	set @vSql=vSql;
 			prepare stmt from @vSql;
 			EXECUTE stmt; 
 			deallocate prepare stmt;
            
            set i=i+1;
        end while;
    else
    	if pBizAppName='工作汇报' then
        	while i<=Pf_SplitStrCnt(pBizAppIDs,',') do
        		call FillIndexForGzHb(Pf_SplitStr(pBizAppIDs,',',i)+0);
                
                set i=i+1;
            end while;
        end if;

    	if pBizAppName='制度汇编' then
        	while i<=Pf_SplitStrCnt(pBizAppIDs,',') do
        		call FillIndexForZdHb(Pf_SplitStr(pBizAppIDs,',',i)+0);
                
                set i=i+1;
            end while;
        end if;

    	if pBizAppName='读书心得' then
        	while i<=Pf_SplitStrCnt(pBizAppIDs,',') do
        		call FillIndexForDsXd(Pf_SplitStr(pBizAppIDs,',',i)+0);
                
                set i=i+1;
            end while;
        end if;
    end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `Ft_FillIndexOfAllToCmdList` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `Ft_FillIndexOfAllToCmdList`()
    COMMENT '全部应用全文索引生成命令填充'
BEGIN
	delete from Pf_D_FullIndexCmdList;

	#Pf_D_FullIndexCmdList(Seq,BizAppName,BizAppID,OperateType,RetryCnt,ErrMsg,CmdFlag,CmdExeTs)
    insert into Pf_D_FullIndexCmdList 
    select null,Pf_BizName(BizCode),BizID,'1',0,null,'I',null from Pf_A_Biz where Pf_BizNodeSysBitByPt(FlowStatus,1)='E';

    insert into Pf_D_FullIndexCmdList 
    select null,'工作汇报',ID,'1',0,null,'I',null from GzHb_A_Zt where SubmitTs is not null;

    insert into Pf_D_FullIndexCmdList 
    select null,'制度汇编',ID,'1',0,null,'I',null from ZdHb_M_Zt where SubmitTs is not null;

    insert into Pf_D_FullIndexCmdList 
    select null,'读书心得',ID,'1',0,null,'I',null from Dsj_A_Xd where FbSj is not null;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `GzHb_Del` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `GzHb_Del`(
        IN `pGzHbID` INTEGER UNSIGNED
    )
    COMMENT '【工作汇报X】指定实例删除'
BEGIN
	# 删除索引命令
 	delete from Pf_D_FullIndexCmdList where BizAppName='工作汇报' and BizAppID=pGzHbID;
 	delete from Pf_D_IndexContentOfMainText where BizAppName='工作汇报' and BizAppID=pGzHbID;
 	delete from Pf_D_IndexContentOfAttach where BizAppName='工作汇报' and BizAppID=pGzHbID;
 
 	#删除主体
 	delete from GzHb_A_Zt where ID=pGzHbID;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `HyGl_UpdateHyCdSj` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `HyGl_UpdateHyCdSj`(
        IN `pID` INTEGER
    )
    COMMENT '更改会议场地/时间后通知发送过程'
BEGIN
	declare vPrompt varchar(1000);
    declare vBizTitle varchar(100);
    declare vDdName varchar(100);
    declare vMc varchar(40);
    declare vZkSj DATETIME;
    declare vBmSj DATETIME;
    
    declare vUsrID smallint unsigned;
    declare vUsrcName varchar(10);

    declare done INT DEFAULT 0;
    declare cur1 cursor for select a.ID, a.cName from Pf_M_Usr a,Hy_A_Zt c where  FIND_IN_SET(a.ID,c.NbChRyUsrIDs)>0 and c.ID=pID; 
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;
    
    select c.Dd,c.Mc Mc,a.ZkSj,a.BmSj into vDdName,vMc,vZkSj,vBmSj from  Hy_M_Cd c ,Hy_A_Zt a  where a.CdID=c.ID and a.ID=pID;
    select BizTitle into vBizTitle from Pf_A_Biz where BizCode=16 and BizID=pID;
	
    set done=0;
	open cur1;
	fetch cur1 into vUsrID,vUsrcName;
	while (done!=1) do
		set vPrompt=concat(vUsrcName,'，你好！',Char(13),Char(10),'    标题为：[',vBizTitle,']的会议召开时间改为',vZkSj,'~',vBmSj,'召开地点改为',vDdName,'，',vMc,
        	'请各位参与人员按时到会！',char(13),char(10),char(13),char(10));
            
		insert into Pf_D_PromptMail values (null, now(), '会议通知提醒',vPrompt, now(), 'N');
        insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(vUsrID),'Z');
    
        fetch cur1 into vUsrID,vUsrcName;
    end while; 
    close cur1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `KqPd_InitDaily` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `KqPd_InitDaily`()
BEGIN
	declare vKqUsrID smallint unsigned;
    declare vEntryDate,vNowDate,vKqNyFirstDay,vLastKqRq,vLoopDate date;
    declare vKqNy char(6);
    
    declare vCnt tinyint unsigned;
    
    declare vLjID integer unsigned;
    
	declare done tinyint default 0;
    declare c_KqUsrs cursor for select ID,EntryDate from Pf_M_Usr where IsValid='Y';
    declare CONTINUE HANDLER FOR NOT FOUND SET done = 1;
    
    # >>>
    set vNowDate=date(now());
    set vKqNy=DATE_FORMAT(vNowDate,'%Y%m');
    set vKqNyFirstDay=str_to_date(concat(vKqNy,'01'),'%Y%m%d');
    
    set done=0;
    open c_KqUsrs;
    fetch c_KqUsrs into vKqUsrID,vEntryDate;
    while (done!=1) do
    	select count(*) into vCnt from KqPd_A_Lj where KqNy=vKqNy and UsrID=vKqUsrID;
        if vCnt=0 then 
        	#无当月累计则初始化【考勤评定累计KqPd_A_Lj】
        	insert into KqPd_A_Lj values (now(),null,vKqNy,vKqUsrID,0,0,0,0);
        	set vLjID=@@identity;
        	set vLastKqRq=DATE_ADD(vKqNyFirstDay,interval -1 day);
        else
        	select ID into vLjID from KqPd_A_Lj where KqNy=vKqNy and UsrID=vKqUsrID;
        	select ifnull(max(KqRq),DATE_ADD(vKqNyFirstDay,interval -1 day)) into vLastKqRq 
            from KqPd_A_Mx where LjID=vLjID;
        end if;
        
        #按默认出勤、插入本表：从【月初 / 当月入职日期 / 当月出勤末记录考勤日期】到今天的记录
        if vEntryDate>=vKqNyFirstDay then #本月新入职
        	set vLoopDate=DATE_ADD(vEntryDate,interval 1 day);
        	if vEntryDate<vLastKqRq then #入职后有考勤记录则修正本次考勤起始日
        		set vLoopDate=DATE_ADD(vLastKqRq,interval 1 day);
        	end if;
        else
        	set vLoopDate=DATE_ADD(vLastKqRq,interval 1 day);
    	end if;
        
        while vLoopDate<=vNowDate do
        	select count(*) into vCnt from Pf_M_PubHoliday where vLoopDate between Day1 and Day2;
        	if vCnt=0 then #节假日除外
        		insert into KqPd_A_Mx values (now(),null,vLjID,vLoopDate,'S','Y',null);
        		insert into KqPd_A_Mx values (now(),null,vLjID,vLoopDate,'X','Y',null);
        	end if;
        	
        	set vLoopDate=DATE_ADD(vLoopDate,interval 1 day);
        end while;
        
    	fetch c_KqUsrs into vKqUsrID,vEntryDate;
    end while;
    close c_KqUsrs;
    
    delete from KqPd_A_Lj where DATE_ADD(RecDivTag,interval 365 day)<vNowDate;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `Pf_BatchAddPubHoliday` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `Pf_BatchAddPubHoliday`(
        IN `pYear` CHAR(4)
    )
    COMMENT '公假（周六周日）批量增加'
BEGIN
	declare vCurrDate,vYearEndDate date;
    
    set vCurrDate = concat(pYear,'-01-01');
    set vYearEndDate = concat(pYear,'-12-31');
    while vCurrDate<=vYearEndDate do
    	if DAYOFWEEK(vCurrDate)!=7 THEN
        	set vCurrDate=DATE_ADD(vCurrDate,interval 1 day);
        else
        	insert into Pf_M_PubHoliday (Day1,Day2,IfLegal) values (vCurrDate,DATE_ADD(vCurrDate,interval 1 day),'N');
            set vCurrDate=DATE_ADD(vCurrDate,interval 7 day);
        end if; 
    end while;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `Pf_CalcOrgCfsFatherFrom` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `Pf_CalcOrgCfsFatherFrom`(
        IN `pFatherOrgID` SMALLINT UNSIGNED
    )
    COMMENT '从指定父机构开始，计算从属机构计算字段：层级、大排序、全称'
BEGIN
	declare vTreeLevel tinyint unsigned;
    declare vFatherFromBigOrdCode VARCHAR(30);
    declare vExists tinyint unsigned;
    declare vParentOrgID smallint unsigned;
    declare vParentBigOrdCode VARCHAR(30);
    declare vParentFullName VARCHAR(200);
    
	DECLARE done INT DEFAULT 0;
    declare cur1 CURSOR for select ID,BigOrdCode,FullName from Pf_M_Org where TreeLevel = vTreeLevel and instr(BigOrdCode,vFatherFromBigOrdCode)=1;
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;
    
    select TreeLevel,BigOrdCode into vTreeLevel,vFatherFromBigOrdCode from Pf_M_Org where ID=pFatherOrgID; 
    
    set vExists = 1; 
    while vExists>0 do
	    open cur1; 
	    REPEAT  
	        fetch cur1 into vParentOrgID,vParentBigOrdCode,vParentFullName; 
	        update Pf_M_Org 
	        set TreeLevel = vTreeLevel+1,BigOrdCode = concat(vParentBigOrdCode,LPAD(concat(SmallOrd,''),3,'0')),FullName=concat(vParentFullName,'/',ShortName)  
	        where ParentID = vParentOrgID; 
	  	UNTIL done END REPEAT; 
	  	close cur1; 
	 	SET done = 0;
        
		set vTreeLevel = vTreeLevel + 1; 
		select count(*) into vExists from Pf_M_Org where TreeLevel = vTreeLevel and instr(BigOrdCode,vFatherFromBigOrdCode)=1; 
    end while; 
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `Pf_CalcRoleCfsFatherFrom` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `Pf_CalcRoleCfsFatherFrom`(
        IN `pFatherRoleID` TINYINT UNSIGNED
    )
    COMMENT '从指定父角色开始，计算子角色计算字段：层级、大排序、全称'
BEGIN
	declare vTreeLevel tinyint unsigned;
    declare vFatherFromBigOrdCode VARCHAR(12);
    declare vExists tinyint unsigned;
    declare vParentRoleID tinyint unsigned;
    declare vParentBigOrdCode VARCHAR(12);
    declare vParentFullName VARCHAR(60);
    
	DECLARE done INT DEFAULT 0;
    declare cur1 CURSOR for select ID,BigOrdCode,FullName from Pf_M_Role where TreeLevel = vTreeLevel and instr(BigOrdCode,vFatherFromBigOrdCode)=1;
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;
    
    select TreeLevel,BigOrdCode into vTreeLevel,vFatherFromBigOrdCode from Pf_M_Role where ID=pFatherRoleID; 
    
    set vExists = 1; 
    while vExists>0 do
	    open cur1; 
	    REPEAT  
	        fetch cur1 into vParentRoleID,vParentBigOrdCode,vParentFullName; 
	        update Pf_M_Role 
	        set TreeLevel = vTreeLevel+1,BigOrdCode = concat(vParentBigOrdCode,LPAD(concat(SmallOrd,''),3,'0')),FullName=concat(vParentFullName,'/',Name)  
	        where ParentID = vParentRoleID; 
	  	UNTIL done END REPEAT; 
	  	close cur1; 
	 	SET done = 0;
        
		set vTreeLevel = vTreeLevel + 1; 
		select count(*) into vExists from Pf_M_Role where TreeLevel = vTreeLevel and instr(BigOrdCode,vFatherFromBigOrdCode)=1; 
    end while; 
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `Pf_CopyFlow` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `Pf_CopyFlow`(
        IN `pNewFlowName` VARCHAR(20),
        IN `pCopyFromFlowID` TINYINT UNSIGNED
    )
    COMMENT '框架控制台部件：拷贝全套指定流程定义并冠以新流程名'
BEGIN
	declare vNewFlowID,vNewBizCode,vCopyFromBizCode tinyint unsigned;
    
    declare vName varchar(40);
    declare vBizNodeID1,vBizNodeID2,vSpecNodeID smallint;
    declare vMapCond varchar(1000);
    declare vMapCondDesc varchar(500);
    declare vPsnSelAttr tinyint unsigned;
    declare vCanSetNextNodePTL,vPassReject char(1);
    declare vSpecRoleID tinyint unsigned;
    declare vDisplayOrd tinyint unsigned;
    declare vProcTimeLimit tinyint unsigned;
    
    DECLARE done INT DEFAULT 0;
    declare cur1 CURSOR for 
    	select Name,BizNodeID1,BizNodeID2,MapCond,MapCondDesc,PsnSelAttr,SpecNodeID,CanSetNextNodePTL,SpecRoleID,PassReject,DisplayOrd,ProcTimeLimit
        from Pf_M_BizFlowBranch 
        where BizFlowID = pCopyFromFlowID and IfValid='Y'
        order by Pf_BizNodeOrd(BizNodeID1),DisplayOrd;
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;
    
    select ID,BizCode Into vNewFlowID,vNewBizCode from Pf_M_BizFlow Where Name=pNewFlowName;
    select BizCode into vCopyFromBizCode from Pf_M_BizFlow where ID=pCopyFromFlowID;
    if vNewBizCode=vCopyFromBizCode then
    	open cur1;
        fetch cur1 into vName,vBizNodeID1,vBizNodeID2,vMapCond,vMapCondDesc,vPsnSelAttr,vSpecNodeID,vCanSetNextNodePTL,vSpecRoleID,vPassReject,vDisplayOrd,vProcTimeLimit;
    	while (done!=1) do
        	Insert Into Pf_M_BizFlowBranch (Name,BizFlowID,BizNodeID1,BizNodeID2,IfValid,MapCond,MapCondDesc,PsnSelAttr,SpecNodeID,CanSetNextNodePTL,SpecRoleID,PassReject,DisplayOrd,ProcTimeLimit)
        	values (vName,vNewFlowID,vBizNodeID1,vBizNodeID2,'Y',vMapCond,vMapCondDesc,vPsnSelAttr,vSpecNodeID,vCanSetNextNodePTL,vSpecRoleID,vPassReject,vDisplayOrd,vProcTimeLimit);
    		fetch cur1 into vName,vBizNodeID1,vBizNodeID2,vMapCond,vMapCondDesc,vPsnSelAttr,vSpecNodeID,vCanSetNextNodePTL,vSpecRoleID,vPassReject,vDisplayOrd,vProcTimeLimit;
        end while; 
        close cur1;
    end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `Pf_DelAttach` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `Pf_DelAttach`(
        IN `pMA` CHAR(1),
        IN `pAttachFileIDSeq` INTEGER(12) UNSIGNED
    )
    COMMENT '删除单一附件独立过程'
BEGIN
	declare vPrimaryName varchar(30);
    
    if pMA='M' then
    	update Pf_M_AttachInfo set DelTag='Y' where ID=pAttachFileIDSeq;
    else
    	select PrimaryName into vPrimaryName from Pf_A_AttachInfo where Seq=pAttachFileIDSeq;
        
        if vPrimaryName = 'WjHq_A_Zt1' then
        	update Pf_A_AttachInfo
        	set DelTag='Y'
        	where PrimaryName in ('WjHq_A_Zt1_Td','WjHq_A_Zt1_TdPdf') and PrimaryID=pAttachFileIDSeq;
        end if;
        
        if vPrimaryName = 'ZxBg_A_HtSc' then
        	update Pf_A_AttachInfo
        	set DelTag='Y'
        	where PrimaryName in ('ZxBg_A_HtSc_Td','ZxBg_A_HtSc_TdPdf') and PrimaryID=pAttachFileIDSeq;
        end if;
        
        if vPrimaryName = 'ZxBg_A_HtSp' then
        	update Pf_A_AttachInfo
        	set DelTag='Y'
        	where PrimaryName in ('ZxBg_A_HtSp_Td','ZxBg_A_HtSp_TdPdf') and PrimaryID=pAttachFileIDSeq;
        end if;
        
        update Pf_A_AttachInfo set DelTag='Y' where Seq=pAttachFileIDSeq;
    end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `Pf_DelBiz` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `Pf_DelBiz`(
        IN `pBizSeq` INTEGER UNSIGNED
    )
    COMMENT '活动单业务实例删除统一过程'
BEGIN
	declare vBizCode tinyint unsigned;
 	declare vBizName varchar(10);
 	declare vBizTableName varchar(30);
 	declare vBizID int unsigned;
 	declare vSql varchar(100);
 	
 	# 删除准备
 	select BizCode,BizID into vBizCode,vBizID from Pf_A_Biz where Seq=pBizSeq;
 	select Name,BizTableName into vBizName,vBizTableName from Pf_M_Biz where Code=vBizCode;
 	set vSql=CONCAT('delete from ',vBizTableName,' where ID=',cast(vBizID as char));
 	
 	# 删除抽象业务表：1、外键级联删除工作流处理记录；2、After触发删除索引命令与索引对象；3、Before触发对处理意见附件标记删除
 	delete from Pf_A_Biz where Seq=pBizSeq;
 	
 	# 删除业务主表（级联对主表下卦附件标记删除），级联删除业务子表（级联对子表下卦附件标记删除）
 	set @vSql=vSql;
 	prepare stmt from @vSql;
 	EXECUTE stmt; 
 	deallocate prepare stmt;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `Pf_DelOrg` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `Pf_DelOrg`(
        IN `pOrgID` SMALLINT UNSIGNED
    )
    COMMENT '删除指定机构、级联删除其子机构'
BEGIN
	declare vBigOrdCode varchar(30);
    
    select BigOrdCode into vBigOrdCode from Pf_M_Org where ID=pOrgID; 
    delete from Pf_M_Org where instr(BigOrdCode,vBigOrdCode)=1; 
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `Pf_DelOrgUsr` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `Pf_DelOrgUsr`(
        IN `pParentOrgID` SMALLINT(5) UNSIGNED,
        IN `pUsrID` SMALLINT(5) UNSIGNED
    )
    COMMENT '从指定部门删除指定用户'
BEGIN
	declare vIsMainOrg char(1);
    declare vCnt tinyint unsigned;
    
    Select IsMainOrg Into vIsMainOrg From Pf_M_OrgUsr Where UsrID=pUsrID And OrgID=pParentOrgID; 
    Select Count(*) Into vCnt From Pf_M_OrgUsr Where UsrID=pUsrID;
    if vIsMainOrg='Y' or vCnt=1 then 
    	delete From Pf_M_OrgUsr Where UsrID=pUsrID;
        delete from Pf_M_RoleUsr where UsrID=pUsrID;
        delete from Pf_M_Usr where ID=pUsrID; 
        Update Pf_M_AttachInfo Set Deltag='Y' Where PrimaryID=pUsrID And PrimaryName = 'UsrPhoto';
    else
    	delete from Pf_M_OrgUsr where UsrID=pUsrID and OrgID=pParentOrgID; 
    end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `Pf_DelRole` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `Pf_DelRole`(
        IN `pRoleID` TINYINT UNSIGNED
    )
    COMMENT '角色及其子角色删除过程'
BEGIN
	declare vBigOrdCode varchar(12);
    
    select BigOrdCode into vBigOrdCode from Pf_M_Role where ID=pRoleID; 
    delete from Pf_M_Role where instr(BigOrdCode,vBigOrdCode)=1; 
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `Pf_FillBatchHandleBranch` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `Pf_FillBatchHandleBranch`(
        IN `pToDoWorkItems` VARCHAR(200)
    )
    COMMENT '向临时表插入满足待办批处理条件的流程分支'
label1:
BEGIN
	declare vCnt tinyint unsigned;
    declare vFlowDefID smallint(4) unsigned;
    declare vFlowStatus smallint(4);
    
    declare vInterfaceStyle char(1);
    declare vPsnSelAttr tinyint(3) unsigned;
    
    declare done tinyint default 0;
    declare cur1 cursor for 
    	select p.InterfaceStyle,b.PsnSelAttr
    	from Pf_M_BizFlowBranch b,Pf_M_PsnSelAttr p 
    	where b.BizFlowID=vFlowDefID and b.BizNodeID1=vFlowStatus and b.IfValid='Y' and b.PsnSelAttr=p.Code;
    declare CONTINUE HANDLER FOR NOT FOUND SET done = 1;
    
 	DROP TEMPORARY TABLE IF EXISTS Pf_T_BatchHandleBranch; 
    
 	CREATE TEMPORARY TABLE Pf_T_BatchHandleBranch ( 
 		BranchID smallint(5) unsigned NOT NULL,
 		BranchName varchar(40) NOT NULL,
        CanSetNextNodePTL CHAR(1) NOT NULL,
        ProcTimeLimit tinyint(3) unsigned NOT NULL,
        PsnSelTip varchar(100) NOT NULL,
        InterfaceStyle CHAR(1) NOT NULL,
        DisplayOrd tinyint(3) unsigned NOT NULL
    ) 
    ENGINE=memory CHARACTER SET 'utf8' COLLATE 'utf8_general_ci';
    
    # >>>
    select count(*) into vCnt
    from (
    	select distinct a.FlowDefID,a.FlowStatus 
    	from Pf_A_Biz a,Pf_D_ToDoLink d 
        where a.Seq=d.BizSeq and FIND_IN_SET(d.ToDoWorkItem,pToDoWorkItems)>0 ) t;
    
    #1、相同业务、相同流程、相同待办处理环节；
    if vCnt>1 then	
    	leave label1;
    end if;
    
    select a.FlowDefID,a.FlowStatus
    into vFlowDefID,vFlowStatus
    from Pf_A_Biz a,Pf_D_ToDoLink d 
    where a.Seq=d.BizSeq and FIND_IN_SET(d.ToDoWorkItem,pToDoWorkItems)>0
    limit 1;
    
    select count(*) into vCnt
    from Pf_M_BizFlowBranch
    where BizFlowID=vFlowDefID and BizNodeID1=vFlowStatus and IfValid='Y' and trim(MapCond) != '';
    
    #2、后续分支无适用条件
    if vCnt>0 then
    	leave label1;
    end if;
    
 	set done=0;
 	open cur1;
 	fetch cur1 into vInterfaceStyle,vPsnSelAttr;
 	while (done!=1) do
 		if vInterfaceStyle in ('S','O','L','M') then
        	if vPsnSelAttr in (12,17,34,41) then
            	#12-起草人所在单位范围单选
                #17-起草人所在单位范围多选
                #34-附加起草人单位特征从指定角色范围单选
                #41-附加起草人单位特征从指定角色范围多选
            	select count(*) into vCnt
                from (
                	select distinct Pf_UsrDivisionID(a.InitUsrID)
                    from Pf_A_Biz a,Pf_D_ToDoLink d
                    where a.Seq=d.BizSeq and FIND_IN_SET(d.ToDoWorkItem,pToDoWorkItems)>0 ) t;
                    
                if vCnt>1 then	
    				leave label1;
    			end if;
            end if;

        	if vPsnSelAttr in (14,19,21,36,43,53,55,60,62,71,73) then
            	#14-起草人所在部门范围单选
                #19-起草人所在部门范围多选
                #21-从起草人部门副职选1人
                #36-附加起草人部门特征从指定角色范围单选
                #53-起草人所在部门正副职范围内单选
                #60-起草人条线分管领导单选
                #62-起草人条线分管领导多选
                #71-起草人所在主职部门分管领导单选
                #43-附加起草人部门特征从指定角色范围多选
                #55-起草人所在部门正副职范围内多选
                #73-起草人所在主职部门分管领导多选
            	select count(*) into vCnt
                from (
                	select distinct Pf_UsrMainOrgID(a.InitUsrID)
                    from Pf_A_Biz a,Pf_D_ToDoLink d
                    where a.Seq=d.BizSeq and FIND_IN_SET(d.ToDoWorkItem,pToDoWorkItems)>0 ) t;
                    
                if vCnt>1 then	
    				leave label1;
    			end if;
            end if;

        	if vPsnSelAttr in (32,39) then
            	#32-附加起草人区域分管特征从指定角色范围单选
                #39-附加起草人区域分管特征从指定角色范围多选
            	select count(*) into vCnt
                from (
                	select distinct Pf_UsrAreaID(a.InitUsrID)
                    from Pf_A_Biz a,Pf_D_ToDoLink d
                    where a.Seq=d.BizSeq and FIND_IN_SET(d.ToDoWorkItem,pToDoWorkItems)>0 ) t;
                    
                if vCnt>1 then	
    				leave label1;
    			end if;
            end if;
        end if;

 		fetch cur1 into vInterfaceStyle,vPsnSelAttr;
 	end while;
 	close cur1;

    insert into Pf_T_BatchHandleBranch
    select b.ID,b.Name,b.CanSetNextNodePTL,b.ProcTimeLimit,concat(Pf_CodeValueByIntCode(0,b.PsnSelAttr),
    	case when b.SpecNodeID is null then '' else concat('<',Pf_BizNodeName(b.SpecNodeID),'>') end,
        case when b.SpecRoleID is null then '' else concat('<',Pf_RoleName(b.SpecRoleID),'>') end),p.InterfaceStyle,b.DisplayOrd 
    from Pf_M_BizFlowBranch b,Pf_M_PsnSelAttr p 
    where b.BizFlowID=vFlowDefID and b.BizNodeID1=vFlowStatus and b.IfValid='Y' and b.PsnSelAttr=p.Code;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `Pf_FillSplitCntDicTab` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `Pf_FillSplitCntDicTab`()
BEGIN
	declare num int;   
	
    set num=1;   
	while num < 1000 do   
		insert into Pf_M_SplitCntDicTab(id, num) values(num, num);   
	set num=num+1;  
	end while; 
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `Pf_GenAllUsrMenuData` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `Pf_GenAllUsrMenuData`()
    COMMENT '重新生成全部系统用户菜单'
BEGIN
	declare vUsrID smallint unsigned;
    
	DECLARE done INT DEFAULT 0;
    declare cur1 CURSOR for select UsrID from Pf_M_UsrPwd where EXISTS(select 1 from Pf_M_Usr where ID=Pf_M_UsrPwd.UsrID and IsValid='Y'); 
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;
    
	TRUNCATE Table Pf_M_UsrMenu;
    
    open cur1;
    fetch cur1 into vUsrID;
    while (done!=1) do
    	Insert Into Pf_M_UsrMenu
      	Select vUsrID,ModuleID,Pf_ModuleOrdOfFunc(ID),Pf_ModuleNameOfFunc(ID),ID,DisplayOrd,Name,RightPopup,Coalesce(Url,'developing.jsp'),coalesce(fDesc,Name) 
      	from Pf_M_Func
      	Where (IsPublic='Y' Or Exists(Select 1 From Pf_M_RoleFunc rf,Pf_M_RoleUsr ru Where Pf_M_Func.ID=rf.FuncID And 
             Pf_IfRole1UnderRole2(ru.RoleID,rf.RoleID)='Y' and ru.UsrID=vUsrID)
            ) And IsVisible='Y';
        fetch cur1 into vUsrID;
    end while; 
    close cur1;
    
    update Pf_M_Ent set MenuRegenTag='N';
    update Pf_M_UsrPwd set MenuRegenTag='N';
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `Pf_GenSingleUsrMenuData` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `Pf_GenSingleUsrMenuData`(
        IN `pUsrID` SMALLINT UNSIGNED
    )
    COMMENT '生成指定用户菜单'
BEGIN
    delete from Pf_M_UsrMenu where UsrID=pUsrID;
    Insert Into Pf_M_UsrMenu
    Select pUsrID,ModuleID,Pf_ModuleOrdOfFunc(ID),Pf_ModuleNameOfFunc(ID),ID,DisplayOrd,Name,RightPopup,Coalesce(Url,'developing.jsp'),coalesce(fDesc,Name) 
  	from Pf_M_Func
  	Where (IsPublic='Y' Or Exists(Select 1 From Pf_M_RoleFunc rf,Pf_M_RoleUsr ru Where Pf_M_Func.ID=rf.FuncID And 
           Pf_IfRole1UnderRole2(ru.RoleID,rf.RoleID)='Y' and ru.UsrID=pUsrID)
          ) And IsVisible='Y';
    
    update Pf_M_UsrPwd set MenuRegenTag='N' where UsrID=pUsrID;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `Pf_InsAppAttachReadHis` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `Pf_InsAppAttachReadHis`(
        IN `pFileSeq` INTEGER UNSIGNED,
        IN `pUsrID` SMALLINT UNSIGNED
    )
    COMMENT '填充指定用户对指定应用文件附件的阅读记录，如果不曾阅读过的话'
BEGIN
	declare vCnt tinyint unsigned;
 
	select count(*) into vCnt from Pf_A_AttachReadHis where AttachSeq=pFileSeq and UsrID=pUsrID;
	if vCnt=0 then
 		insert into Pf_A_AttachReadHis values (now(),pFileSeq, pUsrID, now());
	end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `Pf_InsMasterAttachReadHis` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `Pf_InsMasterAttachReadHis`(
        IN `pFileID` INTEGER UNSIGNED,
        IN `pUsrID` SMALLINT UNSIGNED
    )
    COMMENT '填充指定用户对指定主文件附件的阅读记录，如果不曾阅读过的话'
BEGIN
	declare vCnt tinyint unsigned;
    
    select count(*) into vCnt from Pf_M_AttachReadHis where AttachID=pFileID and UsrID=pUsrID;
 	If vCnt=0 Then
		insert into Pf_M_AttachReadHis values (pFileID, pUsrID, now());
 	end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `Pf_InvalidateOrg` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `Pf_InvalidateOrg`(
        IN `pOrgID` SMALLINT UNSIGNED
    )
    COMMENT '作废指定机构、级联作废从属机构'
BEGIN
	declare vBigOrdCode varchar(30);
    
    select BigOrdCode into vBigOrdCode from Pf_M_Org where ID=pOrgID;
    update Pf_M_Org set IsValid='N' where instr(BigOrdCode,vBigOrdCode)=1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `Pf_MailSend` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `Pf_MailSend`(
        IN `pSendToUsrID` SMALLINT(5) UNSIGNED,
        IN `pSendTitle` VARCHAR(100),
        IN `pSendMsg` VARCHAR(400)
    )
BEGIN
	declare vMailSeq integer unsigned;
    declare eMail varchar(100);
    declare vCnt tinyint unsigned;
    
    #>>>
	insert into Pf_D_PromptMail values (null, now(), pSendTitle,pSendMsg, now(), 'N');	#预插入邮件提醒库
	set vMailSeq=@@identity;
	set eMail=Pf_UsrEmail(pSendToUsrID);
	select count(*) into vCnt from Pf_D_PromptMailTo where MailSeq=vMailSeq and MailAddr=eMail;
	if vCnt=0 then #鲁棒性
		insert into Pf_D_PromptMailTo values (vMailSeq,eMail,'Z');
	else
		delete from Pf_D_PromptMail where Seq=vMailSeq; #从邮件提醒库删除无发送目标的记录
	end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `Pf_PushToDo` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `Pf_PushToDo`()
    COMMENT '对超时待办项发催办提醒'
BEGIN
	declare vAppUrl varchar(100);
 	declare vPrompt varchar(400);
 	declare vBizCode tinyint unsigned;
 	declare vProcessedBy smallint unsigned;
 	
 	declare vToDoWorkItem int unsigned;
 	
 	DECLARE done INT DEFAULT 0;
 	declare cur1 CURSOR for select ToDoWorkItem from Pf_D_ToDoPush where Pf_WorkHoursBetween(Pf_ProcUsrIDOfWI(ToDoWorkItem),LASTALERTTS,now())>PUSHCYCLE;
 	DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;
 	
 	SELECT AppUrl INTO vAppUrl FROM Pf_M_Ent;
 	
 	open cur1;
 	fetch cur1 into vToDoWorkItem;
 	while (done!=1) do
 		SELECT concat(Pf_UsrcName(Processedby),'，你好！',char(13),char(10),'    标题为[',Biztitle,']的待办事项已超时，请尽快办理。',char(13),char(10), 
 			char(13),char(10), '办公系统访问地址是：',vAppUrl),BizCode,ProcessedBy
 		INTO vPrompt,vBizCode,vProcessedBy
 		FROM Pf_D_ToDoLink
 		WHERE ToDoWorkItem=vToDoWorkItem;
 		
 		INSERT INTO Pf_D_PromptMail (CreateTime,MailTitle,MailBody,OrderAtTime,Sended) VALUES (now(),concat(Pf_BizName(vBizCode),'催办提醒'),vPrompt,now(),'N');
 		INSERT INTO Pf_D_PromptMailTo VALUES (@@identity,Pf_UsrEmail(vProcessedBy),'Z');
 		
 		#SMS_FILL(vProcessedBy,concat(BizName_GetByBizCode(vBizCode),'催办提醒'),vPrompt);
 		
 		fetch cur1 into vToDoWorkItem;
 	end while; 
 	close cur1;
 	
 	UPDATE Pf_D_ToDoPush SET LASTALERTTS=now() WHERE Pf_WorkHoursBetween(Pf_ProcUsrIDOfWI(ToDoWorkItem),LASTALERTTS,now())>PUSHCYCLE;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `Pf_RcdPwd2UsedTs` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `Pf_RcdPwd2UsedTs`(
        IN `pLoginUsrID` SMALLINT(5) UNSIGNED,
        IN `pPassword2` VARCHAR(20)
    )
BEGIN
	declare vCnt tinyint unsigned;
    
    select count(*) into vCnt
    from Pf_M_UsrPwd
    where UsrID=pLoginUsrID and Password2=pPassword2;
    
    if vCnt=1 then
    	select count(*) into vCnt
        from Pf_D_Pwd2UsedTs
        where UsrID=pLoginUsrID;
        
        if vCnt=0 then
        	insert into Pf_D_Pwd2UsedTs values (pLoginUsrID,pPassword2,now());
        else
        	update Pf_D_Pwd2UsedTs set Password2=pPassword2,UsedTs=now() where UsrID=pLoginUsrID;
        end if;
    else
    	call Pf_RcdPwd2UsedTs_err1(); # 查询密码对不上！
    end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `Pf_SmSend` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `Pf_SmSend`(
        IN `pSendToUsrID` SMALLINT(5) UNSIGNED,
        IN `pSendMsg` VARCHAR(60),
        IN `pPromptType` CHAR(1)
    )
    COMMENT '短信发送接口'
BEGIN
	declare vCnt tinyint unsigned;
	declare vSmSeq integer unsigned;
    declare vMobileNos varchar(40);
    declare vMobileNo CHAR(11);
 	
    declare done INT DEFAULT 0;
    declare cur_SmTo cursor for 
    	select substring_index(substring_index(t.split_column,'/',d.num),'/',-1) 
		from (select vMobileNos as split_column) t join Pf_M_SplitCntDicTab d ON
			d.num <= (length(t.split_column) - length(replace(t.split_column,'/','')) + 1);
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;
    
    #>>>
	insert into Pf_D_PromptSm values (null, now(), pSendMsg, pPromptType, 'N'); #预插入短信提醒库
    set vSmSeq=@@identity;
    set vMobileNos=Pf_UsrMobileNum(pSendToUsrID);
            
	open cur_SmTo;
	fetch cur_SmTo into vMobileNo;
	while (done!=1) do
		select count(*) into vCnt from Pf_D_PromptSmTo where SmSeq=vSmSeq and MobileNo=vMobileNo;
		if length(vMobileNo)=11 and vCnt=0 then #鲁棒性
			insert into Pf_D_PromptSmTo values (vSmSeq,vMobileNo);
		end if;
		
        fetch cur_SmTo into vMobileNo;
	end while; 
	close cur_SmTo;

	delete from Pf_D_PromptSm where not exists(select 1 from Pf_D_PromptSmTo where SmSeq=Pf_D_PromptSm.Seq); #从短信提醒库删除无发送目标的记录
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `Pf_UpdBizNode` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `Pf_UpdBizNode`(
        IN `pBizCode` TINYINT UNSIGNED,
        IN `pBizID` INTEGER UNSIGNED,
        IN `pBizNode1` SMALLINT,
        IN `pBizNode2` SMALLINT,
        IN `pDriveTag` CHAR(1),
        IN `pActionID` SMALLINT UNSIGNED
    )
    COMMENT '计算业务节点的变迁带来的业务内容的变化。如：\r\n公共部分：流程发起时间、流程结束时间、是否进入归档\r\n业务独有：\r\n  发文签发时间、签发人、核稿人\r\n\r\npDriveTag含义：''S''-正常提交流程分支；''R''-撤回流程分支'
BEGIN
    declare vSql varchar(100);
    
    set vSql=CONCAT('call UpdNodeOfBiz',lpad(cast(pBizCode as char),2,'0'),'(',
    	cast(pBizID as char),',',cast(pBizNode1 as char),',',cast(pBizNode2 as char),',\'',pDriveTag,'\',',
        cast(pActionID as char),')');
        
 	set @vSql=vSql;
 	prepare stmt from @vSql;
 	EXECUTE stmt; 
 	deallocate prepare stmt;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `Pf_UpdOrgParent` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `Pf_UpdOrgParent`(
        IN `pOrgID` SMALLINT UNSIGNED,
        IN `pNewParentOrgID` SMALLINT UNSIGNED
    )
    COMMENT '改变机构隶属'
label1:
BEGIN
 	declare vSelfBo,vNewParentBo varchar(30);
 	declare vOldParentID smallint unsigned;
 	declare vSelfLevel,vBottomLevel,vTargetLevel,vNewSmallOrd tinyint unsigned;
 	declare vNewParentFullName VARCHAR(100);
 	
 	#pNewParentOrgID合法检查
 	select BigOrdCode,ParentID,TreeLevel into vSelfBo,vOldParentID,vSelfLevel from Pf_M_Org where ID=pOrgID; 
 	select BigOrdCode,TreeLevel,FullName into vNewParentBo,vTargetLevel,vNewParentFullName from Pf_M_Org where ID=pNewParentOrgID;
 	
 	if vOldParentID=pNewParentOrgID then
 		leave label1;
 	end if;
 	
 	if instr(vNewParentBo,vSelfBo)=1 then
 		#目标父机构不能是修改机构本身或其下级机构！
 		call Pf_UpdOrgParent_err1();
 		leave label1;
 	end if;
 	
 	select max(TreeLevel) into vBottomLevel from Pf_M_Org where instr(BigOrdCode,vSelfBo)=1; 
 	if (vBottomLevel - vSelfLevel + 1 + vTargetLevel)>10 then 
 		#移动机构引发最大机构层级超过10层限制！
 		call Pf_UpdOrgParent_err2();
 		leave label1;
 	end if;
 	
 	select COALESCE(max(SmallOrd),0)+1 into vNewSmallOrd from Pf_M_Org where ParentID = pNewParentOrgID; 
 	update Pf_M_Org 
 	set ParentID=pNewParentOrgID,SmallOrd=vNewSmallOrd,TreeLevel=vTargetLevel+1,BigOrdCode=CONCAT(vNewParentBo,LPAD(concat(vNewSmallOrd,''),3,'0')),
 		FullName=concat(vNewParentFullName,'/',ShortName)
 	where ID=pOrgID;
 	
 	call Pf_CalcOrgCfsFatherFrom(pOrgID);
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `Pf_UpdOrgShortName` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `Pf_UpdOrgShortName`(
        IN `pOrgID` SMALLINT UNSIGNED,
        IN `pNewOrgShortName` VARCHAR(40)
    )
    COMMENT '改变机构简称、级联改变下属机构全称'
label1:
BEGIN
 	declare vOldShortName varchar(50);
 	declare vParentID smallint unsigned;
 	declare vTreeLevel tinyint unsigned;
 	declare vBigOrdCode varchar(30);
 	declare vExists tinyint unsigned;
 	declare vParentFullName varchar(200);
 	
 	DECLARE done INT DEFAULT 0; 
 	declare cur1 CURSOR for select ID,FullName from Pf_M_Org where TreeLevel = vTreeLevel and instr(BigOrdCode,vBigOrdCode)=1; 
 	DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1; 
 	
 	select ShortName into vOldShortName from Pf_M_Org where ID=pOrgID;
 	
 	if vOldShortName=pNewOrgShortName then
 		leave label1;
 	end if;
 	
 	select ParentID,TreeLevel,BigOrdCode into vParentID,vTreeLevel,vBigOrdCode from Pf_M_Org where ID=pOrgID; 
 	#先改自己的单位全称 
 	if vParentID=0 then 
 		#改的是组织机构根的简称 
 		update Pf_M_Org set FullName=pNewOrgShortName, ShortName=pNewOrgShortName where ID=pOrgID; 
 	else 
 		update Pf_M_Org set FullName=concat(substr(FullName,1,CHAR_LENGTH(FullName)-CHAR_LENGTH(ShortName)),pNewOrgShortName), ShortName=pNewOrgShortName where ID=pOrgID; 
 	end if; 
 	
 	set vExists = 1; 
 	while vExists>0 do
 		open cur1; 
 		REPEAT 
 			fetch cur1 into vParentID,vParentFullName; 
 			update Pf_M_Org 
 			set FullName=concat(concat(vParentFullName,'/'),ShortName) 
 			where ParentID = vParentID; 
 		UNTIL done END REPEAT; 
 		close cur1; 
 		SET done = 0;
 		
 		set vTreeLevel = vTreeLevel + 1; 
 		select count(*) into vExists from Pf_M_Org where TreeLevel = vTreeLevel and instr(BigOrdCode,vBigOrdCode)=1; 
 	end while; 
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `Pf_UpdRoleName` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `Pf_UpdRoleName`(
        IN `pRoleID` TINYINT UNSIGNED,
        IN `pNewRoleName` VARCHAR(20)
    )
    COMMENT '角色改名'
label1:
BEGIN
 	declare vOldName varchar(20);
 	declare vParentID tinyint unsigned;
 	declare vTreeLevel tinyint unsigned;
 	declare vBigOrdCode varchar(12);
 	declare vExists tinyint unsigned;
 	declare vParentFullName varchar(60);
 	
 	DECLARE done INT DEFAULT 0; 
 	declare cur1 CURSOR for select ID,FullName from Pf_M_Role where TreeLevel = vTreeLevel and instr(BigOrdCode,vBigOrdCode)=1; 
 	DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1; 
 	
 	select Name into vOldName from Pf_M_Role where ID=pRoleID;
 	
 	if vOldName=pNewRoleName then
 		leave label1;
 	end if;
 	
 	select ParentID,TreeLevel,BigOrdCode into vParentID,vTreeLevel,vBigOrdCode from Pf_M_Role where ID=pRoleID; 
 	#先改自己的角色全称 
 	if vParentID=0 then 
 		#改的是根角色的简称 
 		update Pf_M_Role set FullName=pNewRoleName,Name=pNewRoleName where ID=pRoleID; 
 	else 
 		update Pf_M_Role set FullName=concat(substr(FullName,1,CHAR_LENGTH(FullName)-CHAR_LENGTH(Name)),pNewRoleName),Name=pNewRoleName where ID=pRoleID; 
 	end if; 
 	
 	set vExists = 1; 
 	while vExists>0 do
 		open cur1; 
 		REPEAT 
 			fetch cur1 into vParentID,vParentFullName; 
 			update Pf_M_Role 
 			set FullName=concat(concat(vParentFullName,'/'),Name) 
 			where ParentID = vParentID; 
 		UNTIL done END REPEAT; 
 		close cur1; 
 		SET done = 0;
 		
 		set vTreeLevel = vTreeLevel + 1; 
 		select count(*) into vExists from Pf_M_Role where TreeLevel = vTreeLevel and instr(BigOrdCode,vBigOrdCode)=1; 
 	end while; 
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `Pf_UpdRoleParent` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `Pf_UpdRoleParent`(
        IN `pRoleID` TINYINT UNSIGNED,
        IN `pNewParentRoleID` TINYINT UNSIGNED
    )
    COMMENT '改变指定角色从属'
label1:
BEGIN
 	declare vSelfBo,vNewParentBo varchar(12);
 	declare vOldParentID tinyint unsigned;
 	declare vSelfLevel,vBottomLevel,vTargetLevel,vNewSmallOrd tinyint unsigned;
 	declare vNewParentFullName VARCHAR(60);
 	
 	#pNewParentRoleID合法检查
 	select BigOrdCode,ParentID,TreeLevel into vSelfBo,vOldParentID,vSelfLevel from Pf_M_Role where ID=pRoleID; 
 	select BigOrdCode,TreeLevel,FullName into vNewParentBo,vTargetLevel,vNewParentFullName from Pf_M_Role where ID=pNewParentRoleID;
 	
 	if vOldParentID=pNewParentRoleID then
 		leave label1;
 	end if;
 	
 	if instr(vNewParentBo,vSelfBo)=1 then
 		# 目标父角色不能是修改角色本身或其子角色！
 		call Pf_UpdRoleParent_err1();
 		leave label1;
 	end if;
 	
 	select max(TreeLevel) into vBottomLevel from Pf_M_Role where instr(BigOrdCode,vSelfBo)=1; 
 	if (vBottomLevel - vSelfLevel + 1 + vTargetLevel)>4 then 
 		# 移动角色引发最大角色层级超过4层限制！
 		call Pf_UpdRoleParent_err2();
 		leave label1;
 	end if;
 	
 	select COALESCE(max(SmallOrd),0)+1 into vNewSmallOrd from Pf_M_Role where ParentID = pNewParentRoleID; 
 	update Pf_M_Role 
 	set ParentID=pNewParentRoleID,SmallOrd=vNewSmallOrd,TreeLevel=vTargetLevel+1,BigOrdCode=CONCAT(vNewParentBo,LPAD(concat(vNewSmallOrd,''),3,'0')),
 		FullName=concat(vNewParentFullName,'/',Name)
 	where ID=pRoleID;
 	
 	call Pf_CalcRoleCfsFatherFrom(pRoleID);
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `Pf_UpOrg` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `Pf_UpOrg`(
        IN `pOrg2ID` SMALLINT UNSIGNED
    )
    COMMENT '机构排序上移'
label1:
BEGIN
	declare vParentID,vOrg1ID smallint unsigned;
    declare vSmallOrdTop,vSmallOrd1,vSmallOrd2 tinyint unsigned;
    
    select ParentID,SmallOrd into vParentID,vSmallOrd2 from Pf_M_Org where ID=pOrg2ID;  
    select min(SmallOrd) into vSmallOrdTop from Pf_M_Org where ParentID=vParentID; 
    select max(SmallOrd) into vSmallOrd1 from Pf_M_Org where ParentID=vParentID and SmallOrd < vSmallOrd2; 
    
    if vSmallOrd2=vSmallOrdTop then 
		leave label1; 
	end if; 
    
    select ID into vOrg1ID from Pf_M_Org where ParentID=vParentID and SmallOrd=vSmallOrd1; 

    update Pf_M_Org set SmallOrd=vSmallOrd1,BigOrdCode=concat(substr(BigOrdCode,1,length(BigOrdCode)-3),LPAD(concat(vSmallOrd1,''),3,'0')) 
    where ID=pOrg2ID; 
		
    update Pf_M_Org set SmallOrd=vSmallOrd2,BigOrdCode=concat(substr(BigOrdCode,1,length(BigOrdCode)-3),LPAD(concat(vSmallOrd2,''),3,'0')) 
    where ID=vOrg1ID; 
    
    call Pf_CalcOrgCfsFatherFrom(vOrg1ID);
    call Pf_CalcOrgCfsFatherFrom(pOrg2ID);
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `Pf_UpRole` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `Pf_UpRole`(
        IN `pRole2ID` TINYINT UNSIGNED
    )
    COMMENT '角色排序上移'
label1:
BEGIN
	declare vParentID,vRole1ID tinyint unsigned;
    declare vSmallOrdTop,vSmallOrd1,vSmallOrd2 tinyint unsigned;
    
    select ParentID,SmallOrd into vParentID,vSmallOrd2 from Pf_M_Role where ID=pRole2ID;  
    select min(SmallOrd) into vSmallOrdTop from Pf_M_Role where ParentID=vParentID; 
    select max(SmallOrd) into vSmallOrd1 from Pf_M_Role where ParentID=vParentID and SmallOrd < vSmallOrd2; 
    
    if vSmallOrd2=vSmallOrdTop then 
		leave label1; 
	end if; 
    
    select ID into vRole1ID from Pf_M_Role where ParentID=vParentID and SmallOrd=vSmallOrd1; 

    update Pf_M_Role set SmallOrd=vSmallOrd1,BigOrdCode=concat(substr(BigOrdCode,1,length(BigOrdCode)-3),LPAD(concat(vSmallOrd1,''),3,'0')) 
    where ID=pRole2ID; 
		
    update Pf_M_Role set SmallOrd=vSmallOrd2,BigOrdCode=concat(substr(BigOrdCode,1,length(BigOrdCode)-3),LPAD(concat(vSmallOrd2,''),3,'0')) 
    where ID=vRole1ID; 
    
    call Pf_CalcRoleCfsFatherFrom(vRole1ID);
    call Pf_CalcRoleCfsFatherFrom(pRole2ID);
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `Pf_UpUsr` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `Pf_UpUsr`(
        IN `pParentOrgID` SMALLINT(5) UNSIGNED,
        IN `pUsr2ID` SMALLINT(5) UNSIGNED
    )
    COMMENT '用户在主职部门排位上移'
label1:
BEGIN
	declare vInnerOrd2,vInnerOrd1,vInnerOrdTop tinyint unsigned;
    declare vPreUsrID smallint unsigned;
    
    select InnerOrd into vInnerOrd2 from Pf_M_OrgUsr where UsrID=pUsr2ID and OrgID=pParentOrgID;
    select min(InnerOrd) into vInnerOrdTop from Pf_M_OrgUsr where OrgID=pParentOrgID; 
    select max(InnerOrd) into vInnerOrd1 from Pf_M_OrgUsr where OrgID=pParentOrgID and InnerOrd < vInnerOrd2; 
    
    if vInnerOrd2=vInnerOrdTop then
    	leave label1;
    else
    	select UsrID into vPreUsrID from Pf_M_OrgUsr where OrgID=pParentOrgID and InnerOrd=vInnerOrd1; 
        update Pf_M_OrgUsr set InnerOrd=vInnerOrd1 where UsrID=pUsr2ID and OrgID=pParentOrgID; 
        update Pf_M_OrgUsr set InnerOrd=vInnerOrd2 where UsrID=vPreUsrID and OrgID=pParentOrgID;
    end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `PsnSel_CalcLM` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `PsnSel_CalcLM`(
        IN `pFlowStartPsn` SMALLINT UNSIGNED,
        IN `pCurrProcessor` SMALLINT UNSIGNED,
        IN `pBizSeq` INTEGER UNSIGNED,
        IN `pPsnSelAttr` TINYINT UNSIGNED,
        IN `pSpecRoleID` TINYINT UNSIGNED
    )
    COMMENT '流程选人部件：列表单人、列表多人目标人选计算\r\npFlowStartPsn 流程启动人\r\npCurrProcessor 当前处理人\r\npBizSeq 业务抽象流水\r\npPsnSelAttr 流程选人方式码\r\npSpecRoleID 流程选人指定角色\r\n'
BodyLabel:
BEGIN
 	declare vBizCode tinyint unsigned;
 	declare vOrgRoot smallint unsigned;
 	
 	#StartPsn Attrs
 	declare vStartPsnMainOrgID,vStartPsnDivID smallint unsigned;
 	declare vStartPsnAreaID tinyint unsigned;
 	
 	#CurrProc Attrs
 	declare vCurrPsnMainOrgID,vCurrPsnDivID smallint unsigned;
 	declare vCurrPsnAreaID tinyint unsigned;
 	
 	declare vCnt tinyint unsigned;
 	
 	DROP TEMPORARY TABLE IF EXISTS Pf_T_NextProcPsnList; 
 	CREATE TEMPORARY TABLE Pf_T_NextProcPsnList ( 
 		NextUsrID SMALLINT(6) NOT NULL,
 		NextUsrName varchar(10) NOT NULL,
 		PRIMARY KEY (NextUsrID)) ENGINE=memory
 		CHARACTER SET 'utf8' COLLATE 'utf8_general_ci';
 	
 	if pPsnSelAttr in (31,38) then 
 		#31-指定角色范围单选
 		#38-从指定角色范围多选
 		insert into Pf_T_NextProcPsnList
 		select distinct UsrID,Pf_UsrcName(UsrID)
 		from Pf_M_RoleUsr
 		where Pf_IfRole1UnderRole2(RoleID,pSpecRoleID)='Y';
 		
 		leave BodyLabel;
 	end if;
 	
 	if pPsnSelAttr in (32,39) then 
 		#32-附加起草人区域分管特征从指定角色范围单选
 		#39-附加起草人区域分管特征从指定角色范围多选
 		set vStartPsnAreaID=Pf_UsrAreaID(pFlowStartPsn);
 		
 		insert into Pf_T_NextProcPsnList
 		Select distinct UsrID,Pf_UsrcName(UsrID)
 		From Pf_M_RoleUsr
 		Where Pf_IfRole1UnderRole2(RoleID,pSpecRoleID)='Y' And Exists(Select 1 From Pf_M_AreaDutyPsn Where Pf_M_RoleUsr.UsrID=UsrID And 
 			AreaID=vStartPsnAreaID);
 		
 		leave BodyLabel;
 	end if;
 	
 	if pPsnSelAttr in (33,40) then 
 		#33-附加处理人区域分管特征从指定角色范围单选
 		#40-附加处理人区域分管特征从指定角色范围多选
 		set vCurrPsnAreaID=Pf_UsrAreaID(pCurrProcessor);
 		
 		insert into Pf_T_NextProcPsnList
 		Select distinct UsrID,Pf_UsrcName(UsrID)
 		From Pf_M_RoleUsr
 		Where Pf_IfRole1UnderRole2(RoleID,pSpecRoleID)='Y' And Exists(Select 1 From Pf_M_AreaDutyPsn Where Pf_M_RoleUsr.UsrID=UsrID And 
 			AreaID=vCurrPsnAreaID);
 		
 		leave BodyLabel;
 	end if;
 	
 	if pPsnSelAttr in (34,41) then 
 		#34-附加起草人单位特征从指定角色范围单选
 		#41-附加起草人单位特征从指定角色范围多选
 		set vStartPsnDivID=Pf_UsrDivisionID(pFlowStartPsn);
 		
 		insert into Pf_T_NextProcPsnList
 		Select distinct UsrID,Pf_UsrcName(UsrID)
 		From Pf_M_RoleUsr
 		Where Pf_IfRole1UnderRole2(RoleID,pSpecRoleID)='Y' And Pf_IfOrg1UnderOrg2(Pf_UsrMainOrgID(UsrID),vStartPsnDivID)='Y';
 		
 		leave BodyLabel;
 	end if;
 	
 	if pPsnSelAttr in (35,42) then 
 		#35-附加处理人单位特征从指定角色范围单选
 		#42-附加处理人单位特征从指定角色范围多选
 		set vCurrPsnDivID=Pf_UsrDivisionID(pCurrProcessor);
 		
 		insert into Pf_T_NextProcPsnList
 		Select distinct UsrID,Pf_UsrcName(UsrID)
 		From Pf_M_RoleUsr
 		Where Pf_IfRole1UnderRole2(RoleID,pSpecRoleID)='Y' And Pf_IfOrg1UnderOrg2(Pf_UsrMainOrgID(UsrID),vCurrPsnDivID)='Y';
 		
 		leave BodyLabel;
 	end if;
 	
 	if pPsnSelAttr in (36,43) then 
 		#36-附加起草人部门特征从指定角色范围单选
 		#43-附加起草人部门特征从指定角色范围多选
 		set vStartPsnMainOrgID=Pf_UsrMainOrgID(pFlowStartPsn);
 		
 		insert into Pf_T_NextProcPsnList
 		Select distinct UsrID,Pf_UsrcName(UsrID)
 		From Pf_M_RoleUsr
 		Where Pf_IfRole1UnderRole2(RoleID,pSpecRoleID)='Y' And Pf_IfOrg1UnderOrg2(Pf_UsrMainOrgID(UsrID),vStartPsnMainOrgID)='Y';
 		
 		leave BodyLabel;
 	end if;
 	
 	if pPsnSelAttr in (37,44) then 
 		#37-附加处理人部门特征从指定角色范围单选
 		#44-附加处理人部门特征从指定角色范围多选
 		set vCurrPsnMainOrgID=Pf_UsrMainOrgID(pCurrProcessor);
 		
 		insert into Pf_T_NextProcPsnList
 		Select distinct UsrID,Pf_UsrcName(UsrID)
 		From Pf_M_RoleUsr
 		Where Pf_IfRole1UnderRole2(RoleID,pSpecRoleID)='Y' And Pf_IfOrg1UnderOrg2(Pf_UsrMainOrgID(UsrID),vCurrPsnMainOrgID)='Y';
 		
 		leave BodyLabel;
 	end if;
 	
 	if pPsnSelAttr in (53,55) then 
 		#53-起草人所在部门正副职范围内单选
 		#55-起草人所在部门正副职范围内多选
 		set vStartPsnMainOrgID=Pf_UsrMainOrgID(pFlowStartPsn);
 		
 		insert into Pf_T_NextProcPsnList
 		select distinct u.ID,u.cName 
 		from Pf_M_OrgUsr ou,Pf_M_Usr u
 		where ou.OrgID=vStartPsnMainOrgID and ou.JobType in ('Z','F') and ou.UsrID=u.ID and u.IsValid='Y';
 		
 		leave BodyLabel;
 	end if;
 	
 	if pPsnSelAttr = 21 then 
 		#21-从起草人部门副职选1人
 		set vStartPsnMainOrgID=Pf_UsrMainOrgID(pFlowStartPsn);
 		
 		insert into Pf_T_NextProcPsnList
 		select distinct u.ID,u.cName 
 		from Pf_M_OrgUsr ou,Pf_M_Usr u
 		where ou.OrgID=vStartPsnMainOrgID and ou.JobType ='F' and ou.UsrID=u.ID and u.IsValid='Y';
 		
 		leave BodyLabel;
 	end if;
 	
 	if pPsnSelAttr in (54,56) then 
 		#54-处理人所在部门正副职范围内单选
 		#56-处理人所在部门正副职范围内多选
 		set vCurrPsnMainOrgID=Pf_UsrMainOrgID(pCurrProcessor);
 		
 		insert into Pf_T_NextProcPsnList
 		select distinct u.ID,u.cName 
 		from Pf_M_OrgUsr ou,Pf_M_Usr u
 		where ou.OrgID=vCurrPsnMainOrgID and ou.JobType in ('Z','F') and ou.UsrID=u.ID and u.IsValid='Y';
 		
 		leave BodyLabel;
 	end if;
 	
 	if pPsnSelAttr=58 then
 		#58-从级别1人员中选1人
 		insert into Pf_T_NextProcPsnList
 		select ID,cName
 		from Pf_M_Usr
 		where Pf_UsrJobLevelNum(ID)=1 and IsValid='Y';
 		
 		leave BodyLabel;
 	end if;
 	
 	if pPsnSelAttr in (60,62) then 
 		#60-起草人条线分管领导单选
 		#62-起草人条线分管领导多选
 		set vStartPsnMainOrgID=Pf_UsrMainOrgID(pFlowStartPsn);
 		
 		insert into Pf_T_NextProcPsnList
 		select distinct u.ID,u.cName 
 		from Pf_M_DeptDutyPsn dd,Pf_M_Usr u
 		where Pf_IfOrg1UnderOrg2(vStartPsnMainOrgID,dd.OrgID)='Y' and dd.UsrID=u.ID and u.IsValid='Y' and 
 			EXISTS(select 1 from Pf_M_VerticalOrgLeader where UsrID=dd.UsrID);
 		
 		leave BodyLabel;
 	end if;
 	
 	if pPsnSelAttr in (61,63) then 
 		#61-当前处理人条线分管领导单选
 		#63-当前处理人条线分管领导多选
 		set vCurrPsnMainOrgID=Pf_UsrMainOrgID(pCurrProcessor);
 		
 		insert into Pf_T_NextProcPsnList
 		select distinct u.ID,u.cName 
 		from Pf_M_DeptDutyPsn dd,Pf_M_Usr u
 		where Pf_IfOrg1UnderOrg2(vCurrPsnMainOrgID,dd.OrgID)='Y' and dd.UsrID=u.ID and u.IsValid='Y' and 
 			EXISTS(select 1 from Pf_M_VerticalOrgLeader where UsrID=dd.UsrID);
 		
 		leave BodyLabel;
 	end if;
 	
 	if pPsnSelAttr in (71,73) then 
 		#71-起草人所在主职部门分管领导单选
 		#73-起草人所在主职部门分管领导多选
 		set vStartPsnMainOrgID=Pf_UsrMainOrgID(pFlowStartPsn);
 		
 		insert into Pf_T_NextProcPsnList
 		select distinct u.ID,u.cName 
 		from Pf_M_DeptDutyPsn dd,Pf_M_Usr u
 		where Pf_IfOrg1UnderOrg2(vStartPsnMainOrgID,dd.OrgID)='Y' and dd.UsrID=u.ID and u.IsValid='Y';
 		
 		leave BodyLabel;
 	end if;
 	
 	if pPsnSelAttr in (72,74) then 
 		#72-处理人所在主职部门分管领导单选
 		#74-处理人所在主职部门分管领导多选
 		set vCurrPsnMainOrgID=Pf_UsrMainOrgID(pCurrProcessor);
 		
 		insert into Pf_T_NextProcPsnList
 		select distinct u.ID,u.cName 
 		from Pf_M_DeptDutyPsn dd,Pf_M_Usr u
 		where Pf_IfOrg1UnderOrg2(vCurrPsnMainOrgID,dd.OrgID)='Y' and dd.UsrID=u.ID and u.IsValid='Y';
 		
 		leave BodyLabel;
 	end if;
 	
 	if pPsnSelAttr = 109 then 
 		#109-从项目审批决策会出席人员多选
 		insert into Pf_T_NextProcPsnList
 		select u.ID,u.cName
        from Pf_M_Usr u,ZxBg_A_FaSp z 
        where EXISTS(select 1 from Pf_A_Biz where Seq=pBizSeq and z.ID=BizID) and FIND_IN_SET(u.ID,z.CxIDs)>0;
 		
 		leave BodyLabel;
 	end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `PsnSel_CalcSO` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `PsnSel_CalcSO`(
        IN `pFlowStartPsn` SMALLINT UNSIGNED,
        IN `pCurrProcessor` SMALLINT UNSIGNED,
        IN `pBizSeq` INTEGER UNSIGNED,
        IN `pPsnSelAttr` TINYINT UNSIGNED,
        IN `pSpecRoleID` TINYINT UNSIGNED,
        IN `pSpecOrgID` SMALLINT UNSIGNED,
        IN `pCurrOrg` SMALLINT UNSIGNED
    )
    COMMENT '流程选人部件：机构单人、机构多人目标人选计算\r\npFlowStartPsn 流程启动人\r\npCurrProcessor 当前处理人\r\npBizSeq 业务抽象流水\r\npPsnSelAttr 流程选人方式码\r\npSpecRoleID 流程选人指定角色'
BodyLabel:
BEGIN
 	DROP TEMPORARY TABLE IF EXISTS Pf_T_NextProcPsnList; 
 	CREATE TEMPORARY TABLE Pf_T_NextProcPsnList ( 
 		NextUsrID SMALLINT(6) NOT NULL,
 		NextUsrName varchar(10) NOT NULL,
 		PRIMARY KEY (NextUsrID)) ENGINE=memory
 		CHARACTER SET 'utf8' COLLATE 'utf8_general_ci';
 	
 	if pPsnSelAttr = 57 then
 		#57-部门正副职多选
 		insert into Pf_T_NextProcPsnList
 		select u.ID,u.cName
 		from Pf_M_OrgUsr ou,Pf_M_Usr u,Pf_M_UsrPwd up
 		where ou.OrgID=pCurrOrg and ou.JobType in ('Z','F') and ou.UsrID=u.ID and u.IsValid='Y' and u.ID=up.UsrID and up.LoginName!='webmaster';
 		
 		leave BodyLabel;
 	end if;
 	
 	if pPsnSelAttr = 200 then
 		#200-从管理员分管单位中选多人
 		insert into Pf_T_NextProcPsnList
 		select u.ID,u.cName
 		from Pf_M_OrgUsr ou,Pf_M_Usr u,Pf_M_UsrPwd up
 		where ou.OrgID=pCurrOrg and Pf_IfUsrUnderAdmin(ou.UsrID,pCurrProcessor)='Y' and ou.UsrID=u.ID and u.IsValid='Y' and u.ID=up.UsrID and up.LoginName!='webmaster';
 	end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `UpdNodeOfBiz04` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `UpdNodeOfBiz04`(
        IN `pBizID` INTEGER UNSIGNED,
        IN `pBizNode1` SMALLINT,
        IN `pBizNode2` SMALLINT,
        IN `pDriveTag` CHAR(1),
        IN `pActionID` SMALLINT UNSIGNED
    )
    COMMENT '【4-采购申请】业务环节迁移过程'
label1:
BEGIN
 	declare vNode1Name,vNode2Name varchar(20);
 	declare vNode1TzSys1,vNode2TzSys1 char(1);
    declare vFlowBranchName VARCHAR(40);
    declare vCnt tinyint unsigned;
    
	declare vDszUsrID smallint unsigned;
    declare vPrompt varchar(1000);
    
 	# >>>
 	set vNode1Name=Pf_BizNodeName(pBizNode1);
 	set vNode2Name=Pf_BizNodeName(pBizNode2);
 	set vNode1TzSys1=Pf_BizNodeSysBitByPt(pBizNode1,1);
 	set vNode2TzSys1=Pf_BizNodeSysBitByPt(pBizNode2,1);
 	set vFlowBranchName=Pf_BizFlowBranchName(pActionID);

    if vNode1TzSys1!='E' and vNode2TzSys1='E' THEN #结束流程
    	# 约束
        select count(*) into vCnt from Pf_A_AttachInfo where PrimaryID=pBizID and PrimaryName='CgSq_A_Zt_Qz' and DelTag='N';
 		if vCnt=0 then
 			call UpdNodeOfBiz04_err1(); # 流程结束前，须生成归档签字文件！
 			leave label1;
 		end if;

        # 相关更新
        # 0、置业务可归档、业务状态'P'
        update Pf_A_Biz set IfToBeArchived='Y' where BizCode=4 and BizID=pBizID;
        
        # 发提醒知会董事长
        select MIN(UsrID) into vDszUsrID from Pf_M_RoleUsr where Pf_RoleName(RoleID)='董事长';
        
        select concat('董事长，您好！',Char(13),Char(10),'    ',Pf_UsrcName(InitUsrID),'于',DATE_FORMAT(now(),'%Y-%m-%d %H:%i'),'申请采购总额￥',
        	format(TotalAmt,2),'，事由：',Bt,'，请知悉！')
        into vPrompt
        from CgSq_A_Zt where ID=pBizID;

      	insert into Pf_D_PromptMail values (null, now(), '采购申请获批提醒',vPrompt, now(), 'N');
      	insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(vDszUsrID),'Z');
    end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `UpdNodeOfBiz05` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `UpdNodeOfBiz05`(
        IN `pBizID` INTEGER,
        IN `pBizNode1` SMALLINT,
        IN `pBizNode2` SMALLINT,
        IN `pDriveTag` CHAR(1),
        IN `pActionID` SMALLINT UNSIGNED
    )
    COMMENT '【5-工资发放】业务环节迁移过程'
label1:
BEGIN
	declare vNode1Name,vNode2Name varchar(20);
    declare vNode1TzSys1,vNode2TzSys1 char(1);
    
    # >>>
    set vNode1Name=Pf_BizNodeName(pBizNode1);
    set vNode2Name=Pf_BizNodeName(pBizNode2);
    set vNode1TzSys1=Pf_BizNodeSysBitByPt(pBizNode1,1);
    set vNode2TzSys1=Pf_BizNodeSysBitByPt(pBizNode2,1);
    
	if vNode1TzSys1!='E' and vNode2TzSys1='E' then
        #保存明细到上月工资发放明细
        delete from Gz_M_FfMx;
        insert into Gz_M_FfMx 
		select YgUsrID, JbGz,QtSr,YfGz,Pension1,UnEmployed1,Health1,Industrial1,Birth1,ZfGjj1,WxYjQyJfXj,Pension2,UnEmployed2,Health2,ZfGjj2,SxYjGrJfXj,Kjx,YnsSde,GrSds,ShGz 
        from Gz_A_FfMx where ZtID=pBizID;
        
        #置可归档
        update Pf_A_Biz set IfToBeArchived='Y' where BizCode=5 and BizID=pBizID;
    end if;
    
    if vNode1TzSys1='E' and vNode2TzSys1!='E' THEN #撤回
 		call UpdNodeOfBiz05_err1(); # 工资发放审核流程结束不能撤回！
 		leave label1;
    end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `UpdNodeOfBiz06` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `UpdNodeOfBiz06`(
        IN `pBizID` INTEGER UNSIGNED,
        IN `pBizNode1` SMALLINT,
        IN `pBizNode2` SMALLINT,
        IN `pDriveTag` CHAR(1),
        IN `pActionID` SMALLINT UNSIGNED
    )
    COMMENT '【6-公司论坛】业务环节迁移过程'
label1:
BEGIN
 	declare vNode1Name,vNode2Name varchar(20);
 	declare vNode1TzSys1,vNode2TzSys1 char(1);
 	
 	declare vCnt tinyint unsigned;
 	declare vCyFwLb char;
 	declare vCyFs,vTpZs char(4);
 	declare vAppUrl,vBizTitle varchar(100);
 	declare vPrompt varchar(1000);
 	declare vUsrID smallint unsigned;
 	declare vUsrcName varchar(10);
 	
 	declare done INT DEFAULT 0;
 	
 	declare cur1 cursor for 
 	select p.OrgUsrID,Pf_UsrcName(p.OrgUsrID)
 	from Pub_A_BizViewPw p
 	where exists(select 1 from Pf_A_Biz where BizCode=6 and BizID=pBizID and Seq=p.BizSeq) and p.OrgUsrSel='P';
 	
 	declare cur2 cursor for 
 	select u.ID,u.cName
 	from Pub_A_BizViewPw p,Pf_M_Usr u
 	where exists(select 1 from Pf_A_Biz where BizCode=6 and BizID=pBizID and Seq=p.BizSeq) and p.OrgUsrSel='O' and 
 		Pf_IfOrg1UnderOrg2(Pf_UsrMainOrgID(u.ID),p.OrgUsrID)='Y';
 	
 	declare cur3 cursor for select ID, cName from Pf_M_Usr where IsValid='Y';
 	
 	DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;
 	
 	# >>>
 	set vNode1Name=Pf_BizNodeName(pBizNode1);
 	set vNode2Name=Pf_BizNodeName(pBizNode2);
 	set vNode1TzSys1=Pf_BizNodeSysBitByPt(pBizNode1,1);
 	set vNode2TzSys1=Pf_BizNodeSysBitByPt(pBizNode2,1);
 	
 	select CyFwLb,case when CySfNm='N' then '实名参与' else '匿名参与' end,case when SfXyTp='N' then '无需投票' else '需要投票' end 
 	into vCyFwLb,vCyFs,vTpZs 
 	from GsLt_A_Zt 
 	where ID=pBizID;
 	
 	select AppUrl Into vAppUrl From Pf_M_Ent;
 	select BizTitle into vBizTitle from Pf_A_Biz where BizCode=6 and BizID=pBizID;
 	
 	# 发起议题讨论或投票>>>	
 	if vNode1TzSys1='S' and vNode2TzSys1!='S' and pDriveTag='S' then 
 		# 约束
 		if vCyFwLb='N' then
 			select count(*) into vCnt from Pub_A_BizViewPw where Pf_BizIDOfBizSeq(BizSeq)=pBizID;
 			if vCnt=0 then
 				call UpdNodeOfBiz06_err01(); #参与范围类别不是公司全员，而参与范围又没有定义！
 				leave label1;
 			end if;
 		end if;

 		#议题讨论开放提醒>>>
 		if vCyFwLb='N' then
 			set done=0;
 			open cur1;
 			fetch cur1 into vUsrID,vUsrcName;
 			while (done!=1) do
 				set vPrompt=concat(vUsrcName,'，你好！',Char(13),Char(10),'    议题为：[',vBizTitle,']的讨论区（',vCyFs,'、',vTpZs,'）已开放，请您参与！',
 					char(13),char(10),char(13),char(10),'办公系统访问地址是：',vAppUrl);
 				insert into Pf_D_PromptMail values (null, now(), '议题讨论开放提醒',vPrompt, now(), 'N');
 				insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(vUsrID),'Z');
 				fetch cur1 into vUsrID,vUsrcName;
 			end while; 
 			close cur1;
 			
 			set done=0;
 			open cur2;
 			fetch cur2 into vUsrID,vUsrcName;
 			while (done!=1) do
 				set vPrompt=concat(vUsrcName,'，你好！',Char(13),Char(10),'    议题为：[',vBizTitle,']的讨论区（',vCyFs,'、',vTpZs,'）已开放，请您参与！',
 					char(13),char(10),char(13),char(10),'办公系统访问地址是：',vAppUrl);
 				insert into Pf_D_PromptMail values (null, now(), '议题讨论开放提醒',vPrompt, now(), 'N');
 				insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(vUsrID),'Z');
 				fetch cur2 into vUsrID,vUsrcName;
 			end while; 
 			close cur2;
 		else
 			set done=0;
 			open cur3;
 			fetch cur3 into vUsrID,vUsrcName;
 			while (done!=1) do
 				set vPrompt=concat(vUsrcName,'，你好！',Char(13),Char(10),'    议题为：[',vBizTitle,']的讨论区（',vCyFs,'、',vTpZs,'）已开放，请您参与！',
 					char(13),char(10),char(13),char(10),'办公系统访问地址是：',vAppUrl);
 				insert into Pf_D_PromptMail values (null, now(), '议题讨论开放提醒',vPrompt, now(), 'N');
 				insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(vUsrID),'Z');
 				fetch cur3 into vUsrID,vUsrcName;
 			end while; 
 			close cur3;
 		end if;
 		#议题讨论开放提醒<<<
 		
 		#需投票则自动按指定参与范围初始化：公司论坛投票记录 GsLt_A_Tp
 		if vTpZs='需要投票' then
	 		if vCyFwLb='N' then
	 			insert into GsLt_A_Tp
	 			select now(),null,pBizID,YqCyUsrID,'P',null
	 			from (
	 				select p.OrgUsrID YqCyUsrID from Pub_A_BizViewPw p 
	 				where exists(select 1 from Pf_A_Biz where BizCode=6 and BizID=pBizID and Seq=p.BizSeq) and p.OrgUsrSel='P'
	 				union 
	 				select u.ID YqCyUsrID from Pub_A_BizViewPw p,Pf_M_Usr u 
	 				where exists(select 1 from Pf_A_Biz where BizCode=6 and BizID=pBizID and Seq=p.BizSeq) and p.OrgUsrSel='O' and 
	 					Pf_IfOrg1UnderOrg2(Pf_UsrMainOrgID(u.ID),p.OrgUsrID)='Y') t;
	 		else
	 			insert into GsLt_A_Tp
	 			select now(),null,pBizID,ID,'P',null
				from Pf_M_Usr where IsValid='Y'; 		
	 		end if;
 		end if;
 	end if;
 	# 发起议题讨论或投票<<<	
 	
 	#撤回“发起议题讨论或投票”	
 	if vNode1TzSys1!='S' and vNode2TzSys1='S' and pDriveTag='R' then 
		#约束：从【评论/投票】状态撤回到【起草】状态的前提是没有发生评论或投票！
		select count(*) into vCnt from dual
		where exists(select 1 from GsLt_A_Pl where BizID=pBizID) or exists(select 1 from GsLt_A_Tp where BizID=pBizID and TjSj is not null);
		if vCnt>0 then
			call UpdNodeOfBiz06_err02(); # 已发生评论或投票，“发起议题讨论或投票”动作不能撤回！
			leave label1;
		end if;
		
        delete from Pub_A_ClosedBizViewTs where Pf_BizIDOfBizSeq(BizSeq)=pBizID and Pf_BizCodeByBizSeq(BizSeq)=6;
        update GsLt_A_Zt set CyRd=0,ZlRs=0 where ID=pBizID;
		#清空：公司论坛投票记录 GsLt_A_Tp
		delete from GsLt_A_Tp where BizID=pBizID;
	end if;
	
	#管理员退回发起
 	if vNode1TzSys1!='S' and vNode2TzSys1='S' and pDriveTag='S' then 
    	delete from Pub_A_ClosedBizViewTs where Pf_BizIDOfBizSeq(BizSeq)=pBizID and Pf_BizCodeByBizSeq(BizSeq)=6;
    	update GsLt_A_Zt set CyRd=0,ZcRs=0,FdRs=0,ZlRs=0 where ID=pBizID;
		#清空：公司论坛评论记录 GsLt_A_Pl 、公司论坛投票记录 GsLt_A_Tp
		delete from GsLt_A_Pl where BizID=pBizID;
		delete from GsLt_A_Tp where BizID=pBizID;
	end if;

 	if vNode2TzSys1='E' then
 		#置可归档
 		update Pf_A_Biz set IfToBeArchived='Y' where BizCode=6 and BizID=pBizID;
 	end if;
 	
 	#重开讨论>>>
 	if vNode1TzSys1='E' and vNode2TzSys1!='E' then 
 		#议题讨论重新开放提醒
 		if vCyFwLb='N' then
 			set done=0;
 			open cur1;
 			fetch cur1 into vUsrID,vUsrcName;
 			while (done!=1) do
 				set vPrompt=concat(vUsrcName,'，你好！',Char(13),Char(10),'    议题为：[',vBizTitle,']的讨论区（',vCyFs,'、',vTpZs,'）关闭后重新开放，请您参与！',
 					char(13),char(10),char(13),char(10),'办公系统访问地址是：',vAppUrl);
 				insert into Pf_D_PromptMail values (null, now(), '议题讨论关闭后重新开放提醒',vPrompt, now(), 'N');
 				insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(vUsrID),'Z');
 				fetch cur1 into vUsrID,vUsrcName;
 			end while; 
 			close cur1;
 			
 			set done=0;
 			open cur2;
 			fetch cur2 into vUsrID,vUsrcName;
 			while (done!=1) do
 				set vPrompt=concat(vUsrcName,'，你好！',Char(13),Char(10),'    议题为：[',vBizTitle,']的讨论区（',vCyFs,'、',vTpZs,'）关闭后重新开放，请您参与！',
 					char(13),char(10),char(13),char(10),'办公系统访问地址是：',vAppUrl);
 				insert into Pf_D_PromptMail values (null, now(), '议题讨论关闭后重新开放提醒',vPrompt, now(), 'N');
 				insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(vUsrID),'Z');
 				fetch cur2 into vUsrID,vUsrcName;
 			end while; 
 			close cur2;
 		else
 			set done=0;
 			open cur3;
 			fetch cur3 into vUsrID,vUsrcName;
 			while (done!=1) do
 				set vPrompt=concat(vUsrcName,'，你好！',Char(13),Char(10),'    议题为：[',vBizTitle,']的讨论区（',vCyFs,'、',vTpZs,'）关闭后重新开放，请您参与！',
 					char(13),char(10),char(13),char(10),'办公系统访问地址是：',vAppUrl);
 				insert into Pf_D_PromptMail values (null, now(), '议题讨论关闭后重新开放提醒',vPrompt, now(), 'N');
 				insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(vUsrID),'Z');
 				fetch cur3 into vUsrID,vUsrcName;
 			end while; 
 			close cur3;
 		end if;
 	end if;
 	#重开讨论<<<
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `UpdNodeOfBiz07` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `UpdNodeOfBiz07`(
        IN `pBizID` INTEGER,
        IN `pBizNode1` SMALLINT,
        IN `pBizNode2` SMALLINT,
        IN `pDriveTag` CHAR(1),
        IN `pActionID` SMALLINT UNSIGNED
    )
    COMMENT '【7-档案交接】业务环节迁移过程'
label1:
BEGIN
	declare vNode1Name,vNode2Name varchar(20);
    declare vNode1TzSys1,vNode2TzSys1 char(1);
    
    # >>>
    set vNode1Name=Pf_BizNodeName(pBizNode1);
    set vNode2Name=Pf_BizNodeName(pBizNode2);
    set vNode1TzSys1=Pf_BizNodeSysBitByPt(pBizNode1,1);
    set vNode2TzSys1=Pf_BizNodeSysBitByPt(pBizNode2,1);
    
	if vNode1TzSys1!='E' and vNode2TzSys1='E' then
        # 置可归档
        update Pf_A_Biz set IfToBeArchived='Y' where BizCode=7 and BizID=pBizID;
    end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `UpdNodeOfBiz08` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `UpdNodeOfBiz08`(
        IN `pBizID` INTEGER UNSIGNED,
        IN `pBizNode1` SMALLINT,
        IN `pBizNode2` SMALLINT,
        IN `pDriveTag` CHAR(1),
        IN `pActionID` SMALLINT UNSIGNED
    )
    COMMENT '【8-档案借阅】业务环节迁移过程'
label1:
BEGIN
 	declare vNode1Name,vNode2Name varchar(20);
 	declare vNode1TzSys1,vNode2TzSys1 char(1);
 	
 	# >>>
 	set vNode1Name=Pf_BizNodeName(pBizNode1);
 	set vNode2Name=Pf_BizNodeName(pBizNode2);
 	set vNode1TzSys1=Pf_BizNodeSysBitByPt(pBizNode1,1);
 	set vNode2TzSys1=Pf_BizNodeSysBitByPt(pBizNode2,1);
 	
 	if vNode1Name='档案准备' and vNode2Name='档案利用' then
        # [实际借出时间]更新
        update Da_A_Jy set SjJcSj=now() where ID=pBizID;
    end if;
    
    if vNode1Name='档案利用' and vNode2Name='档案归还确认' then
        # [档案归还时间]更新
        update Da_A_Jy set GhSj=now() where ID=pBizID;
 	end if;

 	if vNode1TzSys1!='E' and vNode2TzSys1='E' then
 		# 相关更新
 		# 置可归档
 		update Pf_A_Biz set IfToBeArchived='Y' where BizCode=8 and BizID=pBizID;
 	end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `UpdNodeOfBiz09` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `UpdNodeOfBiz09`(
        IN `pBizID` INTEGER UNSIGNED,
        IN `pBizNode1` SMALLINT,
        IN `pBizNode2` SMALLINT,
        IN `pDriveTag` CHAR(1),
        IN `pActionID` SMALLINT UNSIGNED
    )
    COMMENT '【9-非业务类合同管理】业务环节迁移过程'
label1:
BEGIN
 	declare vNode1Name,vNode2Name varchar(20);
 	declare vNode1TzSys1,vNode2TzSys1 char(1);
 	declare vCnt tinyint unsigned;
    
    declare vYySqFlowDefID smallint unsigned;
    declare vYySqInitNodeID smallint;
    declare vToDoWorkItem integer unsigned; # 必要的出参，不用
        
    declare vAppUrl,vBizTitle varchar(100);
    declare vInitUsrID smallint unsigned;
    declare vPrompt varchar(1000);
    
    declare vYySqBizSeqToBeDel integer unsigned; #待删除用印申请
    
 	# >>>
 	set vNode1Name=Pf_BizNodeName(pBizNode1);
 	set vNode2Name=Pf_BizNodeName(pBizNode2);
 	set vNode1TzSys1=Pf_BizNodeSysBitByPt(pBizNode1,1);
 	set vNode2TzSys1=Pf_BizNodeSysBitByPt(pBizNode2,1);
 	
    if vNode1Name='法律合规部审核' and vNode2Name='法律合规部审批' then
    	select count(*) into vCnt from WjHq_A_Zt where ID=pBizID and (HtBh is null or trim(HtBh)='' or trim(HtBh)='-');
        if vCnt>0 then
        	call UpdNodeOfBiz09_err1(); # 提交法律合规部审批前应先对合同编号！
            leave label1;
        end if;
    end if;
    
 	if vNode1TzSys1!='E' and vNode2TzSys1='E' then
 		# 置可归档
 		update Pf_A_Biz set IfToBeArchived='Y' where BizCode=9 and BizID=pBizID;
        
        # 自动发起用印申请
        select BizTitle,InitUsrID into vBizTitle,vInitUsrID from Pf_A_Biz where BizCode=9 and BizID=pBizID;
        
        select max(ID) into vYySqFlowDefID from Pf_M_BizFlow where BizCode=25 and IfValid='Y';
        select ID into vYySqInitNodeID from Pf_M_BizNode where BizCode=25 and substr(TzSys,1,1)='S' and IfValid='Y';
        insert into ZxBg_A_YzZzSq values (now(),null,vInitUsrID,Pf_OrgFullName(Pf_UsrMainOrgID(vInitUsrID)),'W','a',null,null,null,
        	'非业务合同用印',1,null,null,pBizID,'N');
        call Engine_InitBizFlow(25,@@identity,concat('[',Pf_UsrcName(vInitUsrID),']','申请使用印章、证照，申请事由[非业务合同用印]'),
        	vYySqFlowDefID,vYySqInitNodeID,vInitUsrID,vToDoWorkItem);
             
        # 发提醒给申请业务员
        select AppUrl Into vAppUrl From Pf_M_Ent;
        set vPrompt=concat(Pf_UsrcName(vInitUsrID),'，你好！',Char(13),Char(10),
            '    名为【',vBizTitle,'】的非业务合同已于',DATE_FORMAT(now(),'%Y-%m-%d %H:%i'),'获批并归档，且自动发起了用印申请！详情见办公系统。',
            char(13),char(10),char(13),char(10),'办公系统访问地址是：',vAppUrl);
                  
        insert into Pf_D_PromptMail values (null, now(), '非业务合同获批后用印申请自动接续提醒',vPrompt, now(), 'N');
        insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(vInitUsrID),'Z');
 	end if;

    if vNode1TzSys1='E' and vNode2TzSys1!='E' THEN #撤回
        # 撤销接着的用印申请
		select Seq into vYySqBizSeqToBeDel
        from Pf_A_Biz
        where BizCode=25 and exists(select 1 from ZxBg_A_YzZzSq where YyWjHqID=pBizID and ID=Pf_A_Biz.BizID);
        
        delete from Pf_A_Biz where Seq=vYySqBizSeqToBeDel;
        delete from ZxBg_A_YzZzSq where YyWjHqID=pBizID;
    end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `UpdNodeOfBiz10` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `UpdNodeOfBiz10`(
        IN `pBizID` INTEGER UNSIGNED,
        IN `pBizNode1` SMALLINT,
        IN `pBizNode2` SMALLINT,
        IN `pDriveTag` CHAR(1),
        IN `pActionID` SMALLINT UNSIGNED
    )
    COMMENT '【10-督查督办】业务环节迁移过程'
label1:
BEGIN
 	declare vNode1Name,vNode2Name varchar(20);
 	declare vNode1TzSys1,vNode2TzSys1 char(1);
 	declare vCnt tinyint unsigned;
 	
 	declare vBh varchar(20);
 	
 	# >>>
 	set vNode1Name=Pf_BizNodeName(pBizNode1);
 	set vNode2Name=Pf_BizNodeName(pBizNode2);
 	set vNode1TzSys1=Pf_BizNodeSysBitByPt(pBizNode1,1);
 	set vNode2TzSys1=Pf_BizNodeSysBitByPt(pBizNode2,1);
 	
 	if vNode1Name='立项' and vNode2Name='承办' then
 		# 编号
 		select Bh into vBh from DcDb_A_Zt where ID=pBizID;
 		if vBh is null then
 			select count(*) into vCnt from Pub_M_YMDStyleNumAssignBox
 			where BizCode=10 and BizContentType=0 and YMDStyle=DATE_FORMAT(now(),'%Y%m');
 			if vCnt=0 then
 				delete from Pub_M_YMDStyleNumAssignBox where BizCode=10 and BizContentType=0;
 				
 				insert into Pub_M_YMDStyleNumAssignBox values (10,0,DATE_FORMAT(now(),'%Y%m'),2);
 				
 				update DcDb_A_Zt set Bh=concat('DB-',DATE_FORMAT(now(),'%Y%m'),'-01') where ID=pBizID;
 			else
 				select concat('DB-',YMDStyle,'-',LPAD(concat(NextNum,''),2,'0')) into vBh
 				from Pub_M_YMDStyleNumAssignBox where BizCode=10 and BizContentType=0;
 				
 				update DcDb_A_Zt set Bh=vBh where ID=pBizID;
 				
 				update Pub_M_YMDStyleNumAssignBox set NextNum=NextNum+1 where BizCode=10 and BizContentType=0;
 			end if;
 		end if;
        
        # [开始时间]更新，启动催办始点
        update DcDb_A_Zt set DbKsSj=now(),LastAlertTs=now(),AlertTs=now() where ID=pBizID;
    end if;
    
    if vNode1Name='承办' and vNode2Name='延期审核' then
 		# 约束
 		select 1 into vCnt from DcDb_A_Zt where ID=pBizID and (SqYqYy is null or YqWcSj is null);
 		if vCnt=1 THEN
 			call UpdNodeOfBiz10_err1(); # 申请延期，【申请延期的原因】【申请延期完成时间】必填！
 			leave label1;
 		end if;
 	
        # [申请延期时间]更新
        update DcDb_A_Zt set SqYqSj=now() where ID=pBizID;
 	end if;
 	
    if vNode1Name='延期审核' and vNode2Name='承办' then
 		# 约束
 		select 1 into vCnt from DcDb_A_Zt where ID=pBizID and SfTyYq is null;
 		if vCnt=1 THEN
 			call UpdNodeOfBiz10_err2(); # 批复延期申请，须明确【是否同意延期】！
 			leave label1;
 		end if;
 	end if;
 	
    if vNode1Name='承办' and vNode2Name='反馈报告审核与归档' then
 		# 约束
 		select 1 into vCnt from DcDb_A_Fk where ZtID=pBizID and QrSj is null;
 		if vCnt=1 THEN
 			call UpdNodeOfBiz10_err4(); # 反馈内容提交督办人审核前须确认！
 			leave label1;
 		end if;
 	end if;

 	if vNode1TzSys1!='E' and vNode2TzSys1='E' then
 		# 约束
        select count(*) into vCnt from Pf_A_AttachInfo where PrimaryID=pBizID and PrimaryName='DcDb_A_Zt_Gd' and DelTag='N';
 		if vCnt=0 then
 			call UpdNodeOfBiz10_err3(); # 【督查督办】流程结束前，须生成【督办单】归档文件！
 			leave label1;
 		end if;
 		
 		# 相关更新
 		# 置可归档
 		update Pf_A_Biz set IfToBeArchived='Y' where BizCode=10 and BizID=pBizID;
 	end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `UpdNodeOfBiz11` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `UpdNodeOfBiz11`(
        IN `pBizID` INTEGER UNSIGNED,
        IN `pBizNode1` SMALLINT,
        IN `pBizNode2` SMALLINT,
        IN `pDriveTag` CHAR(1),
        IN `pActionID` SMALLINT UNSIGNED
    )
    COMMENT '【11-信息发布】业务环节迁移过程'
label1:
BEGIN
 	declare vNode1Name,vNode2Name varchar(20);
 	declare vNode1TzSys1,vNode2TzSys1 char(1);
 	
 	declare vCnt tinyint unsigned;
 	declare vYwZt,vGkLb char;
 	declare vAppUrl,vBizTitle varchar(100);
 	declare vPrompt varchar(1000);
 	declare vUsrID smallint unsigned;
 	declare vUsrcName varchar(10);
 	
 	declare done INT DEFAULT 0;
 	
 	declare cur1 cursor for 
 	select p.OrgUsrID,Pf_UsrcName(p.OrgUsrID)
 	from Pub_A_BizViewPw p
 	where exists(select 1 from Pf_A_Biz where BizCode=11 and BizID=pBizID and Seq=p.BizSeq) and p.OrgUsrSel='P';
 	
 	declare cur2 cursor for 
 	select u.ID,u.cName
 	from Pub_A_BizViewPw p,Pf_M_Usr u
 	where exists(select 1 from Pf_A_Biz where BizCode=11 and BizID=pBizID and Seq=p.BizSeq) and p.OrgUsrSel='O' and 
 		Pf_IfOrg1UnderOrg2(Pf_UsrMainOrgID(u.ID),p.OrgUsrID)='Y';
 	
 	declare cur3 cursor for select ID, cName from Pf_M_Usr where IsValid='Y';
 	
 	DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;
 	
 	# >>>
 	set vNode1Name=Pf_BizNodeName(pBizNode1);
 	set vNode2Name=Pf_BizNodeName(pBizNode2);
 	set vNode1TzSys1=Pf_BizNodeSysBitByPt(pBizNode1,1);
 	set vNode2TzSys1=Pf_BizNodeSysBitByPt(pBizNode2,1);
 	
 	# 约束
 	if vNode2TzSys1='E' then
 		select count(*) into vCnt from XxFb_A_Zt where ID=pBizID and YwZt='W';
 		if vCnt=1 THEN
 			call XxFb_ZtQy_err_1(); #流程结束前【审批状态】必须明确：拒绝/通过，不能是待定！
 			leave label1;
 		end if;
 		
 		select count(*) into vCnt from XxFb_A_Zt where ID=pBizID and GkLb='N';
 		if vCnt=1 then
 			select count(*) into vCnt from Pub_A_BizViewPw where Pf_BizIDOfBizSeq(BizSeq)=pBizID;
 			if vCnt=0 then
 				call XxFb_ZtQy_err_2(); #信息不公开，而发布范围又没有定义！
 			end if;
 		end if;
 	end if;
 	
 	# 相关更新
 	if vNode2TzSys1='E' then
 		#发布提醒
 		select YwZt,GkLb into vYwZt,vGkLb from XxFb_A_Zt where ID=pBizID;
 		if vYwZt='P' then
 			select AppUrl Into vAppUrl From Pf_M_Ent;
 			select BizTitle into vBizTitle from Pf_A_Biz where BizCode=11 and BizID=pBizID;
 			
 			if vGkLb='N' then
 				set done=0;
 				open cur1;
 				fetch cur1 into vUsrID,vUsrcName;
 				while (done!=1) do
 					set vPrompt=concat(vUsrcName,'，你好！',Char(13),Char(10),'    标题为：[',vBizTitle,']的信息已发布，请及时查阅！',
 						char(13),char(10),char(13),char(10),'办公系统访问地址是：',vAppUrl);
 					insert into Pf_D_PromptMail values (null, now(), '信息发布提醒',vPrompt, now(), 'N');
 					insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(vUsrID),'Z');
 					fetch cur1 into vUsrID,vUsrcName;
 				end while; 
 				close cur1;
 				
 				set done=0;
 				open cur2;
 				fetch cur2 into vUsrID,vUsrcName;
 				while (done!=1) do
 					set vPrompt=concat(vUsrcName,'，你好！',Char(13),Char(10),'    标题为：[',vBizTitle,']的信息已发布，请及时查阅！',
 						char(13),char(10),char(13),char(10),'办公系统访问地址是：',vAppUrl);
 					insert into Pf_D_PromptMail values (null, now(), '信息发布提醒',vPrompt, now(), 'N');
 					insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(vUsrID),'Z');
 					fetch cur2 into vUsrID,vUsrcName;
 				end while; 
 				close cur2;
 			else
 				set done=0;
 				open cur3;
 				fetch cur3 into vUsrID,vUsrcName;
 				while (done!=1) do
 					set vPrompt=concat(vUsrcName,'，你好！',Char(13),Char(10),'    标题为：[',vBizTitle,']的信息已发布，请及时查阅！',
 						char(13),char(10),char(13),char(10),'办公系统访问地址是：',vAppUrl);
 					insert into Pf_D_PromptMail values (null, now(), '信息发布提醒',vPrompt, now(), 'N');
 					insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(vUsrID),'Z');
 					fetch cur3 into vUsrID,vUsrcName;
 				end while; 
 				close cur3;
 			end if;
 		end if;
 		
 		#置可归档
 		update Pf_A_Biz set IfToBeArchived='Y' where BizCode=11 and BizID=pBizID;
 	end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `UpdNodeOfBiz12` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `UpdNodeOfBiz12`(
        IN `pBizID` INTEGER UNSIGNED,
        IN `pBizNode1` SMALLINT,
        IN `pBizNode2` SMALLINT,
        IN `pDriveTag` CHAR(1),
        IN `pActionID` SMALLINT UNSIGNED
    )
    COMMENT '【12-公司文件】业务环节迁移过程'
label1:
BEGIN
	declare vNode1Name,vNode2Name varchar(20);
 	declare vNode1TzSys1,vNode2TzSys1 char(1);
 	
 	declare vCnt tinyint unsigned;
 	declare vYwZt,vSfGg char;
 	declare vAppUrl,vBizTitle varchar(100);
 	declare vPrompt varchar(1000);
 	declare vUsrID smallint unsigned;
 	declare vUsrcName varchar(10);
 	
 	declare done INT DEFAULT 0;
 	
 	declare cur1 cursor for 
 	select p.OrgUsrID,Pf_UsrcName(p.OrgUsrID)
 	from Pub_A_BizViewPw p
 	where exists(select 1 from Pf_A_Biz where BizCode=12 and BizID=pBizID and Seq=p.BizSeq) and p.OrgUsrSel='P';
 	
 	declare cur2 cursor for 
 	select u.ID,u.cName
 	from Pub_A_BizViewPw p,Pf_M_Usr u
 	where exists(select 1 from Pf_A_Biz where BizCode=12 and BizID=pBizID and Seq=p.BizSeq) and p.OrgUsrSel='O' and 
 		Pf_IfOrg1UnderOrg2(Pf_UsrMainOrgID(u.ID),p.OrgUsrID)='Y';
 	
 	declare cur3 cursor for select ID, cName from Pf_M_Usr;
 	
 	DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;
 	
 	# >>>
 	set vNode1Name=Pf_BizNodeName(pBizNode1);
 	set vNode2Name=Pf_BizNodeName(pBizNode2);
 	set vNode1TzSys1=Pf_BizNodeSysBitByPt(pBizNode1,1);
 	set vNode2TzSys1=Pf_BizNodeSysBitByPt(pBizNode2,1);
 	
 	# 约束
 	if vNode2TzSys1='E' then
 		select count(*) into vCnt from GsWj_A_Zt where ID=pBizID and YwZt='W';
 		if vCnt=1 THEN
 			call GsWj_ZtQy_err_1(); #流程结束前【审批状态】必须明确：拒绝/通过，不能是待定！
 			leave label1;
 		end if;
 		
 		select count(*) into vCnt from GsWj_A_Zt where ID=pBizID and SfGg='N';
 		if vCnt=1 then
 			select count(*) into vCnt from Pub_A_BizViewPw where Pf_BizIDOfBizSeq(BizSeq)=pBizID;
 			if vCnt=0 then
 				call GsWj_ZtQy_err_2(); #公司文件不公开，而分发范围又没有定义！
 			end if;
 		end if;
 	end if;
 	
 	if vNode1Name='编号套红' and vNode2Name='盖章分发' then
 		select count(*) into vCnt from GsWj_A_Zt where ID=pBizID and Bh is null;
 		if vCnt=1 then
 			call GsWj_ZtQy_err_3(); #公司文件盖章分发前要编号！
 		end if;
 	end if;
 	
 	# 相关更新
 	if vNode2TzSys1='E' then
 		# 置被废止文件状态
 		update GsWj_A_Zt set SfBfz='Y' where NewGsWjID=pBizID;
 		
 		#发文提醒
 		select YwZt,SfGg into vYwZt,vSfGg from GsWj_A_Zt where ID=pBizID;
 		if vYwZt='P' then
 			select AppUrl Into vAppUrl From Pf_M_Ent;
 			select BizTitle into vBizTitle from Pf_A_Biz where BizCode=12 and BizID=pBizID;
 			
 			if vSfGg='N' then
 				set done=0;
 				open cur1;
 				fetch cur1 into vUsrID,vUsrcName;
 				while (done!=1) do
 					set vPrompt=concat(vUsrcName,'，你好！',Char(13),Char(10),'    标题为：[',vBizTitle,']的公司文件已发布，请及时查阅！',
 						char(13),char(10),char(13),char(10),'办公系统访问地址是：',vAppUrl);
 					insert into Pf_D_PromptMail values (null, now(), '公司文件发布提醒',vPrompt, now(), 'N');
 					insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(vUsrID),'Z');
 					fetch cur1 into vUsrID,vUsrcName;
 				end while; 
 				close cur1;
 				
 				set done=0;
 				open cur2;
 				fetch cur2 into vUsrID,vUsrcName;
 				while (done!=1) do
 					set vPrompt=concat(vUsrcName,'，你好！',Char(13),Char(10),'    标题为：[',vBizTitle,']的公司文件已发布，请及时查阅！',
 						char(13),char(10),char(13),char(10),'办公系统访问地址是：',vAppUrl);
 					insert into Pf_D_PromptMail values (null, now(), '公司文件发布提醒',vPrompt, now(), 'N');
 					insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(vUsrID),'Z');
 					fetch cur2 into vUsrID,vUsrcName;
 				end while; 
 				close cur2;
 			else
 				set done=0;
 				open cur3;
 				fetch cur3 into vUsrID,vUsrcName;
 				while (done!=1) do
 					set vPrompt=concat(vUsrcName,'，你好！',Char(13),Char(10),'    标题为：[',vBizTitle,']的公司文件已发布，请及时查阅！',
 						char(13),char(10),char(13),char(10),'办公系统访问地址是：',vAppUrl);
 					insert into Pf_D_PromptMail values (null, now(), '公司文件发布提醒',vPrompt, now(), 'N');
 					insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(vUsrID),'Z');
 					fetch cur3 into vUsrID,vUsrcName;
 				end while; 
 				close cur3;
 			end if;
 		end if;
 		
 		#置可归档
 		update Pf_A_Biz set IfToBeArchived='Y' where BizCode=12 and BizID=pBizID;
 	end if;
 	
 	#从结束撤回
 	if vNode1TzSys1='E' and vNode2TzSys1!='E' then
 		# 置已被废止文件状态为未废止
 		update GsWj_A_Zt set SfBfz='N' where NewGsWjID=pBizID;
 	end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `UpdNodeOfBiz13` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `UpdNodeOfBiz13`(
        IN `pBizID` INTEGER UNSIGNED,
        IN `pBizNode1` SMALLINT,
        IN `pBizNode2` SMALLINT,
        IN `pDriveTag` CHAR(1),
        IN `pActionID` SMALLINT UNSIGNED
    )
    COMMENT '【13-请示签报】业务环节迁移过程'
label1:
BEGIN
 	declare vNode1Name,vNode2Name varchar(20);
 	declare vNode1TzSys1,vNode2TzSys1 char(1);
 	declare vCnt tinyint unsigned;
 	
 	declare vSxLbID smallint UNSIGNED;
 	declare vBh varchar(20);
 	
 	# >>>
 	set vNode1Name=Pf_BizNodeName(pBizNode1);
 	set vNode2Name=Pf_BizNodeName(pBizNode2);
 	set vNode1TzSys1=Pf_BizNodeSysBitByPt(pBizNode1,1);
 	set vNode2TzSys1=Pf_BizNodeSysBitByPt(pBizNode2,1);
 	
 	if vNode1Name='执行指派' and vNode2Name='执行反馈' then
 		# 约束
 		select 1 into vCnt from QsQb_A_Zt where ID=pBizID and (ZrrUsrIDs is null or LsYq is null or LsQx is null);
 		if vCnt=1 THEN
 			call QsQb_ZtQy_err_1(); #提交到下一环节前，【落实责任人员】【落实要求】【落实期限】必填！
 			leave label1;
 		end if;
 	
 		select 1 into vCnt from QsQb_A_Zt where ID=pBizID and LsQx<=now();
 		if vCnt=1 THEN
 			call QsQb_ZtQy_err_2(); #请示签报的【落实期限】不应小于当前时间！
 			leave label1;
 		end if;
 	end if;
 	
 	if vNode1TzSys1!='E' and vNode2TzSys1='E' then
 		# 约束
 		select 1 into vCnt from QsQb_A_Zt where ID=pBizID and (LsCd is null or LsQkZj is null);
 		if vCnt=1 THEN
 			call QsQb_ZtQy_err_3(); #流程结束前，【落实程度】【落实情况总结】必填！
 			leave label1;
 		end if;
 		
 		select 1 into vCnt from QsQb_A_Zt where ID=pBizID and LsCd>100;
 		if vCnt=1 THEN
 			call QsQb_ZtQy_err_4(); #请示签报的【落实程度】不应大于100！
 			leave label1;
 		end if;
 		
 		# 相关更新
 		# 编号
 		select Bh,SxLbID into vBh,vSxLbID from QsQb_A_Zt where ID=pBizID;
 		if vBh is null then
 			select count(*) into vCnt from Pub_M_YMDStyleNumAssignBox
 			where BizCode=13 and BizContentType=vSxLbID and YMDStyle=DATE_FORMAT(now(),'%Y');
 			if vCnt=0 then
 				delete from Pub_M_YMDStyleNumAssignBox where BizCode=13 and BizContentType=vSxLbID;
 				
 				insert into Pub_M_YMDStyleNumAssignBox values (13,vSxLbID,DATE_FORMAT(now(),'%Y'),2);
 				
 				update QsQb_A_Zt set Bh=concat(Pf_EntAppCodeVal(vSxLbID),'-',DATE_FORMAT(now(),'%Y'),'-001') where ID=pBizID;
 			else
 				select concat(Pf_EntAppCodeVal(BizContentType),'-',YMDStyle,'-',LPAD(concat(NextNum,''),3,'0')) into vBh
 				from Pub_M_YMDStyleNumAssignBox where BizCode=13 and BizContentType=vSxLbID;
 				
 				update QsQb_A_Zt set Bh=vBh where ID=pBizID;
 				
 				update Pub_M_YMDStyleNumAssignBox set NextNum=NextNum+1 where BizCode=13 and BizContentType=vSxLbID;
 			end if;
 		end if;
 		
 		#置可归档
 		update Pf_A_Biz set IfToBeArchived='Y' where BizCode=13 and BizID=pBizID;
 	end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `UpdNodeOfBiz14` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `UpdNodeOfBiz14`(
        IN `pBizID` INTEGER UNSIGNED,
        IN `pBizNode1` SMALLINT,
        IN `pBizNode2` SMALLINT,
        IN `pDriveTag` CHAR(1),
        IN `pActionID` SMALLINT UNSIGNED
    )
    COMMENT '【14-日常借款】业务环节迁移过程'
label1:
BEGIN
 	declare vNode1Name,vNode2Name varchar(20);
 	declare vNode1TzSys1,vNode2TzSys1 char(1);
 	
 	declare vCnt tinyint unsigned;
    declare vJkBh CHAR(8);
    declare vInitUsrID smallint unsigned;
    declare vJkAmt DECIMAL(15,2) unsigned;
 	
 	# >>>
 	set vNode1Name=Pf_BizNodeName(pBizNode1);
 	set vNode2Name=Pf_BizNodeName(pBizNode2);
 	set vNode1TzSys1=Pf_BizNodeSysBitByPt(pBizNode1,1);
 	set vNode2TzSys1=Pf_BizNodeSysBitByPt(pBizNode2,1);
 	
 	if vNode1Name='财务审核' and vNode2Name='出纳放款' then
    	#编号
    	select count(*) into vCnt from Pub_M_YMDStyleNumAssignBox
        where BizCode=14 and BizContentType=0 and YMDStyle=DATE_FORMAT(now(),'%Y');
        if vCnt=0 then
        	insert into Pub_M_YMDStyleNumAssignBox values (14,0,DATE_FORMAT(now(),'%Y'),2); 
            
            update JkBx_A_Jk set JkBh=concat(DATE_FORMAT(now(),'%Y'),'-001') where ID=pBizID and JkBh is null;
        else
        	select concat(YMDStyle,'-',LPAD(concat(NextNum,''),3,'0')) into vJkBh
            from Pub_M_YMDStyleNumAssignBox
            where BizCode=14 and BizContentType=0 and YMDStyle=DATE_FORMAT(now(),'%Y');
            
            update JkBx_A_Jk set JkBh=vJkBh where ID=pBizID and JkBh is null;
            
            update Pub_M_YMDStyleNumAssignBox set NextNum=NextNum+1
            where BizCode=14 and BizContentType=0 and YMDStyle=DATE_FORMAT(now(),'%Y');
        end if;
 	end if;
 	
 	if vNode1Name='出纳放款' and pDriveTag='S' then
        select count(*) into vCnt from Pf_A_AttachInfo where PrimaryID=pBizID and PrimaryName='JkBx_A_Jk_Qz' and DelTag='N';
 		if vCnt=0 then
 			call UpdNodeOfBiz14_err1(); # 从【出纳放款】向下流转前，须生成借款申请表线上签字文件！
 			leave label1;
 		end if;
 	end if;
 	
 	if vNode1TzSys1!='E' and vNode2TzSys1='E' then
    	update JkBx_A_Jk set DqSj=DATE_ADD(now(),interval JkZq day) where ID=pBizID;	#[到期时间]计算
        
        #增加个人借款余额
        select InitUsrID,JkAmt into vInitUsrID,vJkAmt from JkBx_A_Jk where ID=pBizID;
        select count(*) into vCnt from JkBx_M_JkYe where UsrID=vInitUsrID;
        if vCnt=0 then
        	insert into JkBx_M_JkYe values (vInitUsrID,vJkAmt,now());
        else
        	update JkBx_M_JkYe set JkYe=JkYe+vJkAmt where UsrID=vInitUsrID;
        end if;
 	end if;
 	
 	if vNode1TzSys1='E' and vNode2TzSys1!='E' then
 		# 约束
 		call UpdNodeOfBiz14_Err2(); # 流程结束后不能撤回！
 		LEAVE label1;
 	end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `UpdNodeOfBiz15` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `UpdNodeOfBiz15`(
        IN `pBizID` INTEGER UNSIGNED,
        IN `pBizNode1` SMALLINT,
        IN `pBizNode2` SMALLINT,
        IN `pDriveTag` CHAR(1),
        IN `pActionID` SMALLINT UNSIGNED
    )
    COMMENT '【15-还款记录】业务环节迁移过程'
label1:
BEGIN
 	declare vNode1Name,vNode2Name varchar(20);
 	declare vNode1TzSys1,vNode2TzSys1 char(1);
    declare vFlowBranchName VARCHAR(40);
    declare vCnt tinyint unsigned;
    
    declare vHkrID smallint unsigned;
	declare vJkYe,vHkAmt decimal(15,2) unsigned; #个人借款余额、当前还款额
    
    #游标变量
	declare vJkID integer unsigned;
    declare vJkAmt,vCdAmt,vHkAmtLeft decimal(15,2) unsigned;
    
    declare done INT DEFAULT 0;
    
    declare cur1 CURSOR for 
	select ID,JkAmt,CdAmt
	from JkBx_A_Jk
	where InitUsrID=vHkrID and JkAmt>CdAmt and DqSj is not null
	order by DqSj;
	
	declare CONTINUE HANDLER FOR NOT FOUND SET done = 1;
    
 	# >>>
 	set vNode1Name=Pf_BizNodeName(pBizNode1);
 	set vNode2Name=Pf_BizNodeName(pBizNode2);
 	set vNode1TzSys1=Pf_BizNodeSysBitByPt(pBizNode1,1);
 	set vNode2TzSys1=Pf_BizNodeSysBitByPt(pBizNode2,1);
 	set vFlowBranchName=Pf_BizFlowBranchName(pActionID);

   	select InitUsrID,HkAmt into vHkrID,vHkAmt from JkBx_A_Hk where ID=pBizID;
    
    if vNode1Name='财务办理' and pDriveTag='S' THEN
        select count(*) into vCnt from Pf_A_AttachInfo where PrimaryID=pBizID and PrimaryName='JkBx_A_Hk_Qz' and DelTag='N';
 		if vCnt=0 then
 			call UpdNodeOfBiz15_err1(); # 双方线上签字前，须生成还款处理单线上签字文件！
 			leave label1;
 		end if;
	end if;
    
    if vFlowBranchName='确认签字、确认还款、结束流程' and pDriveTag='S' THEN
        # 相关更新
        update Pf_A_Biz set IfToBeArchived='Y' where BizCode=15 and BizID=pBizID;
        
        #冲抵员工个人借款余额
        select coalesce(max(JkYe),0) into vJkYe from JkBx_M_JkYe where UsrID=vHkrID;
        if vJkYe>vHkAmt then
            update JkBx_M_JkYe set JkYe=JkYe-vHkAmt,UpdTs=now() where UsrID=vHkrID;
        else
            delete from JkBx_M_JkYe where UsrID=vHkrID;
        end if;

        #按到期时间顺序冲抵借款单
        set vHkAmtLeft=vHkAmt;
        set done=0;
        open cur1;
        cd_loop:
        LOOP
            fetch cur1 into vJkID,vJkAmt,vCdAmt;
            if done=1 or vHkAmtLeft=0 THEN
                LEAVE cd_loop;
            END IF;
            
          	if vJkAmt>(vCdAmt+vHkAmtLeft) then
                #（当前还款余额+当前借款单已冲抵借款额）不够冲抵当前借款单借款额
                update JkBx_A_Jk set CdAmt=CdAmt+vHkAmtLeft where ID=vJkID;
                set vHkAmtLeft=0;
          	else
                # 当前借款单结清、归档
                update JkBx_A_Jk set CdAmt=JkAmt where ID=vJkID;
                update Pf_A_Biz set IfToBeArchived='Y' where BizCode=14 and BizID=vJkID;
                set vHkAmtLeft=vHkAmtLeft-(vJkAmt-vCdAmt);
          	end if;
        END LOOP;
        close cur1;
    end if;

    if vNode1TzSys1='E' and vNode2TzSys1!='E' THEN #撤回
 		call UpdNodeOfBiz15_err2(); # 还款处理结束的流程不能撤回！
 		leave label1;
    end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `UpdNodeOfBiz16` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `UpdNodeOfBiz16`(
        IN `pBizID` INTEGER,
        IN `pBizNode1` SMALLINT,
        IN `pBizNode2` SMALLINT,
        IN `pDriveTag` CHAR(1),
        IN `pActionID` SMALLINT UNSIGNED
    )
    COMMENT '【16-会议管理】业务环节迁移过程'
label1:
BEGIN
	declare vNode1Name,vNode2Name varchar(20);
    declare vNode1TzSys1,vNode2TzSys1 char(1);
    
    declare vZkSj datetime;
    declare vBmSj datetime;
    declare vDd varchar(100);
    
    declare vAppUrl,vBizTitle varchar(100);
    declare vPrompt varchar(1000);
    declare vUsrID smallint unsigned;
    declare vUsrcName varchar(10);
    
    declare done INT DEFAULT 0;
	declare cur cursor for 
    	select u.ID, u.cName 
        from Pf_M_Usr u 
        where exists(select 1 from HyGl_A_Zt where ID=pBizID and (FIND_IN_SET(u.ID,NbChRyUsrIDs)>0 or u.ID=RcdUsrID));
    	
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;
    
    # >>>
    set vNode1Name=Pf_BizNodeName(pBizNode1);
    set vNode2Name=Pf_BizNodeName(pBizNode2);
    set vNode1TzSys1=Pf_BizNodeSysBitByPt(pBizNode1,1);
    set vNode2TzSys1=Pf_BizNodeSysBitByPt(pBizNode2,1);
    
    Select AppUrl Into vAppUrl From Pf_M_Ent;
    select BizTitle into vBizTitle from Pf_A_Biz where BizCode=16 and BizID=pBizID;
    select ZkSj,BmSj,Pf_EntAppCodeVal(DdID) into vZkSj,vBmSj,vDd from HyGl_A_Zt where ID=pBizID;
    
    if vNode1Name='发起' and vNode2Name='会议记录' and vZkSj>now() then
    	# 会议参会提醒
        set done=0;
        open cur;
        fetch cur into vUsrID,vUsrcName;
        while (done!=1) do
        	set vPrompt=concat(vUsrcName,'，你好！',Char(13),Char(10),
            '    会议：【',vBizTitle,'】，地点：【',vDd,'】，召开时间：【',DATE_FORMAT(vZkSj,'%Y-%m-%d %H:%i'),
            '】，闭幕时间：【',DATE_FORMAT(vBmSj,'%Y-%m-%d %H:%i'),'】。请您及时参会！',
            char(13),char(10),char(13),char(10),'办公系统访问地址是：',vAppUrl);
                  
            insert into Pf_D_PromptMail values (null, now(), '会议参会提醒',vPrompt, now(), 'N');
            insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(vUsrID),'Z');
            
            fetch cur into vUsrID,vUsrcName;
        end while; 
        close cur;
    end if;
    
	if vNode1TzSys1!='E' and vNode2TzSys1='E' then
        # 通知与会人员
        set done=0;
        open cur;
        fetch cur into vUsrID,vUsrcName;
        while (done!=1) do
        	set vPrompt=concat(vUsrcName,'，你好！',Char(13),Char(10),
            '    会议【',vBizTitle,'】的会议记录已于：【',DATE_FORMAT(now(),'%Y-%m-%d %H:%i'),
            '】关闭，相关会议纪要已签署通过，请知悉！',
            char(13),char(10),char(13),char(10),'办公系统访问地址是：',vAppUrl);
                  
            insert into Pf_D_PromptMail values (null, now(), '会议记录关闭提醒',vPrompt, now(), 'N');
            insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(vUsrID),'Z');
            
            fetch cur into vUsrID,vUsrcName;
        end while; 
        close cur;
        
        # 置可归档
        update Pf_A_Biz set IfToBeArchived='Y' where BizCode=16 and BizID=pBizID;
    end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `UpdNodeOfBiz17` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `UpdNodeOfBiz17`(
        IN `pBizID` INTEGER UNSIGNED,
        IN `pBizNode1` SMALLINT,
        IN `pBizNode2` SMALLINT,
        IN `pDriveTag` CHAR(1),
        IN `pActionID` SMALLINT UNSIGNED
    )
    COMMENT '【17-请休假】业务环节迁移过程'
label1:
BEGIN
 	declare vNode1Name,vNode2Name varchar(20);
 	declare vNode1TzSys1,vNode2TzSys1 char(1);
 	
 	declare vCnt tinyint unsigned;
 	declare vSjXnjTs decimal(4,1);
 	declare vUsrID smallint unsigned;
 	declare vSnKxTs,vSnYxTs,vBnKxTs,vBnYxTs decimal(4,1);
 	
 	# >>>
 	set vNode1Name=Pf_BizNodeName(pBizNode1);
 	set vNode2Name=Pf_BizNodeName(pBizNode2);
 	set vNode1TzSys1=Pf_BizNodeSysBitByPt(pBizNode1,1);
 	set vNode2TzSys1=Pf_BizNodeSysBitByPt(pBizNode2,1);
 	
 	# 约束
 	if vNode1TzSys1='S' and vNode2TzSys1!='S' then
 		select count(*) into vCnt from Xj_M_Jb j,Xj_M_JbTj t,Xj_A_Mx m where m.ZtID=pBizID and m.JbTjID=t.ID and t.JbCode=j.Code and j.SfXyZmFj='Y';
 		if vCnt!=0 THEN
 			# 明细存在需提供电子证明的假别条件！
 			select count(*) into vCnt from Pf_A_AttachInfo where PrimaryID=pBizID and PrimaryName='Xj_A_Zt' and DelTag='N';
 			if vCnt=0 then
 				# 未上传证明附件
 				call Xj_ZtQy_err1(); # 请休假明细存在需提供电子证明的假别条件！
 				leave label1;
 			end if;
 		end if;
 	end if;
 		
 	# 相关更新
 	if vNode1Name='销假' and vNode2Name='销假确认' then
 		select count(*) into vCnt from Xj_A_Mx where ZtID=pBizID and SjJsRq>now();
 		if vCnt>0 then
 			call Xj_ZtQy_err2(); # 销假时间应晚于实际休假时段结束时间！
 			leave label1;
 		end if;
 		update Xj_A_Zt set XjSj=now() where ID=pBizID;
 	end if;
 		
 	if vNode1Name='销假确认' and vNode2Name='销假' then
 		update Xj_A_Zt set XjSj=null where ID=pBizID;
 	end if;
 		
 	if vNode1TzSys1='E' and vNode2TzSys1!='E' then
 		select count(*) into vCnt from Xj_A_Mx where ZtID=pBizID and exists(select 1 from Xj_M_JbTj where ID=Xj_A_Mx.JbTjID and JbCode=6);
 		if vCnt>0 then
 			call Xj_ZtQy_err3(); # 如果明细中有年假申请，流程结束不能撤回！
 		end if;
 	end if;
 	
 	if vNode2TzSys1='E' then
 		# 对于明细有休年假的情况，到Xj_M_NjTs：用明细的【SjXjTs】，先累加【SnYxTs】，累满了（与SnKxTs相等）再累加【BnYxTs】
 		select coalesce(min(SjXjTs),0) into vSjXnjTs from Xj_A_Mx where ZtID=pBizID and exists(select 1 from Xj_M_JbTj where ID=Xj_A_Mx.JbTjID and JbCode=6);
 		if vSjXnjTs>0 then
 			select InitUsrID into vUsrID from Xj_A_Zt where ID=pBizID;
 			select SnKxTs,SnYxTs,BnKxTs,BnYxTs into vSnKxTs,vSnYxTs,vBnKxTs,vBnYxTs from Xj_M_NjTs where UsrID=vUsrID;
 			if vSnKxTs>=vSnYxTs+vSjXnjTs then
 				update Xj_M_NjTs set SnYxTs=SnYxTs+vSjXnjTs where UsrID=vUsrID;
 			else
 				if vBnKxTs>=vBnYxTs+(vSnYxTs+vSjXnjTs-vSnKxTs) then
 					update Xj_M_NjTs set SnYxTs=vSnKxTs,BnYxTs=BnYxTs+(vSnYxTs+vSjXnjTs-vSnKxTs) where UsrID=vUsrID;
 				else
 					update Xj_M_NjTs set SnYxTs=vSnKxTs,BnYxTs=vBnKxTs where UsrID=vUsrID;
 				end if;
 			end if;
 		end if;
 		
 		#置可归档
 		update Pf_A_Biz set IfToBeArchived='Y' where BizCode=17 and BizID=pBizID;
 	end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `UpdNodeOfBiz18` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `UpdNodeOfBiz18`(
        IN `pBizID` INTEGER UNSIGNED,
        IN `pBizNode1` SMALLINT,
        IN `pBizNode2` SMALLINT,
        IN `pDriveTag` CHAR(1),
        IN `pActionID` SMALLINT UNSIGNED
    )
    COMMENT '【18-报销申请】业务环节迁移过程'
label1:
BEGIN
	declare vNode1Name,vNode2Name varchar(20);
    declare vNode1TzSys1,vNode2TzSys1 char(1);
    
    declare vCnt,vCnt1 tinyint unsigned;
    
    declare vPrompt varchar(200);
    declare vUsrEmail varchar(100);
    
    declare vInitUsrID,vDszUsrID smallint unsigned;
    declare vSkZhMc VARCHAR(100);
    declare vJkYe,vYfYe decimal(15,2) unsigned;
    declare vSfDwFk,vSfCdJk char(1);
    declare vBxAmt,vBlAmt decimal(15,2) unsigned;
    
    #游标变量
	declare vJkID integer unsigned;
    declare vJkAmt,vCdAmt,vBxAmtLeft decimal(15,2) unsigned;
    
    declare done INT DEFAULT 0;
    
    declare cur1 CURSOR for 
	select ID,JkAmt,CdAmt
	from JkBx_A_Jk
	where InitUsrID=vInitUsrID and JkAmt>CdAmt and DqSj is not null
	order by DqSj;
	
	declare CONTINUE HANDLER FOR NOT FOUND SET done = 1;
    
    # >>>
    set vNode1Name=Pf_BizNodeName(pBizNode1);
    set vNode2Name=Pf_BizNodeName(pBizNode2);
    set vNode1TzSys1=Pf_BizNodeSysBitByPt(pBizNode1,1);
    set vNode2TzSys1=Pf_BizNodeSysBitByPt(pBizNode2,1);
    
    if vNode1TzSys1='S' and vNode2TzSys1!='S' then
    	#<是否对外付款><是否核销备用金>互斥
        select count(*) into vCnt from JkBx_A_Bx where ID=pBizID and SfDwFk='Y' and SfCdJk='Y';
        if vCnt = 1 then
 			call UpdNodeOfBiz18_err4(); # <是否对外付款><是否核销备用金>互斥！
 			leave label1;
        end if;
        
    	#费用报销项的预算科目必须标注
        select count(*) into vCnt from JkBx_A_BxQt where BxID=pBizID;
        select count(*) into vCnt1 from JkBx_A_BxQt where BxID=pBizID and FyLb is not null;
        if vCnt > vCnt1 then
 			call UpdNodeOfBiz18_err3(); # 发起报销申请向下流转前，费用报销项的预算科目必须标注！
 			leave label1;
        end if;
        
    	#71类预算科目（机/车票费）的费用报销项的行程单必须录入
        select count(*) into vCnt from JkBx_A_BxQt where BxID=pBizID and FyLb=71;
        #select count(*) into vCnt1 from JkBx_A_BxQt where BxID=pBizID and FyLb=71 and BxSq_QtXcdMs(ID)!='-';
        select count(*) into vCnt1 from JkBx_A_BxQt where BxID=pBizID and FyLb=71 and 
        	exists(select 1 from Pf_A_AttachInfo where PrimaryName = 'JkBx_A_BxQt71' and PrimaryID=JkBx_A_BxQt.ID and DelTag='N');
        if vCnt>0 and vCnt > vCnt1 then
 			call UpdNodeOfBiz18_err5(); # 机/车票费科目的费用报销项的行程单必须录入！
 			leave label1;
        end if;
 	end if;

 	if vNode1Name='报销结清' and pDriveTag='S' then
        select count(*) into vCnt from Pf_A_AttachInfo where PrimaryID=pBizID and PrimaryName='JkBx_A_Bx_Qz' and DelTag='N';
 		if vCnt=0 then
 			call UpdNodeOfBiz18_err2(); # 从【报销结清】向下流转前，须生成报销申请表线上签字文件！
 			leave label1;
 		end if;
 	end if;
 	
    if vNode1TzSys1!='E' and vNode2TzSys1='E' then
    	#变量准备
    	select concat(Pf_UsrcName(InitUsrID),'，您好！',Char(13),Char(10),'    您流水为[',pBizID,']的报销单已结清，请在三个工作日后到银行账户查询。'),
            Pf_UsrEmail(InitUsrID),InitUsrID,SfDwFk,SfCdJk,BxAmt,SkZhMc 
    	into vPrompt,vUsrEmail,vInitUsrID,vSfDwFk,vSfCdJk,vBxAmt,vSkZhMc 
    	from JkBx_A_Bx where ID=pBizID;
		
    	#报销结清提醒
      	insert into Pf_D_PromptMail values (null, now(), '报销结清提醒',vPrompt, now(), 'N');
      	insert into Pf_D_PromptMailTo values (@@identity,vUsrEmail,'Z');
        
        #提醒董事长
        select MIN(UsrID) into vDszUsrID from Pf_M_RoleUsr where Pf_RoleName(RoleID)='董事长';

        select concat('董事长，您好！',Char(13),Char(10),'    ',Pf_UsrcName(InitUsrID),'于',DATE_FORMAT(now(),'%Y-%m-%d %H:%i'),'报销金额￥',
        	format(BxAmt,2),'，报销单号【',pBizID,'】，请知悉！')
        into vPrompt
        from JkBx_A_Bx where ID=pBizID;

      	insert into Pf_D_PromptMail values (null, now(), '员工报销结清提醒',vPrompt, now(), 'N');
      	insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(vDszUsrID),'Z');
        
		#置可归档
    	update Pf_A_Biz set IfToBeArchived='Y' where BizCode=18 and BizID=pBizID;
        
		#计算<JkYe>/<YfYe>、<BlAmt>
        set vBlAmt=0;

       	if vSfCdJk='Y' then
           	#核销借款
            select coalesce(max(JkYe),0) into vJkYe from JkBx_M_JkYe where UsrID=vInitUsrID;
           	if vBxAmt>vJkYe then
           		set vBlAmt=vBxAmt-vJkYe;
			end if;
            update JkBx_A_Bx set JkYe=vJkYe,BlAmt=vBlAmt where ID=pBizID;
            
        	#冲抵员工个人借款余额
            if vJkYe>vBxAmt then
            	update JkBx_M_JkYe set JkYe=JkYe-vBxAmt,UpdTs=now() where UsrID=vInitUsrID;
            else
            	delete from JkBx_M_JkYe where UsrID=vInitUsrID;
            end if;
            
        	#按到期时间顺序冲抵借款单
            set vBxAmtLeft=vBxAmt;
            set done=0;
            open cur1;
            cd_loop:
            LOOP
                fetch cur1 into vJkID,vJkAmt,vCdAmt;
                if done=1 or vBxAmtLeft=0 THEN
                    LEAVE cd_loop;
                END IF;
                
                if vJkAmt>(vCdAmt+vBxAmtLeft) then
                	#（当前报销额+当前借款单已冲抵借款额）不够冲抵当前借款单借款额
                	update JkBx_A_Jk set CdAmt=CdAmt+vBxAmtLeft where ID=vJkID;
                    set vBxAmtLeft=0;
                else
                	# 当前借款单结清、归档
                	update JkBx_A_Jk set CdAmt=JkAmt where ID=vJkID;
                    update Pf_A_Biz set IfToBeArchived='Y' where BizCode=14 and BizID=vJkID;
                    set vBxAmtLeft=vBxAmtLeft-(vJkAmt-vCdAmt);
                end if;
            END LOOP;
            close cur1;
		end if;

        if vSfDwFk='Y' then
        	#对外付款
            select ifnull(max(YfYe),0) into vYfYe from ZxBg_M_Skf where SkrMc=vSkZhMc;
           	if vBxAmt>vYfYe then
           		set vBlAmt=vBxAmt-vYfYe;
			end if;
            update JkBx_A_Bx set JkYe=vYfYe,BlAmt=vBlAmt where ID=pBizID;
            
        	#冲抵供应商预付余额
            if vYfYe>vBxAmt then
            	update ZxBg_M_Skf set YfYe=YfYe-vBxAmt,UpdTs=now() where SkrMc=vSkZhMc;
            else
            	update ZxBg_M_Skf set YfYe=0,UpdTs=now() where SkrMc=vSkZhMc;
            end if;
		end if;
        
        if vSfCdJk='N' and vSfDwFk='N' then
           	set vBlAmt=vBxAmt;
            update JkBx_A_Bx set JkYe=0,BlAmt=vBlAmt where ID=pBizID;
        end if;
    end if;
	
    if vNode1TzSys1='E' and vNode2TzSys1!='E' then
    	#约束
    	call UpdNodeOfBiz18_Err1(); # 流程结束后不能撤回！
        LEAVE label1;
    end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `UpdNodeOfBiz19` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `UpdNodeOfBiz19`(
        IN `pBizID` INTEGER UNSIGNED,
        IN `pBizNode1` SMALLINT,
        IN `pBizNode2` SMALLINT,
        IN `pDriveTag` CHAR(1),
        IN `pActionID` SMALLINT UNSIGNED
    )
    COMMENT '【19-预付款审批】业务环节迁移过程'
label1:
BEGIN
 	declare vNode1Name,vNode2Name varchar(20);
 	declare vNode1TzSys1,vNode2TzSys1 char(1);
    declare vFlowBranchName VARCHAR(40);
    declare vCnt tinyint unsigned;
    
	declare vSubmitTs datetime;
        
    declare vAppUrl,vBizTitle varchar(100);
    declare vInitUsrID smallint unsigned;
    declare vPrompt varchar(1000);
    
    declare vSkfID smallint unsigned;
    declare vYfYe,vFkAmt decimal(15,2) unsigned;
    
 	# >>>
 	set vNode1Name=Pf_BizNodeName(pBizNode1);
 	set vNode2Name=Pf_BizNodeName(pBizNode2);
 	set vNode1TzSys1=Pf_BizNodeSysBitByPt(pBizNode1,1);
 	set vNode2TzSys1=Pf_BizNodeSysBitByPt(pBizNode2,1);
 	set vFlowBranchName=Pf_BizFlowBranchName(pActionID);

   	select BizTitle,SubmitTs,InitUsrID into vBizTitle,vSubmitTs,vInitUsrID from Pf_A_Biz where BizCode=19 and BizID=pBizID;
    
    if vNode1TzSys1!='E' and vNode2TzSys1='E' THEN
        select count(*) into vCnt from Pf_A_AttachInfo where PrimaryID=pBizID and PrimaryName='ZxBg_A_YfkSp_Qz' and DelTag='N';
 		if vCnt=0 then
 			call UpdNodeOfBiz19_err1(); # 呈相关领导线上签字前，须生成预付款审批单线上签字文件！
 			leave label1;
 		end if;

        # 相关更新
        # 0、置业务可归档、业务状态'P'
        update Pf_A_Biz set IfToBeArchived='Y' where BizCode=19 and BizID=pBizID;
        update ZxBg_A_YfkSp set BizStatus='P' where ID=pBizID;
        
        # 发提醒给申请业务员
        select AppUrl Into vAppUrl From Pf_M_Ent;
        set vPrompt=concat(Pf_UsrcName(vInitUsrID),'，你好！',Char(13),Char(10),
            '    【',vBizTitle,'】审批流程，已于：【',DATE_FORMAT(now(),'%Y-%m-%d %H:%i'),'】结束！详情见办公系统。',
            char(13),char(10),char(13),char(10),'办公系统访问地址是：',vAppUrl);
                  
        insert into Pf_D_PromptMail values (null, now(), '预付款审批流程结束提醒',vPrompt, now(), 'N');
        insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(vInitUsrID),'Z');
        
        #更新业务的[前期预付款余额][本次付款后余额]、主文件的[预付余额]
        select SkfID,FkAmt into vSkfID,vFkAmt from ZxBg_A_YfkSp where ID=pBizID;
        select coalesce(max(YfYe),0) into vYfYe from ZxBg_M_Skf where ID=vSkfID;
        update ZxBg_A_YfkSp set LastYfYe=vYfYe,YfZe=vYfYe+FkAmt where ID=pBizID;
        update ZxBg_M_Skf set YfYe=YfYe+vFkAmt where ID=vSkfID;
    end if;

    if vNode1TzSys1='E' and vNode2TzSys1!='E' THEN #撤回
 		call UpdNodeOfBiz19_err2(); # 预付款审批结束的流程不能撤回！
 		leave label1;
    end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `UpdNodeOfBiz20` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `UpdNodeOfBiz20`(
        IN `pBizID` INTEGER UNSIGNED,
        IN `pBizNode1` SMALLINT,
        IN `pBizNode2` SMALLINT,
        IN `pDriveTag` CHAR(1),
        IN `pActionID` SMALLINT UNSIGNED
    )
    COMMENT '【20-公司收文】业务环节迁移过程'
label1:
BEGIN
	declare vNode1Name,vNode2Name varchar(20);
 	declare vNode1TzSys1,vNode2TzSys1 char(1);
 	
 	declare vCnt tinyint unsigned;
 	declare vSfGg char;
 	declare vAppUrl,vBizTitle varchar(100);
 	declare vPrompt varchar(1000);
 	declare vUsrID smallint unsigned;
 	declare vUsrcName varchar(10);
 	
 	declare done INT DEFAULT 0;
 	
 	declare cur1 cursor for 
 	select p.OrgUsrID,Pf_UsrcName(p.OrgUsrID)
 	from Pub_A_BizViewPw p
 	where exists(select 1 from Pf_A_Biz where BizCode=20 and BizID=pBizID and Seq=p.BizSeq) and p.OrgUsrSel='P';
 	
 	declare cur2 cursor for 
 	select u.ID,u.cName
 	from Pub_A_BizViewPw p,Pf_M_Usr u
 	where exists(select 1 from Pf_A_Biz where BizCode=20 and BizID=pBizID and Seq=p.BizSeq) and p.OrgUsrSel='O' and 
 		Pf_IfOrg1UnderOrg2(Pf_UsrMainOrgID(u.ID),p.OrgUsrID)='Y';
 	
 	declare cur3 cursor for select ID, cName from Pf_M_Usr;
 	
 	DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;
 	
 	# >>>
 	set vNode1Name=Pf_BizNodeName(pBizNode1);
 	set vNode2Name=Pf_BizNodeName(pBizNode2);
 	set vNode1TzSys1=Pf_BizNodeSysBitByPt(pBizNode1,1);
 	set vNode2TzSys1=Pf_BizNodeSysBitByPt(pBizNode2,1);
 	
 	# 约束
 	if vNode2TzSys1='E' then
 		select count(*) into vCnt from GsSw_A_Zt where ID=pBizID and SfGg='N';
 		if vCnt=1 then
 			select count(*) into vCnt from Pub_A_BizViewPw where Pf_BizIDOfBizSeq(BizSeq)=pBizID;
 			if vCnt=0 then
 				call UpdNodeOfBiz20_err1(); # 公司收文不公开，而分发范围又没有定义！
 			end if;
 		end if;
 	end if;
 	
 	if vNode1Name='登记' and vNode2Name!='登记' then
    	select count(*) into vCnt from Pf_A_AttachInfo where PrimaryID=pBizID and PrimaryName='GsSwZw' and DelTag='N';
 		if vCnt=0 then
 			call UpdNodeOfBiz20_err2(); # 在收文【登记】环节，须上传收文正文文件！
 			leave label1;
 		end if;

 		select count(*) into vCnt from GsSw_A_Zt where ID=pBizID and Bh is null;
 		if vCnt=1 then
 			call UpdNodeOfBiz20_err3(); # 公司收文传阅/办理前要编号！
 		end if;
 	end if;
 	
 	# 相关更新
 	if vNode2TzSys1='E' then
		select AppUrl Into vAppUrl From Pf_M_Ent;
		select BizTitle into vBizTitle from Pf_A_Biz where BizCode=20 and BizID=pBizID;
        
 		#收文阅知提醒
 		select SfGg into vSfGg from GsSw_A_Zt where ID=pBizID;
		if vSfGg='N' then
			set done=0;
			open cur1;
			fetch cur1 into vUsrID,vUsrcName;
			while (done!=1) do
				set vPrompt=concat(vUsrcName,'，你好！',Char(13),Char(10),'    标题为：[',vBizTitle,']的公司收文传阅/办理流程结束，请及时查阅！',
 					char(13),char(10),char(13),char(10),'办公系统访问地址是：',vAppUrl);
 				insert into Pf_D_PromptMail values (null, now(), '公司收文发布提醒',vPrompt, now(), 'N');
 				insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(vUsrID),'Z');
 				fetch cur1 into vUsrID,vUsrcName;
 			end while; 
 			close cur1;
 				
 			set done=0;
 			open cur2;
 			fetch cur2 into vUsrID,vUsrcName;
 			while (done!=1) do
 				set vPrompt=concat(vUsrcName,'，你好！',Char(13),Char(10),'    标题为：[',vBizTitle,']的公司收文传阅/办理流程结束，请及时查阅！',
 					char(13),char(10),char(13),char(10),'办公系统访问地址是：',vAppUrl);
 				insert into Pf_D_PromptMail values (null, now(), '公司收文发布提醒',vPrompt, now(), 'N');
 				insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(vUsrID),'Z');
 				fetch cur2 into vUsrID,vUsrcName;
 			end while; 
 			close cur2;
 		else
 			set done=0;
 			open cur3;
 			fetch cur3 into vUsrID,vUsrcName;
 			while (done!=1) do
 				set vPrompt=concat(vUsrcName,'，你好！',Char(13),Char(10),'    标题为：[',vBizTitle,']的公司收文传阅/办理流程结束，请及时查阅！',
 					char(13),char(10),char(13),char(10),'办公系统访问地址是：',vAppUrl);
 				insert into Pf_D_PromptMail values (null, now(), '公司收文发布提醒',vPrompt, now(), 'N');
 				insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(vUsrID),'Z');
 				fetch cur3 into vUsrID,vUsrcName;
 			end while; 
 			close cur3;
 		end if; #if vSfGg='N' then
 		
	 	#置可归档
 		update Pf_A_Biz set IfToBeArchived='Y' where BizCode=20 and BizID=pBizID;
 	end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `UpdNodeOfBiz21` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `UpdNodeOfBiz21`(
        IN `pBizID` INTEGER UNSIGNED,
        IN `pBizNode1` SMALLINT,
        IN `pBizNode2` SMALLINT,
        IN `pDriveTag` CHAR(1),
        IN `pActionID` SMALLINT UNSIGNED
    )
    COMMENT '【21-立项申请】业务环节迁移过程'
label1:
BEGIN
 	declare vNode1Name,vNode2Name varchar(20);
 	declare vNode1TzSys1,vNode2TzSys1 char(1);
    #declare vFlowBranchName VARCHAR(40);
    declare vCnt,vCnt1 tinyint unsigned;
    
    declare vBizStatus char(1);
    declare vXmMc varchar(100);
    declare vXmBh char(10);
	declare vSubmitTs datetime;
    declare vQyGsID tinyint unsigned;
        
    declare vAppUrl,vBizTitle varchar(100);
    declare vInitUsrID smallint unsigned;
    declare vPrompt varchar(1000);
    
 	# >>>
 	set vNode1Name=Pf_BizNodeName(pBizNode1);
 	set vNode2Name=Pf_BizNodeName(pBizNode2);
 	set vNode1TzSys1=Pf_BizNodeSysBitByPt(pBizNode1,1);
 	set vNode2TzSys1=Pf_BizNodeSysBitByPt(pBizNode2,1);
 	#set vFlowBranchName=Pf_BizFlowBranchName(pActionID);

   	select BizTitle,SubmitTs,InitUsrID into vBizTitle,vSubmitTs,vInitUsrID from Pf_A_Biz where BizCode=21 and BizID=pBizID;
    
    if vNode1Name='立项归档' and pDriveTag='S' then
    	# 约束
        select count(*) into vCnt
        from ZxBg_A_LxSq 
        where ID=pBizID and QyGsID is null;
        if vCnt>0 then
        	call UpdNodeOfBiz21_err1(); # 从【立项归档】向下流转前，<签约公司>必选！
            leave label1;
        end if;

        select count(*) into vCnt from Pf_A_AttachInfo where PrimaryID=pBizID and PrimaryName='ZxBg_A_LxSq_Qz' and DelTag='N';
 		if vCnt=0 then
 			call UpdNodeOfBiz21_err2(); # 从【立项归档】向下流转前，须生成立项申请表线上签字文件！
 			leave label1;
 		end if;
    end if;
    
    if vNode1Name='总裁审批' and vNode2Name='立项归档' then
    	select count(*) into vCnt from  ZxBg_A_LxSq where ID=pBizID and XmBh is null;
        if vCnt=1 then
            #没编过号，自动编号
            select count(*) into vCnt1 from Pub_M_YMDStyleNumAssignBox where BizCode=21 and BizContentType=0 and YMDStyle=DATE_FORMAT(now(),'%Y%m');
            if vCnt1=0 then
                update ZxBg_A_LxSq set XmBh=concat(DATE_FORMAT(now(),'%Y%m'),'-001') where ID=pBizID;
                
                insert into Pub_M_YMDStyleNumAssignBox values (21,0,DATE_FORMAT(now(),'%Y%m'),2);
            else
                update ZxBg_A_LxSq a,Pub_M_YMDStyleNumAssignBox p
                set a.XmBh=concat(p.YMDStyle,'-',LPAD(concat(p.NextNum,''),3,'0'))
                where a.ID=pBizID and p.BizCode=21 and p.BizContentType=0 and p.YMDStyle=DATE_FORMAT(now(),'%Y%m');
                
                update Pub_M_YMDStyleNumAssignBox set NextNum=NextNum+1 where BizCode=21 and BizContentType=0 and YMDStyle=DATE_FORMAT(now(),'%Y%m');
            end if;
        end if;
    end if;
    
    if vNode2TzSys1='E' THEN
    	# 约束
        select BizStatus,XmMc,QyGsID into vBizStatus,vXmMc,vQyGsID from ZxBg_A_LxSq where ID=pBizID;
        if vBizStatus='W' then
 			call UpdNodeOfBiz21_err3(); # 结束流程前，须标明业务状态，不能是“待定”！
 			leave label1;
        end if;
        
        # 相关更新
        # 0、流程结束、置业务可归档
        update Pf_A_Biz set IfToBeArchived='Y' where BizCode=21 and BizID=pBizID;
        
        # 1、插入/更新项目主记录，触发创建项目根目录和各阶段一级目录
        select count(*) into vCnt from ZxBg_M_XmXx where XmMc=vXmMc;
        if vCnt=0 and vBizStatus='P' then
        	#新立项
        	insert into ZxBg_M_XmXx 
          	select null,XmMc,QyGsID,XmBh,XmJj,0,QqFyYn,Pf_UsrMainOrgID(InitUsrID),vSubmitTs,InitUsrID,Ywy2ID,now(),
          		case when vBizStatus='P' then 'b' else 'a' end,null,null,null,null,null,null,null,null,null,
            	null,null,null,null,null,null,null,null,null,null,null,null,null,0,null,null,null,null,null,null,null,
            	null,null,null,null,null,null,null,null,null,null,null
          	from ZxBg_A_LxSq
          	where ID=pBizID;
        end if;
        
        if vCnt>0 and vBizStatus='P' then
        	#立过项需重新立
            update ZxBg_M_XmXx m,ZxBg_A_LxSq a
            set m.QyGsID=a.QyGsID,m.XmJj=a.XmJj,m.QqFyYn=a.QqFyYn,m.JbBmID=Pf_UsrMainOrgID(a.InitUsrID),m.SqLxSj=vSubmitTs,
            	m.SqLxrID=a.InitUsrID,m.Ywy2ID=a.Ywy2ID,m.LxHpSj=now(),m.XmDqJdCode='b'
            where a.ID=pBizID and a.XmMc=m.XmMc;
        end if;
        
        # 发提醒给申请业务员
        select AppUrl Into vAppUrl From Pf_M_Ent;
        set vPrompt=concat(Pf_UsrcName(vInitUsrID),'，你好！',Char(13),Char(10),
            '    【',vBizTitle,'】审批流程，已于：【',DATE_FORMAT(now(),'%Y-%m-%d %H:%i'),'】结束！详情见办公系统。',
            char(13),char(10),char(13),char(10),'办公系统访问地址是：',vAppUrl);
                  
        insert into Pf_D_PromptMail values (null, now(), '立项申请审批流程结束提醒',vPrompt, now(), 'N');
        insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(vInitUsrID),'Z');
    end if;
	
    if vNode1Name='立项归档' and vNode2Name='总裁审批' then
    	# 撤销编号
    	select XmBh into vXmBh from ZxBg_A_LxSq where ID=pBizID; 
        
        select count(*) into vCnt 
        from Pub_M_YMDStyleNumAssignBox 
        where BizCode=21 and BizContentType=0 and concat(YMDStyle,'-',LPAD(concat(NextNum-1,''),3,'0'))=vXmBh;
        if vCnt>0 then
        	update Pub_M_YMDStyleNumAssignBox 
            set NextNum=NextNum-1 
            where BizCode=21 and BizContentType=0 and concat(YMDStyle,'-',LPAD(concat(NextNum-1,''),3,'0'))=vXmBh;
        end if;
        
        update ZxBg_A_LxSq set XmBh=null where ID=pBizID; 
    end if;
    
    if vNode1TzSys1='E' and vNode2TzSys1!='E' THEN #撤回结束的流程
    	update ZxBg_A_LxSq set BizStatus='W' where ID=pBizID;
        
        delete from ZxBg_M_XmXx where exists(select 1 from ZxBg_A_LxSq where ID=pBizID and XmMc=ZxBg_M_XmXx.XmMc);
    end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `UpdNodeOfBiz22` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `UpdNodeOfBiz22`(
        IN `pBizID` INTEGER UNSIGNED,
        IN `pBizNode1` SMALLINT,
        IN `pBizNode2` SMALLINT,
        IN `pDriveTag` CHAR(1),
        IN `pActionID` SMALLINT UNSIGNED
    )
    COMMENT '【22-尽职调查材料审批】业务环节迁移过程'
label1:
BEGIN
 	declare vNode1Name,vNode2Name varchar(20);
 	declare vNode1TzSys1,vNode2TzSys1 char(1);
        
    declare vAppUrl,vBizTitle varchar(100);
    declare vInitUsrID smallint unsigned;
    declare vPrompt varchar(1000);
    
    declare vXmID smallint unsigned;
    declare vXmDirRootID integer unsigned;
    declare vJzDcTjFgLdSj datetime;
    
 	# >>>
 	set vNode1Name=Pf_BizNodeName(pBizNode1);
 	set vNode2Name=Pf_BizNodeName(pBizNode2);
 	set vNode1TzSys1=Pf_BizNodeSysBitByPt(pBizNode1,1);
 	set vNode2TzSys1=Pf_BizNodeSysBitByPt(pBizNode2,1);

   	select BizTitle,InitUsrID into vBizTitle,vInitUsrID from Pf_A_Biz where BizCode=22 and BizID=pBizID;
    select XmID into vXmID from ZxBg_A_JzDc where ID=pBizID;
    
    if vNode2TzSys1='E' THEN
    	# 约束
        
        # 相关更新
        # 0、流程结束、置业务可归档
        update Pf_A_Biz set IfToBeArchived='Y' where BizCode=22 and BizID=pBizID;
        
        # 1、流程结束<业务状态>自动置“P”，主文件项目阶段置“c-项目审查阶段”，更新项目信息主文件
        update ZxBg_A_JzDc set BizStatus='P' where ID=pBizID;
        
        update ZxBg_M_XmXx m,ZxBg_A_JzDc a 
        set m.XmDqJdCode='c',m.JzDcXzCyIDs=a.JzDcXzCyIDs,m.JzDcTjFgLdSj=Pf_LastProcTsOfBizNode('尽职调查材料审批',pBizID,'部门经理审批'),
        	m.JzDcHpSj=now()
        where m.ID=a.XmID and a.ID=pBizID;
        
        # 2、发提醒给申请业务员
        select AppUrl Into vAppUrl From Pf_M_Ent;
        set vPrompt=concat(Pf_UsrcName(vInitUsrID),'，你好！',Char(13),Char(10),
            '    【',vBizTitle,'】审批流程，已于：【',DATE_FORMAT(now(),'%Y-%m-%d %H:%i'),'】获批！详情见办公系统。',
            char(13),char(10),char(13),char(10),'办公系统访问地址是：',vAppUrl);
                  
        insert into Pf_D_PromptMail values (null, now(), '尽职调查材料审批流程结束提醒',vPrompt, now(), 'N');
        insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(vInitUsrID),'Z');
    end if;

    if vNode1TzSys1='E' and vNode2TzSys1!='E' THEN #撤回结束的流程
    	#<业务状态>自动置“W”
        update ZxBg_A_JzDc set BizStatus='W' where ID=pBizID;
        
        #撤销文件归档
        select ID into vXmDirRootID from ZxBg_M_XmDir where XmID=vXmID and Mc='项目文件' and UpDirID=0;
    	update Pf_M_AttachInfo set DelTag='Y'  
        where PrimaryName ='ZxBg_M_XmDir' and instr(FileName,concat('[',pBizID,']',FileExt))>0 and exists(
        	select 1 from ZxBg_M_XmDir where XmID=vXmID and Mc=concat('b、',Pf_CodeValueByCharCode(26,'b')) and UpDirID=vXmDirRootID and 
            Pf_M_AttachInfo.PrimaryID=ID
            );
        
        #撤销项目信息主文件更新
        update ZxBg_M_XmXx set JzDcXzCyIDs=null,JzDcTjFgLdSj=null,JzDcHpSj=null where ID=vXmID;
    end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `UpdNodeOfBiz23` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `UpdNodeOfBiz23`(
        IN `pBizID` INTEGER UNSIGNED,
        IN `pBizNode1` SMALLINT,
        IN `pBizNode2` SMALLINT,
        IN `pDriveTag` CHAR(1),
        IN `pActionID` SMALLINT UNSIGNED
    )
    COMMENT '【23-项目审查】业务环节迁移过程'
label1:
BEGIN
 	declare vNode1Name,vNode2Name varchar(20);
 	declare vNode1TzSys1,vNode2TzSys1 char(1);
    declare vFlowBranchName VARCHAR(40);
    declare vCnt tinyint unsigned;
    
    declare vBizStatus char(1);
    declare vJgMs varchar(200);
	declare vSubmitTs datetime;
    declare vXmID smallint unsigned;
    declare vXmDirRootID integer unsigned;
        
    declare vAppUrl,vBizTitle varchar(100);
    declare vInitUsrID smallint unsigned;
    declare vPrompt varchar(1000);
    
 	# >>>
 	set vNode1Name=Pf_BizNodeName(pBizNode1);
 	set vNode2Name=Pf_BizNodeName(pBizNode2);
 	set vNode1TzSys1=Pf_BizNodeSysBitByPt(pBizNode1,1);
 	set vNode2TzSys1=Pf_BizNodeSysBitByPt(pBizNode2,1);
 	set vFlowBranchName=Pf_BizFlowBranchName(pActionID);

   	select BizTitle,SubmitTs,InitUsrID into vBizTitle,vSubmitTs,vInitUsrID from Pf_A_Biz where BizCode=23 and BizID=pBizID;
    select BizStatus,XmID,ifnull(JgMs,'-') into vBizStatus,vXmID,vJgMs from ZxBg_A_XmSc where ID=pBizID;
    
    if vFlowBranchName='确认审查结果，结束流程' THEN
    	# 约束
        if vBizStatus='W' then
 			call UpdNodeOfBiz23_err1(); # 结束流程前，须标明业务状态，不能是“待定”！
 			leave label1;
        end if;
        
        if vJgMs='-' then
 			call UpdNodeOfBiz23_err2(); # 结束流程前，须标明审查结果！
 			leave label1;
        end if;
        
        select count(*) into vCnt from Pf_A_AttachInfo where PrimaryID=pBizID and PrimaryName='ZxBg_A_XmSc_Qz1' and DelTag='N';
 		if vCnt=0 then
 			call UpdNodeOfBiz23_err3(); # 结束流程前，须生成《项目法律合规审查意见表》线上签字文件！
 			leave label1;
 		end if;

        select count(*) into vCnt from Pf_A_AttachInfo where PrimaryID=pBizID and PrimaryName='ZxBg_A_XmSc_Qz2' and DelTag='N';
 		if vCnt=0 then
 			call UpdNodeOfBiz23_err4(); # 结束流程前，须生成《项目风险审查意见表》线上签字文件！
 			leave label1;
 		end if;

        select count(*) into vCnt from Pf_A_AttachInfo where PrimaryID=pBizID and PrimaryName='ZxBg_A_XmSc_Qz3' and DelTag='N';
 		if vCnt=0 then
 			call UpdNodeOfBiz23_err5(); # 结束流程前，须生成《项目财务审查意见表》线上签字文件！
 			leave label1;
 		end if;

        # 相关更新
        # 0、流程结束、置业务可归档
        update Pf_A_Biz set IfToBeArchived='Y' where BizCode=23 and BizID=pBizID;
        
        # 1、流程结束，对于标注业务状态为“P-通过”的，主文件项目阶段置“d-决策会审批阶段”；否则打回“b-项目尽职调查及实施方案设计阶段”
		if vBizStatus='P' then
        	update ZxBg_M_XmXx m,ZxBg_A_XmSc a 
            set m.XmDqJdCode='d',m.TjScSj=vSubmitTs,m.ScWcSj=now(),m.XmScJgMs=a.JgMs,m.XmScHpSj=now()
            where m.ID=a.XmID and a.ID=pBizID;
        else
        	update ZxBg_M_XmXx m,ZxBg_A_XmSc a 
            set m.XmDqJdCode='b',m.TjScSj=vSubmitTs,m.ScWcSj=now(),m.XmScJgMs=a.JgMs,m.XmScHpSj=null
            where m.ID=a.XmID and a.ID=pBizID;
        end if;
             
        # 发提醒给申请业务员
        select AppUrl Into vAppUrl From Pf_M_Ent;
        set vPrompt=concat(Pf_UsrcName(vInitUsrID),'，你好！',Char(13),Char(10),
            '    【',vBizTitle,'】审批流程，已于：【',DATE_FORMAT(now(),'%Y-%m-%d %H:%i'),'】结束！详情见办公系统。',
            char(13),char(10),char(13),char(10),'办公系统访问地址是：',vAppUrl);
                  
        insert into Pf_D_PromptMail values (null, now(), '项目审查审批流程结束提醒',vPrompt, now(), 'N');
        insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(vInitUsrID),'Z');
    end if;

    if vNode1TzSys1='E' and vNode2TzSys1!='E' THEN #撤回结束的流程
    	update ZxBg_A_XmSc set BizStatus='W' where ID=pBizID;
        
        #撤销文件归档
        select ID into vXmDirRootID from ZxBg_M_XmDir where XmID=vXmID and Mc='项目文件' and UpDirID=0;
    	update Pf_M_AttachInfo set DelTag='Y'  
        where PrimaryName ='ZxBg_M_XmDir' and instr(FileName,concat('[',pBizID,']',FileExt))>0 and exists(
        	select 1 from ZxBg_M_XmDir where XmID=vXmID and Mc=concat('c、',Pf_CodeValueByCharCode(26,'c')) and UpDirID=vXmDirRootID and 
            Pf_M_AttachInfo.PrimaryID=ID
            );
        
        #撤销项目信息主文件更新
        update ZxBg_M_XmXx set XmDqJdCode='c',TjScSj=null,ScWcSj=null,XmScJgMs=null,XmScHpSj=null where ID=vXmID;
    end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `UpdNodeOfBiz24` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `UpdNodeOfBiz24`(
        IN `pBizID` INTEGER UNSIGNED,
        IN `pBizNode1` SMALLINT,
        IN `pBizNode2` SMALLINT,
        IN `pDriveTag` CHAR(1),
        IN `pActionID` SMALLINT UNSIGNED
    )
    COMMENT '【24-实施方案审批】业务环节迁移过程'
label1:
BEGIN
 	declare vNode1Name,vNode2Name varchar(20);
 	declare vNode1TzSys1,vNode2TzSys1 char(1);
    declare vFlowBranchName VARCHAR(40);
    declare vCnt tinyint unsigned;
    
    declare vBizStatus char(1);
	declare vSubmitTs datetime;
    declare vXmID smallint unsigned;
    declare vChTpCnt,vPassCnt,vRejectCnt,vDiscardCnt tinyint(3) unsigned;
    declare vXmDirRootID integer unsigned;
        
    declare vAppUrl,vBizTitle varchar(100);
    declare vInitUsrID smallint unsigned;
    declare vPrompt varchar(1000);
    
 	# >>>
 	set vNode1Name=Pf_BizNodeName(pBizNode1);
 	set vNode2Name=Pf_BizNodeName(pBizNode2);
 	set vNode1TzSys1=Pf_BizNodeSysBitByPt(pBizNode1,1);
 	set vNode2TzSys1=Pf_BizNodeSysBitByPt(pBizNode2,1);
 	set vFlowBranchName=Pf_BizFlowBranchName(pActionID);

   	select BizTitle,SubmitTs,InitUsrID into vBizTitle,vSubmitTs,vInitUsrID from Pf_A_Biz where BizCode=24 and BizID=pBizID;
    select BizStatus,XmID into vBizStatus,vXmID from ZxBg_A_FaSp where ID=pBizID;
    
    if vNode1Name='发起' and vNode2Name='委员表决' then
    	select count(*) into vCnt from Pf_A_AttachInfo where PrimaryID=pBizID and PrimaryName = 'ZxBg_A_FaSp_Tz' and DelTag='N';
 		if vCnt!=1 then
 			call UpdNodeOfBiz24_err3(); # 发起项目审批决策会前，请先生成《决策会会议通知》！
 			leave label1;
 		end if;
        
        #初始化审批表
        insert into ZxBg_A_FaSpBj
        select now(),null,pBizID,a.ProcessedBy,'P'
        from Pf_A_BizProcRcd a,Pf_A_Biz b
        where a.BizSeq=b.Seq and Pf_BizName(b.BizCode)='项目审批' And b.BizID=pBizID And Pf_BizNodeName(a.CurrNode)='委员表决' and
        	a.ArrivedTs=Pf_LastToDoArrivedTsOfBizNode('项目审批',pBizID,'委员表决');
    end if;
    
    if vNode1Name='委员表决' and vNode2Name='发起' then
        #撤销审批表初始化
        delete from ZxBg_A_FaSpBj where ZtID=pBizID;
    end if;
    
    if vNode1Name='委员表决' and vNode2Name='审批结果归档' then
        #投票结果统计 vChTpCnt,vPassCnt,vRejectCnt,vDiscardCnt
        select count(*) into vChTpCnt from ZxBg_A_FaSpBj where ZtID=pBizID;
        select count(*) into vPassCnt from ZxBg_A_FaSpBj where ZtID=pBizID and BjYj='P';
        select count(*) into vRejectCnt from ZxBg_A_FaSpBj where ZtID=pBizID and BjYj='R';
        select count(*) into vDiscardCnt from ZxBg_A_FaSpBj where ZtID=pBizID and BjYj='D';
        update ZxBg_A_FaSp set ChTpCnt=vChTpCnt,PassCnt=vPassCnt,RejectCnt=vRejectCnt,DiscardCnt=vDiscardCnt where ID=pBizID;
    end if;
    
    if vNode1Name='审批结果归档' and vNode2Name='委员表决' then
        #投票撤回
        update ZxBg_A_FaSp set ChTpCnt=0,PassCnt=0,RejectCnt=0,DiscardCnt=0 where ID=pBizID;
    end if;
    
    if vFlowBranchName='归档完毕，结束流程' THEN
    	# 约束
        if vBizStatus='W' then
 			call UpdNodeOfBiz24_err1(); # 结束流程前，须标明业务状态，不能是“待定”！
 			leave label1;
        end if;
        
        select count(*) into vCnt from Pf_A_AttachInfo where PrimaryID=pBizID and PrimaryName in ('ZxBg_A_FaSp_Qz','ZxBg_A_FaSp_Jy') and DelTag='N';
 		if vCnt!=2 then
 			call UpdNodeOfBiz24_err2(); # 结束流程前，须生成《项目表决结果》线上签字文件和《决策会会议纪要》！
 			leave label1;
 		end if;

        # 相关更新
        # 0、流程结束、置业务可归档
        update Pf_A_Biz set IfToBeArchived='Y' where BizCode=24 and BizID=pBizID;
        
        # 1、流程结束，主文件项目阶段置“e-项目实施阶段”；否则阶段不变。更新项目信息主文件
		if vBizStatus='P' then
        	update ZxBg_M_XmXx m,ZxBg_A_FaSp a 
            set m.XmDqJdCode='e',m.JchSqSj=a.JchSqSj,m.JchZkSj=a.JchZkSj,m.ChTpCnt=a.ChTpCnt,m.PassCnt=a.PassCnt,m.RejectCnt=a.RejectCnt,m.DiscardCnt=a.DiscardCnt,
            	m.SsYj=a.SsYj 
            where m.ID=a.XmID and a.ID=pBizID;
        else
        	update ZxBg_M_XmXx m,ZxBg_A_FaSp a 
            set m.JchSqSj=a.JchSqSj,m.JchZkSj=a.JchZkSj,m.ChTpCnt=a.ChTpCnt,m.PassCnt=a.PassCnt,m.RejectCnt=a.RejectCnt,m.DiscardCnt=a.DiscardCnt,m.SsYj=a.SsYj 
            where m.ID=a.XmID and a.ID=pBizID;
        end if;
             
        # 发提醒给申请业务员
        select AppUrl Into vAppUrl From Pf_M_Ent;
        set vPrompt=concat(Pf_UsrcName(vInitUsrID),'，你好！',Char(13),Char(10),
            '    【',vBizTitle,'】审批流程，已于：【',DATE_FORMAT(now(),'%Y-%m-%d %H:%i'),'】结束！详情见办公系统。',
            char(13),char(10),char(13),char(10),'办公系统访问地址是：',vAppUrl);
                  
        insert into Pf_D_PromptMail values (null, now(), '项目审批流程结束提醒',vPrompt, now(), 'N');
        insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(vInitUsrID),'Z');
    end if;

    if vNode1TzSys1='E' and vNode2TzSys1!='E' THEN #撤回结束的流程
    	update ZxBg_A_FaSp set BizStatus='W' where ID=pBizID;
        
        #撤销文件归档
        select ID into vXmDirRootID from ZxBg_M_XmDir where XmID=vXmID and Mc='项目文件' and UpDirID=0;
    	update Pf_M_AttachInfo set DelTag='Y'  
        where PrimaryName ='ZxBg_M_XmDir' and instr(FileName,concat('[',pBizID,']',FileExt))>0 and exists(
        	select 1 from ZxBg_M_XmDir where XmID=vXmID and Mc=concat('d、',Pf_CodeValueByCharCode(26,'d')) and UpDirID=vXmDirRootID and 
            Pf_M_AttachInfo.PrimaryID=ID
            );
        
        #撤销项目信息主文件更新
        update ZxBg_M_XmXx 
        set XmDqJdCode='d',JchSqSj=null,JchZkSj=null,ChTpCnt=null,PassCnt=null,RejectCnt=null,DiscardCnt=null,SsYj=null 
        where ID=vXmID;
    end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `UpdNodeOfBiz25` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `UpdNodeOfBiz25`(
        IN `pBizID` INTEGER UNSIGNED,
        IN `pBizNode1` SMALLINT,
        IN `pBizNode2` SMALLINT,
        IN `pDriveTag` CHAR(1),
        IN `pActionID` SMALLINT UNSIGNED
    )
    COMMENT '【25-印章、证照使用审批】业务环节迁移过程'
label1:
BEGIN
 	declare vNode1Name,vNode2Name varchar(20);
 	declare vNode1TzSys1,vNode2TzSys1 char(1);
    declare vFlowBranchName VARCHAR(40);
    declare vCnt tinyint unsigned;
    
    declare vYyHtID,vYyHtScID,vYyWjHqID integer unsigned;
    declare vSfDcYy char;	#是否带出用印
	declare vSubmitTs datetime;
    declare vXmID smallint unsigned;
    declare vXmDirRootID integer unsigned;
        
    declare vAppUrl,vBizTitle varchar(100);
    declare vInitUsrID,vDszUsrID smallint unsigned;
    declare vPrompt varchar(1000);
    
    declare vHtBh VARCHAR(40); #合同编号
    declare vDaJjFlowDefID smallint unsigned;
    declare vDaJjInitNodeID smallint;
    declare vToDoWorkItem integer unsigned; # 必要的出参，不用
    
    declare vDaJjBizSeqToBeDel integer unsigned; #待删除档案交接

 	# >>>
 	set vNode1Name=Pf_BizNodeName(pBizNode1);
 	set vNode2Name=Pf_BizNodeName(pBizNode2);
 	set vNode1TzSys1=Pf_BizNodeSysBitByPt(pBizNode1,1);
 	set vNode2TzSys1=Pf_BizNodeSysBitByPt(pBizNode2,1);
 	set vFlowBranchName=Pf_BizFlowBranchName(pActionID);

	select YyHtID,YyHtScID,YyWjHqID,SfDcYy into vYyHtID,vYyHtScID,vYyWjHqID,vSfDcYy from ZxBg_A_YzZzSq where ID=pBizID;
   	select BizTitle,SubmitTs,InitUsrID into vBizTitle,vSubmitTs,vInitUsrID from Pf_A_Biz where BizCode=25 and BizID=pBizID;
    
    if vNode1TzSys1='S' and vNode2TzSys1!='S' and vYyHtID is null and vYyHtScID is null and vYyWjHqID is null then
    	select count(*) into vCnt from Pf_A_AttachInfo where PrimaryID=pBizID and PrimaryName in ('ZxBg_A_YzZzSq_1','ZxBg_A_YzZzSq_2') and DelTag='N';
 		if vCnt=0 then
 			call UpdNodeOfBiz25_err2(); # 提交印章、证照使用审批前，须上传用印文本/法律合规附件！
 			leave label1;
 		end if;
    end if;
    
    if vNode1Name='印章、证照归还' and vNode2Name='结束' then
    	# 约束
        select count(*) into vCnt from Pf_A_AttachInfo where PrimaryID=pBizID and PrimaryName='ZxBg_A_YzZzSq_Qz' and DelTag='N';
 		if vCnt=0 then
 			call UpdNodeOfBiz25_err3(); # 流程结束前，须生成印章、证照使用审批单归档签字文件！
 			leave label1;
 		end if;
    end if;

    if vNode1Name='公司用印管理员发放' and vNode2Name='印章、证照归还' then
    	# 约束
        select count(*) into vCnt from ZxBg_A_YzZzSqMx mx,ZxBg_M_YzZz m 
        where mx.ZtID=pBizID and mx.YzZzID=m.ID and m.SfZy='Y';
 		if vCnt>0 then
 			call UpdNodeOfBiz25_err4(); # 申请的印章或证照他人在用！
 			leave label1;
 		end if;
        
        #改申请印章/证照为在用
        update ZxBg_M_YzZz m,ZxBg_A_YzZzSqMx mx
        set m.SfZy='Y'
        where mx.ZtID=pBizID and mx.YzZzID=m.ID;
    end if;

    if vNode1Name='印章、证照归还' and vNode2Name='公司用印管理员发放' then #发放撤回
        #改申请印章/证照为可用
        update ZxBg_M_YzZz m,ZxBg_A_YzZzSqMx mx
        set m.SfZy='N'
        where mx.ZtID=pBizID and mx.YzZzID=m.ID;
    end if;

    if vNode1TzSys1!='E' and vNode2TzSys1='E' THEN
        # 相关更新
        # 0、流程结束、置业务可归档
        update Pf_A_Biz set IfToBeArchived='Y' where BizCode=25 and BizID=pBizID;
				
        #流程结束<业务状态>自动置“P”
		update ZxBg_A_YzZzSq set BizStatus='P' where ID=pBizID;
        
        #改申请印章/证照为可用
        update ZxBg_M_YzZz m,ZxBg_A_YzZzSqMx mx
        set m.SfZy='N'
        where mx.ZtID=pBizID and mx.YzZzID=m.ID;
        
		select AppUrl Into vAppUrl From Pf_M_Ent;
        
		if vYyWjHqID is null and vYyHtScID is null then #无接续档案交接
			# 发提醒给申请业务员
			set vPrompt=concat(Pf_UsrcName(vInitUsrID),'，你好！',Char(13),Char(10),
				'    【',vBizTitle,'】审批流程，已于：【',DATE_FORMAT(now(),'%Y-%m-%d %H:%i'),'】结束！详情见办公系统。',
				char(13),char(10),char(13),char(10),'办公系统访问地址是：',vAppUrl);
					  
			insert into Pf_D_PromptMail values (null, now(), '印章、证照使用审批流程结束提醒',vPrompt, now(), 'N');
			insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(vInitUsrID),'Z');
		else
			# 依据非业务合同/审查合同（适用未正式立项项目）的用印申请流程结束，自动接续档案交接
			select max(ID) into vDaJjFlowDefID from Pf_M_BizFlow where BizCode=7 and IfValid='Y';
			select ID into vDaJjInitNodeID from Pf_M_BizNode where BizCode=7 and substr(TzSys,1,1)='S' and IfValid='Y';

			if vYyWjHqID is not null then
				select HtBh into vHtBh from WjHq_A_Zt where ID=vYyWjHqID;        
				insert into Da_A_Jj values (now(),null,vInitUsrID,Pf_OrgFullName(Pf_UsrMainOrgID(vInitUsrID)),CONCAT('非业务合同【',vHtBh,'】档案交接'),null,'B',vYyWjHqID);
				call Engine_InitBizFlow(7,@@identity,concat('<',Pf_UsrcName(vInitUsrID),'>非业务合同【',vHtBh,'】档案交接'),vDaJjFlowDefID,vDaJjInitNodeID,vInitUsrID,vToDoWorkItem);
					 
				# 发提醒给申请业务员
				set vPrompt=concat(Pf_UsrcName(vInitUsrID),'，你好！',Char(13),Char(10),
					'    依据非业务合同、标题为【',vBizTitle,'】的用印申请已于',DATE_FORMAT(now(),'%Y-%m-%d %H:%i'),'获批并归档，且自动发起了相应的档案交接！详情见办公系统。',
					char(13),char(10),char(13),char(10),'办公系统访问地址是：',vAppUrl);
						  
				insert into Pf_D_PromptMail values (null, now(), '依据非业务合同的用印申请获批后<档案交接>自动接续提醒',vPrompt, now(), 'N');
				insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(vInitUsrID),'Z');
			end if;
			
			if vYyHtScID is not null then
				select HtBh into vHtBh from ZxBg_A_HtSc where ID=vYyHtScID;        
				insert into Da_A_Jj values (now(),null,vInitUsrID,Pf_OrgFullName(Pf_UsrMainOrgID(vInitUsrID)),CONCAT('审查合同【',vHtBh,'】档案交接'),null,'C',vYyHtScID);
				call Engine_InitBizFlow(7,@@identity,concat('<',Pf_UsrcName(vInitUsrID),'>审查合同【',vHtBh,'】档案交接'),vDaJjFlowDefID,vDaJjInitNodeID,vInitUsrID,vToDoWorkItem);
					 
				# 发提醒给申请业务员
				set vPrompt=concat(Pf_UsrcName(vInitUsrID),'，你好！',Char(13),Char(10),
					'    依据审查合同、标题为【',vBizTitle,'】的用印申请已于',DATE_FORMAT(now(),'%Y-%m-%d %H:%i'),'获批并归档，且自动发起了相应的档案交接！详情见办公系统。',
					char(13),char(10),char(13),char(10),'办公系统访问地址是：',vAppUrl);
						  
				insert into Pf_D_PromptMail values (null, now(), '依据审查合同的用印申请获批后<档案交接>自动接续提醒',vPrompt, now(), 'N');
				insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(vInitUsrID),'Z');
			end if;
		end if;
		
        # 发提醒给董事长
        select MIN(UsrID) into vDszUsrID from Pf_M_RoleUsr where Pf_RoleName(RoleID)='董事长';
        set vPrompt=concat('董事长，您好！',Char(13),Char(10),
            '    ',Pf_UsrcName(vInitUsrID),'的用印申请【',vBizTitle,'】审批流程，已于：【',DATE_FORMAT(now(),'%Y-%m-%d %H:%i'),'】结束！详情见办公系统。',
            char(13),char(10),char(13),char(10),'办公系统访问地址是：',vAppUrl);
                  
        insert into Pf_D_PromptMail values (null, now(), '印章、证照使用审批流程结束提醒',vPrompt, now(), 'N');
        insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(vDszUsrID),'Z');
    end if;

    if vNode1TzSys1='E' and vNode2TzSys1!='E' THEN #撤回结束的流程
    	update ZxBg_A_YzZzSq set BizStatus='W' where ID=pBizID;
        
        #改申请印章/证照为在用
        update ZxBg_M_YzZz m,ZxBg_A_YzZzSqMx mx
        set m.SfZy='Y'
        where mx.ZtID=pBizID and mx.YzZzID=m.ID;
        
        if vYyHtID is not null then #依据正式立项审批合同
        	select XmID into vXmID from ZxBg_M_XmHt where ID=vYyHtID;
            
        	#撤销文件归档
        	select ID into vXmDirRootID from ZxBg_M_XmDir where XmID=vXmID and Mc='项目文件' and UpDirID=0;
            
    		update Pf_M_AttachInfo set DelTag='Y'  
        	where PrimaryName ='ZxBg_M_XmDir' and instr(FileName,concat('[',pBizID,']',FileExt))>0 and exists(
        		select 1 from ZxBg_M_XmDir where XmID=vXmID and Mc=concat('e、',Pf_CodeValueByCharCode(26,'e')) and UpDirID=vXmDirRootID and 
            	Pf_M_AttachInfo.PrimaryID=ID);
        end if;
        
        if vYyWjHqID is not null then
        	#撤销接续的档案交接
            select Seq into vDaJjBizSeqToBeDel
            from Pf_A_Biz
            where BizCode=7 and exists(select 1 from Da_A_Jj where JdLy='B' and LyYwOrXmID=vYyWjHqID and ID=Pf_A_Biz.BizID);
            
            delete from Pf_A_Biz where Seq=vDaJjBizSeqToBeDel;
            delete from Da_A_Jj where JdLy='B' and LyYwOrXmID=vYyWjHqID;
        end if;
        
        if vYyHtScID is not null then
        	#撤销接续的档案交接
            select Seq into vDaJjBizSeqToBeDel
            from Pf_A_Biz
            where BizCode=7 and exists(select 1 from Da_A_Jj where JdLy='C' and LyYwOrXmID=vYyHtScID and ID=Pf_A_Biz.BizID);
            
            delete from Pf_A_Biz where Seq=vDaJjBizSeqToBeDel;
            delete from Da_A_Jj where JdLy='C' and LyYwOrXmID=vYyHtScID;
        end if;
    end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `UpdNodeOfBiz26` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `UpdNodeOfBiz26`(
        IN `pBizID` INTEGER UNSIGNED,
        IN `pBizNode1` SMALLINT,
        IN `pBizNode2` SMALLINT,
        IN `pDriveTag` CHAR(1),
        IN `pActionID` SMALLINT UNSIGNED
    )
    COMMENT '【26-项目付款审批】业务环节迁移过程'
label1:
BEGIN
 	declare vNode1Name,vNode2Name varchar(20);
 	declare vNode1TzSys1,vNode2TzSys1 char(1);
    declare vFlowBranchName VARCHAR(40);
    declare vCnt tinyint unsigned;
    
	declare vSubmitTs datetime;
    declare vZjDwRq varchar(11);
    declare vYjLb char(1);
    declare vYjID integer unsigned;
    declare vXmID smallint unsigned; #指正式立项项目
        
    declare vAppUrl,vBizTitle varchar(100);
    declare vInitUsrID,vDszUsrID smallint unsigned;
    declare vPrompt varchar(1000);
    
 	# >>>
 	set vNode1Name=Pf_BizNodeName(pBizNode1);
 	set vNode2Name=Pf_BizNodeName(pBizNode2);
 	set vNode1TzSys1=Pf_BizNodeSysBitByPt(pBizNode1,1);
 	set vNode2TzSys1=Pf_BizNodeSysBitByPt(pBizNode2,1);
 	set vFlowBranchName=Pf_BizFlowBranchName(pActionID);

   	select BizTitle,SubmitTs,InitUsrID into vBizTitle,vSubmitTs,vInitUsrID from Pf_A_Biz where BizCode=26 and BizID=pBizID;
    select ifnull(DATE_FORMAT(ZjDwRq,'%Y-%m-%d'),'-'),YjLb,YjID into vZjDwRq,vYjLb,vYjID from ZxBg_A_FkSp where ID=pBizID;
    
    if vYjLb='a' then
    	set vXmID=vYjID;
    end if;
    
    if vYjLb='b' then
    	select XmID into vXmID from ZxBg_M_XmHt where ID=vYjID;
    end if;
    
    if vNode1TzSys1!='E' and vNode2TzSys1='E' THEN
    	# 约束
        if vZjDwRq='-' then
 			call UpdNodeOfBiz26_err1(); # 付款流程结束前，须标明资金到位时间！
 			leave label1;
        end if;
        
        select count(*) into vCnt from Pf_A_AttachInfo where PrimaryID=pBizID and PrimaryName='ZxBg_A_FkSp_Qz' and DelTag='N';
 		if vCnt=0 then
 			call UpdNodeOfBiz26_err2(); # 付款流程结束前，须生成项目付款审批单线上签字文件！
 			leave label1;
 		end if;

        # 相关更新
        # 0、置业务可归档、业务状态'P'
        update Pf_A_Biz set IfToBeArchived='Y' where BizCode=26 and BizID=pBizID;
        update ZxBg_A_FkSp set BizStatus='P' where ID=pBizID;
        
        if vYjLb='a' or vYjLb='b' then
        	# 1、更新主文件项目阶段“e-项目实施阶段”信息
        	update ZxBg_M_XmXx m,ZxBg_A_FkSp a 
        	set m.FkSqSj=vSubmitTs,m.FkSqrID=vInitUsrID,m.ZjDwRq=a.ZjDwRq,m.FkJbCnID=Pf_ProcUsrIDOfBizNode('项目付款审批',pBizID,'出纳放款'),
        		m.HtQdRq=a.HtQdRq,m.HtYjKjHsSj=Pf_LastProcTsOfBizNode('项目付款审批',pBizID,'法律合规部审批'),m.FkSj=now(),m.LjFkAmt=m.LjFkAmt+a.FkAmt 
        	where m.ID=vXmID and a.ID=pBizID;
        end if;
        
        if vYjLb='b' then
        	update ZxBg_M_XmHt m,ZxBg_A_FkSp a set m.LjFkAmt=m.LjFkAmt+a.FkAmt where m.ID=vYjID and a.ID=pBizID;
        end if;
             
        # 发提醒给申请业务员
        select AppUrl Into vAppUrl From Pf_M_Ent;
        set vPrompt=concat(Pf_UsrcName(vInitUsrID),'，你好！',Char(13),Char(10),
            '    【',vBizTitle,'】审批流程，已于：【',DATE_FORMAT(now(),'%Y-%m-%d %H:%i'),'】结束！详情见办公系统。',
            char(13),char(10),char(13),char(10),'办公系统访问地址是：',vAppUrl);
                  
        insert into Pf_D_PromptMail values (null, now(), '项目付款审批流程结束提醒',vPrompt, now(), 'N');
        insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(vInitUsrID),'Z');
        
        # 发提醒给董事长
        select MIN(UsrID) into vDszUsrID from Pf_M_RoleUsr where Pf_RoleName(RoleID)='董事长';
        
        select concat('董事长，您好！',Char(13),Char(10),'    ',Pf_UsrcName(vInitUsrID),'的付款申请【',vBizTitle,'】审批流程，已于：【',
        	DATE_FORMAT(now(),'%Y-%m-%d %H:%i'),'】结束！详情见办公系统。',
            char(13),char(10),char(13),char(10),'办公系统访问地址是：',vAppUrl)
        into vPrompt
        from ZxBg_A_FkSp where ID=pBizID;
                  
        insert into Pf_D_PromptMail values (null, now(), '员工项目付款审批流程结束提醒',vPrompt, now(), 'N');
        insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(vDszUsrID),'Z');
    end if;

    if vNode1TzSys1='E' and vNode2TzSys1!='E' THEN #撤回
 		call UpdNodeOfBiz26_err3(); # 项目付款审批结束的流程不能撤回！
 		leave label1;
    end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `UpdNodeOfBiz27` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `UpdNodeOfBiz27`(
        IN `pBizID` INTEGER UNSIGNED,
        IN `pBizNode1` SMALLINT,
        IN `pBizNode2` SMALLINT,
        IN `pDriveTag` CHAR(1),
        IN `pActionID` SMALLINT UNSIGNED
    )
    COMMENT '【27-合同审批】业务环节迁移过程'
label1:
BEGIN
 	declare vNode1Name,vNode2Name varchar(20);
 	declare vNode1TzSys1,vNode2TzSys1 char(1);
    declare vFlowBranchName VARCHAR(40);
    declare vCnt tinyint unsigned;
    
    declare vXmID smallint unsigned;
    declare vXmDirRootID integer unsigned;
    
    declare vYySqFlowDefID smallint unsigned;
    declare vYySqInitNodeID smallint;
    declare vToDoWorkItem integer unsigned; # 必要的出参，不用
        
    declare vAppUrl,vBizTitle varchar(100);
    declare vInitUsrID smallint unsigned;
    declare vPrompt varchar(1000);
    
    declare vYySqBizSeqToBeDel integer unsigned; #待删除用印申请
    
 	# >>>
 	set vNode1Name=Pf_BizNodeName(pBizNode1);
 	set vNode2Name=Pf_BizNodeName(pBizNode2);
 	set vNode1TzSys1=Pf_BizNodeSysBitByPt(pBizNode1,1);
 	set vNode2TzSys1=Pf_BizNodeSysBitByPt(pBizNode2,1);
 	set vFlowBranchName=Pf_BizFlowBranchName(pActionID);

   	select BizTitle,InitUsrID into vBizTitle,vInitUsrID from Pf_A_Biz where BizCode=27 and BizID=pBizID;
    select XmID into vXmID from ZxBg_A_HtSp where ID=pBizID;
    
    if vNode1TzSys1='S' and vNode2TzSys1!='S' then
    	# 约束
        select count(*) into vCnt from Pf_A_AttachInfo where PrimaryID=pBizID and PrimaryName='ZxBg_A_HtSp' and DelTag='N';
 		if vCnt=0 then
 			call UpdNodeOfBiz27_err1(); # 发起合同审批前须上传未盖章合同原版文件！
 			leave label1;
 		end if;
    end if;
    
    if vNode1Name='法律合规部审核' and vNode2Name='法律合规部门负责人审批' then
    	select count(*) into vCnt from ZxBg_A_HtSp where ID=pBizID and (HtBh is null or trim(HtBh)='' or trim(HtBh)='-');
        if vCnt>0 then
        	call UpdNodeOfBiz27_err2(); # 提交法律合规部门负责人审批前应先对合同编号！
            leave label1;
        end if;
    end if;
    
    if vNode1TzSys1!='E' and vNode2TzSys1='E' THEN
    	# 约束
        select count(*) into vCnt from Pf_A_AttachInfo where PrimaryID=pBizID and PrimaryName='ZxBg_A_HtSp_Qz' and DelTag='N';
 		if vCnt=0 then
 			call UpdNodeOfBiz27_err3(); # 合同获批，结束流程前须生成合同审批单归档文件！
 			leave label1;
 		end if;
        
        # 相关更新
        # 0、置业务可归档、业务状态'P'
        update Pf_A_Biz set IfToBeArchived='Y' where BizCode=27 and BizID=pBizID;
        update ZxBg_A_HtSp set BizStatus='P' where ID=pBizID;
        
        # 1、插入项目下合同ZxBg_M_XmHt
        insert into ZxBg_M_XmHt 
        select null,HtBh,HtMc,HtAmt,0,XmID
        from ZxBg_A_HtSp
        where ID=pBizID;
        
        # 自动发起用印申请
        select max(ID) into vYySqFlowDefID from Pf_M_BizFlow where BizCode=25 and IfValid='Y';
        select ID into vYySqInitNodeID from Pf_M_BizNode where BizCode=25 and substr(TzSys,1,1)='S' and IfValid='Y';
        insert into ZxBg_A_YzZzSq values (now(),null,vInitUsrID,Pf_OrgFullName(Pf_UsrMainOrgID(vInitUsrID)),'W','a',null,null,null,'合同用印',1,
        	@@identity,null,null,'N');
        call Engine_InitBizFlow(25,@@identity,concat('[',Pf_UsrcName(vInitUsrID),']','申请使用印章、证照，申请事由[合同用印]'),
        	vYySqFlowDefID,vYySqInitNodeID,vInitUsrID,vToDoWorkItem);
             
        # 发提醒给申请业务员
        select AppUrl Into vAppUrl From Pf_M_Ent;
        set vPrompt=concat(Pf_UsrcName(vInitUsrID),'，你好！',Char(13),Char(10),
            '    名为【',vBizTitle,'】的合同已于',DATE_FORMAT(now(),'%Y-%m-%d %H:%i'),'获批并归档，且自动发起了用印申请！详情见办公系统。',
            char(13),char(10),char(13),char(10),'办公系统访问地址是：',vAppUrl);
                  
        insert into Pf_D_PromptMail values (null, now(), '合同获批后用印申请自动接续提醒',vPrompt, now(), 'N');
        insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(vInitUsrID),'Z');
	end if;
    
    if vNode1TzSys1='E' and vNode2TzSys1!='E' THEN #撤回
    	update ZxBg_A_HtSp set BizStatus='W' where ID=pBizID;
        
        # 撤销接着的用印申请
		select Seq into vYySqBizSeqToBeDel
        from Pf_A_Biz
        where BizCode=25 and exists(select 1 from ZxBg_A_YzZzSq a,ZxBg_M_XmHt m where a.YyHtID=m.ID and m.HtBh=vHtBh and a.ID=Pf_A_Biz.BizID);
        
        #call Pf_DelBiz(vYySqBizSeqToBeDel);
        delete from Pf_A_Biz where Seq=vYySqBizSeqToBeDel;
        delete from ZxBg_A_YzZzSq where exists(select 1 from ZxBg_M_XmHt where HtBh=vHtBh and ID=ZxBg_A_YzZzSq.YyHtID);
        
       	# 取消合同主文件记录
       	delete from ZxBg_M_XmHt where exists(select 1 from ZxBg_A_HtSp where ID=pBizID and HtBh=ZxBg_M_XmHt.HtBh);

       	#撤销文件归档
       	select ID into vXmDirRootID from ZxBg_M_XmDir where XmID=vXmID and Mc='项目文件' and UpDirID=0;
        
   		update Pf_M_AttachInfo 
        set DelTag='Y'  
       	where PrimaryName ='ZxBg_M_XmDir' and instr(FileName,concat('[',pBizID,']',FileExt))>0 and exists(
       		select 1 from ZxBg_M_XmDir 
            where XmID=vXmID and Mc=concat('e、',Pf_CodeValueByCharCode(26,'e')) and UpDirID=vXmDirRootID and 
            	Pf_M_AttachInfo.PrimaryID=ID);
    end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `UpdNodeOfBiz28` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `UpdNodeOfBiz28`(
        IN `pBizID` INTEGER UNSIGNED,
        IN `pBizNode1` SMALLINT,
        IN `pBizNode2` SMALLINT,
        IN `pDriveTag` CHAR(1),
        IN `pActionID` SMALLINT UNSIGNED
    )
    COMMENT '【28-合同审查】业务环节迁移过程'
label1:
BEGIN
 	declare vNode1Name,vNode2Name varchar(20);
 	declare vNode1TzSys1,vNode2TzSys1 char(1);
 	declare vCnt tinyint unsigned;
 	
    declare vYySqFlowDefID smallint unsigned;
    declare vYySqInitNodeID smallint;
    declare vToDoWorkItem integer unsigned; # 必要的出参，不用
        
    declare vAppUrl,vBizTitle varchar(100);
    declare vInitUsrID smallint unsigned;
    declare vPrompt varchar(1000);
    
    declare vYySqBizSeqToBeDel integer unsigned; #待删除用印申请
    
 	# >>>
 	set vNode1Name=Pf_BizNodeName(pBizNode1);
 	set vNode2Name=Pf_BizNodeName(pBizNode2);
 	set vNode1TzSys1=Pf_BizNodeSysBitByPt(pBizNode1,1);
 	set vNode2TzSys1=Pf_BizNodeSysBitByPt(pBizNode2,1);
 	
   	select BizTitle,InitUsrID into vBizTitle,vInitUsrID from Pf_A_Biz where BizCode=28 and BizID=pBizID;
    
    if vNode1TzSys1='S' and vNode2TzSys1!='S' then
    	# 约束
        select count(*) into vCnt from Pf_A_AttachInfo where PrimaryID=pBizID and PrimaryName='ZxBg_A_HtSc' and DelTag='N';
 		if vCnt=0 then
 			call UpdNodeOfBiz28_err1(); # 发起合同审查前须上传未盖章合同原版文件！
 			leave label1;
 		end if;
    end if;

    if vNode1Name='法律合规部审核' and vNode2Name='法律合规部门负责人审批' then
    	select count(*) into vCnt from ZxBg_A_HtSc where ID=pBizID and (HtBh is null or trim(HtBh)='' or trim(HtBh)='-');
        if vCnt>0 then
        	call UpdNodeOfBiz28_err2(); # 提交法律合规部门负责人审批前应先对合同编号！
            leave label1;
        end if;
    end if;
    
 	if vNode1TzSys1!='E' and vNode2TzSys1='E' then
    	# 约束
        select count(*) into vCnt from Pf_A_AttachInfo where PrimaryID=pBizID and PrimaryName='ZxBg_A_HtSc_Qz' and DelTag='N';
 		if vCnt=0 then
 			call UpdNodeOfBiz28_err3(); # 合同获批，结束流程前须生成合同审查单归档文件！
 			leave label1;
 		end if;
        
        # 相关更新
        # 0、置业务可归档、业务状态'P'
        update Pf_A_Biz set IfToBeArchived='Y' where BizCode=28 and BizID=pBizID;
        update ZxBg_A_HtSc set BizStatus='P' where ID=pBizID;
        
        # 自动发起用印申请
        select max(ID) into vYySqFlowDefID from Pf_M_BizFlow where BizCode=25 and IfValid='Y';
        select ID into vYySqInitNodeID from Pf_M_BizNode where BizCode=25 and substr(TzSys,1,1)='S' and IfValid='Y';
        insert into ZxBg_A_YzZzSq values (now(),null,vInitUsrID,Pf_OrgFullName(Pf_UsrMainOrgID(vInitUsrID)),'W','a',null,null,null,
        	'业务合同审查通过后用印',1,null,pBizID,null,'N');
        call Engine_InitBizFlow(25,@@identity,concat('[',Pf_UsrcName(vInitUsrID),']','申请使用印章、证照，申请事由[业务合同审查后用印]'),
        	vYySqFlowDefID,vYySqInitNodeID,vInitUsrID,vToDoWorkItem);
             
        # 发提醒给申请业务员
        select AppUrl Into vAppUrl From Pf_M_Ent;
        set vPrompt=concat(Pf_UsrcName(vInitUsrID),'，你好！',Char(13),Char(10),
            '    名为【',vBizTitle,'】的业务合同审查已于',DATE_FORMAT(now(),'%Y-%m-%d %H:%i'),'通过并归档，且自动发起了用印申请！详情见办公系统。',
            char(13),char(10),char(13),char(10),'办公系统访问地址是：',vAppUrl);
                  
        insert into Pf_D_PromptMail values (null, now(), '业务合同审查后用印申请自动接续提醒',vPrompt, now(), 'N');
        insert into Pf_D_PromptMailTo values (@@identity,Pf_UsrEmail(vInitUsrID),'Z');
 	end if;

    if vNode1TzSys1='E' and vNode2TzSys1!='E' THEN #撤回
    	update ZxBg_A_HtSc set BizStatus='W' where ID=pBizID;
        
        # 撤销接着的用印申请
		select Seq into vYySqBizSeqToBeDel
        from Pf_A_Biz
        where BizCode=25 and exists(select 1 from ZxBg_A_YzZzSq where YyHtScID=pBizID and ID=Pf_A_Biz.BizID);
        
        #call Pf_DelBiz(vYySqBizSeqToBeDel);
        delete from Pf_A_Biz where Seq=vYySqBizSeqToBeDel;
        delete from ZxBg_A_YzZzSq where YyHtScID=pBizID;
    end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `Xj_KyNjGx` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `Xj_KyNjGx`()
    COMMENT '可用年假更新'
BEGIN
	declare vUsrID smallint unsigned;
    declare vWorkLife tinyint unsigned;
    declare vCnt tinyint unsigned;
    declare vKxNjTs tinyint unsigned;
    
	declare done tinyint default 0;
	declare c1 cursor for select ID,WorkLifeBeforeEntry+round(DATEDIFF(now(),EntryDate)/365) from Pf_M_Usr 
    	where IsValid='Y' and DATEDIFF(now(),EntryDate)>365 order by ID; # 入职满1年
    declare CONTINUE HANDLER FOR NOT FOUND SET done = 1;
    
    # 清除离职人员
    delete from Xj_M_NjTs where EXISTS(select 1 from Pf_M_Usr where ID=Xj_M_NjTs.UsrID and IsValid='N');
    
    set done=0;
    open c1;
    fetch c1 into vUsrID,vWorkLife;
    while (done!=1) do
    	set vKxNjTs=(case when vWorkLife<10 then 5 else case when vWorkLife<20 then 10 else 15 end end);
        
    	select COUNT(*) into vCnt from Xj_M_NjTs where UsrID=vUsrID;
        if vCnt=0 then # 初始化
        	insert into Xj_M_NjTs values (vUsrID,0,0,vKxNjTs,0);
        else
        	update Xj_M_NjTs set BnKxTs=vKxNjTs where UsrID=vUsrID;
        end if;
        
    	fetch c1 into vUsrID,vWorkLife;
    end while;
    close c1;
    
    if DATE_FORMAT(now(),'%m-%d')='01-01' then
      update Xj_M_NjTs set SnKxTs=BnKxTs,SnYxTs=BnYxTs;
      update Xj_M_NjTs set BnKxTs=Xj_KxNjTs(UsrID),BnYxTs=0;
    end if;

    if DATE_FORMAT(now(),'%m-%d')='07-01' then
      update Xj_M_NjTs set SnYxTs=SnKxTs;
    end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `Xj_YgXjTj` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `Xj_YgXjTj`(
        IN `pNfYf` DATE
    )
    COMMENT '临时表、行转列技术运用：员工休假统计'
BEGIN
    declare vFirstDay date;
    declare vLastDay date;
    
    DROP TEMPORARY table if EXISTS Xj_T_Tj;
	create TEMPORARY table Xj_T_Tj (
      UsrID SMALLINT(5) unsigned,
      OrgName VARCHAR(100),
      UsrName varchar(10),
      NjTs decimal(4,1),
      TxTs decimal(4,1),
      BjTs decimal(4,1),
      SjTs decimal(4,1),
      HjTs decimal(4,1),
      SangJTs decimal(4,1),
      CjTs decimal(4,1),
      PcjTs decimal(4,1),
      BrjTs decimal(4,1),
      QtTs decimal(4,1),
      PRIMARY key (UsrID)
	) ENGINE=memory
    CHARACTER set 'utf8' COLLATE 'utf8_general_ci';
    
    DROP TEMPORARY table if EXISTS Xj_T_RyTs;
	create TEMPORARY table Xj_T_RyTs (
      UsrID SMALLINT(5),
      JbCode TINYINT(4),
      XjTs decimal(4,1)
	) ENGINE=memory
    CHARACTER set 'utf8' COLLATE 'utf8_general_ci';
    
    #获取指定月份的第一天和最后一天
    select date_add(DATE_ADD(LAST_DAY(pNfYf),interval 1 day),INTERVAL -1 month),last_day(pNfYf) into vFirstDay,vLastDay from dual;    
    
    #获取用户ID、假别、请假天数
    insert into Xj_T_RyTs(UsrID,JbCode,XjTs) 
    select lh.UsrID,lh.JbCode,sum(lh.QjTs) 
    from (
    	select b.`InitUsrID` UsrID,c.`JbCode` JbCode, Xj_XjTs(c.`ID`,a.`SjKsRq`,a.`SjKsRqBtQt`,a.`SjJsRq`,a.`SjJsRqBtQt`) QjTs 
		from Xj_A_Mx a,Xj_A_Zt b,Xj_M_JbTj c
		where a.`ZtID`=b.`ID` and a.`JbTjID`=c.`ID` and a.`SjKsRq` BETWEEN vFirstDay and vLastDay and a.`SjJsRq` BETWEEN vFirstDay and vLastDay and 
        	EXISTS(select 1 from Pf_A_Biz where BizID=b.ID and BizCode=17 and Pf_BizNodeSysBitByPt(FlowStatus,1)='E')
		UNION 
    	select b.`InitUsrID` UsrID,c.`JbCode` JbCode, Xj_XjTs(c.`ID`,vFirstDay,'Q',a.`SjJsRq`,a.`SjJsRqBtQt`) QjTs
		from Xj_A_Mx a,Xj_A_Zt b,Xj_M_JbTj c
		where a.`ZtID`=b.`ID` and a.`JbTjID`=c.`ID`	and vFirstDay BETWEEN a.`SjKsRq` and a.`SjJsRq`	and a.`SjJsRq`<=vLastDay and 
        	EXISTS(select 1 from Pf_A_Biz where BizID=b.ID and BizCode=17 and Pf_BizNodeSysBitByPt(FlowStatus,1)='E')
		union
		select b.`InitUsrID` UsrID,c.`JbCode` JbCode,Xj_XjTs(c.`ID`,a.`SjKsRq`,a.`SjKsRqBtQt`,vLastDay,'Q') QjTs 
		from Xj_A_Mx a,Xj_A_Zt b,Xj_M_JbTj c
		where a.`ZtID`=b.`ID` and a.`JbTjID`=c.`ID`	and vLastDay BETWEEN a.`SjKsRq` and a.`SjJsRq` and a.`SjKsRq`>=vFirstDay and 
        	EXISTS(select 1 from Pf_A_Biz where BizID=b.ID and BizCode=17 and Pf_BizNodeSysBitByPt(FlowStatus,1)='E')
		union
		select b.`InitUsrID` UsrID,c.`JbCode` JbCode,Xj_XjTs(c.`ID`,vFirstDay,'Q',vLastDay,'Q') QjTs 
		from Xj_A_Mx a,Xj_A_Zt b,Xj_M_JbTj c
		where a.`ZtID`=b.`ID` and a.`JbTjID`=c.`ID`	and vFirstDay BETWEEN a.`SjKsRq` and a.`SjJsRq` and vLastDay BETWEEN a.`SjKsRq` and a.`SjJsRq` and 
        	EXISTS(select 1 from Pf_A_Biz where BizID=b.ID and BizCode=17 and Pf_BizNodeSysBitByPt(FlowStatus,1)='E')
        ) lh  
    group by lh.UsrID,lh.JbCode order by lh.UsrID,lh.JbCode;
    
    #列转行显示
    insert into Xj_T_Tj(UsrID,OrgName,UsrName,NjTs,TxTs,BjTs,SjTs,HjTs,SangJTs,CjTs,PcjTs,BrjTs,QtTs)
    select UsrID, Pf_OrgFullName(Pf_UsrMainOrgID(UsrID)),Pf_UsrcName(UsrID),
      max(case JbCode when 6 then XjTs else 0 end ) Nj, #年假
      max(case JbCode when 9 then XjTs else 0 end ) Txj, #调休
      max(case JbCode when 1 then XjTs else 0 end ) Bj, #病假
      max(case JbCode when 7 then XjTs else 0 end ) Sj, #事假
      max(case JbCode when 2 then XjTs else 0 end ) Hj, #婚假
      max(case JbCode when 8 then XjTs else 0 end ) SangJ, #丧假
      max(case JbCode when 3 then XjTs else 0 end ) Cj, #产假
      max(case JbCode when 4 then XjTs else 0 end ) Pcj, #陪产假
      max(case JbCode when 5 then XjTs else 0 end ) Brj, #哺乳假
      max(case JbCode when 10 then XjTs else 0 end ) Qtj #其他
    from Xj_T_RyTs 
    group by UsrID 
    order by Pf_OrgBigOrd(Pf_UsrMainOrgID(UsrID)),Pf_UsrOrdInMainOrg(UsrID);
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `XmDir_CalcSubDirCfsFatherFrom` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `XmDir_CalcSubDirCfsFatherFrom`(
        IN `pFatherXmDirID` INTEGER(11) UNSIGNED
    )
    COMMENT '从指定父目录开始，计算从属目录计算字段：层级、大排序、全路径'
BEGIN
	declare vDirLevel tinyint unsigned;
    declare vFatherFromBigOrdCode VARCHAR(30);
    declare vExists tinyint unsigned;
    declare vParentDirID integer unsigned;
    declare vParentBigOrdCode VARCHAR(30);
    declare vParentFullPathName VARCHAR(300);
    
	DECLARE done INT DEFAULT 0;
    declare cur1 CURSOR for 
    	select ID,BigOrdCode,FullPathName 
        from ZxBg_M_XmDir 
        where DirLevel = vDirLevel and instr(BigOrdCode,vFatherFromBigOrdCode)=1;
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;
    
    select DirLevel,BigOrdCode into vDirLevel,vFatherFromBigOrdCode from ZxBg_M_XmDir where ID=pFatherXmDirID; 
    
    set vExists = 1; 
    while vExists>0 do
	    open cur1; 
	    REPEAT  
	        fetch cur1 into vParentDirID,vParentBigOrdCode,vParentFullPathName; 
	        update ZxBg_M_XmDir 
	        set DirLevel = vDirLevel+1,BigOrdCode = concat(vParentBigOrdCode,LPAD(concat(SmallOrd,''),3,'0')),
            	FullPathName=concat(vParentFullPathName,'/',Mc)  
	        where UpDirID = vParentDirID; 
	  	UNTIL done END REPEAT; 
	  	close cur1; 
	 	SET done = 0;
        
		set vDirLevel = vDirLevel + 1; 
		select count(*) into vExists from ZxBg_M_XmDir where DirLevel = vDirLevel and instr(BigOrdCode,vFatherFromBigOrdCode)=1; 
    end while; 
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `XmDir_Del` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `XmDir_Del`(
        IN `pXmDirID` INTEGER(11) UNSIGNED
    )
    COMMENT '删除指定项目文件目录'
label1:
BEGIN
	declare vCnt tinyint unsigned;
    declare vBigOrdCode varchar(30);
    declare vDirLevel tinyint unsigned;
    
    select count(*) into vCnt from Pf_M_AttachInfo where PrimaryID=pXmDirID and PrimaryName='ZxBg_M_XmDir' and DelTag='N';
    if vCnt>0 then
 		call XmDir_Del_err1(); #项目目录下有文件！
 		leave label1;
    end if;
    
    select BigOrdCode,DirLevel into vBigOrdCode,vDirLevel from ZxBg_M_XmDir where ID=pXmDirID; 
    if vDirLevel<=2 then
 		call XmDir_Del_err2(); #保留目录禁止删除！
 		leave label1;
    end if;
    
    delete from ZxBg_M_XmDir where instr(BigOrdCode,vBigOrdCode)=1; 	
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `XmDir_Up` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `XmDir_Up`(
        IN `pXmDir2ID` INTEGER UNSIGNED
    )
    COMMENT '将目录往前调序'
label1:
BEGIN
	declare vParentDirID,vXmDir1ID integer unsigned;
    declare vSmallOrdTop,vSmallOrd1,vSmallOrd2 tinyint unsigned;
    declare vDirLevel tinyint unsigned;
    
    select UpDirID,SmallOrd,DirLevel into vParentDirID,vSmallOrd2,vDirLevel from ZxBg_M_XmDir where ID=pXmDir2ID; 
    if vDirLevel<=2 then
 		call XmDir_Up_err1(); # 保留目录禁止调序！
 		leave label1;
    end if;
         
    select min(SmallOrd) into vSmallOrdTop from ZxBg_M_XmDir where UpDirID=vParentDirID; 
    select max(SmallOrd) into vSmallOrd1 from ZxBg_M_XmDir where UpDirID=vParentDirID and SmallOrd < vSmallOrd2; 
    
    if vSmallOrd2=vSmallOrdTop then 
		leave label1; 
	end if; 
    
    select ID into vXmDir1ID from ZxBg_M_XmDir where UpDirID=vParentDirID and SmallOrd=vSmallOrd1; 

    update ZxBg_M_XmDir set SmallOrd=vSmallOrd1,BigOrdCode=concat(substr(BigOrdCode,1,length(BigOrdCode)-3),LPAD(concat(vSmallOrd1,''),3,'0')) 
    where ID=pXmDir2ID; 
		
    update ZxBg_M_XmDir set SmallOrd=vSmallOrd2,BigOrdCode=concat(substr(BigOrdCode,1,length(BigOrdCode)-3),LPAD(concat(vSmallOrd2,''),3,'0')) 
    where ID=vXmDir1ID; 
    
    call XmDir_CalcSubDirCfsFatherFrom(vXmDir1ID);
    call XmDir_CalcSubDirCfsFatherFrom(pXmDir2ID);
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `XmDir_UpdMc` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `XmDir_UpdMc`(
        IN `pXmDirID` INTEGER UNSIGNED,
        IN `pNewDirMc` VARCHAR(80)
    )
    COMMENT '修改项目目录名'
label1:
BEGIN
 	declare vOldMc varchar(80);
 	declare vParentDirID integer unsigned;
 	declare vDirLevel tinyint unsigned;
 	declare vBigOrdCode varchar(30);
 	declare vExists tinyint unsigned;
 	declare vParentFullPathName varchar(300);
 	
 	DECLARE done INT DEFAULT 0; 
 	declare cur1 CURSOR for 
    	select ID,FullPathName from ZxBg_M_XmDir where DirLevel = vDirLevel and instr(BigOrdCode,vBigOrdCode)=1; 
 	DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1; 
 	
 	select Mc into vOldMc from ZxBg_M_XmDir where ID=pXmDirID;
 	
 	if vOldMc=pNewDirMc then
 		leave label1;
 	end if;
 	
 	select DirLevel,BigOrdCode into vDirLevel,vBigOrdCode from ZxBg_M_XmDir where ID=pXmDirID; 
    if vDirLevel<=2 then
 		call XmDir_UpdMc_err1(); # 保留目录禁止改名！
 		leave label1;
 	end if;
    
 	#先改自身全路径 
 	update ZxBg_M_XmDir 
    set FullPathName=concat(substr(FullPathName,1,CHAR_LENGTH(FullPathName)-CHAR_LENGTH(Mc)),pNewDirMc),Mc=pNewDirMc 
    where ID=pXmDirID; 
 	
 	set vExists = 1; 
 	while vExists>0 do
 		open cur1; 
 		REPEAT 
 			fetch cur1 into vParentDirID,vParentFullPathName; 
 			update ZxBg_M_XmDir 
 			set FullPathName=concat(concat(vParentFullPathName,'/'),Mc) 
 			where UpDirID = vParentDirID; 
 		UNTIL done END REPEAT; 
 		close cur1; 
 		SET done = 0;
 		
 		set vDirLevel = vDirLevel + 1; 
 		select count(*) into vExists from ZxBg_M_XmDir where DirLevel = vDirLevel and instr(BigOrdCode,vBigOrdCode)=1; 
 	end while; 
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `XmDir_UpdParent` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `XmDir_UpdParent`(
        IN `pXmDirID` INTEGER UNSIGNED,
        IN `pNewParentXmDirID` INTEGER UNSIGNED
    )
    COMMENT '改变项目目录隶属'
label1:
BEGIN
 	declare vSelfBo,vNewParentBo varchar(30);
 	declare vOldParentDirID integer unsigned;
 	declare vSelfLevel,vBottomLevel,vTargetLevel,vNewSmallOrd tinyint unsigned;
 	declare vNewParentFullPathName VARCHAR(300);
 	
 	#pNewParentDirID合法检查
 	select BigOrdCode,UpDirID,DirLevel into vSelfBo,vOldParentDirID,vSelfLevel from ZxBg_M_XmDir where ID=pXmDirID; 
 	select BigOrdCode,DirLevel,FullPathName into vNewParentBo,vTargetLevel,vNewParentFullPathName from ZxBg_M_XmDir where ID=pNewParentXmDirID;
 	
    if vSelfLevel<=2 then
 		call XmDir_UpdParent_err1(); # 保留目录禁止改变从属！
 		leave label1;
 	end if;
    
 	if vOldParentDirID=pNewParentXmDirID then
 		leave label1;
 	end if;
 	
 	if instr(vNewParentBo,vSelfBo)=1 then
 		#目标父目录不能是修改目录本身或其下级目录！
 		call XmDir_UpdParent_err2();
 		leave label1;
 	end if;
 	
 	select max(DirLevel) into vBottomLevel from ZxBg_M_XmDir where instr(BigOrdCode,vSelfBo)=1; 
 	if (vBottomLevel - vSelfLevel + 1 + vTargetLevel)>10 then 
 		#移动目录引发最大目录层级超过10层限制！
 		call XmDir_UpdParent_err3();
 		leave label1;
 	end if;
 	
 	select COALESCE(max(SmallOrd),0)+1 into vNewSmallOrd from ZxBg_M_XmDir where UpDirID = pNewParentXmDirID; 
 	update ZxBg_M_XmDir 
 	set UpDirID=pNewParentXmDirID,SmallOrd=vNewSmallOrd,DirLevel=vTargetLevel+1,BigOrdCode=CONCAT(vNewParentBo,LPAD(concat(vNewSmallOrd,''),3,'0')),
 		FullPathName=concat(vNewParentFullPathName,'/',Mc)
 	where ID=pXmDirID;
 	
 	call XmDir_CalcSubDirCfsFatherFrom(pXmDirID);
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `XxFb_CalcLmCfsFatherFrom` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `XxFb_CalcLmCfsFatherFrom`(
        IN `pUpLmID` SMALLINT(5) UNSIGNED
    )
    COMMENT '从指定父栏目开始，计算子栏目计算字段：层级、大排序、全称'
BEGIN
	declare vLmLevel tinyint unsigned;
    declare vFatherFromBigOrdCode VARCHAR(30);
    declare vExists tinyint unsigned;
    declare vUpLmID smallint unsigned;
    declare vUpBigOrdCode VARCHAR(30);
    declare vUpFullPathName VARCHAR(100);
    
	DECLARE done INT DEFAULT 0;
    declare cur1 CURSOR for select ID,BigOrdCode,FullPathName from XxFb_M_Lm where LmLevel = vLmLevel and instr(BigOrdCode,vFatherFromBigOrdCode)=1;
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;
    
    select LmLevel,BigOrdCode into vLmLevel,vFatherFromBigOrdCode from XxFb_M_Lm where ID=pUpLmID; 
    
    set vExists = 1; 
    while vExists>0 do
	    open cur1; 
	    REPEAT  
	        fetch cur1 into vUpLmID,vUpBigOrdCode,vUpFullPathName; 
	        update XxFb_M_Lm 
	        set LmLevel = vLmLevel+1,BigOrdCode = concat(vUpBigOrdCode,LPAD(concat(SmallOrd,''),3,'0')),FullPathName=concat(vUpFullPathName,'/',LmMc)  
	        where UpLmID = vUpLmID; 
	  	UNTIL done END REPEAT; 
	  	close cur1; 
	 	SET done = 0;
        
		set vLmLevel = vLmLevel + 1; 
		select count(*) into vExists from XxFb_M_Lm where LmLevel = vLmLevel and instr(BigOrdCode,vFatherFromBigOrdCode)=1; 
    end while; 
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `XxFb_DelLm` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `XxFb_DelLm`(
        IN `pLmID` SMALLINT(5) UNSIGNED
    )
    COMMENT '栏目及其子栏目删除过程'
BEGIN
	declare vBigOrdCode varchar(30);
    
    select BigOrdCode into vBigOrdCode from XxFb_M_Lm where ID=pLmID; 
    delete from XxFb_M_Lm where instr(BigOrdCode,vBigOrdCode)=1; 
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `XxFb_InvalidateLm` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `XxFb_InvalidateLm`(
        IN `pLmID` SMALLINT(5) UNSIGNED
    )
    COMMENT '作废指定栏目、级联作废从属栏目'
BEGIN
	declare vBigOrdCode varchar(30);
    
    select BigOrdCode into vBigOrdCode from XxFb_M_Lm where ID=pLmID;
    update XxFb_M_Lm set IsValid='N' where instr(BigOrdCode,vBigOrdCode)=1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `XxFb_UpdLmCs` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `XxFb_UpdLmCs`(
        IN `pLmID` SMALLINT(5) UNSIGNED,
        IN `pNewCsLmID` SMALLINT(5) UNSIGNED
    )
    COMMENT '改变指定栏目从属'
label1:
BEGIN
 	declare vSelfBo,vNewUpBo varchar(30);
 	declare vOldUpLmID smallint unsigned;
 	declare vSelfLevel,vBottomLevel,vTargetLevel,vNewSmallOrd tinyint unsigned;
 	declare vNewUpFullPathName VARCHAR(100);
 	
 	#pNewCsLmID合法检查
 	select BigOrdCode,UpLmID,LmLevel into vSelfBo,vOldUpLmID,vSelfLevel from XxFb_M_Lm where ID=pLmID; 
    if pNewCsLmID=0 then
    	set vNewUpBo='';
        set vTargetLevel=0;
        set vNewUpFullPathName='';
    else
 		select BigOrdCode,LmLevel,FullPathName into vNewUpBo,vTargetLevel,vNewUpFullPathName from XxFb_M_Lm where ID=pNewCsLmID;
 	end if;
    
 	if vOldUpLmID=pNewCsLmID then
 		leave label1;
 	end if;
 	
 	if instr(vNewUpBo,vSelfBo)=1 then
 		# 目标父栏目不能是修改栏目本身或其子栏目！
 		call XxFb_UpdLmCs_err1();
 		leave label1;
 	end if;
 	
 	select max(LmLevel) into vBottomLevel from XxFb_M_Lm where instr(BigOrdCode,vSelfBo)=1; 
 	if (vBottomLevel - vSelfLevel + 1 + vTargetLevel)>10 then 
 		# 移动栏目引发最大栏目层级超过10层限制！
 		call XxFb_UpdLmCs_err2();
 		leave label1;
 	end if;
 	
 	select COALESCE(max(SmallOrd),0)+1 into vNewSmallOrd from XxFb_M_Lm where UpLmID = pNewCsLmID; 
 	update XxFb_M_Lm 
 	set UpLmID=pNewCsLmID,SmallOrd=vNewSmallOrd,LmLevel=vTargetLevel+1,BigOrdCode=CONCAT(vNewUpBo,LPAD(concat(vNewSmallOrd,''),3,'0')),
 		FullPathName=case when vNewUpFullPathName='' then LmMc else concat(vNewUpFullPathName,'/',LmMc) end 
 	where ID=pLmID;
 	
 	call XxFb_CalcLmCfsFatherFrom(pLmID);
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `XxFb_UpdLmMc` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `XxFb_UpdLmMc`(
        IN `pLmID` SMALLINT(5) UNSIGNED,
        IN `pNewLmMc` VARCHAR(20)
    )
    COMMENT '栏目改名'
label1:
BEGIN
 	declare vOldLmMc varchar(20);
 	declare vUpLmID smallint unsigned;
 	declare vLmLevel tinyint unsigned;
 	declare vBigOrdCode varchar(30);
 	declare vExists tinyint unsigned;
 	declare vUpFullPathName varchar(100);
 	
 	DECLARE done INT DEFAULT 0; 
 	declare cur1 CURSOR for select ID,FullPathName from XxFb_M_Lm where LmLevel = vLmLevel and instr(BigOrdCode,vBigOrdCode)=1; 
 	DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1; 
 	
 	select LmMc into vOldLmMc from XxFb_M_Lm where ID=pLmID;
 	
 	if vOldLmMc=pNewLmMc then
 		leave label1;
 	end if;
 	
 	select UpLmID,LmLevel,BigOrdCode into vUpLmID,vLmLevel,vBigOrdCode from XxFb_M_Lm where ID=pLmID; 
 	#先改自己的栏目全称 
 	if vUpLmID=0 then 
 		#改的是一级栏目的简称 
 		update XxFb_M_Lm set FullPathName=pNewLmMc,LmMc=pNewLmMc where ID=pLmID; 
 	else 
 		update XxFb_M_Lm set FullPathName=concat(substr(FullPathName,1,CHAR_LENGTH(FullPathName)-CHAR_LENGTH(LmMc)),pNewLmMc),LmMc=pNewLmMc where ID=pLmID; 
 	end if; 
 	
 	set vExists = 1; 
 	while vExists>0 do
 		open cur1; 
 		REPEAT 
 			fetch cur1 into vUpLmID,vUpFullPathName; 
 			update XxFb_M_Lm 
 			set FullPathName=concat(concat(vUpFullPathName,'/'),LmMc) 
 			where UpLmID = vUpLmID; 
 		UNTIL done END REPEAT; 
 		close cur1; 
 		SET done = 0;
 		
 		set vLmLevel = vLmLevel + 1; 
 		select count(*) into vExists from XxFb_M_Lm where LmLevel = vLmLevel and instr(BigOrdCode,vBigOrdCode)=1; 
 	end while; 
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `XxFb_UpLm` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `XxFb_UpLm`(
        IN `pLm2ID` SMALLINT(5) UNSIGNED
    )
    COMMENT '栏目排序上移'
label1:
BEGIN
	declare vUpLmID,vLm1ID smallint unsigned;
    declare vSmallOrdTop,vSmallOrd1,vSmallOrd2 tinyint unsigned;
    
    select UpLmID,SmallOrd into vUpLmID,vSmallOrd2 from XxFb_M_Lm where ID=pLm2ID;  
    select min(SmallOrd) into vSmallOrdTop from XxFb_M_Lm where UpLmID=vUpLmID; 
    select max(SmallOrd) into vSmallOrd1 from XxFb_M_Lm where UpLmID=vUpLmID and SmallOrd < vSmallOrd2; 
    
    if vSmallOrd2=vSmallOrdTop then 
		leave label1; 
	end if; 
    
    select ID into vLm1ID from XxFb_M_Lm where UpLmID=vUpLmID and SmallOrd=vSmallOrd1; 

    update XxFb_M_Lm set SmallOrd=vSmallOrd1,BigOrdCode=concat(substr(BigOrdCode,1,length(BigOrdCode)-3),LPAD(concat(vSmallOrd1,''),3,'0')) 
    where ID=pLm2ID; 
		
    update XxFb_M_Lm set SmallOrd=vSmallOrd2,BigOrdCode=concat(substr(BigOrdCode,1,length(BigOrdCode)-3),LPAD(concat(vSmallOrd2,''),3,'0')) 
    where ID=vLm1ID; 
    
    call XxFb_CalcLmCfsFatherFrom(vLm1ID);
    call XxFb_CalcLmCfsFatherFrom(pLm2ID);
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Final view structure for view `v_GsLt_A_Tp`
--

/*!50001 DROP TABLE IF EXISTS `v_GsLt_A_Tp`*/;
/*!50001 DROP VIEW IF EXISTS `v_GsLt_A_Tp`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8 */;
/*!50001 SET character_set_results     = utf8 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`%` SQL SECURITY DEFINER */
/*!50001 VIEW `v_GsLt_A_Tp` AS select `GsLt_A_Tp`.`BizID` AS `BizID`,`GsLt_A_Tp`.`TpRyUsrID` AS `TpRyUsrID`,(case when isnull(`GsLt_A_Tp`.`TjSj`) then '未表态' else `Pf_CodeValueByCharCode`(8,`GsLt_A_Tp`.`TpXz`) end) AS `TpXzMc` from `GsLt_A_Tp` */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `v_ZxBg_A_FkSp`
--

/*!50001 DROP TABLE IF EXISTS `v_ZxBg_A_FkSp`*/;
/*!50001 DROP VIEW IF EXISTS `v_ZxBg_A_FkSp`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8 */;
/*!50001 SET character_set_results     = utf8 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`%` SQL SECURITY DEFINER */
/*!50001 VIEW `v_ZxBg_A_FkSp` AS select `a`.`ID` AS `ID`,`xm`.`XmMc` AS `XmMc`,`xm`.`XmBh` AS `XmBh`,'-' AS `HtMc`,`a`.`DjCnt` AS `DjCnt`,`a`.`SkrMc` AS `SkrMc`,`a`.`Khh` AS `Khh`,`a`.`AcctNo` AS `AcctNo`,`a`.`FkAmt` AS `FkAmt`,`a`.`ZfFs` AS `ZfFs`,`a`.`FkSy` AS `FkSy`,`a`.`HtQdRq` AS `HtQdRq`,`a`.`ZjDwRq` AS `ZjDwRq`,`xm`.`SqLxSj` AS `SqLxSj`,`xm`.`XmJj` AS `XmJj`,`xm`.`XmJe` AS `XmJe`,`xm`.`QqFyYn` AS `QqFyYn`,`xm`.`JzDcXzCyIDs` AS `JzDcXzCyIDs`,`xm`.`XmScJgMs` AS `XmScJgMs`,`xm`.`JchSqSj` AS `JchSqSj`,`xm`.`JchZkSj` AS `JchZkSj`,`xm`.`ChTpCnt` AS `ChTpCnt`,`xm`.`PassCnt` AS `PassCnt`,`xm`.`RejectCnt` AS `RejectCnt`,`xm`.`DiscardCnt` AS `DiscardCnt`,`xm`.`SsYj` AS `SsYj`,`a`.`InitOrgName` AS `InitOrgName` from (`ZxBg_A_FkSp` `a` join `ZxBg_M_XmXx` `xm`) where ((`a`.`YjLb` = 'a') and (`a`.`YjID` = `xm`.`ID`)) union select `a`.`ID` AS `ID`,`xm`.`XmMc` AS `XmMc`,`xm`.`XmBh` AS `XmBh`,`ht`.`HtMc` AS `HtMc`,`a`.`DjCnt` AS `DjCnt`,`a`.`SkrMc` AS `SkrMc`,`a`.`Khh` AS `Khh`,`a`.`AcctNo` AS `AcctNo`,`a`.`FkAmt` AS `FkAmt`,`a`.`ZfFs` AS `ZfFs`,`a`.`FkSy` AS `FkSy`,`a`.`HtQdRq` AS `HtQdRq`,`a`.`ZjDwRq` AS `ZjDwRq`,`xm`.`SqLxSj` AS `SqLxSj`,`xm`.`XmJj` AS `XmJj`,`xm`.`XmJe` AS `XmJe`,`xm`.`QqFyYn` AS `QqFyYn`,`xm`.`JzDcXzCyIDs` AS `JzDcXzCyIDs`,`xm`.`XmScJgMs` AS `XmScJgMs`,`xm`.`JchSqSj` AS `JchSqSj`,`xm`.`JchZkSj` AS `JchZkSj`,`xm`.`ChTpCnt` AS `ChTpCnt`,`xm`.`PassCnt` AS `PassCnt`,`xm`.`RejectCnt` AS `RejectCnt`,`xm`.`DiscardCnt` AS `DiscardCnt`,`xm`.`SsYj` AS `SsYj`,`a`.`InitOrgName` AS `InitOrgName` from ((`ZxBg_A_FkSp` `a` join `ZxBg_M_XmHt` `ht`) join `ZxBg_M_XmXx` `xm`) where ((`a`.`YjLb` = 'b') and (`a`.`YjID` = `ht`.`ID`) and (`ht`.`XmID` = `xm`.`ID`)) union select `a`.`ID` AS `ID`,`xm`.`XmMc` AS `XmMc`,'-' AS `XmBh`,'-' AS `HtMc`,`a`.`DjCnt` AS `DjCnt`,`a`.`SkrMc` AS `SkrMc`,`a`.`Khh` AS `Khh`,`a`.`AcctNo` AS `AcctNo`,`a`.`FkAmt` AS `FkAmt`,`a`.`ZfFs` AS `ZfFs`,`a`.`FkSy` AS `FkSy`,`a`.`HtQdRq` AS `HtQdRq`,`a`.`ZjDwRq` AS `ZjDwRq`,'-' AS `SqLxSj`,`xm`.`XmJj` AS `XmJj`,0 AS `XmJe`,'N' AS `QqFyYn`,'-' AS `JzDcXzCyIDs`,'-' AS `XmScJgMs`,'-' AS `JchSqSj`,'-' AS `JchZkSj`,0 AS `ChTpCnt`,0 AS `PassCnt`,0 AS `RejectCnt`,0 AS `DiscardCnt`,'-' AS `SsYj`,`a`.`InitOrgName` AS `InitOrgName` from (`ZxBg_A_FkSp` `a` join `ZxBg_M_LsXm` `xm`) where ((`a`.`YjLb` = 'c') and (`a`.`YjID` = `xm`.`ID`)) union select `a`.`ID` AS `ID`,`xm`.`XmMc` AS `XmMc`,'-' AS `XmBh`,`sc`.`HtMc` AS `HtMc`,`a`.`DjCnt` AS `DjCnt`,`a`.`SkrMc` AS `SkrMc`,`a`.`Khh` AS `Khh`,`a`.`AcctNo` AS `AcctNo`,`a`.`FkAmt` AS `FkAmt`,`a`.`ZfFs` AS `ZfFs`,`a`.`FkSy` AS `FkSy`,`a`.`HtQdRq` AS `HtQdRq`,`a`.`ZjDwRq` AS `ZjDwRq`,'-' AS `SqLxSj`,`xm`.`XmJj` AS `XmJj`,0 AS `XmJe`,'N' AS `QqFyYn`,'-' AS `JzDcXzCyIDs`,'-' AS `XmScJgMs`,'-' AS `JchSqSj`,'-' AS `JchZkSj`,0 AS `ChTpCnt`,0 AS `PassCnt`,0 AS `RejectCnt`,0 AS `DiscardCnt`,'-' AS `SsYj`,`a`.`InitOrgName` AS `InitOrgName` from ((`ZxBg_A_FkSp` `a` join `ZxBg_A_HtSc` `sc`) join `ZxBg_M_LsXm` `xm`) where ((`a`.`YjLb` = 'd') and (`a`.`YjID` = `sc`.`ID`) and (`sc`.`XmID` = `xm`.`ID`)) union select `ZxBg_A_FkSp`.`ID` AS `ID`,'-' AS `XmMc`,'-' AS `XmBh`,'-' AS `HtMc`,`ZxBg_A_FkSp`.`DjCnt` AS `DjCnt`,`ZxBg_A_FkSp`.`SkrMc` AS `SkrMc`,`ZxBg_A_FkSp`.`Khh` AS `Khh`,`ZxBg_A_FkSp`.`AcctNo` AS `AcctNo`,`ZxBg_A_FkSp`.`FkAmt` AS `FkAmt`,`ZxBg_A_FkSp`.`ZfFs` AS `ZfFs`,`ZxBg_A_FkSp`.`FkSy` AS `FkSy`,ifnull(`ZxBg_A_FkSp`.`HtQdRq`,'-') AS `HtQdRq`,ifnull(`ZxBg_A_FkSp`.`ZjDwRq`,'-') AS `ZjDwRq`,'-' AS `SqLxSj`,'-' AS `XmJj`,0 AS `XmJe`,'N' AS `QqFyYn`,'' AS `JzDcXzCyIDs`,'-' AS `XmScJgMs`,'-' AS `JchSqSj`,'-' AS `JchZkSj`,0 AS `ChTpCnt`,0 AS `PassCnt`,0 AS `RejectCnt`,0 AS `DiscardCnt`,'-' AS `SsYj`,`ZxBg_A_FkSp`.`InitOrgName` AS `InitOrgName` from `ZxBg_A_FkSp` where (`ZxBg_A_FkSp`.`YjLb` = 'e') */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2019-04-22 17:24:25
